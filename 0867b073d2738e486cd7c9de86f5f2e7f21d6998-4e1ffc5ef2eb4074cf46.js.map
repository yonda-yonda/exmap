{"version":3,"file":"0867b073d2738e486cd7c9de86f5f2e7f21d6998-4e1ffc5ef2eb4074cf46.js","mappings":"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","sources":["webpack://exmap/./node_modules/@mui/icons-material/FileDownload.js","webpack://exmap/./node_modules/@mui/material/InputAdornment/inputAdornmentClasses.js","webpack://exmap/./node_modules/@mui/material/InputAdornment/InputAdornment.js","webpack://exmap/./node_modules/@mui/material/Switch/switchClasses.js","webpack://exmap/./node_modules/@mui/material/Switch/Switch.js","webpack://exmap/./node_modules/@mui/material/useMediaQuery/useMediaQuery.js","webpack://exmap/./node_modules/lodash.throttle/index.js","webpack://exmap/./node_modules/ol/format/FormatType.js","webpack://exmap/./node_modules/ol/Feature.js","webpack://exmap/./node_modules/ol/geom/GeometryCollection.js","webpack://exmap/./node_modules/ol/format/Feature.js","webpack://exmap/./node_modules/ol/format/JSONFeature.js","webpack://exmap/./node_modules/ol/geom/flat/interpolate.js","webpack://exmap/./node_modules/ol/geom/LineString.js","webpack://exmap/./node_modules/ol/geom/MultiLineString.js","webpack://exmap/./node_modules/ol/geom/MultiPoint.js","webpack://exmap/./node_modules/ol/geom/MultiPolygon.js","webpack://exmap/./node_modules/ol/geom/flat/center.js","webpack://exmap/./node_modules/ol/format/GeoJSON.js","webpack://exmap/./node_modules/ol/geom/flat/length.js","webpack://exmap/./node_modules/ol/style/Image.js","webpack://exmap/./node_modules/ol/colorlike.js","webpack://exmap/./node_modules/ol/style/RegularShape.js","webpack://exmap/./node_modules/ol/style/Circle.js","webpack://exmap/./node_modules/ol/style/Fill.js","webpack://exmap/./node_modules/ol/style/Stroke.js","webpack://exmap/./node_modules/ol/style/Style.js","webpack://exmap/./node_modules/ol/layer/BaseVector.js","webpack://exmap/./node_modules/ol/render/canvas/Instruction.js","webpack://exmap/./node_modules/ol/render/VectorContext.js","webpack://exmap/./node_modules/ol/render/canvas/Builder.js","webpack://exmap/./node_modules/ol/render/canvas/ImageBuilder.js","webpack://exmap/./node_modules/ol/render/canvas/LineStringBuilder.js","webpack://exmap/./node_modules/ol/render/canvas/PolygonBuilder.js","webpack://exmap/./node_modules/ol/style/TextPlacement.js","webpack://exmap/./node_modules/ol/geom/flat/straightchunk.js","webpack://exmap/./node_modules/ol/render/canvas/TextBuilder.js","webpack://exmap/./node_modules/ol/render/canvas/BuilderGroup.js","webpack://exmap/./node_modules/ol/render/canvas/BuilderType.js","webpack://exmap/./node_modules/ol/geom/flat/textpath.js","webpack://exmap/./node_modules/ol/render/canvas/Executor.js","webpack://exmap/./node_modules/ol/render/canvas/ExecutorGroup.js","webpack://exmap/./node_modules/ol/render/canvas/Immediate.js","webpack://exmap/./node_modules/ol/style/IconAnchorUnits.js","webpack://exmap/./node_modules/ol/style/IconOrigin.js","webpack://exmap/./node_modules/ol/style/IconImage.js","webpack://exmap/./node_modules/ol/style/Icon.js","webpack://exmap/./node_modules/ol/render/canvas/hitdetect.js","webpack://exmap/./node_modules/ol/renderer/vector.js","webpack://exmap/./node_modules/ol/renderer/canvas/VectorLayer.js","webpack://exmap/./node_modules/ol/layer/Vector.js","webpack://exmap/./node_modules/ol/structs/RBush.js","webpack://exmap/./node_modules/ol/source/VectorEventType.js","webpack://exmap/./node_modules/ol/loadingstrategy.js","webpack://exmap/./node_modules/ol/featureloader.js","webpack://exmap/./node_modules/ol/source/Vector.js","webpack://exmap/./node_modules/rbush/rbush.min.js","webpack://exmap/./node_modules/react-scroll/modules/components/Button.js","webpack://exmap/./node_modules/react-scroll/modules/components/Element.js","webpack://exmap/./node_modules/react-scroll/modules/components/Link.js","webpack://exmap/./node_modules/react-scroll/modules/index.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/Helpers.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/animate-scroll.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/cancel-events.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/passive-event-listeners.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/scroll-element.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/scroll-events.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/scroll-hash.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/scroll-link.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/scroll-spy.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/scroller.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/smooth.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/utils.js","webpack://exmap/./src/scripts/file.ts","webpack://exmap/./src/scripts/geojson.ts"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n}), 'FileDownload');\n\nexports.default = _default;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getInputAdornmentUtilityClass(slot) {\n  return generateUtilityClass('MuiInputAdornment', slot);\n}\nvar inputAdornmentClasses = generateUtilityClasses('MuiInputAdornment', ['root', 'filled', 'standard', 'outlined', 'positionStart', 'positionEnd', 'disablePointerEvents', 'hiddenLabel', 'sizeSmall']);\nexport default inputAdornmentClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"children\", \"className\", \"component\", \"disablePointerEvents\", \"disableTypography\", \"position\", \"variant\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport capitalize from '../utils/capitalize';\nimport Typography from '../Typography';\nimport FormControlContext from '../FormControl/FormControlContext';\nimport useFormControl from '../FormControl/useFormControl';\nimport styled from '../styles/styled';\nimport inputAdornmentClasses, { getInputAdornmentUtilityClass } from './inputAdornmentClasses';\nimport useThemeProps from '../styles/useThemeProps';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar overridesResolver = function overridesResolver(props, styles) {\n  var ownerState = props.ownerState;\n  return [styles.root, styles[\"position\".concat(capitalize(ownerState.position))], ownerState.disablePointerEvents === true && styles.disablePointerEvents, styles[ownerState.variant]];\n};\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      disablePointerEvents = ownerState.disablePointerEvents,\n      hiddenLabel = ownerState.hiddenLabel,\n      position = ownerState.position,\n      size = ownerState.size,\n      variant = ownerState.variant;\n  var slots = {\n    root: ['root', disablePointerEvents && 'disablePointerEvents', position && \"position\".concat(capitalize(position)), variant, hiddenLabel && 'hiddenLabel', size && \"size\".concat(capitalize(size))]\n  };\n  return composeClasses(slots, getInputAdornmentUtilityClass, classes);\n};\n\nvar InputAdornmentRoot = styled('div', {\n  name: 'MuiInputAdornment',\n  slot: 'Root',\n  overridesResolver: overridesResolver\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    display: 'flex',\n    height: '0.01em',\n    // Fix IE11 flexbox alignment. To remove at some point.\n    maxHeight: '2em',\n    alignItems: 'center',\n    whiteSpace: 'nowrap',\n    color: theme.palette.action.active\n  }, ownerState.variant === 'filled' && _defineProperty({}, \"&.\".concat(inputAdornmentClasses.positionStart, \"&:not(.\").concat(inputAdornmentClasses.hiddenLabel, \")\"), {\n    marginTop: 16\n  }), ownerState.position === 'start' && {\n    // Styles applied to the root element if `position=\"start\"`.\n    marginRight: 8\n  }, ownerState.position === 'end' && {\n    // Styles applied to the root element if `position=\"end\"`.\n    marginLeft: 8\n  }, ownerState.disablePointerEvents === true && {\n    // Styles applied to the root element if `disablePointerEvents={true}`.\n    pointerEvents: 'none'\n  });\n});\nvar InputAdornment = /*#__PURE__*/React.forwardRef(function InputAdornment(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiInputAdornment'\n  });\n\n  var children = props.children,\n      className = props.className,\n      _props$component = props.component,\n      component = _props$component === void 0 ? 'div' : _props$component,\n      _props$disablePointer = props.disablePointerEvents,\n      disablePointerEvents = _props$disablePointer === void 0 ? false : _props$disablePointer,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      position = props.position,\n      variantProp = props.variant,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var muiFormControl = useFormControl() || {};\n  var variant = variantProp;\n\n  if (variantProp && muiFormControl.variant) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (variantProp === muiFormControl.variant) {\n        console.error('MUI: The `InputAdornment` variant infers the variant prop ' + 'you do not have to provide one.');\n      }\n    }\n  }\n\n  if (muiFormControl && !variant) {\n    variant = muiFormControl.variant;\n  }\n\n  var ownerState = _extends({}, props, {\n    hiddenLabel: muiFormControl.hiddenLabel,\n    size: muiFormControl.size,\n    disablePointerEvents: disablePointerEvents,\n    position: position,\n    variant: variant\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(FormControlContext.Provider, {\n    value: null,\n    children: /*#__PURE__*/_jsx(InputAdornmentRoot, _extends({\n      as: component,\n      ownerState: ownerState,\n      className: clsx(classes.root, className),\n      ref: ref\n    }, other, {\n      children: typeof children === 'string' && !disableTypography ? /*#__PURE__*/_jsx(Typography, {\n        color: \"text.secondary\",\n        children: children\n      }) : /*#__PURE__*/_jsxs(React.Fragment, {\n        children: [position === 'start' ?\n        /*#__PURE__*/\n\n        /* notranslate needed while Google Translate will not fix zero-width space issue */\n\n        /* eslint-disable-next-line react/no-danger */\n        _jsx(\"span\", {\n          className: \"notranslate\",\n          dangerouslySetInnerHTML: {\n            __html: '&#8203;'\n          }\n        }) : null, children]\n      })\n    }))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default InputAdornment;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getSwitchUtilityClass(slot) {\n  return generateUtilityClass('MuiSwitch', slot);\n}\nvar switchClasses = generateUtilityClasses('MuiSwitch', ['root', 'edgeStart', 'edgeEnd', 'switchBase', 'colorPrimary', 'colorSecondary', 'sizeSmall', 'sizeMedium', 'checked', 'disabled', 'input', 'thumb', 'track']);\nexport default switchClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"className\", \"color\", \"edge\", \"size\", \"sx\"]; // @inheritedComponent IconButton\n\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@mui/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport { alpha, darken, lighten } from '@mui/system';\nimport capitalize from '../utils/capitalize';\nimport SwitchBase from '../internal/SwitchBase';\nimport useThemeProps from '../styles/useThemeProps';\nimport styled from '../styles/styled';\nimport switchClasses, { getSwitchUtilityClass } from './switchClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      edge = ownerState.edge,\n      size = ownerState.size,\n      color = ownerState.color,\n      checked = ownerState.checked,\n      disabled = ownerState.disabled;\n  var slots = {\n    root: ['root', edge && \"edge\".concat(capitalize(edge)), \"size\".concat(capitalize(size))],\n    switchBase: ['switchBase', \"color\".concat(capitalize(color)), checked && 'checked', disabled && 'disabled'],\n    thumb: ['thumb'],\n    track: ['track'],\n    input: ['input']\n  };\n  var composedClasses = composeClasses(slots, getSwitchUtilityClass, classes);\n  return _extends({}, classes, composedClasses);\n};\n\nvar SwitchRoot = styled('span', {\n  name: 'MuiSwitch',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, ownerState.edge && styles[\"edge\".concat(capitalize(ownerState.edge))], styles[\"size\".concat(capitalize(ownerState.size))]];\n  }\n})(function (_ref) {\n  var _ref2;\n\n  var ownerState = _ref.ownerState;\n  return _extends({\n    display: 'inline-flex',\n    width: 34 + 12 * 2,\n    height: 14 + 12 * 2,\n    overflow: 'hidden',\n    padding: 12,\n    boxSizing: 'border-box',\n    position: 'relative',\n    flexShrink: 0,\n    zIndex: 0,\n    // Reset the stacking context.\n    verticalAlign: 'middle',\n    // For correct alignment with the text.\n    '@media print': {\n      colorAdjust: 'exact'\n    }\n  }, ownerState.edge === 'start' && {\n    marginLeft: -8\n  }, ownerState.edge === 'end' && {\n    marginRight: -8\n  }, ownerState.size === 'small' && (_ref2 = {\n    width: 40,\n    height: 24,\n    padding: 7\n  }, _defineProperty(_ref2, \"& .\".concat(switchClasses.thumb), {\n    width: 16,\n    height: 16\n  }), _defineProperty(_ref2, \"& .\".concat(switchClasses.switchBase), _defineProperty({\n    padding: 4\n  }, \"&.\".concat(switchClasses.checked), {\n    transform: 'translateX(16px)'\n  })), _ref2));\n});\nvar SwitchSwitchBase = styled(SwitchBase, {\n  name: 'MuiSwitch',\n  slot: 'SwitchBase',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.switchBase, _defineProperty({}, \"& .\".concat(switchClasses.input), styles.input), ownerState.color !== 'default' && styles[\"color\".concat(capitalize(ownerState.color))]];\n  }\n})(function (_ref4) {\n  var _ref5;\n\n  var theme = _ref4.theme;\n  return _ref5 = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    zIndex: 1,\n    // Render above the focus ripple.\n    color: theme.palette.mode === 'light' ? theme.palette.common.white : theme.palette.grey[300],\n    transition: theme.transitions.create(['left', 'transform'], {\n      duration: theme.transitions.duration.shortest\n    })\n  }, _defineProperty(_ref5, \"&.\".concat(switchClasses.checked), {\n    transform: 'translateX(20px)'\n  }), _defineProperty(_ref5, \"&.\".concat(switchClasses.disabled), {\n    color: theme.palette.mode === 'light' ? theme.palette.grey[100] : theme.palette.grey[600]\n  }), _defineProperty(_ref5, \"&.\".concat(switchClasses.checked, \" + .\").concat(switchClasses.track), {\n    opacity: 0.5\n  }), _defineProperty(_ref5, \"&.\".concat(switchClasses.disabled, \" + .\").concat(switchClasses.track), {\n    opacity: theme.palette.mode === 'light' ? 0.12 : 0.2\n  }), _defineProperty(_ref5, \"& .\".concat(switchClasses.input), {\n    left: '-100%',\n    width: '300%'\n  }), _ref5;\n}, function (_ref6) {\n  var _ref7;\n\n  var theme = _ref6.theme,\n      ownerState = _ref6.ownerState;\n  return _extends({\n    '&:hover': {\n      backgroundColor: alpha(theme.palette.action.active, theme.palette.action.hoverOpacity),\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    }\n  }, ownerState.color !== 'default' && (_ref7 = {}, _defineProperty(_ref7, \"&.\".concat(switchClasses.checked), _defineProperty({\n    color: theme.palette[ownerState.color].main,\n    '&:hover': {\n      backgroundColor: alpha(theme.palette[ownerState.color].main, theme.palette.action.hoverOpacity),\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    }\n  }, \"&.\".concat(switchClasses.disabled), {\n    color: theme.palette.mode === 'light' ? lighten(theme.palette[ownerState.color].main, 0.62) : darken(theme.palette[ownerState.color].main, 0.55)\n  })), _defineProperty(_ref7, \"&.\".concat(switchClasses.checked, \" + .\").concat(switchClasses.track), {\n    backgroundColor: theme.palette[ownerState.color].main\n  }), _ref7));\n});\nvar SwitchTrack = styled('span', {\n  name: 'MuiSwitch',\n  slot: 'Track',\n  overridesResolver: function overridesResolver(props, styles) {\n    return styles.track;\n  }\n})(function (_ref8) {\n  var theme = _ref8.theme;\n  return {\n    height: '100%',\n    width: '100%',\n    borderRadius: 14 / 2,\n    zIndex: -1,\n    transition: theme.transitions.create(['opacity', 'background-color'], {\n      duration: theme.transitions.duration.shortest\n    }),\n    backgroundColor: theme.palette.mode === 'light' ? theme.palette.common.black : theme.palette.common.white,\n    opacity: theme.palette.mode === 'light' ? 0.38 : 0.3\n  };\n});\nvar SwitchThumb = styled('span', {\n  name: 'MuiSwitch',\n  slot: 'Thumb',\n  overridesResolver: function overridesResolver(props, styles) {\n    return styles.thumb;\n  }\n})(function (_ref9) {\n  var theme = _ref9.theme;\n  return {\n    boxShadow: theme.shadows[1],\n    backgroundColor: 'currentColor',\n    width: 20,\n    height: 20,\n    borderRadius: '50%'\n  };\n});\nvar Switch = /*#__PURE__*/React.forwardRef(function Switch(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiSwitch'\n  });\n\n  var className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$edge = props.edge,\n      edge = _props$edge === void 0 ? false : _props$edge,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      sx = props.sx,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    color: color,\n    edge: edge,\n    size: size\n  });\n\n  var classes = useUtilityClasses(ownerState);\n\n  var icon = /*#__PURE__*/_jsx(SwitchThumb, {\n    className: classes.thumb,\n    ownerState: ownerState\n  });\n\n  return /*#__PURE__*/_jsxs(SwitchRoot, {\n    className: clsx(classes.root, className),\n    sx: sx,\n    ownerState: ownerState,\n    children: [/*#__PURE__*/_jsx(SwitchSwitchBase, _extends({\n      type: \"checkbox\",\n      icon: icon,\n      checkedIcon: icon,\n      ref: ref,\n      ownerState: ownerState\n    }, other, {\n      classes: _extends({}, classes, {\n        root: classes.switchBase\n      })\n    })), /*#__PURE__*/_jsx(SwitchTrack, {\n      className: classes.track,\n      ownerState: ownerState\n    })]\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default Switch;","import _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport * as React from 'react';\nimport { getThemeProps, useThemeWithoutDefault as useTheme } from '@mui/system';\nimport useEnhancedEffect from '../utils/useEnhancedEffect';\n/**\n * @deprecated Not used internally. Use `MediaQueryListEvent` from lib.dom.d.ts instead.\n */\n\nexport default function useMediaQuery(queryInput) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var theme = useTheme(); // Wait for jsdom to support the match media feature.\n  // All the browsers MUI support have this built-in.\n  // This defensive check is here for simplicity.\n  // Most of the time, the match media logic isn't central to people tests.\n\n  var supportMatchMedia = typeof window !== 'undefined' && typeof window.matchMedia !== 'undefined';\n\n  var _getThemeProps = getThemeProps({\n    name: 'MuiUseMediaQuery',\n    props: options,\n    theme: theme\n  }),\n      _getThemeProps$defaul = _getThemeProps.defaultMatches,\n      defaultMatches = _getThemeProps$defaul === void 0 ? false : _getThemeProps$defaul,\n      _getThemeProps$matchM = _getThemeProps.matchMedia,\n      matchMedia = _getThemeProps$matchM === void 0 ? supportMatchMedia ? window.matchMedia : null : _getThemeProps$matchM,\n      _getThemeProps$noSsr = _getThemeProps.noSsr,\n      noSsr = _getThemeProps$noSsr === void 0 ? false : _getThemeProps$noSsr,\n      _getThemeProps$ssrMat = _getThemeProps.ssrMatchMedia,\n      ssrMatchMedia = _getThemeProps$ssrMat === void 0 ? null : _getThemeProps$ssrMat;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof queryInput === 'function' && theme === null) {\n      console.error(['MUI: The `query` argument provided is invalid.', 'You are providing a function without a theme in the context.', 'One of the parent elements needs to use a ThemeProvider.'].join('\\n'));\n    }\n  }\n\n  var query = typeof queryInput === 'function' ? queryInput(theme) : queryInput;\n  query = query.replace(/^@media( ?)/m, '');\n\n  var _React$useState = React.useState(function () {\n    if (noSsr && supportMatchMedia) {\n      return matchMedia(query).matches;\n    }\n\n    if (ssrMatchMedia) {\n      return ssrMatchMedia(query).matches;\n    } // Once the component is mounted, we rely on the\n    // event listeners to return the correct matches value.\n\n\n    // Once the component is mounted, we rely on the\n    // event listeners to return the correct matches value.\n    return defaultMatches;\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      match = _React$useState2[0],\n      setMatch = _React$useState2[1];\n\n  useEnhancedEffect(function () {\n    var active = true;\n\n    if (!supportMatchMedia) {\n      return undefined;\n    }\n\n    var queryList = matchMedia(query);\n\n    var updateMatch = function updateMatch() {\n      // Workaround Safari wrong implementation of matchMedia\n      // TODO can we remove it?\n      // https://github.com/mui-org/material-ui/pull/17315#issuecomment-528286677\n      if (active) {\n        setMatch(queryList.matches);\n      }\n    };\n\n    updateMatch();\n    queryList.addListener(updateMatch);\n    return function () {\n      active = false;\n      queryList.removeListener(updateMatch);\n    };\n  }, [query, matchMedia, supportMatchMedia]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useDebugValue({\n      query: query,\n      match: match\n    });\n  }\n\n  return match;\n}","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n/** Used as references for various `Number` constants. */\n\nvar NAN = 0 / 0;\n/** `Object#toString` result references. */\n\nvar symbolTag = '[object Symbol]';\n/** Used to match leading and trailing whitespace. */\n\nvar reTrim = /^\\s+|\\s+$/g;\n/** Used to detect bad signed hexadecimal string values. */\n\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n/** Used to detect binary string values. */\n\nvar reIsBinary = /^0b[01]+$/i;\n/** Used to detect octal string values. */\n\nvar reIsOctal = /^0o[0-7]+$/i;\n/** Built-in method references without a dependency on `root`. */\n\nvar freeParseInt = parseInt;\n/** Detect free variable `global` from Node.js. */\n\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n/** Detect free variable `self`. */\n\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n/** Used as a reference to the global object. */\n\nvar root = freeGlobal || freeSelf || Function('return this')();\n/** Used for built-in method references. */\n\nvar objectProto = Object.prototype;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar objectToString = objectProto.toString;\n/* Built-in method references for those with the same name as other `lodash` methods. */\n\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\n\nvar now = function now() {\n  return root.Date.now();\n};\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\n\n\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  wait = toNumber(wait) || 0;\n\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time; // Start the timer for the trailing edge.\n\n    timerId = setTimeout(timerExpired, wait); // Invoke the leading edge.\n\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime; // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n\n    return lastCallTime === undefined || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n  }\n\n  function timerExpired() {\n    var time = now();\n\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    } // Restart the timer.\n\n\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined; // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n\n    return result;\n  }\n\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\n\n\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\n\n\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\n\n\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\n\n\nfunction isSymbol(value) {\n  return typeof value == 'symbol' || isObjectLike(value) && objectToString.call(value) == symbolTag;\n}\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\n\n\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n\n  if (isSymbol(value)) {\n    return NAN;\n  }\n\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? other + '' : other;\n  }\n\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n}\n\nmodule.exports = throttle;","/**\n * @module ol/format/FormatType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ARRAY_BUFFER: 'arraybuffer',\n  JSON: 'json',\n  TEXT: 'text',\n  XML: 'xml'\n};","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/Feature\n */\n\n\nimport BaseObject from './Object.js';\nimport EventType from './events/EventType.js';\nimport { assert } from './asserts.js';\nimport { listen, unlistenByKey } from './events.js';\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n\n/**\n * @typedef {Feature<import(\"./geom/Geometry.js\").default>|import(\"./render/Feature.js\").default} FeatureLike\n */\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:geometry', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types\n *     |'change:geometry', Return>} FeatureOnSignature\n */\n\n/***\n * @template Geometry\n * @typedef {Object<string, *> & { geometry?: Geometry }} ObjectWithGeometry\n */\n\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} Geometry\n */\n\nvar Feature =\n/** @class */\nfunction (_super) {\n  __extends(Feature, _super);\n  /**\n   * @param {Geometry|ObjectWithGeometry<Geometry>} [opt_geometryOrProperties]\n   *     You may pass a Geometry object directly, or an object literal containing\n   *     properties. If you pass an object literal, you may include a Geometry\n   *     associated with a `geometry` key.\n   */\n\n\n  function Feature(opt_geometryOrProperties) {\n    var _this = _super.call(this) || this;\n    /***\n     * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n     */\n\n\n    _this.on;\n    /***\n     * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n     */\n\n    _this.once;\n    /***\n     * @type {FeatureOnSignature<void>}\n     */\n\n    _this.un;\n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n\n    _this.id_ = undefined;\n    /**\n     * @type {string}\n     * @private\n     */\n\n    _this.geometryName_ = 'geometry';\n    /**\n     * User provided style.\n     * @private\n     * @type {import(\"./style/Style.js\").StyleLike}\n     */\n\n    _this.style_ = null;\n    /**\n     * @private\n     * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n     */\n\n    _this.styleFunction_ = undefined;\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n\n    _this.geometryChangeKey_ = null;\n\n    _this.addChangeListener(_this.geometryName_, _this.handleGeometryChanged_);\n\n    if (opt_geometryOrProperties) {\n      if (typeof\n      /** @type {?} */\n      opt_geometryOrProperties.getSimplifiedGeometry === 'function') {\n        var geometry =\n        /** @type {Geometry} */\n        opt_geometryOrProperties;\n\n        _this.setGeometry(geometry);\n      } else {\n        /** @type {Object<string, *>} */\n        var properties = opt_geometryOrProperties;\n\n        _this.setProperties(properties);\n      }\n    }\n\n    return _this;\n  }\n  /**\n   * Clone this feature. If the original feature has a geometry it\n   * is also cloned. The feature id is not set in the clone.\n   * @return {Feature<Geometry>} The clone.\n   * @api\n   */\n\n\n  Feature.prototype.clone = function () {\n    var clone =\n    /** @type {Feature<Geometry>} */\n    new Feature(this.hasProperties() ? this.getProperties() : null);\n    clone.setGeometryName(this.getGeometryName());\n    var geometry = this.getGeometry();\n\n    if (geometry) {\n      clone.setGeometry(\n      /** @type {Geometry} */\n      geometry.clone());\n    }\n\n    var style = this.getStyle();\n\n    if (style) {\n      clone.setStyle(style);\n    }\n\n    return clone;\n  };\n  /**\n   * Get the feature's default geometry.  A feature may have any number of named\n   * geometries.  The \"default\" geometry (the one that is rendered by default) is\n   * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n   * @return {Geometry|undefined} The default geometry for the feature.\n   * @api\n   * @observable\n   */\n\n\n  Feature.prototype.getGeometry = function () {\n    return (\n      /** @type {Geometry|undefined} */\n      this.get(this.geometryName_)\n    );\n  };\n  /**\n   * Get the feature identifier.  This is a stable identifier for the feature and\n   * is either set when reading data from a remote source or set explicitly by\n   * calling {@link module:ol/Feature~Feature#setId}.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n\n\n  Feature.prototype.getId = function () {\n    return this.id_;\n  };\n  /**\n   * Get the name of the feature's default geometry.  By default, the default\n   * geometry is named `geometry`.\n   * @return {string} Get the property name associated with the default geometry\n   *     for this feature.\n   * @api\n   */\n\n\n  Feature.prototype.getGeometryName = function () {\n    return this.geometryName_;\n  };\n  /**\n   * Get the feature's style. Will return what was provided to the\n   * {@link module:ol/Feature~Feature#setStyle} method.\n   * @return {import(\"./style/Style.js\").StyleLike|undefined} The feature style.\n   * @api\n   */\n\n\n  Feature.prototype.getStyle = function () {\n    return this.style_;\n  };\n  /**\n   * Get the feature's style function.\n   * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n   * representing the current style of this feature.\n   * @api\n   */\n\n\n  Feature.prototype.getStyleFunction = function () {\n    return this.styleFunction_;\n  };\n  /**\n   * @private\n   */\n\n\n  Feature.prototype.handleGeometryChange_ = function () {\n    this.changed();\n  };\n  /**\n   * @private\n   */\n\n\n  Feature.prototype.handleGeometryChanged_ = function () {\n    if (this.geometryChangeKey_) {\n      unlistenByKey(this.geometryChangeKey_);\n      this.geometryChangeKey_ = null;\n    }\n\n    var geometry = this.getGeometry();\n\n    if (geometry) {\n      this.geometryChangeKey_ = listen(geometry, EventType.CHANGE, this.handleGeometryChange_, this);\n    }\n\n    this.changed();\n  };\n  /**\n   * Set the default geometry for the feature.  This will update the property\n   * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n   * @param {Geometry|undefined} geometry The new geometry.\n   * @api\n   * @observable\n   */\n\n\n  Feature.prototype.setGeometry = function (geometry) {\n    this.set(this.geometryName_, geometry);\n  };\n  /**\n   * Set the style for the feature to override the layer style.  This can be a\n   * single style object, an array of styles, or a function that takes a\n   * resolution and returns an array of styles. To unset the feature style, call\n   * `setStyle()` without arguments or a falsey value.\n   * @param {import(\"./style/Style.js\").StyleLike} [opt_style] Style for this feature.\n   * @api\n   * @fires module:ol/events/Event~BaseEvent#event:change\n   */\n\n\n  Feature.prototype.setStyle = function (opt_style) {\n    this.style_ = opt_style;\n    this.styleFunction_ = !opt_style ? undefined : createStyleFunction(opt_style);\n    this.changed();\n  };\n  /**\n   * Set the feature id.  The feature id is considered stable and may be used when\n   * requesting features or comparing identifiers returned from a remote source.\n   * The feature id can be used with the\n   * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n   * @param {number|string|undefined} id The feature id.\n   * @api\n   * @fires module:ol/events/Event~BaseEvent#event:change\n   */\n\n\n  Feature.prototype.setId = function (id) {\n    this.id_ = id;\n    this.changed();\n  };\n  /**\n   * Set the property name to be used when getting the feature's default geometry.\n   * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n   * this name will be returned.\n   * @param {string} name The property name of the default geometry.\n   * @api\n   */\n\n\n  Feature.prototype.setGeometryName = function (name) {\n    this.removeChangeListener(this.geometryName_, this.handleGeometryChanged_);\n    this.geometryName_ = name;\n    this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n    this.handleGeometryChanged_();\n  };\n\n  return Feature;\n}(BaseObject);\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\n\n\nexport function createStyleFunction(obj) {\n  if (typeof obj === 'function') {\n    return obj;\n  } else {\n    /**\n     * @type {Array<import(\"./style/Style.js\").default>}\n     */\n    var styles_1;\n\n    if (Array.isArray(obj)) {\n      styles_1 = obj;\n    } else {\n      assert(typeof\n      /** @type {?} */\n      obj.getZIndex === 'function', 41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n\n      var style =\n      /** @type {import(\"./style/Style.js\").default} */\n      obj;\n      styles_1 = [style];\n    }\n\n    return function () {\n      return styles_1;\n    };\n  }\n}\nexport default Feature;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/geom/GeometryCollection\n */\n\n\nimport EventType from '../events/EventType.js';\nimport Geometry from './Geometry.js';\nimport GeometryType from './GeometryType.js';\nimport { closestSquaredDistanceXY, createOrUpdateEmpty, extend, getCenter } from '../extent.js';\nimport { listen, unlistenByKey } from '../events.js';\n/**\n * @classdesc\n * An array of {@link module:ol/geom/Geometry} objects.\n *\n * @api\n */\n\nvar GeometryCollection =\n/** @class */\nfunction (_super) {\n  __extends(GeometryCollection, _super);\n  /**\n   * @param {Array<Geometry>} [opt_geometries] Geometries.\n   */\n\n\n  function GeometryCollection(opt_geometries) {\n    var _this = _super.call(this) || this;\n    /**\n     * @private\n     * @type {Array<Geometry>}\n     */\n\n\n    _this.geometries_ = opt_geometries ? opt_geometries : null;\n    /**\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n\n    _this.changeEventsKeys_ = [];\n\n    _this.listenGeometriesChange_();\n\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  GeometryCollection.prototype.unlistenGeometriesChange_ = function () {\n    this.changeEventsKeys_.forEach(unlistenByKey);\n    this.changeEventsKeys_.length = 0;\n  };\n  /**\n   * @private\n   */\n\n\n  GeometryCollection.prototype.listenGeometriesChange_ = function () {\n    if (!this.geometries_) {\n      return;\n    }\n\n    for (var i = 0, ii = this.geometries_.length; i < ii; ++i) {\n      this.changeEventsKeys_.push(listen(this.geometries_[i], EventType.CHANGE, this.changed, this));\n    }\n  };\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!GeometryCollection} Clone.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.clone = function () {\n    var geometryCollection = new GeometryCollection(null);\n    geometryCollection.setGeometries(this.geometries_);\n    geometryCollection.applyProperties(this);\n    return geometryCollection;\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n\n\n  GeometryCollection.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      minSquaredDistance = geometries[i].closestPointXY(x, y, closestPoint, minSquaredDistance);\n    }\n\n    return minSquaredDistance;\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @return {boolean} Contains (x, y).\n   */\n\n\n  GeometryCollection.prototype.containsXY = function (x, y) {\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].containsXY(x, y)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @protected\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   */\n\n\n  GeometryCollection.prototype.computeExtent = function (extent) {\n    createOrUpdateEmpty(extent);\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      extend(extent, geometries[i].getExtent());\n    }\n\n    return extent;\n  };\n  /**\n   * Return the geometries that make up this geometry collection.\n   * @return {Array<Geometry>} Geometries.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.getGeometries = function () {\n    return cloneGeometries(this.geometries_);\n  };\n  /**\n   * @return {Array<Geometry>} Geometries.\n   */\n\n\n  GeometryCollection.prototype.getGeometriesArray = function () {\n    return this.geometries_;\n  };\n  /**\n   * @return {Array<Geometry>} Geometries.\n   */\n\n\n  GeometryCollection.prototype.getGeometriesArrayRecursive = function () {\n    /** @type {Array<Geometry>} */\n    var geometriesArray = [];\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].getType() === this.getType()) {\n        geometriesArray = geometriesArray.concat(\n        /** @type {GeometryCollection} */\n        geometries[i].getGeometriesArrayRecursive());\n      } else {\n        geometriesArray.push(geometries[i]);\n      }\n    }\n\n    return geometriesArray;\n  };\n  /**\n   * Create a simplified version of this geometry using the Douglas Peucker algorithm.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {GeometryCollection} Simplified GeometryCollection.\n   */\n\n\n  GeometryCollection.prototype.getSimplifiedGeometry = function (squaredTolerance) {\n    if (this.simplifiedGeometryRevision !== this.getRevision()) {\n      this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n      this.simplifiedGeometryRevision = this.getRevision();\n    }\n\n    if (squaredTolerance < 0 || this.simplifiedGeometryMaxMinSquaredTolerance !== 0 && squaredTolerance < this.simplifiedGeometryMaxMinSquaredTolerance) {\n      return this;\n    }\n\n    var simplifiedGeometries = [];\n    var geometries = this.geometries_;\n    var simplified = false;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      var geometry = geometries[i];\n      var simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n      simplifiedGeometries.push(simplifiedGeometry);\n\n      if (simplifiedGeometry !== geometry) {\n        simplified = true;\n      }\n    }\n\n    if (simplified) {\n      var simplifiedGeometryCollection = new GeometryCollection(null);\n      simplifiedGeometryCollection.setGeometriesArray(simplifiedGeometries);\n      return simplifiedGeometryCollection;\n    } else {\n      this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n      return this;\n    }\n  };\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./GeometryType.js\").default} Geometry type.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.getType = function () {\n    return GeometryType.GEOMETRY_COLLECTION;\n  };\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.intersectsExtent = function (extent) {\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].intersectsExtent(extent)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n  /**\n   * @return {boolean} Is empty.\n   */\n\n\n  GeometryCollection.prototype.isEmpty = function () {\n    return this.geometries_.length === 0;\n  };\n  /**\n   * Rotate the geometry around a given coordinate. This modifies the geometry\n   * coordinates in place.\n   * @param {number} angle Rotation angle in radians.\n   * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.rotate = function (angle, anchor) {\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].rotate(angle, anchor);\n    }\n\n    this.changed();\n  };\n  /**\n   * Scale the geometry (with an optional origin).  This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} sx The scaling factor in the x-direction.\n   * @param {number} [opt_sy] The scaling factor in the y-direction (defaults to sx).\n   * @param {import(\"../coordinate.js\").Coordinate} [opt_anchor] The scale origin (defaults to the center\n   *     of the geometry extent).\n   * @api\n   */\n\n\n  GeometryCollection.prototype.scale = function (sx, opt_sy, opt_anchor) {\n    var anchor = opt_anchor;\n\n    if (!anchor) {\n      anchor = getCenter(this.getExtent());\n    }\n\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].scale(sx, opt_sy, anchor);\n    }\n\n    this.changed();\n  };\n  /**\n   * Set the geometries that make up this geometry collection.\n   * @param {Array<Geometry>} geometries Geometries.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.setGeometries = function (geometries) {\n    this.setGeometriesArray(cloneGeometries(geometries));\n  };\n  /**\n   * @param {Array<Geometry>} geometries Geometries.\n   */\n\n\n  GeometryCollection.prototype.setGeometriesArray = function (geometries) {\n    this.unlistenGeometriesChange_();\n    this.geometries_ = geometries;\n    this.listenGeometriesChange_();\n    this.changed();\n  };\n  /**\n   * Apply a transform function to the coordinates of the geometry.\n   * The geometry is modified in place.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   * @param {import(\"../proj.js\").TransformFunction} transformFn Transform function.\n   * Called with a flat array of geometry coordinates.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.applyTransform = function (transformFn) {\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].applyTransform(transformFn);\n    }\n\n    this.changed();\n  };\n  /**\n   * Translate the geometry.  This modifies the geometry coordinates in place.  If\n   * instead you want a new geometry, first `clone()` this geometry.\n   * @param {number} deltaX Delta X.\n   * @param {number} deltaY Delta Y.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.translate = function (deltaX, deltaY) {\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].translate(deltaX, deltaY);\n    }\n\n    this.changed();\n  };\n  /**\n   * Clean up.\n   */\n\n\n  GeometryCollection.prototype.disposeInternal = function () {\n    this.unlistenGeometriesChange_();\n\n    _super.prototype.disposeInternal.call(this);\n  };\n\n  return GeometryCollection;\n}(Geometry);\n/**\n * @param {Array<Geometry>} geometries Geometries.\n * @return {Array<Geometry>} Cloned geometries.\n */\n\n\nfunction cloneGeometries(geometries) {\n  var clonedGeometries = [];\n\n  for (var i = 0, ii = geometries.length; i < ii; ++i) {\n    clonedGeometries.push(geometries[i].clone());\n  }\n\n  return clonedGeometries;\n}\n\nexport default GeometryCollection;","/**\n * @module ol/format/Feature\n */\nimport Units from '../proj/Units.js';\nimport { abstract } from '../util.js';\nimport { assign } from '../obj.js';\nimport { equivalent as equivalentProjection, get as getProjection, transformExtent } from '../proj.js';\n/**\n * @typedef {Object} ReadOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are reading.\n * If not provided, the projection will be derived from the data (where possible) or\n * the `dataProjection` of the format is assigned (where set). If the projection\n * can not be derived from the data and if no `dataProjection` is set for a format,\n * the features will not be reprojected.\n * @property {import(\"../extent.js\").Extent} [extent] Tile extent in map units of the tile being read.\n * This is only required when reading data with tile pixels as geometry units. When configured,\n * a `dataProjection` with `TILE_PIXELS` as `units` and the tile's pixel extent as `extent` needs to be\n * provided.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * created by the format reader. If not provided, features will be returned in the\n * `dataProjection`.\n */\n\n/**\n * @typedef {Object} WriteOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are writing.\n * If not provided, the `dataProjection` of the format is assigned (where set).\n * If no `dataProjection` is set for a format, the features will be returned\n * in the `featureProjection`.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * that will be serialized by the format writer. If not provided, geometries are assumed\n * to be in the `dataProjection` if that is set; in other words, they are not transformed.\n * @property {boolean} [rightHanded] When writing geometries, follow the right-hand\n * rule for linear ring orientation.  This means that polygons will have counter-clockwise\n * exterior rings and clockwise interior rings.  By default, coordinates are serialized\n * as they are provided at construction.  If `true`, the right-hand rule will\n * be applied.  If `false`, the left-hand rule will be applied (clockwise for\n * exterior and counter-clockwise for interior rings).  Note that not all\n * formats support this.  The GeoJSON format does use this property when writing\n * geometries.\n * @property {number} [decimals] Maximum number of decimal places for coordinates.\n * Coordinates are stored internally as floats, but floating-point arithmetic can create\n * coordinates with a large number of decimal places, not generally wanted on output.\n * Set a number here to round coordinates. Can also be used to ensure that\n * coordinates read in can be written back out with the same number of decimals.\n * Default is no rounding.\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for feature formats.\n * {@link module:ol/format/Feature~FeatureFormat} subclasses provide the ability to decode and encode\n * {@link module:ol/Feature~Feature} objects from a variety of commonly used geospatial\n * file formats.  See the documentation for each format for more details.\n *\n * @abstract\n * @api\n */\n\nvar FeatureFormat =\n/** @class */\nfunction () {\n  function FeatureFormat() {\n    /**\n     * @protected\n     * @type {import(\"../proj/Projection.js\").default|undefined}\n     */\n    this.dataProjection = undefined;\n    /**\n     * @protected\n     * @type {import(\"../proj/Projection.js\").default|undefined}\n     */\n\n    this.defaultFeatureProjection = undefined;\n    /**\n     * A list media types supported by the format in descending order of preference.\n     * @type {Array<string>}\n     */\n\n    this.supportedMediaTypes = null;\n  }\n  /**\n   * Adds the data projection to the read options.\n   * @param {Document|Element|Object|string} source Source.\n   * @param {ReadOptions} [opt_options] Options.\n   * @return {ReadOptions|undefined} Options.\n   * @protected\n   */\n\n\n  FeatureFormat.prototype.getReadOptions = function (source, opt_options) {\n    var options;\n\n    if (opt_options) {\n      var dataProjection = opt_options.dataProjection ? getProjection(opt_options.dataProjection) : this.readProjection(source);\n\n      if (opt_options.extent && dataProjection && dataProjection.getUnits() === Units.TILE_PIXELS) {\n        dataProjection = getProjection(dataProjection);\n        dataProjection.setWorldExtent(opt_options.extent);\n      }\n\n      options = {\n        dataProjection: dataProjection,\n        featureProjection: opt_options.featureProjection\n      };\n    }\n\n    return this.adaptOptions(options);\n  };\n  /**\n   * Sets the `dataProjection` on the options, if no `dataProjection`\n   * is set.\n   * @param {WriteOptions|ReadOptions|undefined} options\n   *     Options.\n   * @protected\n   * @return {WriteOptions|ReadOptions|undefined}\n   *     Updated options.\n   */\n\n\n  FeatureFormat.prototype.adaptOptions = function (options) {\n    return assign({\n      dataProjection: this.dataProjection,\n      featureProjection: this.defaultFeatureProjection\n    }, options);\n  };\n  /**\n   * @abstract\n   * @return {import(\"./FormatType.js\").default} Format.\n   */\n\n\n  FeatureFormat.prototype.getType = function () {\n    return abstract();\n  };\n  /**\n   * Read a single feature from a source.\n   *\n   * @abstract\n   * @param {Document|Element|Object|string} source Source.\n   * @param {ReadOptions} [opt_options] Read options.\n   * @return {import(\"../Feature.js\").FeatureLike} Feature.\n   */\n\n\n  FeatureFormat.prototype.readFeature = function (source, opt_options) {\n    return abstract();\n  };\n  /**\n   * Read all features from a source.\n   *\n   * @abstract\n   * @param {Document|Element|ArrayBuffer|Object|string} source Source.\n   * @param {ReadOptions} [opt_options] Read options.\n   * @return {Array<import(\"../Feature.js\").FeatureLike>} Features.\n   */\n\n\n  FeatureFormat.prototype.readFeatures = function (source, opt_options) {\n    return abstract();\n  };\n  /**\n   * Read a single geometry from a source.\n   *\n   * @abstract\n   * @param {Document|Element|Object|string} source Source.\n   * @param {ReadOptions} [opt_options] Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n\n\n  FeatureFormat.prototype.readGeometry = function (source, opt_options) {\n    return abstract();\n  };\n  /**\n   * Read the projection from a source.\n   *\n   * @abstract\n   * @param {Document|Element|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default|undefined} Projection.\n   */\n\n\n  FeatureFormat.prototype.readProjection = function (source) {\n    return abstract();\n  };\n  /**\n   * Encode a feature in this format.\n   *\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {WriteOptions} [opt_options] Write options.\n   * @return {string|ArrayBuffer} Result.\n   */\n\n\n  FeatureFormat.prototype.writeFeature = function (feature, opt_options) {\n    return abstract();\n  };\n  /**\n   * Encode an array of features in this format.\n   *\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {WriteOptions} [opt_options] Write options.\n   * @return {string|ArrayBuffer} Result.\n   */\n\n\n  FeatureFormat.prototype.writeFeatures = function (features, opt_options) {\n    return abstract();\n  };\n  /**\n   * Write a single geometry in this format.\n   *\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {WriteOptions} [opt_options] Write options.\n   * @return {string|ArrayBuffer} Result.\n   */\n\n\n  FeatureFormat.prototype.writeGeometry = function (geometry, opt_options) {\n    return abstract();\n  };\n\n  return FeatureFormat;\n}();\n\nexport default FeatureFormat;\n/**\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {boolean} write Set to true for writing, false for reading.\n * @param {WriteOptions|ReadOptions} [opt_options] Options.\n * @return {import(\"../geom/Geometry.js\").default} Transformed geometry.\n */\n\nexport function transformGeometryWithOptions(geometry, write, opt_options) {\n  var featureProjection = opt_options ? getProjection(opt_options.featureProjection) : null;\n  var dataProjection = opt_options ? getProjection(opt_options.dataProjection) : null;\n  var transformed;\n\n  if (featureProjection && dataProjection && !equivalentProjection(featureProjection, dataProjection)) {\n    transformed = (write ? geometry.clone() : geometry).transform(write ? featureProjection : dataProjection, write ? dataProjection : featureProjection);\n  } else {\n    transformed = geometry;\n  }\n\n  if (write && opt_options &&\n  /** @type {WriteOptions} */\n  opt_options.decimals !== undefined) {\n    var power_1 = Math.pow(10,\n    /** @type {WriteOptions} */\n    opt_options.decimals); // if decimals option on write, round each coordinate appropriately\n\n    /**\n     * @param {Array<number>} coordinates Coordinates.\n     * @return {Array<number>} Transformed coordinates.\n     */\n\n    var transform = function transform(coordinates) {\n      for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = Math.round(coordinates[i] * power_1) / power_1;\n      }\n\n      return coordinates;\n    };\n\n    if (transformed === geometry) {\n      transformed = geometry.clone();\n    }\n\n    transformed.applyTransform(transform);\n  }\n\n  return transformed;\n}\n/**\n * @param {import(\"../extent.js\").Extent} extent Extent.\n * @param {ReadOptions} [opt_options] Read options.\n * @return {import(\"../extent.js\").Extent} Transformed extent.\n */\n\nexport function transformExtentWithOptions(extent, opt_options) {\n  var featureProjection = opt_options ? getProjection(opt_options.featureProjection) : null;\n  var dataProjection = opt_options ? getProjection(opt_options.dataProjection) : null;\n\n  if (featureProjection && dataProjection && !equivalentProjection(featureProjection, dataProjection)) {\n    return transformExtent(extent, dataProjection, featureProjection);\n  } else {\n    return extent;\n  }\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/format/JSONFeature\n */\n\n\nimport FeatureFormat from './Feature.js';\nimport FormatType from './FormatType.js';\nimport { abstract } from '../util.js';\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for JSON feature formats.\n *\n * @abstract\n */\n\nvar JSONFeature =\n/** @class */\nfunction (_super) {\n  __extends(JSONFeature, _super);\n\n  function JSONFeature() {\n    return _super.call(this) || this;\n  }\n  /**\n   * @return {import(\"./FormatType.js\").default} Format.\n   */\n\n\n  JSONFeature.prototype.getType = function () {\n    return FormatType.JSON;\n  };\n  /**\n   * Read a feature.  Only works for a single feature. Use `readFeatures` to\n   * read a feature collection.\n   *\n   * @param {ArrayBuffer|Document|Element|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   * @api\n   */\n\n\n  JSONFeature.prototype.readFeature = function (source, opt_options) {\n    return this.readFeatureFromObject(getObject(source), this.getReadOptions(source, opt_options));\n  };\n  /**\n   * Read all features.  Works with both a single feature and a feature\n   * collection.\n   *\n   * @param {ArrayBuffer|Document|Element|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n\n\n  JSONFeature.prototype.readFeatures = function (source, opt_options) {\n    return this.readFeaturesFromObject(getObject(source), this.getReadOptions(source, opt_options));\n  };\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @protected\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n\n\n  JSONFeature.prototype.readFeatureFromObject = function (object, opt_options) {\n    return abstract();\n  };\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n\n\n  JSONFeature.prototype.readFeaturesFromObject = function (object, opt_options) {\n    return abstract();\n  };\n  /**\n   * Read a geometry.\n   *\n   * @param {ArrayBuffer|Document|Element|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   * @api\n   */\n\n\n  JSONFeature.prototype.readGeometry = function (source, opt_options) {\n    return this.readGeometryFromObject(getObject(source), this.getReadOptions(source, opt_options));\n  };\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n\n\n  JSONFeature.prototype.readGeometryFromObject = function (object, opt_options) {\n    return abstract();\n  };\n  /**\n   * Read the projection.\n   *\n   * @param {ArrayBuffer|Document|Element|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n\n\n  JSONFeature.prototype.readProjection = function (source) {\n    return this.readProjectionFromObject(getObject(source));\n  };\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n\n\n  JSONFeature.prototype.readProjectionFromObject = function (object) {\n    return abstract();\n  };\n  /**\n   * Encode a feature as string.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {string} Encoded feature.\n   * @api\n   */\n\n\n  JSONFeature.prototype.writeFeature = function (feature, opt_options) {\n    return JSON.stringify(this.writeFeatureObject(feature, opt_options));\n  };\n  /**\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {Object} Object.\n   */\n\n\n  JSONFeature.prototype.writeFeatureObject = function (feature, opt_options) {\n    return abstract();\n  };\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {string} Encoded features.\n   * @api\n   */\n\n\n  JSONFeature.prototype.writeFeatures = function (features, opt_options) {\n    return JSON.stringify(this.writeFeaturesObject(features, opt_options));\n  };\n  /**\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {Object} Object.\n   */\n\n\n  JSONFeature.prototype.writeFeaturesObject = function (features, opt_options) {\n    return abstract();\n  };\n  /**\n   * Encode a geometry as string.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {string} Encoded geometry.\n   * @api\n   */\n\n\n  JSONFeature.prototype.writeGeometry = function (geometry, opt_options) {\n    return JSON.stringify(this.writeGeometryObject(geometry, opt_options));\n  };\n  /**\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {Object} Object.\n   */\n\n\n  JSONFeature.prototype.writeGeometryObject = function (geometry, opt_options) {\n    return abstract();\n  };\n\n  return JSONFeature;\n}(FeatureFormat);\n/**\n * @param {Document|Element|Object|string} source Source.\n * @return {Object} Object.\n */\n\n\nfunction getObject(source) {\n  if (typeof source === 'string') {\n    var object = JSON.parse(source);\n    return object ?\n    /** @type {Object} */\n    object : null;\n  } else if (source !== null) {\n    return source;\n  } else {\n    return null;\n  }\n}\n\nexport default JSONFeature;","/**\n * @module ol/geom/flat/interpolate\n */\nimport { binarySearch } from '../../array.js';\nimport { lerp } from '../../math.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} fraction Fraction.\n * @param {Array<number>} [opt_dest] Destination.\n * @param {number} [opt_dimension] Destination dimension (default is `2`)\n * @return {Array<number>} Destination.\n */\n\nexport function interpolatePoint(flatCoordinates, offset, end, stride, fraction, opt_dest, opt_dimension) {\n  var o, t;\n  var n = (end - offset) / stride;\n\n  if (n === 1) {\n    o = offset;\n  } else if (n === 2) {\n    o = offset;\n    t = fraction;\n  } else if (n !== 0) {\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    var length_1 = 0;\n    var cumulativeLengths = [0];\n\n    for (var i = offset + stride; i < end; i += stride) {\n      var x2 = flatCoordinates[i];\n      var y2 = flatCoordinates[i + 1];\n      length_1 += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n      cumulativeLengths.push(length_1);\n      x1 = x2;\n      y1 = y2;\n    }\n\n    var target = fraction * length_1;\n    var index = binarySearch(cumulativeLengths, target);\n\n    if (index < 0) {\n      t = (target - cumulativeLengths[-index - 2]) / (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n      o = offset + (-index - 2) * stride;\n    } else {\n      o = offset + index * stride;\n    }\n  }\n\n  var dimension = opt_dimension > 1 ? opt_dimension : 2;\n  var dest = opt_dest ? opt_dest : new Array(dimension);\n\n  for (var i = 0; i < dimension; ++i) {\n    dest[i] = o === undefined ? NaN : t === undefined ? flatCoordinates[o + i] : lerp(flatCoordinates[o + i], flatCoordinates[o + stride + i], t);\n  }\n\n  return dest;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\n\nexport function lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, extrapolate) {\n  if (end == offset) {\n    return null;\n  }\n\n  var coordinate;\n\n  if (m < flatCoordinates[offset + stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(offset, offset + stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  } else if (flatCoordinates[end - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(end - stride, end);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  } // FIXME use O(1) search\n\n\n  if (m == flatCoordinates[offset + stride - 1]) {\n    return flatCoordinates.slice(offset, offset + stride);\n  }\n\n  var lo = offset / stride;\n  var hi = end / stride;\n\n  while (lo < hi) {\n    var mid = lo + hi >> 1;\n\n    if (m < flatCoordinates[(mid + 1) * stride - 1]) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n\n  var m0 = flatCoordinates[lo * stride - 1];\n\n  if (m == m0) {\n    return flatCoordinates.slice((lo - 1) * stride, (lo - 1) * stride + stride);\n  }\n\n  var m1 = flatCoordinates[(lo + 1) * stride - 1];\n  var t = (m - m0) / (m1 - m0);\n  coordinate = [];\n\n  for (var i = 0; i < stride - 1; ++i) {\n    coordinate.push(lerp(flatCoordinates[(lo - 1) * stride + i], flatCoordinates[lo * stride + i], t));\n  }\n\n  coordinate.push(m);\n  return coordinate;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @param {boolean} interpolate Interpolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\n\nexport function lineStringsCoordinateAtM(flatCoordinates, offset, ends, stride, m, extrapolate, interpolate) {\n  if (interpolate) {\n    return lineStringCoordinateAtM(flatCoordinates, offset, ends[ends.length - 1], stride, m, extrapolate);\n  }\n\n  var coordinate;\n\n  if (m < flatCoordinates[stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(0, stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n\n  if (flatCoordinates[flatCoordinates.length - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(flatCoordinates.length - stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n\n  for (var i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n\n    if (offset == end) {\n      continue;\n    }\n\n    if (m < flatCoordinates[offset + stride - 1]) {\n      return null;\n    } else if (m <= flatCoordinates[end - 1]) {\n      return lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, false);\n    }\n\n    offset = end;\n  }\n\n  return null;\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/geom/LineString\n */\n\n\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { assignClosestPoint, maxSquaredDelta } from './flat/closest.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { douglasPeucker } from './flat/simplify.js';\nimport { extend } from '../array.js';\nimport { forEach as forEachSegment } from './flat/segments.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { interpolatePoint, lineStringCoordinateAtM } from './flat/interpolate.js';\nimport { intersectsLineString } from './flat/intersectsextent.js';\nimport { lineStringLength } from './flat/length.js';\n/**\n * @classdesc\n * Linestring geometry.\n *\n * @api\n */\n\nvar LineString =\n/** @class */\nfunction (_super) {\n  __extends(LineString, _super);\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   */\n\n\n  function LineString(coordinates, opt_layout) {\n    var _this = _super.call(this) || this;\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n\n\n    _this.flatMidpoint_ = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.flatMidpointRevision_ = -1;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.maxDelta_ = -1;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.maxDeltaRevision_ = -1;\n\n    if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n      _this.setFlatCoordinates(opt_layout,\n      /** @type {Array<number>} */\n      coordinates);\n    } else {\n      _this.setCoordinates(\n      /** @type {Array<import(\"../coordinate.js\").Coordinate>} */\n      coordinates, opt_layout);\n    }\n\n    return _this;\n  }\n  /**\n   * Append the passed coordinate to the coordinates of the linestring.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @api\n   */\n\n\n  LineString.prototype.appendCoordinate = function (coordinate) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = coordinate.slice();\n    } else {\n      extend(this.flatCoordinates, coordinate);\n    }\n\n    this.changed();\n  };\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!LineString} Clone.\n   * @api\n   */\n\n\n  LineString.prototype.clone = function () {\n    var lineString = new LineString(this.flatCoordinates.slice(), this.layout);\n    lineString.applyProperties(this);\n    return lineString;\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n\n\n  LineString.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(maxSquaredDelta(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n\n    return assignClosestPoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n  };\n  /**\n   * Iterate over each segment, calling the provided callback.\n   * If the callback returns a truthy value the function returns that\n   * value immediately. Otherwise the function returns `false`.\n   *\n   * @param {function(this: S, import(\"../coordinate.js\").Coordinate, import(\"../coordinate.js\").Coordinate): T} callback Function\n   *     called for each segment. The function will receive two arguments, the start and end coordinates of the segment.\n   * @return {T|boolean} Value.\n   * @template T,S\n   * @api\n   */\n\n\n  LineString.prototype.forEachSegment = function (callback) {\n    return forEachSegment(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, callback);\n  };\n  /**\n   * Returns the coordinate at `m` using linear interpolation, or `null` if no\n   * such coordinate exists.\n   *\n   * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n   * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n   * M will return the first coordinate and Ms greater than the last M will\n   * return the last coordinate.\n   *\n   * @param {number} m M.\n   * @param {boolean} [opt_extrapolate] Extrapolate. Default is `false`.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinate.\n   * @api\n   */\n\n\n  LineString.prototype.getCoordinateAtM = function (m, opt_extrapolate) {\n    if (this.layout != GeometryLayout.XYM && this.layout != GeometryLayout.XYZM) {\n      return null;\n    }\n\n    var extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n    return lineStringCoordinateAtM(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, m, extrapolate);\n  };\n  /**\n   * Return the coordinates of the linestring.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @api\n   */\n\n\n  LineString.prototype.getCoordinates = function () {\n    return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  };\n  /**\n   * Return the coordinate at the provided fraction along the linestring.\n   * The `fraction` is a number between 0 and 1, where 0 is the start of the\n   * linestring and 1 is the end.\n   * @param {number} fraction Fraction.\n   * @param {import(\"../coordinate.js\").Coordinate} [opt_dest] Optional coordinate whose values will\n   *     be modified. If not provided, a new coordinate will be returned.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinate of the interpolated point.\n   * @api\n   */\n\n\n  LineString.prototype.getCoordinateAt = function (fraction, opt_dest) {\n    return interpolatePoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, fraction, opt_dest, this.stride);\n  };\n  /**\n   * Return the length of the linestring on projected plane.\n   * @return {number} Length (on projected plane).\n   * @api\n   */\n\n\n  LineString.prototype.getLength = function () {\n    return lineStringLength(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  };\n  /**\n   * @return {Array<number>} Flat midpoint.\n   */\n\n\n  LineString.prototype.getFlatMidpoint = function () {\n    if (this.flatMidpointRevision_ != this.getRevision()) {\n      this.flatMidpoint_ = this.getCoordinateAt(0.5, this.flatMidpoint_);\n      this.flatMidpointRevision_ = this.getRevision();\n    }\n\n    return this.flatMidpoint_;\n  };\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {LineString} Simplified LineString.\n   * @protected\n   */\n\n\n  LineString.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n    var simplifiedFlatCoordinates = [];\n    simplifiedFlatCoordinates.length = douglasPeucker(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n    return new LineString(simplifiedFlatCoordinates, GeometryLayout.XY);\n  };\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./GeometryType.js\").default} Geometry type.\n   * @api\n   */\n\n\n  LineString.prototype.getType = function () {\n    return GeometryType.LINE_STRING;\n  };\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n\n\n  LineString.prototype.intersectsExtent = function (extent) {\n    return intersectsLineString(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, extent);\n  };\n  /**\n   * Set the coordinates of the linestring.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   * @api\n   */\n\n\n  LineString.prototype.setCoordinates = function (coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n\n    this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  };\n\n  return LineString;\n}(SimpleGeometry);\n\nexport default LineString;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/geom/MultiLineString\n */\n\n\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport LineString from './LineString.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { arrayMaxSquaredDelta, assignClosestArrayPoint } from './flat/closest.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport { deflateCoordinatesArray } from './flat/deflate.js';\nimport { douglasPeuckerArray } from './flat/simplify.js';\nimport { extend } from '../array.js';\nimport { inflateCoordinatesArray } from './flat/inflate.js';\nimport { interpolatePoint, lineStringsCoordinateAtM } from './flat/interpolate.js';\nimport { intersectsLineStringArray } from './flat/intersectsextent.js';\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @api\n */\n\nvar MultiLineString =\n/** @class */\nfunction (_super) {\n  __extends(MultiLineString, _super);\n  /**\n   * @param {Array<Array<import(\"../coordinate.js\").Coordinate>|LineString>|Array<number>} coordinates\n   *     Coordinates or LineString geometries. (For internal use, flat coordinates in\n   *     combination with `opt_layout` and `opt_ends` are also accepted.)\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   * @param {Array<number>} [opt_ends] Flat coordinate ends for internal use.\n   */\n\n\n  function MultiLineString(coordinates, opt_layout, opt_ends) {\n    var _this = _super.call(this) || this;\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n\n\n    _this.ends_ = [];\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.maxDelta_ = -1;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.maxDeltaRevision_ = -1;\n\n    if (Array.isArray(coordinates[0])) {\n      _this.setCoordinates(\n      /** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */\n      coordinates, opt_layout);\n    } else if (opt_layout !== undefined && opt_ends) {\n      _this.setFlatCoordinates(opt_layout,\n      /** @type {Array<number>} */\n      coordinates);\n\n      _this.ends_ = opt_ends;\n    } else {\n      var layout = _this.getLayout();\n\n      var lineStrings =\n      /** @type {Array<LineString>} */\n      coordinates;\n      var flatCoordinates = [];\n      var ends = [];\n\n      for (var i = 0, ii = lineStrings.length; i < ii; ++i) {\n        var lineString = lineStrings[i];\n\n        if (i === 0) {\n          layout = lineString.getLayout();\n        }\n\n        extend(flatCoordinates, lineString.getFlatCoordinates());\n        ends.push(flatCoordinates.length);\n      }\n\n      _this.setFlatCoordinates(layout, flatCoordinates);\n\n      _this.ends_ = ends;\n    }\n\n    return _this;\n  }\n  /**\n   * Append the passed linestring to the multilinestring.\n   * @param {LineString} lineString LineString.\n   * @api\n   */\n\n\n  MultiLineString.prototype.appendLineString = function (lineString) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = lineString.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, lineString.getFlatCoordinates().slice());\n    }\n\n    this.ends_.push(this.flatCoordinates.length);\n    this.changed();\n  };\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiLineString} Clone.\n   * @api\n   */\n\n\n  MultiLineString.prototype.clone = function () {\n    var multiLineString = new MultiLineString(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n    multiLineString.applyProperties(this);\n    return multiLineString;\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n\n\n  MultiLineString.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates, 0, this.ends_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n\n    return assignClosestArrayPoint(this.flatCoordinates, 0, this.ends_, this.stride, this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n  };\n  /**\n   * Returns the coordinate at `m` using linear interpolation, or `null` if no\n   * such coordinate exists.\n   *\n   * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n   * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n   * M will return the first coordinate and Ms greater than the last M will\n   * return the last coordinate.\n   *\n   * `opt_interpolate` controls interpolation between consecutive LineStrings\n   * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n   * will be linearly interpolated between the last coordinate of one LineString\n   * and the first coordinate of the next LineString.  If `opt_interpolate` is\n   * `false` then the function will return `null` for Ms falling between\n   * LineStrings.\n   *\n   * @param {number} m M.\n   * @param {boolean} [opt_extrapolate] Extrapolate. Default is `false`.\n   * @param {boolean} [opt_interpolate] Interpolate. Default is `false`.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinate.\n   * @api\n   */\n\n\n  MultiLineString.prototype.getCoordinateAtM = function (m, opt_extrapolate, opt_interpolate) {\n    if (this.layout != GeometryLayout.XYM && this.layout != GeometryLayout.XYZM || this.flatCoordinates.length === 0) {\n      return null;\n    }\n\n    var extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n    var interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n    return lineStringsCoordinateAtM(this.flatCoordinates, 0, this.ends_, this.stride, m, extrapolate, interpolate);\n  };\n  /**\n   * Return the coordinates of the multilinestring.\n   * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n   * @api\n   */\n\n\n  MultiLineString.prototype.getCoordinates = function () {\n    return inflateCoordinatesArray(this.flatCoordinates, 0, this.ends_, this.stride);\n  };\n  /**\n   * @return {Array<number>} Ends.\n   */\n\n\n  MultiLineString.prototype.getEnds = function () {\n    return this.ends_;\n  };\n  /**\n   * Return the linestring at the specified index.\n   * @param {number} index Index.\n   * @return {LineString} LineString.\n   * @api\n   */\n\n\n  MultiLineString.prototype.getLineString = function (index) {\n    if (index < 0 || this.ends_.length <= index) {\n      return null;\n    }\n\n    return new LineString(this.flatCoordinates.slice(index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n  };\n  /**\n   * Return the linestrings of this multilinestring.\n   * @return {Array<LineString>} LineStrings.\n   * @api\n   */\n\n\n  MultiLineString.prototype.getLineStrings = function () {\n    var flatCoordinates = this.flatCoordinates;\n    var ends = this.ends_;\n    var layout = this.layout;\n    /** @type {Array<LineString>} */\n\n    var lineStrings = [];\n    var offset = 0;\n\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n      var end = ends[i];\n      var lineString = new LineString(flatCoordinates.slice(offset, end), layout);\n      lineStrings.push(lineString);\n      offset = end;\n    }\n\n    return lineStrings;\n  };\n  /**\n   * @return {Array<number>} Flat midpoints.\n   */\n\n\n  MultiLineString.prototype.getFlatMidpoints = function () {\n    var midpoints = [];\n    var flatCoordinates = this.flatCoordinates;\n    var offset = 0;\n    var ends = this.ends_;\n    var stride = this.stride;\n\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n      var end = ends[i];\n      var midpoint = interpolatePoint(flatCoordinates, offset, end, stride, 0.5);\n      extend(midpoints, midpoint);\n      offset = end;\n    }\n\n    return midpoints;\n  };\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {MultiLineString} Simplified MultiLineString.\n   * @protected\n   */\n\n\n  MultiLineString.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n    var simplifiedFlatCoordinates = [];\n    var simplifiedEnds = [];\n    simplifiedFlatCoordinates.length = douglasPeuckerArray(this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0, simplifiedEnds);\n    return new MultiLineString(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n  };\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./GeometryType.js\").default} Geometry type.\n   * @api\n   */\n\n\n  MultiLineString.prototype.getType = function () {\n    return GeometryType.MULTI_LINE_STRING;\n  };\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n\n\n  MultiLineString.prototype.intersectsExtent = function (extent) {\n    return intersectsLineStringArray(this.flatCoordinates, 0, this.ends_, this.stride, extent);\n  };\n  /**\n   * Set the coordinates of the multilinestring.\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n   * @param {GeometryLayout} [opt_layout] Layout.\n   * @api\n   */\n\n\n  MultiLineString.prototype.setCoordinates = function (coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 2);\n\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n\n    var ends = deflateCoordinatesArray(this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  };\n\n  return MultiLineString;\n}(SimpleGeometry);\n\nexport default MultiLineString;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/geom/MultiPoint\n */\n\n\nimport GeometryType from './GeometryType.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { closestSquaredDistanceXY, containsXY } from '../extent.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { extend } from '../array.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { squaredDistance as squaredDx } from '../math.js';\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @api\n */\n\nvar MultiPoint =\n/** @class */\nfunction (_super) {\n  __extends(MultiPoint, _super);\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   */\n\n\n  function MultiPoint(coordinates, opt_layout) {\n    var _this = _super.call(this) || this;\n\n    if (opt_layout && !Array.isArray(coordinates[0])) {\n      _this.setFlatCoordinates(opt_layout,\n      /** @type {Array<number>} */\n      coordinates);\n    } else {\n      _this.setCoordinates(\n      /** @type {Array<import(\"../coordinate.js\").Coordinate>} */\n      coordinates, opt_layout);\n    }\n\n    return _this;\n  }\n  /**\n   * Append the passed point to this multipoint.\n   * @param {Point} point Point.\n   * @api\n   */\n\n\n  MultiPoint.prototype.appendPoint = function (point) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = point.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, point.getFlatCoordinates());\n    }\n\n    this.changed();\n  };\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiPoint} Clone.\n   * @api\n   */\n\n\n  MultiPoint.prototype.clone = function () {\n    var multiPoint = new MultiPoint(this.flatCoordinates.slice(), this.layout);\n    multiPoint.applyProperties(this);\n    return multiPoint;\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n\n\n  MultiPoint.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n\n    var flatCoordinates = this.flatCoordinates;\n    var stride = this.stride;\n\n    for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      var squaredDistance = squaredDx(x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n\n      if (squaredDistance < minSquaredDistance) {\n        minSquaredDistance = squaredDistance;\n\n        for (var j = 0; j < stride; ++j) {\n          closestPoint[j] = flatCoordinates[i + j];\n        }\n\n        closestPoint.length = stride;\n      }\n    }\n\n    return minSquaredDistance;\n  };\n  /**\n   * Return the coordinates of the multipoint.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @api\n   */\n\n\n  MultiPoint.prototype.getCoordinates = function () {\n    return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  };\n  /**\n   * Return the point at the specified index.\n   * @param {number} index Index.\n   * @return {Point} Point.\n   * @api\n   */\n\n\n  MultiPoint.prototype.getPoint = function (index) {\n    var n = !this.flatCoordinates ? 0 : this.flatCoordinates.length / this.stride;\n\n    if (index < 0 || n <= index) {\n      return null;\n    }\n\n    return new Point(this.flatCoordinates.slice(index * this.stride, (index + 1) * this.stride), this.layout);\n  };\n  /**\n   * Return the points of this multipoint.\n   * @return {Array<Point>} Points.\n   * @api\n   */\n\n\n  MultiPoint.prototype.getPoints = function () {\n    var flatCoordinates = this.flatCoordinates;\n    var layout = this.layout;\n    var stride = this.stride;\n    /** @type {Array<Point>} */\n\n    var points = [];\n\n    for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      var point = new Point(flatCoordinates.slice(i, i + stride), layout);\n      points.push(point);\n    }\n\n    return points;\n  };\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./GeometryType.js\").default} Geometry type.\n   * @api\n   */\n\n\n  MultiPoint.prototype.getType = function () {\n    return GeometryType.MULTI_POINT;\n  };\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n\n\n  MultiPoint.prototype.intersectsExtent = function (extent) {\n    var flatCoordinates = this.flatCoordinates;\n    var stride = this.stride;\n\n    for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      var x = flatCoordinates[i];\n      var y = flatCoordinates[i + 1];\n\n      if (containsXY(extent, x, y)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n  /**\n   * Set the coordinates of the multipoint.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   * @api\n   */\n\n\n  MultiPoint.prototype.setCoordinates = function (coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n\n    this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  };\n\n  return MultiPoint;\n}(SimpleGeometry);\n\nexport default MultiPoint;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/geom/MultiPolygon\n */\n\n\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport MultiPoint from './MultiPoint.js';\nimport Polygon from './Polygon.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { assignClosestMultiArrayPoint, multiArrayMaxSquaredDelta } from './flat/closest.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport { deflateMultiCoordinatesArray } from './flat/deflate.js';\nimport { extend } from '../array.js';\nimport { getInteriorPointsOfMultiArray } from './flat/interiorpoint.js';\nimport { inflateMultiCoordinatesArray } from './flat/inflate.js';\nimport { intersectsLinearRingMultiArray } from './flat/intersectsextent.js';\nimport { linearRingssAreOriented, orientLinearRingsArray } from './flat/orient.js';\nimport { linearRingss as linearRingssArea } from './flat/area.js';\nimport { linearRingss as linearRingssCenter } from './flat/center.js';\nimport { linearRingssContainsXY } from './flat/contains.js';\nimport { quantizeMultiArray } from './flat/simplify.js';\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @api\n */\n\nvar MultiPolygon =\n/** @class */\nfunction (_super) {\n  __extends(MultiPolygon, _super);\n  /**\n   * @param {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>|Polygon>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` and `opt_endss` are also accepted.\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   * @param {Array<Array<number>>} [opt_endss] Array of ends for internal use with flat coordinates.\n   */\n\n\n  function MultiPolygon(coordinates, opt_layout, opt_endss) {\n    var _this = _super.call(this) || this;\n    /**\n     * @type {Array<Array<number>>}\n     * @private\n     */\n\n\n    _this.endss_ = [];\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.flatInteriorPointsRevision_ = -1;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.flatInteriorPoints_ = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.maxDelta_ = -1;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.maxDeltaRevision_ = -1;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.orientedRevision_ = -1;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.orientedFlatCoordinates_ = null;\n\n    if (!opt_endss && !Array.isArray(coordinates[0])) {\n      var layout = _this.getLayout();\n\n      var polygons =\n      /** @type {Array<Polygon>} */\n      coordinates;\n      var flatCoordinates = [];\n      var endss = [];\n\n      for (var i = 0, ii = polygons.length; i < ii; ++i) {\n        var polygon = polygons[i];\n\n        if (i === 0) {\n          layout = polygon.getLayout();\n        }\n\n        var offset = flatCoordinates.length;\n        var ends = polygon.getEnds();\n\n        for (var j = 0, jj = ends.length; j < jj; ++j) {\n          ends[j] += offset;\n        }\n\n        extend(flatCoordinates, polygon.getFlatCoordinates());\n        endss.push(ends);\n      }\n\n      opt_layout = layout;\n      coordinates = flatCoordinates;\n      opt_endss = endss;\n    }\n\n    if (opt_layout !== undefined && opt_endss) {\n      _this.setFlatCoordinates(opt_layout,\n      /** @type {Array<number>} */\n      coordinates);\n\n      _this.endss_ = opt_endss;\n    } else {\n      _this.setCoordinates(\n      /** @type {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} */\n      coordinates, opt_layout);\n    }\n\n    return _this;\n  }\n  /**\n   * Append the passed polygon to this multipolygon.\n   * @param {Polygon} polygon Polygon.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.appendPolygon = function (polygon) {\n    /** @type {Array<number>} */\n    var ends;\n\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = polygon.getFlatCoordinates().slice();\n      ends = polygon.getEnds().slice();\n      this.endss_.push();\n    } else {\n      var offset = this.flatCoordinates.length;\n      extend(this.flatCoordinates, polygon.getFlatCoordinates());\n      ends = polygon.getEnds().slice();\n\n      for (var i = 0, ii = ends.length; i < ii; ++i) {\n        ends[i] += offset;\n      }\n    }\n\n    this.endss_.push(ends);\n    this.changed();\n  };\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiPolygon} Clone.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.clone = function () {\n    var len = this.endss_.length;\n    var newEndss = new Array(len);\n\n    for (var i = 0; i < len; ++i) {\n      newEndss[i] = this.endss_[i].slice();\n    }\n\n    var multiPolygon = new MultiPolygon(this.flatCoordinates.slice(), this.layout, newEndss);\n    multiPolygon.applyProperties(this);\n    return multiPolygon;\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n\n\n  MultiPolygon.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates, 0, this.endss_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n\n    return assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @return {boolean} Contains (x, y).\n   */\n\n\n  MultiPolygon.prototype.containsXY = function (x, y) {\n    return linearRingssContainsXY(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n  };\n  /**\n   * Return the area of the multipolygon on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n\n\n  MultiPolygon.prototype.getArea = function () {\n    return linearRingssArea(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n  };\n  /**\n   * Get the coordinate array for this geometry.  This array has the structure\n   * of a GeoJSON coordinate array for multi-polygons.\n   *\n   * @param {boolean} [opt_right] Orient coordinates according to the right-hand\n   *     rule (counter-clockwise for exterior and clockwise for interior rings).\n   *     If `false`, coordinates will be oriented according to the left-hand rule\n   *     (clockwise for exterior and counter-clockwise for interior rings).\n   *     By default, coordinate orientation will depend on how the geometry was\n   *     constructed.\n   * @return {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} Coordinates.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.getCoordinates = function (opt_right) {\n    var flatCoordinates;\n\n    if (opt_right !== undefined) {\n      flatCoordinates = this.getOrientedFlatCoordinates().slice();\n      orientLinearRingsArray(flatCoordinates, 0, this.endss_, this.stride, opt_right);\n    } else {\n      flatCoordinates = this.flatCoordinates;\n    }\n\n    return inflateMultiCoordinatesArray(flatCoordinates, 0, this.endss_, this.stride);\n  };\n  /**\n   * @return {Array<Array<number>>} Endss.\n   */\n\n\n  MultiPolygon.prototype.getEndss = function () {\n    return this.endss_;\n  };\n  /**\n   * @return {Array<number>} Flat interior points.\n   */\n\n\n  MultiPolygon.prototype.getFlatInteriorPoints = function () {\n    if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n      var flatCenters = linearRingssCenter(this.flatCoordinates, 0, this.endss_, this.stride);\n      this.flatInteriorPoints_ = getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, flatCenters);\n      this.flatInteriorPointsRevision_ = this.getRevision();\n    }\n\n    return this.flatInteriorPoints_;\n  };\n  /**\n   * Return the interior points as {@link module:ol/geom/MultiPoint multipoint}.\n   * @return {MultiPoint} Interior points as XYM coordinates, where M is\n   * the length of the horizontal intersection that the point belongs to.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.getInteriorPoints = function () {\n    return new MultiPoint(this.getFlatInteriorPoints().slice(), GeometryLayout.XYM);\n  };\n  /**\n   * @return {Array<number>} Oriented flat coordinates.\n   */\n\n\n  MultiPolygon.prototype.getOrientedFlatCoordinates = function () {\n    if (this.orientedRevision_ != this.getRevision()) {\n      var flatCoordinates = this.flatCoordinates;\n\n      if (linearRingssAreOriented(flatCoordinates, 0, this.endss_, this.stride)) {\n        this.orientedFlatCoordinates_ = flatCoordinates;\n      } else {\n        this.orientedFlatCoordinates_ = flatCoordinates.slice();\n        this.orientedFlatCoordinates_.length = orientLinearRingsArray(this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n      }\n\n      this.orientedRevision_ = this.getRevision();\n    }\n\n    return this.orientedFlatCoordinates_;\n  };\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {MultiPolygon} Simplified MultiPolygon.\n   * @protected\n   */\n\n\n  MultiPolygon.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n    var simplifiedFlatCoordinates = [];\n    var simplifiedEndss = [];\n    simplifiedFlatCoordinates.length = quantizeMultiArray(this.flatCoordinates, 0, this.endss_, this.stride, Math.sqrt(squaredTolerance), simplifiedFlatCoordinates, 0, simplifiedEndss);\n    return new MultiPolygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEndss);\n  };\n  /**\n   * Return the polygon at the specified index.\n   * @param {number} index Index.\n   * @return {Polygon} Polygon.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.getPolygon = function (index) {\n    if (index < 0 || this.endss_.length <= index) {\n      return null;\n    }\n\n    var offset;\n\n    if (index === 0) {\n      offset = 0;\n    } else {\n      var prevEnds = this.endss_[index - 1];\n      offset = prevEnds[prevEnds.length - 1];\n    }\n\n    var ends = this.endss_[index].slice();\n    var end = ends[ends.length - 1];\n\n    if (offset !== 0) {\n      for (var i = 0, ii = ends.length; i < ii; ++i) {\n        ends[i] -= offset;\n      }\n    }\n\n    return new Polygon(this.flatCoordinates.slice(offset, end), this.layout, ends);\n  };\n  /**\n   * Return the polygons of this multipolygon.\n   * @return {Array<Polygon>} Polygons.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.getPolygons = function () {\n    var layout = this.layout;\n    var flatCoordinates = this.flatCoordinates;\n    var endss = this.endss_;\n    var polygons = [];\n    var offset = 0;\n\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n      var ends = endss[i].slice();\n      var end = ends[ends.length - 1];\n\n      if (offset !== 0) {\n        for (var j = 0, jj = ends.length; j < jj; ++j) {\n          ends[j] -= offset;\n        }\n      }\n\n      var polygon = new Polygon(flatCoordinates.slice(offset, end), layout, ends);\n      polygons.push(polygon);\n      offset = end;\n    }\n\n    return polygons;\n  };\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./GeometryType.js\").default} Geometry type.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.getType = function () {\n    return GeometryType.MULTI_POLYGON;\n  };\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.intersectsExtent = function (extent) {\n    return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n  };\n  /**\n   * Set the coordinates of the multipolygon.\n   * @param {!Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} coordinates Coordinates.\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.setCoordinates = function (coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 3);\n\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n\n    var endss = deflateMultiCoordinatesArray(this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n\n    if (endss.length === 0) {\n      this.flatCoordinates.length = 0;\n    } else {\n      var lastEnds = endss[endss.length - 1];\n      this.flatCoordinates.length = lastEnds.length === 0 ? 0 : lastEnds[lastEnds.length - 1];\n    }\n\n    this.changed();\n  };\n\n  return MultiPolygon;\n}(SimpleGeometry);\n\nexport default MultiPolygon;","/**\n * @module ol/geom/flat/center\n */\nimport { createEmpty, createOrUpdateFromFlatCoordinates } from '../../extent.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {Array<number>} Flat centers.\n */\n\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  var flatCenters = [];\n  var extent = createEmpty();\n\n  for (var i = 0, ii = endss.length; i < ii; ++i) {\n    var ends = endss[i];\n    extent = createOrUpdateFromFlatCoordinates(flatCoordinates, offset, ends[0], stride);\n    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n    offset = ends[ends.length - 1];\n  }\n\n  return flatCenters;\n}","/**\n * @module ol/format/GeoJSON\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport Feature from '../Feature.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport JSONFeature from './JSONFeature.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport { assert } from '../asserts.js';\nimport { assign, isEmpty } from '../obj.js';\nimport { get as getProjection } from '../proj.js';\nimport { transformGeometryWithOptions } from './Feature.js';\n/**\n * @typedef {import(\"geojson\").GeoJSON} GeoJSONObject\n * @typedef {import(\"geojson\").Feature} GeoJSONFeature\n * @typedef {import(\"geojson\").FeatureCollection} GeoJSONFeatureCollection\n * @typedef {import(\"geojson\").Geometry} GeoJSONGeometry\n * @typedef {import(\"geojson\").Point} GeoJSONPoint\n * @typedef {import(\"geojson\").LineString} GeoJSONLineString\n * @typedef {import(\"geojson\").Polygon} GeoJSONPolygon\n * @typedef {import(\"geojson\").MultiPoint} GeoJSONMultiPoint\n * @typedef {import(\"geojson\").MultiLineString} GeoJSONMultiLineString\n * @typedef {import(\"geojson\").MultiPolygon} GeoJSONMultiPolygon\n * @typedef {import(\"geojson\").GeometryCollection} GeoJSONGeometryCollection\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection for features read or\n * written by the format.  Options passed to read or write methods will take precedence.\n * @property {string} [geometryName] Geometry name to use when creating features.\n * @property {boolean} [extractGeometryName=false] Certain GeoJSON providers include\n * the geometry_name field in the feature GeoJSON. If set to `true` the GeoJSON reader\n * will look for that field to set the geometry name. If both this field is set to `true`\n * and a `geometryName` is provided, the `geometryName` will take precedence.\n */\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GeoJSON format.\n *\n * @api\n */\n\nvar GeoJSON =\n/** @class */\nfunction (_super) {\n  __extends(GeoJSON, _super);\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n\n\n  function GeoJSON(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    _this = _super.call(this) || this;\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n\n    _this.dataProjection = getProjection(options.dataProjection ? options.dataProjection : 'EPSG:4326');\n\n    if (options.featureProjection) {\n      _this.defaultFeatureProjection = getProjection(options.featureProjection);\n    }\n    /**\n     * Name of the geometry attribute for features.\n     * @type {string|undefined}\n     * @private\n     */\n\n\n    _this.geometryName_ = options.geometryName;\n    /**\n     * Look for the geometry name in the feature GeoJSON\n     * @type {boolean|undefined}\n     * @private\n     */\n\n    _this.extractGeometryName_ = options.extractGeometryName;\n    _this.supportedMediaTypes = ['application/geo+json', 'application/vnd.geo+json'];\n    return _this;\n  }\n  /**\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @protected\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n\n\n  GeoJSON.prototype.readFeatureFromObject = function (object, opt_options) {\n    /**\n     * @type {GeoJSONFeature}\n     */\n    var geoJSONFeature = null;\n\n    if (object['type'] === 'Feature') {\n      geoJSONFeature =\n      /** @type {GeoJSONFeature} */\n      object;\n    } else {\n      geoJSONFeature = {\n        'type': 'Feature',\n        'geometry':\n        /** @type {GeoJSONGeometry} */\n        object,\n        'properties': null\n      };\n    }\n\n    var geometry = readGeometry(geoJSONFeature['geometry'], opt_options);\n    var feature = new Feature();\n\n    if (this.geometryName_) {\n      feature.setGeometryName(this.geometryName_);\n    } else if (this.extractGeometryName_ && 'geometry_name' in geoJSONFeature !== undefined) {\n      feature.setGeometryName(geoJSONFeature['geometry_name']);\n    }\n\n    feature.setGeometry(geometry);\n\n    if ('id' in geoJSONFeature) {\n      feature.setId(geoJSONFeature['id']);\n    }\n\n    if (geoJSONFeature['properties']) {\n      feature.setProperties(geoJSONFeature['properties'], true);\n    }\n\n    return feature;\n  };\n  /**\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @protected\n   * @return {Array<Feature>} Features.\n   */\n\n\n  GeoJSON.prototype.readFeaturesFromObject = function (object, opt_options) {\n    var geoJSONObject =\n    /** @type {GeoJSONObject} */\n    object;\n    /** @type {Array<import(\"../Feature.js\").default>} */\n\n    var features = null;\n\n    if (geoJSONObject['type'] === 'FeatureCollection') {\n      var geoJSONFeatureCollection =\n      /** @type {GeoJSONFeatureCollection} */\n      object;\n      features = [];\n      var geoJSONFeatures = geoJSONFeatureCollection['features'];\n\n      for (var i = 0, ii = geoJSONFeatures.length; i < ii; ++i) {\n        features.push(this.readFeatureFromObject(geoJSONFeatures[i], opt_options));\n      }\n    } else {\n      features = [this.readFeatureFromObject(object, opt_options)];\n    }\n\n    return features;\n  };\n  /**\n   * @param {GeoJSONGeometry} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n\n\n  GeoJSON.prototype.readGeometryFromObject = function (object, opt_options) {\n    return readGeometry(object, opt_options);\n  };\n  /**\n   * @param {Object} object Object.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n\n\n  GeoJSON.prototype.readProjectionFromObject = function (object) {\n    var crs = object['crs'];\n    var projection;\n\n    if (crs) {\n      if (crs['type'] == 'name') {\n        projection = getProjection(crs['properties']['name']);\n      } else if (crs['type'] === 'EPSG') {\n        projection = getProjection('EPSG:' + crs['properties']['code']);\n      } else {\n        assert(false, 36); // Unknown SRS type\n      }\n    } else {\n      projection = this.dataProjection;\n    }\n\n    return (\n      /** @type {import(\"../proj/Projection.js\").default} */\n      projection\n    );\n  };\n  /**\n   * Encode a feature as a GeoJSON Feature object.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {GeoJSONFeature} Object.\n   * @api\n   */\n\n\n  GeoJSON.prototype.writeFeatureObject = function (feature, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    /** @type {GeoJSONFeature} */\n\n    var object = {\n      'type': 'Feature',\n      geometry: null,\n      properties: null\n    };\n    var id = feature.getId();\n\n    if (id !== undefined) {\n      object.id = id;\n    }\n\n    if (!feature.hasProperties()) {\n      return object;\n    }\n\n    var properties = feature.getProperties();\n    var geometry = feature.getGeometry();\n\n    if (geometry) {\n      object.geometry = writeGeometry(geometry, opt_options);\n      delete properties[feature.getGeometryName()];\n    }\n\n    if (!isEmpty(properties)) {\n      object.properties = properties;\n    }\n\n    return object;\n  };\n  /**\n   * Encode an array of features as a GeoJSON object.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {GeoJSONFeatureCollection} GeoJSON Object.\n   * @api\n   */\n\n\n  GeoJSON.prototype.writeFeaturesObject = function (features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    var objects = [];\n\n    for (var i = 0, ii = features.length; i < ii; ++i) {\n      objects.push(this.writeFeatureObject(features[i], opt_options));\n    }\n\n    return {\n      type: 'FeatureCollection',\n      features: objects\n    };\n  };\n  /**\n   * Encode a geometry as a GeoJSON object.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {GeoJSONGeometry|GeoJSONGeometryCollection} Object.\n   * @api\n   */\n\n\n  GeoJSON.prototype.writeGeometryObject = function (geometry, opt_options) {\n    return writeGeometry(geometry, this.adaptOptions(opt_options));\n  };\n\n  return GeoJSON;\n}(JSONFeature);\n/**\n * @param {GeoJSONGeometry|GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\n\n\nfunction readGeometry(object, opt_options) {\n  if (!object) {\n    return null;\n  }\n  /**\n   * @type {import(\"../geom/Geometry.js\").default}\n   */\n\n\n  var geometry;\n\n  switch (object['type']) {\n    case GeometryType.POINT:\n      {\n        geometry = readPointGeometry(\n        /** @type {GeoJSONPoint} */\n        object);\n        break;\n      }\n\n    case GeometryType.LINE_STRING:\n      {\n        geometry = readLineStringGeometry(\n        /** @type {GeoJSONLineString} */\n        object);\n        break;\n      }\n\n    case GeometryType.POLYGON:\n      {\n        geometry = readPolygonGeometry(\n        /** @type {GeoJSONPolygon} */\n        object);\n        break;\n      }\n\n    case GeometryType.MULTI_POINT:\n      {\n        geometry = readMultiPointGeometry(\n        /** @type {GeoJSONMultiPoint} */\n        object);\n        break;\n      }\n\n    case GeometryType.MULTI_LINE_STRING:\n      {\n        geometry = readMultiLineStringGeometry(\n        /** @type {GeoJSONMultiLineString} */\n        object);\n        break;\n      }\n\n    case GeometryType.MULTI_POLYGON:\n      {\n        geometry = readMultiPolygonGeometry(\n        /** @type {GeoJSONMultiPolygon} */\n        object);\n        break;\n      }\n\n    case GeometryType.GEOMETRY_COLLECTION:\n      {\n        geometry = readGeometryCollectionGeometry(\n        /** @type {GeoJSONGeometryCollection} */\n        object);\n        break;\n      }\n\n    default:\n      {\n        throw new Error('Unsupported GeoJSON type: ' + object.type);\n      }\n  }\n\n  return transformGeometryWithOptions(geometry, false, opt_options);\n}\n/**\n * @param {GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n * @return {GeometryCollection} Geometry collection.\n */\n\n\nfunction readGeometryCollectionGeometry(object, opt_options) {\n  var geometries = object['geometries'].map(\n  /**\n   * @param {GeoJSONGeometry} geometry Geometry.\n   * @return {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   */\n  function (geometry) {\n    return readGeometry(geometry, opt_options);\n  });\n  return new GeometryCollection(geometries);\n}\n/**\n * @param {GeoJSONPoint} object Object.\n * @return {Point} Point.\n */\n\n\nfunction readPointGeometry(object) {\n  return new Point(object['coordinates']);\n}\n/**\n * @param {GeoJSONLineString} object Object.\n * @return {LineString} LineString.\n */\n\n\nfunction readLineStringGeometry(object) {\n  return new LineString(object['coordinates']);\n}\n/**\n * @param {GeoJSONMultiLineString} object Object.\n * @return {MultiLineString} MultiLineString.\n */\n\n\nfunction readMultiLineStringGeometry(object) {\n  return new MultiLineString(object['coordinates']);\n}\n/**\n * @param {GeoJSONMultiPoint} object Object.\n * @return {MultiPoint} MultiPoint.\n */\n\n\nfunction readMultiPointGeometry(object) {\n  return new MultiPoint(object['coordinates']);\n}\n/**\n * @param {GeoJSONMultiPolygon} object Object.\n * @return {MultiPolygon} MultiPolygon.\n */\n\n\nfunction readMultiPolygonGeometry(object) {\n  return new MultiPolygon(object['coordinates']);\n}\n/**\n * @param {GeoJSONPolygon} object Object.\n * @return {Polygon} Polygon.\n */\n\n\nfunction readPolygonGeometry(object) {\n  return new Polygon(object['coordinates']);\n}\n/**\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writeGeometry(geometry, opt_options) {\n  geometry = transformGeometryWithOptions(geometry, true, opt_options);\n  var type = geometry.getType();\n  /** @type {GeoJSONGeometry} */\n\n  var geoJSON;\n\n  switch (type) {\n    case GeometryType.POINT:\n      {\n        geoJSON = writePointGeometry(\n        /** @type {Point} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.LINE_STRING:\n      {\n        geoJSON = writeLineStringGeometry(\n        /** @type {LineString} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.POLYGON:\n      {\n        geoJSON = writePolygonGeometry(\n        /** @type {Polygon} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.MULTI_POINT:\n      {\n        geoJSON = writeMultiPointGeometry(\n        /** @type {MultiPoint} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.MULTI_LINE_STRING:\n      {\n        geoJSON = writeMultiLineStringGeometry(\n        /** @type {MultiLineString} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.MULTI_POLYGON:\n      {\n        geoJSON = writeMultiPolygonGeometry(\n        /** @type {MultiPolygon} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.GEOMETRY_COLLECTION:\n      {\n        geoJSON = writeGeometryCollectionGeometry(\n        /** @type {GeometryCollection} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.CIRCLE:\n      {\n        geoJSON = {\n          type: 'GeometryCollection',\n          geometries: []\n        };\n        break;\n      }\n\n    default:\n      {\n        throw new Error('Unsupported geometry type: ' + type);\n      }\n  }\n\n  return geoJSON;\n}\n/**\n * @param {GeometryCollection} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometryCollection} GeoJSON geometry collection.\n */\n\n\nfunction writeGeometryCollectionGeometry(geometry, opt_options) {\n  var geometries = geometry.getGeometriesArray().map(function (geometry) {\n    var options = assign({}, opt_options);\n    delete options.featureProjection;\n    return writeGeometry(geometry, options);\n  });\n  return {\n    type: 'GeometryCollection',\n    geometries: geometries\n  };\n}\n/**\n * @param {LineString} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writeLineStringGeometry(geometry, opt_options) {\n  return {\n    type: 'LineString',\n    coordinates: geometry.getCoordinates()\n  };\n}\n/**\n * @param {MultiLineString} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writeMultiLineStringGeometry(geometry, opt_options) {\n  return {\n    type: 'MultiLineString',\n    coordinates: geometry.getCoordinates()\n  };\n}\n/**\n * @param {MultiPoint} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writeMultiPointGeometry(geometry, opt_options) {\n  return {\n    type: 'MultiPoint',\n    coordinates: geometry.getCoordinates()\n  };\n}\n/**\n * @param {MultiPolygon} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writeMultiPolygonGeometry(geometry, opt_options) {\n  var right;\n\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n\n  return {\n    type: 'MultiPolygon',\n    coordinates: geometry.getCoordinates(right)\n  };\n}\n/**\n * @param {Point} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writePointGeometry(geometry, opt_options) {\n  return {\n    type: 'Point',\n    coordinates: geometry.getCoordinates()\n  };\n}\n/**\n * @param {Polygon} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writePolygonGeometry(geometry, opt_options) {\n  var right;\n\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n\n  return {\n    type: 'Polygon',\n    coordinates: geometry.getCoordinates(right)\n  };\n}\n\nexport default GeoJSON;","/**\n * @module ol/geom/flat/length\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Length.\n */\nexport function lineStringLength(flatCoordinates, offset, end, stride) {\n  var x1 = flatCoordinates[offset];\n  var y1 = flatCoordinates[offset + 1];\n  var length = 0;\n\n  for (var i = offset + stride; i < end; i += stride) {\n    var x2 = flatCoordinates[i];\n    var y2 = flatCoordinates[i + 1];\n    length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    x1 = x2;\n    y1 = y2;\n  }\n\n  return length;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Perimeter.\n */\n\nexport function linearRingLength(flatCoordinates, offset, end, stride) {\n  var perimeter = lineStringLength(flatCoordinates, offset, end, stride);\n  var dx = flatCoordinates[end - stride] - flatCoordinates[offset];\n  var dy = flatCoordinates[end - stride + 1] - flatCoordinates[offset + 1];\n  perimeter += Math.sqrt(dx * dx + dy * dy);\n  return perimeter;\n}","/**\n * @module ol/style/Image\n */\nimport { abstract } from '../util.js';\nimport { toSize } from '../size.js';\n/**\n * @typedef {Object} Options\n * @property {number} opacity Opacity.\n * @property {boolean} rotateWithView If the image should get rotated with the view.\n * @property {number} rotation Rotation.\n * @property {number|import(\"../size.js\").Size} scale Scale.\n * @property {Array<number>} displacement Displacement.\n */\n\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\n\nvar ImageStyle =\n/** @class */\nfunction () {\n  /**\n   * @param {Options} options Options.\n   */\n  function ImageStyle(options) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.opacity_ = options.opacity;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this.rotateWithView_ = options.rotateWithView;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.rotation_ = options.rotation;\n    /**\n     * @private\n     * @type {number|import(\"../size.js\").Size}\n     */\n\n    this.scale_ = options.scale;\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n\n    this.scaleArray_ = toSize(options.scale);\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    this.displacement_ = options.displacement;\n  }\n  /**\n   * Clones the style.\n   * @return {ImageStyle} The cloned style.\n   * @api\n   */\n\n\n  ImageStyle.prototype.clone = function () {\n    var scale = this.getScale();\n    return new ImageStyle({\n      opacity: this.getOpacity(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      displacement: this.getDisplacement().slice()\n    });\n  };\n  /**\n   * Get the symbolizer opacity.\n   * @return {number} Opacity.\n   * @api\n   */\n\n\n  ImageStyle.prototype.getOpacity = function () {\n    return this.opacity_;\n  };\n  /**\n   * Determine whether the symbolizer rotates with the map.\n   * @return {boolean} Rotate with map.\n   * @api\n   */\n\n\n  ImageStyle.prototype.getRotateWithView = function () {\n    return this.rotateWithView_;\n  };\n  /**\n   * Get the symoblizer rotation.\n   * @return {number} Rotation.\n   * @api\n   */\n\n\n  ImageStyle.prototype.getRotation = function () {\n    return this.rotation_;\n  };\n  /**\n   * Get the symbolizer scale.\n   * @return {number|import(\"../size.js\").Size} Scale.\n   * @api\n   */\n\n\n  ImageStyle.prototype.getScale = function () {\n    return this.scale_;\n  };\n  /**\n   * Get the symbolizer scale array.\n   * @return {import(\"../size.js\").Size} Scale array.\n   */\n\n\n  ImageStyle.prototype.getScaleArray = function () {\n    return this.scaleArray_;\n  };\n  /**\n   * Get the displacement of the shape\n   * @return {Array<number>} Shape's center displacement\n   * @api\n   */\n\n\n  ImageStyle.prototype.getDisplacement = function () {\n    return this.displacement_;\n  };\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @abstract\n   * @return {Array<number>} Anchor.\n   */\n\n\n  ImageStyle.prototype.getAnchor = function () {\n    return abstract();\n  };\n  /**\n   * Get the image element for the symbolizer.\n   * @abstract\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n\n\n  ImageStyle.prototype.getImage = function (pixelRatio) {\n    return abstract();\n  };\n  /**\n   * @abstract\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n\n\n  ImageStyle.prototype.getHitDetectionImage = function () {\n    return abstract();\n  };\n  /**\n   * Get the image pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Pixel ratio.\n   */\n\n\n  ImageStyle.prototype.getPixelRatio = function (pixelRatio) {\n    return 1;\n  };\n  /**\n   * @abstract\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n\n\n  ImageStyle.prototype.getImageState = function () {\n    return abstract();\n  };\n  /**\n   * @abstract\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n\n\n  ImageStyle.prototype.getImageSize = function () {\n    return abstract();\n  };\n  /**\n   * Get the origin of the symbolizer.\n   * @abstract\n   * @return {Array<number>} Origin.\n   */\n\n\n  ImageStyle.prototype.getOrigin = function () {\n    return abstract();\n  };\n  /**\n   * Get the size of the symbolizer (in pixels).\n   * @abstract\n   * @return {import(\"../size.js\").Size} Size.\n   */\n\n\n  ImageStyle.prototype.getSize = function () {\n    return abstract();\n  };\n  /**\n   * Set the displacement.\n   *\n   * @param {Array<number>} displacement Displacement.\n   * @api\n   */\n\n\n  ImageStyle.prototype.setDisplacement = function (displacement) {\n    this.displacement_ = displacement;\n  };\n  /**\n   * Set the opacity.\n   *\n   * @param {number} opacity Opacity.\n   * @api\n   */\n\n\n  ImageStyle.prototype.setOpacity = function (opacity) {\n    this.opacity_ = opacity;\n  };\n  /**\n   * Set whether to rotate the style with the view.\n   *\n   * @param {boolean} rotateWithView Rotate with map.\n   * @api\n   */\n\n\n  ImageStyle.prototype.setRotateWithView = function (rotateWithView) {\n    this.rotateWithView_ = rotateWithView;\n  };\n  /**\n   * Set the rotation.\n   *\n   * @param {number} rotation Rotation.\n   * @api\n   */\n\n\n  ImageStyle.prototype.setRotation = function (rotation) {\n    this.rotation_ = rotation;\n  };\n  /**\n   * Set the scale.\n   *\n   * @param {number|import(\"../size.js\").Size} scale Scale.\n   * @api\n   */\n\n\n  ImageStyle.prototype.setScale = function (scale) {\n    this.scale_ = scale;\n    this.scaleArray_ = toSize(scale);\n  };\n  /**\n   * @abstract\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n\n\n  ImageStyle.prototype.listenImageChange = function (listener) {\n    abstract();\n  };\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n\n\n  ImageStyle.prototype.load = function () {\n    abstract();\n  };\n  /**\n   * @abstract\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n\n\n  ImageStyle.prototype.unlistenImageChange = function (listener) {\n    abstract();\n  };\n\n  return ImageStyle;\n}();\n\nexport default ImageStyle;","/**\n * @module ol/colorlike\n */\nimport { toString } from './color.js';\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n\n/**\n * @param {import(\"./color.js\").Color|ColorLike} color Color.\n * @return {ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\n\nexport function asColorLike(color) {\n  if (Array.isArray(color)) {\n    return toString(color);\n  } else {\n    return color;\n  }\n}","/**\n * @module ol/style/RegularShape\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport { asArray } from '../color.js';\nimport { asColorLike } from '../colorlike.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { defaultFillStyle, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle } from '../render/canvas.js';\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] First radius of a star. Ignored if radius is set.\n * @property {number} [radius2] Second radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {Array<number>} [displacement=[0,0]] Displacement of the shape\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale. Unless two dimensional scaling is required a better\n * result may be obtained with appropriate settings for `radius`, `radius1` and `radius2`.\n */\n\n/**\n * @typedef {Object} RenderOptions\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle] StrokeStyle.\n * @property {number} strokeWidth StrokeWidth.\n * @property {number} size Size.\n * @property {Array<number>} lineDash LineDash.\n * @property {number} lineDashOffset LineDashOffset.\n * @property {CanvasLineJoin} lineJoin LineJoin.\n * @property {number} miterLimit MiterLimit.\n */\n\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\n\nvar RegularShape =\n/** @class */\nfunction (_super) {\n  __extends(RegularShape, _super);\n  /**\n   * @param {Options} options Options.\n   */\n\n\n  function RegularShape(options) {\n    var _this = this;\n    /**\n     * @type {boolean}\n     */\n\n\n    var rotateWithView = options.rotateWithView !== undefined ? options.rotateWithView : false;\n    _this = _super.call(this, {\n      opacity: 1,\n      rotateWithView: rotateWithView,\n      rotation: options.rotation !== undefined ? options.rotation : 0,\n      scale: options.scale !== undefined ? options.scale : 1,\n      displacement: options.displacement !== undefined ? options.displacement : [0, 0]\n    }) || this;\n    /**\n     * @private\n     * @type {Object<number, HTMLCanvasElement>}\n     */\n\n    _this.canvas_ = undefined;\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n\n    _this.hitDetectionCanvas_ = null;\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n\n    _this.fill_ = options.fill !== undefined ? options.fill : null;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.origin_ = [0, 0];\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.points_ = options.points;\n    /**\n     * @protected\n     * @type {number}\n     */\n\n    _this.radius_ = options.radius !== undefined ? options.radius : options.radius1;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.radius2_ = options.radius2;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.angle_ = options.angle !== undefined ? options.angle : 0;\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n\n    _this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n\n    _this.size_ = null;\n    /**\n     * @private\n     * @type {RenderOptions}\n     */\n\n    _this.renderOptions_ = null;\n\n    _this.render();\n\n    return _this;\n  }\n  /**\n   * Clones the style.\n   * @return {RegularShape} The cloned style.\n   * @api\n   */\n\n\n  RegularShape.prototype.clone = function () {\n    var scale = this.getScale();\n    var style = new RegularShape({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      points: this.getPoints(),\n      radius: this.getRadius(),\n      radius2: this.getRadius2(),\n      angle: this.getAngle(),\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      displacement: this.getDisplacement().slice()\n    });\n    style.setOpacity(this.getOpacity());\n    return style;\n  };\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @return {Array<number>} Anchor.\n   * @api\n   */\n\n\n  RegularShape.prototype.getAnchor = function () {\n    var size = this.size_;\n\n    if (!size) {\n      return null;\n    }\n\n    var displacement = this.getDisplacement();\n    return [size[0] / 2 - displacement[0], size[1] / 2 + displacement[1]];\n  };\n  /**\n   * Get the angle used in generating the shape.\n   * @return {number} Shape's rotation in radians.\n   * @api\n   */\n\n\n  RegularShape.prototype.getAngle = function () {\n    return this.angle_;\n  };\n  /**\n   * Get the fill style for the shape.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n\n\n  RegularShape.prototype.getFill = function () {\n    return this.fill_;\n  };\n  /**\n   * @return {HTMLCanvasElement} Image element.\n   */\n\n\n  RegularShape.prototype.getHitDetectionImage = function () {\n    if (!this.hitDetectionCanvas_) {\n      this.createHitDetectionCanvas_(this.renderOptions_);\n    }\n\n    return this.hitDetectionCanvas_;\n  };\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement} Image or Canvas element.\n   * @api\n   */\n\n\n  RegularShape.prototype.getImage = function (pixelRatio) {\n    var image = this.canvas_[pixelRatio];\n\n    if (!image) {\n      var renderOptions = this.renderOptions_;\n      var context = createCanvasContext2D(renderOptions.size * pixelRatio, renderOptions.size * pixelRatio);\n      this.draw_(renderOptions, context, pixelRatio);\n      image = context.canvas;\n      this.canvas_[pixelRatio] = image;\n    }\n\n    return image;\n  };\n  /**\n   * Get the image pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Pixel ratio.\n   */\n\n\n  RegularShape.prototype.getPixelRatio = function (pixelRatio) {\n    return pixelRatio;\n  };\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n\n\n  RegularShape.prototype.getImageSize = function () {\n    return this.size_;\n  };\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n\n\n  RegularShape.prototype.getImageState = function () {\n    return ImageState.LOADED;\n  };\n  /**\n   * Get the origin of the symbolizer.\n   * @return {Array<number>} Origin.\n   * @api\n   */\n\n\n  RegularShape.prototype.getOrigin = function () {\n    return this.origin_;\n  };\n  /**\n   * Get the number of points for generating the shape.\n   * @return {number} Number of points for stars and regular polygons.\n   * @api\n   */\n\n\n  RegularShape.prototype.getPoints = function () {\n    return this.points_;\n  };\n  /**\n   * Get the (primary) radius for the shape.\n   * @return {number} Radius.\n   * @api\n   */\n\n\n  RegularShape.prototype.getRadius = function () {\n    return this.radius_;\n  };\n  /**\n   * Get the secondary radius for the shape.\n   * @return {number|undefined} Radius2.\n   * @api\n   */\n\n\n  RegularShape.prototype.getRadius2 = function () {\n    return this.radius2_;\n  };\n  /**\n   * Get the size of the symbolizer (in pixels).\n   * @return {import(\"../size.js\").Size} Size.\n   * @api\n   */\n\n\n  RegularShape.prototype.getSize = function () {\n    return this.size_;\n  };\n  /**\n   * Get the stroke style for the shape.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n\n\n  RegularShape.prototype.getStroke = function () {\n    return this.stroke_;\n  };\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n\n\n  RegularShape.prototype.listenImageChange = function (listener) {};\n  /**\n   * Load not yet loaded URI.\n   */\n\n\n  RegularShape.prototype.load = function () {};\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n\n\n  RegularShape.prototype.unlistenImageChange = function (listener) {};\n  /**\n   * Calculate additional canvas size needed for the miter.\n   * @param {string} lineJoin Line join\n   * @param {number} strokeWidth Stroke width\n   * @param {number} miterLimit Miter limit\n   * @return {number} Additional canvas size needed\n   * @private\n   */\n\n\n  RegularShape.prototype.calculateLineJoinSize_ = function (lineJoin, strokeWidth, miterLimit) {\n    if (strokeWidth === 0 || this.points_ === Infinity || lineJoin !== 'bevel' && lineJoin !== 'miter') {\n      return strokeWidth;\n    } // m  | ^\n    // i  | |\\                  .\n    // t >|  #\\\n    // e  | |\\ \\              .\n    // r      \\s\\\n    //      |  \\t\\          .                 .\n    //          \\r\\                      .   .\n    //      |    \\o\\      .          .  . . .\n    //          e \\k\\            .  .    . .\n    //      |      \\e\\  .    .  .       . .\n    //       d      \\ \\  .  .          . .\n    //      | _ _a_ _\\#  .            . .\n    //   r1          / `             . .\n    //      |                       . .\n    //       b     /               . .\n    //      |                     . .\n    //           / r2            . .\n    //      |                        .   .\n    //         /                           .   .\n    //      |α                                   .   .\n    //       /                                         .   .\n    //      ° center\n\n\n    var r1 = this.radius_;\n    var r2 = this.radius2_ === undefined ? r1 : this.radius2_;\n\n    if (r1 < r2) {\n      var tmp = r1;\n      r1 = r2;\n      r2 = tmp;\n    }\n\n    var points = this.radius2_ === undefined ? this.points_ : this.points_ * 2;\n    var alpha = 2 * Math.PI / points;\n    var a = r2 * Math.sin(alpha);\n    var b = Math.sqrt(r2 * r2 - a * a);\n    var d = r1 - b;\n    var e = Math.sqrt(a * a + d * d);\n    var miterRatio = e / a;\n\n    if (lineJoin === 'miter' && miterRatio <= miterLimit) {\n      return miterRatio * strokeWidth;\n    } // Calculate the distnce from center to the stroke corner where\n    // it was cut short because of the miter limit.\n    //              l\n    //        ----+---- <= distance from center to here is maxr\n    //       /####|k ##\\\n    //      /#####^#####\\\n    //     /#### /+\\# s #\\\n    //    /### h/+++\\# t #\\\n    //   /### t/+++++\\# r #\\\n    //  /### a/+++++++\\# o #\\\n    // /### p/++ fill +\\# k #\\\n    ///#### /+++++^+++++\\# e #\\\n    //#####/+++++/+\\+++++\\#####\\\n\n\n    var k = strokeWidth / 2 / miterRatio;\n    var l = strokeWidth / 2 * (d / e);\n    var maxr = Math.sqrt((r1 + k) * (r1 + k) + l * l);\n    var bevelAdd = maxr - r1;\n\n    if (this.radius2_ === undefined || lineJoin === 'bevel') {\n      return bevelAdd * 2;\n    } // If outer miter is over the miter limit the inner miter may reach through the\n    // center and be longer than the bevel, same calculation as above but swap r1 / r2.\n\n\n    var aa = r1 * Math.sin(alpha);\n    var bb = Math.sqrt(r1 * r1 - aa * aa);\n    var dd = r2 - bb;\n    var ee = Math.sqrt(aa * aa + dd * dd);\n    var innerMiterRatio = ee / aa;\n\n    if (innerMiterRatio <= miterLimit) {\n      var innerLength = innerMiterRatio * strokeWidth / 2 - r2 - r1;\n      return 2 * Math.max(bevelAdd, innerLength);\n    }\n\n    return bevelAdd * 2;\n  };\n  /**\n   * @return {RenderOptions}  The render options\n   * @protected\n   */\n\n\n  RegularShape.prototype.createRenderOptions = function () {\n    var lineJoin = defaultLineJoin;\n    var miterLimit = 0;\n    var lineDash = null;\n    var lineDashOffset = 0;\n    var strokeStyle;\n    var strokeWidth = 0;\n\n    if (this.stroke_) {\n      strokeStyle = this.stroke_.getColor();\n\n      if (strokeStyle === null) {\n        strokeStyle = defaultStrokeStyle;\n      }\n\n      strokeStyle = asColorLike(strokeStyle);\n      strokeWidth = this.stroke_.getWidth();\n\n      if (strokeWidth === undefined) {\n        strokeWidth = defaultLineWidth;\n      }\n\n      lineDash = this.stroke_.getLineDash();\n      lineDashOffset = this.stroke_.getLineDashOffset();\n      lineJoin = this.stroke_.getLineJoin();\n\n      if (lineJoin === undefined) {\n        lineJoin = defaultLineJoin;\n      }\n\n      miterLimit = this.stroke_.getMiterLimit();\n\n      if (miterLimit === undefined) {\n        miterLimit = defaultMiterLimit;\n      }\n    }\n\n    var add = this.calculateLineJoinSize_(lineJoin, strokeWidth, miterLimit);\n    var maxRadius = Math.max(this.radius_, this.radius2_ || 0);\n    var size = Math.ceil(2 * maxRadius + add);\n    return {\n      strokeStyle: strokeStyle,\n      strokeWidth: strokeWidth,\n      size: size,\n      lineDash: lineDash,\n      lineDashOffset: lineDashOffset,\n      lineJoin: lineJoin,\n      miterLimit: miterLimit\n    };\n  };\n  /**\n   * @protected\n   */\n\n\n  RegularShape.prototype.render = function () {\n    this.renderOptions_ = this.createRenderOptions();\n    var size = this.renderOptions_.size;\n    this.canvas_ = {};\n    this.size_ = [size, size];\n  };\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The rendering context.\n   * @param {number} pixelRatio The pixel ratio.\n   */\n\n\n  RegularShape.prototype.draw_ = function (renderOptions, context, pixelRatio) {\n    context.scale(pixelRatio, pixelRatio); // set origin to canvas center\n\n    context.translate(renderOptions.size / 2, renderOptions.size / 2);\n    this.createPath_(context);\n\n    if (this.fill_) {\n      var color = this.fill_.getColor();\n\n      if (color === null) {\n        color = defaultFillStyle;\n      }\n\n      context.fillStyle = asColorLike(color);\n      context.fill();\n    }\n\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n\n      if (context.setLineDash && renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n\n      context.lineJoin = renderOptions.lineJoin;\n      context.miterLimit = renderOptions.miterLimit;\n      context.stroke();\n    }\n  };\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   */\n\n\n  RegularShape.prototype.createHitDetectionCanvas_ = function (renderOptions) {\n    if (this.fill_) {\n      var color = this.fill_.getColor(); // determine if fill is transparent (or pattern or gradient)\n\n      var opacity = 0;\n\n      if (typeof color === 'string') {\n        color = asArray(color);\n      }\n\n      if (color === null) {\n        opacity = 1;\n      } else if (Array.isArray(color)) {\n        opacity = color.length === 4 ? color[3] : 1;\n      }\n\n      if (opacity === 0) {\n        // if a transparent fill style is set, create an extra hit-detection image\n        // with a default fill style\n        var context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n        this.hitDetectionCanvas_ = context.canvas;\n        this.drawHitDetectionCanvas_(renderOptions, context);\n      }\n    }\n\n    if (!this.hitDetectionCanvas_) {\n      this.hitDetectionCanvas_ = this.getImage(1);\n    }\n  };\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context The context to draw in.\n   */\n\n\n  RegularShape.prototype.createPath_ = function (context) {\n    var points = this.points_;\n    var radius = this.radius_;\n\n    if (points === Infinity) {\n      context.arc(0, 0, radius, 0, 2 * Math.PI);\n    } else {\n      var radius2 = this.radius2_ === undefined ? radius : this.radius2_;\n\n      if (this.radius2_ !== undefined) {\n        points *= 2;\n      }\n\n      var startAngle = this.angle_ - Math.PI / 2;\n      var step = 2 * Math.PI / points;\n\n      for (var i = 0; i < points; i++) {\n        var angle0 = startAngle + i * step;\n        var radiusC = i % 2 === 0 ? radius : radius2;\n        context.lineTo(radiusC * Math.cos(angle0), radiusC * Math.sin(angle0));\n      }\n\n      context.closePath();\n    }\n  };\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The context.\n   */\n\n\n  RegularShape.prototype.drawHitDetectionCanvas_ = function (renderOptions, context) {\n    // set origin to canvas center\n    context.translate(renderOptions.size / 2, renderOptions.size / 2);\n    this.createPath_(context);\n    context.fillStyle = defaultFillStyle;\n    context.fill();\n\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n\n      if (renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n\n      context.lineJoin = renderOptions.lineJoin;\n      context.miterLimit = renderOptions.miterLimit;\n      context.stroke();\n    }\n  };\n\n  return RegularShape;\n}(ImageStyle);\n\nexport default RegularShape;","/**\n * @module ol/style/Circle\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport RegularShape from './RegularShape.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {Array<number>} [displacement=[0,0]] displacement\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale. A two dimensional scale will produce an ellipse.\n * Unless two dimensional scaling is required a better result may be obtained with an appropriate setting for `radius`.\n * @property {number} [rotation=0] Rotation in radians\n * (positive rotation clockwise, meaningful only when used in conjunction with a two dimensional scale).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view\n * (meaningful only when used in conjunction with a two dimensional scale).\n */\n\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\n\nvar CircleStyle =\n/** @class */\nfunction (_super) {\n  __extends(CircleStyle, _super);\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n\n\n  function CircleStyle(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    _this = _super.call(this, {\n      points: Infinity,\n      fill: options.fill,\n      radius: options.radius,\n      stroke: options.stroke,\n      scale: options.scale !== undefined ? options.scale : 1,\n      rotation: options.rotation !== undefined ? options.rotation : 0,\n      rotateWithView: options.rotateWithView !== undefined ? options.rotateWithView : false,\n      displacement: options.displacement !== undefined ? options.displacement : [0, 0]\n    }) || this;\n    return _this;\n  }\n  /**\n   * Clones the style.\n   * @return {CircleStyle} The cloned style.\n   * @api\n   */\n\n\n  CircleStyle.prototype.clone = function () {\n    var scale = this.getScale();\n    var style = new CircleStyle({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      radius: this.getRadius(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      displacement: this.getDisplacement().slice()\n    });\n    style.setOpacity(this.getOpacity());\n    return style;\n  };\n  /**\n   * Set the circle radius.\n   *\n   * @param {number} radius Circle radius.\n   * @api\n   */\n\n\n  CircleStyle.prototype.setRadius = function (radius) {\n    this.radius_ = radius;\n    this.render();\n  };\n\n  return CircleStyle;\n}(RegularShape);\n\nexport default CircleStyle;","/**\n * @module ol/style/Fill\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color=null] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nvar Fill =\n/** @class */\nfunction () {\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n  function Fill(opt_options) {\n    var options = opt_options || {};\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n     */\n\n    this.color_ = options.color !== undefined ? options.color : null;\n  }\n  /**\n   * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n   * @return {Fill} The cloned style.\n   * @api\n   */\n\n\n  Fill.prototype.clone = function () {\n    var color = this.getColor();\n    return new Fill({\n      color: Array.isArray(color) ? color.slice() : color || undefined\n    });\n  };\n  /**\n   * Get the fill color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n   * @api\n   */\n\n\n  Fill.prototype.getColor = function () {\n    return this.color_;\n  };\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n   * @api\n   */\n\n\n  Fill.prototype.setColor = function (color) {\n    this.color_ = color;\n  };\n\n  return Fill;\n}();\n\nexport default Fill;","/**\n * @module ol/style/Stroke\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {CanvasLineCap} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `null` (no dash).\n * Please note that Internet Explorer 10 and lower do not support the `setLineDash` method on\n * the `CanvasRenderingContext2D` and therefore this option will have no visual effect in these browsers.\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nvar Stroke =\n/** @class */\nfunction () {\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n  function Stroke(opt_options) {\n    var options = opt_options || {};\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n     */\n\n    this.color_ = options.color !== undefined ? options.color : null;\n    /**\n     * @private\n     * @type {CanvasLineCap|undefined}\n     */\n\n    this.lineCap_ = options.lineCap;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    this.lineDashOffset_ = options.lineDashOffset;\n    /**\n     * @private\n     * @type {CanvasLineJoin|undefined}\n     */\n\n    this.lineJoin_ = options.lineJoin;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    this.miterLimit_ = options.miterLimit;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    this.width_ = options.width;\n  }\n  /**\n   * Clones the style.\n   * @return {Stroke} The cloned style.\n   * @api\n   */\n\n\n  Stroke.prototype.clone = function () {\n    var color = this.getColor();\n    return new Stroke({\n      color: Array.isArray(color) ? color.slice() : color || undefined,\n      lineCap: this.getLineCap(),\n      lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n      lineDashOffset: this.getLineDashOffset(),\n      lineJoin: this.getLineJoin(),\n      miterLimit: this.getMiterLimit(),\n      width: this.getWidth()\n    });\n  };\n  /**\n   * Get the stroke color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n   * @api\n   */\n\n\n  Stroke.prototype.getColor = function () {\n    return this.color_;\n  };\n  /**\n   * Get the line cap type for the stroke.\n   * @return {CanvasLineCap|undefined} Line cap.\n   * @api\n   */\n\n\n  Stroke.prototype.getLineCap = function () {\n    return this.lineCap_;\n  };\n  /**\n   * Get the line dash style for the stroke.\n   * @return {Array<number>} Line dash.\n   * @api\n   */\n\n\n  Stroke.prototype.getLineDash = function () {\n    return this.lineDash_;\n  };\n  /**\n   * Get the line dash offset for the stroke.\n   * @return {number|undefined} Line dash offset.\n   * @api\n   */\n\n\n  Stroke.prototype.getLineDashOffset = function () {\n    return this.lineDashOffset_;\n  };\n  /**\n   * Get the line join type for the stroke.\n   * @return {CanvasLineJoin|undefined} Line join.\n   * @api\n   */\n\n\n  Stroke.prototype.getLineJoin = function () {\n    return this.lineJoin_;\n  };\n  /**\n   * Get the miter limit for the stroke.\n   * @return {number|undefined} Miter limit.\n   * @api\n   */\n\n\n  Stroke.prototype.getMiterLimit = function () {\n    return this.miterLimit_;\n  };\n  /**\n   * Get the stroke width.\n   * @return {number|undefined} Width.\n   * @api\n   */\n\n\n  Stroke.prototype.getWidth = function () {\n    return this.width_;\n  };\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n   * @api\n   */\n\n\n  Stroke.prototype.setColor = function (color) {\n    this.color_ = color;\n  };\n  /**\n   * Set the line cap.\n   *\n   * @param {CanvasLineCap|undefined} lineCap Line cap.\n   * @api\n   */\n\n\n  Stroke.prototype.setLineCap = function (lineCap) {\n    this.lineCap_ = lineCap;\n  };\n  /**\n   * Set the line dash.\n   *\n   * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n   * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n   * property will have no visual effect in these browsers.\n   *\n   * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n   *\n   * @param {Array<number>} lineDash Line dash.\n   * @api\n   */\n\n\n  Stroke.prototype.setLineDash = function (lineDash) {\n    this.lineDash_ = lineDash;\n  };\n  /**\n   * Set the line dash offset.\n   *\n   * @param {number|undefined} lineDashOffset Line dash offset.\n   * @api\n   */\n\n\n  Stroke.prototype.setLineDashOffset = function (lineDashOffset) {\n    this.lineDashOffset_ = lineDashOffset;\n  };\n  /**\n   * Set the line join.\n   *\n   * @param {CanvasLineJoin|undefined} lineJoin Line join.\n   * @api\n   */\n\n\n  Stroke.prototype.setLineJoin = function (lineJoin) {\n    this.lineJoin_ = lineJoin;\n  };\n  /**\n   * Set the miter limit.\n   *\n   * @param {number|undefined} miterLimit Miter limit.\n   * @api\n   */\n\n\n  Stroke.prototype.setMiterLimit = function (miterLimit) {\n    this.miterLimit_ = miterLimit;\n  };\n  /**\n   * Set the width.\n   *\n   * @param {number|undefined} width Width.\n   * @api\n   */\n\n\n  Stroke.prototype.setWidth = function (width) {\n    this.width_ = width;\n  };\n\n  return Stroke;\n}();\n\nexport default Stroke;","/**\n * @module ol/style/Style\n */\nimport CircleStyle from './Circle.js';\nimport Fill from './Fill.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Stroke from './Stroke.js';\nimport { assert } from '../asserts.js';\n/**\n * A function that takes an {@link module:ol/Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style~Style} or an array of them. This way e.g. a\n * vector layer can be styled. If the function returns `undefined`, the\n * feature will not be rendered.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike, number):(Style|Array<Style>|void)} StyleFunction\n */\n\n/**\n * A {@link Style}, an array of {@link Style}, or a {@link StyleFunction}.\n * @typedef {Style|Array<Style>|StyleFunction} StyleLike\n */\n\n/**\n * A function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike):\n *     (import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined)} GeometryFunction\n */\n\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((import(\"../coordinate.js\").Coordinate|Array<import(\"../coordinate.js\").Coordinate>|Array<Array<import(\"../coordinate.js\").Coordinate>>),import(\"../render.js\").State): void}\n * RenderFunction\n */\n\n/**\n * @typedef {Object} Options\n * @property {string|import(\"../geom/Geometry.js\").default|GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {import(\"./Image.js\").default} [image] Image style.\n * @property {RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {RenderFunction} [hitDetectionRenderer] Custom renderer for hit detection. If provided will be used\n * in hit detection rendering.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Text.js\").default} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * ## Feature styles\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Circle, Fill, Stroke, Style} from 'ol/style';\n *\n *  const fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)',\n *  });\n *  const stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25,\n *  });\n *  const styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5,\n *      }),\n *      fill: fill,\n *      stroke: stroke,\n *    }),\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import GeometryType from 'ol/geom/GeometryType';\n *  import {Circle, Fill, Stroke, Style} from 'ol/style';\n *\n *  const styles = {};\n *  const white = [255, 255, 255, 1];\n *  const blue = [0, 153, 255, 1];\n *  const width = 3;\n *  styles[GeometryType.POLYGON] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5],\n *      }),\n *    }),\n *  ];\n *  styles[GeometryType.MULTI_POLYGON] = styles[GeometryType.POLYGON];\n *\n *  styles[GeometryType.LINE_STRING] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2,\n *      }),\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width,\n *      }),\n *    }),\n *  ];\n *  styles[GeometryType.MULTI_LINE_STRING] = styles[GeometryType.LINE_STRING];\n *\n *  styles[GeometryType.CIRCLE] = styles[GeometryType.POLYGON].concat(\n *    styles[GeometryType.LINE_STRING]\n *  );\n *\n *  styles[GeometryType.POINT] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue,\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2,\n *        }),\n *      }),\n *      zIndex: Infinity,\n *    }),\n *  ];\n *  styles[GeometryType.MULTI_POINT] = styles[GeometryType.POINT];\n *\n *  styles[GeometryType.GEOMETRY_COLLECTION] = styles[\n *    GeometryType.POLYGON\n *  ].concat(styles[GeometryType.LINE_STRING], styles[GeometryType.POINT]);\n * ```\n *\n * @api\n */\n\nvar Style =\n/** @class */\nfunction () {\n  /**\n   * @param {Options} [opt_options] Style options.\n   */\n  function Style(opt_options) {\n    var options = opt_options || {};\n    /**\n     * @private\n     * @type {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n     */\n\n    this.geometry_ = null;\n    /**\n     * @private\n     * @type {!GeometryFunction}\n     */\n\n    this.geometryFunction_ = defaultGeometryFunction;\n\n    if (options.geometry !== undefined) {\n      this.setGeometry(options.geometry);\n    }\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n\n\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n    /**\n     * @private\n     * @type {import(\"./Image.js\").default}\n     */\n\n    this.image_ = options.image !== undefined ? options.image : null;\n    /**\n     * @private\n     * @type {RenderFunction|null}\n     */\n\n    this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n    /**\n     * @private\n     * @type {RenderFunction|null}\n     */\n\n    this.hitDetectionRenderer_ = options.hitDetectionRenderer !== undefined ? options.hitDetectionRenderer : null;\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n    /**\n     * @private\n     * @type {import(\"./Text.js\").default}\n     */\n\n    this.text_ = options.text !== undefined ? options.text : null;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    this.zIndex_ = options.zIndex;\n  }\n  /**\n   * Clones the style.\n   * @return {Style} The cloned style.\n   * @api\n   */\n\n\n  Style.prototype.clone = function () {\n    var geometry = this.getGeometry();\n\n    if (geometry && typeof geometry === 'object') {\n      geometry =\n      /** @type {import(\"../geom/Geometry.js\").default} */\n      geometry.clone();\n    }\n\n    return new Style({\n      geometry: geometry,\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      image: this.getImage() ? this.getImage().clone() : undefined,\n      renderer: this.getRenderer(),\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      text: this.getText() ? this.getText().clone() : undefined,\n      zIndex: this.getZIndex()\n    });\n  };\n  /**\n   * Get the custom renderer function that was configured with\n   * {@link #setRenderer} or the `renderer` constructor option.\n   * @return {RenderFunction|null} Custom renderer function.\n   * @api\n   */\n\n\n  Style.prototype.getRenderer = function () {\n    return this.renderer_;\n  };\n  /**\n   * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n   * and `image` options of the style will be ignored.\n   * @param {RenderFunction|null} renderer Custom renderer function.\n   * @api\n   */\n\n\n  Style.prototype.setRenderer = function (renderer) {\n    this.renderer_ = renderer;\n  };\n  /**\n   * Sets a custom renderer function for this style used\n   * in hit detection.\n   * @param {RenderFunction|null} renderer Custom renderer function.\n   * @api\n   */\n\n\n  Style.prototype.setHitDetectionRenderer = function (renderer) {\n    this.hitDetectionRenderer_ = renderer;\n  };\n  /**\n   * Get the custom renderer function that was configured with\n   * {@link #setHitDetectionRenderer} or the `hitDetectionRenderer` constructor option.\n   * @return {RenderFunction|null} Custom renderer function.\n   * @api\n   */\n\n\n  Style.prototype.getHitDetectionRenderer = function () {\n    return this.hitDetectionRenderer_;\n  };\n  /**\n   * Get the geometry to be rendered.\n   * @return {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n   * Feature property or geometry or function that returns the geometry that will\n   * be rendered with this style.\n   * @api\n   */\n\n\n  Style.prototype.getGeometry = function () {\n    return this.geometry_;\n  };\n  /**\n   * Get the function used to generate a geometry for rendering.\n   * @return {!GeometryFunction} Function that is called with a feature\n   * and returns the geometry to render instead of the feature's geometry.\n   * @api\n   */\n\n\n  Style.prototype.getGeometryFunction = function () {\n    return this.geometryFunction_;\n  };\n  /**\n   * Get the fill style.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n\n\n  Style.prototype.getFill = function () {\n    return this.fill_;\n  };\n  /**\n   * Set the fill style.\n   * @param {import(\"./Fill.js\").default} fill Fill style.\n   * @api\n   */\n\n\n  Style.prototype.setFill = function (fill) {\n    this.fill_ = fill;\n  };\n  /**\n   * Get the image style.\n   * @return {import(\"./Image.js\").default} Image style.\n   * @api\n   */\n\n\n  Style.prototype.getImage = function () {\n    return this.image_;\n  };\n  /**\n   * Set the image style.\n   * @param {import(\"./Image.js\").default} image Image style.\n   * @api\n   */\n\n\n  Style.prototype.setImage = function (image) {\n    this.image_ = image;\n  };\n  /**\n   * Get the stroke style.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n\n\n  Style.prototype.getStroke = function () {\n    return this.stroke_;\n  };\n  /**\n   * Set the stroke style.\n   * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n   * @api\n   */\n\n\n  Style.prototype.setStroke = function (stroke) {\n    this.stroke_ = stroke;\n  };\n  /**\n   * Get the text style.\n   * @return {import(\"./Text.js\").default} Text style.\n   * @api\n   */\n\n\n  Style.prototype.getText = function () {\n    return this.text_;\n  };\n  /**\n   * Set the text style.\n   * @param {import(\"./Text.js\").default} text Text style.\n   * @api\n   */\n\n\n  Style.prototype.setText = function (text) {\n    this.text_ = text;\n  };\n  /**\n   * Get the z-index for the style.\n   * @return {number|undefined} ZIndex.\n   * @api\n   */\n\n\n  Style.prototype.getZIndex = function () {\n    return this.zIndex_;\n  };\n  /**\n   * Set a geometry that is rendered instead of the feature's geometry.\n   *\n   * @param {string|import(\"../geom/Geometry.js\").default|GeometryFunction} geometry\n   *     Feature property or geometry or function returning a geometry to render\n   *     for this style.\n   * @api\n   */\n\n\n  Style.prototype.setGeometry = function (geometry) {\n    if (typeof geometry === 'function') {\n      this.geometryFunction_ = geometry;\n    } else if (typeof geometry === 'string') {\n      this.geometryFunction_ = function (feature) {\n        return (\n          /** @type {import(\"../geom/Geometry.js\").default} */\n          feature.get(geometry)\n        );\n      };\n    } else if (!geometry) {\n      this.geometryFunction_ = defaultGeometryFunction;\n    } else if (geometry !== undefined) {\n      this.geometryFunction_ = function () {\n        return (\n          /** @type {import(\"../geom/Geometry.js\").default} */\n          geometry\n        );\n      };\n    }\n\n    this.geometry_ = geometry;\n  };\n  /**\n   * Set the z-index.\n   *\n   * @param {number|undefined} zIndex ZIndex.\n   * @api\n   */\n\n\n  Style.prototype.setZIndex = function (zIndex) {\n    this.zIndex_ = zIndex;\n  };\n\n  return Style;\n}();\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of Style or single style objects wrapped in a\n * new style function.\n * @param {StyleFunction|Array<Style>|Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {StyleFunction} A style function.\n */\n\n\nexport function toFunction(obj) {\n  var styleFunction;\n\n  if (typeof obj === 'function') {\n    styleFunction = obj;\n  } else {\n    /**\n     * @type {Array<Style>}\n     */\n    var styles_1;\n\n    if (Array.isArray(obj)) {\n      styles_1 = obj;\n    } else {\n      assert(typeof\n      /** @type {?} */\n      obj.getZIndex === 'function', 41); // Expected an `Style` or an array of `Style`\n\n      var style =\n      /** @type {Style} */\n      obj;\n      styles_1 = [style];\n    }\n\n    styleFunction = function styleFunction() {\n      return styles_1;\n    };\n  }\n\n  return styleFunction;\n}\n/**\n * @type {Array<Style>}\n */\n\nvar defaultStyles = null;\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<Style>} Style.\n */\n\nexport function createDefaultStyle(feature, resolution) {\n  // We don't use an immediately-invoked function\n  // and a closure so we don't get an error at script evaluation time in\n  // browsers that do not support Canvas. (import(\"./Circle.js\").CircleStyle does\n  // canvas.getContext('2d') at construction time, which will cause an.error\n  // in such browsers.)\n  if (!defaultStyles) {\n    var fill = new Fill({\n      color: 'rgba(255,255,255,0.4)'\n    });\n    var stroke = new Stroke({\n      color: '#3399CC',\n      width: 1.25\n    });\n    defaultStyles = [new Style({\n      image: new CircleStyle({\n        fill: fill,\n        stroke: stroke,\n        radius: 5\n      }),\n      fill: fill,\n      stroke: stroke\n    })];\n  }\n\n  return defaultStyles;\n}\n/**\n * Default styles for editing features.\n * @return {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} Styles\n */\n\nexport function createEditingStyle() {\n  /** @type {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} */\n  var styles = {};\n  var white = [255, 255, 255, 1];\n  var blue = [0, 153, 255, 1];\n  var width = 3;\n  styles[GeometryType.POLYGON] = [new Style({\n    fill: new Fill({\n      color: [255, 255, 255, 0.5]\n    })\n  })];\n  styles[GeometryType.MULTI_POLYGON] = styles[GeometryType.POLYGON];\n  styles[GeometryType.LINE_STRING] = [new Style({\n    stroke: new Stroke({\n      color: white,\n      width: width + 2\n    })\n  }), new Style({\n    stroke: new Stroke({\n      color: blue,\n      width: width\n    })\n  })];\n  styles[GeometryType.MULTI_LINE_STRING] = styles[GeometryType.LINE_STRING];\n  styles[GeometryType.CIRCLE] = styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING]);\n  styles[GeometryType.POINT] = [new Style({\n    image: new CircleStyle({\n      radius: width * 2,\n      fill: new Fill({\n        color: blue\n      }),\n      stroke: new Stroke({\n        color: white,\n        width: width / 2\n      })\n    }),\n    zIndex: Infinity\n  })];\n  styles[GeometryType.MULTI_POINT] = styles[GeometryType.POINT];\n  styles[GeometryType.GEOMETRY_COLLECTION] = styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING], styles[GeometryType.POINT]);\n  return styles;\n}\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature to get the geometry for.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined} Geometry to render.\n */\n\nfunction defaultGeometryFunction(feature) {\n  return feature.getGeometry();\n}\n\nexport default Style;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/layer/BaseVector\n */\n\n\nimport Layer from './Layer.js';\nimport RBush from 'rbush';\nimport { assign } from '../obj.js';\nimport { createDefaultStyle, toFunction as toStyleFunction } from '../style/Style.js';\n/**\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {VectorSourceType} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link import(\"../PluggableMap.js\").default#addLayer map.addLayer()}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n *\n * As an optimization decluttered features from layers with the same `className` are rendered above\n * the fill and stroke styles of all of those layers regardless of z-index.  To opt out of this\n * behavior and place declutterd features with their own layer configure the layer with a `className`\n * other than `ol-layer`.\n * @property {import(\"../style/Style.js\").StyleLike|null} [style] Layer style. When set to `null`, only\n * features that have their own style will be rendered. See {@link module:ol/style/Style~Style} for the default style\n * which will be used if this is not set.\n * @property {import(\"./Base.js\").BackgroundColor} [background] Background color for the layer. If not specified, no background\n * will be rendered.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will\n * be recreated during animations. This means that no vectors will be shown clipped, but the\n * setting will have a performance impact for large amounts of vector data. When set to `false`,\n * batches will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will\n * be recreated during interactions. See also `updateWhileAnimating`.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n\n/**\n * @enum {string}\n * @private\n */\n\nvar Property = {\n  RENDER_ORDER: 'renderOrder'\n};\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @template {import(\"../renderer/canvas/VectorLayer.js\").default|import(\"../renderer/canvas/VectorTileLayer.js\").default|import(\"../renderer/canvas/VectorImageLayer.js\").default|import(\"../renderer/webgl/PointsLayer.js\").default} RendererType\n * @extends {Layer<VectorSourceType, RendererType>}\n * @api\n */\n\nvar BaseVectorLayer =\n/** @class */\nfunction (_super) {\n  __extends(BaseVectorLayer, _super);\n  /**\n   * @param {Options<VectorSourceType>} [opt_options] Options.\n   */\n\n\n  function BaseVectorLayer(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    var baseOptions = assign({}, options);\n    delete baseOptions.style;\n    delete baseOptions.renderBuffer;\n    delete baseOptions.updateWhileAnimating;\n    delete baseOptions.updateWhileInteracting;\n    _this = _super.call(this, baseOptions) || this;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.declutter_ = options.declutter !== undefined ? options.declutter : false;\n    /**\n     * @type {number}\n     * @private\n     */\n\n    _this.renderBuffer_ = options.renderBuffer !== undefined ? options.renderBuffer : 100;\n    /**\n     * User provided style.\n     * @type {import(\"../style/Style.js\").StyleLike}\n     * @private\n     */\n\n    _this.style_ = null;\n    /**\n     * Style function for use within the library.\n     * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n     * @private\n     */\n\n    _this.styleFunction_ = undefined;\n\n    _this.setStyle(options.style);\n    /**\n     * @type {boolean}\n     * @private\n     */\n\n\n    _this.updateWhileAnimating_ = options.updateWhileAnimating !== undefined ? options.updateWhileAnimating : false;\n    /**\n     * @type {boolean}\n     * @private\n     */\n\n    _this.updateWhileInteracting_ = options.updateWhileInteracting !== undefined ? options.updateWhileInteracting : false;\n    return _this;\n  }\n  /**\n   * @return {boolean} Declutter.\n   */\n\n\n  BaseVectorLayer.prototype.getDeclutter = function () {\n    return this.declutter_;\n  };\n  /**\n   * Get the topmost feature that intersects the given pixel on the viewport. Returns a promise\n   * that resolves with an array of features. The array will either contain the topmost feature\n   * when a hit was detected, or it will be empty.\n   *\n   * The hit detection algorithm used for this method is optimized for performance, but is less\n   * accurate than the one used in {@link import(\"../PluggableMap.js\").default#getFeaturesAtPixel}: Text\n   * is not considered, and icons are only represented by their bounding box instead of the exact\n   * image.\n   *\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with an array of features.\n   * @api\n   */\n\n\n  BaseVectorLayer.prototype.getFeatures = function (pixel) {\n    return _super.prototype.getFeatures.call(this, pixel);\n  };\n  /**\n   * @return {number|undefined} Render buffer.\n   */\n\n\n  BaseVectorLayer.prototype.getRenderBuffer = function () {\n    return this.renderBuffer_;\n  };\n  /**\n   * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n   *     order.\n   */\n\n\n  BaseVectorLayer.prototype.getRenderOrder = function () {\n    return (\n      /** @type {import(\"../render.js\").OrderFunction|null|undefined} */\n      this.get(Property.RENDER_ORDER)\n    );\n  };\n  /**\n   * Get the style for features.  This returns whatever was passed to the `style`\n   * option at construction or to the `setStyle` method.\n   * @return {import(\"../style/Style.js\").StyleLike|null|undefined} Layer style.\n   * @api\n   */\n\n\n  BaseVectorLayer.prototype.getStyle = function () {\n    return this.style_;\n  };\n  /**\n   * Get the style function.\n   * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n   * @api\n   */\n\n\n  BaseVectorLayer.prototype.getStyleFunction = function () {\n    return this.styleFunction_;\n  };\n  /**\n   * @return {boolean} Whether the rendered layer should be updated while\n   *     animating.\n   */\n\n\n  BaseVectorLayer.prototype.getUpdateWhileAnimating = function () {\n    return this.updateWhileAnimating_;\n  };\n  /**\n   * @return {boolean} Whether the rendered layer should be updated while\n   *     interacting.\n   */\n\n\n  BaseVectorLayer.prototype.getUpdateWhileInteracting = function () {\n    return this.updateWhileInteracting_;\n  };\n  /**\n   * Render declutter items for this layer\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n\n\n  BaseVectorLayer.prototype.renderDeclutter = function (frameState) {\n    if (!frameState.declutterTree) {\n      frameState.declutterTree = new RBush(9);\n    }\n    /** @type {*} */\n\n\n    this.getRenderer().renderDeclutter(frameState);\n  };\n  /**\n   * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n   *     Render order.\n   */\n\n\n  BaseVectorLayer.prototype.setRenderOrder = function (renderOrder) {\n    this.set(Property.RENDER_ORDER, renderOrder);\n  };\n  /**\n   * Set the style for features.  This can be a single style object, an array\n   * of styles, or a function that takes a feature and resolution and returns\n   * an array of styles. If set to `null`, the layer has no style (a `null` style),\n   * so only features that have their own styles will be rendered in the layer. Call\n   * `setStyle()` without arguments to reset to the default style. See\n   * {@link module:ol/style/Style~Style} for information on the default style.\n   * @param {import(\"../style/Style.js\").StyleLike|null} [opt_style] Layer style.\n   * @api\n   */\n\n\n  BaseVectorLayer.prototype.setStyle = function (opt_style) {\n    this.style_ = opt_style !== undefined ? opt_style : createDefaultStyle;\n    this.styleFunction_ = opt_style === null ? undefined : toStyleFunction(this.style_);\n    this.changed();\n  };\n\n  return BaseVectorLayer;\n}(Layer);\n\nexport default BaseVectorLayer;","/**\n * @module ol/render/canvas/Instruction\n */\n\n/**\n * @enum {number}\n */\nvar Instruction = {\n  BEGIN_GEOMETRY: 0,\n  BEGIN_PATH: 1,\n  CIRCLE: 2,\n  CLOSE_PATH: 3,\n  CUSTOM: 4,\n  DRAW_CHARS: 5,\n  DRAW_IMAGE: 6,\n  END_GEOMETRY: 7,\n  FILL: 8,\n  MOVE_TO_LINE_TO: 9,\n  SET_FILL_STYLE: 10,\n  SET_STROKE_STYLE: 11,\n  STROKE: 12\n};\n/**\n * @type {Array<Instruction>}\n */\n\nexport var fillInstruction = [Instruction.FILL];\n/**\n * @type {Array<Instruction>}\n */\n\nexport var strokeInstruction = [Instruction.STROKE];\n/**\n * @type {Array<Instruction>}\n */\n\nexport var beginPathInstruction = [Instruction.BEGIN_PATH];\n/**\n * @type {Array<Instruction>}\n */\n\nexport var closePathInstruction = [Instruction.CLOSE_PATH];\nexport default Instruction;","/**\n * @module ol/render/VectorContext\n */\n\n/**\n * @classdesc\n * Context for drawing geometries.  A vector context is available on render\n * events and does not need to be constructed directly.\n * @api\n */\nvar VectorContext =\n/** @class */\nfunction () {\n  function VectorContext() {}\n  /**\n   * Render a geometry with a custom renderer.\n   *\n   * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   * @param {Function} renderer Renderer.\n   * @param {Function} hitDetectionRenderer Renderer.\n   */\n\n\n  VectorContext.prototype.drawCustom = function (geometry, feature, renderer, hitDetectionRenderer) {};\n  /**\n   * Render a geometry.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry The geometry to render.\n   */\n\n\n  VectorContext.prototype.drawGeometry = function (geometry) {};\n  /**\n   * Set the rendering style.\n   *\n   * @param {import(\"../style/Style.js\").default} style The rendering style.\n   */\n\n\n  VectorContext.prototype.setStyle = function (style) {};\n  /**\n   * @param {import(\"../geom/Circle.js\").default} circleGeometry Circle geometry.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawCircle = function (circleGeometry, feature) {};\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"../style/Style.js\").default} style Style.\n   */\n\n\n  VectorContext.prototype.drawFeature = function (feature, style) {};\n  /**\n   * @param {import(\"../geom/GeometryCollection.js\").default} geometryCollectionGeometry Geometry collection.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawGeometryCollection = function (geometryCollectionGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/LineString.js\").default|import(\"./Feature.js\").default} lineStringGeometry Line string geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawLineString = function (lineStringGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/MultiLineString.js\").default|import(\"./Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawMultiLineString = function (multiLineStringGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/MultiPoint.js\").default|import(\"./Feature.js\").default} multiPointGeometry MultiPoint geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawMultiPoint = function (multiPointGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/MultiPolygon.js\").default} multiPolygonGeometry MultiPolygon geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawMultiPolygon = function (multiPolygonGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/Point.js\").default|import(\"./Feature.js\").default} pointGeometry Point geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawPoint = function (pointGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/Polygon.js\").default|import(\"./Feature.js\").default} polygonGeometry Polygon geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawPolygon = function (polygonGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/SimpleGeometry.js\").default|import(\"./Feature.js\").default} geometry Geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawText = function (geometry, feature) {};\n  /**\n   * @param {import(\"../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../style/Stroke.js\").default} strokeStyle Stroke style.\n   */\n\n\n  VectorContext.prototype.setFillStrokeStyle = function (fillStyle, strokeStyle) {};\n  /**\n   * @param {import(\"../style/Image.js\").default} imageStyle Image style.\n   * @param {import(\"../render/canvas.js\").DeclutterImageWithText} [opt_declutterImageWithText] Shared data for combined decluttering with a text style.\n   */\n\n\n  VectorContext.prototype.setImageStyle = function (imageStyle, opt_declutterImageWithText) {};\n  /**\n   * @param {import(\"../style/Text.js\").default} textStyle Text style.\n   * @param {import(\"../render/canvas.js\").DeclutterImageWithText} [opt_declutterImageWithText] Shared data for combined decluttering with an image style.\n   */\n\n\n  VectorContext.prototype.setTextStyle = function (textStyle, opt_declutterImageWithText) {};\n\n  return VectorContext;\n}();\n\nexport default VectorContext;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/render/canvas/Builder\n */\n\n\nimport CanvasInstruction from './Instruction.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport Relationship from '../../extent/Relationship.js';\nimport VectorContext from '../VectorContext.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { buffer, clone, containsCoordinate, coordinateRelationship } from '../../extent.js';\nimport { defaultFillStyle, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle } from '../canvas.js';\nimport { equals, reverseSubArray } from '../../array.js';\nimport { inflateCoordinates, inflateCoordinatesArray, inflateMultiCoordinatesArray } from '../../geom/flat/inflate.js';\n\nvar CanvasBuilder =\n/** @class */\nfunction (_super) {\n  __extends(CanvasBuilder, _super);\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n\n\n  function CanvasBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n    var _this = _super.call(this) || this;\n    /**\n     * @protected\n     * @type {number}\n     */\n\n\n    _this.tolerance = tolerance;\n    /**\n     * @protected\n     * @const\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n    _this.maxExtent = maxExtent;\n    /**\n     * @protected\n     * @type {number}\n     */\n\n    _this.pixelRatio = pixelRatio;\n    /**\n     * @protected\n     * @type {number}\n     */\n\n    _this.maxLineWidth = 0;\n    /**\n     * @protected\n     * @const\n     * @type {number}\n     */\n\n    _this.resolution = resolution;\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n\n    _this.beginGeometryInstruction1_ = null;\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n\n    _this.beginGeometryInstruction2_ = null;\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n    _this.bufferedMaxExtent_ = null;\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n\n    _this.instructions = [];\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n\n    _this.coordinates = [];\n    /**\n     * @private\n     * @type {import(\"../../coordinate.js\").Coordinate}\n     */\n\n    _this.tmpCoordinate_ = [];\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n\n    _this.hitDetectionInstructions = [];\n    /**\n     * @protected\n     * @type {import(\"../canvas.js\").FillStrokeState}\n     */\n\n    _this.state =\n    /** @type {import(\"../canvas.js\").FillStrokeState} */\n    {};\n    return _this;\n  }\n  /**\n   * @protected\n   * @param {Array<number>} dashArray Dash array.\n   * @return {Array<number>} Dash array with pixel ratio applied\n   */\n\n\n  CanvasBuilder.prototype.applyPixelRatio = function (dashArray) {\n    var pixelRatio = this.pixelRatio;\n    return pixelRatio == 1 ? dashArray : dashArray.map(function (dash) {\n      return dash * pixelRatio;\n    });\n  };\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} stride Stride.\n   * @protected\n   * @return {number} My end\n   */\n\n\n  CanvasBuilder.prototype.appendFlatPointCoordinates = function (flatCoordinates, stride) {\n    var extent = this.getBufferedMaxExtent();\n    var tmpCoord = this.tmpCoordinate_;\n    var coordinates = this.coordinates;\n    var myEnd = coordinates.length;\n\n    for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      tmpCoord[0] = flatCoordinates[i];\n      tmpCoord[1] = flatCoordinates[i + 1];\n\n      if (containsCoordinate(extent, tmpCoord)) {\n        coordinates[myEnd++] = tmpCoord[0];\n        coordinates[myEnd++] = tmpCoord[1];\n      }\n    }\n\n    return myEnd;\n  };\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} closed Last input coordinate equals first.\n   * @param {boolean} skipFirst Skip first coordinate.\n   * @protected\n   * @return {number} My end.\n   */\n\n\n  CanvasBuilder.prototype.appendFlatLineCoordinates = function (flatCoordinates, offset, end, stride, closed, skipFirst) {\n    var coordinates = this.coordinates;\n    var myEnd = coordinates.length;\n    var extent = this.getBufferedMaxExtent();\n\n    if (skipFirst) {\n      offset += stride;\n    }\n\n    var lastXCoord = flatCoordinates[offset];\n    var lastYCoord = flatCoordinates[offset + 1];\n    var nextCoord = this.tmpCoordinate_;\n    var skipped = true;\n    var i, lastRel, nextRel;\n\n    for (i = offset + stride; i < end; i += stride) {\n      nextCoord[0] = flatCoordinates[i];\n      nextCoord[1] = flatCoordinates[i + 1];\n      nextRel = coordinateRelationship(extent, nextCoord);\n\n      if (nextRel !== lastRel) {\n        if (skipped) {\n          coordinates[myEnd++] = lastXCoord;\n          coordinates[myEnd++] = lastYCoord;\n          skipped = false;\n        }\n\n        coordinates[myEnd++] = nextCoord[0];\n        coordinates[myEnd++] = nextCoord[1];\n      } else if (nextRel === Relationship.INTERSECTING) {\n        coordinates[myEnd++] = nextCoord[0];\n        coordinates[myEnd++] = nextCoord[1];\n        skipped = false;\n      } else {\n        skipped = true;\n      }\n\n      lastXCoord = nextCoord[0];\n      lastYCoord = nextCoord[1];\n      lastRel = nextRel;\n    } // Last coordinate equals first or only one point to append:\n\n\n    if (closed && skipped || i === offset + stride) {\n      coordinates[myEnd++] = lastXCoord;\n      coordinates[myEnd++] = lastYCoord;\n    }\n\n    return myEnd;\n  };\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @param {Array<number>} builderEnds Builder ends.\n   * @return {number} Offset.\n   */\n\n\n  CanvasBuilder.prototype.drawCustomCoordinates_ = function (flatCoordinates, offset, ends, stride, builderEnds) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n      var end = ends[i];\n      var builderEnd = this.appendFlatLineCoordinates(flatCoordinates, offset, end, stride, false, false);\n      builderEnds.push(builderEnd);\n      offset = end;\n    }\n\n    return offset;\n  };\n  /**\n   * @param {import(\"../../geom/SimpleGeometry.js\").default} geometry Geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   * @param {Function} renderer Renderer.\n   * @param {Function} hitDetectionRenderer Renderer.\n   */\n\n\n  CanvasBuilder.prototype.drawCustom = function (geometry, feature, renderer, hitDetectionRenderer) {\n    this.beginGeometry(geometry, feature);\n    var type = geometry.getType();\n    var stride = geometry.getStride();\n    var builderBegin = this.coordinates.length;\n    var flatCoordinates, builderEnd, builderEnds, builderEndss;\n    var offset;\n\n    switch (type) {\n      case GeometryType.MULTI_POLYGON:\n        flatCoordinates =\n        /** @type {import(\"../../geom/MultiPolygon.js\").default} */\n        geometry.getOrientedFlatCoordinates();\n        builderEndss = [];\n        var endss =\n        /** @type {import(\"../../geom/MultiPolygon.js\").default} */\n        geometry.getEndss();\n        offset = 0;\n\n        for (var i = 0, ii = endss.length; i < ii; ++i) {\n          var myEnds = [];\n          offset = this.drawCustomCoordinates_(flatCoordinates, offset, endss[i], stride, myEnds);\n          builderEndss.push(myEnds);\n        }\n\n        this.instructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEndss, geometry, renderer, inflateMultiCoordinatesArray]);\n        this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEndss, geometry, hitDetectionRenderer || renderer, inflateMultiCoordinatesArray]);\n        break;\n\n      case GeometryType.POLYGON:\n      case GeometryType.MULTI_LINE_STRING:\n        builderEnds = [];\n        flatCoordinates = type == GeometryType.POLYGON ?\n        /** @type {import(\"../../geom/Polygon.js\").default} */\n        geometry.getOrientedFlatCoordinates() : geometry.getFlatCoordinates();\n        offset = this.drawCustomCoordinates_(flatCoordinates, 0,\n        /** @type {import(\"../../geom/Polygon.js\").default|import(\"../../geom/MultiLineString.js\").default} */\n        geometry.getEnds(), stride, builderEnds);\n        this.instructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnds, geometry, renderer, inflateCoordinatesArray]);\n        this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnds, geometry, hitDetectionRenderer || renderer, inflateCoordinatesArray]);\n        break;\n\n      case GeometryType.LINE_STRING:\n      case GeometryType.CIRCLE:\n        flatCoordinates = geometry.getFlatCoordinates();\n        builderEnd = this.appendFlatLineCoordinates(flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n        this.instructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnd, geometry, renderer, inflateCoordinates]);\n        this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnd, geometry, hitDetectionRenderer || renderer, inflateCoordinates]);\n        break;\n\n      case GeometryType.MULTI_POINT:\n        flatCoordinates = geometry.getFlatCoordinates();\n        builderEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n\n        if (builderEnd > builderBegin) {\n          this.instructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnd, geometry, renderer, inflateCoordinates]);\n          this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnd, geometry, hitDetectionRenderer || renderer, inflateCoordinates]);\n        }\n\n        break;\n\n      case GeometryType.POINT:\n        flatCoordinates = geometry.getFlatCoordinates();\n        this.coordinates.push(flatCoordinates[0], flatCoordinates[1]);\n        builderEnd = this.coordinates.length;\n        this.instructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnd, geometry, renderer]);\n        this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnd, geometry, hitDetectionRenderer || renderer]);\n        break;\n\n      default:\n    }\n\n    this.endGeometry(feature);\n  };\n  /**\n   * @protected\n   * @param {import(\"../../geom/Geometry\").default|import(\"../Feature.js\").default} geometry The geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasBuilder.prototype.beginGeometry = function (geometry, feature) {\n    this.beginGeometryInstruction1_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0, geometry];\n    this.instructions.push(this.beginGeometryInstruction1_);\n    this.beginGeometryInstruction2_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0, geometry];\n    this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);\n  };\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n\n\n  CanvasBuilder.prototype.finish = function () {\n    return {\n      instructions: this.instructions,\n      hitDetectionInstructions: this.hitDetectionInstructions,\n      coordinates: this.coordinates\n    };\n  };\n  /**\n   * Reverse the hit detection instructions.\n   */\n\n\n  CanvasBuilder.prototype.reverseHitDetectionInstructions = function () {\n    var hitDetectionInstructions = this.hitDetectionInstructions; // step 1 - reverse array\n\n    hitDetectionInstructions.reverse(); // step 2 - reverse instructions within geometry blocks\n\n    var i;\n    var n = hitDetectionInstructions.length;\n    var instruction;\n    var type;\n    var begin = -1;\n\n    for (i = 0; i < n; ++i) {\n      instruction = hitDetectionInstructions[i];\n      type =\n      /** @type {import(\"./Instruction.js\").default} */\n      instruction[0];\n\n      if (type == CanvasInstruction.END_GEOMETRY) {\n        begin = i;\n      } else if (type == CanvasInstruction.BEGIN_GEOMETRY) {\n        instruction[2] = i;\n        reverseSubArray(this.hitDetectionInstructions, begin, i);\n        begin = -1;\n      }\n    }\n  };\n  /**\n   * @param {import(\"../../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../../style/Stroke.js\").default} strokeStyle Stroke style.\n   */\n\n\n  CanvasBuilder.prototype.setFillStrokeStyle = function (fillStyle, strokeStyle) {\n    var state = this.state;\n\n    if (fillStyle) {\n      var fillStyleColor = fillStyle.getColor();\n      state.fillStyle = asColorLike(fillStyleColor ? fillStyleColor : defaultFillStyle);\n    } else {\n      state.fillStyle = undefined;\n    }\n\n    if (strokeStyle) {\n      var strokeStyleColor = strokeStyle.getColor();\n      state.strokeStyle = asColorLike(strokeStyleColor ? strokeStyleColor : defaultStrokeStyle);\n      var strokeStyleLineCap = strokeStyle.getLineCap();\n      state.lineCap = strokeStyleLineCap !== undefined ? strokeStyleLineCap : defaultLineCap;\n      var strokeStyleLineDash = strokeStyle.getLineDash();\n      state.lineDash = strokeStyleLineDash ? strokeStyleLineDash.slice() : defaultLineDash;\n      var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      state.lineDashOffset = strokeStyleLineDashOffset ? strokeStyleLineDashOffset : defaultLineDashOffset;\n      var strokeStyleLineJoin = strokeStyle.getLineJoin();\n      state.lineJoin = strokeStyleLineJoin !== undefined ? strokeStyleLineJoin : defaultLineJoin;\n      var strokeStyleWidth = strokeStyle.getWidth();\n      state.lineWidth = strokeStyleWidth !== undefined ? strokeStyleWidth : defaultLineWidth;\n      var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      state.miterLimit = strokeStyleMiterLimit !== undefined ? strokeStyleMiterLimit : defaultMiterLimit;\n\n      if (state.lineWidth > this.maxLineWidth) {\n        this.maxLineWidth = state.lineWidth; // invalidate the buffered max extent cache\n\n        this.bufferedMaxExtent_ = null;\n      }\n    } else {\n      state.strokeStyle = undefined;\n      state.lineCap = undefined;\n      state.lineDash = null;\n      state.lineDashOffset = undefined;\n      state.lineJoin = undefined;\n      state.lineWidth = undefined;\n      state.miterLimit = undefined;\n    }\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @return {Array<*>} Fill instruction.\n   */\n\n\n  CanvasBuilder.prototype.createFill = function (state) {\n    var fillStyle = state.fillStyle;\n    /** @type {Array<*>} */\n\n    var fillInstruction = [CanvasInstruction.SET_FILL_STYLE, fillStyle];\n\n    if (typeof fillStyle !== 'string') {\n      // Fill is a pattern or gradient - align it!\n      fillInstruction.push(true);\n    }\n\n    return fillInstruction;\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   */\n\n\n  CanvasBuilder.prototype.applyStroke = function (state) {\n    this.instructions.push(this.createStroke(state));\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @return {Array<*>} Stroke instruction.\n   */\n\n\n  CanvasBuilder.prototype.createStroke = function (state) {\n    return [CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth * this.pixelRatio, state.lineCap, state.lineJoin, state.miterLimit, this.applyPixelRatio(state.lineDash), state.lineDashOffset * this.pixelRatio];\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState):Array<*>} createFill Create fill.\n   */\n\n\n  CanvasBuilder.prototype.updateFillStyle = function (state, createFill) {\n    var fillStyle = state.fillStyle;\n\n    if (typeof fillStyle !== 'string' || state.currentFillStyle != fillStyle) {\n      if (fillStyle !== undefined) {\n        this.instructions.push(createFill.call(this, state));\n      }\n\n      state.currentFillStyle = fillStyle;\n    }\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState): void} applyStroke Apply stroke.\n   */\n\n\n  CanvasBuilder.prototype.updateStrokeStyle = function (state, applyStroke) {\n    var strokeStyle = state.strokeStyle;\n    var lineCap = state.lineCap;\n    var lineDash = state.lineDash;\n    var lineDashOffset = state.lineDashOffset;\n    var lineJoin = state.lineJoin;\n    var lineWidth = state.lineWidth;\n    var miterLimit = state.miterLimit;\n\n    if (state.currentStrokeStyle != strokeStyle || state.currentLineCap != lineCap || lineDash != state.currentLineDash && !equals(state.currentLineDash, lineDash) || state.currentLineDashOffset != lineDashOffset || state.currentLineJoin != lineJoin || state.currentLineWidth != lineWidth || state.currentMiterLimit != miterLimit) {\n      if (strokeStyle !== undefined) {\n        applyStroke.call(this, state);\n      }\n\n      state.currentStrokeStyle = strokeStyle;\n      state.currentLineCap = lineCap;\n      state.currentLineDash = lineDash;\n      state.currentLineDashOffset = lineDashOffset;\n      state.currentLineJoin = lineJoin;\n      state.currentLineWidth = lineWidth;\n      state.currentMiterLimit = miterLimit;\n    }\n  };\n  /**\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasBuilder.prototype.endGeometry = function (feature) {\n    this.beginGeometryInstruction1_[2] = this.instructions.length;\n    this.beginGeometryInstruction1_ = null;\n    this.beginGeometryInstruction2_[2] = this.hitDetectionInstructions.length;\n    this.beginGeometryInstruction2_ = null;\n    var endGeometryInstruction = [CanvasInstruction.END_GEOMETRY, feature];\n    this.instructions.push(endGeometryInstruction);\n    this.hitDetectionInstructions.push(endGeometryInstruction);\n  };\n  /**\n   * Get the buffered rendering extent.  Rendering will be clipped to the extent\n   * provided to the constructor.  To account for symbolizers that may intersect\n   * this extent, we calculate a buffered extent (e.g. based on stroke width).\n   * @return {import(\"../../extent.js\").Extent} The buffered rendering extent.\n   * @protected\n   */\n\n\n  CanvasBuilder.prototype.getBufferedMaxExtent = function () {\n    if (!this.bufferedMaxExtent_) {\n      this.bufferedMaxExtent_ = clone(this.maxExtent);\n\n      if (this.maxLineWidth > 0) {\n        var width = this.resolution * (this.maxLineWidth + 1) / 2;\n        buffer(this.bufferedMaxExtent_, width, this.bufferedMaxExtent_);\n      }\n    }\n\n    return this.bufferedMaxExtent_;\n  };\n\n  return CanvasBuilder;\n}(VectorContext);\n\nexport default CanvasBuilder;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/render/canvas/ImageBuilder\n */\n\n\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction from './Instruction.js';\n\nvar CanvasImageBuilder =\n/** @class */\nfunction (_super) {\n  __extends(CanvasImageBuilder, _super);\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n\n\n  function CanvasImageBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n    var _this = _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n\n\n    _this.hitDetectionImage_ = null;\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n\n    _this.image_ = null;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.imagePixelRatio_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.anchorX_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.anchorY_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.height_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.opacity_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.originX_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.originY_ = undefined;\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n\n    _this.rotateWithView_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.rotation_ = undefined;\n    /**\n     * @private\n     * @type {import(\"../../size.js\").Size|undefined}\n     */\n\n    _this.scale_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.width_ = undefined;\n    /**\n     * Data shared with a text builder for combined decluttering.\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterImageWithText}\n     */\n\n    _this.declutterImageWithText_ = undefined;\n    return _this;\n  }\n  /**\n   * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} pointGeometry Point geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasImageBuilder.prototype.drawPoint = function (pointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n\n    this.beginGeometry(pointGeometry, feature);\n    var flatCoordinates = pointGeometry.getFlatCoordinates();\n    var stride = pointGeometry.getStride();\n    var myBegin = this.coordinates.length;\n    var myEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n    this.instructions.push([CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_, // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_ * this.imagePixelRatio_, this.anchorY_ * this.imagePixelRatio_, Math.ceil(this.height_ * this.imagePixelRatio_), this.opacity_, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, [this.scale_[0] * this.pixelRatio / this.imagePixelRatio_, this.scale_[1] * this.pixelRatio / this.imagePixelRatio_], Math.ceil(this.width_ * this.imagePixelRatio_), this.declutterImageWithText_]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_, // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_, this.anchorY_, this.height_, this.opacity_, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, this.scale_, this.width_, this.declutterImageWithText_]);\n    this.endGeometry(feature);\n  };\n  /**\n   * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} multiPointGeometry MultiPoint geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasImageBuilder.prototype.drawMultiPoint = function (multiPointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n\n    this.beginGeometry(multiPointGeometry, feature);\n    var flatCoordinates = multiPointGeometry.getFlatCoordinates();\n    var stride = multiPointGeometry.getStride();\n    var myBegin = this.coordinates.length;\n    var myEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n    this.instructions.push([CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_, // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_ * this.imagePixelRatio_, this.anchorY_ * this.imagePixelRatio_, Math.ceil(this.height_ * this.imagePixelRatio_), this.opacity_, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, [this.scale_[0] * this.pixelRatio / this.imagePixelRatio_, this.scale_[1] * this.pixelRatio / this.imagePixelRatio_], Math.ceil(this.width_ * this.imagePixelRatio_), this.declutterImageWithText_]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_, // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_, this.anchorY_, this.height_, this.opacity_, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, this.scale_, this.width_, this.declutterImageWithText_]);\n    this.endGeometry(feature);\n  };\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n\n\n  CanvasImageBuilder.prototype.finish = function () {\n    this.reverseHitDetectionInstructions(); // FIXME this doesn't really protect us against further calls to draw*Geometry\n\n    this.anchorX_ = undefined;\n    this.anchorY_ = undefined;\n    this.hitDetectionImage_ = null;\n    this.image_ = null;\n    this.imagePixelRatio_ = undefined;\n    this.height_ = undefined;\n    this.scale_ = undefined;\n    this.opacity_ = undefined;\n    this.originX_ = undefined;\n    this.originY_ = undefined;\n    this.rotateWithView_ = undefined;\n    this.rotation_ = undefined;\n    this.width_ = undefined;\n    return _super.prototype.finish.call(this);\n  };\n  /**\n   * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n   * @param {Object} [opt_sharedData] Shared data.\n   */\n\n\n  CanvasImageBuilder.prototype.setImageStyle = function (imageStyle, opt_sharedData) {\n    var anchor = imageStyle.getAnchor();\n    var size = imageStyle.getSize();\n    var hitDetectionImage = imageStyle.getHitDetectionImage();\n    var image = imageStyle.getImage(this.pixelRatio);\n    var origin = imageStyle.getOrigin();\n    this.imagePixelRatio_ = imageStyle.getPixelRatio(this.pixelRatio);\n    this.anchorX_ = anchor[0];\n    this.anchorY_ = anchor[1];\n    this.hitDetectionImage_ = hitDetectionImage;\n    this.image_ = image;\n    this.height_ = size[1];\n    this.opacity_ = imageStyle.getOpacity();\n    this.originX_ = origin[0] * this.imagePixelRatio_;\n    this.originY_ = origin[1] * this.imagePixelRatio_;\n    this.rotateWithView_ = imageStyle.getRotateWithView();\n    this.rotation_ = imageStyle.getRotation();\n    this.scale_ = imageStyle.getScaleArray();\n    this.width_ = size[0];\n    this.declutterImageWithText_ = opt_sharedData;\n  };\n\n  return CanvasImageBuilder;\n}(CanvasBuilder);\n\nexport default CanvasImageBuilder;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/render/canvas/LineStringBuilder\n */\n\n\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction, { beginPathInstruction, strokeInstruction } from './Instruction.js';\nimport { defaultLineDash, defaultLineDashOffset } from '../canvas.js';\n\nvar CanvasLineStringBuilder =\n/** @class */\nfunction (_super) {\n  __extends(CanvasLineStringBuilder, _super);\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n\n\n  function CanvasLineStringBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n    return _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n  }\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} end.\n   */\n\n\n  CanvasLineStringBuilder.prototype.drawFlatCoordinates_ = function (flatCoordinates, offset, end, stride) {\n    var myBegin = this.coordinates.length;\n    var myEnd = this.appendFlatLineCoordinates(flatCoordinates, offset, end, stride, false, false);\n    var moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n    this.instructions.push(moveToLineToInstruction);\n    this.hitDetectionInstructions.push(moveToLineToInstruction);\n    return end;\n  };\n  /**\n   * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} lineStringGeometry Line string geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasLineStringBuilder.prototype.drawLineString = function (lineStringGeometry, feature) {\n    var state = this.state;\n    var strokeStyle = state.strokeStyle;\n    var lineWidth = state.lineWidth;\n\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(lineStringGeometry, feature);\n    this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin, state.miterLimit, defaultLineDash, defaultLineDashOffset], beginPathInstruction);\n    var flatCoordinates = lineStringGeometry.getFlatCoordinates();\n    var stride = lineStringGeometry.getStride();\n    this.drawFlatCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(feature);\n  };\n  /**\n   * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasLineStringBuilder.prototype.drawMultiLineString = function (multiLineStringGeometry, feature) {\n    var state = this.state;\n    var strokeStyle = state.strokeStyle;\n    var lineWidth = state.lineWidth;\n\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(multiLineStringGeometry, feature);\n    this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin, state.miterLimit, state.lineDash, state.lineDashOffset], beginPathInstruction);\n    var ends = multiLineStringGeometry.getEnds();\n    var flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n    var stride = multiLineStringGeometry.getStride();\n    var offset = 0;\n\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinates_(flatCoordinates, offset,\n      /** @type {number} */\n      ends[i], stride);\n    }\n\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(feature);\n  };\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n\n\n  CanvasLineStringBuilder.prototype.finish = function () {\n    var state = this.state;\n\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n    }\n\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n    return _super.prototype.finish.call(this);\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   */\n\n\n  CanvasLineStringBuilder.prototype.applyStroke = function (state) {\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n      state.lastStroke = this.coordinates.length;\n    }\n\n    state.lastStroke = 0;\n\n    _super.prototype.applyStroke.call(this, state);\n\n    this.instructions.push(beginPathInstruction);\n  };\n\n  return CanvasLineStringBuilder;\n}(CanvasBuilder);\n\nexport default CanvasLineStringBuilder;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/render/canvas/PolygonBuilder\n */\n\n\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction, { beginPathInstruction, closePathInstruction, fillInstruction, strokeInstruction } from './Instruction.js';\nimport { defaultFillStyle } from '../canvas.js';\nimport { snap } from '../../geom/flat/simplify.js';\n\nvar CanvasPolygonBuilder =\n/** @class */\nfunction (_super) {\n  __extends(CanvasPolygonBuilder, _super);\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n\n\n  function CanvasPolygonBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n    return _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n  }\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n\n\n  CanvasPolygonBuilder.prototype.drawFlatCoordinatess_ = function (flatCoordinates, offset, ends, stride) {\n    var state = this.state;\n    var fill = state.fillStyle !== undefined;\n    var stroke = state.strokeStyle !== undefined;\n    var numEnds = ends.length;\n    this.instructions.push(beginPathInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction);\n\n    for (var i = 0; i < numEnds; ++i) {\n      var end = ends[i];\n      var myBegin = this.coordinates.length;\n      var myEnd = this.appendFlatLineCoordinates(flatCoordinates, offset, end, stride, true, !stroke);\n      var moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n      this.instructions.push(moveToLineToInstruction);\n      this.hitDetectionInstructions.push(moveToLineToInstruction);\n\n      if (stroke) {\n        // Performance optimization: only call closePath() when we have a stroke.\n        // Otherwise the ring is closed already (see appendFlatLineCoordinates above).\n        this.instructions.push(closePathInstruction);\n        this.hitDetectionInstructions.push(closePathInstruction);\n      }\n\n      offset = end;\n    }\n\n    if (fill) {\n      this.instructions.push(fillInstruction);\n      this.hitDetectionInstructions.push(fillInstruction);\n    }\n\n    if (stroke) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n\n    return offset;\n  };\n  /**\n   * @param {import(\"../../geom/Circle.js\").default} circleGeometry Circle geometry.\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   */\n\n\n  CanvasPolygonBuilder.prototype.drawCircle = function (circleGeometry, feature) {\n    var state = this.state;\n    var fillStyle = state.fillStyle;\n    var strokeStyle = state.strokeStyle;\n\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n\n    this.setFillStrokeStyles_();\n    this.beginGeometry(circleGeometry, feature);\n\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([CanvasInstruction.SET_FILL_STYLE, defaultFillStyle]);\n    }\n\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin, state.miterLimit, state.lineDash, state.lineDashOffset]);\n    }\n\n    var flatCoordinates = circleGeometry.getFlatCoordinates();\n    var stride = circleGeometry.getStride();\n    var myBegin = this.coordinates.length;\n    this.appendFlatLineCoordinates(flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n    var circleInstruction = [CanvasInstruction.CIRCLE, myBegin];\n    this.instructions.push(beginPathInstruction, circleInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction, circleInstruction);\n\n    if (state.fillStyle !== undefined) {\n      this.instructions.push(fillInstruction);\n      this.hitDetectionInstructions.push(fillInstruction);\n    }\n\n    if (state.strokeStyle !== undefined) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n\n    this.endGeometry(feature);\n  };\n  /**\n   * @param {import(\"../../geom/Polygon.js\").default|import(\"../Feature.js\").default} polygonGeometry Polygon geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasPolygonBuilder.prototype.drawPolygon = function (polygonGeometry, feature) {\n    var state = this.state;\n    var fillStyle = state.fillStyle;\n    var strokeStyle = state.strokeStyle;\n\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n\n    this.setFillStrokeStyles_();\n    this.beginGeometry(polygonGeometry, feature);\n\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([CanvasInstruction.SET_FILL_STYLE, defaultFillStyle]);\n    }\n\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin, state.miterLimit, state.lineDash, state.lineDashOffset]);\n    }\n\n    var ends = polygonGeometry.getEnds();\n    var flatCoordinates = polygonGeometry.getOrientedFlatCoordinates();\n    var stride = polygonGeometry.getStride();\n    this.drawFlatCoordinatess_(flatCoordinates, 0,\n    /** @type {Array<number>} */\n    ends, stride);\n    this.endGeometry(feature);\n  };\n  /**\n   * @param {import(\"../../geom/MultiPolygon.js\").default} multiPolygonGeometry MultiPolygon geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasPolygonBuilder.prototype.drawMultiPolygon = function (multiPolygonGeometry, feature) {\n    var state = this.state;\n    var fillStyle = state.fillStyle;\n    var strokeStyle = state.strokeStyle;\n\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n\n    this.setFillStrokeStyles_();\n    this.beginGeometry(multiPolygonGeometry, feature);\n\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([CanvasInstruction.SET_FILL_STYLE, defaultFillStyle]);\n    }\n\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin, state.miterLimit, state.lineDash, state.lineDashOffset]);\n    }\n\n    var endss = multiPolygonGeometry.getEndss();\n    var flatCoordinates = multiPolygonGeometry.getOrientedFlatCoordinates();\n    var stride = multiPolygonGeometry.getStride();\n    var offset = 0;\n\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinatess_(flatCoordinates, offset, endss[i], stride);\n    }\n\n    this.endGeometry(feature);\n  };\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n\n\n  CanvasPolygonBuilder.prototype.finish = function () {\n    this.reverseHitDetectionInstructions();\n    this.state = null; // We want to preserve topology when drawing polygons.  Polygons are\n    // simplified using quantization and point elimination. However, we might\n    // have received a mix of quantized and non-quantized geometries, so ensure\n    // that all are quantized by quantizing all coordinates in the batch.\n\n    var tolerance = this.tolerance;\n\n    if (tolerance !== 0) {\n      var coordinates = this.coordinates;\n\n      for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = snap(coordinates[i], tolerance);\n      }\n    }\n\n    return _super.prototype.finish.call(this);\n  };\n  /**\n   * @private\n   */\n\n\n  CanvasPolygonBuilder.prototype.setFillStrokeStyles_ = function () {\n    var state = this.state;\n    var fillStyle = state.fillStyle;\n\n    if (fillStyle !== undefined) {\n      this.updateFillStyle(state, this.createFill);\n    }\n\n    if (state.strokeStyle !== undefined) {\n      this.updateStrokeStyle(state, this.applyStroke);\n    }\n  };\n\n  return CanvasPolygonBuilder;\n}(CanvasBuilder);\n\nexport default CanvasPolygonBuilder;","/**\n * @module ol/style/TextPlacement\n */\n\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link module:ol/geom/LineString~LineString},\n * {@link module:ol/geom/Polygon~Polygon}, {@link module:ol/geom/MultiLineString~MultiLineString} or\n * {@link module:ol/geom/MultiPolygon~MultiPolygon}.\n * @enum {string}\n */\nexport default {\n  POINT: 'point',\n  LINE: 'line'\n};","/**\n * @module ol/geom/flat/straightchunk\n */\n\n/**\n * @param {number} maxAngle Maximum acceptable angle delta between segments.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Array<number>} Start and end of the first suitable chunk of the\n * given `flatCoordinates`.\n */\nexport function matchingChunk(maxAngle, flatCoordinates, offset, end, stride) {\n  var chunkStart = offset;\n  var chunkEnd = offset;\n  var chunkM = 0;\n  var m = 0;\n  var start = offset;\n  var acos, i, m12, m23, x1, y1, x12, y12, x23, y23;\n\n  for (i = offset; i < end; i += stride) {\n    var x2 = flatCoordinates[i];\n    var y2 = flatCoordinates[i + 1];\n\n    if (x1 !== undefined) {\n      x23 = x2 - x1;\n      y23 = y2 - y1;\n      m23 = Math.sqrt(x23 * x23 + y23 * y23);\n\n      if (x12 !== undefined) {\n        m += m12;\n        acos = Math.acos((x12 * x23 + y12 * y23) / (m12 * m23));\n\n        if (acos > maxAngle) {\n          if (m > chunkM) {\n            chunkM = m;\n            chunkStart = start;\n            chunkEnd = i;\n          }\n\n          m = 0;\n          start = i - stride;\n        }\n      }\n\n      m12 = m23;\n      x12 = x23;\n      y12 = y23;\n    }\n\n    x1 = x2;\n    y1 = y2;\n  }\n\n  m += m23;\n  return m > chunkM ? [start, i] : [chunkStart, chunkEnd];\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/render/canvas/TextBuilder\n */\n\n\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction from './Instruction.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport TextPlacement from '../../style/TextPlacement.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { defaultFillStyle, defaultFont, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultPadding, defaultStrokeStyle, defaultTextAlign, defaultTextBaseline, registerFont } from '../canvas.js';\nimport { getUid } from '../../util.js';\nimport { intersects } from '../../extent.js';\nimport { matchingChunk } from '../../geom/flat/straightchunk.js';\n/**\n * @const\n * @enum {number}\n */\n\nexport var TEXT_ALIGN = {\n  'left': 0,\n  'end': 0,\n  'center': 0.5,\n  'right': 1,\n  'start': 1,\n  'top': 0,\n  'middle': 0.5,\n  'hanging': 0.2,\n  'alphabetic': 0.8,\n  'ideographic': 0.8,\n  'bottom': 1\n};\n\nvar CanvasTextBuilder =\n/** @class */\nfunction (_super) {\n  __extends(CanvasTextBuilder, _super);\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n\n\n  function CanvasTextBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n    var _this = _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n    /**\n     * @private\n     * @type {Array<HTMLCanvasElement>}\n     */\n\n\n    _this.labels_ = null;\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.text_ = '';\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.textOffsetX_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.textOffsetY_ = 0;\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n\n    _this.textRotateWithView_ = undefined;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.textRotation_ = 0;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n\n    _this.textFillState_ = null;\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").FillState>}\n     */\n\n    _this.fillStates = {};\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n\n    _this.textStrokeState_ = null;\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n     */\n\n    _this.strokeStates = {};\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").TextState}\n     */\n\n    _this.textState_ =\n    /** @type {import(\"../canvas.js\").TextState} */\n    {};\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").TextState>}\n     */\n\n    _this.textStates = {};\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.textKey_ = '';\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.fillKey_ = '';\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.strokeKey_ = '';\n    /**\n     * Data shared with an image builder for combined decluttering.\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterImageWithText}\n     */\n\n    _this.declutterImageWithText_ = undefined;\n    return _this;\n  }\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n\n\n  CanvasTextBuilder.prototype.finish = function () {\n    var instructions = _super.prototype.finish.call(this);\n\n    instructions.textStates = this.textStates;\n    instructions.fillStates = this.fillStates;\n    instructions.strokeStates = this.strokeStates;\n    return instructions;\n  };\n  /**\n   * @param {import(\"../../geom/SimpleGeometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasTextBuilder.prototype.drawText = function (geometry, feature) {\n    var fillState = this.textFillState_;\n    var strokeState = this.textStrokeState_;\n    var textState = this.textState_;\n\n    if (this.text_ === '' || !textState || !fillState && !strokeState) {\n      return;\n    }\n\n    var coordinates = this.coordinates;\n    var begin = coordinates.length;\n    var geometryType = geometry.getType();\n    var flatCoordinates = null;\n    var stride = geometry.getStride();\n\n    if (textState.placement === TextPlacement.LINE && (geometryType == GeometryType.LINE_STRING || geometryType == GeometryType.MULTI_LINE_STRING || geometryType == GeometryType.POLYGON || geometryType == GeometryType.MULTI_POLYGON)) {\n      if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n        return;\n      }\n\n      var ends = void 0;\n      flatCoordinates = geometry.getFlatCoordinates();\n\n      if (geometryType == GeometryType.LINE_STRING) {\n        ends = [flatCoordinates.length];\n      } else if (geometryType == GeometryType.MULTI_LINE_STRING) {\n        ends =\n        /** @type {import(\"../../geom/MultiLineString.js\").default} */\n        geometry.getEnds();\n      } else if (geometryType == GeometryType.POLYGON) {\n        ends =\n        /** @type {import(\"../../geom/Polygon.js\").default} */\n        geometry.getEnds().slice(0, 1);\n      } else if (geometryType == GeometryType.MULTI_POLYGON) {\n        var endss =\n        /** @type {import(\"../../geom/MultiPolygon.js\").default} */\n        geometry.getEndss();\n        ends = [];\n\n        for (var i = 0, ii = endss.length; i < ii; ++i) {\n          ends.push(endss[i][0]);\n        }\n      }\n\n      this.beginGeometry(geometry, feature);\n      var textAlign = textState.textAlign;\n      var flatOffset = 0;\n      var flatEnd = void 0;\n\n      for (var o = 0, oo = ends.length; o < oo; ++o) {\n        if (textAlign == undefined) {\n          var range = matchingChunk(textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\n          flatOffset = range[0];\n          flatEnd = range[1];\n        } else {\n          flatEnd = ends[o];\n        }\n\n        for (var i = flatOffset; i < flatEnd; i += stride) {\n          coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\n        }\n\n        var end = coordinates.length;\n        flatOffset = ends[o];\n        this.drawChars_(begin, end);\n        begin = end;\n      }\n\n      this.endGeometry(feature);\n    } else {\n      var geometryWidths = textState.overflow ? null : [];\n\n      switch (geometryType) {\n        case GeometryType.POINT:\n        case GeometryType.MULTI_POINT:\n          flatCoordinates =\n          /** @type {import(\"../../geom/MultiPoint.js\").default} */\n          geometry.getFlatCoordinates();\n          break;\n\n        case GeometryType.LINE_STRING:\n          flatCoordinates =\n          /** @type {import(\"../../geom/LineString.js\").default} */\n          geometry.getFlatMidpoint();\n          break;\n\n        case GeometryType.CIRCLE:\n          flatCoordinates =\n          /** @type {import(\"../../geom/Circle.js\").default} */\n          geometry.getCenter();\n          break;\n\n        case GeometryType.MULTI_LINE_STRING:\n          flatCoordinates =\n          /** @type {import(\"../../geom/MultiLineString.js\").default} */\n          geometry.getFlatMidpoints();\n          stride = 2;\n          break;\n\n        case GeometryType.POLYGON:\n          flatCoordinates =\n          /** @type {import(\"../../geom/Polygon.js\").default} */\n          geometry.getFlatInteriorPoint();\n\n          if (!textState.overflow) {\n            geometryWidths.push(flatCoordinates[2] / this.resolution);\n          }\n\n          stride = 3;\n          break;\n\n        case GeometryType.MULTI_POLYGON:\n          var interiorPoints =\n          /** @type {import(\"../../geom/MultiPolygon.js\").default} */\n          geometry.getFlatInteriorPoints();\n          flatCoordinates = [];\n\n          for (var i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n            if (!textState.overflow) {\n              geometryWidths.push(interiorPoints[i + 2] / this.resolution);\n            }\n\n            flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n          }\n\n          if (flatCoordinates.length === 0) {\n            return;\n          }\n\n          stride = 2;\n          break;\n\n        default:\n      }\n\n      var end = this.appendFlatPointCoordinates(flatCoordinates, stride);\n\n      if (end === begin) {\n        return;\n      }\n\n      if (geometryWidths && (end - begin) / 2 !== flatCoordinates.length / stride) {\n        var beg_1 = begin / 2;\n        geometryWidths = geometryWidths.filter(function (w, i) {\n          var keep = coordinates[(beg_1 + i) * 2] === flatCoordinates[i * stride] && coordinates[(beg_1 + i) * 2 + 1] === flatCoordinates[i * stride + 1];\n\n          if (!keep) {\n            --beg_1;\n          }\n\n          return keep;\n        });\n      }\n\n      this.saveTextStates_();\n\n      if (textState.backgroundFill || textState.backgroundStroke) {\n        this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\n\n        if (textState.backgroundFill) {\n          this.updateFillStyle(this.state, this.createFill);\n          this.hitDetectionInstructions.push(this.createFill(this.state));\n        }\n\n        if (textState.backgroundStroke) {\n          this.updateStrokeStyle(this.state, this.applyStroke);\n          this.hitDetectionInstructions.push(this.createStroke(this.state));\n        }\n      }\n\n      this.beginGeometry(geometry, feature); // adjust padding for negative scale\n\n      var padding = textState.padding;\n\n      if (padding != defaultPadding && (textState.scale[0] < 0 || textState.scale[1] < 0)) {\n        var p0 = textState.padding[0];\n        var p1 = textState.padding[1];\n        var p2 = textState.padding[2];\n        var p3 = textState.padding[3];\n\n        if (textState.scale[0] < 0) {\n          p1 = -p1;\n          p3 = -p3;\n        }\n\n        if (textState.scale[1] < 0) {\n          p0 = -p0;\n          p2 = -p2;\n        }\n\n        padding = [p0, p1, p2, p3];\n      } // The image is unknown at this stage so we pass null; it will be computed at render time.\n      // For clarity, we pass NaN for offsetX, offsetY, width and height, which will be computed at\n      // render time.\n\n\n      var pixelRatio_1 = this.pixelRatio;\n      this.instructions.push([CanvasInstruction.DRAW_IMAGE, begin, end, null, NaN, NaN, NaN, 1, 0, 0, this.textRotateWithView_, this.textRotation_, [1, 1], NaN, this.declutterImageWithText_, padding == defaultPadding ? defaultPadding : padding.map(function (p) {\n        return p * pixelRatio_1;\n      }), !!textState.backgroundFill, !!textState.backgroundStroke, this.text_, this.textKey_, this.strokeKey_, this.fillKey_, this.textOffsetX_, this.textOffsetY_, geometryWidths]);\n      var scale = 1 / pixelRatio_1;\n      this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, begin, end, null, NaN, NaN, NaN, 1, 0, 0, this.textRotateWithView_, this.textRotation_, [scale, scale], NaN, this.declutterImageWithText_, padding, !!textState.backgroundFill, !!textState.backgroundStroke, this.text_, this.textKey_, this.strokeKey_, this.fillKey_, this.textOffsetX_, this.textOffsetY_, geometryWidths]);\n      this.endGeometry(feature);\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  CanvasTextBuilder.prototype.saveTextStates_ = function () {\n    var strokeState = this.textStrokeState_;\n    var textState = this.textState_;\n    var fillState = this.textFillState_;\n    var strokeKey = this.strokeKey_;\n\n    if (strokeState) {\n      if (!(strokeKey in this.strokeStates)) {\n        this.strokeStates[strokeKey] = {\n          strokeStyle: strokeState.strokeStyle,\n          lineCap: strokeState.lineCap,\n          lineDashOffset: strokeState.lineDashOffset,\n          lineWidth: strokeState.lineWidth,\n          lineJoin: strokeState.lineJoin,\n          miterLimit: strokeState.miterLimit,\n          lineDash: strokeState.lineDash\n        };\n      }\n    }\n\n    var textKey = this.textKey_;\n\n    if (!(textKey in this.textStates)) {\n      this.textStates[textKey] = {\n        font: textState.font,\n        textAlign: textState.textAlign || defaultTextAlign,\n        textBaseline: textState.textBaseline || defaultTextBaseline,\n        scale: textState.scale\n      };\n    }\n\n    var fillKey = this.fillKey_;\n\n    if (fillState) {\n      if (!(fillKey in this.fillStates)) {\n        this.fillStates[fillKey] = {\n          fillStyle: fillState.fillStyle\n        };\n      }\n    }\n  };\n  /**\n   * @private\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   */\n\n\n  CanvasTextBuilder.prototype.drawChars_ = function (begin, end) {\n    var strokeState = this.textStrokeState_;\n    var textState = this.textState_;\n    var strokeKey = this.strokeKey_;\n    var textKey = this.textKey_;\n    var fillKey = this.fillKey_;\n    this.saveTextStates_();\n    var pixelRatio = this.pixelRatio;\n    var baseline = TEXT_ALIGN[textState.textBaseline];\n    var offsetY = this.textOffsetY_ * pixelRatio;\n    var text = this.text_;\n    var strokeWidth = strokeState ? strokeState.lineWidth * Math.abs(textState.scale[0]) / 2 : 0;\n    this.instructions.push([CanvasInstruction.DRAW_CHARS, begin, end, baseline, textState.overflow, fillKey, textState.maxAngle, pixelRatio, offsetY, strokeKey, strokeWidth * pixelRatio, text, textKey, 1]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_CHARS, begin, end, baseline, textState.overflow, fillKey, textState.maxAngle, 1, offsetY, strokeKey, strokeWidth, text, textKey, 1 / pixelRatio]);\n  };\n  /**\n   * @param {import(\"../../style/Text.js\").default} textStyle Text style.\n   * @param {Object} [opt_sharedData] Shared data.\n   */\n\n\n  CanvasTextBuilder.prototype.setTextStyle = function (textStyle, opt_sharedData) {\n    var textState, fillState, strokeState;\n\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      var textFillStyle = textStyle.getFill();\n\n      if (!textFillStyle) {\n        fillState = null;\n        this.textFillState_ = fillState;\n      } else {\n        fillState = this.textFillState_;\n\n        if (!fillState) {\n          fillState =\n          /** @type {import(\"../canvas.js\").FillState} */\n          {};\n          this.textFillState_ = fillState;\n        }\n\n        fillState.fillStyle = asColorLike(textFillStyle.getColor() || defaultFillStyle);\n      }\n\n      var textStrokeStyle = textStyle.getStroke();\n\n      if (!textStrokeStyle) {\n        strokeState = null;\n        this.textStrokeState_ = strokeState;\n      } else {\n        strokeState = this.textStrokeState_;\n\n        if (!strokeState) {\n          strokeState =\n          /** @type {import(\"../canvas.js\").StrokeState} */\n          {};\n          this.textStrokeState_ = strokeState;\n        }\n\n        var lineDash = textStrokeStyle.getLineDash();\n        var lineDashOffset = textStrokeStyle.getLineDashOffset();\n        var lineWidth = textStrokeStyle.getWidth();\n        var miterLimit = textStrokeStyle.getMiterLimit();\n        strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\n        strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\n        strokeState.lineDashOffset = lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\n        strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\n        strokeState.lineWidth = lineWidth === undefined ? defaultLineWidth : lineWidth;\n        strokeState.miterLimit = miterLimit === undefined ? defaultMiterLimit : miterLimit;\n        strokeState.strokeStyle = asColorLike(textStrokeStyle.getColor() || defaultStrokeStyle);\n      }\n\n      textState = this.textState_;\n      var font = textStyle.getFont() || defaultFont;\n      registerFont(font);\n      var textScale = textStyle.getScaleArray();\n      textState.overflow = textStyle.getOverflow();\n      textState.font = font;\n      textState.maxAngle = textStyle.getMaxAngle();\n      textState.placement = textStyle.getPlacement();\n      textState.textAlign = textStyle.getTextAlign();\n      textState.textBaseline = textStyle.getTextBaseline() || defaultTextBaseline;\n      textState.backgroundFill = textStyle.getBackgroundFill();\n      textState.backgroundStroke = textStyle.getBackgroundStroke();\n      textState.padding = textStyle.getPadding() || defaultPadding;\n      textState.scale = textScale === undefined ? [1, 1] : textScale;\n      var textOffsetX = textStyle.getOffsetX();\n      var textOffsetY = textStyle.getOffsetY();\n      var textRotateWithView = textStyle.getRotateWithView();\n      var textRotation = textStyle.getRotation();\n      this.text_ = textStyle.getText() || '';\n      this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n      this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n      this.textRotateWithView_ = textRotateWithView === undefined ? false : textRotateWithView;\n      this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n      this.strokeKey_ = strokeState ? (typeof strokeState.strokeStyle == 'string' ? strokeState.strokeStyle : getUid(strokeState.strokeStyle)) + strokeState.lineCap + strokeState.lineDashOffset + '|' + strokeState.lineWidth + strokeState.lineJoin + strokeState.miterLimit + '[' + strokeState.lineDash.join() + ']' : '';\n      this.textKey_ = textState.font + textState.scale + (textState.textAlign || '?') + (textState.textBaseline || '?');\n      this.fillKey_ = fillState ? typeof fillState.fillStyle == 'string' ? fillState.fillStyle : '|' + getUid(fillState.fillStyle) : '';\n    }\n\n    this.declutterImageWithText_ = opt_sharedData;\n  };\n\n  return CanvasTextBuilder;\n}(CanvasBuilder);\n\nexport default CanvasTextBuilder;","/**\n * @module ol/render/canvas/BuilderGroup\n */\nimport Builder from './Builder.js';\nimport ImageBuilder from './ImageBuilder.js';\nimport LineStringBuilder from './LineStringBuilder.js';\nimport PolygonBuilder from './PolygonBuilder.js';\nimport TextBuilder from './TextBuilder.js';\n/**\n * @type {Object<import(\"./BuilderType\").default, typeof Builder>}\n */\n\nvar BATCH_CONSTRUCTORS = {\n  'Circle': PolygonBuilder,\n  'Default': Builder,\n  'Image': ImageBuilder,\n  'LineString': LineStringBuilder,\n  'Polygon': PolygonBuilder,\n  'Text': TextBuilder\n};\n\nvar BuilderGroup =\n/** @class */\nfunction () {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Max extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  function BuilderGroup(tolerance, maxExtent, resolution, pixelRatio) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tolerance_ = tolerance;\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n    this.maxExtent_ = maxExtent;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.pixelRatio_ = pixelRatio;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.resolution_ = resolution;\n    /**\n     * @private\n     * @type {!Object<string, !Object<import(\"./BuilderType\").default, Builder>>}\n     */\n\n    this.buildersByZIndex_ = {};\n  }\n  /**\n   * @return {!Object<string, !Object<import(\"./BuilderType\").default, import(\"./Builder.js\").SerializableInstructions>>} The serializable instructions\n   */\n\n\n  BuilderGroup.prototype.finish = function () {\n    var builderInstructions = {};\n\n    for (var zKey in this.buildersByZIndex_) {\n      builderInstructions[zKey] = builderInstructions[zKey] || {};\n      var builders = this.buildersByZIndex_[zKey];\n\n      for (var builderKey in builders) {\n        var builderInstruction = builders[builderKey].finish();\n        builderInstructions[zKey][builderKey] = builderInstruction;\n      }\n    }\n\n    return builderInstructions;\n  };\n  /**\n   * @param {number|undefined} zIndex Z index.\n   * @param {import(\"./BuilderType.js\").default} builderType Replay type.\n   * @return {import(\"../VectorContext.js\").default} Replay.\n   */\n\n\n  BuilderGroup.prototype.getBuilder = function (zIndex, builderType) {\n    var zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n    var replays = this.buildersByZIndex_[zIndexKey];\n\n    if (replays === undefined) {\n      replays = {};\n      this.buildersByZIndex_[zIndexKey] = replays;\n    }\n\n    var replay = replays[builderType];\n\n    if (replay === undefined) {\n      var Constructor = BATCH_CONSTRUCTORS[builderType];\n      replay = new Constructor(this.tolerance_, this.maxExtent_, this.resolution_, this.pixelRatio_);\n      replays[builderType] = replay;\n    }\n\n    return replay;\n  };\n\n  return BuilderGroup;\n}();\n\nexport default BuilderGroup;","/**\n * @module ol/render/canvas/BuilderType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CIRCLE: 'Circle',\n  DEFAULT: 'Default',\n  IMAGE: 'Image',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  TEXT: 'Text'\n};","/**\n * @module ol/geom/flat/textpath\n */\nimport { lerp } from '../../math.js';\nimport { rotate } from './transform.js';\n/**\n * @param {Array<number>} flatCoordinates Path to put text on.\n * @param {number} offset Start offset of the `flatCoordinates`.\n * @param {number} end End offset of the `flatCoordinates`.\n * @param {number} stride Stride.\n * @param {string} text Text to place on the path.\n * @param {number} startM m along the path where the text starts.\n * @param {number} maxAngle Max angle between adjacent chars in radians.\n * @param {number} scale The product of the text scale and the device pixel ratio.\n * @param {function(string, string, Object<string, number>):number} measureAndCacheTextWidth Measure and cache text width.\n * @param {string} font The font.\n * @param {Object<string, number>} cache A cache of measured widths.\n * @param {number} rotation Rotation to apply to the flatCoordinates to determine whether text needs to be reversed.\n * @return {Array<Array<*>>} The result array (or null if `maxAngle` was\n * exceeded). Entries of the array are x, y, anchorX, angle, chunk.\n */\n\nexport function drawTextOnPath(flatCoordinates, offset, end, stride, text, startM, maxAngle, scale, measureAndCacheTextWidth, font, cache, rotation) {\n  var x2 = flatCoordinates[offset];\n  var y2 = flatCoordinates[offset + 1];\n  var x1 = 0;\n  var y1 = 0;\n  var segmentLength = 0;\n  var segmentM = 0;\n\n  function advance() {\n    x1 = x2;\n    y1 = y2;\n    offset += stride;\n    x2 = flatCoordinates[offset];\n    y2 = flatCoordinates[offset + 1];\n    segmentM += segmentLength;\n    segmentLength = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  }\n\n  do {\n    advance();\n  } while (offset < end - stride && segmentM + segmentLength < startM);\n\n  var interpolate = segmentLength === 0 ? 0 : (startM - segmentM) / segmentLength;\n  var beginX = lerp(x1, x2, interpolate);\n  var beginY = lerp(y1, y2, interpolate);\n  var startOffset = offset - stride;\n  var startLength = segmentM;\n  var endM = startM + scale * measureAndCacheTextWidth(font, text, cache);\n\n  while (offset < end - stride && segmentM + segmentLength < endM) {\n    advance();\n  }\n\n  interpolate = segmentLength === 0 ? 0 : (endM - segmentM) / segmentLength;\n  var endX = lerp(x1, x2, interpolate);\n  var endY = lerp(y1, y2, interpolate); // Keep text upright\n\n  var reverse;\n\n  if (rotation) {\n    var flat = [beginX, beginY, endX, endY];\n    rotate(flat, 0, 4, 2, rotation, flat, flat);\n    reverse = flat[0] > flat[2];\n  } else {\n    reverse = beginX > endX;\n  }\n\n  var PI = Math.PI;\n  var result = [];\n  var singleSegment = startOffset + stride === offset;\n  offset = startOffset;\n  segmentLength = 0;\n  segmentM = startLength;\n  x2 = flatCoordinates[offset];\n  y2 = flatCoordinates[offset + 1];\n  var previousAngle; // All on the same segment\n\n  if (singleSegment) {\n    advance();\n    previousAngle = Math.atan2(y2 - y1, x2 - x1);\n\n    if (reverse) {\n      previousAngle += previousAngle > 0 ? -PI : PI;\n    }\n\n    var x = (endX + beginX) / 2;\n    var y = (endY + beginY) / 2;\n    result[0] = [x, y, (endM - startM) / 2, previousAngle, text];\n    return result;\n  }\n\n  for (var i = 0, ii = text.length; i < ii;) {\n    advance();\n    var angle = Math.atan2(y2 - y1, x2 - x1);\n\n    if (reverse) {\n      angle += angle > 0 ? -PI : PI;\n    }\n\n    if (previousAngle !== undefined) {\n      var delta = angle - previousAngle;\n      delta += delta > PI ? -2 * PI : delta < -PI ? 2 * PI : 0;\n\n      if (Math.abs(delta) > maxAngle) {\n        return null;\n      }\n    }\n\n    previousAngle = angle;\n    var iStart = i;\n    var charLength = 0;\n\n    for (; i < ii; ++i) {\n      var index = reverse ? ii - i - 1 : i;\n      var len = scale * measureAndCacheTextWidth(font, text[index], cache);\n\n      if (offset + stride < end && segmentM + segmentLength < startM + charLength + len / 2) {\n        break;\n      }\n\n      charLength += len;\n    }\n\n    if (i === iStart) {\n      continue;\n    }\n\n    var chars = reverse ? text.substring(ii - iStart, ii - i) : text.substring(iStart, i);\n    interpolate = segmentLength === 0 ? 0 : (startM + charLength / 2 - segmentM) / segmentLength;\n    var x = lerp(x1, x2, interpolate);\n    var y = lerp(y1, y2, interpolate);\n    result.push([x, y, charLength / 2, angle, chars]);\n    startM += charLength;\n  }\n\n  return result;\n}","/**\n * @module ol/render/canvas/Executor\n */\nimport CanvasInstruction from './Instruction.js';\nimport { TEXT_ALIGN } from './TextBuilder.js';\nimport { WORKER_OFFSCREEN_CANVAS } from '../../has.js';\nimport { apply as applyTransform, compose as composeTransform, create as createTransform, setFromArray as transformSetFromArray } from '../../transform.js';\nimport { createEmpty, createOrUpdate, intersects } from '../../extent.js';\nimport { defaultPadding, defaultTextBaseline, drawImageOrLabel } from '../canvas.js';\nimport { defaultTextAlign, measureAndCacheTextWidth, measureTextHeight, measureTextWidths } from '../canvas.js';\nimport { drawTextOnPath } from '../../geom/flat/textpath.js';\nimport { equals } from '../../array.js';\nimport { lineStringLength } from '../../geom/flat/length.js';\nimport { transform2D } from '../../geom/flat/transform.js';\n/**\n * @typedef {Object} BBox\n * @property {number} minX Minimal x.\n * @property {number} minY Minimal y.\n * @property {number} maxX Maximal x.\n * @property {number} maxY Maximal y\n * @property {*} value Value.\n */\n\n/**\n * @typedef {Object} ImageOrLabelDimensions\n * @property {number} drawImageX DrawImageX.\n * @property {number} drawImageY DrawImageY.\n * @property {number} drawImageW DrawImageW.\n * @property {number} drawImageH DrawImageH.\n * @property {number} originX OriginX.\n * @property {number} originY OriginY.\n * @property {Array<number>} scale Scale.\n * @property {BBox} declutterBox DeclutterBox.\n * @property {import(\"../../transform.js\").Transform} canvasTransform CanvasTransform.\n */\n\n/**\n * @typedef {{0: CanvasRenderingContext2D, 1: number, 2: import(\"../canvas.js\").Label|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement, 3: ImageOrLabelDimensions, 4: number, 5: Array<*>, 6: Array<*>}} ReplayImageOrLabelArgs\n */\n\n/**\n * @template T\n * @typedef {function(import(\"../../Feature.js\").FeatureLike, import(\"../../geom/SimpleGeometry.js\").default): T} FeatureCallback\n */\n\n/**\n * @type {import(\"../../extent.js\").Extent}\n */\n\nvar tmpExtent = createEmpty();\n/** @type {import(\"../../coordinate.js\").Coordinate} */\n\nvar p1 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\n\nvar p2 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\n\nvar p3 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\n\nvar p4 = [];\n/**\n * @param {ReplayImageOrLabelArgs} replayImageOrLabelArgs Arguments to replayImageOrLabel\n * @return {BBox} Declutter bbox.\n */\n\nfunction getDeclutterBox(replayImageOrLabelArgs) {\n  return replayImageOrLabelArgs[3].declutterBox;\n}\n\nvar rtlRegEx = new RegExp(\n/* eslint-disable prettier/prettier */\n'[' + String.fromCharCode(0x00591) + '-' + String.fromCharCode(0x008ff) + String.fromCharCode(0x0fb1d) + '-' + String.fromCharCode(0x0fdff) + String.fromCharCode(0x0fe70) + '-' + String.fromCharCode(0x0fefc) + String.fromCharCode(0x10800) + '-' + String.fromCharCode(0x10fff) + String.fromCharCode(0x1e800) + '-' + String.fromCharCode(0x1efff) + ']'\n/* eslint-enable prettier/prettier */\n);\n/**\n * @param {string} text Text.\n * @param {string} align Alignment.\n * @return {number} Text alignment.\n */\n\nfunction horizontalTextAlign(text, align) {\n  if ((align === 'start' || align === 'end') && !rtlRegEx.test(text)) {\n    align = align === 'start' ? 'left' : 'right';\n  }\n\n  return TEXT_ALIGN[align];\n}\n\nvar Executor =\n/** @class */\nfunction () {\n  /**\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {import(\"../canvas.js\").SerializableInstructions} instructions The serializable instructions\n   */\n  function Executor(resolution, pixelRatio, overlaps, instructions) {\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.overlaps = overlaps;\n    /**\n     * @protected\n     * @type {number}\n     */\n\n    this.pixelRatio = pixelRatio;\n    /**\n     * @protected\n     * @const\n     * @type {number}\n     */\n\n    this.resolution = resolution;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this.alignFill_;\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n\n    this.instructions = instructions.instructions;\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n\n    this.coordinates = instructions.coordinates;\n    /**\n     * @private\n     * @type {!Object<number,import(\"../../coordinate.js\").Coordinate|Array<import(\"../../coordinate.js\").Coordinate>|Array<Array<import(\"../../coordinate.js\").Coordinate>>>}\n     */\n\n    this.coordinateCache_ = {};\n    /**\n     * @private\n     * @type {!import(\"../../transform.js\").Transform}\n     */\n\n    this.renderedTransform_ = createTransform();\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n\n    this.hitDetectionInstructions = instructions.hitDetectionInstructions;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    this.pixelCoordinates_ = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.viewRotation_ = 0;\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").FillState>}\n     */\n\n    this.fillStates = instructions.fillStates || {};\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n     */\n\n    this.strokeStates = instructions.strokeStates || {};\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").TextState>}\n     */\n\n    this.textStates = instructions.textStates || {};\n    /**\n     * @private\n     * @type {Object<string, Object<string, number>>}\n     */\n\n    this.widths_ = {};\n    /**\n     * @private\n     * @type {Object<string, import(\"../canvas.js\").Label>}\n     */\n\n    this.labels_ = {};\n  }\n  /**\n   * @param {string} text Text.\n   * @param {string} textKey Text style key.\n   * @param {string} fillKey Fill style key.\n   * @param {string} strokeKey Stroke style key.\n   * @return {import(\"../canvas.js\").Label} Label.\n   */\n\n\n  Executor.prototype.createLabel = function (text, textKey, fillKey, strokeKey) {\n    var key = text + textKey + fillKey + strokeKey;\n\n    if (this.labels_[key]) {\n      return this.labels_[key];\n    }\n\n    var strokeState = strokeKey ? this.strokeStates[strokeKey] : null;\n    var fillState = fillKey ? this.fillStates[fillKey] : null;\n    var textState = this.textStates[textKey];\n    var pixelRatio = this.pixelRatio;\n    var scale = [textState.scale[0] * pixelRatio, textState.scale[1] * pixelRatio];\n    var align = horizontalTextAlign(text, textState.textAlign || defaultTextAlign);\n    var strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n    var lines = text.split('\\n');\n    var numLines = lines.length;\n    var widths = [];\n    var width = measureTextWidths(textState.font, lines, widths);\n    var lineHeight = measureTextHeight(textState.font);\n    var height = lineHeight * numLines;\n    var renderWidth = width + strokeWidth;\n    var contextInstructions = []; // make canvas 2 pixels wider to account for italic text width measurement errors\n\n    var w = (renderWidth + 2) * scale[0];\n    var h = (height + strokeWidth) * scale[1];\n    /** @type {import(\"../canvas.js\").Label} */\n\n    var label = {\n      width: w < 0 ? Math.floor(w) : Math.ceil(w),\n      height: h < 0 ? Math.floor(h) : Math.ceil(h),\n      contextInstructions: contextInstructions\n    };\n\n    if (scale[0] != 1 || scale[1] != 1) {\n      contextInstructions.push('scale', scale);\n    }\n\n    contextInstructions.push('font', textState.font);\n\n    if (strokeKey) {\n      contextInstructions.push('strokeStyle', strokeState.strokeStyle);\n      contextInstructions.push('lineWidth', strokeWidth);\n      contextInstructions.push('lineCap', strokeState.lineCap);\n      contextInstructions.push('lineJoin', strokeState.lineJoin);\n      contextInstructions.push('miterLimit', strokeState.miterLimit); // eslint-disable-next-line\n\n      var Context = WORKER_OFFSCREEN_CANVAS ? OffscreenCanvasRenderingContext2D : CanvasRenderingContext2D;\n\n      if (Context.prototype.setLineDash) {\n        contextInstructions.push('setLineDash', [strokeState.lineDash]);\n        contextInstructions.push('lineDashOffset', strokeState.lineDashOffset);\n      }\n    }\n\n    if (fillKey) {\n      contextInstructions.push('fillStyle', fillState.fillStyle);\n    }\n\n    contextInstructions.push('textBaseline', 'middle');\n    contextInstructions.push('textAlign', 'center');\n    var leftRight = 0.5 - align;\n    var x = align * renderWidth + leftRight * strokeWidth;\n    var i;\n\n    if (strokeKey) {\n      for (i = 0; i < numLines; ++i) {\n        contextInstructions.push('strokeText', [lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight]);\n      }\n    }\n\n    if (fillKey) {\n      for (i = 0; i < numLines; ++i) {\n        contextInstructions.push('fillText', [lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight]);\n      }\n    }\n\n    this.labels_[key] = label;\n    return label;\n  };\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../coordinate.js\").Coordinate} p1 1st point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p2 2nd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p3 3rd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p4 4th point of the background box.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   */\n\n\n  Executor.prototype.replayTextBackground_ = function (context, p1, p2, p3, p4, fillInstruction, strokeInstruction) {\n    context.beginPath();\n    context.moveTo.apply(context, p1);\n    context.lineTo.apply(context, p2);\n    context.lineTo.apply(context, p3);\n    context.lineTo.apply(context, p4);\n    context.lineTo.apply(context, p1);\n\n    if (fillInstruction) {\n      this.alignFill_ =\n      /** @type {boolean} */\n      fillInstruction[2];\n      this.fill_(context);\n    }\n\n    if (strokeInstruction) {\n      this.setStrokeStyle_(context,\n      /** @type {Array<*>} */\n      strokeInstruction);\n      context.stroke();\n    }\n  };\n  /**\n   * @private\n   * @param {number} sheetWidth Width of the sprite sheet.\n   * @param {number} sheetHeight Height of the sprite sheet.\n   * @param {number} centerX X.\n   * @param {number} centerY Y.\n   * @param {number} width Width.\n   * @param {number} height Height.\n   * @param {number} anchorX Anchor X.\n   * @param {number} anchorY Anchor Y.\n   * @param {number} originX Origin X.\n   * @param {number} originY Origin Y.\n   * @param {number} rotation Rotation.\n   * @param {import(\"../../size.js\").Size} scale Scale.\n   * @param {boolean} snapToPixel Snap to pixel.\n   * @param {Array<number>} padding Padding.\n   * @param {boolean} fillStroke Background fill or stroke.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   * @return {ImageOrLabelDimensions} Dimensions for positioning and decluttering the image or label.\n   */\n\n\n  Executor.prototype.calculateImageOrLabelDimensions_ = function (sheetWidth, sheetHeight, centerX, centerY, width, height, anchorX, anchorY, originX, originY, rotation, scale, snapToPixel, padding, fillStroke, feature) {\n    anchorX *= scale[0];\n    anchorY *= scale[1];\n    var x = centerX - anchorX;\n    var y = centerY - anchorY;\n    var w = width + originX > sheetWidth ? sheetWidth - originX : width;\n    var h = height + originY > sheetHeight ? sheetHeight - originY : height;\n    var boxW = padding[3] + w * scale[0] + padding[1];\n    var boxH = padding[0] + h * scale[1] + padding[2];\n    var boxX = x - padding[3];\n    var boxY = y - padding[0];\n\n    if (fillStroke || rotation !== 0) {\n      p1[0] = boxX;\n      p4[0] = boxX;\n      p1[1] = boxY;\n      p2[1] = boxY;\n      p2[0] = boxX + boxW;\n      p3[0] = p2[0];\n      p3[1] = boxY + boxH;\n      p4[1] = p3[1];\n    }\n\n    var transform;\n\n    if (rotation !== 0) {\n      transform = composeTransform(createTransform(), centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n      applyTransform(transform, p1);\n      applyTransform(transform, p2);\n      applyTransform(transform, p3);\n      applyTransform(transform, p4);\n      createOrUpdate(Math.min(p1[0], p2[0], p3[0], p4[0]), Math.min(p1[1], p2[1], p3[1], p4[1]), Math.max(p1[0], p2[0], p3[0], p4[0]), Math.max(p1[1], p2[1], p3[1], p4[1]), tmpExtent);\n    } else {\n      createOrUpdate(Math.min(boxX, boxX + boxW), Math.min(boxY, boxY + boxH), Math.max(boxX, boxX + boxW), Math.max(boxY, boxY + boxH), tmpExtent);\n    }\n\n    if (snapToPixel) {\n      x = Math.round(x);\n      y = Math.round(y);\n    }\n\n    return {\n      drawImageX: x,\n      drawImageY: y,\n      drawImageW: w,\n      drawImageH: h,\n      originX: originX,\n      originY: originY,\n      declutterBox: {\n        minX: tmpExtent[0],\n        minY: tmpExtent[1],\n        maxX: tmpExtent[2],\n        maxY: tmpExtent[3],\n        value: feature\n      },\n      canvasTransform: transform,\n      scale: scale\n    };\n  };\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} contextScale Scale of the context.\n   * @param {import(\"../canvas.js\").Label|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} imageOrLabel Image.\n   * @param {ImageOrLabelDimensions} dimensions Dimensions.\n   * @param {number} opacity Opacity.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   * @return {boolean} The image or label was rendered.\n   */\n\n\n  Executor.prototype.replayImageOrLabel_ = function (context, contextScale, imageOrLabel, dimensions, opacity, fillInstruction, strokeInstruction) {\n    var fillStroke = !!(fillInstruction || strokeInstruction);\n    var box = dimensions.declutterBox;\n    var canvas = context.canvas;\n    var strokePadding = strokeInstruction ? strokeInstruction[2] * dimensions.scale[0] / 2 : 0;\n    var intersects = box.minX - strokePadding <= canvas.width / contextScale && box.maxX + strokePadding >= 0 && box.minY - strokePadding <= canvas.height / contextScale && box.maxY + strokePadding >= 0;\n\n    if (intersects) {\n      if (fillStroke) {\n        this.replayTextBackground_(context, p1, p2, p3, p4,\n        /** @type {Array<*>} */\n        fillInstruction,\n        /** @type {Array<*>} */\n        strokeInstruction);\n      }\n\n      drawImageOrLabel(context, dimensions.canvasTransform, opacity, imageOrLabel, dimensions.originX, dimensions.originY, dimensions.drawImageW, dimensions.drawImageH, dimensions.drawImageX, dimensions.drawImageY, dimensions.scale);\n    }\n\n    return true;\n  };\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   */\n\n\n  Executor.prototype.fill_ = function (context) {\n    if (this.alignFill_) {\n      var origin_1 = applyTransform(this.renderedTransform_, [0, 0]);\n      var repeatSize = 512 * this.pixelRatio;\n      context.save();\n      context.translate(origin_1[0] % repeatSize, origin_1[1] % repeatSize);\n      context.rotate(this.viewRotation_);\n    }\n\n    context.fill();\n\n    if (this.alignFill_) {\n      context.restore();\n    }\n  };\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {Array<*>} instruction Instruction.\n   */\n\n\n  Executor.prototype.setStrokeStyle_ = function (context, instruction) {\n    context['strokeStyle'] =\n    /** @type {import(\"../../colorlike.js\").ColorLike} */\n    instruction[1];\n    context.lineWidth =\n    /** @type {number} */\n    instruction[2];\n    context.lineCap =\n    /** @type {CanvasLineCap} */\n    instruction[3];\n    context.lineJoin =\n    /** @type {CanvasLineJoin} */\n    instruction[4];\n    context.miterLimit =\n    /** @type {number} */\n    instruction[5];\n\n    if (context.setLineDash) {\n      context.lineDashOffset =\n      /** @type {number} */\n      instruction[7];\n      context.setLineDash(\n      /** @type {Array<number>} */\n      instruction[6]);\n    }\n  };\n  /**\n   * @private\n   * @param {string} text The text to draw.\n   * @param {string} textKey The key of the text state.\n   * @param {string} strokeKey The key for the stroke state.\n   * @param {string} fillKey The key for the fill state.\n   * @return {{label: import(\"../canvas.js\").Label, anchorX: number, anchorY: number}} The text image and its anchor.\n   */\n\n\n  Executor.prototype.drawLabelWithPointPlacement_ = function (text, textKey, strokeKey, fillKey) {\n    var textState = this.textStates[textKey];\n    var label = this.createLabel(text, textKey, fillKey, strokeKey);\n    var strokeState = this.strokeStates[strokeKey];\n    var pixelRatio = this.pixelRatio;\n    var align = horizontalTextAlign(text, textState.textAlign || defaultTextAlign);\n    var baseline = TEXT_ALIGN[textState.textBaseline || defaultTextBaseline];\n    var strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0; // Remove the 2 pixels we added in createLabel() for the anchor\n\n    var width = label.width / pixelRatio - 2 * textState.scale[0];\n    var anchorX = align * width + 2 * (0.5 - align) * strokeWidth;\n    var anchorY = baseline * label.height / pixelRatio + 2 * (0.5 - baseline) * strokeWidth;\n    return {\n      label: label,\n      anchorX: anchorX,\n      anchorY: anchorY\n    };\n  };\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} contextScale Scale of the context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {Array<*>} instructions Instructions array.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   * @param {FeatureCallback<T>} [opt_featureCallback] Feature callback.\n   * @param {import(\"../../extent.js\").Extent} [opt_hitExtent] Only check\n   *     features that intersect this extent.\n   * @param {import(\"rbush\").default} [opt_declutterTree] Declutter tree.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n\n\n  Executor.prototype.execute_ = function (context, contextScale, transform, instructions, snapToPixel, opt_featureCallback, opt_hitExtent, opt_declutterTree) {\n    /** @type {Array<number>} */\n    var pixelCoordinates;\n\n    if (this.pixelCoordinates_ && equals(transform, this.renderedTransform_)) {\n      pixelCoordinates = this.pixelCoordinates_;\n    } else {\n      if (!this.pixelCoordinates_) {\n        this.pixelCoordinates_ = [];\n      }\n\n      pixelCoordinates = transform2D(this.coordinates, 0, this.coordinates.length, 2, transform, this.pixelCoordinates_);\n      transformSetFromArray(this.renderedTransform_, transform);\n    }\n\n    var i = 0; // instruction index\n\n    var ii = instructions.length; // end of instructions\n\n    var d = 0; // data index\n\n    var dd; // end of per-instruction data\n\n    var anchorX, anchorY, prevX, prevY, roundX, roundY, image, text, textKey, strokeKey, fillKey;\n    var pendingFill = 0;\n    var pendingStroke = 0;\n    var lastFillInstruction = null;\n    var lastStrokeInstruction = null;\n    var coordinateCache = this.coordinateCache_;\n    var viewRotation = this.viewRotation_;\n    var viewRotationFromTransform = Math.round(Math.atan2(-transform[1], transform[0]) * 1e12) / 1e12;\n    var state =\n    /** @type {import(\"../../render.js\").State} */\n    {\n      context: context,\n      pixelRatio: this.pixelRatio,\n      resolution: this.resolution,\n      rotation: viewRotation\n    }; // When the batch size gets too big, performance decreases. 200 is a good\n    // balance between batch size and number of fill/stroke instructions.\n\n    var batchSize = this.instructions != instructions || this.overlaps ? 0 : 200;\n    var\n    /** @type {import(\"../../Feature.js\").FeatureLike} */\n    feature;\n    var x, y, currentGeometry;\n\n    while (i < ii) {\n      var instruction = instructions[i];\n      var type =\n      /** @type {import(\"./Instruction.js\").default} */\n      instruction[0];\n\n      switch (type) {\n        case CanvasInstruction.BEGIN_GEOMETRY:\n          feature =\n          /** @type {import(\"../../Feature.js\").FeatureLike} */\n          instruction[1];\n          currentGeometry = instruction[3];\n\n          if (!feature.getGeometry()) {\n            i =\n            /** @type {number} */\n            instruction[2];\n          } else if (opt_hitExtent !== undefined && !intersects(opt_hitExtent, currentGeometry.getExtent())) {\n            i =\n            /** @type {number} */\n            instruction[2] + 1;\n          } else {\n            ++i;\n          }\n\n          break;\n\n        case CanvasInstruction.BEGIN_PATH:\n          if (pendingFill > batchSize) {\n            this.fill_(context);\n            pendingFill = 0;\n          }\n\n          if (pendingStroke > batchSize) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n\n          if (!pendingFill && !pendingStroke) {\n            context.beginPath();\n            prevX = NaN;\n            prevY = NaN;\n          }\n\n          ++i;\n          break;\n\n        case CanvasInstruction.CIRCLE:\n          d =\n          /** @type {number} */\n          instruction[1];\n          var x1 = pixelCoordinates[d];\n          var y1 = pixelCoordinates[d + 1];\n          var x2 = pixelCoordinates[d + 2];\n          var y2 = pixelCoordinates[d + 3];\n          var dx = x2 - x1;\n          var dy = y2 - y1;\n          var r = Math.sqrt(dx * dx + dy * dy);\n          context.moveTo(x1 + r, y1);\n          context.arc(x1, y1, r, 0, 2 * Math.PI, true);\n          ++i;\n          break;\n\n        case CanvasInstruction.CLOSE_PATH:\n          context.closePath();\n          ++i;\n          break;\n\n        case CanvasInstruction.CUSTOM:\n          d =\n          /** @type {number} */\n          instruction[1];\n          dd = instruction[2];\n          var geometry =\n          /** @type {import(\"../../geom/SimpleGeometry.js\").default} */\n          instruction[3];\n          var renderer = instruction[4];\n          var fn = instruction.length == 6 ? instruction[5] : undefined;\n          state.geometry = geometry;\n          state.feature = feature;\n\n          if (!(i in coordinateCache)) {\n            coordinateCache[i] = [];\n          }\n\n          var coords = coordinateCache[i];\n\n          if (fn) {\n            fn(pixelCoordinates, d, dd, 2, coords);\n          } else {\n            coords[0] = pixelCoordinates[d];\n            coords[1] = pixelCoordinates[d + 1];\n            coords.length = 2;\n          }\n\n          renderer(coords, state);\n          ++i;\n          break;\n\n        case CanvasInstruction.DRAW_IMAGE:\n          d =\n          /** @type {number} */\n          instruction[1];\n          dd =\n          /** @type {number} */\n          instruction[2];\n          image =\n          /** @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} */\n          instruction[3]; // Remaining arguments in DRAW_IMAGE are in alphabetical order\n\n          anchorX =\n          /** @type {number} */\n          instruction[4];\n          anchorY =\n          /** @type {number} */\n          instruction[5];\n          var height =\n          /** @type {number} */\n          instruction[6];\n          var opacity =\n          /** @type {number} */\n          instruction[7];\n          var originX =\n          /** @type {number} */\n          instruction[8];\n          var originY =\n          /** @type {number} */\n          instruction[9];\n          var rotateWithView =\n          /** @type {boolean} */\n          instruction[10];\n          var rotation =\n          /** @type {number} */\n          instruction[11];\n          var scale =\n          /** @type {import(\"../../size.js\").Size} */\n          instruction[12];\n          var width =\n          /** @type {number} */\n          instruction[13];\n          var declutterImageWithText =\n          /** @type {import(\"../canvas.js\").DeclutterImageWithText} */\n          instruction[14];\n\n          if (!image && instruction.length >= 19) {\n            // create label images\n            text =\n            /** @type {string} */\n            instruction[18];\n            textKey =\n            /** @type {string} */\n            instruction[19];\n            strokeKey =\n            /** @type {string} */\n            instruction[20];\n            fillKey =\n            /** @type {string} */\n            instruction[21];\n            var labelWithAnchor = this.drawLabelWithPointPlacement_(text, textKey, strokeKey, fillKey);\n            image = labelWithAnchor.label;\n            instruction[3] = image;\n            var textOffsetX =\n            /** @type {number} */\n            instruction[22];\n            anchorX = (labelWithAnchor.anchorX - textOffsetX) * this.pixelRatio;\n            instruction[4] = anchorX;\n            var textOffsetY =\n            /** @type {number} */\n            instruction[23];\n            anchorY = (labelWithAnchor.anchorY - textOffsetY) * this.pixelRatio;\n            instruction[5] = anchorY;\n            height = image.height;\n            instruction[6] = height;\n            width = image.width;\n            instruction[13] = width;\n          }\n\n          var geometryWidths = void 0;\n\n          if (instruction.length > 24) {\n            geometryWidths =\n            /** @type {number} */\n            instruction[24];\n          }\n\n          var padding = void 0,\n              backgroundFill = void 0,\n              backgroundStroke = void 0;\n\n          if (instruction.length > 16) {\n            padding =\n            /** @type {Array<number>} */\n            instruction[15];\n            backgroundFill =\n            /** @type {boolean} */\n            instruction[16];\n            backgroundStroke =\n            /** @type {boolean} */\n            instruction[17];\n          } else {\n            padding = defaultPadding;\n            backgroundFill = false;\n            backgroundStroke = false;\n          }\n\n          if (rotateWithView && viewRotationFromTransform) {\n            // Canvas is expected to be rotated to reverse view rotation.\n            rotation += viewRotation;\n          } else if (!rotateWithView && !viewRotationFromTransform) {\n            // Canvas is not rotated, images need to be rotated back to be north-up.\n            rotation -= viewRotation;\n          }\n\n          var widthIndex = 0;\n\n          for (; d < dd; d += 2) {\n            if (geometryWidths && geometryWidths[widthIndex++] < width / this.pixelRatio) {\n              continue;\n            }\n\n            var dimensions = this.calculateImageOrLabelDimensions_(image.width, image.height, pixelCoordinates[d], pixelCoordinates[d + 1], width, height, anchorX, anchorY, originX, originY, rotation, scale, snapToPixel, padding, backgroundFill || backgroundStroke, feature);\n            /** @type {ReplayImageOrLabelArgs} */\n\n            var args = [context, contextScale, image, dimensions, opacity, backgroundFill ?\n            /** @type {Array<*>} */\n            lastFillInstruction : null, backgroundStroke ?\n            /** @type {Array<*>} */\n            lastStrokeInstruction : null];\n            var imageArgs = void 0;\n            var imageDeclutterBox = void 0;\n\n            if (opt_declutterTree && declutterImageWithText) {\n              var index = dd - d;\n\n              if (!declutterImageWithText[index]) {\n                // We now have the image for an image+text combination.\n                declutterImageWithText[index] = args; // Don't render anything for now, wait for the text.\n\n                continue;\n              }\n\n              imageArgs = declutterImageWithText[index];\n              delete declutterImageWithText[index];\n              imageDeclutterBox = getDeclutterBox(imageArgs);\n\n              if (opt_declutterTree.collides(imageDeclutterBox)) {\n                continue;\n              }\n            }\n\n            if (opt_declutterTree && opt_declutterTree.collides(dimensions.declutterBox)) {\n              continue;\n            }\n\n            if (imageArgs) {\n              // We now have image and text for an image+text combination.\n              if (opt_declutterTree) {\n                opt_declutterTree.insert(imageDeclutterBox);\n              } // Render the image before we render the text.\n\n\n              this.replayImageOrLabel_.apply(this, imageArgs);\n            }\n\n            if (opt_declutterTree) {\n              opt_declutterTree.insert(dimensions.declutterBox);\n            }\n\n            this.replayImageOrLabel_.apply(this, args);\n          }\n\n          ++i;\n          break;\n\n        case CanvasInstruction.DRAW_CHARS:\n          var begin =\n          /** @type {number} */\n          instruction[1];\n          var end =\n          /** @type {number} */\n          instruction[2];\n          var baseline =\n          /** @type {number} */\n          instruction[3];\n          var overflow =\n          /** @type {number} */\n          instruction[4];\n          fillKey =\n          /** @type {string} */\n          instruction[5];\n          var maxAngle =\n          /** @type {number} */\n          instruction[6];\n          var measurePixelRatio =\n          /** @type {number} */\n          instruction[7];\n          var offsetY =\n          /** @type {number} */\n          instruction[8];\n          strokeKey =\n          /** @type {string} */\n          instruction[9];\n          var strokeWidth =\n          /** @type {number} */\n          instruction[10];\n          text =\n          /** @type {string} */\n          instruction[11];\n          textKey =\n          /** @type {string} */\n          instruction[12];\n          var pixelRatioScale = [\n          /** @type {number} */\n          instruction[13],\n          /** @type {number} */\n          instruction[13]];\n          var textState = this.textStates[textKey];\n          var font = textState.font;\n          var textScale = [textState.scale[0] * measurePixelRatio, textState.scale[1] * measurePixelRatio];\n          var cachedWidths = void 0;\n\n          if (font in this.widths_) {\n            cachedWidths = this.widths_[font];\n          } else {\n            cachedWidths = {};\n            this.widths_[font] = cachedWidths;\n          }\n\n          var pathLength = lineStringLength(pixelCoordinates, begin, end, 2);\n          var textLength = Math.abs(textScale[0]) * measureAndCacheTextWidth(font, text, cachedWidths);\n\n          if (overflow || textLength <= pathLength) {\n            var textAlign = this.textStates[textKey].textAlign;\n            var startM = (pathLength - textLength) * TEXT_ALIGN[textAlign];\n            var parts = drawTextOnPath(pixelCoordinates, begin, end, 2, text, startM, maxAngle, Math.abs(textScale[0]), measureAndCacheTextWidth, font, cachedWidths, viewRotationFromTransform ? 0 : this.viewRotation_);\n\n            drawChars: if (parts) {\n              /** @type {Array<ReplayImageOrLabelArgs>} */\n              var replayImageOrLabelArgs = [];\n              var c = void 0,\n                  cc = void 0,\n                  chars = void 0,\n                  label = void 0,\n                  part = void 0;\n\n              if (strokeKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n\n                  chars =\n                  /** @type {string} */\n                  part[4];\n                  label = this.createLabel(chars, textKey, '', strokeKey);\n                  anchorX =\n                  /** @type {number} */\n                  part[2] + (textScale[0] < 0 ? -strokeWidth : strokeWidth);\n                  anchorY = baseline * label.height + (0.5 - baseline) * 2 * strokeWidth * textScale[1] / textScale[0] - offsetY;\n                  var dimensions = this.calculateImageOrLabelDimensions_(label.width, label.height, part[0], part[1], label.width, label.height, anchorX, anchorY, 0, 0, part[3], pixelRatioScale, false, defaultPadding, false, feature);\n\n                  if (opt_declutterTree && opt_declutterTree.collides(dimensions.declutterBox)) {\n                    break drawChars;\n                  }\n\n                  replayImageOrLabelArgs.push([context, contextScale, label, dimensions, 1, null, null]);\n                }\n              }\n\n              if (fillKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n\n                  chars =\n                  /** @type {string} */\n                  part[4];\n                  label = this.createLabel(chars, textKey, fillKey, '');\n                  anchorX =\n                  /** @type {number} */\n                  part[2];\n                  anchorY = baseline * label.height - offsetY;\n                  var dimensions = this.calculateImageOrLabelDimensions_(label.width, label.height, part[0], part[1], label.width, label.height, anchorX, anchorY, 0, 0, part[3], pixelRatioScale, false, defaultPadding, false, feature);\n\n                  if (opt_declutterTree && opt_declutterTree.collides(dimensions.declutterBox)) {\n                    break drawChars;\n                  }\n\n                  replayImageOrLabelArgs.push([context, contextScale, label, dimensions, 1, null, null]);\n                }\n              }\n\n              if (opt_declutterTree) {\n                opt_declutterTree.load(replayImageOrLabelArgs.map(getDeclutterBox));\n              }\n\n              for (var i_1 = 0, ii_1 = replayImageOrLabelArgs.length; i_1 < ii_1; ++i_1) {\n                this.replayImageOrLabel_.apply(this, replayImageOrLabelArgs[i_1]);\n              }\n            }\n          }\n\n          ++i;\n          break;\n\n        case CanvasInstruction.END_GEOMETRY:\n          if (opt_featureCallback !== undefined) {\n            feature =\n            /** @type {import(\"../../Feature.js\").FeatureLike} */\n            instruction[1];\n            var result = opt_featureCallback(feature, currentGeometry);\n\n            if (result) {\n              return result;\n            }\n          }\n\n          ++i;\n          break;\n\n        case CanvasInstruction.FILL:\n          if (batchSize) {\n            pendingFill++;\n          } else {\n            this.fill_(context);\n          }\n\n          ++i;\n          break;\n\n        case CanvasInstruction.MOVE_TO_LINE_TO:\n          d =\n          /** @type {number} */\n          instruction[1];\n          dd =\n          /** @type {number} */\n          instruction[2];\n          x = pixelCoordinates[d];\n          y = pixelCoordinates[d + 1];\n          roundX = x + 0.5 | 0;\n          roundY = y + 0.5 | 0;\n\n          if (roundX !== prevX || roundY !== prevY) {\n            context.moveTo(x, y);\n            prevX = roundX;\n            prevY = roundY;\n          }\n\n          for (d += 2; d < dd; d += 2) {\n            x = pixelCoordinates[d];\n            y = pixelCoordinates[d + 1];\n            roundX = x + 0.5 | 0;\n            roundY = y + 0.5 | 0;\n\n            if (d == dd - 2 || roundX !== prevX || roundY !== prevY) {\n              context.lineTo(x, y);\n              prevX = roundX;\n              prevY = roundY;\n            }\n          }\n\n          ++i;\n          break;\n\n        case CanvasInstruction.SET_FILL_STYLE:\n          lastFillInstruction = instruction;\n          this.alignFill_ = instruction[2];\n\n          if (pendingFill) {\n            this.fill_(context);\n            pendingFill = 0;\n\n            if (pendingStroke) {\n              context.stroke();\n              pendingStroke = 0;\n            }\n          }\n\n          context.fillStyle =\n          /** @type {import(\"../../colorlike.js\").ColorLike} */\n          instruction[1];\n          ++i;\n          break;\n\n        case CanvasInstruction.SET_STROKE_STYLE:\n          lastStrokeInstruction = instruction;\n\n          if (pendingStroke) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n\n          this.setStrokeStyle_(context,\n          /** @type {Array<*>} */\n          instruction);\n          ++i;\n          break;\n\n        case CanvasInstruction.STROKE:\n          if (batchSize) {\n            pendingStroke++;\n          } else {\n            context.stroke();\n          }\n\n          ++i;\n          break;\n\n        default:\n          ++i; // consume the instruction anyway, to avoid an infinite loop\n\n          break;\n      }\n    }\n\n    if (pendingFill) {\n      this.fill_(context);\n    }\n\n    if (pendingStroke) {\n      context.stroke();\n    }\n\n    return undefined;\n  };\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} contextScale Scale of the context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   * @param {import(\"rbush\").default} [opt_declutterTree] Declutter tree.\n   */\n\n\n  Executor.prototype.execute = function (context, contextScale, transform, viewRotation, snapToPixel, opt_declutterTree) {\n    this.viewRotation_ = viewRotation;\n    this.execute_(context, contextScale, transform, this.instructions, snapToPixel, undefined, undefined, opt_declutterTree);\n  };\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {FeatureCallback<T>} [opt_featureCallback] Feature callback.\n   * @param {import(\"../../extent.js\").Extent} [opt_hitExtent] Only check\n   *     features that intersect this extent.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n\n\n  Executor.prototype.executeHitDetection = function (context, transform, viewRotation, opt_featureCallback, opt_hitExtent) {\n    this.viewRotation_ = viewRotation;\n    return this.execute_(context, 1, transform, this.hitDetectionInstructions, true, opt_featureCallback, opt_hitExtent);\n  };\n\n  return Executor;\n}();\n\nexport default Executor;","/**\n * @module ol/render/canvas/ExecutorGroup\n */\nimport BuilderType from './BuilderType.js';\nimport Executor from './Executor.js';\nimport { buffer, createEmpty, extendCoordinate } from '../../extent.js';\nimport { compose as composeTransform, create as createTransform } from '../../transform.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport { isEmpty } from '../../obj.js';\nimport { numberSafeCompareFunction } from '../../array.js';\nimport { transform2D } from '../../geom/flat/transform.js';\n/**\n * @const\n * @type {Array<import(\"./BuilderType.js\").default>}\n */\n\nvar ORDER = [BuilderType.POLYGON, BuilderType.CIRCLE, BuilderType.LINE_STRING, BuilderType.IMAGE, BuilderType.TEXT, BuilderType.DEFAULT];\n\nvar ExecutorGroup =\n/** @class */\nfunction () {\n  /**\n   * @param {import(\"../../extent.js\").Extent} maxExtent Max extent for clipping. When a\n   * `maxExtent` was set on the Builder for this executor group, the same `maxExtent`\n   * should be set here, unless the target context does not exceed that extent (which\n   * can be the case when rendering to tiles).\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The executor group can have overlapping geometries.\n   * @param {!Object<string, !Object<import(\"./BuilderType.js\").default, import(\"../canvas.js\").SerializableInstructions>>} allInstructions\n   * The serializable instructions.\n   * @param {number} [opt_renderBuffer] Optional rendering buffer.\n   */\n  function ExecutorGroup(maxExtent, resolution, pixelRatio, overlaps, allInstructions, opt_renderBuffer) {\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent_ = maxExtent;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this.overlaps_ = overlaps;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.pixelRatio_ = pixelRatio;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.resolution_ = resolution;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    this.renderBuffer_ = opt_renderBuffer;\n    /**\n     * @private\n     * @type {!Object<string, !Object<import(\"./BuilderType.js\").default, import(\"./Executor\").default>>}\n     */\n\n    this.executorsByZIndex_ = {};\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n\n    this.hitDetectionContext_ = null;\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n\n    this.hitDetectionTransform_ = createTransform();\n    this.createExecutors_(allInstructions);\n  }\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   */\n\n\n  ExecutorGroup.prototype.clip = function (context, transform) {\n    var flatClipCoords = this.getClipCoords(transform);\n    context.beginPath();\n    context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n    context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n    context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n    context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n    context.clip();\n  };\n  /**\n   * Create executors and populate them using the provided instructions.\n   * @private\n   * @param {!Object<string, !Object<import(\"./BuilderType.js\").default, import(\"../canvas.js\").SerializableInstructions>>} allInstructions The serializable instructions\n   */\n\n\n  ExecutorGroup.prototype.createExecutors_ = function (allInstructions) {\n    for (var zIndex in allInstructions) {\n      var executors = this.executorsByZIndex_[zIndex];\n\n      if (executors === undefined) {\n        executors = {};\n        this.executorsByZIndex_[zIndex] = executors;\n      }\n\n      var instructionByZindex = allInstructions[zIndex];\n\n      for (var builderType in instructionByZindex) {\n        var instructions = instructionByZindex[builderType];\n        executors[builderType] = new Executor(this.resolution_, this.pixelRatio_, this.overlaps_, instructions);\n      }\n    }\n  };\n  /**\n   * @param {Array<import(\"./BuilderType.js\").default>} executors Executors.\n   * @return {boolean} Has executors of the provided types.\n   */\n\n\n  ExecutorGroup.prototype.hasExecutors = function (executors) {\n    for (var zIndex in this.executorsByZIndex_) {\n      var candidates = this.executorsByZIndex_[zIndex];\n\n      for (var i = 0, ii = executors.length; i < ii; ++i) {\n        if (executors[i] in candidates) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {number} rotation Rotation.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(import(\"../../Feature.js\").FeatureLike, import(\"../../geom/SimpleGeometry.js\").default, number): T} callback Feature callback.\n   * @param {Array<import(\"../../Feature.js\").FeatureLike>} declutteredFeatures Decluttered features.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n\n\n  ExecutorGroup.prototype.forEachFeatureAtCoordinate = function (coordinate, resolution, rotation, hitTolerance, callback, declutteredFeatures) {\n    hitTolerance = Math.round(hitTolerance);\n    var contextSize = hitTolerance * 2 + 1;\n    var transform = composeTransform(this.hitDetectionTransform_, hitTolerance + 0.5, hitTolerance + 0.5, 1 / resolution, -1 / resolution, -rotation, -coordinate[0], -coordinate[1]);\n    var newContext = !this.hitDetectionContext_;\n\n    if (newContext) {\n      this.hitDetectionContext_ = createCanvasContext2D(contextSize, contextSize);\n    }\n\n    var context = this.hitDetectionContext_;\n\n    if (context.canvas.width !== contextSize || context.canvas.height !== contextSize) {\n      context.canvas.width = contextSize;\n      context.canvas.height = contextSize;\n    } else if (!newContext) {\n      context.clearRect(0, 0, contextSize, contextSize);\n    }\n    /**\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n\n    var hitExtent;\n\n    if (this.renderBuffer_ !== undefined) {\n      hitExtent = createEmpty();\n      extendCoordinate(hitExtent, coordinate);\n      buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);\n    }\n\n    var indexes = getPixelIndexArray(hitTolerance);\n    var builderType;\n    /**\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     * @param {import(\"../../geom/SimpleGeometry.js\").default} geometry Geometry.\n     * @return {T|undefined} Callback result.\n     */\n\n    function featureCallback(feature, geometry) {\n      var imageData = context.getImageData(0, 0, contextSize, contextSize).data;\n\n      for (var i_1 = 0, ii = indexes.length; i_1 < ii; i_1++) {\n        if (imageData[indexes[i_1]] > 0) {\n          if (!declutteredFeatures || builderType !== BuilderType.IMAGE && builderType !== BuilderType.TEXT || declutteredFeatures.indexOf(feature) !== -1) {\n            var idx = (indexes[i_1] - 3) / 4;\n            var x = hitTolerance - idx % contextSize;\n            var y = hitTolerance - (idx / contextSize | 0);\n            var result_1 = callback(feature, geometry, x * x + y * y);\n\n            if (result_1) {\n              return result_1;\n            }\n          }\n\n          context.clearRect(0, 0, contextSize, contextSize);\n          break;\n        }\n      }\n\n      return undefined;\n    }\n    /** @type {Array<number>} */\n\n\n    var zs = Object.keys(this.executorsByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction);\n    var i, j, executors, executor, result;\n\n    for (i = zs.length - 1; i >= 0; --i) {\n      var zIndexKey = zs[i].toString();\n      executors = this.executorsByZIndex_[zIndexKey];\n\n      for (j = ORDER.length - 1; j >= 0; --j) {\n        builderType = ORDER[j];\n        executor = executors[builderType];\n\n        if (executor !== undefined) {\n          result = executor.executeHitDetection(context, transform, rotation, featureCallback, hitExtent);\n\n          if (result) {\n            return result;\n          }\n        }\n      }\n    }\n\n    return undefined;\n  };\n  /**\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @return {Array<number>} Clip coordinates.\n   */\n\n\n  ExecutorGroup.prototype.getClipCoords = function (transform) {\n    var maxExtent = this.maxExtent_;\n\n    if (!maxExtent) {\n      return null;\n    }\n\n    var minX = maxExtent[0];\n    var minY = maxExtent[1];\n    var maxX = maxExtent[2];\n    var maxY = maxExtent[3];\n    var flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n    transform2D(flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n    return flatClipCoords;\n  };\n  /**\n   * @return {boolean} Is empty.\n   */\n\n\n  ExecutorGroup.prototype.isEmpty = function () {\n    return isEmpty(this.executorsByZIndex_);\n  };\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} contextScale Scale of the context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {boolean} snapToPixel Snap point symbols and test to integer pixel.\n   * @param {Array<import(\"./BuilderType.js\").default>} [opt_builderTypes] Ordered replay types to replay.\n   *     Default is {@link module:ol/render/replay~ORDER}\n   * @param {import(\"rbush\").default} [opt_declutterTree] Declutter tree.\n   */\n\n\n  ExecutorGroup.prototype.execute = function (context, contextScale, transform, viewRotation, snapToPixel, opt_builderTypes, opt_declutterTree) {\n    /** @type {Array<number>} */\n    var zs = Object.keys(this.executorsByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction); // setup clipping so that the parts of over-simplified geometries are not\n    // visible outside the current extent when panning\n\n    if (this.maxExtent_) {\n      context.save();\n      this.clip(context, transform);\n    }\n\n    var builderTypes = opt_builderTypes ? opt_builderTypes : ORDER;\n    var i, ii, j, jj, replays, replay;\n\n    if (opt_declutterTree) {\n      zs.reverse();\n    }\n\n    for (i = 0, ii = zs.length; i < ii; ++i) {\n      var zIndexKey = zs[i].toString();\n      replays = this.executorsByZIndex_[zIndexKey];\n\n      for (j = 0, jj = builderTypes.length; j < jj; ++j) {\n        var builderType = builderTypes[j];\n        replay = replays[builderType];\n\n        if (replay !== undefined) {\n          replay.execute(context, contextScale, transform, viewRotation, snapToPixel, opt_declutterTree);\n        }\n      }\n    }\n\n    if (this.maxExtent_) {\n      context.restore();\n    }\n  };\n\n  return ExecutorGroup;\n}();\n/**\n * This cache is used to store arrays of indexes for calculated pixel circles\n * to increase performance.\n * It is a static property to allow each Replaygroup to access it.\n * @type {Object<number, Array<number>>}\n */\n\n\nvar circlePixelIndexArrayCache = {};\n/**\n * This methods creates an array with indexes of all pixels within a circle,\n * ordered by how close they are to the center.\n * A cache is used to increase performance.\n * @param {number} radius Radius.\n * @return {Array<number>} An array with indexes within a circle.\n */\n\nexport function getPixelIndexArray(radius) {\n  if (circlePixelIndexArrayCache[radius] !== undefined) {\n    return circlePixelIndexArrayCache[radius];\n  }\n\n  var size = radius * 2 + 1;\n  var maxDistanceSq = radius * radius;\n  var distances = new Array(maxDistanceSq + 1);\n\n  for (var i = 0; i <= radius; ++i) {\n    for (var j = 0; j <= radius; ++j) {\n      var distanceSq = i * i + j * j;\n\n      if (distanceSq > maxDistanceSq) {\n        break;\n      }\n\n      var distance = distances[distanceSq];\n\n      if (!distance) {\n        distance = [];\n        distances[distanceSq] = distance;\n      }\n\n      distance.push(((radius + i) * size + (radius + j)) * 4 + 3);\n\n      if (i > 0) {\n        distance.push(((radius - i) * size + (radius + j)) * 4 + 3);\n      }\n\n      if (j > 0) {\n        distance.push(((radius + i) * size + (radius - j)) * 4 + 3);\n\n        if (i > 0) {\n          distance.push(((radius - i) * size + (radius - j)) * 4 + 3);\n        }\n      }\n    }\n  }\n\n  var pixelIndex = [];\n\n  for (var i = 0, ii = distances.length; i < ii; ++i) {\n    if (distances[i]) {\n      pixelIndex.push.apply(pixelIndex, distances[i]);\n    }\n  }\n\n  circlePixelIndexArrayCache[radius] = pixelIndex;\n  return pixelIndex;\n}\nexport default ExecutorGroup;","/**\n * @module ol/render/canvas/Immediate\n */\n// FIXME test, especially polygons with holes and multipolygons\n// FIXME need to handle large thick features (where pixel size matters)\n// FIXME add offset and end to ol/geom/flat/transform~transform2D?\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport GeometryType from '../../geom/GeometryType.js';\nimport VectorContext from '../VectorContext.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { compose as composeTransform, create as createTransform } from '../../transform.js';\nimport { defaultFillStyle, defaultFont, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextAlign, defaultTextBaseline } from '../canvas.js';\nimport { equals } from '../../array.js';\nimport { intersects } from '../../extent.js';\nimport { transform2D } from '../../geom/flat/transform.js';\nimport { transformGeom2D } from '../../geom/SimpleGeometry.js';\n/**\n * @classdesc\n * A concrete subclass of {@link module:ol/render/VectorContext VectorContext} that implements\n * direct rendering of features and geometries to an HTML5 Canvas context.\n * Instances of this class are created internally by the library and\n * provided to application code as vectorContext member of the\n * {@link module:ol/render/Event~RenderEvent RenderEvent} object associated with postcompose, precompose and\n * render events emitted by layers and maps.\n */\n\nvar CanvasImmediateRenderer =\n/** @class */\nfunction (_super) {\n  __extends(CanvasImmediateRenderer, _super);\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../extent.js\").Extent} extent Extent.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {number} [opt_squaredTolerance] Optional squared tolerance for simplification.\n   * @param {import(\"../../proj.js\").TransformFunction} [opt_userTransform] Transform from user to view projection.\n   */\n\n\n  function CanvasImmediateRenderer(context, pixelRatio, extent, transform, viewRotation, opt_squaredTolerance, opt_userTransform) {\n    var _this = _super.call(this) || this;\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n\n\n    _this.context_ = context;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.pixelRatio_ = pixelRatio;\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n    _this.extent_ = extent;\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n\n    _this.transform_ = transform;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.viewRotation_ = viewRotation;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.squaredTolerance_ = opt_squaredTolerance;\n    /**\n     * @private\n     * @type {import(\"../../proj.js\").TransformFunction}\n     */\n\n    _this.userTransform_ = opt_userTransform;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n\n    _this.contextFillState_ = null;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n\n    _this.contextStrokeState_ = null;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n\n    _this.contextTextState_ = null;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n\n    _this.fillState_ = null;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n\n    _this.strokeState_ = null;\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n\n    _this.image_ = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageAnchorX_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageAnchorY_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageHeight_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageOpacity_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageOriginX_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageOriginY_ = 0;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.imageRotateWithView_ = false;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageRotation_ = 0;\n    /**\n     * @private\n     * @type {import(\"../../size.js\").Size}\n     */\n\n    _this.imageScale_ = [0, 0];\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageWidth_ = 0;\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.text_ = '';\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.textOffsetX_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.textOffsetY_ = 0;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.textRotateWithView_ = false;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.textRotation_ = 0;\n    /**\n     * @private\n     * @type {import(\"../../size.js\").Size}\n     */\n\n    _this.textScale_ = [0, 0];\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n\n    _this.textFillState_ = null;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n\n    _this.textStrokeState_ = null;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n\n    _this.textState_ = null;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.pixelCoordinates_ = [];\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n\n    _this.tmpLocalTransform_ = createTransform();\n    return _this;\n  }\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawImages_ = function (flatCoordinates, offset, end, stride) {\n    if (!this.image_) {\n      return;\n    }\n\n    var pixelCoordinates = transform2D(flatCoordinates, offset, end, stride, this.transform_, this.pixelCoordinates_);\n    var context = this.context_;\n    var localTransform = this.tmpLocalTransform_;\n    var alpha = context.globalAlpha;\n\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha * this.imageOpacity_;\n    }\n\n    var rotation = this.imageRotation_;\n\n    if (this.imageRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n\n    for (var i = 0, ii = pixelCoordinates.length; i < ii; i += 2) {\n      var x = pixelCoordinates[i] - this.imageAnchorX_;\n      var y = pixelCoordinates[i + 1] - this.imageAnchorY_;\n\n      if (rotation !== 0 || this.imageScale_[0] != 1 || this.imageScale_[1] != 1) {\n        var centerX = x + this.imageAnchorX_;\n        var centerY = y + this.imageAnchorY_;\n        composeTransform(localTransform, centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n        context.setTransform.apply(context, localTransform);\n        context.translate(centerX, centerY);\n        context.scale(this.imageScale_[0], this.imageScale_[1]);\n        context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_, this.imageWidth_, this.imageHeight_, -this.imageAnchorX_, -this.imageAnchorY_, this.imageWidth_, this.imageHeight_);\n        context.setTransform(1, 0, 0, 1, 0, 0);\n      } else {\n        context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_, this.imageWidth_, this.imageHeight_, x, y, this.imageWidth_, this.imageHeight_);\n      }\n    }\n\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha;\n    }\n  };\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawText_ = function (flatCoordinates, offset, end, stride) {\n    if (!this.textState_ || this.text_ === '') {\n      return;\n    }\n\n    if (this.textFillState_) {\n      this.setContextFillState_(this.textFillState_);\n    }\n\n    if (this.textStrokeState_) {\n      this.setContextStrokeState_(this.textStrokeState_);\n    }\n\n    this.setContextTextState_(this.textState_);\n    var pixelCoordinates = transform2D(flatCoordinates, offset, end, stride, this.transform_, this.pixelCoordinates_);\n    var context = this.context_;\n    var rotation = this.textRotation_;\n\n    if (this.textRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n\n    for (; offset < end; offset += stride) {\n      var x = pixelCoordinates[offset] + this.textOffsetX_;\n      var y = pixelCoordinates[offset + 1] + this.textOffsetY_;\n\n      if (rotation !== 0 || this.textScale_[0] != 1 || this.textScale_[1] != 1) {\n        var localTransform = composeTransform(this.tmpLocalTransform_, x, y, 1, 1, rotation, -x, -y);\n        context.setTransform.apply(context, localTransform);\n        context.translate(x, y);\n        context.scale(this.textScale_[0], this.textScale_[1]);\n\n        if (this.textStrokeState_) {\n          context.strokeText(this.text_, 0, 0);\n        }\n\n        if (this.textFillState_) {\n          context.fillText(this.text_, 0, 0);\n        }\n\n        context.setTransform(1, 0, 0, 1, 0, 0);\n      } else {\n        if (this.textStrokeState_) {\n          context.strokeText(this.text_, x, y);\n        }\n\n        if (this.textFillState_) {\n          context.fillText(this.text_, x, y);\n        }\n      }\n    }\n  };\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} close Close.\n   * @private\n   * @return {number} end End.\n   */\n\n\n  CanvasImmediateRenderer.prototype.moveToLineTo_ = function (flatCoordinates, offset, end, stride, close) {\n    var context = this.context_;\n    var pixelCoordinates = transform2D(flatCoordinates, offset, end, stride, this.transform_, this.pixelCoordinates_);\n    context.moveTo(pixelCoordinates[0], pixelCoordinates[1]);\n    var length = pixelCoordinates.length;\n\n    if (close) {\n      length -= 2;\n    }\n\n    for (var i = 2; i < length; i += 2) {\n      context.lineTo(pixelCoordinates[i], pixelCoordinates[i + 1]);\n    }\n\n    if (close) {\n      context.closePath();\n    }\n\n    return end;\n  };\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawRings_ = function (flatCoordinates, offset, ends, stride) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, true);\n    }\n\n    return offset;\n  };\n  /**\n   * Render a circle geometry into the canvas.  Rendering is immediate and uses\n   * the current fill and stroke styles.\n   *\n   * @param {import(\"../../geom/Circle.js\").default} geometry Circle geometry.\n   * @api\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawCircle = function (geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n\n    if (this.fillState_ || this.strokeState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n\n      var pixelCoordinates = transformGeom2D(geometry, this.transform_, this.pixelCoordinates_);\n      var dx = pixelCoordinates[2] - pixelCoordinates[0];\n      var dy = pixelCoordinates[3] - pixelCoordinates[1];\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      var context = this.context_;\n      context.beginPath();\n      context.arc(pixelCoordinates[0], pixelCoordinates[1], radius, 0, 2 * Math.PI);\n\n      if (this.fillState_) {\n        context.fill();\n      }\n\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n\n    if (this.text_ !== '') {\n      this.drawText_(geometry.getCenter(), 0, 2, 2);\n    }\n  };\n  /**\n   * Set the rendering style.  Note that since this is an immediate rendering API,\n   * any `zIndex` on the provided style will be ignored.\n   *\n   * @param {import(\"../../style/Style.js\").default} style The rendering style.\n   * @api\n   */\n\n\n  CanvasImmediateRenderer.prototype.setStyle = function (style) {\n    this.setFillStrokeStyle(style.getFill(), style.getStroke());\n    this.setImageStyle(style.getImage());\n    this.setTextStyle(style.getText());\n  };\n  /**\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   */\n\n\n  CanvasImmediateRenderer.prototype.setTransform = function (transform) {\n    this.transform_ = transform;\n  };\n  /**\n   * Render a geometry into the canvas.  Call\n   * {@link module:ol/render/canvas/Immediate~CanvasImmediateRenderer#setStyle renderer.setStyle()} first to set the rendering style.\n   *\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry The geometry to render.\n   * @api\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawGeometry = function (geometry) {\n    var type = geometry.getType();\n\n    switch (type) {\n      case GeometryType.POINT:\n        this.drawPoint(\n        /** @type {import(\"../../geom/Point.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.LINE_STRING:\n        this.drawLineString(\n        /** @type {import(\"../../geom/LineString.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.POLYGON:\n        this.drawPolygon(\n        /** @type {import(\"../../geom/Polygon.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.MULTI_POINT:\n        this.drawMultiPoint(\n        /** @type {import(\"../../geom/MultiPoint.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.MULTI_LINE_STRING:\n        this.drawMultiLineString(\n        /** @type {import(\"../../geom/MultiLineString.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.MULTI_POLYGON:\n        this.drawMultiPolygon(\n        /** @type {import(\"../../geom/MultiPolygon.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.GEOMETRY_COLLECTION:\n        this.drawGeometryCollection(\n        /** @type {import(\"../../geom/GeometryCollection.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.CIRCLE:\n        this.drawCircle(\n        /** @type {import(\"../../geom/Circle.js\").default} */\n        geometry);\n        break;\n\n      default:\n    }\n  };\n  /**\n   * Render a feature into the canvas.  Note that any `zIndex` on the provided\n   * style will be ignored - features are rendered immediately in the order that\n   * this method is called.  If you need `zIndex` support, you should be using an\n   * {@link module:ol/layer/Vector~VectorLayer VectorLayer} instead.\n   *\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   * @param {import(\"../../style/Style.js\").default} style Style.\n   * @api\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawFeature = function (feature, style) {\n    var geometry = style.getGeometryFunction()(feature);\n\n    if (!geometry || !intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n\n    this.setStyle(style);\n    this.drawGeometry(geometry);\n  };\n  /**\n   * Render a GeometryCollection to the canvas.  Rendering is immediate and\n   * uses the current styles appropriate for each geometry in the collection.\n   *\n   * @param {import(\"../../geom/GeometryCollection.js\").default} geometry Geometry collection.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawGeometryCollection = function (geometry) {\n    var geometries = geometry.getGeometriesArray();\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      this.drawGeometry(geometries[i]);\n    }\n  };\n  /**\n   * Render a Point geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} geometry Point geometry.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawPoint = function (geometry) {\n    if (this.squaredTolerance_) {\n      geometry =\n      /** @type {import(\"../../geom/Point.js\").default} */\n      geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_);\n    }\n\n    var flatCoordinates = geometry.getFlatCoordinates();\n    var stride = geometry.getStride();\n\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  };\n  /**\n   * Render a MultiPoint geometry  into the canvas.  Rendering is immediate and\n   * uses the current style.\n   *\n   * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} geometry MultiPoint geometry.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawMultiPoint = function (geometry) {\n    if (this.squaredTolerance_) {\n      geometry =\n      /** @type {import(\"../../geom/MultiPoint.js\").default} */\n      geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_);\n    }\n\n    var flatCoordinates = geometry.getFlatCoordinates();\n    var stride = geometry.getStride();\n\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  };\n  /**\n   * Render a LineString into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} geometry LineString geometry.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawLineString = function (geometry) {\n    if (this.squaredTolerance_) {\n      geometry =\n      /** @type {import(\"../../geom/LineString.js\").default} */\n      geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_);\n    }\n\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      var context = this.context_;\n      var flatCoordinates = geometry.getFlatCoordinates();\n      context.beginPath();\n      this.moveToLineTo_(flatCoordinates, 0, flatCoordinates.length, geometry.getStride(), false);\n      context.stroke();\n    }\n\n    if (this.text_ !== '') {\n      var flatMidpoint = geometry.getFlatMidpoint();\n      this.drawText_(flatMidpoint, 0, 2, 2);\n    }\n  };\n  /**\n   * Render a MultiLineString geometry into the canvas.  Rendering is immediate\n   * and uses the current style.\n   *\n   * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} geometry MultiLineString geometry.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawMultiLineString = function (geometry) {\n    if (this.squaredTolerance_) {\n      geometry =\n      /** @type {import(\"../../geom/MultiLineString.js\").default} */\n      geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_);\n    }\n\n    var geometryExtent = geometry.getExtent();\n\n    if (!intersects(this.extent_, geometryExtent)) {\n      return;\n    }\n\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      var context = this.context_;\n      var flatCoordinates = geometry.getFlatCoordinates();\n      var offset = 0;\n      var ends =\n      /** @type {Array<number>} */\n      geometry.getEnds();\n      var stride = geometry.getStride();\n      context.beginPath();\n\n      for (var i = 0, ii = ends.length; i < ii; ++i) {\n        offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, false);\n      }\n\n      context.stroke();\n    }\n\n    if (this.text_ !== '') {\n      var flatMidpoints = geometry.getFlatMidpoints();\n      this.drawText_(flatMidpoints, 0, flatMidpoints.length, 2);\n    }\n  };\n  /**\n   * Render a Polygon geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Polygon.js\").default|import(\"../Feature.js\").default} geometry Polygon geometry.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawPolygon = function (geometry) {\n    if (this.squaredTolerance_) {\n      geometry =\n      /** @type {import(\"../../geom/Polygon.js\").default} */\n      geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_);\n    }\n\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n\n      var context = this.context_;\n      context.beginPath();\n      this.drawRings_(geometry.getOrientedFlatCoordinates(), 0,\n      /** @type {Array<number>} */\n      geometry.getEnds(), geometry.getStride());\n\n      if (this.fillState_) {\n        context.fill();\n      }\n\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n\n    if (this.text_ !== '') {\n      var flatInteriorPoint = geometry.getFlatInteriorPoint();\n      this.drawText_(flatInteriorPoint, 0, 2, 2);\n    }\n  };\n  /**\n   * Render MultiPolygon geometry into the canvas.  Rendering is immediate and\n   * uses the current style.\n   * @param {import(\"../../geom/MultiPolygon.js\").default} geometry MultiPolygon geometry.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawMultiPolygon = function (geometry) {\n    if (this.squaredTolerance_) {\n      geometry =\n      /** @type {import(\"../../geom/MultiPolygon.js\").default} */\n      geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_);\n    }\n\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n\n      var context = this.context_;\n      var flatCoordinates = geometry.getOrientedFlatCoordinates();\n      var offset = 0;\n      var endss = geometry.getEndss();\n      var stride = geometry.getStride();\n      context.beginPath();\n\n      for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        offset = this.drawRings_(flatCoordinates, offset, ends, stride);\n      }\n\n      if (this.fillState_) {\n        context.fill();\n      }\n\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n\n    if (this.text_ !== '') {\n      var flatInteriorPoints = geometry.getFlatInteriorPoints();\n      this.drawText_(flatInteriorPoints, 0, flatInteriorPoints.length, 2);\n    }\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillState} fillState Fill state.\n   * @private\n   */\n\n\n  CanvasImmediateRenderer.prototype.setContextFillState_ = function (fillState) {\n    var context = this.context_;\n    var contextFillState = this.contextFillState_;\n\n    if (!contextFillState) {\n      context.fillStyle = fillState.fillStyle;\n      this.contextFillState_ = {\n        fillStyle: fillState.fillStyle\n      };\n    } else {\n      if (contextFillState.fillStyle != fillState.fillStyle) {\n        contextFillState.fillStyle = fillState.fillStyle;\n        context.fillStyle = fillState.fillStyle;\n      }\n    }\n  };\n  /**\n   * @param {import(\"../canvas.js\").StrokeState} strokeState Stroke state.\n   * @private\n   */\n\n\n  CanvasImmediateRenderer.prototype.setContextStrokeState_ = function (strokeState) {\n    var context = this.context_;\n    var contextStrokeState = this.contextStrokeState_;\n\n    if (!contextStrokeState) {\n      context.lineCap = strokeState.lineCap;\n\n      if (context.setLineDash) {\n        context.setLineDash(strokeState.lineDash);\n        context.lineDashOffset = strokeState.lineDashOffset;\n      }\n\n      context.lineJoin = strokeState.lineJoin;\n      context.lineWidth = strokeState.lineWidth;\n      context.miterLimit = strokeState.miterLimit;\n      context.strokeStyle = strokeState.strokeStyle;\n      this.contextStrokeState_ = {\n        lineCap: strokeState.lineCap,\n        lineDash: strokeState.lineDash,\n        lineDashOffset: strokeState.lineDashOffset,\n        lineJoin: strokeState.lineJoin,\n        lineWidth: strokeState.lineWidth,\n        miterLimit: strokeState.miterLimit,\n        strokeStyle: strokeState.strokeStyle\n      };\n    } else {\n      if (contextStrokeState.lineCap != strokeState.lineCap) {\n        contextStrokeState.lineCap = strokeState.lineCap;\n        context.lineCap = strokeState.lineCap;\n      }\n\n      if (context.setLineDash) {\n        if (!equals(contextStrokeState.lineDash, strokeState.lineDash)) {\n          context.setLineDash(contextStrokeState.lineDash = strokeState.lineDash);\n        }\n\n        if (contextStrokeState.lineDashOffset != strokeState.lineDashOffset) {\n          contextStrokeState.lineDashOffset = strokeState.lineDashOffset;\n          context.lineDashOffset = strokeState.lineDashOffset;\n        }\n      }\n\n      if (contextStrokeState.lineJoin != strokeState.lineJoin) {\n        contextStrokeState.lineJoin = strokeState.lineJoin;\n        context.lineJoin = strokeState.lineJoin;\n      }\n\n      if (contextStrokeState.lineWidth != strokeState.lineWidth) {\n        contextStrokeState.lineWidth = strokeState.lineWidth;\n        context.lineWidth = strokeState.lineWidth;\n      }\n\n      if (contextStrokeState.miterLimit != strokeState.miterLimit) {\n        contextStrokeState.miterLimit = strokeState.miterLimit;\n        context.miterLimit = strokeState.miterLimit;\n      }\n\n      if (contextStrokeState.strokeStyle != strokeState.strokeStyle) {\n        contextStrokeState.strokeStyle = strokeState.strokeStyle;\n        context.strokeStyle = strokeState.strokeStyle;\n      }\n    }\n  };\n  /**\n   * @param {import(\"../canvas.js\").TextState} textState Text state.\n   * @private\n   */\n\n\n  CanvasImmediateRenderer.prototype.setContextTextState_ = function (textState) {\n    var context = this.context_;\n    var contextTextState = this.contextTextState_;\n    var textAlign = textState.textAlign ? textState.textAlign : defaultTextAlign;\n\n    if (!contextTextState) {\n      context.font = textState.font;\n      context.textAlign =\n      /** @type {CanvasTextAlign} */\n      textAlign;\n      context.textBaseline =\n      /** @type {CanvasTextBaseline} */\n      textState.textBaseline;\n      this.contextTextState_ = {\n        font: textState.font,\n        textAlign: textAlign,\n        textBaseline: textState.textBaseline\n      };\n    } else {\n      if (contextTextState.font != textState.font) {\n        contextTextState.font = textState.font;\n        context.font = textState.font;\n      }\n\n      if (contextTextState.textAlign != textAlign) {\n        contextTextState.textAlign =\n        /** @type {CanvasTextAlign} */\n        textAlign;\n        context.textAlign =\n        /** @type {CanvasTextAlign} */\n        textAlign;\n      }\n\n      if (contextTextState.textBaseline != textState.textBaseline) {\n        contextTextState.textBaseline =\n        /** @type {CanvasTextBaseline} */\n        textState.textBaseline;\n        context.textBaseline =\n        /** @type {CanvasTextBaseline} */\n        textState.textBaseline;\n      }\n    }\n  };\n  /**\n   * Set the fill and stroke style for subsequent draw operations.  To clear\n   * either fill or stroke styles, pass null for the appropriate parameter.\n   *\n   * @param {import(\"../../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../../style/Stroke.js\").default} strokeStyle Stroke style.\n   */\n\n\n  CanvasImmediateRenderer.prototype.setFillStrokeStyle = function (fillStyle, strokeStyle) {\n    var _this = this;\n\n    if (!fillStyle) {\n      this.fillState_ = null;\n    } else {\n      var fillStyleColor = fillStyle.getColor();\n      this.fillState_ = {\n        fillStyle: asColorLike(fillStyleColor ? fillStyleColor : defaultFillStyle)\n      };\n    }\n\n    if (!strokeStyle) {\n      this.strokeState_ = null;\n    } else {\n      var strokeStyleColor = strokeStyle.getColor();\n      var strokeStyleLineCap = strokeStyle.getLineCap();\n      var strokeStyleLineDash = strokeStyle.getLineDash();\n      var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      var strokeStyleLineJoin = strokeStyle.getLineJoin();\n      var strokeStyleWidth = strokeStyle.getWidth();\n      var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      var lineDash = strokeStyleLineDash ? strokeStyleLineDash : defaultLineDash;\n      this.strokeState_ = {\n        lineCap: strokeStyleLineCap !== undefined ? strokeStyleLineCap : defaultLineCap,\n        lineDash: this.pixelRatio_ === 1 ? lineDash : lineDash.map(function (n) {\n          return n * _this.pixelRatio_;\n        }),\n        lineDashOffset: (strokeStyleLineDashOffset ? strokeStyleLineDashOffset : defaultLineDashOffset) * this.pixelRatio_,\n        lineJoin: strokeStyleLineJoin !== undefined ? strokeStyleLineJoin : defaultLineJoin,\n        lineWidth: (strokeStyleWidth !== undefined ? strokeStyleWidth : defaultLineWidth) * this.pixelRatio_,\n        miterLimit: strokeStyleMiterLimit !== undefined ? strokeStyleMiterLimit : defaultMiterLimit,\n        strokeStyle: asColorLike(strokeStyleColor ? strokeStyleColor : defaultStrokeStyle)\n      };\n    }\n  };\n  /**\n   * Set the image style for subsequent draw operations.  Pass null to remove\n   * the image style.\n   *\n   * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n   */\n\n\n  CanvasImmediateRenderer.prototype.setImageStyle = function (imageStyle) {\n    var imageSize;\n\n    if (!imageStyle || !(imageSize = imageStyle.getSize())) {\n      this.image_ = null;\n      return;\n    }\n\n    var imageAnchor = imageStyle.getAnchor();\n    var imageOrigin = imageStyle.getOrigin();\n    this.image_ = imageStyle.getImage(this.pixelRatio_);\n    this.imageAnchorX_ = imageAnchor[0] * this.pixelRatio_;\n    this.imageAnchorY_ = imageAnchor[1] * this.pixelRatio_;\n    this.imageHeight_ = imageSize[1] * this.pixelRatio_;\n    this.imageOpacity_ = imageStyle.getOpacity();\n    this.imageOriginX_ = imageOrigin[0];\n    this.imageOriginY_ = imageOrigin[1];\n    this.imageRotateWithView_ = imageStyle.getRotateWithView();\n    this.imageRotation_ = imageStyle.getRotation();\n    this.imageScale_ = imageStyle.getScaleArray();\n    this.imageWidth_ = imageSize[0] * this.pixelRatio_;\n  };\n  /**\n   * Set the text style for subsequent draw operations.  Pass null to\n   * remove the text style.\n   *\n   * @param {import(\"../../style/Text.js\").default} textStyle Text style.\n   */\n\n\n  CanvasImmediateRenderer.prototype.setTextStyle = function (textStyle) {\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      var textFillStyle = textStyle.getFill();\n\n      if (!textFillStyle) {\n        this.textFillState_ = null;\n      } else {\n        var textFillStyleColor = textFillStyle.getColor();\n        this.textFillState_ = {\n          fillStyle: asColorLike(textFillStyleColor ? textFillStyleColor : defaultFillStyle)\n        };\n      }\n\n      var textStrokeStyle = textStyle.getStroke();\n\n      if (!textStrokeStyle) {\n        this.textStrokeState_ = null;\n      } else {\n        var textStrokeStyleColor = textStrokeStyle.getColor();\n        var textStrokeStyleLineCap = textStrokeStyle.getLineCap();\n        var textStrokeStyleLineDash = textStrokeStyle.getLineDash();\n        var textStrokeStyleLineDashOffset = textStrokeStyle.getLineDashOffset();\n        var textStrokeStyleLineJoin = textStrokeStyle.getLineJoin();\n        var textStrokeStyleWidth = textStrokeStyle.getWidth();\n        var textStrokeStyleMiterLimit = textStrokeStyle.getMiterLimit();\n        this.textStrokeState_ = {\n          lineCap: textStrokeStyleLineCap !== undefined ? textStrokeStyleLineCap : defaultLineCap,\n          lineDash: textStrokeStyleLineDash ? textStrokeStyleLineDash : defaultLineDash,\n          lineDashOffset: textStrokeStyleLineDashOffset ? textStrokeStyleLineDashOffset : defaultLineDashOffset,\n          lineJoin: textStrokeStyleLineJoin !== undefined ? textStrokeStyleLineJoin : defaultLineJoin,\n          lineWidth: textStrokeStyleWidth !== undefined ? textStrokeStyleWidth : defaultLineWidth,\n          miterLimit: textStrokeStyleMiterLimit !== undefined ? textStrokeStyleMiterLimit : defaultMiterLimit,\n          strokeStyle: asColorLike(textStrokeStyleColor ? textStrokeStyleColor : defaultStrokeStyle)\n        };\n      }\n\n      var textFont = textStyle.getFont();\n      var textOffsetX = textStyle.getOffsetX();\n      var textOffsetY = textStyle.getOffsetY();\n      var textRotateWithView = textStyle.getRotateWithView();\n      var textRotation = textStyle.getRotation();\n      var textScale = textStyle.getScaleArray();\n      var textText = textStyle.getText();\n      var textTextAlign = textStyle.getTextAlign();\n      var textTextBaseline = textStyle.getTextBaseline();\n      this.textState_ = {\n        font: textFont !== undefined ? textFont : defaultFont,\n        textAlign: textTextAlign !== undefined ? textTextAlign : defaultTextAlign,\n        textBaseline: textTextBaseline !== undefined ? textTextBaseline : defaultTextBaseline\n      };\n      this.text_ = textText !== undefined ? textText : '';\n      this.textOffsetX_ = textOffsetX !== undefined ? this.pixelRatio_ * textOffsetX : 0;\n      this.textOffsetY_ = textOffsetY !== undefined ? this.pixelRatio_ * textOffsetY : 0;\n      this.textRotateWithView_ = textRotateWithView !== undefined ? textRotateWithView : false;\n      this.textRotation_ = textRotation !== undefined ? textRotation : 0;\n      this.textScale_ = [this.pixelRatio_ * textScale[0], this.pixelRatio_ * textScale[1]];\n    }\n  };\n\n  return CanvasImmediateRenderer;\n}(VectorContext);\n\nexport default CanvasImmediateRenderer;","/**\n * @module ol/style/IconAnchorUnits\n */\n\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n  /**\n   * Anchor is a fraction\n   * @api\n   */\n  FRACTION: 'fraction',\n\n  /**\n   * Anchor is in pixels\n   * @api\n   */\n  PIXELS: 'pixels'\n};","/**\n * @module ol/style/IconOrigin\n */\n\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n  /**\n   * Origin is at bottom left\n   * @api\n   */\n  BOTTOM_LEFT: 'bottom-left',\n\n  /**\n   * Origin is at bottom right\n   * @api\n   */\n  BOTTOM_RIGHT: 'bottom-right',\n\n  /**\n   * Origin is at top left\n   * @api\n   */\n  TOP_LEFT: 'top-left',\n\n  /**\n   * Origin is at top right\n   * @api\n   */\n  TOP_RIGHT: 'top-right'\n};","/**\n * @module ol/style/IconImage\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport { asString } from '../color.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { shared as iconImageCache } from './IconImageCache.js';\nimport { listenImage } from '../Image.js';\n/**\n * @type {CanvasRenderingContext2D}\n */\n\nvar taintedTestContext = null;\n\nvar IconImage =\n/** @class */\nfunction (_super) {\n  __extends(IconImage, _super);\n  /**\n   * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n   * @param {string|undefined} src Src.\n   * @param {import(\"../size.js\").Size} size Size.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../ImageState.js\").default} imageState Image state.\n   * @param {import(\"../color.js\").Color} color Color.\n   */\n\n\n  function IconImage(image, src, size, crossOrigin, imageState, color) {\n    var _this = _super.call(this) || this;\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n\n\n    _this.hitDetectionImage_ = null;\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n\n    _this.image_ = !image ? new Image() : image;\n\n    if (crossOrigin !== null) {\n      /** @type {HTMLImageElement} */\n      _this.image_.crossOrigin = crossOrigin;\n    }\n    /**\n     * @private\n     * @type {Object<number, HTMLCanvasElement>}\n     */\n\n\n    _this.canvas_ = {};\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n\n    _this.color_ = color;\n    /**\n     * @private\n     * @type {?function():void}\n     */\n\n    _this.unlisten_ = null;\n    /**\n     * @private\n     * @type {import(\"../ImageState.js\").default}\n     */\n\n    _this.imageState_ = imageState;\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n\n    _this.size_ = size;\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n\n    _this.src_ = src;\n    /**\n     * @private\n     */\n\n    _this.tainted_;\n    return _this;\n  }\n  /**\n   * @private\n   * @return {boolean} The image canvas is tainted.\n   */\n\n\n  IconImage.prototype.isTainted_ = function () {\n    if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n      if (!taintedTestContext) {\n        taintedTestContext = createCanvasContext2D(1, 1);\n      }\n\n      taintedTestContext.drawImage(this.image_, 0, 0);\n\n      try {\n        taintedTestContext.getImageData(0, 0, 1, 1);\n        this.tainted_ = false;\n      } catch (e) {\n        taintedTestContext = null;\n        this.tainted_ = true;\n      }\n    }\n\n    return this.tainted_ === true;\n  };\n  /**\n   * @private\n   */\n\n\n  IconImage.prototype.dispatchChangeEvent_ = function () {\n    this.dispatchEvent(EventType.CHANGE);\n  };\n  /**\n   * @private\n   */\n\n\n  IconImage.prototype.handleImageError_ = function () {\n    this.imageState_ = ImageState.ERROR;\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  };\n  /**\n   * @private\n   */\n\n\n  IconImage.prototype.handleImageLoad_ = function () {\n    this.imageState_ = ImageState.LOADED;\n\n    if (this.size_) {\n      this.image_.width = this.size_[0];\n      this.image_.height = this.size_[1];\n    } else {\n      this.size_ = [this.image_.width, this.image_.height];\n    }\n\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  };\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   */\n\n\n  IconImage.prototype.getImage = function (pixelRatio) {\n    this.replaceColor_(pixelRatio);\n    return this.canvas_[pixelRatio] ? this.canvas_[pixelRatio] : this.image_;\n  };\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Image or Canvas element.\n   */\n\n\n  IconImage.prototype.getPixelRatio = function (pixelRatio) {\n    this.replaceColor_(pixelRatio);\n    return this.canvas_[pixelRatio] ? pixelRatio : 1;\n  };\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n\n\n  IconImage.prototype.getImageState = function () {\n    return this.imageState_;\n  };\n  /**\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n\n\n  IconImage.prototype.getHitDetectionImage = function () {\n    if (!this.hitDetectionImage_) {\n      if (this.isTainted_()) {\n        var width = this.size_[0];\n        var height = this.size_[1];\n        var context = createCanvasContext2D(width, height);\n        context.fillRect(0, 0, width, height);\n        this.hitDetectionImage_ = context.canvas;\n      } else {\n        this.hitDetectionImage_ = this.image_;\n      }\n    }\n\n    return this.hitDetectionImage_;\n  };\n  /**\n   * Get the size of the icon (in pixels).\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n\n\n  IconImage.prototype.getSize = function () {\n    return this.size_;\n  };\n  /**\n   * @return {string|undefined} Image src.\n   */\n\n\n  IconImage.prototype.getSrc = function () {\n    return this.src_;\n  };\n  /**\n   * Load not yet loaded URI.\n   */\n\n\n  IconImage.prototype.load = function () {\n    if (this.imageState_ == ImageState.IDLE) {\n      this.imageState_ = ImageState.LOADING;\n\n      try {\n        /** @type {HTMLImageElement} */\n        this.image_.src = this.src_;\n      } catch (e) {\n        this.handleImageError_();\n      }\n\n      this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n    }\n  };\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @private\n   */\n\n\n  IconImage.prototype.replaceColor_ = function (pixelRatio) {\n    if (!this.color_ || this.canvas_[pixelRatio] || this.imageState_ !== ImageState.LOADED) {\n      return;\n    }\n\n    var canvas = document.createElement('canvas');\n    this.canvas_[pixelRatio] = canvas;\n    canvas.width = Math.ceil(this.image_.width * pixelRatio);\n    canvas.height = Math.ceil(this.image_.height * pixelRatio);\n    var ctx = canvas.getContext('2d');\n    ctx.scale(pixelRatio, pixelRatio);\n    ctx.drawImage(this.image_, 0, 0);\n    ctx.globalCompositeOperation = 'multiply'; // Internet Explorer 11 does not support the multiply operation.\n    // If the canvas is tainted in Internet Explorer this still produces\n    // a solid color image with the shape of the icon.\n\n    if (ctx.globalCompositeOperation === 'multiply' || this.isTainted_()) {\n      ctx.fillStyle = asString(this.color_);\n      ctx.fillRect(0, 0, canvas.width / pixelRatio, canvas.height / pixelRatio);\n      ctx.globalCompositeOperation = 'destination-in';\n      ctx.drawImage(this.image_, 0, 0);\n    } else {\n      var imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      var data = imgData.data;\n      var r = this.color_[0] / 255.0;\n      var g = this.color_[1] / 255.0;\n      var b = this.color_[2] / 255.0;\n      var a = this.color_[3];\n\n      for (var i = 0, ii = data.length; i < ii; i += 4) {\n        data[i] *= r;\n        data[i + 1] *= g;\n        data[i + 2] *= b;\n        data[i + 3] *= a;\n      }\n\n      ctx.putImageData(imgData, 0, 0);\n    }\n  };\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n\n\n  IconImage.prototype.unlistenImage_ = function () {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  };\n\n  return IconImage;\n}(EventTarget);\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\n\n\nexport function get(image, src, size, crossOrigin, imageState, color) {\n  var iconImage = iconImageCache.get(src, crossOrigin, color);\n\n  if (!iconImage) {\n    iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n    iconImageCache.set(src, crossOrigin, color, iconImage);\n  }\n\n  return iconImage;\n}\nexport default IconImage;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/style/Icon\n */\n\n\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from './IconAnchorUnits.js';\nimport IconOrigin from './IconOrigin.js';\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport { asArray } from '../color.js';\nimport { assert } from '../asserts.js';\nimport { get as getIconImage } from './IconImage.js';\nimport { getUid } from '../util.js';\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {import(\"./IconOrigin.js\").default} [anchorOrigin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorXUnits='fraction'] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorYUnits='fraction'] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {Array<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {Array<number>} [displacement=[0,0]] Displacement of the icon.\n * @property {import(\"./IconOrigin.js\").default} [offsetOrigin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {import(\"../size.js\").Size} [size] Icon size in pixel. Can be used together with `offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {import(\"../size.js\").Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\n * @property {string} [src] Image source URI.\n */\n\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\n\nvar Icon =\n/** @class */\nfunction (_super) {\n  __extends(Icon, _super);\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n\n\n  function Icon(opt_options) {\n    var _this = this;\n\n    var options = opt_options || {};\n    /**\n     * @type {number}\n     */\n\n    var opacity = options.opacity !== undefined ? options.opacity : 1;\n    /**\n     * @type {number}\n     */\n\n    var rotation = options.rotation !== undefined ? options.rotation : 0;\n    /**\n     * @type {number|import(\"../size.js\").Size}\n     */\n\n    var scale = options.scale !== undefined ? options.scale : 1;\n    /**\n     * @type {boolean}\n     */\n\n    var rotateWithView = options.rotateWithView !== undefined ? options.rotateWithView : false;\n    _this = _super.call(this, {\n      opacity: opacity,\n      rotation: rotation,\n      scale: scale,\n      displacement: options.displacement !== undefined ? options.displacement : [0, 0],\n      rotateWithView: rotateWithView\n    }) || this;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.normalizedAnchor_ = null;\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n\n    _this.anchorOrigin_ = options.anchorOrigin !== undefined ? options.anchorOrigin : IconOrigin.TOP_LEFT;\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n\n    _this.anchorXUnits_ = options.anchorXUnits !== undefined ? options.anchorXUnits : IconAnchorUnits.FRACTION;\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n\n    _this.anchorYUnits_ = options.anchorYUnits !== undefined ? options.anchorYUnits : IconAnchorUnits.FRACTION;\n    /**\n     * @private\n     * @type {?string}\n     */\n\n    _this.crossOrigin_ = options.crossOrigin !== undefined ? options.crossOrigin : null;\n    /**\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n\n    var image = options.img !== undefined ? options.img : null;\n    /**\n     * @type {import(\"../size.js\").Size}\n     */\n\n    var imgSize = options.imgSize !== undefined ? options.imgSize : null;\n    /**\n     * @type {string|undefined}\n     */\n\n    var src = options.src;\n    assert(!(src !== undefined && image), 4); // `image` and `src` cannot be provided at the same time\n\n    assert(!image || image && imgSize, 5); // `imgSize` must be set when `image` is provided\n\n    if ((src === undefined || src.length === 0) && image) {\n      src =\n      /** @type {HTMLImageElement} */\n      image.src || getUid(image);\n    }\n\n    assert(src !== undefined && src.length > 0, 6); // A defined and non-empty `src` or `image` must be provided\n\n    /**\n     * @type {import(\"../ImageState.js\").default}\n     */\n\n    var imageState = options.src !== undefined ? ImageState.IDLE : ImageState.LOADED;\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n\n    _this.color_ = options.color !== undefined ? asArray(options.color) : null;\n    /**\n     * @private\n     * @type {import(\"./IconImage.js\").default}\n     */\n\n    _this.iconImage_ = getIconImage(image,\n    /** @type {string} */\n    src, imgSize, _this.crossOrigin_, imageState, _this.color_);\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n\n    _this.offsetOrigin_ = options.offsetOrigin !== undefined ? options.offsetOrigin : IconOrigin.TOP_LEFT;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.origin_ = null;\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n\n    _this.size_ = options.size !== undefined ? options.size : null;\n    return _this;\n  }\n  /**\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n   * @return {Icon} The cloned style.\n   * @api\n   */\n\n\n  Icon.prototype.clone = function () {\n    var scale = this.getScale();\n    return new Icon({\n      anchor: this.anchor_.slice(),\n      anchorOrigin: this.anchorOrigin_,\n      anchorXUnits: this.anchorXUnits_,\n      anchorYUnits: this.anchorYUnits_,\n      crossOrigin: this.crossOrigin_,\n      color: this.color_ && this.color_.slice ? this.color_.slice() : this.color_ || undefined,\n      src: this.getSrc(),\n      offset: this.offset_.slice(),\n      offsetOrigin: this.offsetOrigin_,\n      size: this.size_ !== null ? this.size_.slice() : undefined,\n      opacity: this.getOpacity(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView()\n    });\n  };\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @return {Array<number>} Anchor.\n   * @api\n   */\n\n\n  Icon.prototype.getAnchor = function () {\n    var anchor = this.normalizedAnchor_;\n\n    if (!anchor) {\n      anchor = this.anchor_;\n      var size = this.getSize();\n\n      if (this.anchorXUnits_ == IconAnchorUnits.FRACTION || this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n        if (!size) {\n          return null;\n        }\n\n        anchor = this.anchor_.slice();\n\n        if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n          anchor[0] *= size[0];\n        }\n\n        if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n          anchor[1] *= size[1];\n        }\n      }\n\n      if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n        if (!size) {\n          return null;\n        }\n\n        if (anchor === this.anchor_) {\n          anchor = this.anchor_.slice();\n        }\n\n        if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT || this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n          anchor[0] = -anchor[0] + size[0];\n        }\n\n        if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT || this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n          anchor[1] = -anchor[1] + size[1];\n        }\n      }\n\n      this.normalizedAnchor_ = anchor;\n    }\n\n    var displacement = this.getDisplacement();\n    return [anchor[0] - displacement[0], anchor[1] + displacement[1]];\n  };\n  /**\n   * Set the anchor point. The anchor determines the center point for the\n   * symbolizer.\n   *\n   * @param {Array<number>} anchor Anchor.\n   * @api\n   */\n\n\n  Icon.prototype.setAnchor = function (anchor) {\n    this.anchor_ = anchor;\n    this.normalizedAnchor_ = null;\n  };\n  /**\n   * Get the icon color.\n   * @return {import(\"../color.js\").Color} Color.\n   * @api\n   */\n\n\n  Icon.prototype.getColor = function () {\n    return this.color_;\n  };\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   * @api\n   */\n\n\n  Icon.prototype.getImage = function (pixelRatio) {\n    return this.iconImage_.getImage(pixelRatio);\n  };\n  /**\n   * Get the pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} The pixel ratio of the image.\n   * @api\n   */\n\n\n  Icon.prototype.getPixelRatio = function (pixelRatio) {\n    return this.iconImage_.getPixelRatio(pixelRatio);\n  };\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n\n\n  Icon.prototype.getImageSize = function () {\n    return this.iconImage_.getSize();\n  };\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n\n\n  Icon.prototype.getImageState = function () {\n    return this.iconImage_.getImageState();\n  };\n  /**\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n\n\n  Icon.prototype.getHitDetectionImage = function () {\n    return this.iconImage_.getHitDetectionImage();\n  };\n  /**\n   * Get the origin of the symbolizer.\n   * @return {Array<number>} Origin.\n   * @api\n   */\n\n\n  Icon.prototype.getOrigin = function () {\n    if (this.origin_) {\n      return this.origin_;\n    }\n\n    var offset = this.offset_;\n\n    if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n      var size = this.getSize();\n      var iconImageSize = this.iconImage_.getSize();\n\n      if (!size || !iconImageSize) {\n        return null;\n      }\n\n      offset = offset.slice();\n\n      if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT || this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\n      }\n\n      if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT || this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\n      }\n    }\n\n    this.origin_ = offset;\n    return this.origin_;\n  };\n  /**\n   * Get the image URL.\n   * @return {string|undefined} Image src.\n   * @api\n   */\n\n\n  Icon.prototype.getSrc = function () {\n    return this.iconImage_.getSrc();\n  };\n  /**\n   * Get the size of the icon (in pixels).\n   * @return {import(\"../size.js\").Size} Image size.\n   * @api\n   */\n\n\n  Icon.prototype.getSize = function () {\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\n  };\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n\n\n  Icon.prototype.listenImageChange = function (listener) {\n    this.iconImage_.addEventListener(EventType.CHANGE, listener);\n  };\n  /**\n   * Load not yet loaded URI.\n   * When rendering a feature with an icon style, the vector renderer will\n   * automatically call this method. However, you might want to call this\n   * method yourself for preloading or other purposes.\n   * @api\n   */\n\n\n  Icon.prototype.load = function () {\n    this.iconImage_.load();\n  };\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n\n\n  Icon.prototype.unlistenImageChange = function (listener) {\n    this.iconImage_.removeEventListener(EventType.CHANGE, listener);\n  };\n\n  return Icon;\n}(ImageStyle);\n\nexport default Icon;","/**\n * @module ol/render/canvas/hitdetect\n */\nimport CanvasImmediateRenderer from './Immediate.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport IconAnchorUnits from '../../style/IconAnchorUnits.js';\nimport { Icon } from '../../style.js';\nimport { clamp } from '../../math.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport { intersects } from '../../extent.js';\nimport { numberSafeCompareFunction } from '../../array.js';\nexport var HIT_DETECT_RESOLUTION = 0.5;\n/**\n * @param {import(\"../../size.js\").Size} size Canvas size in css pixels.\n * @param {Array<import(\"../../transform.js\").Transform>} transforms Transforms\n * for rendering features to all worlds of the viewport, from coordinates to css\n * pixels.\n * @param {Array<import(\"../../Feature.js\").FeatureLike>} features\n * Features to consider for hit detection.\n * @param {import(\"../../style/Style.js\").StyleFunction|undefined} styleFunction\n * Layer style function.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @return {ImageData} Hit detection image data.\n */\n\nexport function createHitDetectionImageData(size, transforms, features, styleFunction, extent, resolution, rotation) {\n  var width = size[0] * HIT_DETECT_RESOLUTION;\n  var height = size[1] * HIT_DETECT_RESOLUTION;\n  var context = createCanvasContext2D(width, height);\n  context.imageSmoothingEnabled = false;\n  var canvas = context.canvas;\n  var renderer = new CanvasImmediateRenderer(context, HIT_DETECT_RESOLUTION, extent, null, rotation);\n  var featureCount = features.length; // Stretch hit detection index to use the whole available color range\n\n  var indexFactor = Math.floor((256 * 256 * 256 - 1) / featureCount);\n  var featuresByZIndex = {};\n\n  for (var i = 1; i <= featureCount; ++i) {\n    var feature = features[i - 1];\n    var featureStyleFunction = feature.getStyleFunction() || styleFunction;\n\n    if (!styleFunction) {\n      continue;\n    }\n\n    var styles = featureStyleFunction(feature, resolution);\n\n    if (!styles) {\n      continue;\n    }\n\n    if (!Array.isArray(styles)) {\n      styles = [styles];\n    }\n\n    var index = i * indexFactor;\n    var color = '#' + ('000000' + index.toString(16)).slice(-6);\n\n    for (var j = 0, jj = styles.length; j < jj; ++j) {\n      var originalStyle = styles[j];\n      var geometry = originalStyle.getGeometryFunction()(feature);\n\n      if (!geometry || !intersects(extent, geometry.getExtent())) {\n        continue;\n      }\n\n      var style = originalStyle.clone();\n      var fill = style.getFill();\n\n      if (fill) {\n        fill.setColor(color);\n      }\n\n      var stroke = style.getStroke();\n\n      if (stroke) {\n        stroke.setColor(color);\n        stroke.setLineDash(null);\n      }\n\n      style.setText(undefined);\n      var image = originalStyle.getImage();\n\n      if (image && image.getOpacity() !== 0) {\n        var imgSize = image.getImageSize();\n\n        if (!imgSize) {\n          continue;\n        }\n\n        var imgContext = createCanvasContext2D(imgSize[0], imgSize[1], undefined, {\n          alpha: false\n        });\n        var img = imgContext.canvas;\n        imgContext.fillStyle = color;\n        imgContext.fillRect(0, 0, img.width, img.height);\n        style.setImage(new Icon({\n          img: img,\n          imgSize: imgSize,\n          anchor: image.getAnchor(),\n          anchorXUnits: IconAnchorUnits.PIXELS,\n          anchorYUnits: IconAnchorUnits.PIXELS,\n          offset: image.getOrigin(),\n          opacity: 1,\n          size: image.getSize(),\n          scale: image.getScale(),\n          rotation: image.getRotation(),\n          rotateWithView: image.getRotateWithView()\n        }));\n      }\n\n      var zIndex = style.getZIndex() || 0;\n      var byGeometryType = featuresByZIndex[zIndex];\n\n      if (!byGeometryType) {\n        byGeometryType = {};\n        featuresByZIndex[zIndex] = byGeometryType;\n        byGeometryType[GeometryType.POLYGON] = [];\n        byGeometryType[GeometryType.CIRCLE] = [];\n        byGeometryType[GeometryType.LINE_STRING] = [];\n        byGeometryType[GeometryType.POINT] = [];\n      }\n\n      byGeometryType[geometry.getType().replace('Multi', '')].push(geometry, style);\n    }\n  }\n\n  var zIndexKeys = Object.keys(featuresByZIndex).map(Number).sort(numberSafeCompareFunction);\n\n  for (var i = 0, ii = zIndexKeys.length; i < ii; ++i) {\n    var byGeometryType = featuresByZIndex[zIndexKeys[i]];\n\n    for (var type in byGeometryType) {\n      var geomAndStyle = byGeometryType[type];\n\n      for (var j = 0, jj = geomAndStyle.length; j < jj; j += 2) {\n        renderer.setStyle(geomAndStyle[j + 1]);\n\n        for (var k = 0, kk = transforms.length; k < kk; ++k) {\n          renderer.setTransform(transforms[k]);\n          renderer.drawGeometry(geomAndStyle[j]);\n        }\n      }\n    }\n  }\n\n  return context.getImageData(0, 0, canvas.width, canvas.height);\n}\n/**\n * @param {import(\"../../pixel\").Pixel} pixel Pixel coordinate on the hit\n * detection canvas in css pixels.\n * @param {Array<import(\"../../Feature\").FeatureLike>} features Features. Has to\n * match the `features` array that was passed to `createHitDetectionImageData()`.\n * @param {ImageData} imageData Hit detection image data generated by\n * `createHitDetectionImageData()`.\n * @return {Array<import(\"../../Feature\").FeatureLike>} features Features.\n */\n\nexport function hitDetect(pixel, features, imageData) {\n  var resultFeatures = [];\n\n  if (imageData) {\n    var x = Math.floor(Math.round(pixel[0]) * HIT_DETECT_RESOLUTION);\n    var y = Math.floor(Math.round(pixel[1]) * HIT_DETECT_RESOLUTION); // The pixel coordinate is clamped down to the hit-detect canvas' size to account\n    // for browsers returning coordinates slightly larger than the actual canvas size\n    // due to a non-integer pixel ratio.\n\n    var index = (clamp(x, 0, imageData.width - 1) + clamp(y, 0, imageData.height - 1) * imageData.width) * 4;\n    var r = imageData.data[index];\n    var g = imageData.data[index + 1];\n    var b = imageData.data[index + 2];\n    var i = b + 256 * (g + 256 * r);\n    var indexFactor = Math.floor((256 * 256 * 256 - 1) / features.length);\n\n    if (i && i % indexFactor === 0) {\n      resultFeatures.push(features[i / indexFactor - 1]);\n    }\n  }\n\n  return resultFeatures;\n}","/**\n * @module ol/renderer/vector\n */\nimport BuilderType from '../render/canvas/BuilderType.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport ImageState from '../ImageState.js';\nimport { getUid } from '../util.js';\n/**\n * Feature callback. The callback will be called with three arguments. The first\n * argument is one {@link module:ol/Feature feature} or {@link module:ol/render/Feature render feature}\n * at the pixel, the second is the {@link module:ol/layer/Layer layer} of the feature and will be null for\n * unmanaged layers. The third is the {@link module:ol/geom/SimpleGeometry} of the feature. For features\n * with a GeometryCollection geometry, it will be the first detected geometry from the collection.\n * @template T\n * @typedef {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>, import(\"../geom/SimpleGeometry.js\").default): T} FeatureCallback\n */\n\n/**\n * Tolerance for geometry simplification in device pixels.\n * @type {number}\n */\n\nvar SIMPLIFY_TOLERANCE = 0.5;\n/**\n * @const\n * @type {Object<import(\"../geom/GeometryType.js\").default,\n *                function(import(\"../render/canvas/BuilderGroup.js\").default, import(\"../geom/Geometry.js\").default,\n *                         import(\"../style/Style.js\").default, Object): void>}\n */\n\nvar GEOMETRY_RENDERERS = {\n  'Point': renderPointGeometry,\n  'LineString': renderLineStringGeometry,\n  'Polygon': renderPolygonGeometry,\n  'MultiPoint': renderMultiPointGeometry,\n  'MultiLineString': renderMultiLineStringGeometry,\n  'MultiPolygon': renderMultiPolygonGeometry,\n  'GeometryCollection': renderGeometryCollectionGeometry,\n  'Circle': renderCircleGeometry\n};\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature1 Feature 1.\n * @param {import(\"../Feature.js\").FeatureLike} feature2 Feature 2.\n * @return {number} Order.\n */\n\nexport function defaultOrder(feature1, feature2) {\n  return parseInt(getUid(feature1), 10) - parseInt(getUid(feature2), 10);\n}\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Squared pixel tolerance.\n */\n\nexport function getSquaredTolerance(resolution, pixelRatio) {\n  var tolerance = getTolerance(resolution, pixelRatio);\n  return tolerance * tolerance;\n}\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Pixel tolerance.\n */\n\nexport function getTolerance(resolution, pixelRatio) {\n  return SIMPLIFY_TOLERANCE * resolution / pixelRatio;\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n * @param {import(\"../geom/Circle.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\nfunction renderCircleGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var fillStyle = style.getFill();\n  var strokeStyle = style.getStroke();\n\n  if (fillStyle || strokeStyle) {\n    var circleReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.CIRCLE);\n    circleReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    circleReplay.drawCircle(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Transform from user to view projection.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n * @return {boolean} `true` if style is loading.\n */\n\n\nexport function renderFeature(replayGroup, feature, style, squaredTolerance, listener, opt_transform, opt_declutterBuilderGroup) {\n  var loading = false;\n  var imageStyle = style.getImage();\n\n  if (imageStyle) {\n    var imageState = imageStyle.getImageState();\n\n    if (imageState == ImageState.LOADED || imageState == ImageState.ERROR) {\n      imageStyle.unlistenImageChange(listener);\n    } else {\n      if (imageState == ImageState.IDLE) {\n        imageStyle.load();\n      }\n\n      imageState = imageStyle.getImageState();\n      imageStyle.listenImageChange(listener);\n      loading = true;\n    }\n  }\n\n  renderFeatureInternal(replayGroup, feature, style, squaredTolerance, opt_transform, opt_declutterBuilderGroup);\n  return loading;\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Optional transform function.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\nfunction renderFeatureInternal(replayGroup, feature, style, squaredTolerance, opt_transform, opt_declutterBuilderGroup) {\n  var geometry = style.getGeometryFunction()(feature);\n\n  if (!geometry) {\n    return;\n  }\n\n  var simplifiedGeometry = geometry.simplifyTransformed(squaredTolerance, opt_transform);\n  var renderer = style.getRenderer();\n\n  if (renderer) {\n    renderGeometry(replayGroup, simplifiedGeometry, style, feature);\n  } else {\n    var geometryRenderer = GEOMETRY_RENDERERS[simplifiedGeometry.getType()];\n    geometryRenderer(replayGroup, simplifiedGeometry, style, feature, opt_declutterBuilderGroup);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\n\n\nfunction renderGeometry(replayGroup, geometry, style, feature) {\n  if (geometry.getType() == GeometryType.GEOMETRY_COLLECTION) {\n    var geometries =\n    /** @type {import(\"../geom/GeometryCollection.js\").default} */\n    geometry.getGeometries();\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      renderGeometry(replayGroup, geometries[i], style, feature);\n    }\n\n    return;\n  }\n\n  var replay = replayGroup.getBuilder(style.getZIndex(), BuilderType.DEFAULT);\n  replay.drawCustom(\n  /** @type {import(\"../geom/SimpleGeometry.js\").default} */\n  geometry, feature, style.getRenderer(), style.getHitDetectionRenderer());\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/GeometryCollection.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderGeometryCollectionGeometry(replayGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var geometries = geometry.getGeometriesArray();\n  var i, ii;\n\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    var geometryRenderer = GEOMETRY_RENDERERS[geometries[i].getType()];\n    geometryRenderer(replayGroup, geometries[i], style, feature, opt_declutterBuilderGroup);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/LineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderLineStringGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var strokeStyle = style.getStroke();\n\n  if (strokeStyle) {\n    var lineStringReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawLineString(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiLineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderMultiLineStringGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var strokeStyle = style.getStroke();\n\n  if (strokeStyle) {\n    var lineStringReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawMultiLineString(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderMultiPolygonGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var fillStyle = style.getFill();\n  var strokeStyle = style.getStroke();\n\n  if (strokeStyle || fillStyle) {\n    var polygonReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawMultiPolygon(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Point.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderPointGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var imageStyle = style.getImage();\n  var textStyle = style.getText();\n  /** @type {import(\"../render/canvas.js\").DeclutterImageWithText} */\n\n  var declutterImageWithText;\n\n  if (opt_declutterBuilderGroup) {\n    builderGroup = opt_declutterBuilderGroup;\n    declutterImageWithText = imageStyle && textStyle && textStyle.getText() ? {} : undefined;\n  }\n\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n\n    var imageReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, declutterImageWithText);\n    imageReplay.drawPoint(geometry, feature);\n  }\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle, declutterImageWithText);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPoint.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderMultiPointGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var imageStyle = style.getImage();\n  var textStyle = style.getText();\n  /** @type {import(\"../render/canvas.js\").DeclutterImageWithText} */\n\n  var declutterImageWithText;\n\n  if (opt_declutterBuilderGroup) {\n    builderGroup = opt_declutterBuilderGroup;\n    declutterImageWithText = imageStyle && textStyle && textStyle.getText() ? {} : undefined;\n  }\n\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n\n    var imageReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, declutterImageWithText);\n    imageReplay.drawMultiPoint(geometry, feature);\n  }\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle, declutterImageWithText);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Polygon.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderPolygonGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var fillStyle = style.getFill();\n  var strokeStyle = style.getStroke();\n\n  if (fillStyle || strokeStyle) {\n    var polygonReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawPolygon(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/renderer/canvas/VectorLayer\n */\n\n\nimport CanvasBuilderGroup from '../../render/canvas/BuilderGroup.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport ExecutorGroup from '../../render/canvas/ExecutorGroup.js';\nimport ViewHint from '../../ViewHint.js';\nimport { HIT_DETECT_RESOLUTION, createHitDetectionImageData, hitDetect } from '../../render/canvas/hitdetect.js';\nimport { apply, makeInverse, makeScale, toString as transformToString } from '../../transform.js';\nimport { buffer, containsExtent, createEmpty, getWidth, intersects as intersectsExtent, wrapX as wrapExtentX } from '../../extent.js';\nimport { cssOpacity } from '../../css.js';\nimport { defaultOrder as defaultRenderOrder, getTolerance as getRenderTolerance, getSquaredTolerance as getSquaredRenderTolerance, renderFeature } from '../vector.js';\nimport { equals } from '../../array.js';\nimport { fromUserExtent, getTransformFromProjections, getUserProjection, toUserExtent, toUserResolution } from '../../proj.js';\nimport { getUid } from '../../util.js';\nimport { wrapX as wrapCoordinateX } from '../../coordinate.js';\n/**\n * @classdesc\n * Canvas renderer for vector layers.\n * @api\n */\n\nvar CanvasVectorLayerRenderer =\n/** @class */\nfunction (_super) {\n  __extends(CanvasVectorLayerRenderer, _super);\n  /**\n   * @param {import(\"../../layer/BaseVector.js\").default} vectorLayer Vector layer.\n   */\n\n\n  function CanvasVectorLayerRenderer(vectorLayer) {\n    var _this = _super.call(this, vectorLayer) || this;\n    /** @private */\n\n\n    _this.boundHandleStyleImageChange_ = _this.handleStyleImageChange_.bind(_this);\n    /**\n     * @type {boolean}\n     */\n\n    _this.animatingOrInteracting_;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.dirty_ = false;\n    /**\n     * @type {ImageData}\n     */\n\n    _this.hitDetectionImageData_ = null;\n    /**\n     * @type {Array<import(\"../../Feature.js\").default>}\n     */\n\n    _this.renderedFeatures_ = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.renderedRevision_ = -1;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.renderedResolution_ = NaN;\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n    _this.renderedExtent_ = createEmpty();\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n    _this.wrappedRenderedExtent_ = createEmpty();\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.renderedRotation_;\n    /**\n     * @private\n     * @type {import(\"../../coordinate\").Coordinate}\n     */\n\n    _this.renderedCenter_ = null;\n    /**\n     * @private\n     * @type {import(\"../../proj/Projection\").default}\n     */\n\n    _this.renderedProjection_ = null;\n    /**\n     * @private\n     * @type {function(import(\"../../Feature.js\").default, import(\"../../Feature.js\").default): number|null}\n     */\n\n    _this.renderedRenderOrder_ = null;\n    /**\n     * @private\n     * @type {import(\"../../render/canvas/ExecutorGroup\").default}\n     */\n\n    _this.replayGroup_ = null;\n    /**\n     * A new replay group had to be created by `prepareFrame()`\n     * @type {boolean}\n     */\n\n    _this.replayGroupChanged = true;\n    /**\n     * @type {import(\"../../render/canvas/ExecutorGroup\").default}\n     */\n\n    _this.declutterExecutorGroup = null;\n    /**\n     * Clipping to be performed by `renderFrame()`\n     * @type {boolean}\n     */\n\n    _this.clipping = true;\n    return _this;\n  }\n  /**\n   * @param {ExecutorGroup} executorGroup Executor group.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"rbush\").default} [opt_declutterTree] Declutter tree.\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.renderWorlds = function (executorGroup, frameState, opt_declutterTree) {\n    var extent = frameState.extent;\n    var viewState = frameState.viewState;\n    var center = viewState.center;\n    var resolution = viewState.resolution;\n    var projection = viewState.projection;\n    var rotation = viewState.rotation;\n    var projectionExtent = projection.getExtent();\n    var vectorSource = this.getLayer().getSource();\n    var pixelRatio = frameState.pixelRatio;\n    var viewHints = frameState.viewHints;\n    var snapToPixel = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n    var context = this.context;\n    var width = Math.round(frameState.size[0] * pixelRatio);\n    var height = Math.round(frameState.size[1] * pixelRatio);\n    var multiWorld = vectorSource.getWrapX() && projection.canWrapX();\n    var worldWidth = multiWorld ? getWidth(projectionExtent) : null;\n    var endWorld = multiWorld ? Math.ceil((extent[2] - projectionExtent[2]) / worldWidth) + 1 : 1;\n    var world = multiWorld ? Math.floor((extent[0] - projectionExtent[0]) / worldWidth) : 0;\n\n    do {\n      var transform = this.getRenderTransform(center, resolution, rotation, pixelRatio, width, height, world * worldWidth);\n      executorGroup.execute(context, 1, transform, rotation, snapToPixel, undefined, opt_declutterTree);\n    } while (++world < endWorld);\n  };\n  /**\n   * Render declutter items for this layer\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.renderDeclutter = function (frameState) {\n    if (this.declutterExecutorGroup) {\n      this.renderWorlds(this.declutterExecutorGroup, frameState, frameState.declutterTree);\n    }\n  };\n  /**\n   * Render the layer.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {HTMLElement} target Target that may be used to render content to.\n   * @return {HTMLElement} The rendered element.\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.renderFrame = function (frameState, target) {\n    var pixelRatio = frameState.pixelRatio;\n    var layerState = frameState.layerStatesArray[frameState.layerIndex]; // set forward and inverse pixel transforms\n\n    makeScale(this.pixelTransform, 1 / pixelRatio, 1 / pixelRatio);\n    makeInverse(this.inversePixelTransform, this.pixelTransform);\n    var canvasTransform = transformToString(this.pixelTransform);\n    this.useContainer(target, canvasTransform, layerState.opacity, this.getBackground(frameState));\n    var context = this.context;\n    var canvas = context.canvas;\n    var replayGroup = this.replayGroup_;\n    var declutterExecutorGroup = this.declutterExecutorGroup;\n\n    if ((!replayGroup || replayGroup.isEmpty()) && (!declutterExecutorGroup || declutterExecutorGroup.isEmpty())) {\n      return null;\n    } // resize and clear\n\n\n    var width = Math.round(frameState.size[0] * pixelRatio);\n    var height = Math.round(frameState.size[1] * pixelRatio);\n\n    if (canvas.width != width || canvas.height != height) {\n      canvas.width = width;\n      canvas.height = height;\n\n      if (canvas.style.transform !== canvasTransform) {\n        canvas.style.transform = canvasTransform;\n      }\n    } else if (!this.containerReused) {\n      context.clearRect(0, 0, width, height);\n    }\n\n    this.preRender(context, frameState);\n    var viewState = frameState.viewState;\n    var projection = viewState.projection; // clipped rendering if layer extent is set\n\n    var clipped = false;\n    var render = true;\n\n    if (layerState.extent && this.clipping) {\n      var layerExtent = fromUserExtent(layerState.extent, projection);\n      render = intersectsExtent(layerExtent, frameState.extent);\n      clipped = render && !containsExtent(layerExtent, frameState.extent);\n\n      if (clipped) {\n        this.clipUnrotated(context, frameState, layerExtent);\n      }\n    }\n\n    if (render) {\n      this.renderWorlds(replayGroup, frameState);\n    }\n\n    if (clipped) {\n      context.restore();\n    }\n\n    this.postRender(context, frameState);\n    var opacity = cssOpacity(layerState.opacity);\n    var container = this.container;\n\n    if (opacity !== container.style.opacity) {\n      container.style.opacity = opacity;\n    }\n\n    if (this.renderedRotation_ !== viewState.rotation) {\n      this.renderedRotation_ = viewState.rotation;\n      this.hitDetectionImageData_ = null;\n    }\n\n    return this.container;\n  };\n  /**\n   * Asynchronous layer level hit detection.\n   * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n   * @return {Promise<Array<import(\"../../Feature\").default>>} Promise that resolves with an array of features.\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.getFeatures = function (pixel) {\n    return new Promise(\n    /**\n     * @param {function(Array<import(\"../../Feature\").default|import(\"../../render/Feature\").default>): void} resolve Resolver function.\n     * @this {CanvasVectorLayerRenderer}\n     */\n    function (resolve) {\n      if (!this.hitDetectionImageData_ && !this.animatingOrInteracting_) {\n        var size = [this.context.canvas.width, this.context.canvas.height];\n        apply(this.pixelTransform, size);\n        var center = this.renderedCenter_;\n        var resolution = this.renderedResolution_;\n        var rotation = this.renderedRotation_;\n        var projection = this.renderedProjection_;\n        var extent = this.wrappedRenderedExtent_;\n        var layer = this.getLayer();\n        var transforms = [];\n        var width = size[0] * HIT_DETECT_RESOLUTION;\n        var height = size[1] * HIT_DETECT_RESOLUTION;\n        transforms.push(this.getRenderTransform(center, resolution, rotation, HIT_DETECT_RESOLUTION, width, height, 0).slice());\n        var source = layer.getSource();\n        var projectionExtent = projection.getExtent();\n\n        if (source.getWrapX() && projection.canWrapX() && !containsExtent(projectionExtent, extent)) {\n          var startX = extent[0];\n          var worldWidth = getWidth(projectionExtent);\n          var world = 0;\n          var offsetX = void 0;\n\n          while (startX < projectionExtent[0]) {\n            --world;\n            offsetX = worldWidth * world;\n            transforms.push(this.getRenderTransform(center, resolution, rotation, HIT_DETECT_RESOLUTION, width, height, offsetX).slice());\n            startX += worldWidth;\n          }\n\n          world = 0;\n          startX = extent[2];\n\n          while (startX > projectionExtent[2]) {\n            ++world;\n            offsetX = worldWidth * world;\n            transforms.push(this.getRenderTransform(center, resolution, rotation, HIT_DETECT_RESOLUTION, width, height, offsetX).slice());\n            startX -= worldWidth;\n          }\n        }\n\n        this.hitDetectionImageData_ = createHitDetectionImageData(size, transforms, this.renderedFeatures_, layer.getStyleFunction(), extent, resolution, rotation);\n      }\n\n      resolve(hitDetect(pixel, this.renderedFeatures_, this.hitDetectionImageData_));\n    }.bind(this));\n  };\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {import(\"../vector.js\").FeatureCallback<T>} callback Feature callback.\n   * @param {Array<import(\"../Map.js\").HitMatch<T>>} matches The hit detected matches with tolerance.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, matches) {\n    var _this = this;\n\n    if (!this.replayGroup_) {\n      return undefined;\n    }\n\n    var resolution = frameState.viewState.resolution;\n    var rotation = frameState.viewState.rotation;\n    var layer = this.getLayer();\n    /** @type {!Object<string, import(\"../Map.js\").HitMatch<T>|true>} */\n\n    var features = {};\n    /**\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     * @param {import(\"../../geom/SimpleGeometry.js\").default} geometry Geometry.\n     * @param {number} distanceSq The squared distance to the click position\n     * @return {T|undefined} Callback result.\n     */\n\n    var featureCallback = function featureCallback(feature, geometry, distanceSq) {\n      var key = getUid(feature);\n      var match = features[key];\n\n      if (!match) {\n        if (distanceSq === 0) {\n          features[key] = true;\n          return callback(feature, layer, geometry);\n        }\n\n        matches.push(features[key] = {\n          feature: feature,\n          layer: layer,\n          geometry: geometry,\n          distanceSq: distanceSq,\n          callback: callback\n        });\n      } else if (match !== true && distanceSq < match.distanceSq) {\n        if (distanceSq === 0) {\n          features[key] = true;\n          matches.splice(matches.lastIndexOf(match), 1);\n          return callback(feature, layer, geometry);\n        }\n\n        match.geometry = geometry;\n        match.distanceSq = distanceSq;\n      }\n\n      return undefined;\n    };\n\n    var result;\n    var executorGroups = [this.replayGroup_];\n\n    if (this.declutterExecutorGroup) {\n      executorGroups.push(this.declutterExecutorGroup);\n    }\n\n    executorGroups.some(function (executorGroup) {\n      return result = executorGroup.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, featureCallback, executorGroup === _this.declutterExecutorGroup && frameState.declutterTree ? frameState.declutterTree.all().map(function (item) {\n        return item.value;\n      }) : null);\n    });\n    return result;\n  };\n  /**\n   * Perform action necessary to get the layer rendered after new fonts have loaded\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.handleFontsChanged = function () {\n    var layer = this.getLayer();\n\n    if (layer.getVisible() && this.replayGroup_) {\n      layer.changed();\n    }\n  };\n  /**\n   * Handle changes in image style state.\n   * @param {import(\"../../events/Event.js\").default} event Image style change event.\n   * @private\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.handleStyleImageChange_ = function (event) {\n    this.renderIfReadyAndVisible();\n  };\n  /**\n   * Determine whether render should be called.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.prepareFrame = function (frameState) {\n    var vectorLayer = this.getLayer();\n    var vectorSource = vectorLayer.getSource();\n\n    if (!vectorSource) {\n      return false;\n    }\n\n    var animating = frameState.viewHints[ViewHint.ANIMATING];\n    var interacting = frameState.viewHints[ViewHint.INTERACTING];\n    var updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n    var updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n\n    if (!this.dirty_ && !updateWhileAnimating && animating || !updateWhileInteracting && interacting) {\n      this.animatingOrInteracting_ = true;\n      return true;\n    }\n\n    this.animatingOrInteracting_ = false;\n    var frameStateExtent = frameState.extent;\n    var viewState = frameState.viewState;\n    var projection = viewState.projection;\n    var resolution = viewState.resolution;\n    var pixelRatio = frameState.pixelRatio;\n    var vectorLayerRevision = vectorLayer.getRevision();\n    var vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n    var vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n\n    if (vectorLayerRenderOrder === undefined) {\n      vectorLayerRenderOrder = defaultRenderOrder;\n    }\n\n    var center = viewState.center.slice();\n    var extent = buffer(frameStateExtent, vectorLayerRenderBuffer * resolution);\n    var renderedExtent = extent.slice();\n    var loadExtents = [extent.slice()];\n    var projectionExtent = projection.getExtent();\n\n    if (vectorSource.getWrapX() && projection.canWrapX() && !containsExtent(projectionExtent, frameState.extent)) {\n      // For the replay group, we need an extent that intersects the real world\n      // (-180° to +180°). To support geometries in a coordinate range from -540°\n      // to +540°, we add at least 1 world width on each side of the projection\n      // extent. If the viewport is wider than the world, we need to add half of\n      // the viewport width to make sure we cover the whole viewport.\n      var worldWidth = getWidth(projectionExtent);\n      var gutter = Math.max(getWidth(extent) / 2, worldWidth);\n      extent[0] = projectionExtent[0] - gutter;\n      extent[2] = projectionExtent[2] + gutter;\n      wrapCoordinateX(center, projection);\n      var loadExtent = wrapExtentX(loadExtents[0], projection); // If the extent crosses the date line, we load data for both edges of the worlds\n\n      if (loadExtent[0] < projectionExtent[0] && loadExtent[2] < projectionExtent[2]) {\n        loadExtents.push([loadExtent[0] + worldWidth, loadExtent[1], loadExtent[2] + worldWidth, loadExtent[3]]);\n      } else if (loadExtent[0] > projectionExtent[0] && loadExtent[2] > projectionExtent[2]) {\n        loadExtents.push([loadExtent[0] - worldWidth, loadExtent[1], loadExtent[2] - worldWidth, loadExtent[3]]);\n      }\n    }\n\n    if (!this.dirty_ && this.renderedResolution_ == resolution && this.renderedRevision_ == vectorLayerRevision && this.renderedRenderOrder_ == vectorLayerRenderOrder && containsExtent(this.wrappedRenderedExtent_, extent)) {\n      if (!equals(this.renderedExtent_, renderedExtent)) {\n        this.hitDetectionImageData_ = null;\n        this.renderedExtent_ = renderedExtent;\n      }\n\n      this.renderedCenter_ = center;\n      this.replayGroupChanged = false;\n      return true;\n    }\n\n    this.replayGroup_ = null;\n    this.dirty_ = false;\n    var replayGroup = new CanvasBuilderGroup(getRenderTolerance(resolution, pixelRatio), extent, resolution, pixelRatio);\n    var declutterBuilderGroup;\n\n    if (this.getLayer().getDeclutter()) {\n      declutterBuilderGroup = new CanvasBuilderGroup(getRenderTolerance(resolution, pixelRatio), extent, resolution, pixelRatio);\n    }\n\n    var userProjection = getUserProjection();\n    var userTransform;\n\n    if (userProjection) {\n      for (var i = 0, ii = loadExtents.length; i < ii; ++i) {\n        var extent_1 = loadExtents[i];\n        var userExtent_1 = toUserExtent(extent_1, projection);\n        vectorSource.loadFeatures(userExtent_1, toUserResolution(resolution, projection), userProjection);\n      }\n\n      userTransform = getTransformFromProjections(userProjection, projection);\n    } else {\n      for (var i = 0, ii = loadExtents.length; i < ii; ++i) {\n        vectorSource.loadFeatures(loadExtents[i], resolution, projection);\n      }\n    }\n\n    var squaredTolerance = getSquaredRenderTolerance(resolution, pixelRatio);\n\n    var render =\n    /**\n     * @param {import(\"../../Feature.js\").default} feature Feature.\n     * @this {CanvasVectorLayerRenderer}\n     */\n    function (feature) {\n      var styles;\n      var styleFunction = feature.getStyleFunction() || vectorLayer.getStyleFunction();\n\n      if (styleFunction) {\n        styles = styleFunction(feature, resolution);\n      }\n\n      if (styles) {\n        var dirty = this.renderFeature(feature, squaredTolerance, styles, replayGroup, userTransform, declutterBuilderGroup);\n        this.dirty_ = this.dirty_ || dirty;\n      }\n    }.bind(this);\n\n    var userExtent = toUserExtent(extent, projection);\n    /** @type {Array<import(\"../../Feature.js\").default>} */\n\n    var features = vectorSource.getFeaturesInExtent(userExtent);\n\n    if (vectorLayerRenderOrder) {\n      features.sort(vectorLayerRenderOrder);\n    }\n\n    for (var i = 0, ii = features.length; i < ii; ++i) {\n      render(features[i]);\n    }\n\n    this.renderedFeatures_ = features;\n    var replayGroupInstructions = replayGroup.finish();\n    var executorGroup = new ExecutorGroup(extent, resolution, pixelRatio, vectorSource.getOverlaps(), replayGroupInstructions, vectorLayer.getRenderBuffer());\n\n    if (declutterBuilderGroup) {\n      this.declutterExecutorGroup = new ExecutorGroup(extent, resolution, pixelRatio, vectorSource.getOverlaps(), declutterBuilderGroup.finish(), vectorLayer.getRenderBuffer());\n    }\n\n    this.renderedResolution_ = resolution;\n    this.renderedRevision_ = vectorLayerRevision;\n    this.renderedRenderOrder_ = vectorLayerRenderOrder;\n    this.renderedExtent_ = renderedExtent;\n    this.wrappedRenderedExtent_ = extent;\n    this.renderedCenter_ = center;\n    this.renderedProjection_ = projection;\n    this.replayGroup_ = executorGroup;\n    this.hitDetectionImageData_ = null;\n    this.replayGroupChanged = true;\n    return true;\n  };\n  /**\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   * @param {number} squaredTolerance Squared render tolerance.\n   * @param {import(\"../../style/Style.js\").default|Array<import(\"../../style/Style.js\").default>} styles The style or array of styles.\n   * @param {import(\"../../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n   * @param {import(\"../../proj.js\").TransformFunction} [opt_transform] Transform from user to view projection.\n   * @param {import(\"../../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n   * @return {boolean} `true` if an image is loading.\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.renderFeature = function (feature, squaredTolerance, styles, builderGroup, opt_transform, opt_declutterBuilderGroup) {\n    if (!styles) {\n      return false;\n    }\n\n    var loading = false;\n\n    if (Array.isArray(styles)) {\n      for (var i = 0, ii = styles.length; i < ii; ++i) {\n        loading = renderFeature(builderGroup, feature, styles[i], squaredTolerance, this.boundHandleStyleImageChange_, opt_transform, opt_declutterBuilderGroup) || loading;\n      }\n    } else {\n      loading = renderFeature(builderGroup, feature, styles, squaredTolerance, this.boundHandleStyleImageChange_, opt_transform, opt_declutterBuilderGroup);\n    }\n\n    return loading;\n  };\n\n  return CanvasVectorLayerRenderer;\n}(CanvasLayerRenderer);\n\nexport default CanvasVectorLayerRenderer;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/layer/Vector\n */\n\n\nimport BaseVectorLayer from './BaseVector.js';\nimport CanvasVectorLayerRenderer from '../renderer/canvas/VectorLayer.js';\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default} VectorSourceType\n * @extends {BaseVectorLayer<VectorSourceType, CanvasVectorLayerRenderer>}\n * @api\n */\n\nvar VectorLayer =\n/** @class */\nfunction (_super) {\n  __extends(VectorLayer, _super);\n  /**\n   * @param {import(\"./BaseVector.js\").Options<VectorSourceType>} [opt_options] Options.\n   */\n\n\n  function VectorLayer(opt_options) {\n    return _super.call(this, opt_options) || this;\n  }\n\n  VectorLayer.prototype.createRenderer = function () {\n    return new CanvasVectorLayerRenderer(this);\n  };\n\n  return VectorLayer;\n}(BaseVectorLayer);\n\nexport default VectorLayer;","/**\n * @module ol/structs/RBush\n */\nimport RBush_ from 'rbush';\nimport { createOrUpdate, equals } from '../extent.js';\nimport { getUid } from '../util.js';\nimport { isEmpty } from '../obj.js';\n/**\n * @typedef {Object} Entry\n * @property {number} minX MinX.\n * @property {number} minY MinY.\n * @property {number} maxX MaxX.\n * @property {number} maxY MaxY.\n * @property {Object} [value] Value.\n */\n\n/**\n * @classdesc\n * Wrapper around the RBush by Vladimir Agafonkin.\n * See https://github.com/mourner/rbush.\n *\n * @template T\n */\n\nvar RBush =\n/** @class */\nfunction () {\n  /**\n   * @param {number} [opt_maxEntries] Max entries.\n   */\n  function RBush(opt_maxEntries) {\n    /**\n     * @private\n     */\n    this.rbush_ = new RBush_(opt_maxEntries);\n    /**\n     * A mapping between the objects added to this rbush wrapper\n     * and the objects that are actually added to the internal rbush.\n     * @private\n     * @type {Object<string, Entry>}\n     */\n\n    this.items_ = {};\n  }\n  /**\n   * Insert a value into the RBush.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {T} value Value.\n   */\n\n\n  RBush.prototype.insert = function (extent, value) {\n    /** @type {Entry} */\n    var item = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3],\n      value: value\n    };\n    this.rbush_.insert(item);\n    this.items_[getUid(value)] = item;\n  };\n  /**\n   * Bulk-insert values into the RBush.\n   * @param {Array<import(\"../extent.js\").Extent>} extents Extents.\n   * @param {Array<T>} values Values.\n   */\n\n\n  RBush.prototype.load = function (extents, values) {\n    var items = new Array(values.length);\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var extent = extents[i];\n      var value = values[i];\n      /** @type {Entry} */\n\n      var item = {\n        minX: extent[0],\n        minY: extent[1],\n        maxX: extent[2],\n        maxY: extent[3],\n        value: value\n      };\n      items[i] = item;\n      this.items_[getUid(value)] = item;\n    }\n\n    this.rbush_.load(items);\n  };\n  /**\n   * Remove a value from the RBush.\n   * @param {T} value Value.\n   * @return {boolean} Removed.\n   */\n\n\n  RBush.prototype.remove = function (value) {\n    var uid = getUid(value); // get the object in which the value was wrapped when adding to the\n    // internal rbush. then use that object to do the removal.\n\n    var item = this.items_[uid];\n    delete this.items_[uid];\n    return this.rbush_.remove(item) !== null;\n  };\n  /**\n   * Update the extent of a value in the RBush.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {T} value Value.\n   */\n\n\n  RBush.prototype.update = function (extent, value) {\n    var item = this.items_[getUid(value)];\n    var bbox = [item.minX, item.minY, item.maxX, item.maxY];\n\n    if (!equals(bbox, extent)) {\n      this.remove(value);\n      this.insert(extent, value);\n    }\n  };\n  /**\n   * Return all values in the RBush.\n   * @return {Array<T>} All.\n   */\n\n\n  RBush.prototype.getAll = function () {\n    var items = this.rbush_.all();\n    return items.map(function (item) {\n      return item.value;\n    });\n  };\n  /**\n   * Return all values in the given extent.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {Array<T>} All in extent.\n   */\n\n\n  RBush.prototype.getInExtent = function (extent) {\n    /** @type {Entry} */\n    var bbox = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3]\n    };\n    var items = this.rbush_.search(bbox);\n    return items.map(function (item) {\n      return item.value;\n    });\n  };\n  /**\n   * Calls a callback function with each value in the tree.\n   * If the callback returns a truthy value, this value is returned without\n   * checking the rest of the tree.\n   * @param {function(T): *} callback Callback.\n   * @return {*} Callback return value.\n   */\n\n\n  RBush.prototype.forEach = function (callback) {\n    return this.forEach_(this.getAll(), callback);\n  };\n  /**\n   * Calls a callback function with each value in the provided extent.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(T): *} callback Callback.\n   * @return {*} Callback return value.\n   */\n\n\n  RBush.prototype.forEachInExtent = function (extent, callback) {\n    return this.forEach_(this.getInExtent(extent), callback);\n  };\n  /**\n   * @param {Array<T>} values Values.\n   * @param {function(T): *} callback Callback.\n   * @private\n   * @return {*} Callback return value.\n   */\n\n\n  RBush.prototype.forEach_ = function (values, callback) {\n    var result;\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      result = callback(values[i]);\n\n      if (result) {\n        return result;\n      }\n    }\n\n    return result;\n  };\n  /**\n   * @return {boolean} Is empty.\n   */\n\n\n  RBush.prototype.isEmpty = function () {\n    return isEmpty(this.items_);\n  };\n  /**\n   * Remove all values from the RBush.\n   */\n\n\n  RBush.prototype.clear = function () {\n    this.rbush_.clear();\n    this.items_ = {};\n  };\n  /**\n   * @param {import(\"../extent.js\").Extent} [opt_extent] Extent.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   */\n\n\n  RBush.prototype.getExtent = function (opt_extent) {\n    var data = this.rbush_.toJSON();\n    return createOrUpdate(data.minX, data.minY, data.maxX, data.maxY, opt_extent);\n  };\n  /**\n   * @param {RBush} rbush R-Tree.\n   */\n\n\n  RBush.prototype.concat = function (rbush) {\n    this.rbush_.load(rbush.rbush_.all());\n\n    for (var i in rbush.items_) {\n      this.items_[i] = rbush.items_[i];\n    }\n  };\n\n  return RBush;\n}();\n\nexport default RBush;","/**\n * @module ol/source/VectorEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a feature is added to the source.\n   * @event module:ol/source/Vector.VectorSourceEvent#addfeature\n   * @api\n   */\n  ADDFEATURE: 'addfeature',\n\n  /**\n   * Triggered when a feature is updated.\n   * @event module:ol/source/Vector.VectorSourceEvent#changefeature\n   * @api\n   */\n  CHANGEFEATURE: 'changefeature',\n\n  /**\n   * Triggered when the clear method is called on the source.\n   * @event module:ol/source/Vector.VectorSourceEvent#clear\n   * @api\n   */\n  CLEAR: 'clear',\n\n  /**\n   * Triggered when a feature is removed from the source.\n   * See {@link module:ol/source/Vector~VectorSource#clear source.clear()} for exceptions.\n   * @event module:ol/source/Vector.VectorSourceEvent#removefeature\n   * @api\n   */\n  REMOVEFEATURE: 'removefeature',\n\n  /**\n   * Triggered when features starts loading.\n   * @event module:ol/source/Vector.VectorSourceEvent#featuresloadstart\n   * @api\n   */\n  FEATURESLOADSTART: 'featuresloadstart',\n\n  /**\n   * Triggered when features finishes loading.\n   * @event module:ol/source/Vector.VectorSourceEvent#featuresloadend\n   * @api\n   */\n  FEATURESLOADEND: 'featuresloadend',\n\n  /**\n   * Triggered if feature loading results in an error.\n   * @event module:ol/source/Vector.VectorSourceEvent#featuresloaderror\n   * @api\n   */\n  FEATURESLOADERROR: 'featuresloaderror'\n};\n/**\n * @typedef {'addfeature'|'changefeature'|'clear'|'removefeature'|'featuresloadstart'|'featuresloadend'|'featuresloaderror'} VectorSourceEventTypes\n */","/**\n * @module ol/loadingstrategy\n */\nimport { fromUserExtent, fromUserResolution, toUserExtent } from './proj.js';\n/**\n * Strategy function for loading all features with a single request.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\n\nexport function all(extent, resolution) {\n  return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\n\nexport function bbox(extent, resolution) {\n  return [extent];\n}\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {function(import(\"./extent.js\").Extent, number, import(\"./proj.js\").Projection): Array<import(\"./extent.js\").Extent>} Loading strategy.\n * @api\n */\n\nexport function tile(tileGrid) {\n  return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./proj.js\").Projection} projection Projection.\n     * @return {Array<import(\"./extent.js\").Extent>} Extents.\n     */\n    function (extent, resolution, projection) {\n      var z = tileGrid.getZForResolution(fromUserResolution(resolution, projection));\n      var tileRange = tileGrid.getTileRangeForExtentAndZ(fromUserExtent(extent, projection), z);\n      /** @type {Array<import(\"./extent.js\").Extent>} */\n\n      var extents = [];\n      /** @type {import(\"./tilecoord.js\").TileCoord} */\n\n      var tileCoord = [z, 0, 0];\n\n      for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX; ++tileCoord[1]) {\n        for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY; ++tileCoord[2]) {\n          extents.push(toUserExtent(tileGrid.getTileCoordExtent(tileCoord), projection));\n        }\n      }\n\n      return extents;\n    }\n  );\n}","/**\n * @module ol/featureloader\n */\nimport FormatType from './format/FormatType.js';\nimport { VOID } from './functions.js';\n/**\n *\n * @type {boolean}\n * @private\n */\n\nvar withCredentials = false;\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * load features.\n *\n * This function takes up to 5 arguments. These are an {@link module:ol/extent~Extent} representing\n * the area to be loaded, a `{number}` representing the resolution (map units per pixel), an\n * {@link module:ol/proj/Projection} for the projection, an optional success callback that should get\n * the loaded features passed as an argument and an optional failure callback with no arguments. If\n * the callbacks are not used, the corresponding vector source will not fire `'featuresloadend'` and\n * `'featuresloaderror'` events. `this` within the function is bound to the\n * {@link module:ol/source/Vector} it's called from.\n *\n * The function is responsible for loading the features and adding them to the\n * source.\n * @typedef {function(this:(import(\"./source/Vector\").default|import(\"./VectorTile.js\").default),\n *           import(\"./extent.js\").Extent,\n *           number,\n *           import(\"./proj/Projection.js\").default,\n *           function(Array<import(\"./Feature.js\").default>): void=,\n *           function(): void=): void} FeatureLoader\n * @api\n */\n\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * get the url to load features from.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area\n * to be loaded, a `{number}` representing the resolution (map units per pixel)\n * and an {@link module:ol/proj/Projection} for the projection  as\n * arguments and returns a `{string}` representing the URL.\n * @typedef {function(import(\"./extent.js\").Extent, number, import(\"./proj/Projection.js\").default): string} FeatureUrlFunction\n * @api\n */\n\n/**\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @param {function(Array<import(\"./Feature.js\").default>, import(\"./proj/Projection.js\").default): void} success Success\n *      Function called with the loaded features and optionally with the data projection.\n * @param {function(): void} failure Failure\n *      Function called when loading failed.\n */\n\nexport function loadFeaturesXhr(url, format, extent, resolution, projection, success, failure) {\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', typeof url === 'function' ? url(extent, resolution, projection) : url, true);\n\n  if (format.getType() == FormatType.ARRAY_BUFFER) {\n    xhr.responseType = 'arraybuffer';\n  }\n\n  xhr.withCredentials = withCredentials;\n  /**\n   * @param {Event} event Event.\n   * @private\n   */\n\n  xhr.onload = function (event) {\n    // status will be 0 for file:// urls\n    if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {\n      var type = format.getType();\n      /** @type {Document|Node|Object|string|undefined} */\n\n      var source = void 0;\n\n      if (type == FormatType.JSON || type == FormatType.TEXT) {\n        source = xhr.responseText;\n      } else if (type == FormatType.XML) {\n        source = xhr.responseXML;\n\n        if (!source) {\n          source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n        }\n      } else if (type == FormatType.ARRAY_BUFFER) {\n        source =\n        /** @type {ArrayBuffer} */\n        xhr.response;\n      }\n\n      if (source) {\n        success(\n        /** @type {Array<import(\"./Feature.js\").default>} */\n        format.readFeatures(source, {\n          extent: extent,\n          featureProjection: projection\n        }), format.readProjection(source));\n      } else {\n        failure();\n      }\n    } else {\n      failure();\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  xhr.onerror = failure;\n  xhr.send();\n}\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @return {FeatureLoader} The feature loader.\n * @api\n */\n\nexport function xhr(url, format) {\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {import(\"./proj/Projection.js\").default} projection Projection.\n   * @param {function(Array<import(\"./Feature.js\").default>): void} [success] Success\n   *      Function called when loading succeeded.\n   * @param {function(): void} [failure] Failure\n   *      Function called when loading failed.\n   * @this {import(\"./source/Vector\").default}\n   */\n  return function (extent, resolution, projection, success, failure) {\n    var source =\n    /** @type {import(\"./source/Vector\").default} */\n    this;\n    loadFeaturesXhr(url, format, extent, resolution, projection,\n    /**\n     * @param {Array<import(\"./Feature.js\").default>} features The loaded features.\n     * @param {import(\"./proj/Projection.js\").default} dataProjection Data\n     * projection.\n     */\n    function (features, dataProjection) {\n      source.addFeatures(features);\n\n      if (success !== undefined) {\n        success(features);\n      }\n    },\n    /* FIXME handle error */\n    failure ? failure : VOID);\n  };\n}\n/**\n * Setter for the withCredentials configuration for the XHR.\n *\n * @param {boolean} xhrWithCredentials The value of withCredentials to set.\n * Compare https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/\n * @api\n */\n\nexport function setWithCredentials(xhrWithCredentials) {\n  withCredentials = xhrWithCredentials;\n}","/**\n * @module ol/source/Vector\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport RBush from '../structs/RBush.js';\nimport Source from './Source.js';\nimport SourceState from './State.js';\nimport VectorEventType from './VectorEventType.js';\nimport { TRUE, VOID } from '../functions.js';\nimport { all as allStrategy } from '../loadingstrategy.js';\nimport { assert } from '../asserts.js';\nimport { containsExtent, equals } from '../extent.js';\nimport { extend } from '../array.js';\nimport { getUid } from '../util.js';\nimport { getValues, isEmpty } from '../obj.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport { xhr } from '../featureloader.js';\n/**\n * A function that takes an {@link module:ol/extent~Extent} and a resolution as arguments, and\n * returns an array of {@link module:ol/extent~Extent} with the extents to load. Usually this\n * is one of the standard {@link module:ol/loadingstrategy} strategies.\n *\n * @typedef {function(import(\"../extent.js\").Extent, number, import(\"../proj/Projection.js\").default): Array<import(\"../extent.js\").Extent>} LoadingStrategy\n * @api\n */\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Vector} instances are instances of this\n * type.\n * @template {import(\"../geom/Geometry.js\").default} Geometry\n */\n\nvar VectorSourceEvent =\n/** @class */\nfunction (_super) {\n  __extends(VectorSourceEvent, _super);\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Feature.js\").default<Geometry>} [opt_feature] Feature.\n   * @param {Array<import(\"../Feature.js\").default<Geometry>>} [opt_features] Features.\n   */\n\n\n  function VectorSourceEvent(type, opt_feature, opt_features) {\n    var _this = _super.call(this, type) || this;\n    /**\n     * The added or removed feature for the `ADDFEATURE` and `REMOVEFEATURE` events, `undefined` otherwise.\n     * @type {import(\"../Feature.js\").default<Geometry>|undefined}\n     * @api\n     */\n\n\n    _this.feature = opt_feature;\n    /**\n     * The loaded features for the `FEATURESLOADED` event, `undefined` otherwise.\n     * @type {Array<import(\"../Feature.js\").default<Geometry>>|undefined}\n     * @api\n     */\n\n    _this.features = opt_features;\n    return _this;\n  }\n\n  return VectorSourceEvent;\n}(Event);\n\nexport { VectorSourceEvent };\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./VectorEventType\").VectorSourceEventTypes, VectorSourceEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     import(\"./VectorEventType\").VectorSourceEventTypes, Return>} VectorSourceOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {Array<import(\"../Feature.js\").default>|Collection<import(\"../Feature.js\").default>} [features]\n * Features. If provided as {@link module:ol/Collection}, the features in the source\n * and the collection will stay in sync.\n * @property {import(\"../format/Feature.js\").default} [format] The feature format used by the XHR\n * feature loader when `url` is set. Required if `url` is set, otherwise ignored.\n * @property {import(\"../featureloader.js\").FeatureLoader} [loader]\n * The loader function used to load features, from a remote source for example.\n * If this is not set and `url` is set, the source will create and use an XHR\n * feature loader. The `'featuresloadend'` and `'featuresloaderror'` events\n * will only fire if the `success` and `failure` callbacks are used.\n *\n * Example:\n *\n * ```js\n * import {Vector} from 'ol/source';\n * import {GeoJSON} from 'ol/format';\n * import {bbox} from 'ol/loadingstrategy';\n *\n * var vectorSource = new Vector({\n *   format: new GeoJSON(),\n *   loader: function(extent, resolution, projection, success, failure) {\n *      var proj = projection.getCode();\n *      var url = 'https://ahocevar.com/geoserver/wfs?service=WFS&' +\n *          'version=1.1.0&request=GetFeature&typename=osm:water_areas&' +\n *          'outputFormat=application/json&srsname=' + proj + '&' +\n *          'bbox=' + extent.join(',') + ',' + proj;\n *      var xhr = new XMLHttpRequest();\n *      xhr.open('GET', url);\n *      var onError = function() {\n *        vectorSource.removeLoadedExtent(extent);\n *        failure();\n *      }\n *      xhr.onerror = onError;\n *      xhr.onload = function() {\n *        if (xhr.status == 200) {\n *          var features = vectorSource.getFormat().readFeatures(xhr.responseText);\n *          vectorSource.addFeatures(features);\n *          success(features);\n *        } else {\n *          onError();\n *        }\n *      }\n *      xhr.send();\n *    },\n *    strategy: bbox\n *  });\n * ```\n * @property {boolean} [overlaps=true] This source may have overlapping geometries.\n * Setting this to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {LoadingStrategy} [strategy] The loading strategy to use.\n * By default an {@link module:ol/loadingstrategy.all}\n * strategy is used, a one-off strategy which loads all features at once.\n * @property {string|import(\"../featureloader.js\").FeatureUrlFunction} [url]\n * Setting this option instructs the source to load features using an XHR loader\n * (see {@link module:ol/featureloader.xhr}). Use a `string` and an\n * {@link module:ol/loadingstrategy.all} for a one-off download of all features from\n * the given URL. Use a {@link module:ol/featureloader~FeatureUrlFunction} to generate the url with\n * other loading strategies.\n * Requires `format` to be set as well.\n * When default XHR feature loader is provided, the features will\n * be transformed from the data projection to the view projection\n * during parsing. If your remote data source does not advertise its projection\n * properly, this transformation will be incorrect. For some formats, the\n * default projection (usually EPSG:4326) can be overridden by setting the\n * dataProjection constructor option on the format.\n * Note that if a source contains non-feature data, such as a GeoJSON geometry\n * or a KML NetworkLink, these will be ignored. Use a custom loader to load these.\n * @property {boolean} [useSpatialIndex=true]\n * By default, an RTree is used as spatial index. When features are removed and\n * added frequently, and the total number of features is low, setting this to\n * `false` may improve performance.\n *\n * Note that\n * {@link module:ol/source/Vector~VectorSource#getFeaturesInExtent},\n * {@link module:ol/source/Vector~VectorSource#getClosestFeatureToCoordinate} and\n * {@link module:ol/source/Vector~VectorSource#getExtent} cannot be used when `useSpatialIndex` is\n * set to `false`, and {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent} will loop\n * through all features.\n *\n * When set to `false`, the features will be maintained in an\n * {@link module:ol/Collection}, which can be retrieved through\n * {@link module:ol/source/Vector~VectorSource#getFeaturesCollection}.\n * @property {boolean} [wrapX=true] Wrap the world horizontally. For vector editing across the\n * -180° and 180° meridians to work properly, this should be set to `false`. The\n * resulting geometry coordinates will then exceed the world bounds.\n */\n\n/**\n * @classdesc\n * Provides a source of features for vector layers. Vector features provided\n * by this source are suitable for editing. See {@link module:ol/source/VectorTile~VectorTile} for\n * vector data that is optimized for rendering.\n *\n * @fires VectorSourceEvent\n * @api\n * @template {import(\"../geom/Geometry.js\").default} Geometry\n */\n\nvar VectorSource =\n/** @class */\nfunction (_super) {\n  __extends(VectorSource, _super);\n  /**\n   * @param {Options} [opt_options] Vector source options.\n   */\n\n\n  function VectorSource(opt_options) {\n    var _this = this;\n\n    var options = opt_options || {};\n    _this = _super.call(this, {\n      attributions: options.attributions,\n      interpolate: true,\n      projection: undefined,\n      state: SourceState.READY,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true\n    }) || this;\n    /***\n     * @type {VectorSourceOnSignature<import(\"../events\").EventsKey>}\n     */\n\n    _this.on;\n    /***\n     * @type {VectorSourceOnSignature<import(\"../events\").EventsKey>}\n     */\n\n    _this.once;\n    /***\n     * @type {VectorSourceOnSignature<void>}\n     */\n\n    _this.un;\n    /**\n     * @private\n     * @type {import(\"../featureloader.js\").FeatureLoader}\n     */\n\n    _this.loader_ = VOID;\n    /**\n     * @private\n     * @type {import(\"../format/Feature.js\").default|undefined}\n     */\n\n    _this.format_ = options.format;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.overlaps_ = options.overlaps === undefined ? true : options.overlaps;\n    /**\n     * @private\n     * @type {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined}\n     */\n\n    _this.url_ = options.url;\n\n    if (options.loader !== undefined) {\n      _this.loader_ = options.loader;\n    } else if (_this.url_ !== undefined) {\n      assert(_this.format_, 7); // `format` must be set when `url` is set\n      // create a XHR feature loader for \"url\" and \"format\"\n\n      _this.loader_ = xhr(_this.url_,\n      /** @type {import(\"../format/Feature.js\").default} */\n      _this.format_);\n    }\n    /**\n     * @private\n     * @type {LoadingStrategy}\n     */\n\n\n    _this.strategy_ = options.strategy !== undefined ? options.strategy : allStrategy;\n    var useSpatialIndex = options.useSpatialIndex !== undefined ? options.useSpatialIndex : true;\n    /**\n     * @private\n     * @type {RBush<import(\"../Feature.js\").default<Geometry>>}\n     */\n\n    _this.featuresRtree_ = useSpatialIndex ? new RBush() : null;\n    /**\n     * @private\n     * @type {RBush<{extent: import(\"../extent.js\").Extent}>}\n     */\n\n    _this.loadedExtentsRtree_ = new RBush();\n    /**\n     * @type {number}\n     * @private\n     */\n\n    _this.loadingExtentsCount_ = 0;\n    /**\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n     */\n\n    _this.nullGeometryFeatures_ = {};\n    /**\n     * A lookup of features by id (the return from feature.getId()).\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n     */\n\n    _this.idIndex_ = {};\n    /**\n     * A lookup of features by uid (using getUid(feature)).\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n     */\n\n    _this.uidIndex_ = {};\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n     */\n\n    _this.featureChangeKeys_ = {};\n    /**\n     * @private\n     * @type {Collection<import(\"../Feature.js\").default<Geometry>>}\n     */\n\n    _this.featuresCollection_ = null;\n    var collection, features;\n\n    if (Array.isArray(options.features)) {\n      features = options.features;\n    } else if (options.features) {\n      collection = options.features;\n      features = collection.getArray();\n    }\n\n    if (!useSpatialIndex && collection === undefined) {\n      collection = new Collection(features);\n    }\n\n    if (features !== undefined) {\n      _this.addFeaturesInternal(features);\n    }\n\n    if (collection !== undefined) {\n      _this.bindFeaturesCollection_(collection);\n    }\n\n    return _this;\n  }\n  /**\n   * Add a single feature to the source.  If you want to add a batch of features\n   * at once, call {@link module:ol/source/Vector~VectorSource#addFeatures #addFeatures()}\n   * instead. A feature will not be added to the source if feature with\n   * the same id is already there. The reason for this behavior is to avoid\n   * feature duplication when using bbox or tile loading strategies.\n   * Note: this also applies if an {@link module:ol/Collection} is used for features,\n   * meaning that if a feature with a duplicate id is added in the collection, it will\n   * be removed from it right away.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to add.\n   * @api\n   */\n\n\n  VectorSource.prototype.addFeature = function (feature) {\n    this.addFeatureInternal(feature);\n    this.changed();\n  };\n  /**\n   * Add a feature without firing a `change` event.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n   * @protected\n   */\n\n\n  VectorSource.prototype.addFeatureInternal = function (feature) {\n    var featureKey = getUid(feature);\n\n    if (!this.addToIndex_(featureKey, feature)) {\n      if (this.featuresCollection_) {\n        this.featuresCollection_.remove(feature);\n      }\n\n      return;\n    }\n\n    this.setupChangeEvents_(featureKey, feature);\n    var geometry = feature.getGeometry();\n\n    if (geometry) {\n      var extent = geometry.getExtent();\n\n      if (this.featuresRtree_) {\n        this.featuresRtree_.insert(extent, feature);\n      }\n    } else {\n      this.nullGeometryFeatures_[featureKey] = feature;\n    }\n\n    this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, feature));\n  };\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n   * @private\n   */\n\n\n  VectorSource.prototype.setupChangeEvents_ = function (featureKey, feature) {\n    this.featureChangeKeys_[featureKey] = [listen(feature, EventType.CHANGE, this.handleFeatureChange_, this), listen(feature, ObjectEventType.PROPERTYCHANGE, this.handleFeatureChange_, this)];\n  };\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n   * @return {boolean} The feature is \"valid\", in the sense that it is also a\n   *     candidate for insertion into the Rtree.\n   * @private\n   */\n\n\n  VectorSource.prototype.addToIndex_ = function (featureKey, feature) {\n    var valid = true;\n    var id = feature.getId();\n\n    if (id !== undefined) {\n      if (!(id.toString() in this.idIndex_)) {\n        this.idIndex_[id.toString()] = feature;\n      } else {\n        valid = false;\n      }\n    }\n\n    if (valid) {\n      assert(!(featureKey in this.uidIndex_), 30); // The passed `feature` was already added to the source\n\n      this.uidIndex_[featureKey] = feature;\n    }\n\n    return valid;\n  };\n  /**\n   * Add a batch of features to the source.\n   * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features to add.\n   * @api\n   */\n\n\n  VectorSource.prototype.addFeatures = function (features) {\n    this.addFeaturesInternal(features);\n    this.changed();\n  };\n  /**\n   * Add features without firing a `change` event.\n   * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features.\n   * @protected\n   */\n\n\n  VectorSource.prototype.addFeaturesInternal = function (features) {\n    var extents = [];\n    var newFeatures = [];\n    var geometryFeatures = [];\n\n    for (var i = 0, length_1 = features.length; i < length_1; i++) {\n      var feature = features[i];\n      var featureKey = getUid(feature);\n\n      if (this.addToIndex_(featureKey, feature)) {\n        newFeatures.push(feature);\n      }\n    }\n\n    for (var i = 0, length_2 = newFeatures.length; i < length_2; i++) {\n      var feature = newFeatures[i];\n      var featureKey = getUid(feature);\n      this.setupChangeEvents_(featureKey, feature);\n      var geometry = feature.getGeometry();\n\n      if (geometry) {\n        var extent = geometry.getExtent();\n        extents.push(extent);\n        geometryFeatures.push(feature);\n      } else {\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    }\n\n    if (this.featuresRtree_) {\n      this.featuresRtree_.load(extents, geometryFeatures);\n    }\n\n    for (var i = 0, length_3 = newFeatures.length; i < length_3; i++) {\n      this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, newFeatures[i]));\n    }\n  };\n  /**\n   * @param {!Collection<import(\"../Feature.js\").default<Geometry>>} collection Collection.\n   * @private\n   */\n\n\n  VectorSource.prototype.bindFeaturesCollection_ = function (collection) {\n    var modifyingCollection = false;\n    this.addEventListener(VectorEventType.ADDFEATURE,\n    /**\n     * @param {VectorSourceEvent<Geometry>} evt The vector source event\n     */\n    function (evt) {\n      if (!modifyingCollection) {\n        modifyingCollection = true;\n        collection.push(evt.feature);\n        modifyingCollection = false;\n      }\n    });\n    this.addEventListener(VectorEventType.REMOVEFEATURE,\n    /**\n     * @param {VectorSourceEvent<Geometry>} evt The vector source event\n     */\n    function (evt) {\n      if (!modifyingCollection) {\n        modifyingCollection = true;\n        collection.remove(evt.feature);\n        modifyingCollection = false;\n      }\n    });\n    collection.addEventListener(CollectionEventType.ADD,\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n     */\n    function (evt) {\n      if (!modifyingCollection) {\n        modifyingCollection = true;\n        this.addFeature(\n        /** @type {import(\"../Feature.js\").default<Geometry>} */\n        evt.element);\n        modifyingCollection = false;\n      }\n    }.bind(this));\n    collection.addEventListener(CollectionEventType.REMOVE,\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n     */\n    function (evt) {\n      if (!modifyingCollection) {\n        modifyingCollection = true;\n        this.removeFeature(\n        /** @type {import(\"../Feature.js\").default<Geometry>} */\n        evt.element);\n        modifyingCollection = false;\n      }\n    }.bind(this));\n    this.featuresCollection_ = collection;\n  };\n  /**\n   * Remove all features from the source.\n   * @param {boolean} [opt_fast] Skip dispatching of {@link module:ol/source/Vector.VectorSourceEvent#event:removefeature removefeature} events.\n   * @api\n   */\n\n\n  VectorSource.prototype.clear = function (opt_fast) {\n    if (opt_fast) {\n      for (var featureId in this.featureChangeKeys_) {\n        var keys = this.featureChangeKeys_[featureId];\n        keys.forEach(unlistenByKey);\n      }\n\n      if (!this.featuresCollection_) {\n        this.featureChangeKeys_ = {};\n        this.idIndex_ = {};\n        this.uidIndex_ = {};\n      }\n    } else {\n      if (this.featuresRtree_) {\n        var removeAndIgnoreReturn = function (feature) {\n          this.removeFeatureInternal(feature);\n        }.bind(this);\n\n        this.featuresRtree_.forEach(removeAndIgnoreReturn);\n\n        for (var id in this.nullGeometryFeatures_) {\n          this.removeFeatureInternal(this.nullGeometryFeatures_[id]);\n        }\n      }\n    }\n\n    if (this.featuresCollection_) {\n      this.featuresCollection_.clear();\n    }\n\n    if (this.featuresRtree_) {\n      this.featuresRtree_.clear();\n    }\n\n    this.nullGeometryFeatures_ = {};\n    var clearEvent = new VectorSourceEvent(VectorEventType.CLEAR);\n    this.dispatchEvent(clearEvent);\n    this.changed();\n  };\n  /**\n   * Iterate through all features on the source, calling the provided callback\n   * with each one.  If the callback returns any \"truthy\" value, iteration will\n   * stop and the function will return the same value.\n   * Note: this function only iterate through the feature that have a defined geometry.\n   *\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     on the source.  Return a truthy value to stop iteration.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n\n\n  VectorSource.prototype.forEachFeature = function (callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEach(callback);\n    } else if (this.featuresCollection_) {\n      this.featuresCollection_.forEach(callback);\n    }\n  };\n  /**\n   * Iterate through all features whose geometries contain the provided\n   * coordinate, calling the callback with each feature.  If the callback returns\n   * a \"truthy\" value, iteration will stop and the function will return the same\n   * value.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     whose goemetry contains the provided coordinate.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   */\n\n\n  VectorSource.prototype.forEachFeatureAtCoordinateDirect = function (coordinate, callback) {\n    var extent = [coordinate[0], coordinate[1], coordinate[0], coordinate[1]];\n    return this.forEachFeatureInExtent(extent, function (feature) {\n      var geometry = feature.getGeometry();\n\n      if (geometry.intersectsCoordinate(coordinate)) {\n        return callback(feature);\n      } else {\n        return undefined;\n      }\n    });\n  };\n  /**\n   * Iterate through all features whose bounding box intersects the provided\n   * extent (note that the feature's geometry may not intersect the extent),\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you are interested in features whose geometry intersects an extent, call\n   * the {@link module:ol/source/Vector~VectorSource#forEachFeatureIntersectingExtent #forEachFeatureIntersectingExtent()} method instead.\n   *\n   * When `useSpatialIndex` is set to false, this method will loop through all\n   * features, equivalent to {@link module:ol/source/Vector~VectorSource#forEachFeature #forEachFeature()}.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     whose bounding box intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n\n\n  VectorSource.prototype.forEachFeatureInExtent = function (extent, callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEachInExtent(extent, callback);\n    } else if (this.featuresCollection_) {\n      this.featuresCollection_.forEach(callback);\n    }\n  };\n  /**\n   * Iterate through all features whose geometry intersects the provided extent,\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you only want to test for bounding box intersection, call the\n   * {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent #forEachFeatureInExtent()} method instead.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     whose geometry intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n\n\n  VectorSource.prototype.forEachFeatureIntersectingExtent = function (extent, callback) {\n    return this.forEachFeatureInExtent(extent,\n    /**\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @return {T|undefined} The return value from the last call to the callback.\n     */\n    function (feature) {\n      var geometry = feature.getGeometry();\n\n      if (geometry.intersectsExtent(extent)) {\n        var result = callback(feature);\n\n        if (result) {\n          return result;\n        }\n      }\n    });\n  };\n  /**\n   * Get the features collection associated with this source. Will be `null`\n   * unless the source was configured with `useSpatialIndex` set to `false`, or\n   * with an {@link module:ol/Collection} as `features`.\n   * @return {Collection<import(\"../Feature.js\").default<Geometry>>} The collection of features.\n   * @api\n   */\n\n\n  VectorSource.prototype.getFeaturesCollection = function () {\n    return this.featuresCollection_;\n  };\n  /**\n   * Get a snapshot of the features currently on the source in random order. The returned array\n   * is a copy, the features are references to the features in the source.\n   * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n   * @api\n   */\n\n\n  VectorSource.prototype.getFeatures = function () {\n    var features;\n\n    if (this.featuresCollection_) {\n      features = this.featuresCollection_.getArray().slice(0);\n    } else if (this.featuresRtree_) {\n      features = this.featuresRtree_.getAll();\n\n      if (!isEmpty(this.nullGeometryFeatures_)) {\n        extend(features, getValues(this.nullGeometryFeatures_));\n      }\n    }\n\n    return (\n      /** @type {Array<import(\"../Feature.js\").default<Geometry>>} */\n      features\n    );\n  };\n  /**\n   * Get all features whose geometry intersects the provided coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n   * @api\n   */\n\n\n  VectorSource.prototype.getFeaturesAtCoordinate = function (coordinate) {\n    var features = [];\n    this.forEachFeatureAtCoordinateDirect(coordinate, function (feature) {\n      features.push(feature);\n    });\n    return features;\n  };\n  /**\n   * Get all features whose bounding box intersects the provided extent.  Note that this returns an array of\n   * all features intersecting the given extent in random order (so it may include\n   * features whose geometries do not intersect the extent).\n   *\n   * When `useSpatialIndex` is set to false, this method will return all\n   * features.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n   * @api\n   */\n\n\n  VectorSource.prototype.getFeaturesInExtent = function (extent) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.getInExtent(extent);\n    } else if (this.featuresCollection_) {\n      return this.featuresCollection_.getArray().slice(0);\n    } else {\n      return [];\n    }\n  };\n  /**\n   * Get the closest feature to the provided coordinate.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {function(import(\"../Feature.js\").default<Geometry>):boolean} [opt_filter] Feature filter function.\n   *     The filter function will receive one argument, the {@link module:ol/Feature feature}\n   *     and it should return a boolean value. By default, no filtering is made.\n   * @return {import(\"../Feature.js\").default<Geometry>} Closest feature.\n   * @api\n   */\n\n\n  VectorSource.prototype.getClosestFeatureToCoordinate = function (coordinate, opt_filter) {\n    // Find the closest feature using branch and bound.  We start searching an\n    // infinite extent, and find the distance from the first feature found.  This\n    // becomes the closest feature.  We then compute a smaller extent which any\n    // closer feature must intersect.  We continue searching with this smaller\n    // extent, trying to find a closer feature.  Every time we find a closer\n    // feature, we update the extent being searched so that any even closer\n    // feature must intersect it.  We continue until we run out of features.\n    var x = coordinate[0];\n    var y = coordinate[1];\n    var closestFeature = null;\n    var closestPoint = [NaN, NaN];\n    var minSquaredDistance = Infinity;\n    var extent = [-Infinity, -Infinity, Infinity, Infinity];\n    var filter = opt_filter ? opt_filter : TRUE;\n    this.featuresRtree_.forEachInExtent(extent,\n    /**\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     */\n    function (feature) {\n      if (filter(feature)) {\n        var geometry = feature.getGeometry();\n        var previousMinSquaredDistance = minSquaredDistance;\n        minSquaredDistance = geometry.closestPointXY(x, y, closestPoint, minSquaredDistance);\n\n        if (minSquaredDistance < previousMinSquaredDistance) {\n          closestFeature = feature; // This is sneaky.  Reduce the extent that it is currently being\n          // searched while the R-Tree traversal using this same extent object\n          // is still in progress.  This is safe because the new extent is\n          // strictly contained by the old extent.\n\n          var minDistance = Math.sqrt(minSquaredDistance);\n          extent[0] = x - minDistance;\n          extent[1] = y - minDistance;\n          extent[2] = x + minDistance;\n          extent[3] = y + minDistance;\n        }\n      }\n    });\n    return closestFeature;\n  };\n  /**\n   * Get the extent of the features currently in the source.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../extent.js\").Extent} [opt_extent] Destination extent. If provided, no new extent\n   *     will be created. Instead, that extent's coordinates will be overwritten.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n\n\n  VectorSource.prototype.getExtent = function (opt_extent) {\n    return this.featuresRtree_.getExtent(opt_extent);\n  };\n  /**\n   * Get a feature by its identifier (the value returned by feature.getId()).\n   * Note that the index treats string and numeric identifiers as the same.  So\n   * `source.getFeatureById(2)` will return a feature with id `'2'` or `2`.\n   *\n   * @param {string|number} id Feature identifier.\n   * @return {import(\"../Feature.js\").default<Geometry>} The feature (or `null` if not found).\n   * @api\n   */\n\n\n  VectorSource.prototype.getFeatureById = function (id) {\n    var feature = this.idIndex_[id.toString()];\n    return feature !== undefined ? feature : null;\n  };\n  /**\n   * Get a feature by its internal unique identifier (using `getUid`).\n   *\n   * @param {string} uid Feature identifier.\n   * @return {import(\"../Feature.js\").default<Geometry>} The feature (or `null` if not found).\n   */\n\n\n  VectorSource.prototype.getFeatureByUid = function (uid) {\n    var feature = this.uidIndex_[uid];\n    return feature !== undefined ? feature : null;\n  };\n  /**\n   * Get the format associated with this source.\n   *\n   * @return {import(\"../format/Feature.js\").default|undefined} The feature format.\n   * @api\n   */\n\n\n  VectorSource.prototype.getFormat = function () {\n    return this.format_;\n  };\n  /**\n   * @return {boolean} The source can have overlapping geometries.\n   */\n\n\n  VectorSource.prototype.getOverlaps = function () {\n    return this.overlaps_;\n  };\n  /**\n   * Get the url associated with this source.\n   *\n   * @return {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined} The url.\n   * @api\n   */\n\n\n  VectorSource.prototype.getUrl = function () {\n    return this.url_;\n  };\n  /**\n   * @param {Event} event Event.\n   * @private\n   */\n\n\n  VectorSource.prototype.handleFeatureChange_ = function (event) {\n    var feature =\n    /** @type {import(\"../Feature.js\").default<Geometry>} */\n    event.target;\n    var featureKey = getUid(feature);\n    var geometry = feature.getGeometry();\n\n    if (!geometry) {\n      if (!(featureKey in this.nullGeometryFeatures_)) {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.remove(feature);\n        }\n\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    } else {\n      var extent = geometry.getExtent();\n\n      if (featureKey in this.nullGeometryFeatures_) {\n        delete this.nullGeometryFeatures_[featureKey];\n\n        if (this.featuresRtree_) {\n          this.featuresRtree_.insert(extent, feature);\n        }\n      } else {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.update(extent, feature);\n        }\n      }\n    }\n\n    var id = feature.getId();\n\n    if (id !== undefined) {\n      var sid = id.toString();\n\n      if (this.idIndex_[sid] !== feature) {\n        this.removeFromIdIndex_(feature);\n        this.idIndex_[sid] = feature;\n      }\n    } else {\n      this.removeFromIdIndex_(feature);\n      this.uidIndex_[featureKey] = feature;\n    }\n\n    this.changed();\n    this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE, feature));\n  };\n  /**\n   * Returns true if the feature is contained within the source.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n   * @return {boolean} Has feature.\n   * @api\n   */\n\n\n  VectorSource.prototype.hasFeature = function (feature) {\n    var id = feature.getId();\n\n    if (id !== undefined) {\n      return id in this.idIndex_;\n    } else {\n      return getUid(feature) in this.uidIndex_;\n    }\n  };\n  /**\n   * @return {boolean} Is empty.\n   */\n\n\n  VectorSource.prototype.isEmpty = function () {\n    return this.featuresRtree_.isEmpty() && isEmpty(this.nullGeometryFeatures_);\n  };\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   */\n\n\n  VectorSource.prototype.loadFeatures = function (extent, resolution, projection) {\n    var loadedExtentsRtree = this.loadedExtentsRtree_;\n    var extentsToLoad = this.strategy_(extent, resolution, projection);\n\n    var _loop_1 = function _loop_1(i, ii) {\n      var extentToLoad = extentsToLoad[i];\n      var alreadyLoaded = loadedExtentsRtree.forEachInExtent(extentToLoad,\n      /**\n       * @param {{extent: import(\"../extent.js\").Extent}} object Object.\n       * @return {boolean} Contains.\n       */\n      function (object) {\n        return containsExtent(object.extent, extentToLoad);\n      });\n\n      if (!alreadyLoaded) {\n        ++this_1.loadingExtentsCount_;\n        this_1.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART));\n        this_1.loader_.call(this_1, extentToLoad, resolution, projection, function (features) {\n          --this.loadingExtentsCount_;\n          this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND, undefined, features));\n        }.bind(this_1), function () {\n          --this.loadingExtentsCount_;\n          this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR));\n        }.bind(this_1));\n        loadedExtentsRtree.insert(extentToLoad, {\n          extent: extentToLoad.slice()\n        });\n      }\n    };\n\n    var this_1 = this;\n\n    for (var i = 0, ii = extentsToLoad.length; i < ii; ++i) {\n      _loop_1(i, ii);\n    }\n\n    this.loading = this.loader_.length < 4 ? false : this.loadingExtentsCount_ > 0;\n  };\n\n  VectorSource.prototype.refresh = function () {\n    this.clear(true);\n    this.loadedExtentsRtree_.clear();\n\n    _super.prototype.refresh.call(this);\n  };\n  /**\n   * Remove an extent from the list of loaded extents.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n\n\n  VectorSource.prototype.removeLoadedExtent = function (extent) {\n    var loadedExtentsRtree = this.loadedExtentsRtree_;\n    var obj;\n    loadedExtentsRtree.forEachInExtent(extent, function (object) {\n      if (equals(object.extent, extent)) {\n        obj = object;\n        return true;\n      }\n    });\n\n    if (obj) {\n      loadedExtentsRtree.remove(obj);\n    }\n  };\n  /**\n   * Remove a single feature from the source.  If you want to remove all features\n   * at once, use the {@link module:ol/source/Vector~VectorSource#clear #clear()} method\n   * instead.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to remove.\n   * @api\n   */\n\n\n  VectorSource.prototype.removeFeature = function (feature) {\n    if (!feature) {\n      return;\n    }\n\n    var featureKey = getUid(feature);\n\n    if (featureKey in this.nullGeometryFeatures_) {\n      delete this.nullGeometryFeatures_[featureKey];\n    } else {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.remove(feature);\n      }\n    }\n\n    var result = this.removeFeatureInternal(feature);\n\n    if (result) {\n      this.changed();\n    }\n  };\n  /**\n   * Remove feature without firing a `change` event.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n   * @return {import(\"../Feature.js\").default<Geometry>|undefined} The removed feature\n   *     (or undefined if the feature was not found).\n   * @protected\n   */\n\n\n  VectorSource.prototype.removeFeatureInternal = function (feature) {\n    var featureKey = getUid(feature);\n    var featureChangeKeys = this.featureChangeKeys_[featureKey];\n\n    if (!featureChangeKeys) {\n      return;\n    }\n\n    featureChangeKeys.forEach(unlistenByKey);\n    delete this.featureChangeKeys_[featureKey];\n    var id = feature.getId();\n\n    if (id !== undefined) {\n      delete this.idIndex_[id.toString()];\n    }\n\n    delete this.uidIndex_[featureKey];\n    this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE, feature));\n    return feature;\n  };\n  /**\n   * Remove a feature from the id index.  Called internally when the feature id\n   * may have changed.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n   * @return {boolean} Removed the feature from the index.\n   * @private\n   */\n\n\n  VectorSource.prototype.removeFromIdIndex_ = function (feature) {\n    var removed = false;\n\n    for (var id in this.idIndex_) {\n      if (this.idIndex_[id] === feature) {\n        delete this.idIndex_[id];\n        removed = true;\n        break;\n      }\n    }\n\n    return removed;\n  };\n  /**\n   * Set the new loader of the source. The next render cycle will use the\n   * new loader.\n   * @param {import(\"../featureloader.js\").FeatureLoader} loader The loader to set.\n   * @api\n   */\n\n\n  VectorSource.prototype.setLoader = function (loader) {\n    this.loader_ = loader;\n  };\n  /**\n   * Points the source to a new url. The next render cycle will use the new url.\n   * @param {string|import(\"../featureloader.js\").FeatureUrlFunction} url Url.\n   * @api\n   */\n\n\n  VectorSource.prototype.setUrl = function (url) {\n    assert(this.format_, 7); // `format` must be set when `url` is set\n\n    this.url_ = url;\n    this.setLoader(xhr(url, this.format_));\n  };\n\n  return VectorSource;\n}(Source);\n\nexport default VectorSource;","!function (t, i) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = i() : \"function\" == typeof define && define.amd ? define(i) : (t = t || self).RBush = i();\n}(this, function () {\n  \"use strict\";\n\n  function t(t, r, e, a, h) {\n    !function t(n, r, e, a, h) {\n      for (; a > e;) {\n        if (a - e > 600) {\n          var o = a - e + 1,\n              s = r - e + 1,\n              l = Math.log(o),\n              f = .5 * Math.exp(2 * l / 3),\n              u = .5 * Math.sqrt(l * f * (o - f) / o) * (s - o / 2 < 0 ? -1 : 1),\n              m = Math.max(e, Math.floor(r - s * f / o + u)),\n              c = Math.min(a, Math.floor(r + (o - s) * f / o + u));\n          t(n, r, m, c, h);\n        }\n\n        var p = n[r],\n            d = e,\n            x = a;\n\n        for (i(n, e, r), h(n[a], p) > 0 && i(n, e, a); d < x;) {\n          for (i(n, d, x), d++, x--; h(n[d], p) < 0;) {\n            d++;\n          }\n\n          for (; h(n[x], p) > 0;) {\n            x--;\n          }\n        }\n\n        0 === h(n[e], p) ? i(n, e, x) : i(n, ++x, a), x <= r && (e = x + 1), r <= x && (a = x - 1);\n      }\n    }(t, r, e || 0, a || t.length - 1, h || n);\n  }\n\n  function i(t, i, n) {\n    var r = t[i];\n    t[i] = t[n], t[n] = r;\n  }\n\n  function n(t, i) {\n    return t < i ? -1 : t > i ? 1 : 0;\n  }\n\n  var r = function r(t) {\n    void 0 === t && (t = 9), this._maxEntries = Math.max(4, t), this._minEntries = Math.max(2, Math.ceil(.4 * this._maxEntries)), this.clear();\n  };\n\n  function e(t, i, n) {\n    if (!n) return i.indexOf(t);\n\n    for (var r = 0; r < i.length; r++) {\n      if (n(t, i[r])) return r;\n    }\n\n    return -1;\n  }\n\n  function a(t, i) {\n    h(t, 0, t.children.length, i, t);\n  }\n\n  function h(t, i, n, r, e) {\n    e || (e = p(null)), e.minX = 1 / 0, e.minY = 1 / 0, e.maxX = -1 / 0, e.maxY = -1 / 0;\n\n    for (var a = i; a < n; a++) {\n      var h = t.children[a];\n      o(e, t.leaf ? r(h) : h);\n    }\n\n    return e;\n  }\n\n  function o(t, i) {\n    return t.minX = Math.min(t.minX, i.minX), t.minY = Math.min(t.minY, i.minY), t.maxX = Math.max(t.maxX, i.maxX), t.maxY = Math.max(t.maxY, i.maxY), t;\n  }\n\n  function s(t, i) {\n    return t.minX - i.minX;\n  }\n\n  function l(t, i) {\n    return t.minY - i.minY;\n  }\n\n  function f(t) {\n    return (t.maxX - t.minX) * (t.maxY - t.minY);\n  }\n\n  function u(t) {\n    return t.maxX - t.minX + (t.maxY - t.minY);\n  }\n\n  function m(t, i) {\n    return t.minX <= i.minX && t.minY <= i.minY && i.maxX <= t.maxX && i.maxY <= t.maxY;\n  }\n\n  function c(t, i) {\n    return i.minX <= t.maxX && i.minY <= t.maxY && i.maxX >= t.minX && i.maxY >= t.minY;\n  }\n\n  function p(t) {\n    return {\n      children: t,\n      height: 1,\n      leaf: !0,\n      minX: 1 / 0,\n      minY: 1 / 0,\n      maxX: -1 / 0,\n      maxY: -1 / 0\n    };\n  }\n\n  function d(i, n, r, e, a) {\n    for (var h = [n, r]; h.length;) {\n      if (!((r = h.pop()) - (n = h.pop()) <= e)) {\n        var o = n + Math.ceil((r - n) / e / 2) * e;\n        t(i, o, n, r, a), h.push(n, o, o, r);\n      }\n    }\n  }\n\n  return r.prototype.all = function () {\n    return this._all(this.data, []);\n  }, r.prototype.search = function (t) {\n    var i = this.data,\n        n = [];\n    if (!c(t, i)) return n;\n\n    for (var r = this.toBBox, e = []; i;) {\n      for (var a = 0; a < i.children.length; a++) {\n        var h = i.children[a],\n            o = i.leaf ? r(h) : h;\n        c(t, o) && (i.leaf ? n.push(h) : m(t, o) ? this._all(h, n) : e.push(h));\n      }\n\n      i = e.pop();\n    }\n\n    return n;\n  }, r.prototype.collides = function (t) {\n    var i = this.data;\n    if (!c(t, i)) return !1;\n\n    for (var n = []; i;) {\n      for (var r = 0; r < i.children.length; r++) {\n        var e = i.children[r],\n            a = i.leaf ? this.toBBox(e) : e;\n\n        if (c(t, a)) {\n          if (i.leaf || m(t, a)) return !0;\n          n.push(e);\n        }\n      }\n\n      i = n.pop();\n    }\n\n    return !1;\n  }, r.prototype.load = function (t) {\n    if (!t || !t.length) return this;\n\n    if (t.length < this._minEntries) {\n      for (var i = 0; i < t.length; i++) {\n        this.insert(t[i]);\n      }\n\n      return this;\n    }\n\n    var n = this._build(t.slice(), 0, t.length - 1, 0);\n\n    if (this.data.children.length) {\n      if (this.data.height === n.height) this._splitRoot(this.data, n);else {\n        if (this.data.height < n.height) {\n          var r = this.data;\n          this.data = n, n = r;\n        }\n\n        this._insert(n, this.data.height - n.height - 1, !0);\n      }\n    } else this.data = n;\n    return this;\n  }, r.prototype.insert = function (t) {\n    return t && this._insert(t, this.data.height - 1), this;\n  }, r.prototype.clear = function () {\n    return this.data = p([]), this;\n  }, r.prototype.remove = function (t, i) {\n    if (!t) return this;\n\n    for (var n, r, a, h = this.data, o = this.toBBox(t), s = [], l = []; h || s.length;) {\n      if (h || (h = s.pop(), r = s[s.length - 1], n = l.pop(), a = !0), h.leaf) {\n        var f = e(t, h.children, i);\n        if (-1 !== f) return h.children.splice(f, 1), s.push(h), this._condense(s), this;\n      }\n\n      a || h.leaf || !m(h, o) ? r ? (n++, h = r.children[n], a = !1) : h = null : (s.push(h), l.push(n), n = 0, r = h, h = h.children[0]);\n    }\n\n    return this;\n  }, r.prototype.toBBox = function (t) {\n    return t;\n  }, r.prototype.compareMinX = function (t, i) {\n    return t.minX - i.minX;\n  }, r.prototype.compareMinY = function (t, i) {\n    return t.minY - i.minY;\n  }, r.prototype.toJSON = function () {\n    return this.data;\n  }, r.prototype.fromJSON = function (t) {\n    return this.data = t, this;\n  }, r.prototype._all = function (t, i) {\n    for (var n = []; t;) {\n      t.leaf ? i.push.apply(i, t.children) : n.push.apply(n, t.children), t = n.pop();\n    }\n\n    return i;\n  }, r.prototype._build = function (t, i, n, r) {\n    var e,\n        h = n - i + 1,\n        o = this._maxEntries;\n    if (h <= o) return a(e = p(t.slice(i, n + 1)), this.toBBox), e;\n    r || (r = Math.ceil(Math.log(h) / Math.log(o)), o = Math.ceil(h / Math.pow(o, r - 1))), (e = p([])).leaf = !1, e.height = r;\n    var s = Math.ceil(h / o),\n        l = s * Math.ceil(Math.sqrt(o));\n    d(t, i, n, l, this.compareMinX);\n\n    for (var f = i; f <= n; f += l) {\n      var u = Math.min(f + l - 1, n);\n      d(t, f, u, s, this.compareMinY);\n\n      for (var m = f; m <= u; m += s) {\n        var c = Math.min(m + s - 1, u);\n        e.children.push(this._build(t, m, c, r - 1));\n      }\n    }\n\n    return a(e, this.toBBox), e;\n  }, r.prototype._chooseSubtree = function (t, i, n, r) {\n    for (; r.push(i), !i.leaf && r.length - 1 !== n;) {\n      for (var e = 1 / 0, a = 1 / 0, h = void 0, o = 0; o < i.children.length; o++) {\n        var s = i.children[o],\n            l = f(s),\n            u = (m = t, c = s, (Math.max(c.maxX, m.maxX) - Math.min(c.minX, m.minX)) * (Math.max(c.maxY, m.maxY) - Math.min(c.minY, m.minY)) - l);\n        u < a ? (a = u, e = l < e ? l : e, h = s) : u === a && l < e && (e = l, h = s);\n      }\n\n      i = h || i.children[0];\n    }\n\n    var m, c;\n    return i;\n  }, r.prototype._insert = function (t, i, n) {\n    var r = n ? t : this.toBBox(t),\n        e = [],\n        a = this._chooseSubtree(r, this.data, i, e);\n\n    for (a.children.push(t), o(a, r); i >= 0 && e[i].children.length > this._maxEntries;) {\n      this._split(e, i), i--;\n    }\n\n    this._adjustParentBBoxes(r, e, i);\n  }, r.prototype._split = function (t, i) {\n    var n = t[i],\n        r = n.children.length,\n        e = this._minEntries;\n\n    this._chooseSplitAxis(n, e, r);\n\n    var h = this._chooseSplitIndex(n, e, r),\n        o = p(n.children.splice(h, n.children.length - h));\n\n    o.height = n.height, o.leaf = n.leaf, a(n, this.toBBox), a(o, this.toBBox), i ? t[i - 1].children.push(o) : this._splitRoot(n, o);\n  }, r.prototype._splitRoot = function (t, i) {\n    this.data = p([t, i]), this.data.height = t.height + 1, this.data.leaf = !1, a(this.data, this.toBBox);\n  }, r.prototype._chooseSplitIndex = function (t, i, n) {\n    for (var r, e, a, o, s, l, u, m = 1 / 0, c = 1 / 0, p = i; p <= n - i; p++) {\n      var d = h(t, 0, p, this.toBBox),\n          x = h(t, p, n, this.toBBox),\n          v = (e = d, a = x, o = void 0, s = void 0, l = void 0, u = void 0, o = Math.max(e.minX, a.minX), s = Math.max(e.minY, a.minY), l = Math.min(e.maxX, a.maxX), u = Math.min(e.maxY, a.maxY), Math.max(0, l - o) * Math.max(0, u - s)),\n          M = f(d) + f(x);\n      v < m ? (m = v, r = p, c = M < c ? M : c) : v === m && M < c && (c = M, r = p);\n    }\n\n    return r || n - i;\n  }, r.prototype._chooseSplitAxis = function (t, i, n) {\n    var r = t.leaf ? this.compareMinX : s,\n        e = t.leaf ? this.compareMinY : l;\n    this._allDistMargin(t, i, n, r) < this._allDistMargin(t, i, n, e) && t.children.sort(r);\n  }, r.prototype._allDistMargin = function (t, i, n, r) {\n    t.children.sort(r);\n\n    for (var e = this.toBBox, a = h(t, 0, i, e), s = h(t, n - i, n, e), l = u(a) + u(s), f = i; f < n - i; f++) {\n      var m = t.children[f];\n      o(a, t.leaf ? e(m) : m), l += u(a);\n    }\n\n    for (var c = n - i - 1; c >= i; c--) {\n      var p = t.children[c];\n      o(s, t.leaf ? e(p) : p), l += u(s);\n    }\n\n    return l;\n  }, r.prototype._adjustParentBBoxes = function (t, i, n) {\n    for (var r = n; r >= 0; r--) {\n      o(i[r], t);\n    }\n  }, r.prototype._condense = function (t) {\n    for (var i = t.length - 1, n = void 0; i >= 0; i--) {\n      0 === t[i].children.length ? i > 0 ? (n = t[i - 1].children).splice(n.indexOf(t[i]), 1) : this.clear() : a(t[i], this.toBBox);\n    }\n  }, r;\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _scrollLink = require('../mixins/scroll-link');\n\nvar _scrollLink2 = _interopRequireDefault(_scrollLink);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar ButtonElement = function (_React$Component) {\n  _inherits(ButtonElement, _React$Component);\n\n  function ButtonElement() {\n    _classCallCheck(this, ButtonElement);\n\n    return _possibleConstructorReturn(this, (ButtonElement.__proto__ || Object.getPrototypeOf(ButtonElement)).apply(this, arguments));\n  }\n\n  _createClass(ButtonElement, [{\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement('input', this.props, this.props.children);\n    }\n  }]);\n\n  return ButtonElement;\n}(_react2.default.Component);\n\n;\nexports.default = (0, _scrollLink2.default)(ButtonElement);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _scrollElement = require('../mixins/scroll-element');\n\nvar _scrollElement2 = _interopRequireDefault(_scrollElement);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar ElementWrapper = function (_React$Component) {\n  _inherits(ElementWrapper, _React$Component);\n\n  function ElementWrapper() {\n    _classCallCheck(this, ElementWrapper);\n\n    return _possibleConstructorReturn(this, (ElementWrapper.__proto__ || Object.getPrototypeOf(ElementWrapper)).apply(this, arguments));\n  }\n\n  _createClass(ElementWrapper, [{\n    key: 'render',\n    value: function render() {\n      var _this2 = this; // Remove `parentBindings` from props\n\n\n      var newProps = _extends({}, this.props);\n\n      if (newProps.parentBindings) {\n        delete newProps.parentBindings;\n      }\n\n      return _react2.default.createElement('div', _extends({}, newProps, {\n        ref: function ref(el) {\n          _this2.props.parentBindings.domNode = el;\n        }\n      }), this.props.children);\n    }\n  }]);\n\n  return ElementWrapper;\n}(_react2.default.Component);\n\n;\nElementWrapper.propTypes = {\n  name: _propTypes2.default.string,\n  id: _propTypes2.default.string\n};\nexports.default = (0, _scrollElement2.default)(ElementWrapper);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _scrollLink = require('../mixins/scroll-link');\n\nvar _scrollLink2 = _interopRequireDefault(_scrollLink);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar LinkElement = function (_React$Component) {\n  _inherits(LinkElement, _React$Component);\n\n  function LinkElement() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, LinkElement);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = LinkElement.__proto__ || Object.getPrototypeOf(LinkElement)).call.apply(_ref, [this].concat(args))), _this), _this.render = function () {\n      return _react2.default.createElement('a', _this.props, _this.props.children);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  return LinkElement;\n}(_react2.default.Component);\n\n;\nexports.default = (0, _scrollLink2.default)(LinkElement);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Helpers = exports.ScrollElement = exports.ScrollLink = exports.animateScroll = exports.scrollSpy = exports.Events = exports.scroller = exports.Element = exports.Button = exports.Link = undefined;\n\nvar _Link = require('./components/Link.js');\n\nvar _Link2 = _interopRequireDefault(_Link);\n\nvar _Button = require('./components/Button.js');\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _Element = require('./components/Element.js');\n\nvar _Element2 = _interopRequireDefault(_Element);\n\nvar _scroller = require('./mixins/scroller.js');\n\nvar _scroller2 = _interopRequireDefault(_scroller);\n\nvar _scrollEvents = require('./mixins/scroll-events.js');\n\nvar _scrollEvents2 = _interopRequireDefault(_scrollEvents);\n\nvar _scrollSpy = require('./mixins/scroll-spy.js');\n\nvar _scrollSpy2 = _interopRequireDefault(_scrollSpy);\n\nvar _animateScroll = require('./mixins/animate-scroll.js');\n\nvar _animateScroll2 = _interopRequireDefault(_animateScroll);\n\nvar _scrollLink = require('./mixins/scroll-link.js');\n\nvar _scrollLink2 = _interopRequireDefault(_scrollLink);\n\nvar _scrollElement = require('./mixins/scroll-element.js');\n\nvar _scrollElement2 = _interopRequireDefault(_scrollElement);\n\nvar _Helpers = require('./mixins/Helpers.js');\n\nvar _Helpers2 = _interopRequireDefault(_Helpers);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.Link = _Link2.default;\nexports.Button = _Button2.default;\nexports.Element = _Element2.default;\nexports.scroller = _scroller2.default;\nexports.Events = _scrollEvents2.default;\nexports.scrollSpy = _scrollSpy2.default;\nexports.animateScroll = _animateScroll2.default;\nexports.ScrollLink = _scrollLink2.default;\nexports.ScrollElement = _scrollElement2.default;\nexports.Helpers = _Helpers2.default;\nexports.default = {\n  Link: _Link2.default,\n  Button: _Button2.default,\n  Element: _Element2.default,\n  scroller: _scroller2.default,\n  Events: _scrollEvents2.default,\n  scrollSpy: _scrollSpy2.default,\n  animateScroll: _animateScroll2.default,\n  ScrollLink: _scrollLink2.default,\n  ScrollElement: _scrollElement2.default,\n  Helpers: _Helpers2.default\n};","\"use strict\";\n/* DEPRECATED */\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar React = require('react');\n\nvar ReactDOM = require('react-dom');\n\nvar utils = require('./utils');\n\nvar scrollSpy = require('./scroll-spy');\n\nvar defaultScroller = require('./scroller');\n\nvar PropTypes = require('prop-types');\n\nvar scrollHash = require('./scroll-hash');\n\nvar protoTypes = {\n  to: PropTypes.string.isRequired,\n  containerId: PropTypes.string,\n  container: PropTypes.object,\n  activeClass: PropTypes.string,\n  spy: PropTypes.bool,\n  smooth: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  offset: PropTypes.number,\n  delay: PropTypes.number,\n  isDynamic: PropTypes.bool,\n  onClick: PropTypes.func,\n  duration: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\n  absolute: PropTypes.bool,\n  onSetActive: PropTypes.func,\n  onSetInactive: PropTypes.func,\n  ignoreCancelEvents: PropTypes.bool,\n  hashSpy: PropTypes.bool,\n  spyThrottle: PropTypes.number\n};\nvar Helpers = {\n  Scroll: function Scroll(Component, customScroller) {\n    console.warn(\"Helpers.Scroll is deprecated since v1.7.0\");\n    var scroller = customScroller || defaultScroller;\n\n    var Scroll = function (_React$Component) {\n      _inherits(Scroll, _React$Component);\n\n      function Scroll(props) {\n        _classCallCheck(this, Scroll);\n\n        var _this = _possibleConstructorReturn(this, (Scroll.__proto__ || Object.getPrototypeOf(Scroll)).call(this, props));\n\n        _initialiseProps.call(_this);\n\n        _this.state = {\n          active: false\n        };\n        return _this;\n      }\n\n      _createClass(Scroll, [{\n        key: 'getScrollSpyContainer',\n        value: function getScrollSpyContainer() {\n          var containerId = this.props.containerId;\n          var container = this.props.container;\n\n          if (containerId) {\n            return document.getElementById(containerId);\n          }\n\n          if (container && container.nodeType) {\n            return container;\n          }\n\n          return document;\n        }\n      }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n          if (this.props.spy || this.props.hashSpy) {\n            var scrollSpyContainer = this.getScrollSpyContainer();\n\n            if (!scrollSpy.isMounted(scrollSpyContainer)) {\n              scrollSpy.mount(scrollSpyContainer, this.props.spyThrottle);\n            }\n\n            if (this.props.hashSpy) {\n              if (!scrollHash.isMounted()) {\n                scrollHash.mount(scroller);\n              }\n\n              scrollHash.mapContainer(this.props.to, scrollSpyContainer);\n            }\n\n            if (this.props.spy) {\n              scrollSpy.addStateHandler(this.stateHandler);\n            }\n\n            scrollSpy.addSpyHandler(this.spyHandler, scrollSpyContainer);\n            this.setState({\n              container: scrollSpyContainer\n            });\n          }\n        }\n      }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n          scrollSpy.unmount(this.stateHandler, this.spyHandler);\n        }\n      }, {\n        key: 'render',\n        value: function render() {\n          var className = \"\";\n\n          if (this.state && this.state.active) {\n            className = ((this.props.className || \"\") + \" \" + (this.props.activeClass || \"active\")).trim();\n          } else {\n            className = this.props.className;\n          }\n\n          var props = _extends({}, this.props);\n\n          for (var prop in protoTypes) {\n            if (props.hasOwnProperty(prop)) {\n              delete props[prop];\n            }\n          }\n\n          props.className = className;\n          props.onClick = this.handleClick;\n          return React.createElement(Component, props);\n        }\n      }]);\n\n      return Scroll;\n    }(React.Component);\n\n    var _initialiseProps = function _initialiseProps() {\n      var _this2 = this;\n\n      this.scrollTo = function (to, props) {\n        scroller.scrollTo(to, _extends({}, _this2.state, props));\n      };\n\n      this.handleClick = function (event) {\n        /*\r\n         * give the posibility to override onClick\r\n         */\n        if (_this2.props.onClick) {\n          _this2.props.onClick(event);\n        }\n        /*\r\n         * dont bubble the navigation\r\n         */\n\n\n        if (event.stopPropagation) event.stopPropagation();\n        if (event.preventDefault) event.preventDefault();\n        /*\r\n         * do the magic!\r\n         */\n\n        _this2.scrollTo(_this2.props.to, _this2.props);\n      };\n\n      this.stateHandler = function () {\n        if (scroller.getActiveLink() !== _this2.props.to) {\n          if (_this2.state !== null && _this2.state.active && _this2.props.onSetInactive) {\n            _this2.props.onSetInactive();\n          }\n\n          _this2.setState({\n            active: false\n          });\n        }\n      };\n\n      this.spyHandler = function (y) {\n        var scrollSpyContainer = _this2.getScrollSpyContainer();\n\n        if (scrollHash.isMounted() && !scrollHash.isInitialized()) {\n          return;\n        }\n\n        var to = _this2.props.to;\n        var element = null;\n        var elemTopBound = 0;\n        var elemBottomBound = 0;\n        var containerTop = 0;\n\n        if (scrollSpyContainer.getBoundingClientRect) {\n          var containerCords = scrollSpyContainer.getBoundingClientRect();\n          containerTop = containerCords.top;\n        }\n\n        if (!element || _this2.props.isDynamic) {\n          element = scroller.get(to);\n\n          if (!element) {\n            return;\n          }\n\n          var cords = element.getBoundingClientRect();\n          elemTopBound = cords.top - containerTop + y;\n          elemBottomBound = elemTopBound + cords.height;\n        }\n\n        var offsetY = y - _this2.props.offset;\n        var isInside = offsetY >= Math.floor(elemTopBound) && offsetY < Math.floor(elemBottomBound);\n        var isOutside = offsetY < Math.floor(elemTopBound) || offsetY >= Math.floor(elemBottomBound);\n        var activeLink = scroller.getActiveLink();\n\n        if (isOutside) {\n          if (to === activeLink) {\n            scroller.setActiveLink(void 0);\n          }\n\n          if (_this2.props.hashSpy && scrollHash.getHash() === to) {\n            scrollHash.changeHash();\n          }\n\n          if (_this2.props.spy && _this2.state.active) {\n            _this2.setState({\n              active: false\n            });\n\n            _this2.props.onSetInactive && _this2.props.onSetInactive();\n          }\n\n          return scrollSpy.updateStates();\n        }\n\n        if (isInside && activeLink !== to) {\n          scroller.setActiveLink(to);\n          _this2.props.hashSpy && scrollHash.changeHash(to);\n\n          if (_this2.props.spy) {\n            _this2.setState({\n              active: true\n            });\n\n            _this2.props.onSetActive && _this2.props.onSetActive(to);\n          }\n\n          return scrollSpy.updateStates();\n        }\n      };\n    };\n\n    ;\n    Scroll.propTypes = protoTypes;\n    Scroll.defaultProps = {\n      offset: 0\n    };\n    return Scroll;\n  },\n  Element: function Element(Component) {\n    console.warn(\"Helpers.Element is deprecated since v1.7.0\");\n\n    var Element = function (_React$Component2) {\n      _inherits(Element, _React$Component2);\n\n      function Element(props) {\n        _classCallCheck(this, Element);\n\n        var _this3 = _possibleConstructorReturn(this, (Element.__proto__ || Object.getPrototypeOf(Element)).call(this, props));\n\n        _this3.childBindings = {\n          domNode: null\n        };\n        return _this3;\n      }\n\n      _createClass(Element, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n          if (typeof window === 'undefined') {\n            return false;\n          }\n\n          this.registerElems(this.props.name);\n        }\n      }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n          if (this.props.name !== prevProps.name) {\n            this.registerElems(this.props.name);\n          }\n        }\n      }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n          if (typeof window === 'undefined') {\n            return false;\n          }\n\n          defaultScroller.unregister(this.props.name);\n        }\n      }, {\n        key: 'registerElems',\n        value: function registerElems(name) {\n          defaultScroller.register(name, this.childBindings.domNode);\n        }\n      }, {\n        key: 'render',\n        value: function render() {\n          return React.createElement(Component, _extends({}, this.props, {\n            parentBindings: this.childBindings\n          }));\n        }\n      }]);\n\n      return Element;\n    }(React.Component);\n\n    ;\n    Element.propTypes = {\n      name: PropTypes.string,\n      id: PropTypes.string\n    };\n    return Element;\n  }\n};\nmodule.exports = Helpers;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _smooth = require('./smooth');\n\nvar _smooth2 = _interopRequireDefault(_smooth);\n\nvar _cancelEvents = require('./cancel-events');\n\nvar _cancelEvents2 = _interopRequireDefault(_cancelEvents);\n\nvar _scrollEvents = require('./scroll-events');\n\nvar _scrollEvents2 = _interopRequireDefault(_scrollEvents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/*\r\n * Gets the easing type from the smooth prop within options.\r\n */\n\n\nvar getAnimationType = function getAnimationType(options) {\n  return _smooth2.default[options.smooth] || _smooth2.default.defaultEasing;\n};\n/*\r\n * Function helper\r\n */\n\n\nvar functionWrapper = function functionWrapper(value) {\n  return typeof value === 'function' ? value : function () {\n    return value;\n  };\n};\n/*\r\n * Wraps window properties to allow server side rendering\r\n */\n\n\nvar currentWindowProperties = function currentWindowProperties() {\n  if (typeof window !== 'undefined') {\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame;\n  }\n};\n/*\r\n * Helper function to never extend 60fps on the webpage.\r\n */\n\n\nvar requestAnimationFrameHelper = function () {\n  return currentWindowProperties() || function (callback, element, delay) {\n    window.setTimeout(callback, delay || 1000 / 60, new Date().getTime());\n  };\n}();\n\nvar makeData = function makeData() {\n  return {\n    currentPosition: 0,\n    startPosition: 0,\n    targetPosition: 0,\n    progress: 0,\n    duration: 0,\n    cancel: false,\n    target: null,\n    containerElement: null,\n    to: null,\n    start: null,\n    delta: null,\n    percent: null,\n    delayTimeout: null\n  };\n};\n\nvar currentPositionX = function currentPositionX(options) {\n  var containerElement = options.data.containerElement;\n\n  if (containerElement && containerElement !== document && containerElement !== document.body) {\n    return containerElement.scrollLeft;\n  } else {\n    var supportPageOffset = window.pageXOffset !== undefined;\n    var isCSS1Compat = (document.compatMode || \"\") === \"CSS1Compat\";\n    return supportPageOffset ? window.pageXOffset : isCSS1Compat ? document.documentElement.scrollLeft : document.body.scrollLeft;\n  }\n};\n\nvar currentPositionY = function currentPositionY(options) {\n  var containerElement = options.data.containerElement;\n\n  if (containerElement && containerElement !== document && containerElement !== document.body) {\n    return containerElement.scrollTop;\n  } else {\n    var supportPageOffset = window.pageXOffset !== undefined;\n    var isCSS1Compat = (document.compatMode || \"\") === \"CSS1Compat\";\n    return supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop;\n  }\n};\n\nvar scrollContainerWidth = function scrollContainerWidth(options) {\n  var containerElement = options.data.containerElement;\n\n  if (containerElement && containerElement !== document && containerElement !== document.body) {\n    return containerElement.scrollWidth - containerElement.offsetWidth;\n  } else {\n    var body = document.body;\n    var html = document.documentElement;\n    return Math.max(body.scrollWidth, body.offsetWidth, html.clientWidth, html.scrollWidth, html.offsetWidth);\n  }\n};\n\nvar scrollContainerHeight = function scrollContainerHeight(options) {\n  var containerElement = options.data.containerElement;\n\n  if (containerElement && containerElement !== document && containerElement !== document.body) {\n    return containerElement.scrollHeight - containerElement.offsetHeight;\n  } else {\n    var body = document.body;\n    var html = document.documentElement;\n    return Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n  }\n};\n\nvar animateScroll = function animateScroll(easing, options, timestamp) {\n  var data = options.data; // Cancel on specific events\n\n  if (!options.ignoreCancelEvents && data.cancel) {\n    if (_scrollEvents2.default.registered['end']) {\n      _scrollEvents2.default.registered['end'](data.to, data.target, data.currentPositionY);\n    }\n\n    return;\n  }\n\n  ;\n  data.delta = Math.round(data.targetPosition - data.startPosition);\n\n  if (data.start === null) {\n    data.start = timestamp;\n  }\n\n  data.progress = timestamp - data.start;\n  data.percent = data.progress >= data.duration ? 1 : easing(data.progress / data.duration);\n  data.currentPosition = data.startPosition + Math.ceil(data.delta * data.percent);\n\n  if (data.containerElement && data.containerElement !== document && data.containerElement !== document.body) {\n    if (options.horizontal) {\n      data.containerElement.scrollLeft = data.currentPosition;\n    } else {\n      data.containerElement.scrollTop = data.currentPosition;\n    }\n  } else {\n    if (options.horizontal) {\n      window.scrollTo(data.currentPosition, 0);\n    } else {\n      window.scrollTo(0, data.currentPosition);\n    }\n  }\n\n  if (data.percent < 1) {\n    var easedAnimate = animateScroll.bind(null, easing, options);\n    requestAnimationFrameHelper.call(window, easedAnimate);\n    return;\n  }\n\n  if (_scrollEvents2.default.registered['end']) {\n    _scrollEvents2.default.registered['end'](data.to, data.target, data.currentPosition);\n  }\n};\n\nvar setContainer = function setContainer(options) {\n  options.data.containerElement = !options ? null : options.containerId ? document.getElementById(options.containerId) : options.container && options.container.nodeType ? options.container : document;\n};\n\nvar animateTopScroll = function animateTopScroll(scrollOffset, options, to, target) {\n  options.data = options.data || makeData();\n  window.clearTimeout(options.data.delayTimeout);\n\n  _cancelEvents2.default.subscribe(function () {\n    options.data.cancel = true;\n  });\n\n  setContainer(options);\n  options.data.start = null;\n  options.data.cancel = false;\n  options.data.startPosition = options.horizontal ? currentPositionX(options) : currentPositionY(options);\n  options.data.targetPosition = options.absolute ? scrollOffset : scrollOffset + options.data.startPosition;\n\n  if (options.data.startPosition === options.data.targetPosition) {\n    if (_scrollEvents2.default.registered['end']) {\n      _scrollEvents2.default.registered['end'](options.data.to, options.data.target, options.data.currentPosition);\n    }\n\n    return;\n  }\n\n  options.data.delta = Math.round(options.data.targetPosition - options.data.startPosition);\n  options.data.duration = functionWrapper(options.duration)(options.data.delta);\n  options.data.duration = isNaN(parseFloat(options.data.duration)) ? 1000 : parseFloat(options.data.duration);\n  options.data.to = to;\n  options.data.target = target;\n  var easing = getAnimationType(options);\n  var easedAnimate = animateScroll.bind(null, easing, options);\n\n  if (options && options.delay > 0) {\n    options.data.delayTimeout = window.setTimeout(function () {\n      if (_scrollEvents2.default.registered['begin']) {\n        _scrollEvents2.default.registered['begin'](options.data.to, options.data.target);\n      }\n\n      requestAnimationFrameHelper.call(window, easedAnimate);\n    }, options.delay);\n    return;\n  }\n\n  if (_scrollEvents2.default.registered['begin']) {\n    _scrollEvents2.default.registered['begin'](options.data.to, options.data.target);\n  }\n\n  requestAnimationFrameHelper.call(window, easedAnimate);\n};\n\nvar proceedOptions = function proceedOptions(options) {\n  options = _extends({}, options);\n  options.data = options.data || makeData();\n  options.absolute = true;\n  return options;\n};\n\nvar scrollToTop = function scrollToTop(options) {\n  animateTopScroll(0, proceedOptions(options));\n};\n\nvar scrollTo = function scrollTo(toPosition, options) {\n  animateTopScroll(toPosition, proceedOptions(options));\n};\n\nvar scrollToBottom = function scrollToBottom(options) {\n  options = proceedOptions(options);\n  setContainer(options);\n  animateTopScroll(options.horizontal ? scrollContainerWidth(options) : scrollContainerHeight(options), options);\n};\n\nvar scrollMore = function scrollMore(toPosition, options) {\n  options = proceedOptions(options);\n  setContainer(options);\n  var currentPosition = options.horizontal ? currentPositionX(options) : currentPositionY(options);\n  animateTopScroll(toPosition + currentPosition, options);\n};\n\nexports.default = {\n  animateTopScroll: animateTopScroll,\n  getAnimationType: getAnimationType,\n  scrollToTop: scrollToTop,\n  scrollToBottom: scrollToBottom,\n  scrollTo: scrollTo,\n  scrollMore: scrollMore\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _passiveEventListeners = require('./passive-event-listeners');\n\nvar events = ['mousedown', 'mousewheel', 'touchmove', 'keydown'];\nexports.default = {\n  subscribe: function subscribe(cancelEvent) {\n    return typeof document !== 'undefined' && events.forEach(function (event) {\n      return (0, _passiveEventListeners.addPassiveEventListener)(document, event, cancelEvent);\n    });\n  }\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/*\r\n * Tell the browser that the event listener won't prevent a scroll.\r\n * Allowing the browser to continue scrolling without having to\r\n * to wait for the listener to return.\r\n */\n\nvar addPassiveEventListener = exports.addPassiveEventListener = function addPassiveEventListener(target, eventName, listener) {\n  var supportsPassiveOption = function () {\n    var supportsPassiveOption = false;\n\n    try {\n      var opts = Object.defineProperty({}, 'passive', {\n        get: function get() {\n          supportsPassiveOption = true;\n        }\n      });\n      window.addEventListener('test', null, opts);\n    } catch (e) {}\n\n    return supportsPassiveOption;\n  }();\n\n  target.addEventListener(eventName, listener, supportsPassiveOption ? {\n    passive: true\n  } : false);\n};\n\nvar removePassiveEventListener = exports.removePassiveEventListener = function removePassiveEventListener(target, eventName, listener) {\n  target.removeEventListener(eventName, listener);\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _scroller = require('./scroller');\n\nvar _scroller2 = _interopRequireDefault(_scroller);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nexports.default = function (Component) {\n  var Element = function (_React$Component) {\n    _inherits(Element, _React$Component);\n\n    function Element(props) {\n      _classCallCheck(this, Element);\n\n      var _this = _possibleConstructorReturn(this, (Element.__proto__ || Object.getPrototypeOf(Element)).call(this, props));\n\n      _this.childBindings = {\n        domNode: null\n      };\n      return _this;\n    }\n\n    _createClass(Element, [{\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        if (typeof window === 'undefined') {\n          return false;\n        }\n\n        this.registerElems(this.props.name);\n      }\n    }, {\n      key: 'componentDidUpdate',\n      value: function componentDidUpdate(prevProps) {\n        if (this.props.name !== prevProps.name) {\n          this.registerElems(this.props.name);\n        }\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        if (typeof window === 'undefined') {\n          return false;\n        }\n\n        _scroller2.default.unregister(this.props.name);\n      }\n    }, {\n      key: 'registerElems',\n      value: function registerElems(name) {\n        _scroller2.default.register(name, this.childBindings.domNode);\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return _react2.default.createElement(Component, _extends({}, this.props, {\n          parentBindings: this.childBindings\n        }));\n      }\n    }]);\n\n    return Element;\n  }(_react2.default.Component);\n\n  ;\n  Element.propTypes = {\n    name: _propTypes2.default.string,\n    id: _propTypes2.default.string\n  };\n  return Element;\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Events = {\n  registered: {},\n  scrollEvent: {\n    register: function register(evtName, callback) {\n      Events.registered[evtName] = callback;\n    },\n    remove: function remove(evtName) {\n      Events.registered[evtName] = null;\n    }\n  }\n};\nexports.default = Events;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _passiveEventListeners = require('./passive-event-listeners');\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar scrollHash = {\n  mountFlag: false,\n  initialized: false,\n  scroller: null,\n  containers: {},\n  mount: function mount(scroller) {\n    this.scroller = scroller;\n    this.handleHashChange = this.handleHashChange.bind(this);\n    window.addEventListener('hashchange', this.handleHashChange);\n    this.initStateFromHash();\n    this.mountFlag = true;\n  },\n  mapContainer: function mapContainer(to, container) {\n    this.containers[to] = container;\n  },\n  isMounted: function isMounted() {\n    return this.mountFlag;\n  },\n  isInitialized: function isInitialized() {\n    return this.initialized;\n  },\n  initStateFromHash: function initStateFromHash() {\n    var _this = this;\n\n    var hash = this.getHash();\n\n    if (hash) {\n      window.setTimeout(function () {\n        _this.scrollTo(hash, true);\n\n        _this.initialized = true;\n      }, 10);\n    } else {\n      this.initialized = true;\n    }\n  },\n  scrollTo: function scrollTo(to, isInit) {\n    var scroller = this.scroller;\n    var element = scroller.get(to);\n\n    if (element && (isInit || to !== scroller.getActiveLink())) {\n      var container = this.containers[to] || document;\n      scroller.scrollTo(to, {\n        container: container\n      });\n    }\n  },\n  getHash: function getHash() {\n    return _utils2.default.getHash();\n  },\n  changeHash: function changeHash(to, saveHashHistory) {\n    if (this.isInitialized() && _utils2.default.getHash() !== to) {\n      _utils2.default.updateHash(to, saveHashHistory);\n    }\n  },\n  handleHashChange: function handleHashChange() {\n    this.scrollTo(this.getHash());\n  },\n  unmount: function unmount() {\n    this.scroller = null;\n    this.containers = null;\n    window.removeEventListener('hashchange', this.handleHashChange);\n  }\n};\nexports.default = scrollHash;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _scrollSpy = require('./scroll-spy');\n\nvar _scrollSpy2 = _interopRequireDefault(_scrollSpy);\n\nvar _scroller = require('./scroller');\n\nvar _scroller2 = _interopRequireDefault(_scroller);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _scrollHash = require('./scroll-hash');\n\nvar _scrollHash2 = _interopRequireDefault(_scrollHash);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar protoTypes = {\n  to: _propTypes2.default.string.isRequired,\n  containerId: _propTypes2.default.string,\n  container: _propTypes2.default.object,\n  activeClass: _propTypes2.default.string,\n  spy: _propTypes2.default.bool,\n  horizontal: _propTypes2.default.bool,\n  smooth: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.string]),\n  offset: _propTypes2.default.number,\n  delay: _propTypes2.default.number,\n  isDynamic: _propTypes2.default.bool,\n  onClick: _propTypes2.default.func,\n  duration: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.func]),\n  absolute: _propTypes2.default.bool,\n  onSetActive: _propTypes2.default.func,\n  onSetInactive: _propTypes2.default.func,\n  ignoreCancelEvents: _propTypes2.default.bool,\n  hashSpy: _propTypes2.default.bool,\n  saveHashHistory: _propTypes2.default.bool,\n  spyThrottle: _propTypes2.default.number\n};\n\nexports.default = function (Component, customScroller) {\n  var scroller = customScroller || _scroller2.default;\n\n  var Link = function (_React$PureComponent) {\n    _inherits(Link, _React$PureComponent);\n\n    function Link(props) {\n      _classCallCheck(this, Link);\n\n      var _this = _possibleConstructorReturn(this, (Link.__proto__ || Object.getPrototypeOf(Link)).call(this, props));\n\n      _initialiseProps.call(_this);\n\n      _this.state = {\n        active: false\n      };\n      return _this;\n    }\n\n    _createClass(Link, [{\n      key: 'getScrollSpyContainer',\n      value: function getScrollSpyContainer() {\n        var containerId = this.props.containerId;\n        var container = this.props.container;\n\n        if (containerId && !container) {\n          return document.getElementById(containerId);\n        }\n\n        if (container && container.nodeType) {\n          return container;\n        }\n\n        return document;\n      }\n    }, {\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        if (this.props.spy || this.props.hashSpy) {\n          var scrollSpyContainer = this.getScrollSpyContainer();\n\n          if (!_scrollSpy2.default.isMounted(scrollSpyContainer)) {\n            _scrollSpy2.default.mount(scrollSpyContainer, this.props.spyThrottle);\n          }\n\n          if (this.props.hashSpy) {\n            if (!_scrollHash2.default.isMounted()) {\n              _scrollHash2.default.mount(scroller);\n            }\n\n            _scrollHash2.default.mapContainer(this.props.to, scrollSpyContainer);\n          }\n\n          _scrollSpy2.default.addSpyHandler(this.spyHandler, scrollSpyContainer);\n\n          this.setState({\n            container: scrollSpyContainer\n          });\n        }\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        _scrollSpy2.default.unmount(this.stateHandler, this.spyHandler);\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var className = \"\";\n\n        if (this.state && this.state.active) {\n          className = ((this.props.className || \"\") + \" \" + (this.props.activeClass || \"active\")).trim();\n        } else {\n          className = this.props.className;\n        }\n\n        var props = _extends({}, this.props);\n\n        for (var prop in protoTypes) {\n          if (props.hasOwnProperty(prop)) {\n            delete props[prop];\n          }\n        }\n\n        props.className = className;\n        props.onClick = this.handleClick;\n        return _react2.default.createElement(Component, props);\n      }\n    }]);\n\n    return Link;\n  }(_react2.default.PureComponent);\n\n  var _initialiseProps = function _initialiseProps() {\n    var _this2 = this;\n\n    this.scrollTo = function (to, props) {\n      scroller.scrollTo(to, _extends({}, _this2.state, props));\n    };\n\n    this.handleClick = function (event) {\n      /*\r\n       * give the posibility to override onClick\r\n       */\n      if (_this2.props.onClick) {\n        _this2.props.onClick(event);\n      }\n      /*\r\n       * dont bubble the navigation\r\n       */\n\n\n      if (event.stopPropagation) event.stopPropagation();\n      if (event.preventDefault) event.preventDefault();\n      /*\r\n       * do the magic!\r\n       */\n\n      _this2.scrollTo(_this2.props.to, _this2.props);\n    };\n\n    this.spyHandler = function (x, y) {\n      var scrollSpyContainer = _this2.getScrollSpyContainer();\n\n      if (_scrollHash2.default.isMounted() && !_scrollHash2.default.isInitialized()) {\n        return;\n      }\n\n      var horizontal = _this2.props.horizontal;\n      var to = _this2.props.to;\n      var element = null;\n      var isInside = void 0;\n      var isOutside = void 0;\n\n      if (horizontal) {\n        var elemLeftBound = 0;\n        var elemRightBound = 0;\n        var containerLeft = 0;\n\n        if (scrollSpyContainer.getBoundingClientRect) {\n          var containerCords = scrollSpyContainer.getBoundingClientRect();\n          containerLeft = containerCords.left;\n        }\n\n        if (!element || _this2.props.isDynamic) {\n          element = scroller.get(to);\n\n          if (!element) {\n            return;\n          }\n\n          var cords = element.getBoundingClientRect();\n          elemLeftBound = cords.left - containerLeft + x;\n          elemRightBound = elemLeftBound + cords.width;\n        }\n\n        var offsetX = x - _this2.props.offset;\n        isInside = offsetX >= Math.floor(elemLeftBound) && offsetX < Math.floor(elemRightBound);\n        isOutside = offsetX < Math.floor(elemLeftBound) || offsetX >= Math.floor(elemRightBound);\n      } else {\n        var elemTopBound = 0;\n        var elemBottomBound = 0;\n        var containerTop = 0;\n\n        if (scrollSpyContainer.getBoundingClientRect) {\n          var _containerCords = scrollSpyContainer.getBoundingClientRect();\n\n          containerTop = _containerCords.top;\n        }\n\n        if (!element || _this2.props.isDynamic) {\n          element = scroller.get(to);\n\n          if (!element) {\n            return;\n          }\n\n          var _cords = element.getBoundingClientRect();\n\n          elemTopBound = _cords.top - containerTop + y;\n          elemBottomBound = elemTopBound + _cords.height;\n        }\n\n        var offsetY = y - _this2.props.offset;\n        isInside = offsetY >= Math.floor(elemTopBound) && offsetY < Math.floor(elemBottomBound);\n        isOutside = offsetY < Math.floor(elemTopBound) || offsetY >= Math.floor(elemBottomBound);\n      }\n\n      var activeLink = scroller.getActiveLink();\n\n      if (isOutside) {\n        if (to === activeLink) {\n          scroller.setActiveLink(void 0);\n        }\n\n        if (_this2.props.hashSpy && _scrollHash2.default.getHash() === to) {\n          var _props$saveHashHistor = _this2.props.saveHashHistory,\n              saveHashHistory = _props$saveHashHistor === undefined ? false : _props$saveHashHistor;\n\n          _scrollHash2.default.changeHash(\"\", saveHashHistory);\n        }\n\n        if (_this2.props.spy && _this2.state.active) {\n          _this2.setState({\n            active: false\n          });\n\n          _this2.props.onSetInactive && _this2.props.onSetInactive(to, element);\n        }\n      }\n\n      if (isInside && (activeLink !== to || _this2.state.active === false)) {\n        scroller.setActiveLink(to);\n\n        var _props$saveHashHistor2 = _this2.props.saveHashHistory,\n            _saveHashHistory = _props$saveHashHistor2 === undefined ? false : _props$saveHashHistor2;\n\n        _this2.props.hashSpy && _scrollHash2.default.changeHash(to, _saveHashHistory);\n\n        if (_this2.props.spy) {\n          _this2.setState({\n            active: true\n          });\n\n          _this2.props.onSetActive && _this2.props.onSetActive(to, element);\n        }\n      }\n    };\n  };\n\n  ;\n  Link.propTypes = protoTypes;\n  Link.defaultProps = {\n    offset: 0\n  };\n  return Link;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodash = require('lodash.throttle');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _passiveEventListeners = require('./passive-event-listeners');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n} // The eventHandler will execute at a rate of 15fps by default\n\n\nvar eventThrottler = function eventThrottler(eventHandler) {\n  var throttleAmount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 66;\n  return (0, _lodash2.default)(eventHandler, throttleAmount);\n};\n\nvar scrollSpy = {\n  spyCallbacks: [],\n  spySetState: [],\n  scrollSpyContainers: [],\n  mount: function mount(scrollSpyContainer, throttle) {\n    if (scrollSpyContainer) {\n      var eventHandler = eventThrottler(function (event) {\n        scrollSpy.scrollHandler(scrollSpyContainer);\n      }, throttle);\n      scrollSpy.scrollSpyContainers.push(scrollSpyContainer);\n      (0, _passiveEventListeners.addPassiveEventListener)(scrollSpyContainer, 'scroll', eventHandler);\n    }\n  },\n  isMounted: function isMounted(scrollSpyContainer) {\n    return scrollSpy.scrollSpyContainers.indexOf(scrollSpyContainer) !== -1;\n  },\n  currentPositionX: function currentPositionX(scrollSpyContainer) {\n    if (scrollSpyContainer === document) {\n      var supportPageOffset = window.pageYOffset !== undefined;\n      var isCSS1Compat = (document.compatMode || \"\") === \"CSS1Compat\";\n      return supportPageOffset ? window.pageXOffset : isCSS1Compat ? document.documentElement.scrollLeft : document.body.scrollLeft;\n    } else {\n      return scrollSpyContainer.scrollLeft;\n    }\n  },\n  currentPositionY: function currentPositionY(scrollSpyContainer) {\n    if (scrollSpyContainer === document) {\n      var supportPageOffset = window.pageXOffset !== undefined;\n      var isCSS1Compat = (document.compatMode || \"\") === \"CSS1Compat\";\n      return supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop;\n    } else {\n      return scrollSpyContainer.scrollTop;\n    }\n  },\n  scrollHandler: function scrollHandler(scrollSpyContainer) {\n    var callbacks = scrollSpy.scrollSpyContainers[scrollSpy.scrollSpyContainers.indexOf(scrollSpyContainer)].spyCallbacks || [];\n    callbacks.forEach(function (c) {\n      return c(scrollSpy.currentPositionX(scrollSpyContainer), scrollSpy.currentPositionY(scrollSpyContainer));\n    });\n  },\n  addStateHandler: function addStateHandler(handler) {\n    scrollSpy.spySetState.push(handler);\n  },\n  addSpyHandler: function addSpyHandler(handler, scrollSpyContainer) {\n    var container = scrollSpy.scrollSpyContainers[scrollSpy.scrollSpyContainers.indexOf(scrollSpyContainer)];\n\n    if (!container.spyCallbacks) {\n      container.spyCallbacks = [];\n    }\n\n    container.spyCallbacks.push(handler);\n    handler(scrollSpy.currentPositionX(scrollSpyContainer), scrollSpy.currentPositionY(scrollSpyContainer));\n  },\n  updateStates: function updateStates() {\n    scrollSpy.spySetState.forEach(function (s) {\n      return s();\n    });\n  },\n  unmount: function unmount(stateHandler, spyHandler) {\n    scrollSpy.scrollSpyContainers.forEach(function (c) {\n      return c.spyCallbacks && c.spyCallbacks.length && c.spyCallbacks.splice(c.spyCallbacks.indexOf(spyHandler), 1);\n    });\n\n    if (scrollSpy.spySetState && scrollSpy.spySetState.length) {\n      scrollSpy.spySetState.splice(scrollSpy.spySetState.indexOf(stateHandler), 1);\n    }\n\n    document.removeEventListener('scroll', scrollSpy.scrollHandler);\n  },\n  update: function update() {\n    return scrollSpy.scrollSpyContainers.forEach(function (c) {\n      return scrollSpy.scrollHandler(c);\n    });\n  }\n};\nexports.default = scrollSpy;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _animateScroll = require('./animate-scroll');\n\nvar _animateScroll2 = _interopRequireDefault(_animateScroll);\n\nvar _scrollEvents = require('./scroll-events');\n\nvar _scrollEvents2 = _interopRequireDefault(_scrollEvents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar __mapped = {};\n\nvar __activeLink = void 0;\n\nexports.default = {\n  unmount: function unmount() {\n    __mapped = {};\n  },\n  register: function register(name, element) {\n    __mapped[name] = element;\n  },\n  unregister: function unregister(name) {\n    delete __mapped[name];\n  },\n  get: function get(name) {\n    return __mapped[name] || document.getElementById(name) || document.getElementsByName(name)[0] || document.getElementsByClassName(name)[0];\n  },\n  setActiveLink: function setActiveLink(link) {\n    return __activeLink = link;\n  },\n  getActiveLink: function getActiveLink() {\n    return __activeLink;\n  },\n  scrollTo: function scrollTo(to, props) {\n    var target = this.get(to);\n\n    if (!target) {\n      console.warn(\"target Element not found\");\n      return;\n    }\n\n    props = _extends({}, props, {\n      absolute: false\n    });\n    var containerId = props.containerId;\n    var container = props.container;\n    var containerElement = void 0;\n\n    if (containerId) {\n      containerElement = document.getElementById(containerId);\n    } else if (container && container.nodeType) {\n      containerElement = container;\n    } else {\n      containerElement = document;\n    }\n\n    props.absolute = true;\n    var horizontal = props.horizontal;\n    var scrollOffset = _utils2.default.scrollOffset(containerElement, target, horizontal) + (props.offset || 0);\n    /*\r\n     * if animate is not provided just scroll into the view\r\n     */\n\n    if (!props.smooth) {\n      if (_scrollEvents2.default.registered['begin']) {\n        _scrollEvents2.default.registered['begin'](to, target);\n      }\n\n      if (containerElement === document) {\n        if (props.horizontal) {\n          window.scrollTo(scrollOffset, 0);\n        } else {\n          window.scrollTo(0, scrollOffset);\n        }\n      } else {\n        containerElement.scrollTop = scrollOffset;\n      }\n\n      if (_scrollEvents2.default.registered['end']) {\n        _scrollEvents2.default.registered['end'](to, target);\n      }\n\n      return;\n    }\n    /*\r\n     * Animate scrolling\r\n     */\n\n\n    _animateScroll2.default.animateTopScroll(scrollOffset, props, to, target);\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  /*\r\n   * https://github.com/oblador/angular-scroll (duScrollDefaultEasing)\r\n   */\n  defaultEasing: function defaultEasing(x) {\n    if (x < 0.5) {\n      return Math.pow(x * 2, 2) / 2;\n    }\n\n    return 1 - Math.pow((1 - x) * 2, 2) / 2;\n  },\n\n  /*\r\n   * https://gist.github.com/gre/1650294\r\n   */\n  // no easing, no acceleration\n  linear: function linear(x) {\n    return x;\n  },\n  // accelerating from zero velocity\n  easeInQuad: function easeInQuad(x) {\n    return x * x;\n  },\n  // decelerating to zero velocity\n  easeOutQuad: function easeOutQuad(x) {\n    return x * (2 - x);\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: function easeInOutQuad(x) {\n    return x < .5 ? 2 * x * x : -1 + (4 - 2 * x) * x;\n  },\n  // accelerating from zero velocity \n  easeInCubic: function easeInCubic(x) {\n    return x * x * x;\n  },\n  // decelerating to zero velocity π\n  easeOutCubic: function easeOutCubic(x) {\n    return --x * x * x + 1;\n  },\n  // acceleration until halfway, then deceleration \n  easeInOutCubic: function easeInOutCubic(x) {\n    return x < .5 ? 4 * x * x * x : (x - 1) * (2 * x - 2) * (2 * x - 2) + 1;\n  },\n  // accelerating from zero velocity \n  easeInQuart: function easeInQuart(x) {\n    return x * x * x * x;\n  },\n  // decelerating to zero velocity \n  easeOutQuart: function easeOutQuart(x) {\n    return 1 - --x * x * x * x;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: function easeInOutQuart(x) {\n    return x < .5 ? 8 * x * x * x * x : 1 - 8 * --x * x * x * x;\n  },\n  // accelerating from zero velocity\n  easeInQuint: function easeInQuint(x) {\n    return x * x * x * x * x;\n  },\n  // decelerating to zero velocity\n  easeOutQuint: function easeOutQuint(x) {\n    return 1 + --x * x * x * x * x;\n  },\n  // acceleration until halfway, then deceleration \n  easeInOutQuint: function easeInOutQuint(x) {\n    return x < .5 ? 16 * x * x * x * x * x : 1 + 16 * --x * x * x * x * x;\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar updateHash = function updateHash(hash, historyUpdate) {\n  var hashVal = hash.indexOf(\"#\") === 0 ? hash.substring(1) : hash;\n  var hashToUpdate = hashVal ? \"#\" + hashVal : \"\";\n  var curLoc = window && window.location;\n  var urlToPush = hashToUpdate ? curLoc.pathname + curLoc.search + hashToUpdate : curLoc.pathname + curLoc.search;\n  historyUpdate ? history.pushState(null, \"\", urlToPush) : history.replaceState(null, \"\", urlToPush);\n};\n\nvar getHash = function getHash() {\n  return window.location.hash.replace(/^#/, \"\");\n};\n\nvar filterElementInContainer = function filterElementInContainer(container) {\n  return function (element) {\n    return container.contains ? container != element && container.contains(element) : !!(container.compareDocumentPosition(element) & 16);\n  };\n};\n\nvar isPositioned = function isPositioned(element) {\n  return getComputedStyle(element).position !== \"static\";\n};\n\nvar getElementOffsetInfoUntil = function getElementOffsetInfoUntil(element, predicate) {\n  var offsetTop = element.offsetTop;\n  var currentOffsetParent = element.offsetParent;\n\n  while (currentOffsetParent && !predicate(currentOffsetParent)) {\n    offsetTop += currentOffsetParent.offsetTop;\n    currentOffsetParent = currentOffsetParent.offsetParent;\n  }\n\n  return {\n    offsetTop: offsetTop,\n    offsetParent: currentOffsetParent\n  };\n};\n\nvar scrollOffset = function scrollOffset(c, t, horizontal) {\n  if (horizontal) {\n    return c === document ? t.getBoundingClientRect().left + (window.scrollX || window.pageXOffset) : getComputedStyle(c).position !== \"static\" ? t.offsetLeft : t.offsetLeft - c.offsetLeft;\n  } else {\n    if (c === document) {\n      return t.getBoundingClientRect().top + (window.scrollY || window.pageYOffset);\n    } // The offsetParent of an element, according to MDN, is its nearest positioned\n    // (an element whose position is anything other than static) ancestor. The offsetTop\n    // of an element is taken with respect to its offsetParent which may not neccessarily\n    // be its parentElement except the parent itself is positioned.\n    // So if containerElement is positioned, then it must be an offsetParent somewhere\n    // If it happens that targetElement is a descendant of the containerElement, and there\n    // is not intermediate positioned element between the two of them, i.e.\n    // targetElement\"s offsetParent is the same as the containerElement, then the\n    // distance between the two will be the offsetTop of the targetElement.\n    // If, on the other hand, there are intermediate positioned elements between the\n    // two entities, the distance between the targetElement and the containerElement\n    // will be the accumulation of the offsetTop of the element and that of its\n    // subsequent offsetParent until the containerElement is reached, since it\n    // will also be an offsetParent at some point due to the fact that it is positioned.\n    // If the containerElement is not positioned, then it can\"t be an offsetParent,\n    // which means that the offsetTop of the targetElement would not be with respect to it.\n    // However, if the two of them happen to have the same offsetParent, then\n    // the distance between them will be the difference between their offsetTop\n    // since they are both taken with respect to the same entity.\n    // The last resort would be to accumulate their offsetTop until a common\n    // offsetParent is reached (usually the document) and taking the difference\n    // between the accumulated offsetTops\n\n\n    if (isPositioned(c)) {\n      if (t.offsetParent !== c) {\n        var isContainerElementOrDocument = function isContainerElementOrDocument(e) {\n          return e === c || e === document;\n        };\n\n        var _getElementOffsetInfo = getElementOffsetInfoUntil(t, isContainerElementOrDocument),\n            offsetTop = _getElementOffsetInfo.offsetTop,\n            offsetParent = _getElementOffsetInfo.offsetParent;\n\n        if (offsetParent !== c) {\n          throw new Error(\"Seems containerElement is not an ancestor of the Element\");\n        }\n\n        return offsetTop;\n      }\n\n      return t.offsetTop;\n    }\n\n    if (t.offsetParent === c.offsetParent) {\n      return t.offsetTop - c.offsetTop;\n    }\n\n    var isDocument = function isDocument(e) {\n      return e === document;\n    };\n\n    return getElementOffsetInfoUntil(t, isDocument).offsetTop - getElementOffsetInfoUntil(c, isDocument).offsetTop;\n  }\n};\n\nexports.default = {\n  updateHash: updateHash,\n  getHash: getHash,\n  filterElementInContainer: filterElementInContainer,\n  scrollOffset: scrollOffset\n};","export const download = (data: string, fileName: string, fileType: string) => {\n  const blob = new Blob([data], { type: fileType });\n  const a = document.createElement(\"a\");\n  a.download = fileName;\n  a.href = window.URL.createObjectURL(blob);\n  const clickEvt = new MouseEvent(\"click\", {\n    view: window,\n    bubbles: true,\n    cancelable: true,\n  });\n  a.dispatchEvent(clickEvt);\n  a.remove();\n};\n","import { utils } from \"geo4326\";\n\nimport type {\n  GeoJSON,\n  Feature,\n  Point,\n  MultiPoint,\n  LineString,\n  MultiLineString,\n  Polygon,\n  MultiPolygon,\n  GeoJsonObject,\n} from \"geojson\";\n\nexport const parsedLinearRing = (data: string): number[][] | null => {\n  try {\n    const json = JSON.parse(\n      data.replace(/\\r?\\n/g, \"\").replace(/\\s+/g, \"\").replace(/],]$/g, \"]]\")\n    );\n    if (Array.isArray(json)) {\n      json.forEach(p => {\n        if (!Array.isArray(p)) throw new Error();\n        p.forEach(v => {\n          if (typeof v !== \"number\") throw new Error();\n        });\n      });\n\n      if (\n        json[0][0] !== json[json.length - 1][0] ||\n        json[0][1] !== json[json.length - 1][1]\n      ) {\n        json.push(json[0]);\n      }\n      if (json.length < 4) throw new Error();\n\n      if (!utils.isCcw(json)) {\n        json.reverse();\n      }\n\n      return json;\n    }\n  } catch {\n    return null;\n  }\n  return null;\n};\n\nexport const getPolygon = (geojson: GeoJSON): Polygon | null => {\n  switch (geojson?.type) {\n    case \"Polygon\": {\n      return geojson;\n    }\n    case \"MultiPolygon\": {\n      return {\n        type: \"Polygon\",\n        coordinates: geojson.coordinates[0],\n      };\n    }\n    case \"Feature\": {\n      return getPolygon(geojson.geometry);\n    }\n    case \"FeatureCollection\": {\n      for (let i = 0; i < geojson.features.length; i++) {\n        const item = getPolygon(geojson.features[i]);\n        if (item) return item;\n      }\n      break;\n    }\n    case \"GeometryCollection\":\n      {\n        for (let i = 0; i < geojson.geometries.length; i++) {\n          const item = getPolygon(geojson.geometries[i]);\n          if (item) return item;\n        }\n      }\n      break;\n  }\n  return null;\n};\n\ntype Crs = {\n  crs?: {\n    type?: string;\n    properties?: {\n      name?: string;\n    };\n  };\n};\n\ntype GeometryWithCRS = (\n  | Point\n  | MultiPoint\n  | LineString\n  | MultiLineString\n  | Polygon\n  | MultiPolygon\n) &\n  Crs;\n\nexport type FeatureWithCRS = Feature<GeometryWithCRS> & Crs;\n\ntype FeatureCollectionWithCRS = {\n  type: \"FeatureCollection\";\n  features: Array<FeatureWithCRS>;\n} & GeoJsonObject &\n  Crs;\n\ntype GeometryCollectionWithCRS = {\n  type: \"GeometryCollection\";\n  geometries: Array<GeometryWithCRS>;\n} & GeoJsonObject &\n  Crs;\n\nexport type GeoJSONWithCRS =\n  | GeometryWithCRS\n  | FeatureWithCRS\n  | FeatureCollectionWithCRS\n  | GeometryCollectionWithCRS;\n\nconst _getEPSG = (\n  geojson: GeoJSONWithCRS | null,\n  geometryTypes: string[]\n): { type: string | null; code: number | null } => {\n  const getCode = (geojson: GeoJSONWithCRS): number | null => {\n    const crs = geojson?.crs?.properties?.name;\n    const code = crs && crs.replace(/^.*EPSG::/, \"\");\n    return code ? parseInt(code, 10) : null;\n  };\n  if (geojson) {\n    if (geometryTypes.includes(geojson?.type || \"\")) {\n      return {\n        type: geojson.type || null,\n        code: getCode(geojson),\n      };\n    }\n    switch (geojson?.type) {\n      case \"Feature\": {\n        const child = _getEPSG(geojson?.geometry, geometryTypes);\n        if (child.code !== null) return child;\n        if (geometryTypes.includes(child?.type || \"\")) {\n          const parentCode = getCode(geojson);\n          return {\n            type: child.type || null,\n            code: parentCode,\n          };\n        }\n        break;\n      }\n      case \"FeatureCollection\": {\n        for (let i = 0; i < geojson.features.length; i++) {\n          const child = _getEPSG(geojson?.features[i], geometryTypes);\n          if (geometryTypes.includes(child?.type || \"\")) {\n            if (child.code !== null) {\n              return child;\n            }\n\n            const parentCode = getCode(geojson);\n            return {\n              type: child.type,\n              code: parentCode,\n            };\n          }\n        }\n        break;\n      }\n      case \"GeometryCollection\": {\n        for (let i = 0; i < geojson.geometries.length; i++) {\n          const child = _getEPSG(geojson?.geometries[i], geometryTypes);\n          if (geometryTypes.includes(child?.type || \"\")) {\n            if (child.code !== null) {\n              return child;\n            }\n\n            const parentCode = getCode(geojson);\n            return {\n              type: child.type || null,\n              code: parentCode,\n            };\n          }\n        }\n        break;\n      }\n    }\n  }\n  return {\n    type: geojson?.type || null,\n    code: null,\n  };\n};\n\nexport const getEPSGcode = (\n  geojson: GeoJSONWithCRS,\n  geometryTypes: string[]\n): number | null => {\n  /**\n   * crs member is removed officaly.\n   * GeoJSON coordinates is using WGS84(EPSG:4326).\n   * https://datatracker.ietf.org/doc/html/rfc7946#section-4\n   */\n  const epsg = _getEPSG(geojson, geometryTypes);\n  if (geometryTypes.includes(epsg?.type || \"\")) {\n    return epsg.code === null ? 4326 : epsg.code;\n  }\n  return null;\n};\n"],"names":["_interopRequireDefault","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","getInputAdornmentUtilityClass","slot","generateUtilityClass","_excluded","InputAdornmentRoot","styled","name","overridesResolver","props","styles","ownerState","root","concat","capitalize","position","disablePointerEvents","variant","_ref","theme","display","height","maxHeight","alignItems","whiteSpace","color","palette","action","active","marginTop","marginRight","marginLeft","pointerEvents","inProps","ref","useThemeProps","children","className","_props$component","component","_props$disablePointer","_props$disableTypogra","disableTypography","variantProp","other","muiFormControl","useFormControl","hiddenLabel","size","classes","slots","composeClasses","useUtilityClasses","FormControlContext","value","as","dangerouslySetInnerHTML","__html","Typography","getSwitchUtilityClass","SwitchRoot","edge","_ref2","width","overflow","padding","boxSizing","flexShrink","zIndex","verticalAlign","colorAdjust","transform","SwitchSwitchBase","SwitchBase","switchBase","input","_ref4","_ref5","top","left","mode","common","white","grey","transition","transitions","create","duration","shortest","opacity","_ref6","_ref7","backgroundColor","hoverOpacity","main","SwitchTrack","track","_ref8","borderRadius","black","SwitchThumb","thumb","_ref9","boxShadow","shadows","_props$color","_props$edge","_props$size","sx","checked","disabled","composedClasses","icon","type","checkedIcon","useMediaQuery","queryInput","options","arguments","length","undefined","supportMatchMedia","window","matchMedia","_getThemeProps","_getThemeProps$defaul","defaultMatches","_getThemeProps$matchM","_getThemeProps$noSsr","noSsr","_getThemeProps$ssrMat","ssrMatchMedia","query","replace","_React$useState","matches","_React$useState2","match","setMatch","queryList","updateMatch","addListener","removeListener","FUNC_ERROR_TEXT","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeGlobal","g","Object","freeSelf","self","Function","objectToString","prototype","toString","nativeMax","Math","max","nativeMin","min","now","Date","debounce","func","wait","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","apply","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","remainingWait","debounced","isInvoking","this","toNumber","isObject","cancel","clearTimeout","flush","isObjectLike","call","isSymbol","valueOf","isBinary","test","slice","module","ARRAY_BUFFER","JSON","TEXT","XML","_extendStatics","__extends","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","String","__","constructor","Feature","_super","opt_geometryOrProperties","_this","on","once","un","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","addChangeListener","handleGeometryChanged_","getSimplifiedGeometry","geometry","setGeometry","properties","setProperties","clone","hasProperties","getProperties","setGeometryName","getGeometryName","getGeometry","style","getStyle","setStyle","get","getId","getStyleFunction","handleGeometryChange_","changed","EventType","set","opt_style","obj","styles_1","isArray","getZIndex","createStyleFunction","setId","id","removeChangeListener","cloneGeometries","geometries","clonedGeometries","i","ii","push","GeometryCollection","opt_geometries","geometries_","changeEventsKeys_","listenGeometriesChange_","unlistenGeometriesChange_","forEach","geometryCollection","setGeometries","applyProperties","closestPointXY","x","y","closestPoint","minSquaredDistance","getExtent","containsXY","computeExtent","extent","getGeometries","getGeometriesArray","getGeometriesArrayRecursive","geometriesArray","getType","squaredTolerance","simplifiedGeometryRevision","getRevision","simplifiedGeometryMaxMinSquaredTolerance","simplifiedGeometries","simplified","simplifiedGeometry","simplifiedGeometryCollection","setGeometriesArray","GeometryType","intersectsExtent","isEmpty","rotate","angle","anchor","scale","opt_sy","opt_anchor","applyTransform","transformFn","translate","deltaX","deltaY","disposeInternal","Geometry","FeatureFormat","dataProjection","defaultFeatureProjection","supportedMediaTypes","getReadOptions","source","opt_options","readProjection","getUnits","Units","setWorldExtent","featureProjection","adaptOptions","readFeature","readFeatures","readGeometry","writeFeature","feature","writeFeatures","features","writeGeometry","transformGeometryWithOptions","write","transformed","decimals","power_1","pow","coordinates","round","getObject","object","parse","JSONFeature","FormatType","readFeatureFromObject","readFeaturesFromObject","readGeometryFromObject","readProjectionFromObject","stringify","writeFeatureObject","writeFeaturesObject","writeGeometryObject","interpolatePoint","flatCoordinates","offset","end","stride","fraction","opt_dest","opt_dimension","o","t","n","x1","y1","length_1","cumulativeLengths","x2","y2","sqrt","target","index","dimension","dest","NaN","lineStringCoordinateAtM","m","extrapolate","coordinate","lo","hi","mid","m0","LineString","opt_layout","flatMidpoint_","flatMidpointRevision_","maxDelta_","maxDeltaRevision_","setCoordinates","setFlatCoordinates","appendCoordinate","lineString","layout","forEachSegment","callback","getCoordinateAtM","opt_extrapolate","GeometryLayout","getCoordinates","inflate","getCoordinateAt","getLength","getFlatMidpoint","getSimplifiedGeometryInternal","simplifiedFlatCoordinates","setLayout","deflate","SimpleGeometry","MultiLineString","opt_ends","ends_","getLayout","lineStrings","ends","getFlatCoordinates","appendLineString","multiLineString","opt_interpolate","interpolate","lineStringsCoordinateAtM","getEnds","getLineString","getLineStrings","getFlatMidpoints","midpoints","midpoint","simplifiedEnds","MultiPoint","appendPoint","point","multiPoint","squaredDistance","j","getPoint","Point","getPoints","points","MultiPolygon","opt_endss","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","orientedRevision_","orientedFlatCoordinates_","polygons","endss","polygon","jj","appendPolygon","len","newEndss","multiPolygon","getOrientedFlatCoordinates","getArea","opt_right","orient","getEndss","getFlatInteriorPoints","flatCenters","linearRingss","getInteriorPoints","simplifiedEndss","getPolygon","prevEnds","Polygon","getPolygons","lastEnds","readPointGeometry","readLineStringGeometry","readPolygonGeometry","readMultiPointGeometry","readMultiLineStringGeometry","readMultiPolygonGeometry","map","readGeometryCollectionGeometry","Error","geoJSON","writePointGeometry","writeLineStringGeometry","right","rightHanded","writePolygonGeometry","writeMultiPointGeometry","writeMultiLineStringGeometry","writeMultiPolygonGeometry","writeGeometryCollectionGeometry","GeoJSON","geometryName","extractGeometryName_","extractGeometryName","geoJSONFeature","geoJSONFeatures","projection","crs","objects","lineStringLength","ImageStyle","opacity_","rotateWithView_","rotateWithView","rotation_","rotation","scale_","scaleArray_","displacement_","displacement","getScale","getOpacity","getRotation","getRotateWithView","getDisplacement","getScaleArray","getAnchor","getImage","pixelRatio","getHitDetectionImage","getPixelRatio","getImageState","getImageSize","getOrigin","getSize","setDisplacement","setOpacity","setRotateWithView","setRotation","setScale","listenImageChange","listener","load","unlistenImageChange","asColorLike","RegularShape","canvas_","hitDetectionCanvas_","fill_","fill","origin_","points_","radius_","radius","radius1","radius2_","radius2","angle_","stroke_","stroke","size_","renderOptions_","render","getFill","getRadius","getRadius2","getAngle","getStroke","createHitDetectionCanvas_","image","renderOptions","context","draw_","canvas","ImageState","calculateLineJoinSize_","lineJoin","strokeWidth","miterLimit","Infinity","r1","r2","tmp","alpha","PI","a","sin","e","miterRatio","k","l","bevelAdd","aa","dd","innerMiterRatio","innerLength","createRenderOptions","strokeStyle","lineDash","lineDashOffset","getColor","getWidth","getLineDash","getLineDashOffset","getLineJoin","getMiterLimit","add","maxRadius","ceil","createPath_","fillStyle","lineWidth","setLineDash","drawHitDetectionCanvas_","arc","startAngle","step","angle0","radiusC","lineTo","cos","closePath","CircleStyle","setRadius","Fill","color_","setColor","Stroke","lineCap_","lineCap","lineDash_","lineDashOffset_","lineJoin_","miterLimit_","width_","getLineCap","setLineCap","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","Style","geometry_","geometryFunction_","defaultGeometryFunction","image_","renderer_","renderer","hitDetectionRenderer_","hitDetectionRenderer","text_","text","zIndex_","getRenderer","getText","setRenderer","setHitDetectionRenderer","getHitDetectionRenderer","getGeometryFunction","setFill","setImage","setStroke","setText","setZIndex","defaultStyles","createDefaultStyle","resolution","Circle","Property","BaseVectorLayer","baseOptions","renderBuffer","updateWhileAnimating","updateWhileInteracting","declutter_","declutter","renderBuffer_","updateWhileAnimating_","updateWhileInteracting_","getDeclutter","getFeatures","pixel","getRenderBuffer","getRenderOrder","getUpdateWhileAnimating","getUpdateWhileInteracting","renderDeclutter","frameState","declutterTree","setRenderOrder","renderOrder","styleFunction","Layer","Instruction","BEGIN_GEOMETRY","BEGIN_PATH","CIRCLE","CLOSE_PATH","CUSTOM","DRAW_CHARS","DRAW_IMAGE","END_GEOMETRY","FILL","MOVE_TO_LINE_TO","SET_FILL_STYLE","SET_STROKE_STYLE","STROKE","fillInstruction","strokeInstruction","beginPathInstruction","closePathInstruction","VectorContext","drawCustom","drawGeometry","drawCircle","circleGeometry","drawFeature","drawGeometryCollection","geometryCollectionGeometry","drawLineString","lineStringGeometry","drawMultiLineString","multiLineStringGeometry","drawMultiPoint","multiPointGeometry","drawMultiPolygon","multiPolygonGeometry","drawPoint","pointGeometry","drawPolygon","polygonGeometry","drawText","setFillStrokeStyle","setImageStyle","imageStyle","opt_declutterImageWithText","setTextStyle","textStyle","CanvasBuilder","tolerance","maxExtent","maxLineWidth","beginGeometryInstruction1_","beginGeometryInstruction2_","bufferedMaxExtent_","instructions","tmpCoordinate_","hitDetectionInstructions","state","applyPixelRatio","dashArray","dash","appendFlatPointCoordinates","getBufferedMaxExtent","tmpCoord","myEnd","appendFlatLineCoordinates","closed","skipFirst","lastRel","nextRel","lastXCoord","lastYCoord","nextCoord","skipped","Relationship","drawCustomCoordinates_","builderEnds","builderEnd","beginGeometry","builderEndss","getStride","builderBegin","myEnds","endGeometry","finish","reverseHitDetectionInstructions","reverse","instruction","begin","fillStyleColor","strokeStyleColor","strokeStyleLineCap","strokeStyleLineDash","strokeStyleLineDashOffset","strokeStyleLineJoin","strokeStyleWidth","strokeStyleMiterLimit","createFill","applyStroke","createStroke","updateFillStyle","currentFillStyle","updateStrokeStyle","currentStrokeStyle","currentLineCap","currentLineDash","currentLineDashOffset","currentLineJoin","currentLineWidth","currentMiterLimit","endGeometryInstruction","CanvasImageBuilder","hitDetectionImage_","imagePixelRatio_","anchorX_","anchorY_","height_","originX_","originY_","declutterImageWithText_","myBegin","opt_sharedData","hitDetectionImage","origin","CanvasLineStringBuilder","drawFlatCoordinates_","moveToLineToInstruction","lastStroke","CanvasPolygonBuilder","drawFlatCoordinatess_","numEnds","setFillStrokeStyles_","circleInstruction","matchingChunk","maxAngle","m12","m23","x12","y12","x23","y23","chunkStart","chunkEnd","chunkM","start","acos","TEXT_ALIGN","CanvasTextBuilder","labels_","textOffsetX_","textOffsetY_","textRotateWithView_","textRotation_","textFillState_","fillStates","textStrokeState_","strokeStates","textState_","textStates","textKey_","fillKey_","strokeKey_","fillState","strokeState","textState","geometryType","placement","TextPlacement","geometryWidths","getCenter","getFlatInteriorPoint","interiorPoints","beg_1","filter","w","keep","saveTextStates_","backgroundFill","backgroundStroke","p0","p1","p2","p3","pixelRatio_1","textAlign","flatOffset","flatEnd","oo","range","drawChars_","strokeKey","textKey","font","textBaseline","fillKey","baseline","offsetY","abs","textFillStyle","textStrokeStyle","getFont","textScale","getOverflow","getMaxAngle","getPlacement","getTextAlign","getTextBaseline","getBackgroundFill","getBackgroundStroke","getPadding","textOffsetX","getOffsetX","textOffsetY","getOffsetY","textRotateWithView","textRotation","join","BATCH_CONSTRUCTORS","PolygonBuilder","Builder","ImageBuilder","LineStringBuilder","BuilderGroup","tolerance_","maxExtent_","pixelRatio_","resolution_","buildersByZIndex_","builderInstructions","zKey","builders","builderKey","builderInstruction","getBuilder","builderType","zIndexKey","replays","replay","Constructor","drawTextOnPath","startM","measureAndCacheTextWidth","cache","segmentLength","segmentM","advance","beginX","beginY","startOffset","startLength","endM","endX","endY","flat","previousAngle","singleSegment","atan2","delta","iStart","charLength","chars","substring","tmpExtent","p4","getDeclutterBox","replayImageOrLabelArgs","declutterBox","rtlRegEx","RegExp","fromCharCode","horizontalTextAlign","align","Executor","overlaps","alignFill_","coordinateCache_","renderedTransform_","pixelCoordinates_","viewRotation_","widths_","createLabel","key","lines","split","numLines","widths","lineHeight","renderWidth","contextInstructions","h","label","floor","OffscreenCanvasRenderingContext2D","CanvasRenderingContext2D","leftRight","replayTextBackground_","beginPath","moveTo","setStrokeStyle_","calculateImageOrLabelDimensions_","sheetWidth","sheetHeight","centerX","centerY","anchorX","anchorY","originX","originY","snapToPixel","fillStroke","boxW","boxH","boxX","boxY","drawImageX","drawImageY","drawImageW","drawImageH","minX","minY","maxX","maxY","canvasTransform","replayImageOrLabel_","contextScale","imageOrLabel","dimensions","box","strokePadding","origin_1","repeatSize","save","restore","drawLabelWithPointPlacement_","execute_","opt_featureCallback","opt_hitExtent","opt_declutterTree","pixelCoordinates","prevX","prevY","roundX","roundY","currentGeometry","pendingFill","pendingStroke","lastFillInstruction","lastStrokeInstruction","coordinateCache","viewRotation","viewRotationFromTransform","batchSize","dx","dy","r","fn","coords","declutterImageWithText","labelWithAnchor","widthIndex","imageArgs","imageDeclutterBox","collides","insert","measurePixelRatio","pixelRatioScale","cachedWidths","pathLength","textLength","parts","drawChars","c","cc","part","i_1","ii_1","execute","executeHitDetection","ORDER","BuilderType","ExecutorGroup","allInstructions","opt_renderBuffer","overlaps_","executorsByZIndex_","hitDetectionContext_","hitDetectionTransform_","createExecutors_","clip","flatClipCoords","getClipCoords","executors","instructionByZindex","hasExecutors","candidates","forEachFeatureAtCoordinate","hitTolerance","declutteredFeatures","contextSize","newContext","hitExtent","clearRect","indexes","circlePixelIndexArrayCache","maxDistanceSq","distances","distanceSq","distance","pixelIndex","getPixelIndexArray","featureCallback","imageData","getImageData","data","indexOf","idx","result_1","executor","zs","keys","Number","sort","opt_builderTypes","builderTypes","CanvasImmediateRenderer","opt_squaredTolerance","opt_userTransform","context_","extent_","transform_","squaredTolerance_","userTransform_","contextFillState_","contextStrokeState_","contextTextState_","fillState_","strokeState_","imageAnchorX_","imageAnchorY_","imageHeight_","imageOpacity_","imageOriginX_","imageOriginY_","imageRotateWithView_","imageRotation_","imageScale_","imageWidth_","textScale_","tmpLocalTransform_","drawImages_","localTransform","globalAlpha","setTransform","drawImage","drawText_","setContextFillState_","setContextStrokeState_","setContextTextState_","strokeText","fillText","moveToLineTo_","close","drawRings_","simplifyTransformed","flatMidpoint","geometryExtent","flatMidpoints","flatInteriorPoint","flatInteriorPoints","contextFillState","contextStrokeState","contextTextState","imageSize","imageAnchor","imageOrigin","textFillStyleColor","textStrokeStyleColor","textStrokeStyleLineCap","textStrokeStyleLineDash","textStrokeStyleLineDashOffset","textStrokeStyleLineJoin","textStrokeStyleWidth","textStrokeStyleMiterLimit","textFont","textText","textTextAlign","textTextBaseline","taintedTestContext","IconImage","src","crossOrigin","imageState","Image","unlisten_","imageState_","src_","tainted_","isTainted_","dispatchChangeEvent_","dispatchEvent","handleImageError_","unlistenImage_","handleImageLoad_","replaceColor_","fillRect","getSrc","bind","document","createElement","ctx","getContext","globalCompositeOperation","imgData","putImageData","Icon","anchor_","normalizedAnchor_","anchorOrigin_","anchorOrigin","IconOrigin","anchorXUnits_","anchorXUnits","IconAnchorUnits","anchorYUnits_","anchorYUnits","crossOrigin_","img","imgSize","iconImage_","iconImage","offset_","offsetOrigin_","offsetOrigin","setAnchor","iconImageSize","addEventListener","removeEventListener","HIT_DETECT_RESOLUTION","GEOMETRY_RENDERERS","builderGroup","opt_declutterBuilderGroup","imageReplay","textReplay","lineStringReplay","polygonReplay","replayGroup","geometryRenderer","circleReplay","defaultOrder","feature1","feature2","getTolerance","renderFeature","opt_transform","loading","renderGeometry","renderFeatureInternal","CanvasVectorLayerRenderer","vectorLayer","boundHandleStyleImageChange_","handleStyleImageChange_","animatingOrInteracting_","dirty_","hitDetectionImageData_","renderedFeatures_","renderedRevision_","renderedResolution_","renderedExtent_","wrappedRenderedExtent_","renderedRotation_","renderedCenter_","renderedProjection_","renderedRenderOrder_","replayGroup_","replayGroupChanged","declutterExecutorGroup","clipping","renderWorlds","executorGroup","viewState","center","projectionExtent","vectorSource","getLayer","getSource","viewHints","ViewHint","multiWorld","getWrapX","canWrapX","worldWidth","endWorld","world","getRenderTransform","renderFrame","layerState","layerStatesArray","layerIndex","pixelTransform","inversePixelTransform","useContainer","getBackground","containerReused","preRender","clipped","layerExtent","clipUnrotated","postRender","css","container","Promise","resolve","layer","transforms","startX","offsetX","imageSmoothingEnabled","featureCount","indexFactor","featuresByZIndex","featureStyleFunction","originalStyle","imgContext","byGeometryType","zIndexKeys","geomAndStyle","kk","createHitDetectionImageData","resultFeatures","hitDetect","splice","lastIndexOf","executorGroups","some","all","item","handleFontsChanged","getVisible","event","renderIfReadyAndVisible","prepareFrame","animating","interacting","frameStateExtent","vectorLayerRevision","vectorLayerRenderBuffer","vectorLayerRenderOrder","renderedExtent","loadExtents","gutter","loadExtent","declutterBuilderGroup","userTransform","userProjection","extent_1","userExtent_1","loadFeatures","dirty","userExtent","getFeaturesInExtent","replayGroupInstructions","getOverlaps","VectorLayer","createRenderer","BaseVector","RBush","opt_maxEntries","rbush_","items_","extents","values","items","remove","uid","update","bbox","getAll","getInExtent","search","forEach_","forEachInExtent","clear","opt_extent","toJSON","rbush","withCredentials","xhr","url","format","success","failure","XMLHttpRequest","open","responseType","onload","status","responseText","responseXML","DOMParser","parseFromString","response","onerror","send","loadFeaturesXhr","addFeatures","VectorSourceEvent","opt_feature","opt_features","Event","VectorSource","attributions","wrapX","loader_","format_","url_","loader","strategy_","strategy","collection","useSpatialIndex","featuresRtree_","loadedExtentsRtree_","loadingExtentsCount_","nullGeometryFeatures_","idIndex_","uidIndex_","featureChangeKeys_","featuresCollection_","getArray","Collection","addFeaturesInternal","bindFeaturesCollection_","addFeature","addFeatureInternal","featureKey","addToIndex_","setupChangeEvents_","VectorEventType","handleFeatureChange_","ObjectEventType","valid","newFeatures","geometryFeatures","length_2","length_3","modifyingCollection","evt","CollectionEventType","element","removeFeature","opt_fast","featureId","removeAndIgnoreReturn","removeFeatureInternal","clearEvent","forEachFeature","forEachFeatureAtCoordinateDirect","forEachFeatureInExtent","intersectsCoordinate","forEachFeatureIntersectingExtent","getFeaturesCollection","getFeaturesAtCoordinate","getClosestFeatureToCoordinate","opt_filter","closestFeature","previousMinSquaredDistance","minDistance","getFeatureById","getFeatureByUid","getFormat","getUrl","sid","removeFromIdIndex_","hasFeature","loadedExtentsRtree","extentsToLoad","_loop_1","extentToLoad","this_1","refresh","removeLoadedExtent","featureChangeKeys","removed","setLoader","setUrl","Source","s","log","f","exp","u","_maxEntries","_minEntries","leaf","pop","_all","toBBox","_build","_splitRoot","_insert","_condense","compareMinX","compareMinY","fromJSON","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","v","M","_allDistMargin","defineProperty","_createClass","defineProperties","descriptor","enumerable","configurable","writable","protoProps","staticProps","_react2","_scrollLink2","__esModule","_classCallCheck","instance","_possibleConstructorReturn","ReferenceError","ButtonElement","_React$Component","getPrototypeOf","subClass","superClass","_inherits","Component","_extends","assign","_scrollElement2","_propTypes2","ElementWrapper","_this2","newProps","parentBindings","el","domNode","propTypes","string","LinkElement","_temp","_len","_key","_Link2","_Button2","_Element2","_scroller2","_scrollEvents2","_scrollSpy2","_animateScroll2","_Helpers2","React","scrollSpy","defaultScroller","PropTypes","scrollHash","protoTypes","to","isRequired","containerId","activeClass","spy","bool","smooth","oneOfType","number","delay","isDynamic","onClick","absolute","onSetActive","onSetInactive","ignoreCancelEvents","hashSpy","spyThrottle","Helpers","Scroll","customScroller","console","warn","scroller","_initialiseProps","getElementById","nodeType","scrollSpyContainer","getScrollSpyContainer","isMounted","mount","mapContainer","addStateHandler","stateHandler","addSpyHandler","spyHandler","setState","unmount","trim","prop","handleClick","scrollTo","stopPropagation","preventDefault","getActiveLink","isInitialized","elemTopBound","elemBottomBound","containerTop","getBoundingClientRect","cords","isInside","isOutside","activeLink","setActiveLink","getHash","changeHash","updateStates","defaultProps","Element","_React$Component2","_this3","childBindings","registerElems","prevProps","unregister","register","_smooth2","_cancelEvents2","getAnimationType","defaultEasing","requestAnimationFrameHelper","requestAnimationFrame","webkitRequestAnimationFrame","currentWindowProperties","getTime","currentPositionX","containerElement","body","scrollLeft","supportPageOffset","pageXOffset","isCSS1Compat","compatMode","documentElement","currentPositionY","scrollTop","pageYOffset","animateScroll","easing","timestamp","targetPosition","startPosition","progress","percent","currentPosition","horizontal","easedAnimate","registered","setContainer","animateTopScroll","scrollOffset","delayTimeout","subscribe","isNaN","parseFloat","proceedOptions","scrollToTop","scrollToBottom","scrollWidth","offsetWidth","html","clientWidth","scrollContainerWidth","scrollHeight","offsetHeight","clientHeight","scrollContainerHeight","toPosition","scrollMore","_passiveEventListeners","events","cancelEvent","addPassiveEventListener","eventName","supportsPassiveOption","opts","passive","removePassiveEventListener","Events","scrollEvent","evtName","_utils","_utils2","mountFlag","initialized","containers","handleHashChange","initStateFromHash","hash","isInit","saveHashHistory","updateHash","_scrollHash2","Link","_React$PureComponent","PureComponent","elemLeftBound","elemRightBound","containerLeft","_cords","_props$saveHashHistor","_props$saveHashHistor2","_saveHashHistory","_lodash","_lodash2","spyCallbacks","spySetState","scrollSpyContainers","throttle","eventHandler","throttleAmount","eventThrottler","scrollHandler","handler","__mapped","__activeLink","getElementsByName","getElementsByClassName","link","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","getElementOffsetInfoUntil","predicate","offsetTop","currentOffsetParent","offsetParent","historyUpdate","hashVal","hashToUpdate","curLoc","location","urlToPush","pathname","history","pushState","replaceState","filterElementInContainer","contains","compareDocumentPosition","scrollX","getComputedStyle","offsetLeft","scrollY","_getElementOffsetInfo","isDocument","download","fileName","fileType","blob","Blob","href","URL","createObjectURL","clickEvt","MouseEvent","view","bubbles","cancelable","parsedLinearRing","json","utils","geojson","_getEPSG","geometryTypes","getCode","code","includes","child","parentCode","getEPSGcode","epsg"],"sourceRoot":""}