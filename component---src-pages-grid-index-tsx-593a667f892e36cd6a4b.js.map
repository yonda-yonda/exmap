{"version":3,"file":"component---src-pages-grid-index-tsx-593a667f892e36cd6a4b.js","mappings":"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","sources":["webpack://exmap/./src/pages/grid/index.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport TileGrid from \"ol/tilegrid/TileGrid\";\nimport Tile from \"ol/Tile\";\nimport { XYZ } from \"ol/source\";\nimport TileLayer from \"ol/layer/WebGLTile\";\nimport ImageTile from \"ol/ImageTile\";\n\nimport proj4 from \"proj4\";\nimport { register } from \"ol/proj/proj4\";\nimport { useOl } from \"~/hooks/useOl\";\nproj4.defs(\n  \"EPSG:3995\",\n  \"+proj=stere +lat_0=90 +lat_ts=71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs\"\n);\nregister(proj4);\n\nconst maxResolution = 360 / 512;\nconst defaultResolutions: number[] = [];\nfor (let i = 0; i < 14; ++i) {\n  defaultResolutions[i] = maxResolution / Math.pow(2, i + 1);\n}\n\nconst Grid = (): React.ReactElement => {\n  const view4326 = useOl({\n    projection: \"EPSG:4326\",\n  });\n  const view3857 = useOl();\n  const view3995 = useOl({\n    projection: \"EPSG:3995\",\n  });\n\n  const size = 512;\n\n  const tileLoadFunction = React.useCallback(\n    (imageTile: Tile, coordString: string) => {\n      const [z, x, y] = coordString.split(\",\").map(Number);\n\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = size;\n      canvas.height = size;\n      const context = canvas.getContext(\"2d\");\n      if (!context) return;\n      const half = size / 2;\n      const lineHeight = 80;\n      context.strokeStyle = \"white\";\n      context.textAlign = \"center\";\n      context.font = \"72px sans-serif\";\n      context.clearRect(0, 0, size, size);\n      context.fillStyle = \"rgba(100, 100, 100, 0.5)\";\n      context.fillRect(0, 0, size, size);\n      context.fillStyle = \"black\";\n      context.fillText(`z: ${z}`, half, half - lineHeight);\n      context.fillText(`x: ${x}`, half, half);\n      context.fillText(`y: ${y}`, half, half + lineHeight);\n      context.strokeRect(0, 0, size, size);\n\n      ((imageTile as ImageTile).getImage() as HTMLImageElement).src =\n        canvas.toDataURL();\n    },\n    []\n  );\n\n  React.useEffect(() => {\n    if (view4326.map) {\n      const layer = new TileLayer({\n        source: new XYZ({\n          url: \"{z},{x},{y}\",\n          tileLoadFunction,\n          transition: 0,\n        }),\n      });\n      view4326.map.addLayer(layer);\n    }\n  }, [view4326.map, tileLoadFunction]);\n\n  React.useEffect(() => {\n    if (view3857.map) {\n      const tileGrid = new TileGrid({\n        extent: [-180, -90, 180, 90],\n        tileSize: size,\n        resolutions: defaultResolutions,\n      });\n      const layer = new TileLayer({\n        source: new XYZ({\n          projection: \"EPSG:4326\",\n          url: \"{z},{x},{y}\",\n          tileGrid,\n          tileLoadFunction,\n          transition: 0,\n        }),\n      });\n      view3857.map.addLayer(layer);\n    }\n  }, [view3857.map, tileLoadFunction]);\n\n  React.useEffect(() => {\n    if (view3995.map) {\n      const tileGrid = new TileGrid({\n        extent: [-180, -90, 180, 90],\n        tileSize: size,\n        resolutions: defaultResolutions,\n      });\n      const layer = new TileLayer({\n        source: new XYZ({\n          projection: \"EPSG:4326\",\n          url: \"{z},{x},{y}\",\n          tileGrid,\n          tileLoadFunction,\n          transition: 0,\n        }),\n      });\n      view3995.map.addLayer(layer);\n    }\n  }, [view3995.map, tileLoadFunction]);\n\n  return (\n    <>\n      <CssBaseline />\n      <Helmet>\n        <title>Show Grid</title>\n        <meta name=\"description\" content=\"Show Tile Grid.\" />\n        <link rel=\"canonical\" href=\"https://yonda-yonda.github.io/exmap/grid\" />\n        <link\n          rel=\"icon\"\n          type=\"image/x-icon\"\n          href=\"https://github.githubassets.com/favicon.ico\"\n        />\n        <link\n          rel=\"stylesheet\"\n          href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap\"\n        />\n      </Helmet>\n      <h1>view EPSG:4326, grid EPSG:3857</h1>\n      <div\n        ref={view4326.ref}\n        style={{\n          width: \"720px\",\n          height: \"360px\",\n          border: \"solid 1px\",\n        }}\n      />\n      <h1>view EPSG:3857, grid EPSG:4326</h1>\n      <div\n        ref={view3857.ref}\n        style={{\n          width: \"720px\",\n          height: \"360px\",\n          border: \"solid 1px\",\n        }}\n      />\n      <h1>view EPSG:3995, grid EPSG:4326</h1>\n      <div\n        ref={view3995.ref}\n        style={{\n          width: \"720px\",\n          height: \"360px\",\n          border: \"solid 1px\",\n        }}\n      />\n    </>\n  );\n};\nexport default Grid;\n"],"names":["proj4","register","defaultResolutions","i","Math","pow","view4326","useOl","projection","view3857","view3995","size","tileLoadFunction","React","imageTile","coordString","split","map","Number","z","x","y","canvas","document","createElement","width","height","context","getContext","half","strokeStyle","textAlign","font","clearRect","fillStyle","fillRect","fillText","strokeRect","getImage","src","toDataURL","layer","TileLayer","source","XYZ","url","transition","addLayer","tileGrid","TileGrid","extent","tileSize","resolutions","Helmet","name","content","rel","href","type","ref","style","border"],"sourceRoot":""}