{"version":3,"file":"component---src-pages-picture-index-tsx-65c68e09c2b0e70ac2ac.js","mappings":"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","sources":["webpack://exmap/./node_modules/@mui/material/internal/svg-icons/RadioButtonUnchecked.js","webpack://exmap/./node_modules/@mui/material/internal/svg-icons/RadioButtonChecked.js","webpack://exmap/./node_modules/@mui/material/Radio/RadioButtonIcon.js","webpack://exmap/./node_modules/@mui/material/Radio/radioClasses.js","webpack://exmap/./node_modules/@mui/material/Radio/Radio.js","webpack://exmap/./node_modules/@mui/material/RadioGroup/useRadioGroup.js","webpack://exmap/./node_modules/@mui/material/FormGroup/formGroupClasses.js","webpack://exmap/./node_modules/@mui/material/FormGroup/FormGroup.js","webpack://exmap/./node_modules/@mui/material/RadioGroup/RadioGroup.js","webpack://exmap/./node_modules/@mui/material/RadioGroup/RadioGroupContext.js","webpack://exmap/./node_modules/@mui/system/esm/styled.js","webpack://exmap/./node_modules/ol/control/MousePosition.js","webpack://exmap/./node_modules/path-browserify/index.js","webpack://exmap/./src/hooks/useDnDSort.tsx","webpack://exmap/./src/scripts/ImageGrid/Global.ts","webpack://exmap/./src/scripts/ImageGrid/Regional.ts","webpack://exmap/./src/pages/picture/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport createSvgIcon from '../../utils/createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'RadioButtonUnchecked');","import * as React from 'react';\nimport createSvgIcon from '../../utils/createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z\"\n}), 'RadioButtonChecked');","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport RadioButtonUncheckedIcon from '../internal/svg-icons/RadioButtonUnchecked';\nimport RadioButtonCheckedIcon from '../internal/svg-icons/RadioButtonChecked';\nimport styled from '../styles/styled';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar RadioButtonIconRoot = styled('span')({\n  position: 'relative',\n  display: 'flex'\n});\nvar RadioButtonIconBackground = styled(RadioButtonUncheckedIcon, {\n  skipSx: true\n})({\n  // Scale applied to prevent dot misalignment in Safari\n  transform: 'scale(1)'\n});\nvar RadioButtonIconDot = styled(RadioButtonCheckedIcon, {\n  skipSx: true\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    left: 0,\n    position: 'absolute',\n    transform: 'scale(0)',\n    transition: theme.transitions.create('transform', {\n      easing: theme.transitions.easing.easeIn,\n      duration: theme.transitions.duration.shortest\n    })\n  }, ownerState.checked && {\n    transform: 'scale(1)',\n    transition: theme.transitions.create('transform', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.shortest\n    })\n  });\n});\n/**\n * @ignore - internal component.\n */\n\nfunction RadioButtonIcon(props) {\n  var _props$checked = props.checked,\n      checked = _props$checked === void 0 ? false : _props$checked,\n      _props$classes = props.classes,\n      classes = _props$classes === void 0 ? {} : _props$classes,\n      fontSize = props.fontSize;\n\n  var ownerState = _extends({}, props, {\n    checked: checked\n  });\n\n  return /*#__PURE__*/_jsxs(RadioButtonIconRoot, {\n    className: classes.root,\n    ownerState: ownerState,\n    children: [/*#__PURE__*/_jsx(RadioButtonIconBackground, {\n      fontSize: fontSize,\n      className: classes.background,\n      ownerState: ownerState\n    }), /*#__PURE__*/_jsx(RadioButtonIconDot, {\n      fontSize: fontSize,\n      className: classes.dot,\n      ownerState: ownerState\n    })]\n  });\n}\n\nprocess.env.NODE_ENV !== \"production\" ? RadioButtonIcon.propTypes = {\n  /**\n   * If `true`, the component is checked.\n   */\n  checked: PropTypes.bool,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * The size of the component.\n   * `small` is equivalent to the dense radio styling.\n   */\n  fontSize: PropTypes.oneOf(['small', 'medium'])\n} : void 0;\nexport default RadioButtonIcon;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getRadioUtilityClass(slot) {\n  return generateUtilityClass('MuiRadio', slot);\n}\nvar radioClasses = generateUtilityClasses('MuiRadio', ['root', 'checked', 'disabled', 'colorPrimary', 'colorSecondary']);\nexport default radioClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"checked\", \"checkedIcon\", \"color\", \"icon\", \"name\", \"onChange\", \"size\"];\nimport * as React from 'react';\nimport { refType } from '@mui/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport { alpha } from '@mui/system';\nimport SwitchBase from '../internal/SwitchBase';\nimport useThemeProps from '../styles/useThemeProps';\nimport RadioButtonIcon from './RadioButtonIcon';\nimport capitalize from '../utils/capitalize';\nimport createChainedFunction from '../utils/createChainedFunction';\nimport useRadioGroup from '../RadioGroup/useRadioGroup';\nimport radioClasses, { getRadioUtilityClass } from './radioClasses';\nimport styled, { rootShouldForwardProp } from '../styles/styled';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      color = ownerState.color;\n  var slots = {\n    root: ['root', \"color\".concat(capitalize(color))]\n  };\n  return _extends({}, classes, composeClasses(slots, getRadioUtilityClass, classes));\n};\n\nvar RadioRoot = styled(SwitchBase, {\n  shouldForwardProp: function shouldForwardProp(prop) {\n    return rootShouldForwardProp(prop) || prop === 'classes';\n  },\n  name: 'MuiRadio',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, styles[\"color\".concat(capitalize(ownerState.color))]];\n  }\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    color: theme.palette.text.secondary,\n    '&:hover': {\n      backgroundColor: alpha(ownerState.color === 'default' ? theme.palette.action.active : theme.palette[ownerState.color].main, theme.palette.action.hoverOpacity),\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    }\n  }, ownerState.color !== 'default' && _defineProperty({}, \"&.\".concat(radioClasses.checked), {\n    color: theme.palette[ownerState.color].main\n  }), _defineProperty({}, \"&.\".concat(radioClasses.disabled), {\n    color: theme.palette.action.disabled\n  }));\n});\n\nfunction areEqualValues(a, b) {\n  if (typeof b === 'object' && b !== null) {\n    return a === b;\n  } // The value could be a number, the DOM will stringify it anyway.\n\n\n  return String(a) === String(b);\n}\n\nvar defaultCheckedIcon = /*#__PURE__*/_jsx(RadioButtonIcon, {\n  checked: true\n});\n\nvar defaultIcon = /*#__PURE__*/_jsx(RadioButtonIcon, {});\n\nvar Radio = /*#__PURE__*/React.forwardRef(function Radio(inProps, ref) {\n  var _defaultIcon$props$fo, _defaultCheckedIcon$p;\n\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiRadio'\n  });\n\n  var checkedProp = props.checked,\n      _props$checkedIcon = props.checkedIcon,\n      checkedIcon = _props$checkedIcon === void 0 ? defaultCheckedIcon : _props$checkedIcon,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$icon = props.icon,\n      icon = _props$icon === void 0 ? defaultIcon : _props$icon,\n      nameProp = props.name,\n      onChangeProp = props.onChange,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    color: color,\n    size: size\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  var radioGroup = useRadioGroup();\n  var checked = checkedProp;\n  var onChange = createChainedFunction(onChangeProp, radioGroup && radioGroup.onChange);\n  var name = nameProp;\n\n  if (radioGroup) {\n    if (typeof checked === 'undefined') {\n      checked = areEqualValues(radioGroup.value, props.value);\n    }\n\n    if (typeof name === 'undefined') {\n      name = radioGroup.name;\n    }\n  }\n\n  return /*#__PURE__*/_jsx(RadioRoot, _extends({\n    type: \"radio\",\n    icon: /*#__PURE__*/React.cloneElement(icon, {\n      fontSize: (_defaultIcon$props$fo = defaultIcon.props.fontSize) != null ? _defaultIcon$props$fo : size\n    }),\n    checkedIcon: /*#__PURE__*/React.cloneElement(checkedIcon, {\n      fontSize: (_defaultCheckedIcon$p = defaultCheckedIcon.props.fontSize) != null ? _defaultCheckedIcon$p : size\n    }),\n    ownerState: ownerState,\n    classes: classes,\n    name: name,\n    checked: checked,\n    onChange: onChange,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default Radio;","import * as React from 'react';\nimport RadioGroupContext from './RadioGroupContext';\nexport default function useRadioGroup() {\n  return React.useContext(RadioGroupContext);\n}","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getFormGroupUtilityClass(slot) {\n  return generateUtilityClass('MuiFormGroup', slot);\n}\nvar formGroupClasses = generateUtilityClasses('MuiFormGroup', ['root', 'row']);\nexport default formGroupClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"className\", \"row\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport { getFormGroupUtilityClass } from './formGroupClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      row = ownerState.row;\n  var slots = {\n    root: ['root', row && 'row']\n  };\n  return composeClasses(slots, getFormGroupUtilityClass, classes);\n};\n\nvar FormGroupRoot = styled('div', {\n  name: 'MuiFormGroup',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, ownerState.row && styles.row];\n  }\n})(function (_ref) {\n  var ownerState = _ref.ownerState;\n  return _extends({\n    display: 'flex',\n    flexDirection: 'column',\n    flexWrap: 'wrap'\n  }, ownerState.row && {\n    flexDirection: 'row'\n  });\n});\n/**\n * `FormGroup` wraps controls such as `Checkbox` and `Switch`.\n * It provides compact row layout.\n * For the `Radio`, you should be using the `RadioGroup` component instead of this one.\n */\n\nvar FormGroup = /*#__PURE__*/React.forwardRef(function FormGroup(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiFormGroup'\n  });\n\n  var className = props.className,\n      _props$row = props.row,\n      row = _props$row === void 0 ? false : _props$row,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    row: row\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(FormGroupRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default FormGroup;","import _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"actions\", \"children\", \"defaultValue\", \"name\", \"onChange\", \"value\"];\nimport * as React from 'react';\nimport FormGroup from '../FormGroup';\nimport useForkRef from '../utils/useForkRef';\nimport useControlled from '../utils/useControlled';\nimport RadioGroupContext from './RadioGroupContext';\nimport useId from '../utils/useId';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar RadioGroup = /*#__PURE__*/React.forwardRef(function RadioGroup(props, ref) {\n  var actions = props.actions,\n      children = props.children,\n      defaultValue = props.defaultValue,\n      nameProp = props.name,\n      onChange = props.onChange,\n      valueProp = props.value,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var rootRef = React.useRef(null);\n\n  var _useControlled = useControlled({\n    controlled: valueProp,\n    default: defaultValue,\n    name: 'RadioGroup'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      value = _useControlled2[0],\n      setValueState = _useControlled2[1];\n\n  React.useImperativeHandle(actions, function () {\n    return {\n      focus: function focus() {\n        var input = rootRef.current.querySelector('input:not(:disabled):checked');\n\n        if (!input) {\n          input = rootRef.current.querySelector('input:not(:disabled)');\n        }\n\n        if (input) {\n          input.focus();\n        }\n      }\n    };\n  }, []);\n  var handleRef = useForkRef(ref, rootRef);\n\n  var handleChange = function handleChange(event) {\n    setValueState(event.target.value);\n\n    if (onChange) {\n      onChange(event, event.target.value);\n    }\n  };\n\n  var name = useId(nameProp);\n  return /*#__PURE__*/_jsx(RadioGroupContext.Provider, {\n    value: {\n      name: name,\n      onChange: handleChange,\n      value: value\n    },\n    children: /*#__PURE__*/_jsx(FormGroup, _extends({\n      role: \"radiogroup\",\n      ref: handleRef\n    }, other, {\n      children: children\n    }))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default RadioGroup;","import * as React from 'react';\n/**\n * @ignore - internal component.\n */\n\nvar RadioGroupContext = /*#__PURE__*/React.createContext(undefined);\n\nif (process.env.NODE_ENV !== 'production') {\n  RadioGroupContext.displayName = 'RadioGroupContext';\n}\n\nexport default RadioGroupContext;","import createStyled from './createStyled';\nvar styled = createStyled();\nexport default styled;","/**\n * @module ol/control/MousePosition\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport Control from './Control.js';\nimport EventType from '../pointer/EventType.js';\nimport { get as getProjection, getTransformFromProjections, getUserProjection, identityTransform } from '../proj.js';\nimport { listen } from '../events.js';\n/**\n * @type {string}\n */\n\nvar PROJECTION = 'projection';\n/**\n * @type {string}\n */\n\nvar COORDINATE_FORMAT = 'coordinateFormat';\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:coordinateFormat'|'change:projection', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:coordinateFormat'|'change:projection', Return>} MousePositionOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-mouse-position'] CSS class name.\n * @property {import(\"../coordinate.js\").CoordinateFormat} [coordinateFormat] Coordinate format.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the\n * control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {HTMLElement|string} [target] Specify a target if you want the\n * control to be rendered outside of the map's viewport.\n * @property {string|boolean} [placeholder] Markup to show when the mouse position is not\n * available (e.g. when the pointer leaves the map viewport).  By default, a non-breaking space\n * is rendered when the mouse leaves the viewport.  To render something else, provide a string\n * to be used as the text content (e.g. 'no position' or '' for an empty string).  Set the placeholder\n * to `false` to retain the last position when the mouse leaves the viewport.  In a future release, this\n * will be the default behavior.\n * @property {string} [undefinedHTML='&#160;'] This option is deprecated.  Use the `placeholder` option instead.\n */\n\n/**\n * @classdesc\n * A control to show the 2D coordinates of the mouse cursor. By default, these\n * are in the view projection, but can be in any supported projection.\n * By default the control is shown in the top right corner of the map, but this\n * can be changed by using the css selector `.ol-mouse-position`.\n *\n * On touch devices, which usually do not have a mouse cursor, the coordinates\n * of the currently touched position are shown.\n *\n * @api\n */\n\nvar MousePosition =\n/** @class */\nfunction (_super) {\n  __extends(MousePosition, _super);\n  /**\n   * @param {Options} [opt_options] Mouse position options.\n   */\n\n\n  function MousePosition(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    var element = document.createElement('div');\n    element.className = options.className !== undefined ? options.className : 'ol-mouse-position';\n    _this = _super.call(this, {\n      element: element,\n      render: options.render,\n      target: options.target\n    }) || this;\n    /***\n     * @type {MousePositionOnSignature<import(\"../events\").EventsKey>}\n     */\n\n    _this.on;\n    /***\n     * @type {MousePositionOnSignature<import(\"../events\").EventsKey>}\n     */\n\n    _this.once;\n    /***\n     * @type {MousePositionOnSignature<void>}\n     */\n\n    _this.un;\n\n    _this.addChangeListener(PROJECTION, _this.handleProjectionChanged_);\n\n    if (options.coordinateFormat) {\n      _this.setCoordinateFormat(options.coordinateFormat);\n    }\n\n    if (options.projection) {\n      _this.setProjection(options.projection);\n    }\n    /**\n     * Change this to `false` when removing the deprecated `undefinedHTML` option.\n     * @type {boolean}\n     */\n\n\n    var renderOnMouseOut = true;\n    /**\n     * @type {string}\n     */\n\n    var placeholder = '&#160;';\n\n    if ('undefinedHTML' in options) {\n      // deprecated behavior\n      if (options.undefinedHTML !== undefined) {\n        placeholder = options.undefinedHTML;\n      }\n\n      renderOnMouseOut = !!placeholder;\n    } else if ('placeholder' in options) {\n      if (options.placeholder === false) {\n        renderOnMouseOut = false;\n      } else {\n        placeholder = String(options.placeholder);\n      }\n    }\n    /**\n     * @private\n     * @type {string}\n     */\n\n\n    _this.placeholder_ = placeholder;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.renderOnMouseOut_ = renderOnMouseOut;\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.renderedHTML_ = element.innerHTML;\n    /**\n     * @private\n     * @type {?import(\"../proj/Projection.js\").default}\n     */\n\n    _this.mapProjection_ = null;\n    /**\n     * @private\n     * @type {?import(\"../proj.js\").TransformFunction}\n     */\n\n    _this.transform_ = null;\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  MousePosition.prototype.handleProjectionChanged_ = function () {\n    this.transform_ = null;\n  };\n  /**\n   * Return the coordinate format type used to render the current position or\n   * undefined.\n   * @return {import(\"../coordinate.js\").CoordinateFormat|undefined} The format to render the current\n   *     position in.\n   * @observable\n   * @api\n   */\n\n\n  MousePosition.prototype.getCoordinateFormat = function () {\n    return (\n      /** @type {import(\"../coordinate.js\").CoordinateFormat|undefined} */\n      this.get(COORDINATE_FORMAT)\n    );\n  };\n  /**\n   * Return the projection that is used to report the mouse position.\n   * @return {import(\"../proj/Projection.js\").default|undefined} The projection to report mouse\n   *     position in.\n   * @observable\n   * @api\n   */\n\n\n  MousePosition.prototype.getProjection = function () {\n    return (\n      /** @type {import(\"../proj/Projection.js\").default|undefined} */\n      this.get(PROJECTION)\n    );\n  };\n  /**\n   * @param {MouseEvent} event Browser event.\n   * @protected\n   */\n\n\n  MousePosition.prototype.handleMouseMove = function (event) {\n    var map = this.getMap();\n    this.updateHTML_(map.getEventPixel(event));\n  };\n  /**\n   * @param {Event} event Browser event.\n   * @protected\n   */\n\n\n  MousePosition.prototype.handleMouseOut = function (event) {\n    this.updateHTML_(null);\n  };\n  /**\n   * Remove the control from its current map and attach it to the new map.\n   * Pass `null` to just remove the control from the current map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../PluggableMap.js\").default|null} map Map.\n   * @api\n   */\n\n\n  MousePosition.prototype.setMap = function (map) {\n    _super.prototype.setMap.call(this, map);\n\n    if (map) {\n      var viewport = map.getViewport();\n      this.listenerKeys.push(listen(viewport, EventType.POINTERMOVE, this.handleMouseMove, this));\n\n      if (this.renderOnMouseOut_) {\n        this.listenerKeys.push(listen(viewport, EventType.POINTEROUT, this.handleMouseOut, this));\n      }\n\n      this.updateHTML_(null);\n    }\n  };\n  /**\n   * Set the coordinate format type used to render the current position.\n   * @param {import(\"../coordinate.js\").CoordinateFormat} format The format to render the current\n   *     position in.\n   * @observable\n   * @api\n   */\n\n\n  MousePosition.prototype.setCoordinateFormat = function (format) {\n    this.set(COORDINATE_FORMAT, format);\n  };\n  /**\n   * Set the projection that is used to report the mouse position.\n   * @param {import(\"../proj.js\").ProjectionLike} projection The projection to report mouse\n   *     position in.\n   * @observable\n   * @api\n   */\n\n\n  MousePosition.prototype.setProjection = function (projection) {\n    this.set(PROJECTION, getProjection(projection));\n  };\n  /**\n   * @param {?import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @private\n   */\n\n\n  MousePosition.prototype.updateHTML_ = function (pixel) {\n    var html = this.placeholder_;\n\n    if (pixel && this.mapProjection_) {\n      if (!this.transform_) {\n        var projection = this.getProjection();\n\n        if (projection) {\n          this.transform_ = getTransformFromProjections(this.mapProjection_, projection);\n        } else {\n          this.transform_ = identityTransform;\n        }\n      }\n\n      var map = this.getMap();\n      var coordinate = map.getCoordinateFromPixelInternal(pixel);\n\n      if (coordinate) {\n        var userProjection = getUserProjection();\n\n        if (userProjection) {\n          this.transform_ = getTransformFromProjections(this.mapProjection_, userProjection);\n        }\n\n        this.transform_(coordinate, coordinate);\n        var coordinateFormat = this.getCoordinateFormat();\n\n        if (coordinateFormat) {\n          html = coordinateFormat(coordinate);\n        } else {\n          html = coordinate.toString();\n        }\n      }\n    }\n\n    if (!this.renderedHTML_ || html !== this.renderedHTML_) {\n      this.element.innerHTML = html;\n      this.renderedHTML_ = html;\n    }\n  };\n  /**\n   * Update the projection. Rendering of the coordinates is done in\n   * `handleMouseMove` and `handleMouseUp`.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n\n\n  MousePosition.prototype.render = function (mapEvent) {\n    var frameState = mapEvent.frameState;\n\n    if (!frameState) {\n      this.mapProjection_ = null;\n    } else {\n      if (this.mapProjection_ != frameState.viewState.projection) {\n        this.mapProjection_ = frameState.viewState.projection;\n        this.transform_ = null;\n      }\n    }\n  };\n\n  return MousePosition;\n}(Control);\n\nexport default MousePosition;","// 'path' module extracted from Node.js v8.11.1 (only the posix part)\n// transplited with Babel\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict';\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\n  }\n} // Resolves . and .. elements in a path with directory names\n\n\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length) code = path.charCodeAt(i);else if (code === 47\n    /*/*/\n    ) break;else code = 47\n    /*/*/\n    ;\n\n    if (code === 47\n    /*/*/\n    ) {\n      if (lastSlash === i - 1 || dots === 1) {// NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46\n        /*.*/\n        || res.charCodeAt(res.length - 2) !== 46\n        /*.*/\n        ) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/');\n\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n              }\n\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n\n        if (allowAboveRoot) {\n          if (res.length > 0) res += '/..';else res = '..';\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0) res += '/' + path.slice(lastSlash + 1, i);else res = path.slice(lastSlash + 1, i);\n        lastSegmentLength = i - lastSlash - 1;\n      }\n\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46\n    /*.*/\n    && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base || (pathObject.name || '') + (pathObject.ext || '');\n\n  if (!dir) {\n    return base;\n  }\n\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0) path = arguments[i];else {\n        if (cwd === undefined) cwd = process.cwd();\n        path = cwd;\n      }\n      assertPath(path); // Skip empty entries\n\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47\n      /*/*/\n      ;\n    } // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n    // Normalize the path\n\n\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0) return '/' + resolvedPath;else return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n  normalize: function normalize(path) {\n    assertPath(path);\n    if (path.length === 0) return '.';\n    var isAbsolute = path.charCodeAt(0) === 47\n    /*/*/\n    ;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47\n    /*/*/\n    ; // Normalize the path\n\n    path = normalizeStringPosix(path, !isAbsolute);\n    if (path.length === 0 && !isAbsolute) path = '.';\n    if (path.length > 0 && trailingSeparator) path += '/';\n    if (isAbsolute) return '/' + path;\n    return path;\n  },\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47\n    /*/*/\n    ;\n  },\n  join: function join() {\n    if (arguments.length === 0) return '.';\n    var joined;\n\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n\n      if (arg.length > 0) {\n        if (joined === undefined) joined = arg;else joined += '/' + arg;\n      }\n    }\n\n    if (joined === undefined) return '.';\n    return posix.normalize(joined);\n  },\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n    if (from === to) return '';\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n    if (from === to) return ''; // Trim any leading backslashes\n\n    var fromStart = 1;\n\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47\n      /*/*/\n      ) break;\n    }\n\n    var fromEnd = from.length;\n    var fromLen = fromEnd - fromStart; // Trim any leading backslashes\n\n    var toStart = 1;\n\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47\n      /*/*/\n      ) break;\n    }\n\n    var toEnd = to.length;\n    var toLen = toEnd - toStart; // Compare paths to find the longest common path from root\n\n    var length = fromLen < toLen ? fromLen : toLen;\n    var lastCommonSep = -1;\n    var i = 0;\n\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47\n          /*/*/\n          ) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47\n          /*/*/\n          ) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n\n        break;\n      }\n\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode) break;else if (fromCode === 47\n      /*/*/\n      ) lastCommonSep = i;\n    }\n\n    var out = ''; // Generate the relative path based on the path difference between `to`\n    // and `from`\n\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47\n      /*/*/\n      ) {\n        if (out.length === 0) out += '..';else out += '/..';\n      }\n    } // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n\n\n    if (out.length > 0) return out + to.slice(toStart + lastCommonSep);else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47\n      /*/*/\n      ) ++toStart;\n      return to.slice(toStart);\n    }\n  },\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0) return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = code === 47\n    /*/*/\n    ;\n    var end = -1;\n    var matchedSlash = true;\n\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n\n      if (code === 47\n      /*/*/\n      ) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1) return '//';\n    return path.slice(0, end);\n  },\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string') throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n\n        if (code === 47\n        /*/*/\n        ) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd;else if (end === -1) end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47\n        /*/*/\n        ) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) return '';\n      return path.slice(start, end);\n    }\n  },\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true; // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n\n    var preDotState = 0;\n\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n\n      if (code === 47\n      /*/*/\n      ) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n\n        continue;\n      }\n\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n\n      if (code === 46\n      /*.*/\n      ) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 || // We saw a non-dot character immediately before the dot\n    preDotState === 0 || // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n\n    return path.slice(startDot, end);\n  },\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError('The \"pathObject\" argument must be of type Object. Received type ' + typeof pathObject);\n    }\n\n    return _format('/', pathObject);\n  },\n  parse: function parse(path) {\n    assertPath(path);\n    var ret = {\n      root: '',\n      dir: '',\n      base: '',\n      ext: '',\n      name: ''\n    };\n    if (path.length === 0) return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = code === 47\n    /*/*/\n    ;\n    var start;\n\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1; // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n\n    var preDotState = 0; // Get non-dir info\n\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n\n      if (code === 47\n      /*/*/\n      ) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n\n        continue;\n      }\n\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n\n      if (code === 46\n      /*.*/\n      ) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 || // We saw a non-dot character immediately before the dot\n    preDotState === 0 || // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);else ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);else if (isAbsolute) ret.dir = '/';\n    return ret;\n  },\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null\n};\nposix.posix = posix;\nmodule.exports = posix;","import React, { useRef, useState } from \"react\";\n\n// thx https://zenn.dev/uttk/articles/b90454baec68c8\n\ntype DnDMode = \"grid\" | \"topbottom\" | \"bottomtop\" | \"leftright\" | \"rightleft\";\n\nconst getClientCoordinates = (\n  event:\n    | MouseEvent\n    | TouchEvent\n    | React.MouseEvent<HTMLElement>\n    | React.TouchEvent<HTMLElement>\n): { clientX: number; clientY: number } | null => {\n  if (\"changedTouches\" in event && event.changedTouches?.length > 0) {\n    return {\n      clientX: event.changedTouches[0].clientX,\n      clientY: event.changedTouches[0].clientY,\n    };\n  } else if (\"clientX\" in event && \"clientY\" in event) {\n    return {\n      clientX: event.clientX,\n      clientY: event.clientY,\n    };\n  }\n  return null;\n};\n\nconst isHover = (\n  event: MouseEvent | TouchEvent,\n  element: HTMLElement,\n  mode: DnDMode = \"grid\",\n  index: number,\n  length: number\n): boolean => {\n  const coordinates = getClientCoordinates(event);\n  if (!coordinates) return false;\n  const { clientX, clientY } = coordinates;\n  const rect = element.getBoundingClientRect();\n\n  switch (mode) {\n    case \"topbottom\": {\n      return (\n        (clientY < rect.bottom ||\n          (index === length - 1 && clientY >= rect.bottom)) &&\n        (clientY > rect.top || (index === 0 && clientY <= rect.top))\n      );\n    }\n    case \"bottomtop\": {\n      return (\n        (clientY < rect.bottom || (index === 0 && clientY >= rect.bottom)) &&\n        (clientY > rect.top || (index === length - 1 && clientY <= rect.top))\n      );\n    }\n    case \"leftright\": {\n      return (\n        (clientX > rect.left || (index === 0 && clientX <= rect.left)) &&\n        (clientX < rect.right ||\n          (index === length - 1 && clientX >= rect.right))\n      );\n    }\n    case \"rightleft\": {\n      return (\n        (clientX > rect.left ||\n          (index === length - 1 && clientX <= rect.left)) &&\n        (clientX < rect.right || (index === 0 && clientX >= rect.right))\n      );\n    }\n    default: {\n      return (\n        clientY < rect.bottom &&\n        clientY > rect.top &&\n        clientX < rect.right &&\n        clientX > rect.left\n      );\n    }\n  }\n};\n\ninterface Position {\n  x: number;\n  y: number;\n}\n\ninterface DnDItem<T> {\n  value: T;\n  key: string;\n  position: Position;\n  element: HTMLElement;\n  index: number;\n}\n\ninterface DnDTarget<T> {\n  value: T;\n  index: number;\n}\n\ninterface DnDRef<T> {\n  keys: Map<T, string>;\n  dndItems: DnDItem<T>[];\n  canCheckHovered: boolean;\n  pointerPosition: Position;\n  dragItem: DnDItem<T> | null;\n  hoverItem: DnDTarget<T> | null;\n}\n\nexport interface DnDSortEvent {\n  onMouseDown: (event: React.MouseEvent<HTMLElement>) => void;\n  onTouchStart: (event: React.TouchEvent<HTMLElement>) => void;\n}\n\nexport interface DnDSortResult<T> {\n  key: string;\n  value: T;\n  ref: (element: HTMLElement | null) => void;\n  trigger: DnDSortEvent;\n  propagation: DnDSortEvent;\n}\n\nexport type Drop<T> = (draged: DnDTarget<T>, hovered: DnDTarget<T>) => void;\n\nexport interface DnDProps<T> {\n  defaultItems: T[];\n  mode: DnDMode;\n  zIndex?: number;\n  duration?: number;\n  drop?: Drop<T>;\n}\n\nconst getInitState = () => {\n  return {\n    dndItems: [],\n    keys: new Map(),\n    dragItem: null,\n    hoverItem: null,\n    canCheckHovered: true,\n    pointerPosition: { x: 0, y: 0 },\n  };\n};\n\nconst stopPropagation = (\n  event: React.MouseEvent<HTMLElement> | React.TouchEvent<HTMLElement>\n) => {\n  event.stopPropagation();\n};\n\nexport const useDnDSort = <T,>(\n  props: DnDProps<T>\n): { items: DnDSortResult<T>[]; reset: (items: T[]) => void } => {\n  const { mode, defaultItems, zIndex = 100, duration = 300, drop } = props;\n\n  const [items, setItems] = useState(defaultItems);\n\n  const state = useRef<DnDRef<T>>(getInitState());\n\n  const onMove = (event: MouseEvent | TouchEvent) => {\n    if (event.cancelable) event.preventDefault();\n\n    const coordinates = getClientCoordinates(event);\n    if (!coordinates) return;\n    const { clientX, clientY } = coordinates;\n\n    const { dndItems, dragItem, pointerPosition } = state.current;\n    if (!dragItem) return;\n\n    const x = clientX - pointerPosition.x;\n    const y = clientY - pointerPosition.y;\n\n    const dragStyle = dragItem.element.style;\n\n    dragStyle.zIndex = String(zIndex);\n    dragStyle.cursor = \"grabbing\";\n    dragStyle.transform = `translate(${x}px,${y}px)`;\n\n    if (!state.current.canCheckHovered) return;\n\n    state.current.canCheckHovered = false;\n    setTimeout(() => (state.current.canCheckHovered = true), 300);\n\n    const dragIndex = dndItems.findIndex(({ key }) => key === dragItem.key);\n\n    const hoveredIndex = dndItems.findIndex(\n      ({ element }, index) =>\n        index !== dragIndex &&\n        isHover(event, element, mode, index, dndItems.length)\n    );\n    if (hoveredIndex !== -1) {\n      state.current.hoverItem = {\n        index: hoveredIndex,\n        value: dndItems[hoveredIndex].value,\n      };\n      state.current.pointerPosition.x = clientX;\n      state.current.pointerPosition.y = clientY;\n      dndItems.splice(dragIndex, 1);\n      dndItems.splice(hoveredIndex, 0, dragItem);\n      const { left: x, top: y } = dragItem.element.getBoundingClientRect();\n      dragItem.position = { x, y };\n      setItems(dndItems.map(v => v.value));\n    }\n  };\n\n  const onEnd = () => {\n    const { dragItem, hoverItem } = state.current;\n    if (dragItem === null) return;\n    const dragStyle = dragItem.element.style;\n    dragStyle.zIndex = \"\";\n    dragStyle.cursor = \"\";\n    dragStyle.transform = \"\";\n    dragStyle.userSelect = \"\";\n    state.current.dragItem = null;\n    state.current.hoverItem = null;\n\n    if (window) {\n      window.removeEventListener(\"mouseup\", onEnd);\n      window.removeEventListener(\"mousemove\", onMove);\n      window.removeEventListener(\"touchend\", onEnd);\n      window.removeEventListener(\"touchmove\", onMove);\n    }\n    const draged = {\n      index: dragItem.index,\n      value: dragItem.value,\n    };\n    const hovered = hoverItem ?? draged;\n\n    if (drop) drop(draged, hovered);\n  };\n\n  const reset = React.useCallback((items: T[]) => {\n    state.current = getInitState();\n    setItems(items);\n  }, []);\n\n  return {\n    items: items.map((value: T, index: number): DnDSortResult<T> => {\n      const key = state.current.keys.get(value) || Math.random().toString(16);\n\n      state.current.keys.set(value, key);\n\n      const onStart = (\n        event: React.MouseEvent<HTMLElement> | React.TouchEvent<HTMLElement>\n      ) => {\n        const element = event.currentTarget;\n\n        const coordinates = getClientCoordinates(event);\n        if (!coordinates) return;\n        const { clientX, clientY } = coordinates;\n        state.current.pointerPosition.x = clientX;\n        state.current.pointerPosition.y = clientY;\n\n        const dragStyle = element.style;\n        dragStyle.transition = \"\";\n        dragStyle.cursor = \"grabbing\";\n        dragStyle.userSelect = \"none\";\n\n        const { left: x, top: y } = element.getBoundingClientRect();\n        const position: Position = { x, y };\n\n        state.current.dragItem = { key, value, element, position, index };\n        state.current.hoverItem = null;\n        if (window) {\n          window.addEventListener(\"mouseup\", onEnd);\n          window.addEventListener(\"mousemove\", onMove, { passive: false });\n          window.addEventListener(\"touchend\", onEnd);\n          window.addEventListener(\"touchmove\", onMove, { passive: false });\n        }\n      };\n\n      return {\n        value,\n        key,\n        ref: (element: HTMLElement | null) => {\n          if (!element) return;\n\n          const { dndItems, dragItem, pointerPosition } = state.current;\n\n          element.style.transform = \"\";\n          const { left: x, top: y } = element.getBoundingClientRect();\n          const position: Position = { x, y };\n\n          const itemIndex = dndItems.findIndex(item => item.key === key);\n\n          if (itemIndex === -1) {\n            return dndItems.push({\n              key,\n              value,\n              element,\n              position,\n              index: dndItems.length,\n            });\n          }\n\n          if (dragItem?.key === key) {\n            const dragX = dragItem.position.x - position.x;\n            const dragY = dragItem.position.y - position.y;\n            element.style.transform = `translate(${dragX}px,${dragY}px)`;\n\n            pointerPosition.x -= dragX;\n            pointerPosition.y -= dragY;\n          } else {\n            const item = dndItems[itemIndex];\n\n            const x = item.position.x - position.x;\n            const y = item.position.y - position.y;\n\n            element.style.transition = \"\";\n            element.style.transform = `translate(${x}px,${y}px)`;\n\n            requestAnimationFrame(() => {\n              if (dragItem) {\n                element.style.transition = `all ${duration}ms`;\n              }\n              element.style.transform = \"\";\n            });\n          }\n\n          state.current.dndItems[itemIndex] = {\n            key,\n            value,\n            element,\n            position,\n            index: itemIndex,\n          };\n        },\n        trigger: {\n          onMouseDown: onStart,\n          onTouchStart: onStart,\n        },\n        propagation: {\n          onMouseDown: stopPropagation,\n          onTouchStart: stopPropagation,\n        },\n      };\n    }),\n    reset,\n  };\n};\n","import SourceState from \"ol/source/State\";\nimport TileState from \"ol/TileState\";\nimport {\n    DEFAULT_MAX_ZOOM,\n    DEFAULT_TILE_SIZE\n} from \"ol/tilegrid/common\";\nimport {\n    getHeight,\n    getWidth,\n} from \"ol/extent\";\nimport {\n    ProjectionLike,\n    get as getCachedProjection,\n} from \"ol/proj\";\nimport ImageTile from \"ol/ImageTile\";\nimport Tile from \"ol/Tile\";\nimport { AttributionLike } from \"ol/source/Source\";\nimport TileGrid from \"ol/tilegrid/TileGrid\";\nimport TileImage from \"ol/source/TileImage\";\nimport { PROJECTIONS as EPSG4326_PROJECTIONS } from \"ol/proj/epsg4326\";\nimport { PROJECTIONS as EPSG3857_PROJECTIONS } from \"ol/proj/epsg3857\";\n\nconst HALF_WORLD_3857 = Math.PI * 6378137;\nconst EXTENT = {\n    3857: [-HALF_WORLD_3857, -HALF_WORLD_3857, HALF_WORLD_3857, HALF_WORLD_3857],\n    4326: [-180, -90, 180, 90],\n};\n\nfunction is4326(code?: string) {\n    return !!(EPSG4326_PROJECTIONS.find((projection) => {\n        return projection.getCode() === code\n    }))\n}\nfunction is3857(code?: string) {\n    return !!(EPSG3857_PROJECTIONS.find((projection) => {\n        return projection.getCode() === code\n    }))\n}\n\nexport const isSupportedCode = (code: string) => {\n    return is4326(code) || is3857(code);\n}\n\nfunction rotateExtent(extent: number[], rad: number): number[] {\n    const center = [(extent[2] - extent[0]) / 2 + extent[0], (extent[3] - extent[1]) / 2 + extent[1]];\n    const leftTop = [\n        (extent[0] - center[0]) * Math.cos(rad) - (extent[3] - center[1]) * Math.sin(rad),\n        (extent[0] - center[0]) * Math.sin(rad) + (extent[3] - center[1]) * Math.cos(rad),\n    ];\n    const leftBottom = [\n        (extent[0] - center[0]) * Math.cos(rad) - (extent[1] - center[1]) * Math.sin(rad),\n        (extent[0] - center[0]) * Math.sin(rad) + (extent[1] - center[1]) * Math.cos(rad),\n    ];\n    const rightBottom = [\n        (extent[2] - center[0]) * Math.cos(rad) - (extent[1] - center[1]) * Math.sin(rad),\n        (extent[2] - center[0]) * Math.sin(rad) + (extent[1] - center[1]) * Math.cos(rad),\n    ];\n    const rightTop = [\n        (extent[2] - center[0]) * Math.cos(rad) - (extent[3] - center[1]) * Math.sin(rad),\n        (extent[2] - center[0]) * Math.sin(rad) + (extent[3] - center[1]) * Math.cos(rad),\n    ];\n\n    return [\n        Math.min(leftTop[0], leftBottom[0], rightBottom[0], rightTop[0]) + center[0],\n        Math.min(leftTop[1], leftBottom[1], rightBottom[1], rightTop[1]) + center[1],\n        Math.max(leftTop[0], leftBottom[0], rightBottom[0], rightTop[0]) + center[0],\n        Math.max(leftTop[1], leftBottom[1], rightBottom[1], rightTop[1]) + center[1],\n    ];\n}\n\ninterface ResolutionsFromExtentOptions {\n    maxZoom?: number;\n    tileSize?: number;\n    maxResolution?: number;\n    sourceResolution?: number;\n}\nfunction resolutionsFromExtent(\n    extent: number[],\n    options?: ResolutionsFromExtentOptions\n): number[] {\n    const maxZoom = options?.maxZoom !== undefined ? options.maxZoom : DEFAULT_MAX_ZOOM;\n\n    const height = getHeight(extent);\n    const width = getWidth(extent);\n\n    const tileSize = options?.tileSize !== undefined ? options.tileSize : DEFAULT_TILE_SIZE;\n    const maxResolution =\n        options?.maxResolution && options.maxResolution > 0 ?\n            options.maxResolution :\n            Math.max(width / tileSize, height / tileSize);\n\n    const sourceResolution =\n        options?.sourceResolution && options.sourceResolution > 0 ? options.sourceResolution : 0;\n\n\n    const length = maxZoom + 1;\n    const resolutions: number[] = [];\n    for (let z = 0; z < length; ++z) {\n        const resolution = maxResolution / Math.pow(2, z);\n        if (resolution < sourceResolution) break;\n        resolutions.push(resolution);\n    }\n    return resolutions;\n}\n\nfunction getWindow(gridExtent: number[], z: number, x: number, y: number,): number[] {\n    const size = Math.max(gridExtent[2] - gridExtent[0], gridExtent[3] - gridExtent[1]) / (2 ** z);\n    const left = gridExtent[0] + x * size;\n    const top = gridExtent[3] - y * size;\n    const right = left + size;\n    const bottom = top - size;\n\n    return [left, top, right, bottom]\n}\n\nfunction crossing(extentLeft: number[], extentRight: number[]): boolean {\n    return Math.max(extentLeft[0], extentRight[0]) <= Math.min(extentLeft[2], extentRight[2]) &&\n        Math.max(extentLeft[1], extentRight[1]) <= Math.min(extentLeft[3], extentRight[3])\n}\n\n\n\nexport type GlobalProps = {\n    url?: string;\n    file?: File;\n    imageExtent: number[];\n    projection: ProjectionLike;\n    rotate?: number;\n    minZoom?: number;\n    maxZoom?: number;\n    tileSize?: number;\n    attributions?: AttributionLike;\n    attributionsCollapsible?: boolean;\n    cacheSize?: number;\n    crossOrigin?: string | null;\n    interpolate?: boolean;\n    opaque?: boolean;\n    reprojectionErrorThreshold?: number;\n    tilePixelRatio?: number;\n    wrapX?: boolean;\n    transition?: number;\n};\n\nexport class Global extends TileImage {\n    private imageExtent_: number[];\n    private context_: CanvasRenderingContext2D | null;\n\n    constructor(userOptions: GlobalProps) {\n        const options = userOptions || {};\n        if (!options.url && !options.file) throw new Error(\"source url or file is necessary.\");\n\n        const tileSize = options.tileSize ? options.tileSize : DEFAULT_TILE_SIZE;\n\n        const projection = getCachedProjection(options.projection);\n        const code = projection?.getCode();\n        const gridExtent = is4326(code) ? EXTENT[4326] : is3857(code) ? EXTENT[3857] : null;\n        if (!projection || !gridExtent) throw new Error(\"Unsupported projection\");\n\n        const tileLoadFunction =\n            (imageTile: Tile, coordString: string) => {\n                const [z, x, y] = coordString.split(\",\").map(Number);\n                const canvas = document.createElement(\"canvas\");\n                const context = canvas.getContext(\"2d\");\n                const tempCanvas = document.createElement(\"canvas\");\n                const tempContext = tempCanvas.getContext(\"2d\");\n                if (!this.context_ || !context || !tempContext) {\n                    imageTile.setState(TileState.ERROR);\n                    return;\n                }\n                canvas.width = tileSize;\n                canvas.height = tileSize;\n\n                const window = getWindow(gridExtent, z, x, y);\n                let tileLeft = window[0];\n                let tileRight = window[2];\n                const tileTop = window[1];\n                const tileBottom = window[3];\n                const [\n                    imageExtentLeft, imageExtentBottom, imageExtentRight, imageExtentTop\n                ] = this.imageExtent_;\n\n                const extentWidth = gridExtent[2] - gridExtent[0];\n                if (imageExtentLeft < gridExtent[0] && 0 < tileRight) {\n                    tileLeft -= extentWidth;\n                    tileRight -= extentWidth;\n                } else if (gridExtent[2] < imageExtentRight && tileLeft < 0) {\n                    tileLeft += extentWidth;\n                    tileRight += extentWidth;\n                }\n\n                if (!crossing([\n                    imageExtentLeft, imageExtentBottom, imageExtentRight, imageExtentTop\n                ], [\n                    tileLeft, tileBottom, tileRight, tileTop\n                ])) {\n                    imageTile.setState(TileState.EMPTY);\n                }\n\n                const sourcePerPixel = [(imageExtentRight - imageExtentLeft) / this.context_.canvas.width, (imageExtentTop - imageExtentBottom) / this.context_.canvas.height];\n                const tilePerPixel = [(tileRight - tileLeft) / tileSize, (tileTop - tileBottom) / tileSize];\n                const leftBottom = [Math.max(tileLeft, imageExtentLeft), Math.max(imageExtentBottom, tileBottom)];\n                const rightTop = [Math.min(tileRight, imageExtentRight), Math.min(imageExtentTop, tileTop)];\n                const tileRect = [\n                    Math.round((leftBottom[0] - tileLeft) / tilePerPixel[0]), Math.round((tileTop - rightTop[1]) / tilePerPixel[1]),\n                    Math.round((rightTop[0] - tileLeft) / tilePerPixel[0]), Math.round((tileTop - leftBottom[1]) / tilePerPixel[1])\n                ];\n                const sourceRect = [\n                    Math.round((leftBottom[0] - imageExtentLeft) / sourcePerPixel[0]), Math.round((imageExtentTop - rightTop[1]) / sourcePerPixel[1]),\n                    Math.round((rightTop[0] - imageExtentLeft) / sourcePerPixel[0]), Math.round((imageExtentTop - leftBottom[1]) / sourcePerPixel[1])\n                ];\n                const sourceRectSize = [sourceRect[2] - sourceRect[0], sourceRect[3] - sourceRect[1]];\n                const tileRectSize = [tileRect[2] - tileRect[0], tileRect[3] - tileRect[1]];\n\n                if (Math.min(...sourceRectSize, ...tileRectSize) <= 0) {\n                    imageTile.setState(TileState.EMPTY);\n                    return\n                }\n                tempCanvas.width = sourceRectSize[0];\n                tempCanvas.height = sourceRectSize[1];\n                tempContext.clearRect(0, 0, sourceRectSize[0], sourceRectSize[1]);\n                tempContext.putImageData(this.context_.getImageData(sourceRect[0], sourceRect[1], sourceRectSize[0], sourceRectSize[1]), 0, 0);\n                context.drawImage(tempCanvas, 0, 0, sourceRectSize[0], sourceRectSize[1], tileRect[0], tileRect[1], tileRectSize[0], tileRectSize[1]);\n\n                const src = canvas.toDataURL();\n                ((imageTile as ImageTile).getImage() as HTMLImageElement).src = src;\n            };\n\n        const interpolate =\n            options.interpolate !== undefined ? options.interpolate : true;\n\n        super({\n            state: SourceState.LOADING,\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            crossOrigin: options.crossOrigin,\n            interpolate: interpolate,\n            opaque: options.opaque,\n            projection,\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            tileLoadFunction,\n            tilePixelRatio: options.tilePixelRatio,\n            url: \"{z},{x},{y}\",\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n            transition: options.transition,\n            attributionsCollapsible: options.attributionsCollapsible,\n        });\n\n\n        this.imageExtent_ = [Infinity, Infinity, -Infinity, -Infinity];\n        if (Array.isArray(options.imageExtent) && options.imageExtent.length > 3) {\n            this.imageExtent_ = options.imageExtent;\n        }\n        const originExtentAspectRatio = (this.imageExtent_[2] - this.imageExtent_[0]) / (this.imageExtent_[3] - this.imageExtent_[1]);\n\n        const gridExtentWidth = gridExtent[2] - gridExtent[0];\n        const gridExtentHeight = gridExtent[3] - gridExtent[1];\n        if (\n            this.imageExtent_[0] < gridExtent[0] - gridExtentWidth / 2 || gridExtent[2] + gridExtentWidth / 2 < this.imageExtent_[0] ||\n            this.imageExtent_[1] < gridExtent[1] || gridExtent[3] < this.imageExtent_[1] ||\n            this.imageExtent_[2] < gridExtent[0] - gridExtentWidth / 2 || gridExtent[2] + gridExtentWidth / 2 < this.imageExtent_[2] ||\n            this.imageExtent_[3] < gridExtent[1] || gridExtent[3] < this.imageExtent_[3] ||\n            this.imageExtent_[2] <= this.imageExtent_[0] ||\n            this.imageExtent_[0] - this.imageExtent_[2] > gridExtentWidth\n        ) throw new Error(\"invalid extent.\");\n\n        let rad = 0;\n        if (options.rotate) {\n            rad = options.rotate;\n            this.imageExtent_ = rotateExtent(this.imageExtent_, rad)\n        }\n\n        const canvas = document.createElement(\"canvas\");\n        const context = canvas.getContext(\"2d\");\n        if (!context) {\n            this.context_ = null;\n            return;\n        }\n        context.imageSmoothingEnabled = interpolate;\n        this.context_ = context;\n\n        const image = new Image();\n        image.crossOrigin = options.crossOrigin || \"\";\n\n        let url = \"\";\n        if (options.file)\n            url = URL.createObjectURL(options.file)\n        else if (options.url)\n            url = options.url;\n        image.addEventListener(\"load\", () => {\n            if (options.file) URL.revokeObjectURL(url);\n            let imageWidth = image.width;\n            let imageHeight = image.height;\n\n            if (imageWidth < imageHeight) {\n                imageHeight = imageWidth / originExtentAspectRatio;\n            } else {\n                imageWidth = imageHeight * originExtentAspectRatio;\n            }\n\n            const rotatedCoordinates = rotateExtent([0, 0, imageWidth, imageHeight], rad);\n            const rotatedWidth = rotatedCoordinates[2] - rotatedCoordinates[0];\n            const rotatedHeight = rotatedCoordinates[3] - rotatedCoordinates[1];\n\n            const sourceResolution = Math.max(\n                (this.imageExtent_[2] - this.imageExtent_[0]) / rotatedWidth,\n                (this.imageExtent_[3] - this.imageExtent_[1]) / rotatedHeight\n            );\n            const maxResolution = Math.max(gridExtentWidth, gridExtentHeight) / tileSize;\n            const tileGrid = new TileGrid({\n                extent: gridExtent,\n                tileSize: tileSize,\n                minZoom: options.minZoom,\n                resolutions: resolutionsFromExtent(gridExtent, {\n                    maxZoom: options.maxZoom,\n                    tileSize: tileSize,\n                    maxResolution,\n                    sourceResolution,\n                }),\n            });\n            if (tileGrid) {\n                this.tileGrid = tileGrid;\n                canvas.width = rotatedWidth;\n                canvas.height = rotatedHeight;\n\n                context.save();\n                context.translate(rotatedWidth / 2, rotatedHeight / 2);\n                context.rotate(-rad);\n                context.drawImage(image, 0, 0, image.width, image.height, -imageWidth / 2, -imageHeight / 2, imageWidth, imageHeight);\n                context.restore();\n\n                this.setState(SourceState.READY);\n            } else {\n                this.setState(SourceState.ERROR);\n            }\n        });\n        image.addEventListener(\"error\", () => {\n            if (options.file) URL.revokeObjectURL(url);\n            this.setState(SourceState.ERROR);\n        });\n\n        image.src = url;\n    }\n}","import SourceState from \"ol/source/State\";\nimport TileState from \"ol/TileState\";\nimport {\n    DEFAULT_MAX_ZOOM,\n    DEFAULT_TILE_SIZE\n} from \"ol/tilegrid/common\";\nimport {\n    getHeight,\n    getWidth,\n} from \"ol/extent\";\nimport {\n    ProjectionLike,\n    get as getCachedProjection,\n} from \"ol/proj\";\nimport ImageTile from \"ol/ImageTile\";\nimport Tile from \"ol/Tile\";\nimport { AttributionLike } from \"ol/source/Source\";\nimport TileGrid from \"ol/tilegrid/TileGrid\";\nimport TileImage from \"ol/source/TileImage\";\n\nfunction rotateExtent(extent: number[], rad: number): number[] {\n    const center = [(extent[2] - extent[0]) / 2 + extent[0], (extent[3] - extent[1]) / 2 + extent[1]];\n    const leftTop = [\n        (extent[0] - center[0]) * Math.cos(rad) - (extent[3] - center[1]) * Math.sin(rad),\n        (extent[0] - center[0]) * Math.sin(rad) + (extent[3] - center[1]) * Math.cos(rad),\n    ];\n    const leftBottom = [\n        (extent[0] - center[0]) * Math.cos(rad) - (extent[1] - center[1]) * Math.sin(rad),\n        (extent[0] - center[0]) * Math.sin(rad) + (extent[1] - center[1]) * Math.cos(rad),\n    ];\n    const rightBottom = [\n        (extent[2] - center[0]) * Math.cos(rad) - (extent[1] - center[1]) * Math.sin(rad),\n        (extent[2] - center[0]) * Math.sin(rad) + (extent[1] - center[1]) * Math.cos(rad),\n    ];\n    const rightTop = [\n        (extent[2] - center[0]) * Math.cos(rad) - (extent[3] - center[1]) * Math.sin(rad),\n        (extent[2] - center[0]) * Math.sin(rad) + (extent[3] - center[1]) * Math.cos(rad),\n    ];\n\n    return [\n        Math.min(leftTop[0], leftBottom[0], rightBottom[0], rightTop[0]) + center[0],\n        Math.min(leftTop[1], leftBottom[1], rightBottom[1], rightTop[1]) + center[1],\n        Math.max(leftTop[0], leftBottom[0], rightBottom[0], rightTop[0]) + center[0],\n        Math.max(leftTop[1], leftBottom[1], rightBottom[1], rightTop[1]) + center[1],\n    ];\n}\n\ninterface ResolutionsFromExtentOptions {\n    maxZoom?: number;\n    tileSize?: number;\n    maxResolution?: number;\n    sourceResolution?: number;\n}\nfunction resolutionsFromExtent(\n    extent: number[],\n    options?: ResolutionsFromExtentOptions\n): number[] {\n    const maxZoom = options?.maxZoom !== undefined ? options.maxZoom : DEFAULT_MAX_ZOOM;\n\n    const height = getHeight(extent);\n    const width = getWidth(extent);\n\n    const tileSize = options?.tileSize !== undefined ? options.tileSize : DEFAULT_TILE_SIZE;\n    const maxResolution =\n        options?.maxResolution && options.maxResolution > 0 ?\n            options.maxResolution :\n            Math.max(width / tileSize, height / tileSize);\n\n    const sourceResolution =\n        options?.sourceResolution && options.sourceResolution > 0 ? options.sourceResolution : 0;\n\n\n    const length = maxZoom + 1;\n    const resolutions: number[] = [];\n    for (let z = 0; z < length; ++z) {\n        const resolution = maxResolution / Math.pow(2, z);\n        if (resolution < sourceResolution) break;\n        resolutions.push(resolution);\n    }\n    return resolutions;\n}\n\nfunction getWindow(gridExtent: number[], z: number, x: number, y: number,): number[] {\n    const size = Math.max(gridExtent[2] - gridExtent[0], gridExtent[3] - gridExtent[1]) / (2 ** z);\n    const left = gridExtent[0] + x * size;\n    const top = gridExtent[3] - y * size;\n    const right = left + size;\n    const bottom = top - size;\n\n    return [left, top, right, bottom]\n}\n\nexport type RegionalProps = {\n    url?: string;\n    file?: File;\n    imageExtent: number[];\n    projection: ProjectionLike;\n    rotate?: number;\n    minZoom?: number;\n    maxZoom?: number;\n    tileSize?: number;\n    attributions?: AttributionLike;\n    attributionsCollapsible?: boolean;\n    cacheSize?: number;\n    crossOrigin?: string | null;\n    interpolate?: boolean;\n    opaque?: boolean;\n    reprojectionErrorThreshold?: number;\n    tilePixelRatio?: number;\n    wrapX?: boolean;\n    transition?: number;\n};\n\nexport class Regional extends TileImage {\n    private imageExtent_: number[];\n    private context_: CanvasRenderingContext2D | null;\n\n    constructor(userOptions: RegionalProps) {\n        const options = userOptions || {};\n        if (!options.url && !options.file) throw new Error(\"source url or file is necessary.\");\n\n        const tileSize = options.tileSize ? options.tileSize : DEFAULT_TILE_SIZE;\n\n        const projection = getCachedProjection(options.projection);\n        if (!projection) throw new Error(\"projection is necessary.\");\n\n        let imageExtent = [Infinity, Infinity, -Infinity, -Infinity];\n        if (Array.isArray(options.imageExtent) && options.imageExtent.length > 3) {\n            imageExtent = options.imageExtent;\n        }\n        if (\n            imageExtent[2] <= imageExtent[0] || imageExtent[3] <= imageExtent[1]\n        ) throw new Error(\"invalid extent.\");\n        let rad = 0;\n        if (options.rotate) {\n            rad = options.rotate;\n            imageExtent = rotateExtent(imageExtent, rad)\n        }\n\n        const tileLoadFunction =\n            (imageTile: Tile, coordString: string) => {\n                const [z, x, y] = coordString.split(\",\").map(Number);\n                const canvas = document.createElement(\"canvas\");\n                const context = canvas.getContext(\"2d\");\n                const tempCanvas = document.createElement(\"canvas\");\n                const tempContext = tempCanvas.getContext(\"2d\");\n                if (!this.context_ || !context || !tempContext) {\n                    imageTile.setState(TileState.ERROR);\n                    return;\n                }\n                canvas.width = tileSize;\n                canvas.height = tileSize;\n\n                const window = getWindow(imageExtent, z, x, y);\n                const tileLeft = window[0];\n                const tileRight = window[2];\n                const tileTop = window[1];\n                const tileBottom = window[3];\n                const [\n                    imageExtentLeft, imageExtentBottom, imageExtentRight, imageExtentTop\n                ] = this.imageExtent_;\n\n\n                const sourcePerPixel = [(imageExtentRight - imageExtentLeft) / this.context_.canvas.width, (imageExtentTop - imageExtentBottom) / this.context_.canvas.height];\n                const tilePerPixel = [(tileRight - tileLeft) / tileSize, (tileTop - tileBottom) / tileSize];\n                const leftBottom = [Math.max(tileLeft, imageExtentLeft), Math.max(imageExtentBottom, tileBottom)];\n                const rightTop = [Math.min(tileRight, imageExtentRight), Math.min(imageExtentTop, tileTop)];\n                const tileRect = [\n                    Math.round((leftBottom[0] - tileLeft) / tilePerPixel[0]), Math.round((tileTop - rightTop[1]) / tilePerPixel[1]),\n                    Math.round((rightTop[0] - tileLeft) / tilePerPixel[0]), Math.round((tileTop - leftBottom[1]) / tilePerPixel[1])\n                ];\n                const sourceRect = [\n                    Math.round((leftBottom[0] - imageExtentLeft) / sourcePerPixel[0]), Math.round((imageExtentTop - rightTop[1]) / sourcePerPixel[1]),\n                    Math.round((rightTop[0] - imageExtentLeft) / sourcePerPixel[0]), Math.round((imageExtentTop - leftBottom[1]) / sourcePerPixel[1])\n                ];\n                const sourceRectSize = [sourceRect[2] - sourceRect[0], sourceRect[3] - sourceRect[1]];\n                const tileRectSize = [tileRect[2] - tileRect[0], tileRect[3] - tileRect[1]];\n\n                if (Math.min(...sourceRectSize, ...tileRectSize) <= 0) {\n                    imageTile.setState(TileState.EMPTY);\n                    return\n                }\n                tempCanvas.width = sourceRectSize[0];\n                tempCanvas.height = sourceRectSize[1];\n                tempContext.clearRect(0, 0, sourceRectSize[0], sourceRectSize[1]);\n                tempContext.putImageData(this.context_.getImageData(sourceRect[0], sourceRect[1], sourceRectSize[0], sourceRectSize[1]), 0, 0);\n                context.drawImage(tempCanvas, 0, 0, sourceRectSize[0], sourceRectSize[1], tileRect[0], tileRect[1], tileRectSize[0], tileRectSize[1]);\n\n                const src = canvas.toDataURL();\n                ((imageTile as ImageTile).getImage() as HTMLImageElement).src = src;\n            };\n\n        const interpolate =\n            options.interpolate !== undefined ? options.interpolate : true;\n\n        super({\n            state: SourceState.LOADING,\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            crossOrigin: options.crossOrigin,\n            interpolate: interpolate,\n            opaque: options.opaque,\n            projection,\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            tileLoadFunction,\n            tilePixelRatio: options.tilePixelRatio,\n            url: \"{z},{x},{y}\",\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n            transition: options.transition,\n            attributionsCollapsible: options.attributionsCollapsible,\n        });\n\n        this.imageExtent_ = imageExtent;\n\n        const extentWidth = imageExtent[2] - imageExtent[0];\n        const extentHeight = imageExtent[3] - imageExtent[1];\n        const originExtentAspectRatio = extentWidth / extentHeight;\n\n\n        const canvas = document.createElement(\"canvas\");\n        const context = canvas.getContext(\"2d\");\n        if (!context) {\n            this.context_ = null;\n            return;\n        }\n        context.imageSmoothingEnabled = interpolate;\n        this.context_ = context;\n\n        const image = new Image();\n        image.crossOrigin = options.crossOrigin || \"\";\n\n        let url = \"\";\n        if (options.file)\n            url = URL.createObjectURL(options.file)\n        else if (options.url)\n            url = options.url;\n        image.addEventListener(\"load\", () => {\n            if (options.file) URL.revokeObjectURL(url);\n            let imageWidth = image.width;\n            let imageHeight = image.height;\n\n            if (imageWidth < imageHeight) {\n                imageHeight = imageWidth / originExtentAspectRatio;\n            } else {\n                imageWidth = imageHeight * originExtentAspectRatio;\n            }\n\n            const rotatedCoordinates = rotateExtent([0, 0, imageWidth, imageHeight], rad);\n            const rotatedWidth = rotatedCoordinates[2] - rotatedCoordinates[0];\n            const rotatedHeight = rotatedCoordinates[3] - rotatedCoordinates[1];\n\n            const sourceResolution = Math.max(\n                (this.imageExtent_[2] - this.imageExtent_[0]) / rotatedWidth,\n                (this.imageExtent_[3] - this.imageExtent_[1]) / rotatedHeight\n            );\n            const maxResolution = Math.max(extentWidth, extentHeight) / tileSize;\n            const tileGrid = new TileGrid({\n                extent: this.imageExtent_,\n                tileSize: tileSize,\n                minZoom: options.minZoom,\n                resolutions: resolutionsFromExtent(this.imageExtent_, {\n                    maxZoom: options.maxZoom,\n                    tileSize: tileSize,\n                    maxResolution,\n                    sourceResolution,\n                }),\n            });\n            if (tileGrid) {\n                this.tileGrid = tileGrid;\n                canvas.width = rotatedWidth;\n                canvas.height = rotatedHeight;\n\n                context.save();\n                context.translate(rotatedWidth / 2, rotatedHeight / 2);\n                context.rotate(-rad);\n                context.drawImage(image, 0, 0, image.width, image.height, -imageWidth / 2, -imageHeight / 2, imageWidth, imageHeight);\n                context.restore();\n\n                this.setState(SourceState.READY);\n            } else {\n                this.setState(SourceState.ERROR);\n            }\n        });\n        image.addEventListener(\"error\", () => {\n            if (options.file) URL.revokeObjectURL(url);\n            this.setState(SourceState.ERROR);\n        });\n        image.src = url;\n    }\n}","import * as React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport { useForm, SubmitHandler, Controller } from \"react-hook-form\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport { join } from \"path-browserify\";\nimport {\n  Container,\n  Typography,\n  Stack,\n  Grid,\n  TextField,\n  Button,\n  RadioGroup,\n  Radio,\n  Tooltip,\n  FormControl,\n  FormControlLabel,\n  FormHelperText,\n  InputAdornment,\n} from \"@mui/material\";\nimport { styled } from \"@mui/system\";\n\nimport { Map } from \"ol\";\nimport SourceState from \"ol/source/State\";\nimport TileLayer from \"ol/layer/Tile\";\nimport { get as getProjection, transformExtent } from \"ol/proj\";\nimport MousePosition from \"ol/control/MousePosition\";\nimport proj4 from \"proj4\";\nimport { useOl } from \"~/hooks/useOl\";\nimport { useDnDSort } from \"~/hooks/useDnDSort\";\nimport { register as olRegister } from \"ol/proj/proj4\";\nimport { utils } from \"geo4326\";\n\nimport { Global, isSupportedCode } from \"~/scripts/ImageGrid/Global\";\nimport { Regional } from \"~/scripts/ImageGrid/Regional\";\n\nconst CodeStatus = styled(\"div\")({\n  fontSize: \"12px\",\n  marginTop: \"10px\",\n  marginLeft: \"2px\",\n});\n\nconst CodeInput = styled(\"div\")({\n  display: \"flex\",\n  marginTop: \"10px\",\n  alignItems: \"center\",\n  \"& > *\": {\n    flex: \"0 0 auto\",\n    marginRight: \"5px\",\n  },\n});\n\nconst Hint = styled(\"div\")({\n  fontSize: \"12px\",\n});\n\nconst EllipsisWrapper = styled(\"div\")({\n  overflow: \"hidden\",\n});\n\nconst EllipsisTypography = styled(Typography)({\n  overflow: \"hidden\",\n  whiteSpace: \"nowrap\",\n  textOverflow: \"ellipsis\",\n});\n\nconst LayerName = styled(EllipsisWrapper)({\n  flex: \"1 1 auto\",\n});\n\nconst LayerButton = styled(\"div\")({\n  flex: \"0 0 auto\",\n});\n\nconst StyledUl = styled(\"ul\")({\n  listStyle: \"none\",\n  margin: 0,\n  padding: 0,\n  \"& > li\": {\n    marginTop: \"5px\",\n    \"&:firstChild\": {\n      marginTop: 0,\n    },\n  },\n});\n\ntype Input = {\n  code: string;\n  type: string;\n  url: string;\n  files: FileList | string;\n  extent: string;\n  rotate: string;\n};\n\ntype SubmitProps = {\n  id: string;\n  source: Input;\n};\n\ntype FormError =\n  | \"Duplicate\"\n  | \"InvalidExtent\"\n  | \"ReversedExtent\"\n  | \"UnsupportedExtent\"\n  | \"FailedLoadSource\"\n  | \"UnsupportedCrs\";\n\ntype LayerConf = {\n  layer: TileLayer<Regional | Global>;\n  name: string;\n  id: string;\n};\n\nconst defaultSourceValue = {\n  code: \"4326\",\n  type: \"file\",\n  files: \"\",\n  url: \"\",\n  extent: \"\",\n  rotate: \"0\",\n};\n\nconst Coordinates = styled(\"div\")({\n  position: \"absolute\",\n  top: 0,\n  left: 0,\n  padding: \"2px 4px\",\n  fontSize: 10,\n  pointerEvents: \"none\",\n});\n\nconst Viewer = (): React.ReactElement => {\n  const ol = useOl();\n  const wrapperRef = React.useRef<HTMLDivElement | null>(null);\n  const positionRef = React.useRef<HTMLDivElement | null>(null);\n  const [layerConfs, setLayerConfs] = React.useState<LayerConf[]>([]);\n  const [error, setError] = React.useState<FormError | null>(null);\n  const [loading, setLoading] = React.useState<boolean>();\n  const [projection, setProjection] = React.useState<{\n    code: string;\n    error: boolean;\n  }>({\n    code: \"EPSG:3857\",\n    error: false,\n  });\n  const codeRef = React.useRef<HTMLInputElement | null>(null);\n\n  const changeMapProjection = React.useCallback(\n    (code: string) => {\n      code = \"EPSG:\" + code;\n      if (!getProjection(code)) {\n        try {\n          const crs = utils.getCrs(code);\n          proj4.defs(code, crs);\n        } catch {\n          setProjection(prev => {\n            prev.error = true;\n            return {\n              code: prev.code,\n              error: true,\n            };\n          });\n          return;\n        }\n        olRegister(proj4);\n      }\n      ol.changeProjection(code);\n      setProjection({\n        code,\n        error: false,\n      });\n    },\n    [ol]\n  );\n\n  const layerList = useDnDSort<LayerConf>({\n    defaultItems: [],\n    mode: \"topbottom\",\n    drop: (draged, hovered) => {\n      if (draged.index !== hovered.index)\n        setLayerConfs(prevList => {\n          if (\n            hovered.index < 0 ||\n            draged.index < 0 ||\n            draged.index > prevList.length - 1 ||\n            hovered.index > prevList.length - 1\n          ) {\n            return prevList;\n          }\n\n          const nextList = [...prevList];\n          const target = nextList[draged.index];\n          nextList.splice(draged.index, 1);\n          nextList.splice(hovered.index, 0, target);\n          return nextList;\n        });\n    },\n  });\n\n  const {\n    control,\n    handleSubmit,\n    register,\n    reset,\n    watch,\n    setValue,\n    formState: { errors },\n  } = useForm<Input>({\n    mode: \"onSubmit\",\n    criteriaMode: \"all\",\n    defaultValues: defaultSourceValue,\n  });\n\n  const removeLayer = React.useCallback(\n    (id: string) => {\n      setLayerConfs(layerConfs => {\n        const newLayerConfs = [...layerConfs];\n        const index = newLayerConfs.findIndex(layerConf => {\n          return id === layerConf.id;\n        });\n        const target = newLayerConfs[index];\n        if (target) {\n          if (ol.map) {\n            ol.map.removeLayer(target.layer);\n\n            newLayerConfs.splice(index, 1);\n            return newLayerConfs;\n          }\n        }\n        return newLayerConfs;\n      });\n    },\n    [ol.map]\n  );\n\n  const resetList = layerList.reset;\n  React.useEffect(() => {\n    let zIndex = 0;\n    layerConfs.forEach(({ layer }) => {\n      layer.setZIndex(zIndex++);\n    });\n\n    resetList([...layerConfs]);\n  }, [layerConfs, resetList]);\n\n  const setLayer = React.useCallback(\n    async (map: Map, id: string, source: Input) => {\n      setLoading(true);\n      let name = \"\";\n      const code = \"EPSG:\" + source.code;\n      const rotate = source.rotate.length > 0 ? parseFloat(source.rotate) : 0;\n      if (!getProjection(code)) {\n        try {\n          const crs = utils.getCrs(code);\n          proj4.defs(code, crs);\n        } catch {\n          setError(\"UnsupportedCrs\");\n          return;\n        }\n        olRegister(proj4);\n      }\n\n      const extent = source.extent.split(\",\").map(v => Number(v));\n      let file: File | undefined;\n      let url: string | undefined;\n      switch (source.type) {\n        case \"file\": {\n          if (!(source.files instanceof FileList)) break;\n\n          file = source.files[0];\n          name = file.name;\n          break;\n        }\n        case \"url\": {\n          url = source.url;\n          name = url;\n          break;\n        }\n      }\n      let imageSource: Regional | Global | null = null;\n      try {\n        if (isSupportedCode(code)) {\n          imageSource = new Global({\n            projection: code,\n            file,\n            url,\n            imageExtent: extent,\n            rotate: (rotate / 180) * Math.PI,\n            crossOrigin: \"anonymous\",\n            wrapX: true,\n          });\n        } else {\n          imageSource = new Regional({\n            projection: code,\n            file,\n            url,\n            imageExtent: extent,\n            rotate: (rotate / 180) * Math.PI,\n            crossOrigin: \"anonymous\",\n            wrapX: true,\n          });\n        }\n      } catch {\n        setError(\"UnsupportedExtent\");\n        setLoading(false);\n      }\n      if (imageSource) {\n        const source = imageSource;\n        const sourceState = source.getState();\n        const setting = () => {\n          const layer = new TileLayer({\n            source,\n          });\n          map.addLayer(layer);\n          setLayerConfs(layerConfs => {\n            return [\n              ...layerConfs,\n              {\n                id,\n                layer,\n                name,\n                error: null,\n              },\n            ];\n          });\n\n          const originExtent = extent;\n          if (originExtent) {\n            const transformed = transformExtent(\n              originExtent,\n              code,\n              \"EPSG:3857\"\n            );\n\n            if (transformed[0] > transformed[2])\n              transformed[2] += proj4(code, \"EPSG:3857\", [180, 0])[0] * 2;\n\n            map.getView().fit(transformed, {\n              padding: [40, 20, 40, 20],\n              maxZoom: 20,\n            });\n          }\n        };\n\n        if (sourceState === SourceState.READY) {\n          setting();\n          setLoading(false);\n        } else {\n          const sourceListener = () => {\n            const sourceState = source.getState();\n            if (sourceState === SourceState.ERROR) {\n              source.removeEventListener(\"change\", sourceListener);\n              setError(\"FailedLoadSource\");\n              setLoading(false);\n            }\n            if (sourceState === SourceState.READY) {\n              source.removeEventListener(\"change\", sourceListener);\n              setting();\n              setLoading(false);\n            }\n          };\n          imageSource.addEventListener(\"change\", sourceListener);\n        }\n      }\n    },\n    []\n  );\n\n  const load = React.useCallback(\n    ({ source, id }: SubmitProps) => {\n      if (ol.map) setLayer(ol.map, id, source);\n    },\n    [ol.map, setLayer]\n  );\n\n  React.useEffect(() => {\n    if (loading === false) {\n      reset();\n    }\n  }, [loading, reset]);\n\n  const onSubmit: SubmitHandler<Input> = React.useCallback(\n    data => {\n      const extent = data.extent.split(\",\").map(v => Number(v));\n\n      for (let i = 0; i < extent.length; i++) {\n        const n = extent[i];\n        if (!(typeof n === \"number\" && n - n === 0)) {\n          setError(\"InvalidExtent\");\n          return;\n        }\n      }\n      if (extent[0] > extent[2] || extent[1] > extent[3]) {\n        setError(\"ReversedExtent\");\n        return;\n      }\n      let id = \"\";\n      switch (data.type) {\n        case \"file\": {\n          if (!(data.files instanceof FileList)) break;\n\n          const file = data.files[0];\n          id += file.name;\n          break;\n        }\n        case \"url\": {\n          const url = data.url;\n          id += url;\n          break;\n        }\n      }\n      id += extent.join(\",\");\n\n      const rotate = data.rotate.length > 0 ? data.rotate : 0;\n      id += \",\" + rotate;\n      if (id.length > 0) {\n        const index = layerConfs.findIndex(layerConf => {\n          return id === layerConf.id;\n        });\n        if (index >= 0) {\n          setError(\"Duplicate\");\n          return;\n        }\n        load({\n          id,\n          source: data,\n        });\n      }\n    },\n    [load, layerConfs]\n  );\n\n  const watcher = watch();\n  const sample = React.useCallback(() => {\n    reset();\n    setValue(\"code\", \"4326\");\n    setValue(\"type\", \"url\");\n    setValue(\n      \"url\",\n      location.origin + join(location.pathname, \"../image/rect.png\")\n    );\n    setValue(\"extent\", \"0,0,10,10\");\n\n    setError(null);\n  }, [setValue, setError, reset]);\n\n  React.useEffect(() => {\n    let mousePositionControl: MousePosition | null = null;\n\n    if (ol.map && positionRef.current) {\n      mousePositionControl = new MousePosition({\n        coordinateFormat: coords => {\n          if (coords)\n            return `lon: ${coords[0].toFixed(4)}, lat: ${coords[1].toFixed(4)}`;\n          return \"\";\n        },\n        projection: \"EPSG:4326\",\n        className: \"\",\n        target: positionRef.current,\n      });\n      ol.map.addControl(mousePositionControl);\n    }\n    return () => {\n      if (ol.map && mousePositionControl) {\n        ol.map.removeControl(mousePositionControl);\n      }\n    };\n  }, [ol.map]);\n\n  return (\n    <>\n      <CssBaseline />\n      <Helmet>\n        <title>Display Image</title>\n        <meta name=\"description\" content=\"Display image on map.\" />\n        <link\n          rel=\"canonical\"\n          href=\"https://yonda-yonda.github.io/exmap/picture\"\n        />\n        <link\n          rel=\"icon\"\n          type=\"image/x-icon\"\n          href=\"https://github.githubassets.com/favicon.ico\"\n        />\n        <link\n          rel=\"stylesheet\"\n          href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap\"\n        />\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:title\" content=\"Display Image\" />\n        <meta\n          name=\"twitter:description\"\n          content=\"PNG JPEG GIF WEBPを表示します\"\n        />\n        <meta\n          property=\"og:url\"\n          content=\"https://yonda-yonda.github.io/exmap/picture\"\n        />\n        <meta\n          name=\"twitter:image\"\n          content=\"https://yonda-yonda.github.io/exmap/image/twitter_picture.png\"\n        />\n      </Helmet>\n      <Container>\n        <Typography variant=\"h2\" component=\"h1\">\n          Display Image\n        </Typography>\n        <Stack my={4} spacing={4}>\n          <div>\n            <Grid container spacing={2}>\n              <Grid item xs={9}>\n                <div style={{ position: \"relative\" }} ref={wrapperRef}>\n                  <div\n                    ref={ol.ref}\n                    style={{\n                      width: \"100%\",\n                      height: \"340px\",\n                    }}\n                  />\n\n                  <CodeStatus>view at {projection.code}</CodeStatus>\n                  <CodeInput>\n                    <div>\n                      <TextField\n                        inputRef={codeRef}\n                        label=\"MapCode\"\n                        size=\"small\"\n                        InputProps={{\n                          startAdornment: (\n                            <InputAdornment position=\"start\">\n                              EPSG:\n                            </InputAdornment>\n                          ),\n                        }}\n                      />\n                    </div>\n                    <Button\n                      variant=\"contained\"\n                      type=\"button\"\n                      onClick={() => {\n                        changeMapProjection(codeRef.current?.value || \"\");\n                      }}\n                    >\n                      Change\n                    </Button>\n                  </CodeInput>\n                  {projection.error && (\n                    <FormHelperText>Unsupported Code.</FormHelperText>\n                  )}\n                  <Coordinates ref={positionRef}></Coordinates>\n                </div>\n              </Grid>\n              <Grid item xs={3}>\n                {layerConfs.length > 0 ? (\n                  <StyledUl>\n                    {layerList.items.map(item => {\n                      return (\n                        <li key={item.key} ref={item.ref} {...item.trigger}>\n                          <Stack\n                            direction=\"row\"\n                            spacing={1}\n                            justifyContent=\"space-between\"\n                            alignItems=\"center\"\n                          >\n                            <LayerName>\n                              <Tooltip\n                                title={\n                                  <Typography\n                                    variant=\"caption\"\n                                    display=\"block\"\n                                    {...item.propagation}\n                                  >\n                                    {item.value.name}\n                                  </Typography>\n                                }\n                                arrow\n                                placement=\"left\"\n                              >\n                                <EllipsisTypography variant=\"body2\">\n                                  {item.value.name}\n                                </EllipsisTypography>\n                              </Tooltip>\n                            </LayerName>\n                            <LayerButton {...item.propagation}>\n                              <Button\n                                size=\"small\"\n                                variant=\"outlined\"\n                                onClick={() => {\n                                  removeLayer(item.value.id);\n                                }}\n                              >\n                                REMOVE\n                              </Button>\n                            </LayerButton>\n                          </Stack>\n                        </li>\n                      );\n                    })}\n                  </StyledUl>\n                ) : (\n                  <Typography>Nothing to display.</Typography>\n                )}\n              </Grid>\n            </Grid>\n          </div>\n          <hr />\n          <div>\n            <form onSubmit={handleSubmit(onSubmit)}>\n              <Stack spacing={2}>\n                <div>\n                  <Button variant=\"outlined\" onClick={sample} size=\"small\">\n                    sample\n                  </Button>\n                </div>\n                <Controller\n                  control={control}\n                  name=\"type\"\n                  render={({ field }) => (\n                    <FormControl fullWidth>\n                      <RadioGroup row {...field}>\n                        <FormControlLabel\n                          value=\"file\"\n                          control={<Radio size=\"small\" />}\n                          label=\"Local File\"\n                        />\n                        <FormControlLabel\n                          value=\"url\"\n                          control={<Radio size=\"small\" />}\n                          label=\"URL\"\n                        />\n                      </RadioGroup>\n                    </FormControl>\n                  )}\n                />\n                {watcher.type === \"file\" && (\n                  <FormControl\n                    component=\"fieldset\"\n                    error={!!errors?.files}\n                    fullWidth\n                  >\n                    <input\n                      {...register(\"files\", {\n                        required: true,\n                        validate: {\n                          length: f => f instanceof FileList && f.length === 1,\n                        },\n                      })}\n                      disabled={loading}\n                      accept=\".webp,.png,.jpeg,.jpg,.gif,image/webp,image/png,image/jpeg,image/svg+xml,image/gif\"\n                      type=\"file\"\n                    />\n                    {errors?.files?.type === \"required\" && (\n                      <FormHelperText>\n                        Required. <br />\n                        ファイルを選択してください。\n                      </FormHelperText>\n                    )}\n                    {errors?.files?.type === \"length\" && (\n                      <FormHelperText>\n                        Required. <br />\n                        ファイルを1つ選択してください。\n                      </FormHelperText>\n                    )}\n                  </FormControl>\n                )}\n                {watcher.type === \"url\" && (\n                  <Controller\n                    control={control}\n                    name=\"url\"\n                    render={({ field, fieldState: { invalid, error } }) => (\n                      <FormControl\n                        component=\"fieldset\"\n                        error={invalid}\n                        fullWidth\n                      >\n                        <TextField\n                          {...field}\n                          label=\"url\"\n                          size=\"small\"\n                          error={invalid}\n                          placeholder=\"https://\"\n                          disabled={loading}\n                        />\n                        {error?.type === \"required\" && (\n                          <FormHelperText>\n                            Required. <br />\n                            必須です。入力してください。\n                          </FormHelperText>\n                        )}\n                        {error?.type === \"pattern\" && (\n                          <FormHelperText>\n                            Not matched URL pattern.\n                            <br />\n                            URLの形式が正しくありません。\n                          </FormHelperText>\n                        )}\n                      </FormControl>\n                    )}\n                    rules={{\n                      required: true,\n                      pattern: /(^(https?):\\/\\/[^ \"]+$|(^http:\\/\\/localhost))/,\n                    }}\n                  />\n                )}\n                <Hint>support: .webp, .png, .jpeg, .jpg, .gif</Hint>\n                <Stack direction=\"row\" spacing={4} sx={{ mt: 2, mb: 1 }}>\n                  <Controller\n                    control={control}\n                    name=\"code\"\n                    render={({ field, fieldState: { invalid, error } }) => (\n                      <FormControl\n                        component=\"fieldset\"\n                        error={invalid}\n                        fullWidth\n                      >\n                        <TextField\n                          {...field}\n                          label=\"SourceCode\"\n                          size=\"small\"\n                          error={invalid}\n                          InputProps={{\n                            startAdornment: (\n                              <InputAdornment position=\"start\">\n                                EPSG:\n                              </InputAdornment>\n                            ),\n                          }}\n                        />\n                        {error?.type === \"required\" && (\n                          <FormHelperText>\n                            Required. <br />\n                            必須です。入力してください。\n                          </FormHelperText>\n                        )}\n                      </FormControl>\n                    )}\n                    rules={{\n                      required: true,\n                    }}\n                  />\n                  <Controller\n                    control={control}\n                    name=\"extent\"\n                    render={({ field, fieldState: { invalid, error } }) => (\n                      <FormControl\n                        component=\"fieldset\"\n                        error={invalid}\n                        fullWidth\n                      >\n                        <TextField\n                          {...field}\n                          label=\"Extent\"\n                          size=\"small\"\n                          error={invalid}\n                          placeholder=\"left, bottom, right, top\"\n                        />\n                        {error?.type === \"required\" && (\n                          <FormHelperText>\n                            Required. <br />\n                            必須です。入力してください。\n                          </FormHelperText>\n                        )}\n                        {error?.type === \"pattern\" && (\n                          <FormHelperText>\n                            Must be left bottom and right top coordinates\n                            separated by commas.\n                            <br />\n                            カンマ区切りで左下経度,左下緯度,右上経度,右上緯度を入力してください。\n                          </FormHelperText>\n                        )}\n                      </FormControl>\n                    )}\n                    rules={{\n                      required: true,\n                      pattern: /^(\\+|-|\\.|\\d|e|E|,|\\s)*$/,\n                    }}\n                  />\n                </Stack>\n                <Stack direction=\"row\" spacing={4} sx={{ mb: 1 }}>\n                  <Controller\n                    control={control}\n                    name=\"rotate\"\n                    render={({ field, fieldState: { invalid, error } }) => (\n                      <FormControl\n                        component=\"fieldset\"\n                        error={invalid}\n                        fullWidth\n                      >\n                        <TextField\n                          {...field}\n                          label=\"Rotate(degree)\"\n                          size=\"small\"\n                          error={invalid}\n                        />\n                        {error?.type === \"pattern\" && (\n                          <FormHelperText>\n                            must be a number. <br />\n                            数値を入力してください。\n                          </FormHelperText>\n                        )}\n                      </FormControl>\n                    )}\n                    rules={{\n                      pattern: /^((\\+|-){0,1}[1-9]\\d*|0)(\\.\\d+)?$/,\n                    }}\n                  />\n                </Stack>\n              </Stack>\n              <FormControl error={!!error} sx={{ mt: 3 }}>\n                <div>\n                  <Button\n                    variant=\"contained\"\n                    type=\"submit\"\n                    disabled={loading}\n                    onClick={() => {\n                      setError(null);\n                    }}\n                  >\n                    Add Layer\n                  </Button>\n                </div>\n                {error === \"Duplicate\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Duplicate Layer. <br />\n                    すでに同じレイヤーが存在します。\n                  </FormHelperText>\n                )}\n                {error === \"InvalidExtent\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Extent includes Non-numbers. <br />\n                    Extentに数字以外の値が入力されています。\n                  </FormHelperText>\n                )}\n                {error === \"ReversedExtent\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Some values of Extent are reversed. <br />\n                    Extentに大小が逆の値が含まれています。\n                  </FormHelperText>\n                )}\n                {error === \"UnsupportedExtent\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Some values of Extent are unsupported. <br />\n                    Extentにサポート外の値が含まれています。\n                  </FormHelperText>\n                )}\n                {error === \"FailedLoadSource\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Failed to load source. <br />\n                    ファイルの読み込みに失敗しました。\n                  </FormHelperText>\n                )}\n                {error === \"UnsupportedCrs\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Unsupported CRS. <br />\n                    サポート外の投影系です。\n                  </FormHelperText>\n                )}\n              </FormControl>\n            </form>\n          </div>\n        </Stack>\n      </Container>\n    </>\n  );\n};\nexport default Viewer;\n"],"names":["createSvgIcon","d","RadioButtonIconRoot","styled","position","display","RadioButtonIconBackground","RadioButtonUnchecked","skipSx","transform","RadioButtonIconDot","RadioButtonChecked","_ref","theme","ownerState","left","transition","transitions","create","easing","easeIn","duration","shortest","checked","easeOut","props","_props$checked","_props$classes","classes","fontSize","className","root","children","background","dot","getRadioUtilityClass","slot","generateUtilityClass","_excluded","RadioRoot","SwitchBase","shouldForwardProp","prop","name","overridesResolver","styles","concat","capitalize","color","palette","text","secondary","backgroundColor","action","active","main","hoverOpacity","disabled","defaultCheckedIcon","defaultIcon","inProps","ref","_defaultIcon$props$fo","_defaultCheckedIcon$p","a","b","useThemeProps","checkedProp","_props$checkedIcon","checkedIcon","_props$color","_props$icon","icon","nameProp","onChangeProp","onChange","_props$size","size","other","slots","composeClasses","useUtilityClasses","radioGroup","RadioGroupContext","createChainedFunction","value","String","type","getFormGroupUtilityClass","FormGroupRoot","row","flexDirection","flexWrap","_props$row","actions","defaultValue","valueProp","rootRef","_useControlled","useControlled","controlled","default","_useControlled2","setValueState","focus","input","current","querySelector","handleRef","useForkRef","useId","event","target","role","undefined","_extendStatics","__extends","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","__","this","constructor","PROJECTION","COORDINATE_FORMAT","MousePosition","_super","opt_options","_this","options","element","document","createElement","render","on","once","un","addChangeListener","handleProjectionChanged_","coordinateFormat","setCoordinateFormat","projection","setProjection","renderOnMouseOut","placeholder","undefinedHTML","placeholder_","renderOnMouseOut_","renderedHTML_","innerHTML","mapProjection_","transform_","getCoordinateFormat","get","getProjection","handleMouseMove","map","getMap","updateHTML_","getEventPixel","handleMouseOut","setMap","viewport","getViewport","listenerKeys","push","format","set","pixel","html","coordinate","getCoordinateFromPixelInternal","userProjection","toString","mapEvent","frameState","viewState","assertPath","path","JSON","stringify","normalizeStringPosix","allowAboveRoot","code","res","lastSegmentLength","lastSlash","dots","i","length","charCodeAt","lastSlashIndex","lastIndexOf","slice","posix","resolve","cwd","resolvedPath","resolvedAbsolute","arguments","process","normalize","isAbsolute","trailingSeparator","join","joined","arg","relative","from","to","fromStart","fromEnd","fromLen","toStart","toLen","lastCommonSep","fromCode","out","_makeLong","dirname","hasRoot","end","matchedSlash","basename","ext","start","extIdx","firstNonSlashEnd","extname","startDot","startPart","preDotState","pathObject","sep","dir","base","_format","parse","ret","delimiter","win32","module","exports","getClientCoordinates","changedTouches","clientX","clientY","getInitState","dndItems","keys","Map","dragItem","hoverItem","canCheckHovered","pointerPosition","x","y","stopPropagation","useDnDSort","mode","defaultItems","zIndex","drop","useState","items","setItems","state","useRef","onMove","cancelable","preventDefault","coordinates","dragStyle","style","cursor","setTimeout","dragIndex","findIndex","key","hoveredIndex","index","rect","getBoundingClientRect","bottom","top","right","isHover","splice","v","onEnd","userSelect","window","removeEventListener","draged","reset","React","Math","random","onStart","currentTarget","addEventListener","passive","itemIndex","item","dragX","dragY","requestAnimationFrame","trigger","onMouseDown","onTouchStart","propagation","HALF_WORLD_3857","PI","EXTENT","is4326","EPSG4326_PROJECTIONS","getCode","is3857","EPSG3857_PROJECTIONS","isSupportedCode","rotateExtent","extent","rad","center","leftTop","cos","sin","leftBottom","rightBottom","rightTop","min","max","resolutionsFromExtent","maxZoom","DEFAULT_MAX_ZOOM","height","getHeight","width","getWidth","tileSize","DEFAULT_TILE_SIZE","maxResolution","sourceResolution","resolutions","z","resolution","pow","Global","userOptions","url","file","Error","getCachedProjection","gridExtent","interpolate","SourceState","attributions","cacheSize","crossOrigin","opaque","reprojectionErrorThreshold","tileLoadFunction","imageTile","coordString","split","Number","canvas","context","getContext","tempCanvas","tempContext","context_","extentLeft","extentRight","getWindow","tileLeft","tileRight","tileTop","tileBottom","imageExtent_","imageExtentLeft","imageExtentBottom","imageExtentRight","imageExtentTop","extentWidth","setState","TileState","sourcePerPixel","tilePerPixel","tileRect","round","sourceRect","sourceRectSize","tileRectSize","clearRect","putImageData","getImageData","drawImage","src","toDataURL","getImage","tilePixelRatio","wrapX","attributionsCollapsible","Infinity","isArray","imageExtent","originExtentAspectRatio","gridExtentWidth","gridExtentHeight","rotate","imageSmoothingEnabled","image","Image","URL","createObjectURL","revokeObjectURL","imageWidth","imageHeight","rotatedCoordinates","rotatedWidth","rotatedHeight","tileGrid","TileGrid","minZoom","save","translate","restore","TileImage","Regional","extentHeight","CodeStatus","marginTop","marginLeft","CodeInput","alignItems","flex","marginRight","Hint","EllipsisWrapper","overflow","EllipsisTypography","Typography","whiteSpace","textOverflow","LayerName","LayerButton","StyledUl","listStyle","margin","padding","defaultSourceValue","files","Coordinates","pointerEvents","ol","useOl","wrapperRef","positionRef","layerConfs","setLayerConfs","error","setError","loading","setLoading","codeRef","changeMapProjection","crs","utils","proj4","prev","olRegister","changeProjection","layerList","hovered","prevList","nextList","useForm","criteriaMode","defaultValues","control","handleSubmit","register","watch","setValue","errors","formState","removeLayer","id","newLayerConfs","layerConf","layer","resetList","forEach","setZIndex","setLayer","source","parseFloat","FileList","imageSource","sourceState","getState","setting","TileLayer","addLayer","originExtent","transformed","transformExtent","getView","fit","sourceListener","load","onSubmit","data","n","watcher","sample","location","origin","pathname","mousePositionControl","coords","toFixed","addControl","removeControl","CssBaseline","Helmet","content","rel","href","property","Container","variant","component","Stack","my","spacing","Grid","container","xs","TextField","inputRef","label","InputProps","startAdornment","InputAdornment","Button","onClick","FormHelperText","direction","justifyContent","Tooltip","title","arrow","placement","field","FormControl","fullWidth","RadioGroup","FormControlLabel","Radio","required","validate","f","accept","fieldState","invalid","rules","pattern","sx","mt","mb","ml"],"sourceRoot":""}