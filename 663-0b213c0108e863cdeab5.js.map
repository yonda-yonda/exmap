{"version":3,"file":"663-0b213c0108e863cdeab5.js","mappings":"+MAMA,SAASA,EAAaC,GAAW,IAAIC,EAErC,WAAuC,GAAuB,oBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAsF,OAAhFC,QAAQC,UAAUC,QAAQC,KAAKP,QAAQC,UAAUG,QAAS,IAAI,iBAAyB,EAAQ,MAAOI,GAAK,OAAO,GAF9PC,GAA6B,OAAO,WAAkC,IAAsCC,EAAlCC,GAAQ,OAAgBb,GAAkB,GAAIC,EAA2B,CAAE,IAAIa,GAAY,OAAgBC,MAAMC,YAAaJ,EAASV,QAAQC,UAAUU,EAAOI,UAAWH,QAAqBF,EAASC,EAAMK,MAAMH,KAAME,WAAc,OAAO,OAA2BF,KAAMH,IA6C5Z,SAASO,EAAeC,EAAMC,GAC5B,IAAK,IAAIC,EAAID,EAAOE,OAAS,EAAGD,GAAK,EAAGA,IACtCF,EAAKI,KAAKH,EAAOC,IAGnB,OAAOF,EAGT,SAASK,EAAWC,GAIlB,IAHA,IAAIC,EAAkB,IAAIC,YAAY,MAClCC,EAAiB,IAAIC,WAAW,MAE3BR,EAAI,EAAGA,GAAK,IAAKA,IACxBK,EAAgBL,GAAK,KACrBO,EAAeP,GAAKA,EAGtB,IAAIS,EAAmB,IACnBC,EA1DS,EA2DTC,EAAW,EAEf,SAASC,IACPH,EAAmB,IACnBC,EA/DW,EAkEb,SAASG,EAAQC,GACf,IAAIC,EA5DR,SAAiBD,EAAOH,EAAUV,GAChC,IAAIe,EAAIL,EAAW,EACfM,EAAIC,KAAKC,MAAMR,EAAW,GAC1BS,EAAK,EAAIJ,EACTK,EAAKV,EAAWV,EAAmB,GAATgB,EAAI,GAC9BK,EAAK,GAAKL,EAAI,IAAMN,EAAWV,GAC/BsB,EAAe,GAATN,EAAI,GAASN,EAGvB,GAFAW,EAAKJ,KAAKM,IAAI,EAAGF,GAEbL,GAAKH,EAAMb,OAEb,OADAwB,QAAQC,KAAK,6EAdF,IAkBb,IAAIC,EAASb,EAAMG,GAAKC,KAAKU,IAAI,EAAG,EAAIZ,GAAK,EAEzCa,EADJF,IAAW1B,EAASmB,EAGpB,GAAIH,EAAI,EAAIH,EAAMb,OAAQ,CACxB,IAAI6B,EAAShB,EAAMG,EAAI,KAAOK,EAE9BO,GADAC,IAAWZ,KAAKM,IAAI,EAAGvB,EAASsB,GAIlC,GAAIF,EAAK,GAAKJ,EAAI,EAAIH,EAAMb,OAAQ,CAClC,IAAI8B,EAAe,GAATd,EAAI,IAAUN,EAAWV,GAEnC4B,GADaf,EAAMG,EAAI,KAAOc,EAIhC,OAAOF,EA8BMG,CAAQlB,EAAOH,EAAUD,GAEpC,OADAC,GAAYD,EACLK,EAGT,SAASkB,EAAgBjC,EAAGkC,GAI1B,OAHA3B,EAAeE,GAAoByB,EACnC7B,EAAgBI,GAAoBT,IACpCS,EAC0B,EAG5B,SAAS0B,EAAsBC,GAG7B,IAFA,IAAIC,EAAM,GAEDC,EAAKF,EAAU,OAAPE,EAAaA,EAAKjC,EAAgBiC,GACjDD,EAAInC,KAAKK,EAAe+B,IAG1B,OAAOD,EAGT,IAAI/C,EAAS,GACbsB,IAKA,IAJA,IAEI2B,EAFAzB,EAAQ,IAAIN,WAAWJ,GACvBoC,EAAO3B,EAAQC,GAzFN,MA4FN0B,GAAmB,CACxB,GA/Fa,MA+FTA,EAAqB,CAIvB,IAHA5B,IACA4B,EAAO3B,EAAQC,GAjGJ,MAmGJ0B,GACLA,EAAO3B,EAAQC,GAGjB,GArGS,MAqGL0B,EACF,MACK,GAAIA,EAzGA,IA0GT,MAAM,IAAIC,MAAM,8BAA8BC,OAAOF,IAGrD3C,EAAeP,EADL6C,EAAsBK,IAEhCD,EAAUC,OAEP,GAAIA,EAAO/B,EAAkB,CAClC,IAAIkC,EAAOR,EAAsBK,GAEjC3C,EAAeP,EAAQqD,GACvBV,EAAgBM,EAASI,EAAKA,EAAK1C,OAAS,IAC5CsC,EAAUC,MACL,CACL,IAAII,EAAST,EAAsBI,GAEnC,IAAKK,EACH,MAAM,IAAIH,MAAM,mCAAmCC,OAAOH,EAAS,OAAOG,OAAOjC,EAAkB,gBAAgBiC,OAAO/B,IAG5Hd,EAAeP,EAAQsD,GACvBtD,EAAOY,KAAK0C,EAAOA,EAAO3C,OAAS,IACnCgC,EAAgBM,EAASK,EAAOA,EAAO3C,OAAS,IAChDsC,EAAUC,EAGR/B,EAAmB,GAAKS,KAAKU,IAAI,EAAGlB,KA/HvB,KAgIXA,EACF6B,OAAUM,EAEVnC,KAIJ8B,EAAO3B,EAAQC,GAGjB,OAAO,IAAIN,WAAWlB,GAGxB,IAAIwD,EAA0B,SAAUC,IACtC,OAAUD,EAAYC,GAEtB,IAAIC,EAASvE,EAAaqE,GAE1B,SAASA,IAGP,OAFA,OAAgBrD,KAAMqD,GAEfE,EAAOpD,MAAMH,KAAME,WAU5B,OAPA,OAAamD,EAAY,CAAC,CACxBG,IAAK,cACLC,MAAO,SAAqBC,GAC1B,OAAOhD,EAAWgD,GAAeA,WAI9BL,EAlBqB,CAmB5B","sources":["webpack://exmap/./node_modules/geotiff/dist-module/compression/lzw.js"],"sourcesContent":["import _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport BaseDecoder from './basedecoder.js';\nvar MIN_BITS = 9;\nvar CLEAR_CODE = 256; // clear code\n\nvar EOI_CODE = 257; // end of information\n\nvar MAX_BYTELENGTH = 12;\n\nfunction getByte(array, position, length) {\n  var d = position % 8;\n  var a = Math.floor(position / 8);\n  var de = 8 - d;\n  var ef = position + length - (a + 1) * 8;\n  var fg = 8 * (a + 2) - (position + length);\n  var dg = (a + 2) * 8 - position;\n  fg = Math.max(0, fg);\n\n  if (a >= array.length) {\n    console.warn('ran off the end of the buffer before finding EOI_CODE (end on input code)');\n    return EOI_CODE;\n  }\n\n  var chunk1 = array[a] & Math.pow(2, 8 - d) - 1;\n  chunk1 <<= length - de;\n  var chunks = chunk1;\n\n  if (a + 1 < array.length) {\n    var chunk2 = array[a + 1] >>> fg;\n    chunk2 <<= Math.max(0, length - dg);\n    chunks += chunk2;\n  }\n\n  if (ef > 8 && a + 2 < array.length) {\n    var hi = (a + 3) * 8 - (position + length);\n    var chunk3 = array[a + 2] >>> hi;\n    chunks += chunk3;\n  }\n\n  return chunks;\n}\n\nfunction appendReversed(dest, source) {\n  for (var i = source.length - 1; i >= 0; i--) {\n    dest.push(source[i]);\n  }\n\n  return dest;\n}\n\nfunction decompress(input) {\n  var dictionaryIndex = new Uint16Array(4093);\n  var dictionaryChar = new Uint8Array(4093);\n\n  for (var i = 0; i <= 257; i++) {\n    dictionaryIndex[i] = 4096;\n    dictionaryChar[i] = i;\n  }\n\n  var dictionaryLength = 258;\n  var byteLength = MIN_BITS;\n  var position = 0;\n\n  function initDictionary() {\n    dictionaryLength = 258;\n    byteLength = MIN_BITS;\n  }\n\n  function getNext(array) {\n    var byte = getByte(array, position, byteLength);\n    position += byteLength;\n    return byte;\n  }\n\n  function addToDictionary(i, c) {\n    dictionaryChar[dictionaryLength] = c;\n    dictionaryIndex[dictionaryLength] = i;\n    dictionaryLength++;\n    return dictionaryLength - 1;\n  }\n\n  function getDictionaryReversed(n) {\n    var rev = [];\n\n    for (var _i = n; _i !== 4096; _i = dictionaryIndex[_i]) {\n      rev.push(dictionaryChar[_i]);\n    }\n\n    return rev;\n  }\n\n  var result = [];\n  initDictionary();\n  var array = new Uint8Array(input);\n  var code = getNext(array);\n  var oldCode;\n\n  while (code !== EOI_CODE) {\n    if (code === CLEAR_CODE) {\n      initDictionary();\n      code = getNext(array);\n\n      while (code === CLEAR_CODE) {\n        code = getNext(array);\n      }\n\n      if (code === EOI_CODE) {\n        break;\n      } else if (code > CLEAR_CODE) {\n        throw new Error(\"corrupted code at scanline \".concat(code));\n      } else {\n        var val = getDictionaryReversed(code);\n        appendReversed(result, val);\n        oldCode = code;\n      }\n    } else if (code < dictionaryLength) {\n      var _val = getDictionaryReversed(code);\n\n      appendReversed(result, _val);\n      addToDictionary(oldCode, _val[_val.length - 1]);\n      oldCode = code;\n    } else {\n      var oldVal = getDictionaryReversed(oldCode);\n\n      if (!oldVal) {\n        throw new Error(\"Bogus entry. Not in dictionary, \".concat(oldCode, \" / \").concat(dictionaryLength, \", position: \").concat(position));\n      }\n\n      appendReversed(result, oldVal);\n      result.push(oldVal[oldVal.length - 1]);\n      addToDictionary(oldCode, oldVal[oldVal.length - 1]);\n      oldCode = code;\n    }\n\n    if (dictionaryLength + 1 >= Math.pow(2, byteLength)) {\n      if (byteLength === MAX_BYTELENGTH) {\n        oldCode = undefined;\n      } else {\n        byteLength++;\n      }\n    }\n\n    code = getNext(array);\n  }\n\n  return new Uint8Array(result);\n}\n\nvar LZWDecoder = /*#__PURE__*/function (_BaseDecoder) {\n  _inherits(LZWDecoder, _BaseDecoder);\n\n  var _super = _createSuper(LZWDecoder);\n\n  function LZWDecoder() {\n    _classCallCheck(this, LZWDecoder);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(LZWDecoder, [{\n    key: \"decodeBlock\",\n    value: function decodeBlock(buffer) {\n      return decompress(buffer, false).buffer;\n    }\n  }]);\n\n  return LZWDecoder;\n}(BaseDecoder);\n\nexport { LZWDecoder as default };"],"names":["_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","appendReversed","dest","source","i","length","push","decompress","input","dictionaryIndex","Uint16Array","dictionaryChar","Uint8Array","dictionaryLength","byteLength","position","initDictionary","getNext","array","byte","d","a","Math","floor","de","ef","fg","dg","max","console","warn","chunk1","pow","chunks","chunk2","hi","getByte","addToDictionary","c","getDictionaryReversed","n","rev","_i","oldCode","code","Error","concat","_val","oldVal","undefined","LZWDecoder","_BaseDecoder","_super","key","value","buffer"],"sourceRoot":""}