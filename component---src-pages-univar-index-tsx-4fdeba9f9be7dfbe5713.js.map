{"version":3,"file":"component---src-pages-univar-index-tsx-4fdeba9f9be7dfbe5713.js","mappings":"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","sources":["webpack://exmap/./node_modules/geotiff/dist-module/globals.js","webpack://exmap/./node_modules/@mui/system/esm/createBox.js","webpack://exmap/./node_modules/@mui/material/Box/Box.js","webpack://exmap/./node_modules/@mui/material/Divider/dividerClasses.js","webpack://exmap/./node_modules/@mui/material/ListItemIcon/listItemIconClasses.js","webpack://exmap/./node_modules/@mui/material/ListItemText/listItemTextClasses.js","webpack://exmap/./node_modules/@mui/material/MenuItem/menuItemClasses.js","webpack://exmap/./node_modules/@mui/material/MenuItem/MenuItem.js","webpack://exmap/./node_modules/@mui/material/Table/TableContext.js","webpack://exmap/./node_modules/@mui/material/Table/tableClasses.js","webpack://exmap/./node_modules/@mui/material/Table/Table.js","webpack://exmap/./node_modules/@mui/material/Table/Tablelvl2Context.js","webpack://exmap/./node_modules/@mui/material/TableBody/tableBodyClasses.js","webpack://exmap/./node_modules/@mui/material/TableBody/TableBody.js","webpack://exmap/./node_modules/@mui/material/TableRow/tableRowClasses.js","webpack://exmap/./node_modules/@mui/material/TableRow/TableRow.js","webpack://exmap/./node_modules/@mui/material/TableCell/tableCellClasses.js","webpack://exmap/./node_modules/@mui/material/TableCell/TableCell.js","webpack://exmap/./node_modules/geotiff/dist-module/rgb.js","webpack://exmap/./node_modules/geotiff/dist-module/compression/index.js","webpack://exmap/./node_modules/geotiff/dist-module/resample.js","webpack://exmap/./node_modules/geotiff/dist-module/geotiffimage.js","webpack://exmap/./node_modules/geotiff/dist-module/dataview64.js","webpack://exmap/./node_modules/geotiff/dist-module/dataslice.js","webpack://exmap/./node_modules/geotiff/dist-module/source/basesource.js","webpack://exmap/./node_modules/geotiff/dist-module/source/filereader.js","webpack://exmap/./node_modules/geotiff/dist-module/geotiff.js","webpack://exmap/./src/pages/univar/index.tsx"],"sourcesContent":["export var fieldTagNames = {\n  // TIFF Baseline\n  0x013B: 'Artist',\n  0x0102: 'BitsPerSample',\n  0x0109: 'CellLength',\n  0x0108: 'CellWidth',\n  0x0140: 'ColorMap',\n  0x0103: 'Compression',\n  0x8298: 'Copyright',\n  0x0132: 'DateTime',\n  0x0152: 'ExtraSamples',\n  0x010A: 'FillOrder',\n  0x0121: 'FreeByteCounts',\n  0x0120: 'FreeOffsets',\n  0x0123: 'GrayResponseCurve',\n  0x0122: 'GrayResponseUnit',\n  0x013C: 'HostComputer',\n  0x010E: 'ImageDescription',\n  0x0101: 'ImageLength',\n  0x0100: 'ImageWidth',\n  0x010F: 'Make',\n  0x0119: 'MaxSampleValue',\n  0x0118: 'MinSampleValue',\n  0x0110: 'Model',\n  0x00FE: 'NewSubfileType',\n  0x0112: 'Orientation',\n  0x0106: 'PhotometricInterpretation',\n  0x011C: 'PlanarConfiguration',\n  0x0128: 'ResolutionUnit',\n  0x0116: 'RowsPerStrip',\n  0x0115: 'SamplesPerPixel',\n  0x0131: 'Software',\n  0x0117: 'StripByteCounts',\n  0x0111: 'StripOffsets',\n  0x00FF: 'SubfileType',\n  0x0107: 'Threshholding',\n  0x011A: 'XResolution',\n  0x011B: 'YResolution',\n  // TIFF Extended\n  0x0146: 'BadFaxLines',\n  0x0147: 'CleanFaxData',\n  0x0157: 'ClipPath',\n  0x0148: 'ConsecutiveBadFaxLines',\n  0x01B1: 'Decode',\n  0x01B2: 'DefaultImageColor',\n  0x010D: 'DocumentName',\n  0x0150: 'DotRange',\n  0x0141: 'HalftoneHints',\n  0x015A: 'Indexed',\n  0x015B: 'JPEGTables',\n  0x011D: 'PageName',\n  0x0129: 'PageNumber',\n  0x013D: 'Predictor',\n  0x013F: 'PrimaryChromaticities',\n  0x0214: 'ReferenceBlackWhite',\n  0x0153: 'SampleFormat',\n  0x0154: 'SMinSampleValue',\n  0x0155: 'SMaxSampleValue',\n  0x022F: 'StripRowCounts',\n  0x014A: 'SubIFDs',\n  0x0124: 'T4Options',\n  0x0125: 'T6Options',\n  0x0145: 'TileByteCounts',\n  0x0143: 'TileLength',\n  0x0144: 'TileOffsets',\n  0x0142: 'TileWidth',\n  0x012D: 'TransferFunction',\n  0x013E: 'WhitePoint',\n  0x0158: 'XClipPathUnits',\n  0x011E: 'XPosition',\n  0x0211: 'YCbCrCoefficients',\n  0x0213: 'YCbCrPositioning',\n  0x0212: 'YCbCrSubSampling',\n  0x0159: 'YClipPathUnits',\n  0x011F: 'YPosition',\n  // EXIF\n  0x9202: 'ApertureValue',\n  0xA001: 'ColorSpace',\n  0x9004: 'DateTimeDigitized',\n  0x9003: 'DateTimeOriginal',\n  0x8769: 'Exif IFD',\n  0x9000: 'ExifVersion',\n  0x829A: 'ExposureTime',\n  0xA300: 'FileSource',\n  0x9209: 'Flash',\n  0xA000: 'FlashpixVersion',\n  0x829D: 'FNumber',\n  0xA420: 'ImageUniqueID',\n  0x9208: 'LightSource',\n  0x927C: 'MakerNote',\n  0x9201: 'ShutterSpeedValue',\n  0x9286: 'UserComment',\n  // IPTC\n  0x83BB: 'IPTC',\n  // ICC\n  0x8773: 'ICC Profile',\n  // XMP\n  0x02BC: 'XMP',\n  // GDAL\n  0xA480: 'GDAL_METADATA',\n  0xA481: 'GDAL_NODATA',\n  // Photoshop\n  0x8649: 'Photoshop',\n  // GeoTiff\n  0x830E: 'ModelPixelScale',\n  0x8482: 'ModelTiepoint',\n  0x85D8: 'ModelTransformation',\n  0x87AF: 'GeoKeyDirectory',\n  0x87B0: 'GeoDoubleParams',\n  0x87B1: 'GeoAsciiParams',\n  // LERC\n  0xC5F2: 'LercParameters'\n};\nexport var fieldTags = {};\n\nfor (var key in fieldTagNames) {\n  if (fieldTagNames.hasOwnProperty(key)) {\n    fieldTags[fieldTagNames[key]] = parseInt(key, 10);\n  }\n}\n\nexport var fieldTagTypes = {\n  256: 'SHORT',\n  257: 'SHORT',\n  258: 'SHORT',\n  259: 'SHORT',\n  262: 'SHORT',\n  273: 'LONG',\n  274: 'SHORT',\n  277: 'SHORT',\n  278: 'LONG',\n  279: 'LONG',\n  282: 'RATIONAL',\n  283: 'RATIONAL',\n  284: 'SHORT',\n  286: 'SHORT',\n  287: 'RATIONAL',\n  296: 'SHORT',\n  297: 'SHORT',\n  305: 'ASCII',\n  306: 'ASCII',\n  338: 'SHORT',\n  339: 'SHORT',\n  513: 'LONG',\n  514: 'LONG',\n  1024: 'SHORT',\n  1025: 'SHORT',\n  2048: 'SHORT',\n  2049: 'ASCII',\n  3072: 'SHORT',\n  3073: 'ASCII',\n  33550: 'DOUBLE',\n  33922: 'DOUBLE',\n  34665: 'LONG',\n  34735: 'SHORT',\n  34737: 'ASCII',\n  42113: 'ASCII'\n};\nexport var arrayFields = [fieldTags.BitsPerSample, fieldTags.ExtraSamples, fieldTags.SampleFormat, fieldTags.StripByteCounts, fieldTags.StripOffsets, fieldTags.StripRowCounts, fieldTags.TileByteCounts, fieldTags.TileOffsets, fieldTags.SubIFDs];\nexport var fieldTypeNames = {\n  0x0001: 'BYTE',\n  0x0002: 'ASCII',\n  0x0003: 'SHORT',\n  0x0004: 'LONG',\n  0x0005: 'RATIONAL',\n  0x0006: 'SBYTE',\n  0x0007: 'UNDEFINED',\n  0x0008: 'SSHORT',\n  0x0009: 'SLONG',\n  0x000A: 'SRATIONAL',\n  0x000B: 'FLOAT',\n  0x000C: 'DOUBLE',\n  // IFD offset, suggested by https://owl.phy.queensu.ca/~phil/exiftool/standards.html\n  0x000D: 'IFD',\n  // introduced by BigTIFF\n  0x0010: 'LONG8',\n  0x0011: 'SLONG8',\n  0x0012: 'IFD8'\n};\nexport var fieldTypes = {};\n\nfor (var _key in fieldTypeNames) {\n  if (fieldTypeNames.hasOwnProperty(_key)) {\n    fieldTypes[fieldTypeNames[_key]] = parseInt(_key, 10);\n  }\n}\n\nexport var photometricInterpretations = {\n  WhiteIsZero: 0,\n  BlackIsZero: 1,\n  RGB: 2,\n  Palette: 3,\n  TransparencyMask: 4,\n  CMYK: 5,\n  YCbCr: 6,\n  CIELab: 8,\n  ICCLab: 9\n};\nexport var ExtraSamplesValues = {\n  Unspecified: 0,\n  Assocalpha: 1,\n  Unassalpha: 2\n};\nexport var LercParameters = {\n  Version: 0,\n  AddCompression: 1\n};\nexport var LercAddCompression = {\n  None: 0,\n  Deflate: 1\n};\nexport var geoKeyNames = {\n  1024: 'GTModelTypeGeoKey',\n  1025: 'GTRasterTypeGeoKey',\n  1026: 'GTCitationGeoKey',\n  2048: 'GeographicTypeGeoKey',\n  2049: 'GeogCitationGeoKey',\n  2050: 'GeogGeodeticDatumGeoKey',\n  2051: 'GeogPrimeMeridianGeoKey',\n  2052: 'GeogLinearUnitsGeoKey',\n  2053: 'GeogLinearUnitSizeGeoKey',\n  2054: 'GeogAngularUnitsGeoKey',\n  2055: 'GeogAngularUnitSizeGeoKey',\n  2056: 'GeogEllipsoidGeoKey',\n  2057: 'GeogSemiMajorAxisGeoKey',\n  2058: 'GeogSemiMinorAxisGeoKey',\n  2059: 'GeogInvFlatteningGeoKey',\n  2060: 'GeogAzimuthUnitsGeoKey',\n  2061: 'GeogPrimeMeridianLongGeoKey',\n  2062: 'GeogTOWGS84GeoKey',\n  3072: 'ProjectedCSTypeGeoKey',\n  3073: 'PCSCitationGeoKey',\n  3074: 'ProjectionGeoKey',\n  3075: 'ProjCoordTransGeoKey',\n  3076: 'ProjLinearUnitsGeoKey',\n  3077: 'ProjLinearUnitSizeGeoKey',\n  3078: 'ProjStdParallel1GeoKey',\n  3079: 'ProjStdParallel2GeoKey',\n  3080: 'ProjNatOriginLongGeoKey',\n  3081: 'ProjNatOriginLatGeoKey',\n  3082: 'ProjFalseEastingGeoKey',\n  3083: 'ProjFalseNorthingGeoKey',\n  3084: 'ProjFalseOriginLongGeoKey',\n  3085: 'ProjFalseOriginLatGeoKey',\n  3086: 'ProjFalseOriginEastingGeoKey',\n  3087: 'ProjFalseOriginNorthingGeoKey',\n  3088: 'ProjCenterLongGeoKey',\n  3089: 'ProjCenterLatGeoKey',\n  3090: 'ProjCenterEastingGeoKey',\n  3091: 'ProjCenterNorthingGeoKey',\n  3092: 'ProjScaleAtNatOriginGeoKey',\n  3093: 'ProjScaleAtCenterGeoKey',\n  3094: 'ProjAzimuthAngleGeoKey',\n  3095: 'ProjStraightVertPoleLongGeoKey',\n  3096: 'ProjRectifiedGridAngleGeoKey',\n  4096: 'VerticalCSTypeGeoKey',\n  4097: 'VerticalCitationGeoKey',\n  4098: 'VerticalDatumGeoKey',\n  4099: 'VerticalUnitsGeoKey'\n};\nexport var geoKeys = {};\n\nfor (var _key2 in geoKeyNames) {\n  if (geoKeyNames.hasOwnProperty(_key2)) {\n    geoKeys[geoKeyNames[_key2]] = parseInt(_key2, 10);\n  }\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"component\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport styled from '@mui/styled-engine';\nimport styleFunctionSx, { extendSxProp } from './styleFunctionSx';\nimport useTheme from './useTheme';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function createBox() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var defaultTheme = options.defaultTheme,\n      _options$defaultClass = options.defaultClassName,\n      defaultClassName = _options$defaultClass === void 0 ? 'MuiBox-root' : _options$defaultClass,\n      generateClassName = options.generateClassName;\n  var BoxRoot = styled('div')(styleFunctionSx);\n  var Box = /*#__PURE__*/React.forwardRef(function Box(inProps, ref) {\n    var theme = useTheme(defaultTheme);\n\n    var _extendSxProp = extendSxProp(inProps),\n        className = _extendSxProp.className,\n        _extendSxProp$compone = _extendSxProp.component,\n        component = _extendSxProp$compone === void 0 ? 'div' : _extendSxProp$compone,\n        other = _objectWithoutPropertiesLoose(_extendSxProp, _excluded);\n\n    return /*#__PURE__*/_jsx(BoxRoot, _extends({\n      as: component,\n      ref: ref,\n      className: clsx(className, generateClassName ? generateClassName(defaultClassName) : defaultClassName),\n      theme: theme\n    }, other));\n  });\n  process.env.NODE_ENV !== \"production\" ? void 0 : void 0;\n  return Box;\n}","import { createBox } from '@mui/system';\nimport { unstable_ClassNameGenerator as ClassNameGenerator } from '../utils';\nimport { createTheme } from '../styles';\nvar defaultTheme = createTheme();\n/**\n * @ignore - do not document.\n */\n\nvar Box = createBox({\n  defaultTheme: defaultTheme,\n  defaultClassName: 'MuiBox-root',\n  generateClassName: ClassNameGenerator.generate\n});\nexport default Box;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getDividerUtilityClass(slot) {\n  return generateUtilityClass('MuiDivider', slot);\n}\nvar dividerClasses = generateUtilityClasses('MuiDivider', ['root', 'absolute', 'fullWidth', 'inset', 'middle', 'flexItem', 'light', 'vertical', 'withChildren', 'withChildrenVertical', 'textAlignRight', 'textAlignLeft', 'wrapper', 'wrapperVertical']);\nexport default dividerClasses;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getListItemIconUtilityClass(slot) {\n  return generateUtilityClass('MuiListItemIcon', slot);\n}\nvar listItemIconClasses = generateUtilityClasses('MuiListItemIcon', ['root', 'alignItemsFlexStart']);\nexport default listItemIconClasses;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getListItemTextUtilityClass(slot) {\n  return generateUtilityClass('MuiListItemText', slot);\n}\nvar listItemTextClasses = generateUtilityClasses('MuiListItemText', ['root', 'multiline', 'dense', 'inset', 'primary', 'secondary']);\nexport default listItemTextClasses;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getMenuItemUtilityClass(slot) {\n  return generateUtilityClass('MuiMenuItem', slot);\n}\nvar menuItemClasses = generateUtilityClasses('MuiMenuItem', ['root', 'focusVisible', 'dense', 'disabled', 'divider', 'gutters', 'selected']);\nexport default menuItemClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"autoFocus\", \"component\", \"dense\", \"divider\", \"disableGutters\", \"focusVisibleClassName\", \"role\", \"tabIndex\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport { alpha } from '@mui/system';\nimport styled, { rootShouldForwardProp } from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport ListContext from '../List/ListContext';\nimport ButtonBase from '../ButtonBase';\nimport useEnhancedEffect from '../utils/useEnhancedEffect';\nimport useForkRef from '../utils/useForkRef';\nimport { dividerClasses } from '../Divider';\nimport { listItemIconClasses } from '../ListItemIcon';\nimport { listItemTextClasses } from '../ListItemText';\nimport menuItemClasses, { getMenuItemUtilityClass } from './menuItemClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var overridesResolver = function overridesResolver(props, styles) {\n  var ownerState = props.ownerState;\n  return [styles.root, ownerState.dense && styles.dense, ownerState.divider && styles.divider, !ownerState.disableGutters && styles.gutters];\n};\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var disabled = ownerState.disabled,\n      dense = ownerState.dense,\n      divider = ownerState.divider,\n      disableGutters = ownerState.disableGutters,\n      selected = ownerState.selected,\n      classes = ownerState.classes;\n  var slots = {\n    root: ['root', dense && 'dense', disabled && 'disabled', !disableGutters && 'gutters', divider && 'divider', selected && 'selected']\n  };\n  var composedClasses = composeClasses(slots, getMenuItemUtilityClass, classes);\n  return _extends({}, classes, composedClasses);\n};\n\nvar MenuItemRoot = styled(ButtonBase, {\n  shouldForwardProp: function shouldForwardProp(prop) {\n    return rootShouldForwardProp(prop) || prop === 'classes';\n  },\n  name: 'MuiMenuItem',\n  slot: 'Root',\n  overridesResolver: overridesResolver\n})(function (_ref) {\n  var _extends2;\n\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({}, theme.typography.body1, {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    position: 'relative',\n    textDecoration: 'none',\n    minHeight: 48,\n    paddingTop: 6,\n    paddingBottom: 6,\n    boxSizing: 'border-box',\n    whiteSpace: 'nowrap'\n  }, !ownerState.disableGutters && {\n    paddingLeft: 16,\n    paddingRight: 16\n  }, ownerState.divider && {\n    borderBottom: \"1px solid \".concat(theme.palette.divider),\n    backgroundClip: 'padding-box'\n  }, (_extends2 = {\n    '&:hover': {\n      textDecoration: 'none',\n      backgroundColor: theme.palette.action.hover,\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    }\n  }, _defineProperty(_extends2, \"&.\".concat(menuItemClasses.selected), _defineProperty({\n    backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity)\n  }, \"&.\".concat(menuItemClasses.focusVisible), {\n    backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity + theme.palette.action.focusOpacity)\n  })), _defineProperty(_extends2, \"&.\".concat(menuItemClasses.selected, \":hover\"), {\n    backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity + theme.palette.action.hoverOpacity),\n    // Reset on touch devices, it doesn't add specificity\n    '@media (hover: none)': {\n      backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity)\n    }\n  }), _defineProperty(_extends2, \"&.\".concat(menuItemClasses.focusVisible), {\n    backgroundColor: theme.palette.action.focus\n  }), _defineProperty(_extends2, \"&.\".concat(menuItemClasses.disabled), {\n    opacity: theme.palette.action.disabledOpacity\n  }), _defineProperty(_extends2, \"& + .\".concat(dividerClasses.root), {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  }), _defineProperty(_extends2, \"& + .\".concat(dividerClasses.inset), {\n    marginLeft: 52\n  }), _defineProperty(_extends2, \"& .\".concat(listItemTextClasses.root), {\n    marginTop: 0,\n    marginBottom: 0\n  }), _defineProperty(_extends2, \"& .\".concat(listItemTextClasses.inset), {\n    paddingLeft: 36\n  }), _defineProperty(_extends2, \"& .\".concat(listItemIconClasses.root), {\n    minWidth: 36\n  }), _extends2), !ownerState.dense && _defineProperty({}, theme.breakpoints.up('sm'), {\n    minHeight: 'auto'\n  }), ownerState.dense && _extends({\n    minHeight: 32,\n    // https://material.io/components/menus#specs > Dense\n    paddingTop: 4,\n    paddingBottom: 4\n  }, theme.typography.body2, _defineProperty({}, \"& .\".concat(listItemIconClasses.root, \" svg\"), {\n    fontSize: '1.25rem'\n  })));\n});\nvar MenuItem = /*#__PURE__*/React.forwardRef(function MenuItem(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiMenuItem'\n  });\n\n  var _props$autoFocus = props.autoFocus,\n      autoFocus = _props$autoFocus === void 0 ? false : _props$autoFocus,\n      _props$component = props.component,\n      component = _props$component === void 0 ? 'li' : _props$component,\n      _props$dense = props.dense,\n      dense = _props$dense === void 0 ? false : _props$dense,\n      _props$divider = props.divider,\n      divider = _props$divider === void 0 ? false : _props$divider,\n      _props$disableGutters = props.disableGutters,\n      disableGutters = _props$disableGutters === void 0 ? false : _props$disableGutters,\n      focusVisibleClassName = props.focusVisibleClassName,\n      _props$role = props.role,\n      role = _props$role === void 0 ? 'menuitem' : _props$role,\n      tabIndexProp = props.tabIndex,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var context = React.useContext(ListContext);\n  var childContext = {\n    dense: dense || context.dense || false,\n    disableGutters: disableGutters\n  };\n  var menuItemRef = React.useRef(null);\n  useEnhancedEffect(function () {\n    if (autoFocus) {\n      if (menuItemRef.current) {\n        menuItemRef.current.focus();\n      } else if (process.env.NODE_ENV !== 'production') {\n        console.error('MUI: Unable to set focus to a MenuItem whose component has not been rendered.');\n      }\n    }\n  }, [autoFocus]);\n\n  var ownerState = _extends({}, props, {\n    dense: childContext.dense,\n    divider: divider,\n    disableGutters: disableGutters\n  });\n\n  var classes = useUtilityClasses(props);\n  var handleRef = useForkRef(menuItemRef, ref);\n  var tabIndex;\n\n  if (!props.disabled) {\n    tabIndex = tabIndexProp !== undefined ? tabIndexProp : -1;\n  }\n\n  return /*#__PURE__*/_jsx(ListContext.Provider, {\n    value: childContext,\n    children: /*#__PURE__*/_jsx(MenuItemRoot, _extends({\n      ref: handleRef,\n      role: role,\n      tabIndex: tabIndex,\n      component: component,\n      focusVisibleClassName: clsx(classes.focusVisible, focusVisibleClassName)\n    }, other, {\n      ownerState: ownerState,\n      classes: classes\n    }))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default MenuItem;","import * as React from 'react';\n/**\n * @ignore - internal component.\n */\n\nvar TableContext = /*#__PURE__*/React.createContext();\n\nif (process.env.NODE_ENV !== 'production') {\n  TableContext.displayName = 'TableContext';\n}\n\nexport default TableContext;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getTableUtilityClass(slot) {\n  return generateUtilityClass('MuiTable', slot);\n}\nvar tableClasses = generateUtilityClasses('MuiTable', ['root', 'stickyHeader']);\nexport default tableClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"className\", \"component\", \"padding\", \"size\", \"stickyHeader\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport TableContext from './TableContext';\nimport useThemeProps from '../styles/useThemeProps';\nimport styled from '../styles/styled';\nimport { getTableUtilityClass } from './tableClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      stickyHeader = ownerState.stickyHeader;\n  var slots = {\n    root: ['root', stickyHeader && 'stickyHeader']\n  };\n  return composeClasses(slots, getTableUtilityClass, classes);\n};\n\nvar TableRoot = styled('table', {\n  name: 'MuiTable',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, ownerState.stickyHeader && styles.stickyHeader];\n  }\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    display: 'table',\n    width: '100%',\n    borderCollapse: 'collapse',\n    borderSpacing: 0,\n    '& caption': _extends({}, theme.typography.body2, {\n      padding: theme.spacing(2),\n      color: theme.palette.text.secondary,\n      textAlign: 'left',\n      captionSide: 'bottom'\n    })\n  }, ownerState.stickyHeader && {\n    borderCollapse: 'separate'\n  });\n});\nvar defaultComponent = 'table';\nvar Table = /*#__PURE__*/React.forwardRef(function Table(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiTable'\n  });\n\n  var className = props.className,\n      _props$component = props.component,\n      component = _props$component === void 0 ? defaultComponent : _props$component,\n      _props$padding = props.padding,\n      padding = _props$padding === void 0 ? 'normal' : _props$padding,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      _props$stickyHeader = props.stickyHeader,\n      stickyHeader = _props$stickyHeader === void 0 ? false : _props$stickyHeader,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    component: component,\n    padding: padding,\n    size: size,\n    stickyHeader: stickyHeader\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  var table = React.useMemo(function () {\n    return {\n      padding: padding,\n      size: size,\n      stickyHeader: stickyHeader\n    };\n  }, [padding, size, stickyHeader]);\n  return /*#__PURE__*/_jsx(TableContext.Provider, {\n    value: table,\n    children: /*#__PURE__*/_jsx(TableRoot, _extends({\n      as: component,\n      role: component === defaultComponent ? null : 'table',\n      ref: ref,\n      className: clsx(classes.root, className),\n      ownerState: ownerState\n    }, other))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default Table;","import * as React from 'react';\n/**\n * @ignore - internal component.\n */\n\nvar Tablelvl2Context = /*#__PURE__*/React.createContext();\n\nif (process.env.NODE_ENV !== 'production') {\n  Tablelvl2Context.displayName = 'Tablelvl2Context';\n}\n\nexport default Tablelvl2Context;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getTableBodyUtilityClass(slot) {\n  return generateUtilityClass('MuiTableBody', slot);\n}\nvar tableBodyClasses = generateUtilityClasses('MuiTableBody', ['root']);\nexport default tableBodyClasses;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"component\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport Tablelvl2Context from '../Table/Tablelvl2Context';\nimport useThemeProps from '../styles/useThemeProps';\nimport styled from '../styles/styled';\nimport { getTableBodyUtilityClass } from './tableBodyClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes;\n  var slots = {\n    root: ['root']\n  };\n  return composeClasses(slots, getTableBodyUtilityClass, classes);\n};\n\nvar TableBodyRoot = styled('tbody', {\n  name: 'MuiTableBody',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    return styles.root;\n  }\n})({\n  display: 'table-row-group'\n});\nvar tablelvl2 = {\n  variant: 'body'\n};\nvar defaultComponent = 'tbody';\nvar TableBody = /*#__PURE__*/React.forwardRef(function TableBody(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiTableBody'\n  });\n\n  var className = props.className,\n      _props$component = props.component,\n      component = _props$component === void 0 ? defaultComponent : _props$component,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    component: component\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(Tablelvl2Context.Provider, {\n    value: tablelvl2,\n    children: /*#__PURE__*/_jsx(TableBodyRoot, _extends({\n      className: clsx(classes.root, className),\n      as: component,\n      ref: ref,\n      role: component === defaultComponent ? null : 'rowgroup',\n      ownerState: ownerState\n    }, other))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default TableBody;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getTableRowUtilityClass(slot) {\n  return generateUtilityClass('MuiTableRow', slot);\n}\nvar tableRowClasses = generateUtilityClasses('MuiTableRow', ['root', 'selected', 'hover', 'head', 'footer']);\nexport default tableRowClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"component\", \"hover\", \"selected\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport { alpha } from '@mui/system';\nimport Tablelvl2Context from '../Table/Tablelvl2Context';\nimport useThemeProps from '../styles/useThemeProps';\nimport styled from '../styles/styled';\nimport tableRowClasses, { getTableRowUtilityClass } from './tableRowClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      selected = ownerState.selected,\n      hover = ownerState.hover,\n      head = ownerState.head,\n      footer = ownerState.footer;\n  var slots = {\n    root: ['root', selected && 'selected', hover && 'hover', head && 'head', footer && 'footer']\n  };\n  return composeClasses(slots, getTableRowUtilityClass, classes);\n};\n\nvar TableRowRoot = styled('tr', {\n  name: 'MuiTableRow',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, ownerState.head && styles.head, ownerState.footer && styles.footer];\n  }\n})(function (_ref) {\n  var _ref2;\n\n  var theme = _ref.theme;\n  return _ref2 = {\n    color: 'inherit',\n    display: 'table-row',\n    verticalAlign: 'middle',\n    // We disable the focus ring for mouse, touch and keyboard users.\n    outline: 0\n  }, _defineProperty(_ref2, \"&.\".concat(tableRowClasses.hover, \":hover\"), {\n    backgroundColor: theme.palette.action.hover\n  }), _defineProperty(_ref2, \"&.\".concat(tableRowClasses.selected), {\n    backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity),\n    '&:hover': {\n      backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity + theme.palette.action.hoverOpacity)\n    }\n  }), _ref2;\n});\nvar defaultComponent = 'tr';\n/**\n * Will automatically set dynamic row height\n * based on the material table element parent (head, body, etc).\n */\n\nvar TableRow = /*#__PURE__*/React.forwardRef(function TableRow(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiTableRow'\n  });\n\n  var className = props.className,\n      _props$component = props.component,\n      component = _props$component === void 0 ? defaultComponent : _props$component,\n      _props$hover = props.hover,\n      hover = _props$hover === void 0 ? false : _props$hover,\n      _props$selected = props.selected,\n      selected = _props$selected === void 0 ? false : _props$selected,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var tablelvl2 = React.useContext(Tablelvl2Context);\n\n  var ownerState = _extends({}, props, {\n    component: component,\n    hover: hover,\n    selected: selected,\n    head: tablelvl2 && tablelvl2.variant === 'head',\n    footer: tablelvl2 && tablelvl2.variant === 'footer'\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(TableRowRoot, _extends({\n    as: component,\n    ref: ref,\n    className: clsx(classes.root, className),\n    role: component === defaultComponent ? null : 'row',\n    ownerState: ownerState\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default TableRow;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getTableCellUtilityClass(slot) {\n  return generateUtilityClass('MuiTableCell', slot);\n}\nvar tableCellClasses = generateUtilityClasses('MuiTableCell', ['root', 'head', 'body', 'footer', 'sizeSmall', 'sizeMedium', 'paddingCheckbox', 'paddingNone', 'alignLeft', 'alignCenter', 'alignRight', 'alignJustify', 'stickyHeader']);\nexport default tableCellClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"align\", \"className\", \"component\", \"padding\", \"scope\", \"size\", \"sortDirection\", \"variant\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport { darken, alpha, lighten } from '@mui/system';\nimport capitalize from '../utils/capitalize';\nimport TableContext from '../Table/TableContext';\nimport Tablelvl2Context from '../Table/Tablelvl2Context';\nimport useThemeProps from '../styles/useThemeProps';\nimport styled from '../styles/styled';\nimport tableCellClasses, { getTableCellUtilityClass } from './tableCellClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      variant = ownerState.variant,\n      align = ownerState.align,\n      padding = ownerState.padding,\n      size = ownerState.size,\n      stickyHeader = ownerState.stickyHeader;\n  var slots = {\n    root: ['root', variant, stickyHeader && 'stickyHeader', align !== 'inherit' && \"align\".concat(capitalize(align)), padding !== 'normal' && \"padding\".concat(capitalize(padding)), \"size\".concat(capitalize(size))]\n  };\n  return composeClasses(slots, getTableCellUtilityClass, classes);\n};\n\nvar TableCellRoot = styled('td', {\n  name: 'MuiTableCell',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, styles[ownerState.variant], styles[\"size\".concat(capitalize(ownerState.size))], ownerState.padding !== 'normal' && styles[\"padding\".concat(capitalize(ownerState.padding))], ownerState.align !== 'inherit' && styles[\"align\".concat(capitalize(ownerState.align))], ownerState.stickyHeader && styles.stickyHeader];\n  }\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({}, theme.typography.body2, {\n    display: 'table-cell',\n    verticalAlign: 'inherit',\n    // Workaround for a rendering bug with spanned columns in Chrome 62.0.\n    // Removes the alpha (sets it to 1), and lightens or darkens the theme color.\n    borderBottom: \"1px solid\\n    \".concat(theme.palette.mode === 'light' ? lighten(alpha(theme.palette.divider, 1), 0.88) : darken(alpha(theme.palette.divider, 1), 0.68)),\n    textAlign: 'left',\n    padding: 16\n  }, ownerState.variant === 'head' && {\n    color: theme.palette.text.primary,\n    lineHeight: theme.typography.pxToRem(24),\n    fontWeight: theme.typography.fontWeightMedium\n  }, ownerState.variant === 'body' && {\n    color: theme.palette.text.primary\n  }, ownerState.variant === 'footer' && {\n    color: theme.palette.text.secondary,\n    lineHeight: theme.typography.pxToRem(21),\n    fontSize: theme.typography.pxToRem(12)\n  }, ownerState.size === 'small' && _defineProperty({\n    padding: '6px 16px'\n  }, \"&.\".concat(tableCellClasses.paddingCheckbox), {\n    width: 24,\n    // prevent the checkbox column from growing\n    padding: '0 12px 0 16px',\n    '& > *': {\n      padding: 0\n    }\n  }), ownerState.padding === 'checkbox' && {\n    width: 48,\n    // prevent the checkbox column from growing\n    padding: '0 0 0 4px'\n  }, ownerState.padding === 'none' && {\n    padding: 0\n  }, ownerState.align === 'left' && {\n    textAlign: 'left'\n  }, ownerState.align === 'center' && {\n    textAlign: 'center'\n  }, ownerState.align === 'right' && {\n    textAlign: 'right',\n    flexDirection: 'row-reverse'\n  }, ownerState.align === 'justify' && {\n    textAlign: 'justify'\n  }, ownerState.stickyHeader && {\n    position: 'sticky',\n    top: 0,\n    zIndex: 2,\n    backgroundColor: theme.palette.background.default\n  });\n});\n/**\n * The component renders a `<th>` element when the parent context is a header\n * or otherwise a `<td>` element.\n */\n\nvar TableCell = /*#__PURE__*/React.forwardRef(function TableCell(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiTableCell'\n  });\n\n  var _props$align = props.align,\n      align = _props$align === void 0 ? 'inherit' : _props$align,\n      className = props.className,\n      componentProp = props.component,\n      paddingProp = props.padding,\n      scopeProp = props.scope,\n      sizeProp = props.size,\n      sortDirection = props.sortDirection,\n      variantProp = props.variant,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var table = React.useContext(TableContext);\n  var tablelvl2 = React.useContext(Tablelvl2Context);\n  var isHeadCell = tablelvl2 && tablelvl2.variant === 'head';\n  var component;\n\n  if (componentProp) {\n    component = componentProp;\n  } else {\n    component = isHeadCell ? 'th' : 'td';\n  }\n\n  var scope = scopeProp;\n\n  if (!scope && isHeadCell) {\n    scope = 'col';\n  }\n\n  var variant = variantProp || tablelvl2 && tablelvl2.variant;\n\n  var ownerState = _extends({}, props, {\n    align: align,\n    component: component,\n    padding: paddingProp || (table && table.padding ? table.padding : 'normal'),\n    size: sizeProp || (table && table.size ? table.size : 'medium'),\n    sortDirection: sortDirection,\n    stickyHeader: variant === 'head' && table && table.stickyHeader,\n    variant: variant\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  var ariaSort = null;\n\n  if (sortDirection) {\n    ariaSort = sortDirection === 'asc' ? 'ascending' : 'descending';\n  }\n\n  return /*#__PURE__*/_jsx(TableCellRoot, _extends({\n    as: component,\n    ref: ref,\n    className: clsx(classes.root, className),\n    \"aria-sort\": ariaSort,\n    scope: scope,\n    ownerState: ownerState\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default TableCell;","export function fromWhiteIsZero(raster, max) {\n  var width = raster.width,\n      height = raster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n  var value;\n\n  for (var i = 0, j = 0; i < raster.length; ++i, j += 3) {\n    value = 256 - raster[i] / max * 256;\n    rgbRaster[j] = value;\n    rgbRaster[j + 1] = value;\n    rgbRaster[j + 2] = value;\n  }\n\n  return rgbRaster;\n}\nexport function fromBlackIsZero(raster, max) {\n  var width = raster.width,\n      height = raster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n  var value;\n\n  for (var i = 0, j = 0; i < raster.length; ++i, j += 3) {\n    value = raster[i] / max * 256;\n    rgbRaster[j] = value;\n    rgbRaster[j + 1] = value;\n    rgbRaster[j + 2] = value;\n  }\n\n  return rgbRaster;\n}\nexport function fromPalette(raster, colorMap) {\n  var width = raster.width,\n      height = raster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n  var greenOffset = colorMap.length / 3;\n  var blueOffset = colorMap.length / 3 * 2;\n\n  for (var i = 0, j = 0; i < raster.length; ++i, j += 3) {\n    var mapIndex = raster[i];\n    rgbRaster[j] = colorMap[mapIndex] / 65536 * 256;\n    rgbRaster[j + 1] = colorMap[mapIndex + greenOffset] / 65536 * 256;\n    rgbRaster[j + 2] = colorMap[mapIndex + blueOffset] / 65536 * 256;\n  }\n\n  return rgbRaster;\n}\nexport function fromCMYK(cmykRaster) {\n  var width = cmykRaster.width,\n      height = cmykRaster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n\n  for (var i = 0, j = 0; i < cmykRaster.length; i += 4, j += 3) {\n    var c = cmykRaster[i];\n    var m = cmykRaster[i + 1];\n    var y = cmykRaster[i + 2];\n    var k = cmykRaster[i + 3];\n    rgbRaster[j] = 255 * ((255 - c) / 256) * ((255 - k) / 256);\n    rgbRaster[j + 1] = 255 * ((255 - m) / 256) * ((255 - k) / 256);\n    rgbRaster[j + 2] = 255 * ((255 - y) / 256) * ((255 - k) / 256);\n  }\n\n  return rgbRaster;\n}\nexport function fromYCbCr(yCbCrRaster) {\n  var width = yCbCrRaster.width,\n      height = yCbCrRaster.height;\n  var rgbRaster = new Uint8ClampedArray(width * height * 3);\n\n  for (var i = 0, j = 0; i < yCbCrRaster.length; i += 3, j += 3) {\n    var y = yCbCrRaster[i];\n    var cb = yCbCrRaster[i + 1];\n    var cr = yCbCrRaster[i + 2];\n    rgbRaster[j] = y + 1.40200 * (cr - 0x80);\n    rgbRaster[j + 1] = y - 0.34414 * (cb - 0x80) - 0.71414 * (cr - 0x80);\n    rgbRaster[j + 2] = y + 1.77200 * (cb - 0x80);\n  }\n\n  return rgbRaster;\n}\nvar Xn = 0.95047;\nvar Yn = 1.00000;\nvar Zn = 1.08883; // from https://github.com/antimatter15/rgb-lab/blob/master/color.js\n\nexport function fromCIELab(cieLabRaster) {\n  var width = cieLabRaster.width,\n      height = cieLabRaster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n\n  for (var i = 0, j = 0; i < cieLabRaster.length; i += 3, j += 3) {\n    var L = cieLabRaster[i + 0];\n    var a_ = cieLabRaster[i + 1] << 24 >> 24; // conversion from uint8 to int8\n\n    var b_ = cieLabRaster[i + 2] << 24 >> 24; // same\n\n    var y = (L + 16) / 116;\n    var x = a_ / 500 + y;\n    var z = y - b_ / 200;\n    var r = void 0;\n    var g = void 0;\n    var b = void 0;\n    x = Xn * (x * x * x > 0.008856 ? x * x * x : (x - 16 / 116) / 7.787);\n    y = Yn * (y * y * y > 0.008856 ? y * y * y : (y - 16 / 116) / 7.787);\n    z = Zn * (z * z * z > 0.008856 ? z * z * z : (z - 16 / 116) / 7.787);\n    r = x * 3.2406 + y * -1.5372 + z * -0.4986;\n    g = x * -0.9689 + y * 1.8758 + z * 0.0415;\n    b = x * 0.0557 + y * -0.2040 + z * 1.0570;\n    r = r > 0.0031308 ? 1.055 * Math.pow(r, 1 / 2.4) - 0.055 : 12.92 * r;\n    g = g > 0.0031308 ? 1.055 * Math.pow(g, 1 / 2.4) - 0.055 : 12.92 * g;\n    b = b > 0.0031308 ? 1.055 * Math.pow(b, 1 / 2.4) - 0.055 : 12.92 * b;\n    rgbRaster[j] = Math.max(0, Math.min(1, r)) * 255;\n    rgbRaster[j + 1] = Math.max(0, Math.min(1, g)) * 255;\n    rgbRaster[j + 2] = Math.max(0, Math.min(1, b)) * 255;\n  }\n\n  return rgbRaster;\n}","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\nvar registry = new Map();\nexport function addDecoder(cases, importFn) {\n  if (!Array.isArray(cases)) {\n    cases = [cases]; // eslint-disable-line no-param-reassign\n  }\n\n  cases.forEach(function (c) {\n    return registry.set(c, importFn);\n  });\n}\nexport function getDecoder(_x) {\n  return _getDecoder.apply(this, arguments);\n} // Add default decoders to registry (end-user may override with other implementations)\n\nfunction _getDecoder() {\n  _getDecoder = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fileDirectory) {\n    var importFn, Decoder;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            importFn = registry.get(fileDirectory.Compression);\n\n            if (importFn) {\n              _context.next = 3;\n              break;\n            }\n\n            throw new Error(\"Unknown compression method identifier: \".concat(fileDirectory.Compression));\n\n          case 3:\n            _context.next = 5;\n            return importFn();\n\n          case 5:\n            Decoder = _context.sent;\n            return _context.abrupt(\"return\", new Decoder(fileDirectory));\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getDecoder.apply(this, arguments);\n}\n\naddDecoder([undefined, 1], function () {\n  return import('./raw.js').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(5, function () {\n  return import('./lzw.js').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(6, function () {\n  throw new Error('old style JPEG compression is not supported.');\n});\naddDecoder(7, function () {\n  return import('./jpeg.js').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder([8, 32946], function () {\n  return import('./deflate.js').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(32773, function () {\n  return import('./packbits.js').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(34887, function () {\n  return import('./lerc.js').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(50001, function () {\n  return import('./webimage.js').then(function (m) {\n    return m.default;\n  });\n});","/**\n * @module resample\n */\nfunction copyNewSize(array, width, height) {\n  var samplesPerPixel = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  return new (Object.getPrototypeOf(array).constructor)(width * height * samplesPerPixel);\n}\n/**\n * Resample the input arrays using nearest neighbor value selection.\n * @param {TypedArray[]} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @returns {TypedArray[]} The resampled rasters\n */\n\n\nexport function resampleNearest(valueArrays, inWidth, inHeight, outWidth, outHeight) {\n  var relX = inWidth / outWidth;\n  var relY = inHeight / outHeight;\n  return valueArrays.map(function (array) {\n    var newArray = copyNewSize(array, outWidth, outHeight);\n\n    for (var y = 0; y < outHeight; ++y) {\n      var cy = Math.min(Math.round(relY * y), inHeight - 1);\n\n      for (var x = 0; x < outWidth; ++x) {\n        var cx = Math.min(Math.round(relX * x), inWidth - 1);\n        var value = array[cy * inWidth + cx];\n        newArray[y * outWidth + x] = value;\n      }\n    }\n\n    return newArray;\n  });\n} // simple linear interpolation, code from:\n// https://en.wikipedia.org/wiki/Linear_interpolation#Programming_language_support\n\nfunction lerp(v0, v1, t) {\n  return (1 - t) * v0 + t * v1;\n}\n/**\n * Resample the input arrays using bilinear interpolation.\n * @param {TypedArray[]} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @returns {TypedArray[]} The resampled rasters\n */\n\n\nexport function resampleBilinear(valueArrays, inWidth, inHeight, outWidth, outHeight) {\n  var relX = inWidth / outWidth;\n  var relY = inHeight / outHeight;\n  return valueArrays.map(function (array) {\n    var newArray = copyNewSize(array, outWidth, outHeight);\n\n    for (var y = 0; y < outHeight; ++y) {\n      var rawY = relY * y;\n      var yl = Math.floor(rawY);\n      var yh = Math.min(Math.ceil(rawY), inHeight - 1);\n\n      for (var x = 0; x < outWidth; ++x) {\n        var rawX = relX * x;\n        var tx = rawX % 1;\n        var xl = Math.floor(rawX);\n        var xh = Math.min(Math.ceil(rawX), inWidth - 1);\n        var ll = array[yl * inWidth + xl];\n        var hl = array[yl * inWidth + xh];\n        var lh = array[yh * inWidth + xl];\n        var hh = array[yh * inWidth + xh];\n        var value = lerp(lerp(ll, hl, tx), lerp(lh, hh, tx), rawY % 1);\n        newArray[y * outWidth + x] = value;\n      }\n    }\n\n    return newArray;\n  });\n}\n/**\n * Resample the input arrays using the selected resampling method.\n * @param {TypedArray[]} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {string} [method = 'nearest'] The desired resampling method\n * @returns {TypedArray[]} The resampled rasters\n */\n\nexport function resample(valueArrays, inWidth, inHeight, outWidth, outHeight) {\n  var method = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 'nearest';\n\n  switch (method.toLowerCase()) {\n    case 'nearest':\n      return resampleNearest(valueArrays, inWidth, inHeight, outWidth, outHeight);\n\n    case 'bilinear':\n    case 'linear':\n      return resampleBilinear(valueArrays, inWidth, inHeight, outWidth, outHeight);\n\n    default:\n      throw new Error(\"Unsupported resampling method: '\".concat(method, \"'\"));\n  }\n}\n/**\n * Resample the pixel interleaved input array using nearest neighbor value selection.\n * @param {TypedArray} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {number} samples The number of samples per pixel for pixel\n *                         interleaved data\n * @returns {TypedArray} The resampled raster\n */\n\nexport function resampleNearestInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples) {\n  var relX = inWidth / outWidth;\n  var relY = inHeight / outHeight;\n  var newArray = copyNewSize(valueArray, outWidth, outHeight, samples);\n\n  for (var y = 0; y < outHeight; ++y) {\n    var cy = Math.min(Math.round(relY * y), inHeight - 1);\n\n    for (var x = 0; x < outWidth; ++x) {\n      var cx = Math.min(Math.round(relX * x), inWidth - 1);\n\n      for (var i = 0; i < samples; ++i) {\n        var value = valueArray[cy * inWidth * samples + cx * samples + i];\n        newArray[y * outWidth * samples + x * samples + i] = value;\n      }\n    }\n  }\n\n  return newArray;\n}\n/**\n * Resample the pixel interleaved input array using bilinear interpolation.\n * @param {TypedArray} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {number} samples The number of samples per pixel for pixel\n *                         interleaved data\n * @returns {TypedArray} The resampled raster\n */\n\nexport function resampleBilinearInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples) {\n  var relX = inWidth / outWidth;\n  var relY = inHeight / outHeight;\n  var newArray = copyNewSize(valueArray, outWidth, outHeight, samples);\n\n  for (var y = 0; y < outHeight; ++y) {\n    var rawY = relY * y;\n    var yl = Math.floor(rawY);\n    var yh = Math.min(Math.ceil(rawY), inHeight - 1);\n\n    for (var x = 0; x < outWidth; ++x) {\n      var rawX = relX * x;\n      var tx = rawX % 1;\n      var xl = Math.floor(rawX);\n      var xh = Math.min(Math.ceil(rawX), inWidth - 1);\n\n      for (var i = 0; i < samples; ++i) {\n        var ll = valueArray[yl * inWidth * samples + xl * samples + i];\n        var hl = valueArray[yl * inWidth * samples + xh * samples + i];\n        var lh = valueArray[yh * inWidth * samples + xl * samples + i];\n        var hh = valueArray[yh * inWidth * samples + xh * samples + i];\n        var value = lerp(lerp(ll, hl, tx), lerp(lh, hh, tx), rawY % 1);\n        newArray[y * outWidth * samples + x * samples + i] = value;\n      }\n    }\n  }\n\n  return newArray;\n}\n/**\n * Resample the pixel interleaved input array using the selected resampling method.\n * @param {TypedArray} valueArray The input array to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {number} samples The number of samples per pixel for pixel\n *                                 interleaved data\n * @param {string} [method = 'nearest'] The desired resampling method\n * @returns {TypedArray} The resampled rasters\n */\n\nexport function resampleInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples) {\n  var method = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 'nearest';\n\n  switch (method.toLowerCase()) {\n    case 'nearest':\n      return resampleNearestInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples);\n\n    case 'bilinear':\n    case 'linear':\n      return resampleBilinearInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples);\n\n    default:\n      throw new Error(\"Unsupported resampling method: '\".concat(method, \"'\"));\n  }\n}","import _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\n/** @module geotiffimage */\nimport { getFloat16 } from '@petamoriken/float16';\nimport getAttribute from 'xml-utils/get-attribute.js';\nimport findTagsByName from 'xml-utils/find-tags-by-name.js';\nimport { photometricInterpretations, ExtraSamplesValues } from './globals.js';\nimport { fromWhiteIsZero, fromBlackIsZero, fromPalette, fromCMYK, fromYCbCr, fromCIELab } from './rgb.js';\nimport { getDecoder } from './compression/index.js';\nimport { resample, resampleInterleaved } from './resample.js';\n/**\n * @typedef {Object} ReadRasterOptions\n * @property {Array<number>} [window=whole window] the subset to read data from in pixels.\n * @property {Array<number>} [bbox=whole image] the subset to read data from in\n *                                           geographical coordinates.\n * @property {Array<number>} [samples=all samples] the selection of samples to read from. Default is all samples.\n * @property {boolean} [interleave=false] whether the data shall be read\n *                                             in one single array or separate\n *                                             arrays.\n * @property {Pool} [pool=null] The optional decoder pool to use.\n * @property {number} [width] The desired width of the output. When the width is not the\n *                                 same as the images, resampling will be performed.\n * @property {number} [height] The desired height of the output. When the width is not the\n *                                  same as the images, resampling will be performed.\n * @property {string} [resampleMethod='nearest'] The desired resampling method.\n * @property {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                                       to be aborted\n * @property {number|number[]} [fillValue] The value to use for parts of the image\n *                                              outside of the images extent. When multiple\n *                                              samples are requested, an array of fill values\n *                                              can be passed.\n */\n\n/** @typedef {import(\"./geotiff.js\").TypedArray} TypedArray */\n\n/** @typedef {import(\"./geotiff.js\").ReadRasterResult} ReadRasterResult */\n\nfunction sum(array, start, end) {\n  var s = 0;\n\n  for (var i = start; i < end; ++i) {\n    s += array[i];\n  }\n\n  return s;\n}\n\nfunction arrayForType(format, bitsPerSample, size) {\n  switch (format) {\n    case 1:\n      // unsigned integer data\n      if (bitsPerSample <= 8) {\n        return new Uint8Array(size);\n      } else if (bitsPerSample <= 16) {\n        return new Uint16Array(size);\n      } else if (bitsPerSample <= 32) {\n        return new Uint32Array(size);\n      }\n\n      break;\n\n    case 2:\n      // twos complement signed integer data\n      if (bitsPerSample === 8) {\n        return new Int8Array(size);\n      } else if (bitsPerSample === 16) {\n        return new Int16Array(size);\n      } else if (bitsPerSample === 32) {\n        return new Int32Array(size);\n      }\n\n      break;\n\n    case 3:\n      // floating point data\n      switch (bitsPerSample) {\n        case 16:\n        case 32:\n          return new Float32Array(size);\n\n        case 64:\n          return new Float64Array(size);\n\n        default:\n          break;\n      }\n\n      break;\n\n    default:\n      break;\n  }\n\n  throw Error('Unsupported data format/bitsPerSample');\n}\n\nfunction needsNormalization(format, bitsPerSample) {\n  if ((format === 1 || format === 2) && bitsPerSample <= 32 && bitsPerSample % 8 === 0) {\n    return false;\n  } else if (format === 3 && (bitsPerSample === 16 || bitsPerSample === 32 || bitsPerSample === 64)) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction normalizeArray(inBuffer, format, planarConfiguration, samplesPerPixel, bitsPerSample, tileWidth, tileHeight) {\n  // const inByteArray = new Uint8Array(inBuffer);\n  var view = new DataView(inBuffer);\n  var outSize = planarConfiguration === 2 ? tileHeight * tileWidth : tileHeight * tileWidth * samplesPerPixel;\n  var samplesToTransfer = planarConfiguration === 2 ? 1 : samplesPerPixel;\n  var outArray = arrayForType(format, bitsPerSample, outSize); // let pixel = 0;\n\n  var bitMask = parseInt('1'.repeat(bitsPerSample), 2);\n\n  if (format === 1) {\n    // unsigned integer\n    // translation of https://github.com/OSGeo/gdal/blob/master/gdal/frmts/gtiff/geotiff.cpp#L7337\n    var pixelBitSkip; // let sampleBitOffset = 0;\n\n    if (planarConfiguration === 1) {\n      pixelBitSkip = samplesPerPixel * bitsPerSample; // sampleBitOffset = (samplesPerPixel - 1) * bitsPerSample;\n    } else {\n      pixelBitSkip = bitsPerSample;\n    } // Bits per line rounds up to next byte boundary.\n\n\n    var bitsPerLine = tileWidth * pixelBitSkip;\n\n    if ((bitsPerLine & 7) !== 0) {\n      bitsPerLine = bitsPerLine + 7 & ~7;\n    }\n\n    for (var y = 0; y < tileHeight; ++y) {\n      var lineBitOffset = y * bitsPerLine;\n\n      for (var x = 0; x < tileWidth; ++x) {\n        var pixelBitOffset = lineBitOffset + x * samplesToTransfer * bitsPerSample;\n\n        for (var i = 0; i < samplesToTransfer; ++i) {\n          var bitOffset = pixelBitOffset + i * bitsPerSample;\n          var outIndex = (y * tileWidth + x) * samplesToTransfer + i;\n          var byteOffset = Math.floor(bitOffset / 8);\n          var innerBitOffset = bitOffset % 8;\n\n          if (innerBitOffset + bitsPerSample <= 8) {\n            outArray[outIndex] = view.getUint8(byteOffset) >> 8 - bitsPerSample - innerBitOffset & bitMask;\n          } else if (innerBitOffset + bitsPerSample <= 16) {\n            outArray[outIndex] = view.getUint16(byteOffset) >> 16 - bitsPerSample - innerBitOffset & bitMask;\n          } else if (innerBitOffset + bitsPerSample <= 24) {\n            var raw = view.getUint16(byteOffset) << 8 | view.getUint8(byteOffset + 2);\n            outArray[outIndex] = raw >> 24 - bitsPerSample - innerBitOffset & bitMask;\n          } else {\n            outArray[outIndex] = view.getUint32(byteOffset) >> 32 - bitsPerSample - innerBitOffset & bitMask;\n          } // let outWord = 0;\n          // for (let bit = 0; bit < bitsPerSample; ++bit) {\n          //   if (inByteArray[bitOffset >> 3]\n          //     & (0x80 >> (bitOffset & 7))) {\n          //     outWord |= (1 << (bitsPerSample - 1 - bit));\n          //   }\n          //   ++bitOffset;\n          // }\n          // outArray[outIndex] = outWord;\n          // outArray[pixel] = outWord;\n          // pixel += 1;\n\n        } // bitOffset = bitOffset + pixelBitSkip - bitsPerSample;\n\n      }\n    }\n  } else if (format === 3) {// floating point\n    // Float16 is handled elsewhere\n    // normalize 16/24 bit floats to 32 bit floats in the array\n    // console.time();\n    // if (bitsPerSample === 16) {\n    //   for (let byte = 0, outIndex = 0; byte < inBuffer.byteLength; byte += 2, ++outIndex) {\n    //     outArray[outIndex] = getFloat16(view, byte);\n    //   }\n    // }\n    // console.timeEnd()\n  }\n\n  return outArray.buffer;\n}\n/**\n * GeoTIFF sub-file image.\n */\n\n\nvar GeoTIFFImage = /*#__PURE__*/function () {\n  /**\n   * @constructor\n   * @param {Object} fileDirectory The parsed file directory\n   * @param {Object} geoKeys The parsed geo-keys\n   * @param {DataView} dataView The DataView for the underlying file.\n   * @param {Boolean} littleEndian Whether the file is encoded in little or big endian\n   * @param {Boolean} cache Whether or not decoded tiles shall be cached\n   * @param {import('./source/basesource').BaseSource} source The datasource to read from\n   */\n  function GeoTIFFImage(fileDirectory, geoKeys, dataView, littleEndian, cache, source) {\n    _classCallCheck(this, GeoTIFFImage);\n\n    this.fileDirectory = fileDirectory;\n    this.geoKeys = geoKeys;\n    this.dataView = dataView;\n    this.littleEndian = littleEndian;\n    this.tiles = cache ? {} : null;\n    this.isTiled = !fileDirectory.StripOffsets;\n    var planarConfiguration = fileDirectory.PlanarConfiguration;\n    this.planarConfiguration = typeof planarConfiguration === 'undefined' ? 1 : planarConfiguration;\n\n    if (this.planarConfiguration !== 1 && this.planarConfiguration !== 2) {\n      throw new Error('Invalid planar configuration.');\n    }\n\n    this.source = source;\n  }\n  /**\n   * Returns the associated parsed file directory.\n   * @returns {Object} the parsed file directory\n   */\n\n\n  _createClass(GeoTIFFImage, [{\n    key: \"getFileDirectory\",\n    value: function getFileDirectory() {\n      return this.fileDirectory;\n    }\n    /**\n     * Returns the associated parsed geo keys.\n     * @returns {Object} the parsed geo keys\n     */\n\n  }, {\n    key: \"getGeoKeys\",\n    value: function getGeoKeys() {\n      return this.geoKeys;\n    }\n    /**\n     * Returns the width of the image.\n     * @returns {Number} the width of the image\n     */\n\n  }, {\n    key: \"getWidth\",\n    value: function getWidth() {\n      return this.fileDirectory.ImageWidth;\n    }\n    /**\n     * Returns the height of the image.\n     * @returns {Number} the height of the image\n     */\n\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      return this.fileDirectory.ImageLength;\n    }\n    /**\n     * Returns the number of samples per pixel.\n     * @returns {Number} the number of samples per pixel\n     */\n\n  }, {\n    key: \"getSamplesPerPixel\",\n    value: function getSamplesPerPixel() {\n      return typeof this.fileDirectory.SamplesPerPixel !== 'undefined' ? this.fileDirectory.SamplesPerPixel : 1;\n    }\n    /**\n     * Returns the width of each tile.\n     * @returns {Number} the width of each tile\n     */\n\n  }, {\n    key: \"getTileWidth\",\n    value: function getTileWidth() {\n      return this.isTiled ? this.fileDirectory.TileWidth : this.getWidth();\n    }\n    /**\n     * Returns the height of each tile.\n     * @returns {Number} the height of each tile\n     */\n\n  }, {\n    key: \"getTileHeight\",\n    value: function getTileHeight() {\n      if (this.isTiled) {\n        return this.fileDirectory.TileLength;\n      }\n\n      if (typeof this.fileDirectory.RowsPerStrip !== 'undefined') {\n        return Math.min(this.fileDirectory.RowsPerStrip, this.getHeight());\n      }\n\n      return this.getHeight();\n    }\n  }, {\n    key: \"getBlockWidth\",\n    value: function getBlockWidth() {\n      return this.getTileWidth();\n    }\n  }, {\n    key: \"getBlockHeight\",\n    value: function getBlockHeight(y) {\n      if (this.isTiled || (y + 1) * this.getTileHeight() <= this.getHeight()) {\n        return this.getTileHeight();\n      } else {\n        return this.getHeight() - y * this.getTileHeight();\n      }\n    }\n    /**\n     * Calculates the number of bytes for each pixel across all samples. Only full\n     * bytes are supported, an exception is thrown when this is not the case.\n     * @returns {Number} the bytes per pixel\n     */\n\n  }, {\n    key: \"getBytesPerPixel\",\n    value: function getBytesPerPixel() {\n      var bytes = 0;\n\n      for (var i = 0; i < this.fileDirectory.BitsPerSample.length; ++i) {\n        bytes += this.getSampleByteSize(i);\n      }\n\n      return bytes;\n    }\n  }, {\n    key: \"getSampleByteSize\",\n    value: function getSampleByteSize(i) {\n      if (i >= this.fileDirectory.BitsPerSample.length) {\n        throw new RangeError(\"Sample index \".concat(i, \" is out of range.\"));\n      }\n\n      return Math.ceil(this.fileDirectory.BitsPerSample[i] / 8);\n    }\n  }, {\n    key: \"getReaderForSample\",\n    value: function getReaderForSample(sampleIndex) {\n      var format = this.fileDirectory.SampleFormat ? this.fileDirectory.SampleFormat[sampleIndex] : 1;\n      var bitsPerSample = this.fileDirectory.BitsPerSample[sampleIndex];\n\n      switch (format) {\n        case 1:\n          // unsigned integer data\n          if (bitsPerSample <= 8) {\n            return DataView.prototype.getUint8;\n          } else if (bitsPerSample <= 16) {\n            return DataView.prototype.getUint16;\n          } else if (bitsPerSample <= 32) {\n            return DataView.prototype.getUint32;\n          }\n\n          break;\n\n        case 2:\n          // twos complement signed integer data\n          if (bitsPerSample <= 8) {\n            return DataView.prototype.getInt8;\n          } else if (bitsPerSample <= 16) {\n            return DataView.prototype.getInt16;\n          } else if (bitsPerSample <= 32) {\n            return DataView.prototype.getInt32;\n          }\n\n          break;\n\n        case 3:\n          switch (bitsPerSample) {\n            case 16:\n              return function (offset, littleEndian) {\n                return getFloat16(this, offset, littleEndian);\n              };\n\n            case 32:\n              return DataView.prototype.getFloat32;\n\n            case 64:\n              return DataView.prototype.getFloat64;\n\n            default:\n              break;\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      throw Error('Unsupported data format/bitsPerSample');\n    }\n  }, {\n    key: \"getSampleFormat\",\n    value: function getSampleFormat() {\n      var sampleIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      return this.fileDirectory.SampleFormat ? this.fileDirectory.SampleFormat[sampleIndex] : 1;\n    }\n  }, {\n    key: \"getBitsPerSample\",\n    value: function getBitsPerSample() {\n      var sampleIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      return this.fileDirectory.BitsPerSample[sampleIndex];\n    }\n  }, {\n    key: \"getArrayForSample\",\n    value: function getArrayForSample(sampleIndex, size) {\n      var format = this.getSampleFormat(sampleIndex);\n      var bitsPerSample = this.getBitsPerSample(sampleIndex);\n      return arrayForType(format, bitsPerSample, size);\n    }\n    /**\n     * Returns the decoded strip or tile.\n     * @param {Number} x the strip or tile x-offset\n     * @param {Number} y the tile y-offset (0 for stripped images)\n     * @param {Number} sample the sample to get for separated samples\n     * @param {import(\"./geotiff\").Pool|import(\"./geotiff\").BaseDecoder} poolOrDecoder the decoder or decoder pool\n     * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n     *                               to be aborted\n     * @returns {Promise.<ArrayBuffer>}\n     */\n\n  }, {\n    key: \"getTileOrStrip\",\n    value: function () {\n      var _getTileOrStrip = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(x, y, sample, poolOrDecoder, signal) {\n        var _this = this;\n\n        var numTilesPerRow, numTilesPerCol, index, tiles, offset, byteCount, slice, request;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                numTilesPerRow = Math.ceil(this.getWidth() / this.getTileWidth());\n                numTilesPerCol = Math.ceil(this.getHeight() / this.getTileHeight());\n                tiles = this.tiles;\n\n                if (this.planarConfiguration === 1) {\n                  index = y * numTilesPerRow + x;\n                } else if (this.planarConfiguration === 2) {\n                  index = sample * numTilesPerRow * numTilesPerCol + y * numTilesPerRow + x;\n                }\n\n                if (this.isTiled) {\n                  offset = this.fileDirectory.TileOffsets[index];\n                  byteCount = this.fileDirectory.TileByteCounts[index];\n                } else {\n                  offset = this.fileDirectory.StripOffsets[index];\n                  byteCount = this.fileDirectory.StripByteCounts[index];\n                }\n\n                _context2.next = 7;\n                return this.source.fetch([{\n                  offset: offset,\n                  length: byteCount\n                }], signal);\n\n              case 7:\n                slice = _context2.sent[0];\n\n                if (tiles === null || !tiles[index]) {\n                  // resolve each request by potentially applying array normalization\n                  request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                    var data, sampleFormat, bitsPerSample;\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return poolOrDecoder.decode(_this.fileDirectory, slice);\n\n                          case 2:\n                            data = _context.sent;\n                            sampleFormat = _this.getSampleFormat();\n                            bitsPerSample = _this.getBitsPerSample();\n\n                            if (needsNormalization(sampleFormat, bitsPerSample)) {\n                              data = normalizeArray(data, sampleFormat, _this.planarConfiguration, _this.getSamplesPerPixel(), bitsPerSample, _this.getTileWidth(), _this.getBlockHeight(y));\n                            }\n\n                            return _context.abrupt(\"return\", data);\n\n                          case 7:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }))(); // set the cache\n\n                  if (tiles !== null) {\n                    tiles[index] = request;\n                  }\n                } else {\n                  // get from the cache\n                  request = tiles[index];\n                } // cache the tile request\n\n\n                _context2.t0 = x;\n                _context2.t1 = y;\n                _context2.t2 = sample;\n                _context2.next = 14;\n                return request;\n\n              case 14:\n                _context2.t3 = _context2.sent;\n                return _context2.abrupt(\"return\", {\n                  x: _context2.t0,\n                  y: _context2.t1,\n                  sample: _context2.t2,\n                  data: _context2.t3\n                });\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getTileOrStrip(_x, _x2, _x3, _x4, _x5) {\n        return _getTileOrStrip.apply(this, arguments);\n      }\n\n      return getTileOrStrip;\n    }()\n    /**\n     * Internal read function.\n     * @private\n     * @param {Array} imageWindow The image window in pixel coordinates\n     * @param {Array} samples The selected samples (0-based indices)\n     * @param {TypedArray|TypedArray[]} valueArrays The array(s) to write into\n     * @param {Boolean} interleave Whether or not to write in an interleaved manner\n     * @param {import(\"./geotiff\").Pool|AbstractDecoder} poolOrDecoder the decoder or decoder pool\n     * @param {number} width the width of window to be read into\n     * @param {number} height the height of window to be read into\n     * @param {number} resampleMethod the resampling method to be used when interpolating\n     * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n     *                               to be aborted\n     * @returns {Promise<ReadRasterResult>}\n     */\n\n  }, {\n    key: \"_readRaster\",\n    value: function () {\n      var _readRaster2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(imageWindow, samples, valueArrays, interleave, poolOrDecoder, width, height, resampleMethod, signal) {\n        var _this2 = this;\n\n        var tileWidth, tileHeight, imageWidth, imageHeight, minXTile, maxXTile, minYTile, maxYTile, windowWidth, bytesPerPixel, srcSampleOffsets, sampleReaders, i, promises, littleEndian, yTile, xTile, _loop, sampleIndex, resampled;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                tileWidth = this.getTileWidth();\n                tileHeight = this.getTileHeight();\n                imageWidth = this.getWidth();\n                imageHeight = this.getHeight();\n                minXTile = Math.max(Math.floor(imageWindow[0] / tileWidth), 0);\n                maxXTile = Math.min(Math.ceil(imageWindow[2] / tileWidth), Math.ceil(imageWidth / tileWidth));\n                minYTile = Math.max(Math.floor(imageWindow[1] / tileHeight), 0);\n                maxYTile = Math.min(Math.ceil(imageWindow[3] / tileHeight), Math.ceil(imageHeight / tileHeight));\n                windowWidth = imageWindow[2] - imageWindow[0];\n                bytesPerPixel = this.getBytesPerPixel();\n                srcSampleOffsets = [];\n                sampleReaders = [];\n\n                for (i = 0; i < samples.length; ++i) {\n                  if (this.planarConfiguration === 1) {\n                    srcSampleOffsets.push(sum(this.fileDirectory.BitsPerSample, 0, samples[i]) / 8);\n                  } else {\n                    srcSampleOffsets.push(0);\n                  }\n\n                  sampleReaders.push(this.getReaderForSample(samples[i]));\n                }\n\n                promises = [];\n                littleEndian = this.littleEndian;\n\n                for (yTile = minYTile; yTile < maxYTile; ++yTile) {\n                  for (xTile = minXTile; xTile < maxXTile; ++xTile) {\n                    _loop = function _loop(sampleIndex) {\n                      var si = sampleIndex;\n                      var sample = samples[sampleIndex];\n\n                      if (_this2.planarConfiguration === 2) {\n                        bytesPerPixel = _this2.getSampleByteSize(sampleIndex);\n                      }\n\n                      var promise = _this2.getTileOrStrip(xTile, yTile, sample, poolOrDecoder, signal).then(function (tile) {\n                        var buffer = tile.data;\n                        var dataView = new DataView(buffer);\n\n                        var blockHeight = _this2.getBlockHeight(tile.y);\n\n                        var firstLine = tile.y * tileHeight;\n                        var firstCol = tile.x * tileWidth;\n                        var lastLine = firstLine + blockHeight;\n                        var lastCol = (tile.x + 1) * tileWidth;\n                        var reader = sampleReaders[si];\n                        var ymax = Math.min(blockHeight, blockHeight - (lastLine - imageWindow[3]), imageHeight - firstLine);\n                        var xmax = Math.min(tileWidth, tileWidth - (lastCol - imageWindow[2]), imageWidth - firstCol);\n\n                        for (var y = Math.max(0, imageWindow[1] - firstLine); y < ymax; ++y) {\n                          for (var x = Math.max(0, imageWindow[0] - firstCol); x < xmax; ++x) {\n                            var pixelOffset = (y * tileWidth + x) * bytesPerPixel;\n                            var value = reader.call(dataView, pixelOffset + srcSampleOffsets[si], littleEndian);\n                            var windowCoordinate = void 0;\n\n                            if (interleave) {\n                              windowCoordinate = (y + firstLine - imageWindow[1]) * windowWidth * samples.length + (x + firstCol - imageWindow[0]) * samples.length + si;\n                              valueArrays[windowCoordinate] = value;\n                            } else {\n                              windowCoordinate = (y + firstLine - imageWindow[1]) * windowWidth + x + firstCol - imageWindow[0];\n                              valueArrays[si][windowCoordinate] = value;\n                            }\n                          }\n                        }\n                      });\n\n                      promises.push(promise);\n                    };\n\n                    for (sampleIndex = 0; sampleIndex < samples.length; ++sampleIndex) {\n                      _loop(sampleIndex);\n                    }\n                  }\n                }\n\n                _context3.next = 18;\n                return Promise.all(promises);\n\n              case 18:\n                if (!(width && imageWindow[2] - imageWindow[0] !== width || height && imageWindow[3] - imageWindow[1] !== height)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                if (interleave) {\n                  resampled = resampleInterleaved(valueArrays, imageWindow[2] - imageWindow[0], imageWindow[3] - imageWindow[1], width, height, samples.length, resampleMethod);\n                } else {\n                  resampled = resample(valueArrays, imageWindow[2] - imageWindow[0], imageWindow[3] - imageWindow[1], width, height, resampleMethod);\n                }\n\n                resampled.width = width;\n                resampled.height = height;\n                return _context3.abrupt(\"return\", resampled);\n\n              case 23:\n                valueArrays.width = width || imageWindow[2] - imageWindow[0];\n                valueArrays.height = height || imageWindow[3] - imageWindow[1];\n                return _context3.abrupt(\"return\", valueArrays);\n\n              case 26:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function _readRaster(_x6, _x7, _x8, _x9, _x10, _x11, _x12, _x13, _x14) {\n        return _readRaster2.apply(this, arguments);\n      }\n\n      return _readRaster;\n    }()\n    /**\n     * Reads raster data from the image. This function reads all selected samples\n     * into separate arrays of the correct type for that sample or into a single\n     * combined array when `interleave` is set. When provided, only a subset\n     * of the raster is read for each sample.\n     *\n     * @param {ReadRasterOptions} [options={}] optional parameters\n     * @returns {Promise<ReadRasterResult>} the decoded arrays as a promise\n     */\n\n  }, {\n    key: \"readRasters\",\n    value: function () {\n      var _readRasters = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var _ref2,\n            wnd,\n            _ref2$samples,\n            samples,\n            interleave,\n            _ref2$pool,\n            pool,\n            width,\n            height,\n            resampleMethod,\n            fillValue,\n            signal,\n            imageWindow,\n            imageWindowWidth,\n            imageWindowHeight,\n            numPixels,\n            samplesPerPixel,\n            i,\n            _i,\n            valueArrays,\n            format,\n            bitsPerSample,\n            _i2,\n            valueArray,\n            poolOrDecoder,\n            result,\n            _args4 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _ref2 = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : {}, wnd = _ref2.window, _ref2$samples = _ref2.samples, samples = _ref2$samples === void 0 ? [] : _ref2$samples, interleave = _ref2.interleave, _ref2$pool = _ref2.pool, pool = _ref2$pool === void 0 ? null : _ref2$pool, width = _ref2.width, height = _ref2.height, resampleMethod = _ref2.resampleMethod, fillValue = _ref2.fillValue, signal = _ref2.signal;\n                imageWindow = wnd || [0, 0, this.getWidth(), this.getHeight()]; // check parameters\n\n                if (!(imageWindow[0] > imageWindow[2] || imageWindow[1] > imageWindow[3])) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                throw new Error('Invalid subsets');\n\n              case 4:\n                imageWindowWidth = imageWindow[2] - imageWindow[0];\n                imageWindowHeight = imageWindow[3] - imageWindow[1];\n                numPixels = imageWindowWidth * imageWindowHeight;\n                samplesPerPixel = this.getSamplesPerPixel();\n\n                if (!(!samples || !samples.length)) {\n                  _context4.next = 12;\n                  break;\n                }\n\n                for (i = 0; i < samplesPerPixel; ++i) {\n                  samples.push(i);\n                }\n\n                _context4.next = 19;\n                break;\n\n              case 12:\n                _i = 0;\n\n              case 13:\n                if (!(_i < samples.length)) {\n                  _context4.next = 19;\n                  break;\n                }\n\n                if (!(samples[_i] >= samplesPerPixel)) {\n                  _context4.next = 16;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", Promise.reject(new RangeError(\"Invalid sample index '\".concat(samples[_i], \"'.\"))));\n\n              case 16:\n                ++_i;\n                _context4.next = 13;\n                break;\n\n              case 19:\n                if (interleave) {\n                  format = this.fileDirectory.SampleFormat ? Math.max.apply(null, this.fileDirectory.SampleFormat) : 1;\n                  bitsPerSample = Math.max.apply(null, this.fileDirectory.BitsPerSample);\n                  valueArrays = arrayForType(format, bitsPerSample, numPixels * samples.length);\n\n                  if (fillValue) {\n                    valueArrays.fill(fillValue);\n                  }\n                } else {\n                  valueArrays = [];\n\n                  for (_i2 = 0; _i2 < samples.length; ++_i2) {\n                    valueArray = this.getArrayForSample(samples[_i2], numPixels);\n\n                    if (Array.isArray(fillValue) && _i2 < fillValue.length) {\n                      valueArray.fill(fillValue[_i2]);\n                    } else if (fillValue && !Array.isArray(fillValue)) {\n                      valueArray.fill(fillValue);\n                    }\n\n                    valueArrays.push(valueArray);\n                  }\n                }\n\n                _context4.t0 = pool;\n\n                if (_context4.t0) {\n                  _context4.next = 25;\n                  break;\n                }\n\n                _context4.next = 24;\n                return getDecoder(this.fileDirectory);\n\n              case 24:\n                _context4.t0 = _context4.sent;\n\n              case 25:\n                poolOrDecoder = _context4.t0;\n                _context4.next = 28;\n                return this._readRaster(imageWindow, samples, valueArrays, interleave, poolOrDecoder, width, height, resampleMethod, signal);\n\n              case 28:\n                result = _context4.sent;\n                return _context4.abrupt(\"return\", result);\n\n              case 30:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function readRasters() {\n        return _readRasters.apply(this, arguments);\n      }\n\n      return readRasters;\n    }()\n    /**\n     * Reads raster data from the image as RGB. The result is always an\n     * interleaved typed array.\n     * Colorspaces other than RGB will be transformed to RGB, color maps expanded.\n     * When no other method is applicable, the first sample is used to produce a\n     * grayscale image.\n     * When provided, only a subset of the raster is read for each sample.\n     *\n     * @param {Object} [options] optional parameters\n     * @param {Array<number>} [options.window] the subset to read data from in pixels.\n     * @param {boolean} [options.interleave=true] whether the data shall be read\n     *                                             in one single array or separate\n     *                                             arrays.\n     * @param {import(\"./geotiff\").Pool} [options.pool=null] The optional decoder pool to use.\n     * @param {number} [options.width] The desired width of the output. When the width is no the\n     *                                 same as the images, resampling will be performed.\n     * @param {number} [options.height] The desired height of the output. When the width is no the\n     *                                  same as the images, resampling will be performed.\n     * @param {string} [options.resampleMethod='nearest'] The desired resampling method.\n     * @param {boolean} [options.enableAlpha=false] Enable reading alpha channel if present.\n     * @param {AbortSignal} [options.signal] An AbortSignal that may be signalled if the request is\n     *                                       to be aborted\n     * @returns {Promise<ReadRasterResult>} the RGB array as a Promise\n     */\n\n  }, {\n    key: \"readRGB\",\n    value: function () {\n      var _readRGB = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var _ref3,\n            window,\n            _ref3$interleave,\n            interleave,\n            _ref3$pool,\n            pool,\n            width,\n            height,\n            resampleMethod,\n            _ref3$enableAlpha,\n            enableAlpha,\n            signal,\n            imageWindow,\n            pi,\n            s,\n            i,\n            samples,\n            subOptions,\n            fileDirectory,\n            raster,\n            max,\n            data,\n            red,\n            green,\n            blue,\n            _i3,\n            j,\n            _args5 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _ref3 = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {}, window = _ref3.window, _ref3$interleave = _ref3.interleave, interleave = _ref3$interleave === void 0 ? true : _ref3$interleave, _ref3$pool = _ref3.pool, pool = _ref3$pool === void 0 ? null : _ref3$pool, width = _ref3.width, height = _ref3.height, resampleMethod = _ref3.resampleMethod, _ref3$enableAlpha = _ref3.enableAlpha, enableAlpha = _ref3$enableAlpha === void 0 ? false : _ref3$enableAlpha, signal = _ref3.signal;\n                imageWindow = window || [0, 0, this.getWidth(), this.getHeight()]; // check parameters\n\n                if (!(imageWindow[0] > imageWindow[2] || imageWindow[1] > imageWindow[3])) {\n                  _context5.next = 4;\n                  break;\n                }\n\n                throw new Error('Invalid subsets');\n\n              case 4:\n                pi = this.fileDirectory.PhotometricInterpretation;\n\n                if (!(pi === photometricInterpretations.RGB)) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                s = [0, 1, 2];\n\n                if (!(this.fileDirectory.ExtraSamples === ExtraSamplesValues.Unspecified) && enableAlpha) {\n                  s = [];\n\n                  for (i = 0; i < this.fileDirectory.BitsPerSample.length; i += 1) {\n                    s.push(i);\n                  }\n                }\n\n                return _context5.abrupt(\"return\", this.readRasters({\n                  window: window,\n                  interleave: interleave,\n                  samples: s,\n                  pool: pool,\n                  width: width,\n                  height: height,\n                  resampleMethod: resampleMethod,\n                  signal: signal\n                }));\n\n              case 9:\n                _context5.t0 = pi;\n                _context5.next = _context5.t0 === photometricInterpretations.WhiteIsZero ? 12 : _context5.t0 === photometricInterpretations.BlackIsZero ? 12 : _context5.t0 === photometricInterpretations.Palette ? 12 : _context5.t0 === photometricInterpretations.CMYK ? 14 : _context5.t0 === photometricInterpretations.YCbCr ? 16 : _context5.t0 === photometricInterpretations.CIELab ? 16 : 18;\n                break;\n\n              case 12:\n                samples = [0];\n                return _context5.abrupt(\"break\", 19);\n\n              case 14:\n                samples = [0, 1, 2, 3];\n                return _context5.abrupt(\"break\", 19);\n\n              case 16:\n                samples = [0, 1, 2];\n                return _context5.abrupt(\"break\", 19);\n\n              case 18:\n                throw new Error('Invalid or unsupported photometric interpretation.');\n\n              case 19:\n                subOptions = {\n                  window: imageWindow,\n                  interleave: true,\n                  samples: samples,\n                  pool: pool,\n                  width: width,\n                  height: height,\n                  resampleMethod: resampleMethod,\n                  signal: signal\n                };\n                fileDirectory = this.fileDirectory;\n                _context5.next = 23;\n                return this.readRasters(subOptions);\n\n              case 23:\n                raster = _context5.sent;\n                max = Math.pow(2, this.fileDirectory.BitsPerSample[0]);\n                _context5.t1 = pi;\n                _context5.next = _context5.t1 === photometricInterpretations.WhiteIsZero ? 28 : _context5.t1 === photometricInterpretations.BlackIsZero ? 30 : _context5.t1 === photometricInterpretations.Palette ? 32 : _context5.t1 === photometricInterpretations.CMYK ? 34 : _context5.t1 === photometricInterpretations.YCbCr ? 36 : _context5.t1 === photometricInterpretations.CIELab ? 38 : 40;\n                break;\n\n              case 28:\n                data = fromWhiteIsZero(raster, max);\n                return _context5.abrupt(\"break\", 41);\n\n              case 30:\n                data = fromBlackIsZero(raster, max);\n                return _context5.abrupt(\"break\", 41);\n\n              case 32:\n                data = fromPalette(raster, fileDirectory.ColorMap);\n                return _context5.abrupt(\"break\", 41);\n\n              case 34:\n                data = fromCMYK(raster);\n                return _context5.abrupt(\"break\", 41);\n\n              case 36:\n                data = fromYCbCr(raster);\n                return _context5.abrupt(\"break\", 41);\n\n              case 38:\n                data = fromCIELab(raster);\n                return _context5.abrupt(\"break\", 41);\n\n              case 40:\n                throw new Error('Unsupported photometric interpretation.');\n\n              case 41:\n                // if non-interleaved data is requested, we must split the channels\n                // into their respective arrays\n                if (!interleave) {\n                  red = new Uint8Array(data.length / 3);\n                  green = new Uint8Array(data.length / 3);\n                  blue = new Uint8Array(data.length / 3);\n\n                  for (_i3 = 0, j = 0; _i3 < data.length; _i3 += 3, ++j) {\n                    red[j] = data[_i3];\n                    green[j] = data[_i3 + 1];\n                    blue[j] = data[_i3 + 2];\n                  }\n\n                  data = [red, green, blue];\n                }\n\n                data.width = raster.width;\n                data.height = raster.height;\n                return _context5.abrupt(\"return\", data);\n\n              case 45:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function readRGB() {\n        return _readRGB.apply(this, arguments);\n      }\n\n      return readRGB;\n    }()\n    /**\n     * Returns an array of tiepoints.\n     * @returns {Object[]}\n     */\n\n  }, {\n    key: \"getTiePoints\",\n    value: function getTiePoints() {\n      if (!this.fileDirectory.ModelTiepoint) {\n        return [];\n      }\n\n      var tiePoints = [];\n\n      for (var i = 0; i < this.fileDirectory.ModelTiepoint.length; i += 6) {\n        tiePoints.push({\n          i: this.fileDirectory.ModelTiepoint[i],\n          j: this.fileDirectory.ModelTiepoint[i + 1],\n          k: this.fileDirectory.ModelTiepoint[i + 2],\n          x: this.fileDirectory.ModelTiepoint[i + 3],\n          y: this.fileDirectory.ModelTiepoint[i + 4],\n          z: this.fileDirectory.ModelTiepoint[i + 5]\n        });\n      }\n\n      return tiePoints;\n    }\n    /**\n     * Returns the parsed GDAL metadata items.\n     *\n     * If sample is passed to null, dataset-level metadata will be returned.\n     * Otherwise only metadata specific to the provided sample will be returned.\n     *\n     * @param {number} [sample=null] The sample index.\n     * @returns {Object}\n     */\n\n  }, {\n    key: \"getGDALMetadata\",\n    value: function getGDALMetadata() {\n      var sample = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var metadata = {};\n\n      if (!this.fileDirectory.GDAL_METADATA) {\n        return null;\n      }\n\n      var string = this.fileDirectory.GDAL_METADATA;\n      var items = findTagsByName(string, 'Item');\n\n      if (sample === null) {\n        items = items.filter(function (item) {\n          return getAttribute(item, 'sample') === undefined;\n        });\n      } else {\n        items = items.filter(function (item) {\n          return Number(getAttribute(item, 'sample')) === sample;\n        });\n      }\n\n      for (var i = 0; i < items.length; ++i) {\n        var item = items[i];\n        metadata[getAttribute(item, 'name')] = item.inner;\n      }\n\n      return metadata;\n    }\n    /**\n     * Returns the GDAL nodata value\n     * @returns {number|null}\n     */\n\n  }, {\n    key: \"getGDALNoData\",\n    value: function getGDALNoData() {\n      if (!this.fileDirectory.GDAL_NODATA) {\n        return null;\n      }\n\n      var string = this.fileDirectory.GDAL_NODATA;\n      return Number(string.substring(0, string.length - 1));\n    }\n    /**\n     * Returns the image origin as a XYZ-vector. When the image has no affine\n     * transformation, then an exception is thrown.\n     * @returns {Array<number>} The origin as a vector\n     */\n\n  }, {\n    key: \"getOrigin\",\n    value: function getOrigin() {\n      var tiePoints = this.fileDirectory.ModelTiepoint;\n      var modelTransformation = this.fileDirectory.ModelTransformation;\n\n      if (tiePoints && tiePoints.length === 6) {\n        return [tiePoints[3], tiePoints[4], tiePoints[5]];\n      }\n\n      if (modelTransformation) {\n        return [modelTransformation[3], modelTransformation[7], modelTransformation[11]];\n      }\n\n      throw new Error('The image does not have an affine transformation.');\n    }\n    /**\n     * Returns the image resolution as a XYZ-vector. When the image has no affine\n     * transformation, then an exception is thrown.\n     * @param {GeoTIFFImage} [referenceImage=null] A reference image to calculate the resolution from\n     *                                             in cases when the current image does not have the\n     *                                             required tags on its own.\n     * @returns {Array<number>} The resolution as a vector\n     */\n\n  }, {\n    key: \"getResolution\",\n    value: function getResolution() {\n      var referenceImage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var modelPixelScale = this.fileDirectory.ModelPixelScale;\n      var modelTransformation = this.fileDirectory.ModelTransformation;\n\n      if (modelPixelScale) {\n        return [modelPixelScale[0], -modelPixelScale[1], modelPixelScale[2]];\n      }\n\n      if (modelTransformation) {\n        return [modelTransformation[0], modelTransformation[5], modelTransformation[10]];\n      }\n\n      if (referenceImage) {\n        var _referenceImage$getRe = referenceImage.getResolution(),\n            _referenceImage$getRe2 = _slicedToArray(_referenceImage$getRe, 3),\n            refResX = _referenceImage$getRe2[0],\n            refResY = _referenceImage$getRe2[1],\n            refResZ = _referenceImage$getRe2[2];\n\n        return [refResX * referenceImage.getWidth() / this.getWidth(), refResY * referenceImage.getHeight() / this.getHeight(), refResZ * referenceImage.getWidth() / this.getWidth()];\n      }\n\n      throw new Error('The image does not have an affine transformation.');\n    }\n    /**\n     * Returns whether or not the pixels of the image depict an area (or point).\n     * @returns {Boolean} Whether the pixels are a point\n     */\n\n  }, {\n    key: \"pixelIsArea\",\n    value: function pixelIsArea() {\n      return this.geoKeys.GTRasterTypeGeoKey === 1;\n    }\n    /**\n     * Returns the image bounding box as an array of 4 values: min-x, min-y,\n     * max-x and max-y. When the image has no affine transformation, then an\n     * exception is thrown.\n     * @returns {Array<number>} The bounding box\n     */\n\n  }, {\n    key: \"getBoundingBox\",\n    value: function getBoundingBox() {\n      var origin = this.getOrigin();\n      var resolution = this.getResolution();\n      var x1 = origin[0];\n      var y1 = origin[1];\n      var x2 = x1 + resolution[0] * this.getWidth();\n      var y2 = y1 + resolution[1] * this.getHeight();\n      return [Math.min(x1, x2), Math.min(y1, y2), Math.max(x1, x2), Math.max(y1, y2)];\n    }\n  }]);\n\n  return GeoTIFFImage;\n}();\n\nexport default GeoTIFFImage;","import _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { getFloat16 as _getFloat } from '@petamoriken/float16';\n\nvar DataView64 = /*#__PURE__*/function () {\n  function DataView64(arrayBuffer) {\n    _classCallCheck(this, DataView64);\n\n    this._dataView = new DataView(arrayBuffer);\n  }\n\n  _createClass(DataView64, [{\n    key: \"buffer\",\n    get: function get() {\n      return this._dataView.buffer;\n    }\n  }, {\n    key: \"getUint64\",\n    value: function getUint64(offset, littleEndian) {\n      var left = this.getUint32(offset, littleEndian);\n      var right = this.getUint32(offset + 4, littleEndian);\n      var combined;\n\n      if (littleEndian) {\n        combined = left + Math.pow(2, 32) * right;\n\n        if (!Number.isSafeInteger(combined)) {\n          throw new Error(\"\".concat(combined, \" exceeds MAX_SAFE_INTEGER. \") + 'Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues');\n        }\n\n        return combined;\n      }\n\n      combined = Math.pow(2, 32) * left + right;\n\n      if (!Number.isSafeInteger(combined)) {\n        throw new Error(\"\".concat(combined, \" exceeds MAX_SAFE_INTEGER. \") + 'Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues');\n      }\n\n      return combined;\n    } // adapted from https://stackoverflow.com/a/55338384/8060591\n\n  }, {\n    key: \"getInt64\",\n    value: function getInt64(offset, littleEndian) {\n      var value = 0;\n      var isNegative = (this._dataView.getUint8(offset + (littleEndian ? 7 : 0)) & 0x80) > 0;\n      var carrying = true;\n\n      for (var i = 0; i < 8; i++) {\n        var byte = this._dataView.getUint8(offset + (littleEndian ? i : 7 - i));\n\n        if (isNegative) {\n          if (carrying) {\n            if (byte !== 0x00) {\n              byte = ~(byte - 1) & 0xff;\n              carrying = false;\n            }\n          } else {\n            byte = ~byte & 0xff;\n          }\n        }\n\n        value += byte * Math.pow(256, i);\n      }\n\n      if (isNegative) {\n        value = -value;\n      }\n\n      return value;\n    }\n  }, {\n    key: \"getUint8\",\n    value: function getUint8(offset, littleEndian) {\n      return this._dataView.getUint8(offset, littleEndian);\n    }\n  }, {\n    key: \"getInt8\",\n    value: function getInt8(offset, littleEndian) {\n      return this._dataView.getInt8(offset, littleEndian);\n    }\n  }, {\n    key: \"getUint16\",\n    value: function getUint16(offset, littleEndian) {\n      return this._dataView.getUint16(offset, littleEndian);\n    }\n  }, {\n    key: \"getInt16\",\n    value: function getInt16(offset, littleEndian) {\n      return this._dataView.getInt16(offset, littleEndian);\n    }\n  }, {\n    key: \"getUint32\",\n    value: function getUint32(offset, littleEndian) {\n      return this._dataView.getUint32(offset, littleEndian);\n    }\n  }, {\n    key: \"getInt32\",\n    value: function getInt32(offset, littleEndian) {\n      return this._dataView.getInt32(offset, littleEndian);\n    }\n  }, {\n    key: \"getFloat16\",\n    value: function getFloat16(offset, littleEndian) {\n      return _getFloat(this._dataView, offset, littleEndian);\n    }\n  }, {\n    key: \"getFloat32\",\n    value: function getFloat32(offset, littleEndian) {\n      return this._dataView.getFloat32(offset, littleEndian);\n    }\n  }, {\n    key: \"getFloat64\",\n    value: function getFloat64(offset, littleEndian) {\n      return this._dataView.getFloat64(offset, littleEndian);\n    }\n  }]);\n\n  return DataView64;\n}();\n\nexport { DataView64 as default };","import _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nvar DataSlice = /*#__PURE__*/function () {\n  function DataSlice(arrayBuffer, sliceOffset, littleEndian, bigTiff) {\n    _classCallCheck(this, DataSlice);\n\n    this._dataView = new DataView(arrayBuffer);\n    this._sliceOffset = sliceOffset;\n    this._littleEndian = littleEndian;\n    this._bigTiff = bigTiff;\n  }\n\n  _createClass(DataSlice, [{\n    key: \"sliceOffset\",\n    get: function get() {\n      return this._sliceOffset;\n    }\n  }, {\n    key: \"sliceTop\",\n    get: function get() {\n      return this._sliceOffset + this.buffer.byteLength;\n    }\n  }, {\n    key: \"littleEndian\",\n    get: function get() {\n      return this._littleEndian;\n    }\n  }, {\n    key: \"bigTiff\",\n    get: function get() {\n      return this._bigTiff;\n    }\n  }, {\n    key: \"buffer\",\n    get: function get() {\n      return this._dataView.buffer;\n    }\n  }, {\n    key: \"covers\",\n    value: function covers(offset, length) {\n      return this.sliceOffset <= offset && this.sliceTop >= offset + length;\n    }\n  }, {\n    key: \"readUint8\",\n    value: function readUint8(offset) {\n      return this._dataView.getUint8(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readInt8\",\n    value: function readInt8(offset) {\n      return this._dataView.getInt8(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readUint16\",\n    value: function readUint16(offset) {\n      return this._dataView.getUint16(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readInt16\",\n    value: function readInt16(offset) {\n      return this._dataView.getInt16(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readUint32\",\n    value: function readUint32(offset) {\n      return this._dataView.getUint32(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readInt32\",\n    value: function readInt32(offset) {\n      return this._dataView.getInt32(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readFloat32\",\n    value: function readFloat32(offset) {\n      return this._dataView.getFloat32(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readFloat64\",\n    value: function readFloat64(offset) {\n      return this._dataView.getFloat64(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readUint64\",\n    value: function readUint64(offset) {\n      var left = this.readUint32(offset);\n      var right = this.readUint32(offset + 4);\n      var combined;\n\n      if (this._littleEndian) {\n        combined = left + Math.pow(2, 32) * right;\n\n        if (!Number.isSafeInteger(combined)) {\n          throw new Error(\"\".concat(combined, \" exceeds MAX_SAFE_INTEGER. \") + 'Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues');\n        }\n\n        return combined;\n      }\n\n      combined = Math.pow(2, 32) * left + right;\n\n      if (!Number.isSafeInteger(combined)) {\n        throw new Error(\"\".concat(combined, \" exceeds MAX_SAFE_INTEGER. \") + 'Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues');\n      }\n\n      return combined;\n    } // adapted from https://stackoverflow.com/a/55338384/8060591\n\n  }, {\n    key: \"readInt64\",\n    value: function readInt64(offset) {\n      var value = 0;\n      var isNegative = (this._dataView.getUint8(offset + (this._littleEndian ? 7 : 0)) & 0x80) > 0;\n      var carrying = true;\n\n      for (var i = 0; i < 8; i++) {\n        var byte = this._dataView.getUint8(offset + (this._littleEndian ? i : 7 - i));\n\n        if (isNegative) {\n          if (carrying) {\n            if (byte !== 0x00) {\n              byte = ~(byte - 1) & 0xff;\n              carrying = false;\n            }\n          } else {\n            byte = ~byte & 0xff;\n          }\n        }\n\n        value += byte * Math.pow(256, i);\n      }\n\n      if (isNegative) {\n        value = -value;\n      }\n\n      return value;\n    }\n  }, {\n    key: \"readOffset\",\n    value: function readOffset(offset) {\n      if (this._bigTiff) {\n        return this.readUint64(offset);\n      }\n\n      return this.readUint32(offset);\n    }\n  }]);\n\n  return DataSlice;\n}();\n\nexport { DataSlice as default };","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\n/**\n * @typedef Slice\n * @property {number} offset\n * @property {number} length\n */\nexport var BaseSource = /*#__PURE__*/function () {\n  function BaseSource() {\n    _classCallCheck(this, BaseSource);\n  }\n\n  _createClass(BaseSource, [{\n    key: \"fetch\",\n    value:\n    /**\n     *\n     * @param {Slice[]} slices\n     * @returns {ArrayBuffer[]}\n     */\n    function () {\n      var _fetch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(slices) {\n        var _this = this;\n\n        var signal,\n            _args = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                signal = _args.length > 1 && _args[1] !== undefined ? _args[1] : undefined;\n                return _context.abrupt(\"return\", Promise.all(slices.map(function (slice) {\n                  return _this.fetchSlice(slice, signal);\n                })));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function fetch(_x) {\n        return _fetch.apply(this, arguments);\n      }\n\n      return fetch;\n    }()\n    /**\n     *\n     * @param {Slice} slice\n     * @returns {ArrayBuffer}\n     */\n\n  }, {\n    key: \"fetchSlice\",\n    value: function () {\n      var _fetchSlice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(slice) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                throw new Error(\"fetching of slice \".concat(slice, \" not possible, not implemented\"));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function fetchSlice(_x2) {\n        return _fetchSlice.apply(this, arguments);\n      }\n\n      return fetchSlice;\n    }()\n    /**\n     * Returns the filesize if already determined and null otherwise\n     */\n\n  }, {\n    key: \"fileSize\",\n    get: function get() {\n      return null;\n    }\n  }, {\n    key: \"close\",\n    value: function () {\n      var _close = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function close() {\n        return _close.apply(this, arguments);\n      }\n\n      return close;\n    }()\n  }]);\n\n  return BaseSource;\n}();","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { BaseSource } from './basesource.js';\n\nvar FileReaderSource = /*#__PURE__*/function (_BaseSource) {\n  _inherits(FileReaderSource, _BaseSource);\n\n  var _super = _createSuper(FileReaderSource);\n\n  function FileReaderSource(file) {\n    var _this;\n\n    _classCallCheck(this, FileReaderSource);\n\n    _this = _super.call(this);\n    _this.file = file;\n    return _this;\n  }\n\n  _createClass(FileReaderSource, [{\n    key: \"fetchSlice\",\n    value: function () {\n      var _fetchSlice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(slice, signal) {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  var blob = _this2.file.slice(slice.offset, slice.offset + slice.length);\n\n                  var reader = new FileReader();\n\n                  reader.onload = function (event) {\n                    return resolve(event.target.result);\n                  };\n\n                  reader.onerror = reject;\n                  reader.onabort = reject;\n                  reader.readAsArrayBuffer(blob);\n\n                  if (signal) {\n                    signal.addEventListener('abort', function () {\n                      return reader.abort();\n                    });\n                  }\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function fetchSlice(_x, _x2) {\n        return _fetchSlice.apply(this, arguments);\n      }\n\n      return fetchSlice;\n    }()\n  }]);\n\n  return FileReaderSource;\n}(BaseSource);\n/**\n * Create a new source from a given file/blob.\n * @param {Blob} file The file or blob to read from.\n * @returns The constructed source\n */\n\n\nexport function makeFileReaderSource(file) {\n  return new FileReaderSource(file);\n}","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _wrapNativeSuper from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/** @module geotiff */\nimport GeoTIFFImage from './geotiffimage.js';\nimport DataView64 from './dataview64.js';\nimport DataSlice from './dataslice.js';\nimport Pool from './pool.js';\nimport { makeRemoteSource } from './source/remote.js';\nimport { makeBufferSource } from './source/arraybuffer.js';\nimport { makeFileReaderSource } from './source/filereader.js';\nimport { makeFileSource } from './source/file.js';\nimport { fieldTypes, fieldTagNames, arrayFields, geoKeyNames } from './globals.js';\nimport { writeGeotiff } from './geotiffwriter.js';\nimport * as globals from './globals.js';\nimport * as rgb from './rgb.js';\nimport { getDecoder, addDecoder } from './compression/index.js';\nimport { setLogger } from './logging.js';\nexport { globals };\nexport { rgb };\nexport { default as BaseDecoder } from './compression/basedecoder.js';\nexport { getDecoder, addDecoder };\nexport { setLogger };\n/**\n * @typedef {Uint8Array | Int8Array | Uint16Array | Int16Array | Uint32Array | Int32Array | Float32Array | Float64Array}\n * TypedArray\n */\n\n/**\n * @typedef {{ height:number, width: number }} Dimensions\n */\n\n/**\n * The autogenerated docs are a little confusing here. The effective type is:\n *\n * `TypedArray & { height: number; width: number}`\n * @typedef {TypedArray & Dimensions} TypedArrayWithDimensions\n */\n\n/**\n * The autogenerated docs are a little confusing here. The effective type is:\n *\n * `TypedArray[] & { height: number; width: number}`\n * @typedef {TypedArray[] & Dimensions} TypedArrayArrayWithDimensions\n */\n\n/**\n *  The autogenerated docs are a little confusing here. The effective type is:\n *\n * `(TypedArray | TypedArray[]) & { height: number; width: number}`\n * @typedef {TypedArrayWithDimensions | TypedArrayArrayWithDimensions} ReadRasterResult\n */\n\nfunction getFieldTypeLength(fieldType) {\n  switch (fieldType) {\n    case fieldTypes.BYTE:\n    case fieldTypes.ASCII:\n    case fieldTypes.SBYTE:\n    case fieldTypes.UNDEFINED:\n      return 1;\n\n    case fieldTypes.SHORT:\n    case fieldTypes.SSHORT:\n      return 2;\n\n    case fieldTypes.LONG:\n    case fieldTypes.SLONG:\n    case fieldTypes.FLOAT:\n    case fieldTypes.IFD:\n      return 4;\n\n    case fieldTypes.RATIONAL:\n    case fieldTypes.SRATIONAL:\n    case fieldTypes.DOUBLE:\n    case fieldTypes.LONG8:\n    case fieldTypes.SLONG8:\n    case fieldTypes.IFD8:\n      return 8;\n\n    default:\n      throw new RangeError(\"Invalid field type: \".concat(fieldType));\n  }\n}\n\nfunction parseGeoKeyDirectory(fileDirectory) {\n  var rawGeoKeyDirectory = fileDirectory.GeoKeyDirectory;\n\n  if (!rawGeoKeyDirectory) {\n    return null;\n  }\n\n  var geoKeyDirectory = {};\n\n  for (var i = 4; i <= rawGeoKeyDirectory[3] * 4; i += 4) {\n    var key = geoKeyNames[rawGeoKeyDirectory[i]];\n    var location = rawGeoKeyDirectory[i + 1] ? fieldTagNames[rawGeoKeyDirectory[i + 1]] : null;\n    var count = rawGeoKeyDirectory[i + 2];\n    var offset = rawGeoKeyDirectory[i + 3];\n    var value = null;\n\n    if (!location) {\n      value = offset;\n    } else {\n      value = fileDirectory[location];\n\n      if (typeof value === 'undefined' || value === null) {\n        throw new Error(\"Could not get value of geoKey '\".concat(key, \"'.\"));\n      } else if (typeof value === 'string') {\n        value = value.substring(offset, offset + count - 1);\n      } else if (value.subarray) {\n        value = value.subarray(offset, offset + count);\n\n        if (count === 1) {\n          value = value[0];\n        }\n      }\n    }\n\n    geoKeyDirectory[key] = value;\n  }\n\n  return geoKeyDirectory;\n}\n\nfunction getValues(dataSlice, fieldType, count, offset) {\n  var values = null;\n  var readMethod = null;\n  var fieldTypeLength = getFieldTypeLength(fieldType);\n\n  switch (fieldType) {\n    case fieldTypes.BYTE:\n    case fieldTypes.ASCII:\n    case fieldTypes.UNDEFINED:\n      values = new Uint8Array(count);\n      readMethod = dataSlice.readUint8;\n      break;\n\n    case fieldTypes.SBYTE:\n      values = new Int8Array(count);\n      readMethod = dataSlice.readInt8;\n      break;\n\n    case fieldTypes.SHORT:\n      values = new Uint16Array(count);\n      readMethod = dataSlice.readUint16;\n      break;\n\n    case fieldTypes.SSHORT:\n      values = new Int16Array(count);\n      readMethod = dataSlice.readInt16;\n      break;\n\n    case fieldTypes.LONG:\n    case fieldTypes.IFD:\n      values = new Uint32Array(count);\n      readMethod = dataSlice.readUint32;\n      break;\n\n    case fieldTypes.SLONG:\n      values = new Int32Array(count);\n      readMethod = dataSlice.readInt32;\n      break;\n\n    case fieldTypes.LONG8:\n    case fieldTypes.IFD8:\n      values = new Array(count);\n      readMethod = dataSlice.readUint64;\n      break;\n\n    case fieldTypes.SLONG8:\n      values = new Array(count);\n      readMethod = dataSlice.readInt64;\n      break;\n\n    case fieldTypes.RATIONAL:\n      values = new Uint32Array(count * 2);\n      readMethod = dataSlice.readUint32;\n      break;\n\n    case fieldTypes.SRATIONAL:\n      values = new Int32Array(count * 2);\n      readMethod = dataSlice.readInt32;\n      break;\n\n    case fieldTypes.FLOAT:\n      values = new Float32Array(count);\n      readMethod = dataSlice.readFloat32;\n      break;\n\n    case fieldTypes.DOUBLE:\n      values = new Float64Array(count);\n      readMethod = dataSlice.readFloat64;\n      break;\n\n    default:\n      throw new RangeError(\"Invalid field type: \".concat(fieldType));\n  } // normal fields\n\n\n  if (!(fieldType === fieldTypes.RATIONAL || fieldType === fieldTypes.SRATIONAL)) {\n    for (var i = 0; i < count; ++i) {\n      values[i] = readMethod.call(dataSlice, offset + i * fieldTypeLength);\n    }\n  } else {\n    // RATIONAL or SRATIONAL\n    for (var _i = 0; _i < count; _i += 2) {\n      values[_i] = readMethod.call(dataSlice, offset + _i * fieldTypeLength);\n      values[_i + 1] = readMethod.call(dataSlice, offset + (_i * fieldTypeLength + 4));\n    }\n  }\n\n  if (fieldType === fieldTypes.ASCII) {\n    return new TextDecoder('utf-8').decode(values);\n  }\n\n  return values;\n}\n/**\n * Data class to store the parsed file directory, geo key directory and\n * offset to the next IFD\n */\n\n\nvar ImageFileDirectory = /*#__PURE__*/_createClass(function ImageFileDirectory(fileDirectory, geoKeyDirectory, nextIFDByteOffset) {\n  _classCallCheck(this, ImageFileDirectory);\n\n  this.fileDirectory = fileDirectory;\n  this.geoKeyDirectory = geoKeyDirectory;\n  this.nextIFDByteOffset = nextIFDByteOffset;\n});\n/**\n * Error class for cases when an IFD index was requested, that does not exist\n * in the file.\n */\n\n\nvar GeoTIFFImageIndexError = /*#__PURE__*/function (_Error) {\n  _inherits(GeoTIFFImageIndexError, _Error);\n\n  var _super = _createSuper(GeoTIFFImageIndexError);\n\n  function GeoTIFFImageIndexError(index) {\n    var _this;\n\n    _classCallCheck(this, GeoTIFFImageIndexError);\n\n    _this = _super.call(this, \"No image at index \".concat(index));\n    _this.index = index;\n    return _this;\n  }\n\n  return _createClass(GeoTIFFImageIndexError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nvar GeoTIFFBase = /*#__PURE__*/function () {\n  function GeoTIFFBase() {\n    _classCallCheck(this, GeoTIFFBase);\n  }\n\n  _createClass(GeoTIFFBase, [{\n    key: \"readRasters\",\n    value:\n    /**\n     * (experimental) Reads raster data from the best fitting image. This function uses\n     * the image with the lowest resolution that is still a higher resolution than the\n     * requested resolution.\n     * When specified, the `bbox` option is translated to the `window` option and the\n     * `resX` and `resY` to `width` and `height` respectively.\n     * Then, the [readRasters]{@link GeoTIFFImage#readRasters} method of the selected\n     * image is called and the result returned.\n     * @see GeoTIFFImage.readRasters\n     * @param {import('./geotiffimage').ReadRasterOptions} [options={}] optional parameters\n     * @returns {Promise<ReadRasterResult>} the decoded array(s), with `height` and `width`, as a promise\n     */\n    function () {\n      var _readRasters = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var options,\n            imageWindow,\n            width,\n            height,\n            resX,\n            resY,\n            bbox,\n            firstImage,\n            usedImage,\n            imageCount,\n            imgBBox,\n            _firstImage$getOrigin,\n            _firstImage$getOrigin2,\n            oX,\n            oY,\n            _firstImage$getResolu,\n            _firstImage$getResolu2,\n            rX,\n            rY,\n            usedBBox,\n            allImages,\n            i,\n            image,\n            _image$fileDirectory,\n            subfileType,\n            newSubfileType,\n            _i2,\n            _image,\n            imgResX,\n            imgResY,\n            wnd,\n            _firstImage$getOrigin3,\n            _firstImage$getOrigin4,\n            _oX,\n            _oY,\n            _usedImage$getResolut,\n            _usedImage$getResolut2,\n            imageResX,\n            imageResY,\n            _args = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n                imageWindow = options.window, width = options.width, height = options.height;\n                resX = options.resX, resY = options.resY, bbox = options.bbox;\n                _context.next = 5;\n                return this.getImage();\n\n              case 5:\n                firstImage = _context.sent;\n                usedImage = firstImage;\n                _context.next = 9;\n                return this.getImageCount();\n\n              case 9:\n                imageCount = _context.sent;\n                imgBBox = firstImage.getBoundingBox();\n\n                if (!(imageWindow && bbox)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                throw new Error('Both \"bbox\" and \"window\" passed.');\n\n              case 13:\n                if (!(width || height)) {\n                  _context.next = 24;\n                  break;\n                }\n\n                // if we have an image window (pixel coordinates), transform it to a BBox\n                // using the origin/resolution of the first image.\n                if (imageWindow) {\n                  _firstImage$getOrigin = firstImage.getOrigin(), _firstImage$getOrigin2 = _slicedToArray(_firstImage$getOrigin, 2), oX = _firstImage$getOrigin2[0], oY = _firstImage$getOrigin2[1];\n                  _firstImage$getResolu = firstImage.getResolution(), _firstImage$getResolu2 = _slicedToArray(_firstImage$getResolu, 2), rX = _firstImage$getResolu2[0], rY = _firstImage$getResolu2[1];\n                  bbox = [oX + imageWindow[0] * rX, oY + imageWindow[1] * rY, oX + imageWindow[2] * rX, oY + imageWindow[3] * rY];\n                } // if we have a bbox (or calculated one)\n\n\n                usedBBox = bbox || imgBBox;\n\n                if (!width) {\n                  _context.next = 20;\n                  break;\n                }\n\n                if (!resX) {\n                  _context.next = 19;\n                  break;\n                }\n\n                throw new Error('Both width and resX passed');\n\n              case 19:\n                resX = (usedBBox[2] - usedBBox[0]) / width;\n\n              case 20:\n                if (!height) {\n                  _context.next = 24;\n                  break;\n                }\n\n                if (!resY) {\n                  _context.next = 23;\n                  break;\n                }\n\n                throw new Error('Both width and resY passed');\n\n              case 23:\n                resY = (usedBBox[3] - usedBBox[1]) / height;\n\n              case 24:\n                if (!(resX || resY)) {\n                  _context.next = 48;\n                  break;\n                }\n\n                allImages = [];\n                i = 0;\n\n              case 27:\n                if (!(i < imageCount)) {\n                  _context.next = 36;\n                  break;\n                }\n\n                _context.next = 30;\n                return this.getImage(i);\n\n              case 30:\n                image = _context.sent;\n                _image$fileDirectory = image.fileDirectory, subfileType = _image$fileDirectory.SubfileType, newSubfileType = _image$fileDirectory.NewSubfileType;\n\n                if (i === 0 || subfileType === 2 || newSubfileType & 1) {\n                  allImages.push(image);\n                }\n\n              case 33:\n                ++i;\n                _context.next = 27;\n                break;\n\n              case 36:\n                allImages.sort(function (a, b) {\n                  return a.getWidth() - b.getWidth();\n                });\n                _i2 = 0;\n\n              case 38:\n                if (!(_i2 < allImages.length)) {\n                  _context.next = 48;\n                  break;\n                }\n\n                _image = allImages[_i2];\n                imgResX = (imgBBox[2] - imgBBox[0]) / _image.getWidth();\n                imgResY = (imgBBox[3] - imgBBox[1]) / _image.getHeight();\n                usedImage = _image;\n\n                if (!(resX && resX > imgResX || resY && resY > imgResY)) {\n                  _context.next = 45;\n                  break;\n                }\n\n                return _context.abrupt(\"break\", 48);\n\n              case 45:\n                ++_i2;\n                _context.next = 38;\n                break;\n\n              case 48:\n                wnd = imageWindow;\n\n                if (bbox) {\n                  _firstImage$getOrigin3 = firstImage.getOrigin(), _firstImage$getOrigin4 = _slicedToArray(_firstImage$getOrigin3, 2), _oX = _firstImage$getOrigin4[0], _oY = _firstImage$getOrigin4[1];\n                  _usedImage$getResolut = usedImage.getResolution(firstImage), _usedImage$getResolut2 = _slicedToArray(_usedImage$getResolut, 2), imageResX = _usedImage$getResolut2[0], imageResY = _usedImage$getResolut2[1];\n                  wnd = [Math.round((bbox[0] - _oX) / imageResX), Math.round((bbox[1] - _oY) / imageResY), Math.round((bbox[2] - _oX) / imageResX), Math.round((bbox[3] - _oY) / imageResY)];\n                  wnd = [Math.min(wnd[0], wnd[2]), Math.min(wnd[1], wnd[3]), Math.max(wnd[0], wnd[2]), Math.max(wnd[1], wnd[3])];\n                }\n\n                return _context.abrupt(\"return\", usedImage.readRasters(_objectSpread(_objectSpread({}, options), {}, {\n                  window: wnd\n                })));\n\n              case 51:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function readRasters() {\n        return _readRasters.apply(this, arguments);\n      }\n\n      return readRasters;\n    }()\n  }]);\n\n  return GeoTIFFBase;\n}();\n/**\n * @typedef {Object} GeoTIFFOptions\n * @property {boolean} [cache=false] whether or not decoded tiles shall be cached.\n */\n\n/**\n * The abstraction for a whole GeoTIFF file.\n * @augments GeoTIFFBase\n */\n\n\nvar GeoTIFF = /*#__PURE__*/function (_GeoTIFFBase) {\n  _inherits(GeoTIFF, _GeoTIFFBase);\n\n  var _super2 = _createSuper(GeoTIFF);\n\n  /**\n   * @constructor\n   * @param {*} source The datasource to read from.\n   * @param {boolean} littleEndian Whether the image uses little endian.\n   * @param {boolean} bigTiff Whether the image uses bigTIFF conventions.\n   * @param {number} firstIFDOffset The numeric byte-offset from the start of the image\n   *                                to the first IFD.\n   * @param {GeoTIFFOptions} [options] further options.\n   */\n  function GeoTIFF(source, littleEndian, bigTiff, firstIFDOffset) {\n    var _this2;\n\n    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n    _classCallCheck(this, GeoTIFF);\n\n    _this2 = _super2.call(this);\n    _this2.source = source;\n    _this2.littleEndian = littleEndian;\n    _this2.bigTiff = bigTiff;\n    _this2.firstIFDOffset = firstIFDOffset;\n    _this2.cache = options.cache || false;\n    _this2.ifdRequests = [];\n    _this2.ghostValues = null;\n    return _this2;\n  }\n\n  _createClass(GeoTIFF, [{\n    key: \"getSlice\",\n    value: function () {\n      var _getSlice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(offset, size) {\n        var fallbackSize;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                fallbackSize = this.bigTiff ? 4048 : 1024;\n                _context2.t0 = DataSlice;\n                _context2.next = 4;\n                return this.source.fetch([{\n                  offset: offset,\n                  length: typeof size !== 'undefined' ? size : fallbackSize\n                }]);\n\n              case 4:\n                _context2.t1 = _context2.sent[0];\n                _context2.t2 = offset;\n                _context2.t3 = this.littleEndian;\n                _context2.t4 = this.bigTiff;\n                return _context2.abrupt(\"return\", new _context2.t0(_context2.t1, _context2.t2, _context2.t3, _context2.t4));\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getSlice(_x, _x2) {\n        return _getSlice.apply(this, arguments);\n      }\n\n      return getSlice;\n    }()\n    /**\n     * Instructs to parse an image file directory at the given file offset.\n     * As there is no way to ensure that a location is indeed the start of an IFD,\n     * this function must be called with caution (e.g only using the IFD offsets from\n     * the headers or other IFDs).\n     * @param {number} offset the offset to parse the IFD at\n     * @returns {Promise<ImageFileDirectory>} the parsed IFD\n     */\n\n  }, {\n    key: \"parseFileDirectoryAt\",\n    value: function () {\n      var _parseFileDirectoryAt = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(offset) {\n        var entrySize, offsetSize, dataSlice, numDirEntries, byteSize, fileDirectory, i, entryCount, fieldTag, fieldType, typeCount, fieldValues, value, fieldTypeLength, valueOffset, actualOffset, length, fieldDataSlice, geoKeyDirectory, nextIFDByteOffset;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                entrySize = this.bigTiff ? 20 : 12;\n                offsetSize = this.bigTiff ? 8 : 2;\n                _context3.next = 4;\n                return this.getSlice(offset);\n\n              case 4:\n                dataSlice = _context3.sent;\n                numDirEntries = this.bigTiff ? dataSlice.readUint64(offset) : dataSlice.readUint16(offset); // if the slice does not cover the whole IFD, request a bigger slice, where the\n                // whole IFD fits: num of entries + n x tag length + offset to next IFD\n\n                byteSize = numDirEntries * entrySize + (this.bigTiff ? 16 : 6);\n\n                if (dataSlice.covers(offset, byteSize)) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                _context3.next = 10;\n                return this.getSlice(offset, byteSize);\n\n              case 10:\n                dataSlice = _context3.sent;\n\n              case 11:\n                fileDirectory = {}; // loop over the IFD and create a file directory object\n\n                i = offset + (this.bigTiff ? 8 : 2);\n                entryCount = 0;\n\n              case 14:\n                if (!(entryCount < numDirEntries)) {\n                  _context3.next = 41;\n                  break;\n                }\n\n                fieldTag = dataSlice.readUint16(i);\n                fieldType = dataSlice.readUint16(i + 2);\n                typeCount = this.bigTiff ? dataSlice.readUint64(i + 4) : dataSlice.readUint32(i + 4);\n                fieldValues = void 0;\n                value = void 0;\n                fieldTypeLength = getFieldTypeLength(fieldType);\n                valueOffset = i + (this.bigTiff ? 12 : 8); // check whether the value is directly encoded in the tag or refers to a\n                // different external byte range\n\n                if (!(fieldTypeLength * typeCount <= (this.bigTiff ? 8 : 4))) {\n                  _context3.next = 26;\n                  break;\n                }\n\n                fieldValues = getValues(dataSlice, fieldType, typeCount, valueOffset);\n                _context3.next = 36;\n                break;\n\n              case 26:\n                // resolve the reference to the actual byte range\n                actualOffset = dataSlice.readOffset(valueOffset);\n                length = getFieldTypeLength(fieldType) * typeCount; // check, whether we actually cover the referenced byte range; if not,\n                // request a new slice of bytes to read from it\n\n                if (!dataSlice.covers(actualOffset, length)) {\n                  _context3.next = 32;\n                  break;\n                }\n\n                fieldValues = getValues(dataSlice, fieldType, typeCount, actualOffset);\n                _context3.next = 36;\n                break;\n\n              case 32:\n                _context3.next = 34;\n                return this.getSlice(actualOffset, length);\n\n              case 34:\n                fieldDataSlice = _context3.sent;\n                fieldValues = getValues(fieldDataSlice, fieldType, typeCount, actualOffset);\n\n              case 36:\n                // unpack single values from the array\n                if (typeCount === 1 && arrayFields.indexOf(fieldTag) === -1 && !(fieldType === fieldTypes.RATIONAL || fieldType === fieldTypes.SRATIONAL)) {\n                  value = fieldValues[0];\n                } else {\n                  value = fieldValues;\n                } // write the tags value to the file directly\n\n\n                fileDirectory[fieldTagNames[fieldTag]] = value;\n\n              case 38:\n                i += entrySize, ++entryCount;\n                _context3.next = 14;\n                break;\n\n              case 41:\n                geoKeyDirectory = parseGeoKeyDirectory(fileDirectory);\n                nextIFDByteOffset = dataSlice.readOffset(offset + offsetSize + entrySize * numDirEntries);\n                return _context3.abrupt(\"return\", new ImageFileDirectory(fileDirectory, geoKeyDirectory, nextIFDByteOffset));\n\n              case 44:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function parseFileDirectoryAt(_x3) {\n        return _parseFileDirectoryAt.apply(this, arguments);\n      }\n\n      return parseFileDirectoryAt;\n    }()\n  }, {\n    key: \"requestIFD\",\n    value: function () {\n      var _requestIFD = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(index) {\n        var _this3 = this;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (!this.ifdRequests[index]) {\n                  _context5.next = 4;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", this.ifdRequests[index]);\n\n              case 4:\n                if (!(index === 0)) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                // special case for index 0\n                this.ifdRequests[index] = this.parseFileDirectoryAt(this.firstIFDOffset);\n                return _context5.abrupt(\"return\", this.ifdRequests[index]);\n\n              case 9:\n                if (this.ifdRequests[index - 1]) {\n                  _context5.next = 19;\n                  break;\n                }\n\n                _context5.prev = 10;\n                this.ifdRequests[index - 1] = this.requestIFD(index - 1);\n                _context5.next = 19;\n                break;\n\n              case 14:\n                _context5.prev = 14;\n                _context5.t0 = _context5[\"catch\"](10);\n\n                if (!(_context5.t0 instanceof GeoTIFFImageIndexError)) {\n                  _context5.next = 18;\n                  break;\n                }\n\n                throw new GeoTIFFImageIndexError(index);\n\n              case 18:\n                throw _context5.t0;\n\n              case 19:\n                // if the previous IFD was loaded, we can finally fetch the one we are interested in.\n                // we need to wrap this in an IIFE, otherwise this.ifdRequests[index] would be delayed\n                this.ifdRequests[index] = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n                  var previousIfd;\n                  return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                    while (1) {\n                      switch (_context4.prev = _context4.next) {\n                        case 0:\n                          _context4.next = 2;\n                          return _this3.ifdRequests[index - 1];\n\n                        case 2:\n                          previousIfd = _context4.sent;\n\n                          if (!(previousIfd.nextIFDByteOffset === 0)) {\n                            _context4.next = 5;\n                            break;\n                          }\n\n                          throw new GeoTIFFImageIndexError(index);\n\n                        case 5:\n                          return _context4.abrupt(\"return\", _this3.parseFileDirectoryAt(previousIfd.nextIFDByteOffset));\n\n                        case 6:\n                        case \"end\":\n                          return _context4.stop();\n                      }\n                    }\n                  }, _callee4);\n                }))();\n                return _context5.abrupt(\"return\", this.ifdRequests[index]);\n\n              case 21:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[10, 14]]);\n      }));\n\n      function requestIFD(_x4) {\n        return _requestIFD.apply(this, arguments);\n      }\n\n      return requestIFD;\n    }()\n    /**\n     * Get the n-th internal subfile of an image. By default, the first is returned.\n     *\n     * @param {number} [index=0] the index of the image to return.\n     * @returns {Promise<GeoTIFFImage>} the image at the given index\n     */\n\n  }, {\n    key: \"getImage\",\n    value: function () {\n      var _getImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var index,\n            ifd,\n            _args6 = arguments;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                index = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : 0;\n                _context6.next = 3;\n                return this.requestIFD(index);\n\n              case 3:\n                ifd = _context6.sent;\n                return _context6.abrupt(\"return\", new GeoTIFFImage(ifd.fileDirectory, ifd.geoKeyDirectory, this.dataView, this.littleEndian, this.cache, this.source));\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function getImage() {\n        return _getImage.apply(this, arguments);\n      }\n\n      return getImage;\n    }()\n    /**\n     * Returns the count of the internal subfiles.\n     *\n     * @returns {Promise<number>} the number of internal subfile images\n     */\n\n  }, {\n    key: \"getImageCount\",\n    value: function () {\n      var _getImageCount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n        var index, hasNext;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                index = 0; // loop until we run out of IFDs\n\n                hasNext = true;\n\n              case 2:\n                if (!hasNext) {\n                  _context7.next = 18;\n                  break;\n                }\n\n                _context7.prev = 3;\n                _context7.next = 6;\n                return this.requestIFD(index);\n\n              case 6:\n                ++index;\n                _context7.next = 16;\n                break;\n\n              case 9:\n                _context7.prev = 9;\n                _context7.t0 = _context7[\"catch\"](3);\n\n                if (!(_context7.t0 instanceof GeoTIFFImageIndexError)) {\n                  _context7.next = 15;\n                  break;\n                }\n\n                hasNext = false;\n                _context7.next = 16;\n                break;\n\n              case 15:\n                throw _context7.t0;\n\n              case 16:\n                _context7.next = 2;\n                break;\n\n              case 18:\n                return _context7.abrupt(\"return\", index);\n\n              case 19:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[3, 9]]);\n      }));\n\n      function getImageCount() {\n        return _getImageCount.apply(this, arguments);\n      }\n\n      return getImageCount;\n    }()\n    /**\n     * Get the values of the COG ghost area as a parsed map.\n     * See https://gdal.org/drivers/raster/cog.html#header-ghost-area for reference\n     * @returns {Promise<Object>} the parsed ghost area or null, if no such area was found\n     */\n\n  }, {\n    key: \"getGhostValues\",\n    value: function () {\n      var _getGhostValues = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n        var _this4 = this;\n\n        var offset, detectionString, heuristicAreaSize, slice, valuesString, firstLine, metadataSize, fullString;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                offset = this.bigTiff ? 16 : 8;\n\n                if (!this.ghostValues) {\n                  _context8.next = 3;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", this.ghostValues);\n\n              case 3:\n                detectionString = 'GDAL_STRUCTURAL_METADATA_SIZE=';\n                heuristicAreaSize = detectionString.length + 100;\n                _context8.next = 7;\n                return this.getSlice(offset, heuristicAreaSize);\n\n              case 7:\n                slice = _context8.sent;\n\n                if (!(detectionString === getValues(slice, fieldTypes.ASCII, detectionString.length, offset))) {\n                  _context8.next = 19;\n                  break;\n                }\n\n                valuesString = getValues(slice, fieldTypes.ASCII, heuristicAreaSize, offset);\n                firstLine = valuesString.split('\\n')[0];\n                metadataSize = Number(firstLine.split('=')[1].split(' ')[0]) + firstLine.length;\n\n                if (!(metadataSize > heuristicAreaSize)) {\n                  _context8.next = 16;\n                  break;\n                }\n\n                _context8.next = 15;\n                return this.getSlice(offset, metadataSize);\n\n              case 15:\n                slice = _context8.sent;\n\n              case 16:\n                fullString = getValues(slice, fieldTypes.ASCII, metadataSize, offset);\n                this.ghostValues = {};\n                fullString.split('\\n').filter(function (line) {\n                  return line.length > 0;\n                }).map(function (line) {\n                  return line.split('=');\n                }).forEach(function (_ref2) {\n                  var _ref3 = _slicedToArray(_ref2, 2),\n                      key = _ref3[0],\n                      value = _ref3[1];\n\n                  _this4.ghostValues[key] = value;\n                });\n\n              case 19:\n                return _context8.abrupt(\"return\", this.ghostValues);\n\n              case 20:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function getGhostValues() {\n        return _getGhostValues.apply(this, arguments);\n      }\n\n      return getGhostValues;\n    }()\n    /**\n     * Parse a (Geo)TIFF file from the given source.\n     *\n     * @param {*} source The source of data to parse from.\n     * @param {GeoTIFFOptions} [options] Additional options.\n     * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n     *                               to be aborted\n     */\n\n  }, {\n    key: \"close\",\n    value:\n    /**\n     * Closes the underlying file buffer\n     * N.B. After the GeoTIFF has been completely processed it needs\n     * to be closed but only if it has been constructed from a file.\n     */\n    function close() {\n      if (typeof this.source.close === 'function') {\n        return this.source.close();\n      }\n\n      return false;\n    }\n  }], [{\n    key: \"fromSource\",\n    value: function () {\n      var _fromSource = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(source, options, signal) {\n        var headerData, dataView, BOM, littleEndian, magicNumber, bigTiff, offsetByteSize, firstIFDOffset;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return source.fetch([{\n                  offset: 0,\n                  length: 1024\n                }], signal);\n\n              case 2:\n                headerData = _context9.sent[0];\n                dataView = new DataView64(headerData);\n                BOM = dataView.getUint16(0, 0);\n\n                if (!(BOM === 0x4949)) {\n                  _context9.next = 9;\n                  break;\n                }\n\n                littleEndian = true;\n                _context9.next = 14;\n                break;\n\n              case 9:\n                if (!(BOM === 0x4D4D)) {\n                  _context9.next = 13;\n                  break;\n                }\n\n                littleEndian = false;\n                _context9.next = 14;\n                break;\n\n              case 13:\n                throw new TypeError('Invalid byte order value.');\n\n              case 14:\n                magicNumber = dataView.getUint16(2, littleEndian);\n\n                if (!(magicNumber === 42)) {\n                  _context9.next = 19;\n                  break;\n                }\n\n                bigTiff = false;\n                _context9.next = 27;\n                break;\n\n              case 19:\n                if (!(magicNumber === 43)) {\n                  _context9.next = 26;\n                  break;\n                }\n\n                bigTiff = true;\n                offsetByteSize = dataView.getUint16(4, littleEndian);\n\n                if (!(offsetByteSize !== 8)) {\n                  _context9.next = 24;\n                  break;\n                }\n\n                throw new Error('Unsupported offset byte-size.');\n\n              case 24:\n                _context9.next = 27;\n                break;\n\n              case 26:\n                throw new TypeError('Invalid magic number.');\n\n              case 27:\n                firstIFDOffset = bigTiff ? dataView.getUint64(8, littleEndian) : dataView.getUint32(4, littleEndian);\n                return _context9.abrupt(\"return\", new GeoTIFF(source, littleEndian, bigTiff, firstIFDOffset, options));\n\n              case 29:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      function fromSource(_x5, _x6, _x7) {\n        return _fromSource.apply(this, arguments);\n      }\n\n      return fromSource;\n    }()\n  }]);\n\n  return GeoTIFF;\n}(GeoTIFFBase);\n\nexport { GeoTIFF };\nexport default GeoTIFF;\n/**\n * Wrapper for GeoTIFF files that have external overviews.\n * @augments GeoTIFFBase\n */\n\nvar MultiGeoTIFF = /*#__PURE__*/function (_GeoTIFFBase2) {\n  _inherits(MultiGeoTIFF, _GeoTIFFBase2);\n\n  var _super3 = _createSuper(MultiGeoTIFF);\n\n  /**\n   * Construct a new MultiGeoTIFF from a main and several overview files.\n   * @param {GeoTIFF} mainFile The main GeoTIFF file.\n   * @param {GeoTIFF[]} overviewFiles An array of overview files.\n   */\n  function MultiGeoTIFF(mainFile, overviewFiles) {\n    var _this5;\n\n    _classCallCheck(this, MultiGeoTIFF);\n\n    _this5 = _super3.call(this);\n    _this5.mainFile = mainFile;\n    _this5.overviewFiles = overviewFiles;\n    _this5.imageFiles = [mainFile].concat(overviewFiles);\n    _this5.fileDirectoriesPerFile = null;\n    _this5.fileDirectoriesPerFileParsing = null;\n    _this5.imageCount = null;\n    return _this5;\n  }\n\n  _createClass(MultiGeoTIFF, [{\n    key: \"parseFileDirectoriesPerFile\",\n    value: function () {\n      var _parseFileDirectoriesPerFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n        var requests;\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                requests = [this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(function (file) {\n                  return file.parseFileDirectoryAt(file.firstIFDOffset);\n                }));\n                _context10.next = 3;\n                return Promise.all(requests);\n\n              case 3:\n                this.fileDirectoriesPerFile = _context10.sent;\n                return _context10.abrupt(\"return\", this.fileDirectoriesPerFile);\n\n              case 5:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function parseFileDirectoriesPerFile() {\n        return _parseFileDirectoriesPerFile.apply(this, arguments);\n      }\n\n      return parseFileDirectoriesPerFile;\n    }()\n    /**\n     * Get the n-th internal subfile of an image. By default, the first is returned.\n     *\n     * @param {number} [index=0] the index of the image to return.\n     * @returns {Promise<GeoTIFFImage>} the image at the given index\n     */\n\n  }, {\n    key: \"getImage\",\n    value: function () {\n      var _getImage2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n        var index,\n            visited,\n            relativeIndex,\n            i,\n            imageFile,\n            ii,\n            ifd,\n            _args11 = arguments;\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                index = _args11.length > 0 && _args11[0] !== undefined ? _args11[0] : 0;\n                _context11.next = 3;\n                return this.getImageCount();\n\n              case 3:\n                _context11.next = 5;\n                return this.parseFileDirectoriesPerFile();\n\n              case 5:\n                visited = 0;\n                relativeIndex = 0;\n                i = 0;\n\n              case 8:\n                if (!(i < this.imageFiles.length)) {\n                  _context11.next = 26;\n                  break;\n                }\n\n                imageFile = this.imageFiles[i];\n                ii = 0;\n\n              case 11:\n                if (!(ii < this.imageCounts[i])) {\n                  _context11.next = 22;\n                  break;\n                }\n\n                if (!(index === visited)) {\n                  _context11.next = 17;\n                  break;\n                }\n\n                _context11.next = 15;\n                return imageFile.requestIFD(relativeIndex);\n\n              case 15:\n                ifd = _context11.sent;\n                return _context11.abrupt(\"return\", new GeoTIFFImage(ifd.fileDirectory, ifd.geoKeyDirectory, imageFile.dataView, imageFile.littleEndian, imageFile.cache, imageFile.source));\n\n              case 17:\n                visited++;\n                relativeIndex++;\n\n              case 19:\n                ii++;\n                _context11.next = 11;\n                break;\n\n              case 22:\n                relativeIndex = 0;\n\n              case 23:\n                i++;\n                _context11.next = 8;\n                break;\n\n              case 26:\n                throw new RangeError('Invalid image index');\n\n              case 27:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function getImage() {\n        return _getImage2.apply(this, arguments);\n      }\n\n      return getImage;\n    }()\n    /**\n     * Returns the count of the internal subfiles.\n     *\n     * @returns {Promise<number>} the number of internal subfile images\n     */\n\n  }, {\n    key: \"getImageCount\",\n    value: function () {\n      var _getImageCount2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n        var requests;\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                if (!(this.imageCount !== null)) {\n                  _context12.next = 2;\n                  break;\n                }\n\n                return _context12.abrupt(\"return\", this.imageCount);\n\n              case 2:\n                requests = [this.mainFile.getImageCount()].concat(this.overviewFiles.map(function (file) {\n                  return file.getImageCount();\n                }));\n                _context12.next = 5;\n                return Promise.all(requests);\n\n              case 5:\n                this.imageCounts = _context12.sent;\n                this.imageCount = this.imageCounts.reduce(function (count, ifds) {\n                  return count + ifds;\n                }, 0);\n                return _context12.abrupt(\"return\", this.imageCount);\n\n              case 8:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function getImageCount() {\n        return _getImageCount2.apply(this, arguments);\n      }\n\n      return getImageCount;\n    }()\n  }]);\n\n  return MultiGeoTIFF;\n}(GeoTIFFBase);\n\nexport { MultiGeoTIFF };\n/**\n * Creates a new GeoTIFF from a remote URL.\n * @param {string} url The URL to access the image from\n * @param {object} [options] Additional options to pass to the source.\n *                           See {@link makeRemoteSource} for details.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise<GeoTIFF>} The resulting GeoTIFF file.\n */\n\nexport function fromUrl(_x8) {\n  return _fromUrl.apply(this, arguments);\n}\n/**\n * Construct a new GeoTIFF from an\n * [ArrayBuffer]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer}.\n * @param {ArrayBuffer} arrayBuffer The data to read the file from.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise<GeoTIFF>} The resulting GeoTIFF file.\n */\n\nfunction _fromUrl() {\n  _fromUrl = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(url) {\n    var options,\n        signal,\n        _args13 = arguments;\n    return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            options = _args13.length > 1 && _args13[1] !== undefined ? _args13[1] : {};\n            signal = _args13.length > 2 ? _args13[2] : undefined;\n            return _context13.abrupt(\"return\", GeoTIFF.fromSource(makeRemoteSource(url, options), signal));\n\n          case 3:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, _callee13);\n  }));\n  return _fromUrl.apply(this, arguments);\n}\n\nexport function fromArrayBuffer(_x9, _x10) {\n  return _fromArrayBuffer.apply(this, arguments);\n}\n/**\n * Construct a GeoTIFF from a local file path. This uses the node\n * [filesystem API]{@link https://nodejs.org/api/fs.html} and is\n * not available on browsers.\n *\n * N.B. After the GeoTIFF has been completely processed it needs\n * to be closed but only if it has been constructed from a file.\n * @param {string} path The file path to read from.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise<GeoTIFF>} The resulting GeoTIFF file.\n */\n\nfunction _fromArrayBuffer() {\n  _fromArrayBuffer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14(arrayBuffer, signal) {\n    return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n      while (1) {\n        switch (_context14.prev = _context14.next) {\n          case 0:\n            return _context14.abrupt(\"return\", GeoTIFF.fromSource(makeBufferSource(arrayBuffer), signal));\n\n          case 1:\n          case \"end\":\n            return _context14.stop();\n        }\n      }\n    }, _callee14);\n  }));\n  return _fromArrayBuffer.apply(this, arguments);\n}\n\nexport function fromFile(_x11, _x12) {\n  return _fromFile.apply(this, arguments);\n}\n/**\n * Construct a GeoTIFF from an HTML\n * [Blob]{@link https://developer.mozilla.org/en-US/docs/Web/API/Blob} or\n * [File]{@link https://developer.mozilla.org/en-US/docs/Web/API/File}\n * object.\n * @param {Blob|File} blob The Blob or File object to read from.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise<GeoTIFF>} The resulting GeoTIFF file.\n */\n\nfunction _fromFile() {\n  _fromFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15(path, signal) {\n    return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            return _context15.abrupt(\"return\", GeoTIFF.fromSource(makeFileSource(path), signal));\n\n          case 1:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, _callee15);\n  }));\n  return _fromFile.apply(this, arguments);\n}\n\nexport function fromBlob(_x13, _x14) {\n  return _fromBlob.apply(this, arguments);\n}\n/**\n * Construct a MultiGeoTIFF from the given URLs.\n * @param {string} mainUrl The URL for the main file.\n * @param {string[]} overviewUrls An array of URLs for the overview images.\n * @param {Object} [options] Additional options to pass to the source.\n *                           See [makeRemoteSource]{@link module:source.makeRemoteSource}\n *                           for details.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise<MultiGeoTIFF>} The resulting MultiGeoTIFF file.\n */\n\nfunction _fromBlob() {\n  _fromBlob = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16(blob, signal) {\n    return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n      while (1) {\n        switch (_context16.prev = _context16.next) {\n          case 0:\n            return _context16.abrupt(\"return\", GeoTIFF.fromSource(makeFileReaderSource(blob), signal));\n\n          case 1:\n          case \"end\":\n            return _context16.stop();\n        }\n      }\n    }, _callee16);\n  }));\n  return _fromBlob.apply(this, arguments);\n}\n\nexport function fromUrls(_x15) {\n  return _fromUrls.apply(this, arguments);\n}\n/**\n * Main creating function for GeoTIFF files.\n * @param {(Array)} array of pixel values\n * @returns {metadata} metadata\n */\n\nfunction _fromUrls() {\n  _fromUrls = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17(mainUrl) {\n    var overviewUrls,\n        options,\n        signal,\n        mainFile,\n        overviewFiles,\n        _args17 = arguments;\n    return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n      while (1) {\n        switch (_context17.prev = _context17.next) {\n          case 0:\n            overviewUrls = _args17.length > 1 && _args17[1] !== undefined ? _args17[1] : [];\n            options = _args17.length > 2 && _args17[2] !== undefined ? _args17[2] : {};\n            signal = _args17.length > 3 ? _args17[3] : undefined;\n            _context17.next = 5;\n            return GeoTIFF.fromSource(makeRemoteSource(mainUrl, options), signal);\n\n          case 5:\n            mainFile = _context17.sent;\n            _context17.next = 8;\n            return Promise.all(overviewUrls.map(function (url) {\n              return GeoTIFF.fromSource(makeRemoteSource(url, options));\n            }));\n\n          case 8:\n            overviewFiles = _context17.sent;\n            return _context17.abrupt(\"return\", new MultiGeoTIFF(mainFile, overviewFiles));\n\n          case 10:\n          case \"end\":\n            return _context17.stop();\n        }\n      }\n    }, _callee17);\n  }));\n  return _fromUrls.apply(this, arguments);\n}\n\nexport function writeArrayBuffer(values, metadata) {\n  return writeGeotiff(values, metadata);\n}\nexport { Pool };\nexport { GeoTIFFImage };","import * as React from \"react\";\nimport { useForm, SubmitHandler, Controller } from \"react-hook-form\";\nimport { Helmet } from \"react-helmet-async\";\nimport {\n  Stack,\n  Button,\n  Container,\n  FormControl,\n  FormHelperText,\n  Box,\n  Grid,\n  Table,\n  TableBody,\n  TableRow,\n  TableCell,\n  TextField,\n  Select,\n  InputLabel,\n  MenuItem,\n  Typography,\n} from \"@mui/material\";\n\nimport {\n  fromBlob,\n  TypedArrayWithDimensions,\n  TypedArray,\n  GeoTIFFImage,\n} from \"geotiff\";\n\nimport cv, { Point } from \"opencv-ts\";\n\nfunction getDataRange(\n  image: GeoTIFFImage\n): [number, number, number | null] | null {\n  /*\n    respect\n        https://github.com/openlayers/openlayers/blob/v6.15.0/src/ol/source/GeoTIFF.js\n        https://github.com/geotiffjs/geotiff.js/blob/v2.0.5/src/geotiffimage.js#L44\n  */\n  const format = image.getSampleFormat();\n  const bitsPerSample = image.getBitsPerSample();\n\n  switch (format) {\n    case 1: // unsigned integer data\n      if (bitsPerSample <= 8) {\n        return [0, 255, cv.CV_8UC1];\n      } else if (bitsPerSample <= 16) {\n        return [0, 65535, cv.CV_16UC1];\n      } else if (bitsPerSample <= 32) {\n        return [0, 4294967295, null];\n      }\n      break;\n    case 2: // twos complement signed integer data\n      if (bitsPerSample === 8) {\n        return [-128, 127, cv.CV_8SC1];\n      } else if (bitsPerSample === 16) {\n        return [-32768, 32767, cv.CV_16UC1];\n      } else if (bitsPerSample === 32) {\n        return [-2147483648, 2147483647, cv.CV_32SC1];\n      }\n      break;\n    case 3: // floating point data\n      switch (bitsPerSample) {\n        case 16:\n        case 32:\n          return [-3.4e38, 3.4e38, cv.CV_32FC1];\n        case 64:\n          return [-Number.MAX_VALUE, Number.MAX_VALUE, cv.CV_64FC1];\n        default:\n          break;\n      }\n      break;\n    default:\n      break;\n  }\n  return null;\n}\n\nfunction uint(value: number, min: number, max: number): number {\n  if (max === 255 && min === 0) return value;\n  const gain = 1 / (max - min);\n  const bias = -min * gain;\n  return Math.ceil(255 * Math.min(Math.max(gain * value + bias, 0), 1));\n}\n\ntype FileInput = {\n  files: FileList | string;\n};\n\ntype TiffProps = {\n  image: GeoTIFFImage;\n  width: number;\n  height: number;\n  bands: number;\n  range: [number, number, number | null];\n};\n\ntype FileSelectProps = {\n  loading: boolean;\n  setLoading: (loading: boolean) => void;\n  setValue: (value: TiffProps) => void;\n};\n\ntype ReadConfigProps = {\n  tiffValue: TiffProps;\n  loading: boolean;\n  setLoading: (loading: boolean) => void;\n  setValue: (value: ReadResult | null) => void;\n};\n\ntype DrawProps = {\n  tiffValue: TiffProps;\n  readResult: ReadResult;\n  loading: boolean;\n  setLoading: (loading: boolean) => void;\n};\n\ntype ReadInput = {\n  xs: string;\n  xe: string;\n  ys: string;\n  ye: string;\n  bands: string;\n};\n\ntype DrawInput = {\n  min: string;\n  max: string;\n  r: string;\n  g: string;\n  b: string;\n};\n\ntype StaticValue = {\n  mean: number;\n  variance: number;\n  min: { value: number; position: Point };\n  max: { value: number; position: Point };\n};\n\ntype TiffData = {\n  band: number;\n  data: TypedArrayWithDimensions | TypedArray | null;\n  statics: StaticValue | null;\n};\n\ntype ReadResult = {\n  elapsed: {\n    reading: number | null;\n    calcurating: number | null;\n  };\n  size: number[];\n  values: TiffData[];\n};\n\nconst FileSelect = (props: FileSelectProps): React.ReactElement => {\n  const { loading, setValue, setLoading } = props;\n\n  const {\n    handleSubmit,\n    register,\n    formState: { errors },\n  } = useForm<FileInput>({\n    mode: \"onSubmit\",\n    criteriaMode: \"all\",\n    defaultValues: {\n      files: \"\",\n    },\n  });\n\n  const loadHead = React.useCallback(\n    async (files: FileList | string) => {\n      if (files instanceof FileList && files.length > 0) {\n        setLoading(true);\n        try {\n          const tiff = await fromBlob(files[0]);\n          const image = await tiff.getImage(0);\n          const width = image.getWidth();\n          const height = image.getHeight();\n          const bands = image.getSamplesPerPixel();\n\n          const range = getDataRange(image);\n          if (!range) throw new Error(\"invalid tiff.\");\n          setValue({ image, width, height, bands, range });\n        } finally {\n          setLoading(false);\n        }\n      }\n    },\n    [setValue, setLoading]\n  );\n\n  const onSubmit: SubmitHandler<FileInput> = React.useCallback(\n    data => {\n      loadHead(data.files);\n    },\n    [loadHead]\n  );\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      <Stack spacing={2}>\n        <FormControl component=\"fieldset\" error={!!errors?.files} fullWidth>\n          <input\n            {...register(\"files\", {\n              required: true,\n              validate: {\n                length: f => f instanceof FileList && f.length === 1,\n              },\n            })}\n            disabled={loading}\n            accept=\".tif, .tiff\"\n            type=\"file\"\n            onChange={event => {\n              if (event.target.files) loadHead(event.target.files);\n            }}\n          />\n          {errors?.files?.type === \"required\" && (\n            <FormHelperText>\n              Required. <br />\n              ファイルを選択してください。\n            </FormHelperText>\n          )}\n          {errors?.files?.type === \"length\" && (\n            <FormHelperText>\n              Select only one. <br />\n              ファイルを1つ選択してください。\n            </FormHelperText>\n          )}\n        </FormControl>\n      </Stack>\n    </form>\n  );\n};\n\nconst ReadConfig = (props: ReadConfigProps): React.ReactElement => {\n  const { tiffValue, loading, setLoading, setValue } = props;\n  const [error, setError] = React.useState(\"\");\n\n  const { control, watch, handleSubmit, reset } = useForm<ReadInput>({\n    mode: \"onSubmit\",\n    criteriaMode: \"all\",\n    defaultValues: {\n      xs: \"0\",\n      xe: \"0\",\n      ys: \"0\",\n      ye: \"0\",\n      bands: \"1\",\n    },\n  });\n\n  React.useEffect(() => {\n    reset({\n      xs: \"0\",\n      xe: String(Math.min(1000, tiffValue.width)),\n      ys: \"0\",\n      ye: String(Math.min(1000, tiffValue.height)),\n      bands: Array.from({ length: tiffValue.bands }, (v, k) => k + 1).join(),\n    });\n  }, [reset, tiffValue]);\n\n  const watcher = watch();\n\n  const warnings = React.useMemo(() => {\n    const ret: string[] = [];\n    const bands = Array.from(\n      new Set(\n        watcher.bands\n          .split(\",\")\n          .map(v => {\n            return parseInt(v);\n          })\n          .filter(v => !isNaN(v))\n      )\n    );\n    const WARNING_PIXEL_SIZE = 4800 * 4800 * 3;\n    const xs = parseInt(watcher.xs);\n    const xe = parseInt(watcher.xe);\n    const ys = parseInt(watcher.ys);\n    const ye = parseInt(watcher.ye);\n    if (!isNaN(xs) && !isNaN(xe) && !isNaN(ys) && !isNaN(ye)) {\n      if (xe - xs > 32767) ret.push(\"tooLargeWidth\");\n      if (ye - ys > 32767) ret.push(\"tooLargeHeight\");\n\n      if ((xe - xs) * (ye - ys) * bands.length > WARNING_PIXEL_SIZE)\n        ret.push(\"tooLargePixelReading\");\n    }\n\n    return ret;\n  }, [watcher]);\n\n  const onSubmit: SubmitHandler<ReadInput> = React.useCallback(\n    data => {\n      setValue(null);\n      setError(\"\");\n\n      const x = [parseInt(data.xs), parseInt(data.xe)];\n      const y = [parseInt(data.ys), parseInt(data.ye)];\n\n      if (isNaN(x[0])) {\n        setError(\"nanOfXs\");\n        return;\n      }\n      if (x[0] < 0 || tiffValue.width < x[0]) {\n        setError(\"outOfRangeXs\");\n        return;\n      }\n      if (isNaN(x[1])) {\n        setError(\"nanOfXe\");\n        return;\n      }\n      if (x[1] < 0 || tiffValue.width < x[1]) {\n        setError(\"outOfRangeXe\");\n        return;\n      }\n      if (x[1] <= x[0]) {\n        setError(\"reverseX\");\n        return;\n      }\n      if (isNaN(y[0])) {\n        setError(\"nanOfYs\");\n        return;\n      }\n      if (y[0] < 0 || tiffValue.height < y[0]) {\n        setError(\"outOfRangeYs\");\n        return;\n      }\n      if (isNaN(y[1])) {\n        setError(\"nanOfYe\");\n        return;\n      }\n      if (y[1] < 0 || tiffValue.height < y[1]) {\n        setError(\"outOfRangeYe\");\n        return;\n      }\n      if (y[1] <= y[0]) {\n        setError(\"reverseY\");\n        return;\n      }\n      const bands = Array.from(\n        new Set(\n          data.bands\n            .split(\",\")\n            .map(v => {\n              return parseInt(v);\n            })\n            .filter(v => !isNaN(v))\n        )\n      );\n      const minBand = Math.min(...bands);\n      const maxBand = Math.max(...bands);\n      if (\n        minBand < 1 ||\n        tiffValue.bands < minBand ||\n        maxBand < 1 ||\n        tiffValue.bands < maxBand\n      ) {\n        setError(\"outOfRangeBands\");\n        return;\n      }\n\n      (async () => {\n        const size = [x[1] - x[0], y[1] - y[0]];\n        let reading: number | null = null;\n        let calcurating: number | null = null;\n        const calcurated: StaticValue[] = [];\n        let values: (TypedArrayWithDimensions | TypedArray)[] = [];\n\n        try {\n          setLoading(true);\n\n          const start1 = new Date();\n          const rasters = await tiffValue.image.readRasters({\n            window: [x[0], y[0], x[1], y[1]],\n            samples: bands.map(v => {\n              return v - 1;\n            }),\n          });\n          const end1 = new Date();\n          reading = (end1.getTime() - start1.getTime()) / 1000;\n          values = Array.isArray(rasters) ? rasters : [rasters];\n\n          const calc = (\n            valus: TypedArrayWithDimensions | TypedArray,\n            size: number[],\n            type: number\n          ): StaticValue => {\n            const mat = cv.matFromArray(\n              size[1],\n              size[0],\n              type,\n              Array.from(valus)\n            );\n            const { minVal, maxVal, minLoc, maxLoc } = cv.minMaxLoc(mat);\n            const mean = new cv.Mat();\n            const stddev = new cv.Mat();\n            cv.meanStdDev(mat, mean, stddev);\n\n            return {\n              mean: mean.doubleAt(0, 0),\n              variance: stddev.doubleAt(0, 0),\n              min: {\n                value: minVal,\n                position: minLoc,\n              },\n              max: {\n                value: maxVal,\n                position: maxLoc,\n              },\n            };\n          };\n          const type = tiffValue.range[2];\n          if (type !== null) {\n            const start2 = new Date();\n            values.forEach((v, i) => {\n              calcurated.push(calc(v, size, type));\n            });\n            const end2 = new Date();\n            calcurating = (end2.getTime() - start2.getTime()) / 1000;\n          }\n        } finally {\n          setLoading(false);\n\n          const tiffDatas: TiffData[] = [];\n          bands.forEach((b, i) => {\n            tiffDatas.push({\n              band: b,\n              data: values.length > i ? values[i] : null,\n              statics: calcurated.length > i ? calcurated[i] : null,\n            });\n          });\n\n          setValue({\n            elapsed: {\n              reading,\n              calcurating,\n            },\n            size,\n            values: tiffDatas,\n          });\n        }\n      })();\n    },\n    [tiffValue, setValue, setLoading]\n  );\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      <Grid container spacing={2}>\n        <Grid item xs={6}>\n          <Controller\n            control={control}\n            name=\"xs\"\n            render={({ field, fieldState: { invalid, error } }) => (\n              <FormControl\n                component=\"fieldset\"\n                error={invalid}\n                fullWidth\n                sx={{ mb: 2 }}\n              >\n                <TextField\n                  {...field}\n                  label=\"start x\"\n                  error={invalid}\n                  disabled={loading}\n                />\n                {error?.type === \"required\" && (\n                  <FormHelperText>\n                    Required. <br />\n                    必須です。入力してください。\n                  </FormHelperText>\n                )}\n                {error?.type === \"pattern\" && (\n                  <FormHelperText>\n                    Must be a positive number or zero. <br />\n                    0以上の整数を入力してください。\n                  </FormHelperText>\n                )}\n              </FormControl>\n            )}\n            rules={{\n              required: true,\n              pattern: /^[0-9]{1,}$/,\n            }}\n          />\n        </Grid>\n        <Grid item xs={6}>\n          <Controller\n            control={control}\n            name=\"xe\"\n            render={({ field, fieldState: { invalid, error } }) => (\n              <FormControl\n                component=\"fieldset\"\n                error={invalid}\n                fullWidth\n                sx={{ mb: 2 }}\n              >\n                <TextField\n                  {...field}\n                  label=\"end x\"\n                  error={invalid}\n                  disabled={loading}\n                />\n                {error?.type === \"required\" && (\n                  <FormHelperText>\n                    Required. <br />\n                    必須です。入力してください。\n                  </FormHelperText>\n                )}\n                {error?.type === \"pattern\" && (\n                  <FormHelperText>\n                    Must be a positive number or zero. <br />\n                    0以上の整数を入力してください。\n                  </FormHelperText>\n                )}\n              </FormControl>\n            )}\n            rules={{\n              required: true,\n              pattern: /^[0-9]{1,}$/,\n            }}\n          />\n        </Grid>\n        <Grid item xs={6}>\n          <Controller\n            control={control}\n            name=\"ys\"\n            render={({ field, fieldState: { invalid, error } }) => (\n              <FormControl\n                component=\"fieldset\"\n                error={invalid}\n                fullWidth\n                sx={{ mb: 2 }}\n              >\n                <TextField\n                  {...field}\n                  label=\"start y\"\n                  error={invalid}\n                  disabled={loading}\n                />\n                {error?.type === \"required\" && (\n                  <FormHelperText>\n                    Required. <br />\n                    必須です。入力してください。\n                  </FormHelperText>\n                )}\n                {error?.type === \"pattern\" && (\n                  <FormHelperText>\n                    Must be a positive number or zero. <br />\n                    0以上の整数を入力してください。\n                  </FormHelperText>\n                )}\n              </FormControl>\n            )}\n            rules={{\n              required: true,\n              pattern: /^[0-9]{1,}$/,\n            }}\n          />\n        </Grid>\n        <Grid item xs={6}>\n          <Controller\n            control={control}\n            name=\"ye\"\n            render={({ field, fieldState: { invalid, error } }) => (\n              <FormControl\n                component=\"fieldset\"\n                error={invalid}\n                fullWidth\n                sx={{ mb: 2 }}\n              >\n                <TextField\n                  {...field}\n                  label=\"end y\"\n                  error={invalid}\n                  disabled={loading}\n                />\n                {error?.type === \"required\" && (\n                  <FormHelperText>\n                    Required. <br />\n                    必須です。入力してください。\n                  </FormHelperText>\n                )}\n                {error?.type === \"pattern\" && (\n                  <FormHelperText>\n                    Must be a positive number or zero. <br />\n                    0以上の整数を入力してください。\n                  </FormHelperText>\n                )}\n              </FormControl>\n            )}\n            rules={{\n              required: true,\n              pattern: /^[0-9]{1,}$/,\n            }}\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <Controller\n            control={control}\n            name=\"bands\"\n            render={({ field, fieldState: { invalid, error } }) => (\n              <FormControl\n                component=\"fieldset\"\n                error={invalid}\n                fullWidth\n                sx={{ mb: 2 }}\n              >\n                <TextField\n                  {...field}\n                  label=\"bands\"\n                  error={invalid}\n                  disabled={loading}\n                />\n                {error?.type === \"required\" && (\n                  <FormHelperText>\n                    Required. <br />\n                    必須です。入力してください。\n                  </FormHelperText>\n                )}\n                {error?.type === \"pattern\" && (\n                  <FormHelperText>\n                    Must be Integer or &quot;,&quot;. <br />\n                    正数またはカンマを入力してください。\n                  </FormHelperText>\n                )}\n              </FormControl>\n            )}\n            rules={{\n              required: true,\n              pattern: /^[1-9]([0-9]|,)*$/,\n            }}\n          />\n          {warnings.length > 0 && (\n            <Box>\n              {warnings.includes(\"tooLargeWidth\") && (\n                <FormHelperText>\n                  HTML canvas dosen&#39;t support too large width.\n                  <br />\n                  幅が大きすぎるため、canvasで描画できません。\n                </FormHelperText>\n              )}\n              {warnings.includes(\"tooLargeHeight\") && (\n                <FormHelperText>\n                  HTML canvas dosen&#39;t support too large height.\n                  <br />\n                  高さが大きすぎるため、canvasで描画できません。\n                </FormHelperText>\n              )}\n              {warnings.includes(\"tooLargePixelReading\") && (\n                <FormHelperText>\n                  The browser may crash due to the large area to be loaded.{\" \"}\n                  <br />\n                  読み込む範囲が広いためブラウザがクラッシュする可能性があります。\n                </FormHelperText>\n              )}\n            </Box>\n          )}\n        </Grid>\n\n        <Grid item xs={12}>\n          <FormControl error={!!error} sx={{ mb: 2 }}>\n            <Button variant=\"contained\" type=\"submit\" disabled={loading}>\n              Load\n            </Button>\n            {error === \"nanOfXs\" && (\n              <FormHelperText>\n                start x is Invalid value. <br />\n                start x に正しい値を入力してくだい。\n              </FormHelperText>\n            )}\n            {error === \"outOfRangeXs\" && (\n              <FormHelperText>\n                start x is out of range. <br />\n                start x に範囲外の数値が設定されています。\n              </FormHelperText>\n            )}\n            {error === \"nanOfXe\" && (\n              <FormHelperText>\n                end x is Invalid value. <br />\n                end x に正しい値を入力してくだい。\n              </FormHelperText>\n            )}\n            {error === \"outOfRangeXe\" && (\n              <FormHelperText>\n                end x is out of range. <br />\n                end x に範囲外の数値が設定されています。\n              </FormHelperText>\n            )}\n            {error === \"reverseX\" && (\n              <FormHelperText>\n                end x must be greater than start x. <br />\n                end x に start x よりも小さい数値が設定されています。\n              </FormHelperText>\n            )}\n            {error === \"nanOfYs\" && (\n              <FormHelperText>\n                start y is Invalid value. <br />\n                start y に正しい値を入力してくだい。\n              </FormHelperText>\n            )}\n            {error === \"outOfRangeYs\" && (\n              <FormHelperText>\n                start y is out of range. <br />\n                start y に範囲外の数値が設定されています。\n              </FormHelperText>\n            )}\n            {error === \"nanOfYe\" && (\n              <FormHelperText>\n                end x is Invalid value. <br />\n                end x に正しい値を入力してくだい。\n              </FormHelperText>\n            )}\n            {error === \"outOfRangeYe\" && (\n              <FormHelperText>\n                end y is out of range. <br />\n                end y に範囲外の数値が設定されています。\n              </FormHelperText>\n            )}\n            {error === \"reverseY\" && (\n              <FormHelperText>\n                end y must be greater than start y. <br />\n                end y に start y よりも小さい数値が設定されています。\n              </FormHelperText>\n            )}\n            {error === \"outOfRangeBands\" && (\n              <FormHelperText>\n                bands include out of range value. <br />\n                bands に存在しないレイヤーが設定されています。\n              </FormHelperText>\n            )}\n          </FormControl>\n        </Grid>\n      </Grid>\n    </form>\n  );\n};\n\nconst Draw = (props: DrawProps): React.ReactElement => {\n  const { tiffValue, readResult, loading, setLoading } = props;\n\n  const drawRef = React.useRef<HTMLElement>(null);\n  const [error, setError] = React.useState(\"\");\n\n  const { control, handleSubmit } = useForm<DrawInput>({\n    mode: \"onSubmit\",\n    criteriaMode: \"all\",\n    defaultValues: {\n      min: \"\",\n      max: \"\",\n      r: String(readResult.values.length > 0 ? readResult.values[0].band : 1),\n      g: String(readResult.values.length > 1 ? readResult.values[1].band : 1),\n      b: String(readResult.values.length > 2 ? readResult.values[2].band : 1),\n    },\n  });\n\n  const onSubmit: SubmitHandler<DrawInput> = React.useCallback(\n    data => {\n      setError(\"\");\n\n      const r = parseInt(data.r);\n      const g = parseInt(data.g);\n      const b = parseInt(data.b);\n      const rData = readResult.values.find(v => {\n        return v.band === r;\n      })?.data;\n      const gData = readResult.values.find(v => {\n        return v.band === g;\n      })?.data;\n      const bData = readResult.values.find(v => {\n        return v.band === b;\n      })?.data;\n      if (!rData) {\n        setError(\"invalidR\");\n        return;\n      }\n      if (!gData) {\n        setError(\"invalidG\");\n        return;\n      }\n      if (!bData) {\n        setError(\"invalidB\");\n        return;\n      }\n\n      const minCanvasValue = parseFloat(data.min);\n      const maxCanvasValue = parseFloat(data.max);\n      if (\n        !isNaN(minCanvasValue) &&\n        !isNaN(maxCanvasValue) &&\n        maxCanvasValue <= minCanvasValue\n      ) {\n        setError(\"reverseCanvasValue\");\n        return;\n      }\n      const drawElement = drawRef.current;\n      if (!drawElement) return;\n      while (drawElement.firstChild) {\n        drawElement.removeChild(drawElement.firstChild);\n      }\n      try {\n        setLoading(true);\n\n        const min = !isNaN(minCanvasValue)\n          ? minCanvasValue\n          : tiffValue.range[0];\n        const max = !isNaN(maxCanvasValue)\n          ? maxCanvasValue\n          : tiffValue.range[1];\n\n        const cvType = cv.CV_8UC3;\n        const len = rData.length;\n        const value: number[] = [];\n        for (let i = 0; i < len; i++) {\n          value.push(uint(rData[i], min, max));\n          value.push(uint(gData[i], min, max));\n          value.push(uint(bData[i], min, max));\n        }\n\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = readResult.size[0];\n        canvas.height = readResult.size[1];\n\n        const imgMat = cv.matFromArray(\n          readResult.size[1],\n          readResult.size[0],\n          cvType,\n          value\n        );\n\n        cv.imshow(canvas, imgMat);\n        drawElement.appendChild(canvas);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [tiffValue, readResult, setLoading]\n  );\n\n  return (\n    <Stack spacing={2}>\n      <Typography variant=\"subtitle2\" sx={{ mb: 1 }}>\n        Draw Config\n      </Typography>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <Grid container spacing={2}>\n          <Grid item xs={4}>\n            <Controller\n              control={control}\n              name=\"r\"\n              render={({ field, fieldState: { invalid } }) => (\n                <FormControl\n                  component=\"fieldset\"\n                  error={invalid}\n                  fullWidth\n                  sx={{ mb: 2 }}\n                >\n                  <InputLabel id=\"select-r-label\">R</InputLabel>\n                  <Select\n                    {...field}\n                    labelId=\"select-r-label\"\n                    label=\"R\"\n                    error={invalid}\n                    disabled={loading}\n                  >\n                    {readResult.values.map(v => {\n                      return (\n                        <MenuItem key={v.band} value={v.band}>\n                          {v.band}\n                        </MenuItem>\n                      );\n                    })}\n                  </Select>\n                </FormControl>\n              )}\n            />\n          </Grid>\n          <Grid item xs={4}>\n            <Controller\n              control={control}\n              name=\"g\"\n              render={({ field, fieldState: { invalid } }) => (\n                <FormControl\n                  component=\"fieldset\"\n                  error={invalid}\n                  fullWidth\n                  sx={{ mb: 2 }}\n                >\n                  <InputLabel id=\"select-g-label\">G</InputLabel>\n                  <Select\n                    {...field}\n                    labelId=\"select-g-label\"\n                    label=\"G\"\n                    error={invalid}\n                    disabled={loading}\n                  >\n                    {readResult.values.map(v => {\n                      return (\n                        <MenuItem key={v.band} value={v.band}>\n                          {v.band}\n                        </MenuItem>\n                      );\n                    })}\n                  </Select>\n                </FormControl>\n              )}\n            />\n          </Grid>\n          <Grid item xs={4}>\n            <Controller\n              control={control}\n              name=\"b\"\n              render={({ field, fieldState: { invalid } }) => (\n                <FormControl\n                  component=\"fieldset\"\n                  error={invalid}\n                  fullWidth\n                  sx={{ mb: 2 }}\n                >\n                  <InputLabel id=\"select-b-label\">B</InputLabel>\n                  <Select\n                    {...field}\n                    labelId=\"select-b-label\"\n                    label=\"B\"\n                    error={invalid}\n                    disabled={loading}\n                  >\n                    {readResult.values.map(v => {\n                      return (\n                        <MenuItem key={v.band} value={v.band}>\n                          {v.band}\n                        </MenuItem>\n                      );\n                    })}\n                  </Select>\n                </FormControl>\n              )}\n            />\n          </Grid>\n\n          <Grid item xs={6}>\n            <Controller\n              control={control}\n              name=\"min\"\n              render={({ field, fieldState: { invalid, error } }) => (\n                <FormControl\n                  component=\"fieldset\"\n                  error={invalid}\n                  fullWidth\n                  sx={{ mb: 2 }}\n                >\n                  <TextField\n                    {...field}\n                    label=\"min (optional)\"\n                    error={invalid}\n                    disabled={loading}\n                  />\n                  {error?.type === \"pattern\" && (\n                    <FormHelperText>\n                      Must be number. <br />\n                      数値を入力してください。\n                    </FormHelperText>\n                  )}\n                </FormControl>\n              )}\n              rules={{\n                pattern: /^-?[0-9]+(\\.[0-9]+)*$/,\n              }}\n            />\n          </Grid>\n          <Grid item xs={6}>\n            <Controller\n              control={control}\n              name=\"max\"\n              render={({ field, fieldState: { invalid, error } }) => (\n                <FormControl\n                  component=\"fieldset\"\n                  error={invalid}\n                  fullWidth\n                  sx={{ mb: 2 }}\n                >\n                  <TextField\n                    {...field}\n                    label=\"max (optional)\"\n                    error={invalid}\n                    disabled={loading}\n                  />\n                  {error?.type === \"pattern\" && (\n                    <FormHelperText>\n                      Must be number. <br />\n                      数値を入力してください。\n                    </FormHelperText>\n                  )}\n                </FormControl>\n              )}\n              rules={{\n                pattern: /^-?[0-9]+(\\.[0-9]+)*$/,\n              }}\n            />\n          </Grid>\n\n          <Grid item xs={12}>\n            <FormControl error={!!error} sx={{ mb: 2 }}>\n              <Button variant=\"contained\" type=\"submit\" disabled={loading}>\n                Draw\n              </Button>\n              {error === \"inavlidR\" && (\n                <FormHelperText>\n                  r is invalid. <br />\n                  rの値が不正です。\n                </FormHelperText>\n              )}\n              {error === \"inavlidG\" && (\n                <FormHelperText>\n                  g is invalid. <br />\n                  gの値が不正です。\n                </FormHelperText>\n              )}\n              {error === \"inavlidB\" && (\n                <FormHelperText>\n                  b is invalid. <br />\n                  bの値が不正です。\n                </FormHelperText>\n              )}\n              {error === \"reverseCanvasValue\" && (\n                <FormHelperText>\n                  max must be greater than min. <br />\n                  max に min よりも小さい数値が設定されています。\n                </FormHelperText>\n              )}\n            </FormControl>\n          </Grid>\n        </Grid>\n      </form>\n\n      <Box ref={drawRef} sx={{ py: 2 }}></Box>\n    </Stack>\n  );\n};\n\nconst Index = (): React.ReactElement => {\n  const [loading, setLoading] = React.useState(false);\n  const [tiffValue, setTiffValue] = React.useState<TiffProps>();\n  const [readResult, setReadResult] = React.useState<ReadResult | null>(null);\n\n  return (\n    <>\n      <Helmet>\n        <title>Univariate</title>\n        <meta name=\"description\" content=\"Univariate of GeoTIFF.\" />\n        <link\n          rel=\"canonical\"\n          href=\"https://yonda-yonda.github.io/exmap/univar\"\n        />\n        <link\n          rel=\"icon\"\n          type=\"image/x-icon\"\n          href=\"https://github.githubassets.com/favicon.ico\"\n        />\n        <link\n          rel=\"stylesheet\"\n          href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap\"\n        />\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:title\" content=\"Univariate of GeoTIFF\" />\n        <meta\n          name=\"twitter:description\"\n          content=\"GeoTIFFの統計量を計算します。\"\n        />\n        <meta\n          property=\"og:url\"\n          content=\"https://yonda-yonda.github.io/exmap/univar\"\n        />\n        <meta\n          name=\"twitter:image\"\n          content=\"https://yonda-yonda.github.io/exmap/image/twitter_univar.png\"\n        />\n      </Helmet>\n      <Container>\n        <Typography variant=\"h2\" component=\"h1\">\n          Univariate\n        </Typography>\n        <Stack my={4} spacing={8}>\n          <Stack spacing={2}>\n            <Box>\n              <FileSelect\n                loading={loading}\n                setLoading={loading => {\n                  setLoading(loading);\n                }}\n                setValue={value => {\n                  setReadResult(null);\n                  setTiffValue(value);\n                }}\n              />\n            </Box>\n            {tiffValue &&\n              (!readResult ? (\n                <Stack spacing={2}>\n                  <Table size=\"small\">\n                    <TableBody>\n                      <TableRow>\n                        <TableCell component=\"th\" scope=\"row\">\n                          Width\n                        </TableCell>\n                        <TableCell>{tiffValue.width}px</TableCell>\n                      </TableRow>\n                      <TableRow>\n                        <TableCell component=\"th\" scope=\"row\">\n                          Height\n                        </TableCell>\n                        <TableCell>{tiffValue.height}px</TableCell>\n                      </TableRow>\n                      <TableRow>\n                        <TableCell component=\"th\" scope=\"row\">\n                          Number of bands\n                        </TableCell>\n                        <TableCell>{tiffValue.bands}</TableCell>\n                      </TableRow>\n                    </TableBody>\n                  </Table>\n                  <Box sx={{ pt: 2 }}>\n                    <ReadConfig\n                      tiffValue={tiffValue}\n                      loading={loading}\n                      setLoading={setLoading}\n                      setValue={setReadResult}\n                    />\n                  </Box>\n                </Stack>\n              ) : (\n                <Box sx={{ pt: 4 }}>\n                  <Table size=\"small\">\n                    <TableBody>\n                      <TableRow>\n                        <TableCell component=\"th\" scope=\"row\">\n                          Reading\n                        </TableCell>\n                        <TableCell>\n                          {readResult.elapsed.reading\n                            ? readResult.elapsed.reading + \"s\"\n                            : \"failed.\"}\n                        </TableCell>\n                      </TableRow>\n                      <TableRow>\n                        <TableCell component=\"th\" scope=\"row\">\n                          Calcurating\n                        </TableCell>\n                        <TableCell>\n                          {readResult.elapsed.calcurating\n                            ? readResult.elapsed.calcurating + \"s\"\n                            : \"failed.\"}\n                        </TableCell>\n                      </TableRow>\n\n                      {readResult.values.map((v, i) => {\n                        return (\n                          <TableRow key={i}>\n                            <TableCell component=\"th\" scope=\"row\">\n                              Band {v.band}\n                            </TableCell>\n                            <TableCell>\n                              {v.statics ? (\n                                <Box>\n                                  min {v.statics.min.value} at (\n                                  {v.statics.min.position.x},{\" \"}\n                                  {v.statics.min.position.y})\n                                  <br />\n                                  max {v.statics.max.value} at (\n                                  {v.statics.max.position.x},{\" \"}\n                                  {v.statics.max.position.y})\n                                  <br />\n                                  mean {v.statics.mean}\n                                  <br />\n                                  variance {v.statics.variance}\n                                </Box>\n                              ) : (\n                                \"failed.\"\n                              )}\n                            </TableCell>\n                          </TableRow>\n                        );\n                      })}\n                    </TableBody>\n                  </Table>\n\n                  <Box sx={{ mt: 4 }}>\n                    <Draw\n                      tiffValue={tiffValue}\n                      readResult={readResult}\n                      loading={loading}\n                      setLoading={setLoading}\n                    />\n                  </Box>\n                </Box>\n              ))}\n          </Stack>\n        </Stack>\n      </Container>\n    </>\n  );\n};\n\nexport default Index;\n"],"names":["fieldTagNames","fieldTags","key","hasOwnProperty","parseInt","arrayFields","BitsPerSample","ExtraSamples","SampleFormat","StripByteCounts","StripOffsets","StripRowCounts","TileByteCounts","TileOffsets","SubIFDs","fieldTypeNames","fieldTypes","_key","photometricInterpretations","WhiteIsZero","BlackIsZero","RGB","Palette","TransparencyMask","CMYK","YCbCr","CIELab","ICCLab","ExtraSamplesValues","Unspecified","Assocalpha","Unassalpha","LercParameters","Version","AddCompression","LercAddCompression","None","Deflate","geoKeyNames","geoKeys","_key2","_excluded","Box","options","arguments","length","undefined","defaultTheme","_options$defaultClass","defaultClassName","generateClassName","BoxRoot","styleFunctionSx","inProps","ref","theme","useTheme","_extendSxProp","extendSxProp","className","_extendSxProp$compone","component","other","as","createBox","ClassNameGenerator","generateUtilityClasses","getMenuItemUtilityClass","slot","MenuItemRoot","styled","ButtonBase","shouldForwardProp","prop","name","overridesResolver","props","styles","ownerState","root","dense","divider","disableGutters","gutters","_ref","_extends2","typography","body1","display","justifyContent","alignItems","position","textDecoration","minHeight","paddingTop","paddingBottom","boxSizing","whiteSpace","paddingLeft","paddingRight","borderBottom","concat","palette","backgroundClip","backgroundColor","action","hover","primary","main","selectedOpacity","focusOpacity","hoverOpacity","focus","opacity","disabledOpacity","marginTop","spacing","marginBottom","marginLeft","minWidth","breakpoints","up","body2","fontSize","useThemeProps","_props$autoFocus","autoFocus","_props$component","_props$dense","_props$divider","_props$disableGutters","focusVisibleClassName","_props$role","role","tabIndexProp","tabIndex","context","ListContext","childContext","menuItemRef","useEnhancedEffect","current","classes","disabled","selected","slots","composedClasses","composeClasses","useUtilityClasses","handleRef","useForkRef","value","children","focusVisible","getTableUtilityClass","TableRoot","stickyHeader","width","borderCollapse","borderSpacing","padding","color","text","secondary","textAlign","captionSide","defaultComponent","_props$padding","_props$size","size","_props$stickyHeader","table","getTableBodyUtilityClass","TableBodyRoot","tablelvl2","variant","getTableRowUtilityClass","TableRowRoot","head","footer","_ref2","verticalAlign","outline","TableRow","_props$hover","_props$selected","getTableCellUtilityClass","TableCellRoot","capitalize","align","mode","lineHeight","pxToRem","fontWeight","fontWeightMedium","flexDirection","top","zIndex","background","default","TableCell","_props$align","componentProp","paddingProp","scopeProp","scope","sizeProp","sortDirection","variantProp","isHeadCell","ariaSort","fromWhiteIsZero","raster","max","height","rgbRaster","Uint8Array","i","j","fromBlackIsZero","fromPalette","colorMap","greenOffset","blueOffset","mapIndex","fromCMYK","cmykRaster","c","m","y","k","fromYCbCr","yCbCrRaster","Uint8ClampedArray","cb","cr","fromCIELab","cieLabRaster","x","z","r","g","b","Math","pow","min","registry","Map","addDecoder","cases","importFn","Array","isArray","forEach","set","getDecoder","_x","_getDecoder","apply","this","_callee","fileDirectory","Decoder","_context","prev","next","get","Compression","Error","sent","abrupt","stop","copyNewSize","array","samplesPerPixel","Object","getPrototypeOf","resampleNearest","valueArrays","inWidth","inHeight","outWidth","outHeight","relX","relY","map","newArray","cy","round","cx","lerp","v0","v1","t","resampleBilinear","rawY","yl","floor","yh","ceil","rawX","tx","xl","xh","ll","hl","lh","hh","resample","method","toLowerCase","resampleNearestInterleaved","valueArray","samples","resampleBilinearInterleaved","resampleInterleaved","sum","start","end","s","arrayForType","format","bitsPerSample","Uint16Array","Uint32Array","Int8Array","Int16Array","Int32Array","Float32Array","Float64Array","needsNormalization","normalizeArray","inBuffer","planarConfiguration","tileWidth","tileHeight","view","DataView","samplesToTransfer","outArray","bitMask","repeat","bitsPerLine","lineBitOffset","pixelBitOffset","bitOffset","outIndex","byteOffset","innerBitOffset","getUint8","getUint16","raw","getUint32","buffer","then","GeoTIFFImage","dataView","littleEndian","cache","source","tiles","isTiled","PlanarConfiguration","_readRGB","_readRasters","_readRaster2","_getTileOrStrip","ImageWidth","ImageLength","SamplesPerPixel","TileWidth","getWidth","TileLength","RowsPerStrip","getHeight","getTileWidth","getTileHeight","bytes","getSampleByteSize","RangeError","sampleIndex","prototype","getInt8","getInt16","getInt32","offset","getFloat32","getFloat64","getSampleFormat","getBitsPerSample","_callee2","sample","poolOrDecoder","signal","numTilesPerRow","numTilesPerCol","index","byteCount","slice","request","_this","_context2","fetch","data","sampleFormat","decode","getSamplesPerPixel","getBlockHeight","t0","t1","t2","t3","_x2","_x3","_x4","_x5","_callee3","imageWindow","interleave","resampleMethod","imageWidth","imageHeight","minXTile","maxXTile","minYTile","maxYTile","windowWidth","bytesPerPixel","srcSampleOffsets","sampleReaders","promises","yTile","xTile","_loop","resampled","_this2","_context3","getBytesPerPixel","push","getReaderForSample","si","promise","getTileOrStrip","tile","blockHeight","firstLine","firstCol","lastLine","lastCol","reader","ymax","xmax","pixelOffset","call","windowCoordinate","Promise","all","_x6","_x7","_x8","_x9","_x10","_x11","_x12","_x13","_x14","_callee4","wnd","_ref2$samples","_ref2$pool","pool","fillValue","imageWindowWidth","imageWindowHeight","numPixels","_i","_i2","result","_args4","_context4","window","reject","fill","getArrayForSample","_readRaster","_callee5","_ref3","_ref3$interleave","_ref3$pool","_ref3$enableAlpha","enableAlpha","pi","subOptions","red","green","blue","_i3","_args5","_context5","PhotometricInterpretation","readRasters","ColorMap","ModelTiepoint","tiePoints","metadata","GDAL_METADATA","string","items","filter","item","Number","inner","GDAL_NODATA","substring","modelTransformation","ModelTransformation","referenceImage","modelPixelScale","ModelPixelScale","_referenceImage$getRe","getResolution","_referenceImage$getRe2","refResX","refResY","refResZ","GTRasterTypeGeoKey","origin","getOrigin","resolution","x1","y1","x2","y2","DataView64","arrayBuffer","_dataView","combined","left","right","isSafeInteger","isNegative","carrying","byte","DataSlice","sliceOffset","bigTiff","_sliceOffset","_littleEndian","_bigTiff","byteLength","sliceTop","readUint32","readUint64","BaseSource","_close","_fetchSlice","_fetch","slices","_args","fetchSlice","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_isNativeReflectConstruct","Super","NewTarget","constructor","FileReaderSource","_BaseSource","_super","file","resolve","blob","FileReader","onload","event","target","onerror","onabort","readAsArrayBuffer","addEventListener","abort","makeFileReaderSource","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","getOwnPropertyDescriptors","defineProperties","defineProperty","getFieldTypeLength","fieldType","parseGeoKeyDirectory","rawGeoKeyDirectory","GeoKeyDirectory","geoKeyDirectory","location","count","subarray","getValues","dataSlice","values","readMethod","fieldTypeLength","readUint8","readInt8","readUint16","readInt16","readInt32","readInt64","readFloat32","readFloat64","TextDecoder","ImageFileDirectory","nextIFDByteOffset","GeoTIFFImageIndexError","_Error","GeoTIFFBase","resX","resY","bbox","firstImage","usedImage","imageCount","imgBBox","_firstImage$getOrigin","_firstImage$getOrigin2","oX","oY","_firstImage$getResolu","_firstImage$getResolu2","rX","rY","usedBBox","allImages","image","_image$fileDirectory","subfileType","newSubfileType","_image","imgResX","imgResY","_firstImage$getOrigin3","_firstImage$getOrigin4","_oX","_oY","_usedImage$getResolut","_usedImage$getResolut2","imageResX","imageResY","getImage","getImageCount","getBoundingBox","SubfileType","NewSubfileType","sort","a","GeoTIFF","_GeoTIFFBase","_fromSource","_getGhostValues","_getImageCount","_getImage","_requestIFD","_parseFileDirectoryAt","_getSlice","_super2","firstIFDOffset","ifdRequests","ghostValues","fallbackSize","t4","entrySize","offsetSize","numDirEntries","byteSize","entryCount","fieldTag","typeCount","fieldValues","valueOffset","actualOffset","fieldDataSlice","getSlice","covers","readOffset","_this3","parseFileDirectoryAt","requestIFD","previousIfd","_callee6","ifd","_args6","_context6","_callee7","hasNext","_context7","_callee8","detectionString","heuristicAreaSize","valuesString","metadataSize","fullString","_this4","_context8","split","line","close","_callee9","headerData","BOM","magicNumber","_context9","TypeError","getUint64","fromBlob","_fromBlob","_callee16","_context16","fromSource","getDataRange","cv","MAX_VALUE","uint","gain","bias","FileSelect","loading","setValue","setLoading","useForm","criteriaMode","defaultValues","files","handleSubmit","register","errors","formState","loadHead","React","FileList","tiff","bands","range","onSubmit","Stack","FormControl","error","fullWidth","required","validate","f","accept","type","onChange","FormHelperText","ReadConfig","tiffValue","setError","xs","xe","ys","ye","control","watch","reset","String","from","v","join","watcher","warnings","ret","Set","isNaN","minBand","maxBand","reading","calcurating","calcurated","start1","Date","rasters","end1","getTime","calc","valus","mat","minVal","maxVal","minLoc","maxLoc","mean","stddev","doubleAt","variance","start2","end2","tiffDatas","band","statics","elapsed","Grid","container","render","field","fieldState","invalid","sx","mb","TextField","label","rules","pattern","includes","Button","Draw","readResult","drawRef","rData","find","gData","bData","minCanvasValue","parseFloat","maxCanvasValue","drawElement","firstChild","removeChild","cvType","len","canvas","document","createElement","imgMat","appendChild","Typography","InputLabel","id","Select","labelId","py","setTiffValue","setReadResult","Helmet","content","rel","href","property","Container","my","pt","mt"],"sourceRoot":""}