(self.webpackChunkexmap=self.webpackChunkexmap||[]).push([[1372],{92827:function(e,t,r){"use strict";r.d(t,{L:function(){return n},It:function(){return o},sf:function(){return s},Ie:function(){return c},pd:function(){return f},L5:function(){return d},Qb:function(){return h},P1:function(){return p}});var n={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},a={};for(var i in n)n.hasOwnProperty(i)&&(a[n[i]]=parseInt(i,10));var o=[a.BitsPerSample,a.ExtraSamples,a.SampleFormat,a.StripByteCounts,a.StripOffsets,a.StripRowCounts,a.TileByteCounts,a.TileOffsets,a.SubIFDs],l={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},s={};for(var u in l)l.hasOwnProperty(u)&&(s[l[u]]=parseInt(u,10));var c={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},f={Unspecified:0,Assocalpha:1,Unassalpha:2},d={Version:0,AddCompression:1},h={None:0,Deflate:1},p={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},m={};for(var g in p)p.hasOwnProperty(g)&&(m[p[g]]=parseInt(g,10))},55429:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return At}});var n=r(93433),a=r(15861),i=r(87757),o=r.n(i),l=r(67294),s=r(8177),u=r(2055),c=r(87462),f=r(63366),d=r(85505),h=r(62048),p=r(12037),m=r(18297),g=r(48377),v=r(85893),y=["className","component"];var b=r(86756),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,r=e.defaultClassName,n=void 0===r?"MuiBox-root":r,a=e.generateClassName,i=(0,h.ZP)("div")(p.Z),o=l.forwardRef((function(e,r){var o=(0,g.Z)(t),l=(0,m.Z)(e),s=l.className,u=l.component,h=void 0===u?"div":u,p=(0,f.Z)(l,y);return(0,v.jsx)(i,(0,c.Z)({as:h,ref:r,className:(0,d.Z)(s,a?a(n):n),theme:o},p))}));return o}({defaultTheme:(0,r(78790).Z)(),defaultClassName:"MuiBox-root",generateClassName:b.Z.generate}),x=w,E=r(4942),k=r(49408),Z=r(67663),S=r(43656),I=r(47761),M=r(48267),T=r(53679),C=r(94026),P=r(65973),D=r(62194);var A=(0,D.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var O=(0,D.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);var R=(0,D.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),G=r(48416);function F(e){return(0,G.Z)("MuiMenuItem",e)}var N=(0,D.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),U=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],L=(0,S.ZP)(T.Z,{shouldForwardProp:function(e){return(0,S.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]}})((function(e){var t,r=e.theme,n=e.ownerState;return(0,c.Z)({},r.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:"1px solid ".concat(r.palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:r.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,E.Z)(t,"&.".concat(N.selected),(0,E.Z)({backgroundColor:(0,Z.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)},"&.".concat(N.focusVisible),{backgroundColor:(0,Z.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)})),(0,E.Z)(t,"&.".concat(N.selected,":hover"),{backgroundColor:(0,Z.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,Z.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)}}),(0,E.Z)(t,"&.".concat(N.focusVisible),{backgroundColor:r.palette.action.focus}),(0,E.Z)(t,"&.".concat(N.disabled),{opacity:r.palette.action.disabledOpacity}),(0,E.Z)(t,"& + .".concat(A.root),{marginTop:r.spacing(1),marginBottom:r.spacing(1)}),(0,E.Z)(t,"& + .".concat(A.inset),{marginLeft:52}),(0,E.Z)(t,"& .".concat(R.root),{marginTop:0,marginBottom:0}),(0,E.Z)(t,"& .".concat(R.inset),{paddingLeft:36}),(0,E.Z)(t,"& .".concat(O.root),{minWidth:36}),t),!n.dense&&(0,E.Z)({},r.breakpoints.up("sm"),{minHeight:"auto"}),n.dense&&(0,c.Z)({minHeight:32,paddingTop:4,paddingBottom:4},r.typography.body2,(0,E.Z)({},"& .".concat(O.root," svg"),{fontSize:"1.25rem"})))})),V=l.forwardRef((function(e,t){var r=(0,I.Z)({props:e,name:"MuiMenuItem"}),n=r.autoFocus,a=void 0!==n&&n,i=r.component,o=void 0===i?"li":i,s=r.dense,u=void 0!==s&&s,h=r.divider,p=void 0!==h&&h,m=r.disableGutters,g=void 0!==m&&m,y=r.focusVisibleClassName,b=r.role,w=void 0===b?"menuitem":b,x=r.tabIndex,E=(0,f.Z)(r,U),Z=l.useContext(M.Z),S={dense:u||Z.dense||!1,disableGutters:g},T=l.useRef(null);(0,C.Z)((function(){a&&T.current&&T.current.focus()}),[a]);var D,A=(0,c.Z)({},r,{dense:S.dense,divider:p,disableGutters:g}),O=function(e){var t=e.disabled,r=e.dense,n=e.divider,a=e.disableGutters,i=e.selected,o=e.classes,l={root:["root",r&&"dense",t&&"disabled",!a&&"gutters",n&&"divider",i&&"selected"]},s=(0,k.Z)(l,F,o);return(0,c.Z)({},o,s)}(r),R=(0,P.Z)(T,t);return r.disabled||(D=void 0!==x?x:-1),(0,v.jsx)(M.Z.Provider,{value:S,children:(0,v.jsx)(L,(0,c.Z)({ref:R,role:w,tabIndex:D,component:o,focusVisibleClassName:(0,d.Z)(O.focusVisible,y)},E,{ownerState:A,classes:O}))})}));var _=l.createContext();function B(e){return(0,G.Z)("MuiTable",e)}(0,D.Z)("MuiTable",["root","stickyHeader"]);var j=["className","component","padding","size","stickyHeader"],H=(0,S.ZP)("table",{name:"MuiTable",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.stickyHeader&&t.stickyHeader]}})((function(e){var t=e.theme,r=e.ownerState;return(0,c.Z)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,c.Z)({},t.typography.body2,{padding:t.spacing(2),color:t.palette.text.secondary,textAlign:"left",captionSide:"bottom"})},r.stickyHeader&&{borderCollapse:"separate"})})),K="table",W=l.forwardRef((function(e,t){var r=(0,I.Z)({props:e,name:"MuiTable"}),n=r.className,a=r.component,i=void 0===a?K:a,o=r.padding,s=void 0===o?"normal":o,u=r.size,h=void 0===u?"medium":u,p=r.stickyHeader,m=void 0!==p&&p,g=(0,f.Z)(r,j),y=(0,c.Z)({},r,{component:i,padding:s,size:h,stickyHeader:m}),b=function(e){var t=e.classes,r={root:["root",e.stickyHeader&&"stickyHeader"]};return(0,k.Z)(r,B,t)}(y),w=l.useMemo((function(){return{padding:s,size:h,stickyHeader:m}}),[s,h,m]);return(0,v.jsx)(_.Provider,{value:w,children:(0,v.jsx)(H,(0,c.Z)({as:i,role:i===K?null:"table",ref:t,className:(0,d.Z)(b.root,n),ownerState:y},g))})}));var z=l.createContext();function q(e){return(0,G.Z)("MuiTableBody",e)}(0,D.Z)("MuiTableBody",["root"]);var Y=["className","component"],X=(0,S.ZP)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:function(e,t){return t.root}})({display:"table-row-group"}),Q={variant:"body"},$="tbody",J=l.forwardRef((function(e,t){var r=(0,I.Z)({props:e,name:"MuiTableBody"}),n=r.className,a=r.component,i=void 0===a?$:a,o=(0,f.Z)(r,Y),l=(0,c.Z)({},r,{component:i}),s=function(e){var t=e.classes;return(0,k.Z)({root:["root"]},q,t)}(l);return(0,v.jsx)(z.Provider,{value:Q,children:(0,v.jsx)(X,(0,c.Z)({className:(0,d.Z)(s.root,n),as:i,ref:t,role:i===$?null:"rowgroup",ownerState:l},o))})}));function ee(e){return(0,G.Z)("MuiTableRow",e)}var te=(0,D.Z)("MuiTableRow",["root","selected","hover","head","footer"]),re=["className","component","hover","selected"],ne=(0,S.ZP)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.head&&t.head,r.footer&&t.footer]}})((function(e){var t,r=e.theme;return t={color:"inherit",display:"table-row",verticalAlign:"middle",outline:0},(0,E.Z)(t,"&.".concat(te.hover,":hover"),{backgroundColor:r.palette.action.hover}),(0,E.Z)(t,"&.".concat(te.selected),{backgroundColor:(0,Z.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity),"&:hover":{backgroundColor:(0,Z.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity)}}),t})),ae=l.forwardRef((function(e,t){var r=(0,I.Z)({props:e,name:"MuiTableRow"}),n=r.className,a=r.component,i=void 0===a?"tr":a,o=r.hover,s=void 0!==o&&o,u=r.selected,h=void 0!==u&&u,p=(0,f.Z)(r,re),m=l.useContext(z),g=(0,c.Z)({},r,{component:i,hover:s,selected:h,head:m&&"head"===m.variant,footer:m&&"footer"===m.variant}),y=function(e){var t=e.classes,r={root:["root",e.selected&&"selected",e.hover&&"hover",e.head&&"head",e.footer&&"footer"]};return(0,k.Z)(r,ee,t)}(g);return(0,v.jsx)(ne,(0,c.Z)({as:i,ref:t,className:(0,d.Z)(y.root,n),role:"tr"===i?null:"row",ownerState:g},p))})),ie=ae,oe=r(49240);function le(e){return(0,G.Z)("MuiTableCell",e)}var se=(0,D.Z)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),ue=["align","className","component","padding","scope","size","sortDirection","variant"],ce=(0,S.ZP)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t[r.variant],t["size".concat((0,oe.Z)(r.size))],"normal"!==r.padding&&t["padding".concat((0,oe.Z)(r.padding))],"inherit"!==r.align&&t["align".concat((0,oe.Z)(r.align))],r.stickyHeader&&t.stickyHeader]}})((function(e){var t=e.theme,r=e.ownerState;return(0,c.Z)({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===t.palette.mode?(0,Z.$n)((0,Z.Fq)(t.palette.divider,1),.88):(0,Z._j)((0,Z.Fq)(t.palette.divider,1),.68)),textAlign:"left",padding:16},"head"===r.variant&&{color:t.palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},"body"===r.variant&&{color:t.palette.text.primary},"footer"===r.variant&&{color:t.palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},"small"===r.size&&(0,E.Z)({padding:"6px 16px"},"&.".concat(se.paddingCheckbox),{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}),"checkbox"===r.padding&&{width:48,padding:"0 0 0 4px"},"none"===r.padding&&{padding:0},"left"===r.align&&{textAlign:"left"},"center"===r.align&&{textAlign:"center"},"right"===r.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===r.align&&{textAlign:"justify"},r.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:t.palette.background.default})})),fe=l.forwardRef((function(e,t){var r,n=(0,I.Z)({props:e,name:"MuiTableCell"}),a=n.align,i=void 0===a?"inherit":a,o=n.className,s=n.component,u=n.padding,h=n.scope,p=n.size,m=n.sortDirection,g=n.variant,y=(0,f.Z)(n,ue),b=l.useContext(_),w=l.useContext(z),x=w&&"head"===w.variant;r=s||(x?"th":"td");var E=h;!E&&x&&(E="col");var Z=g||w&&w.variant,S=(0,c.Z)({},n,{align:i,component:r,padding:u||(b&&b.padding?b.padding:"normal"),size:p||(b&&b.size?b.size:"medium"),sortDirection:m,stickyHeader:"head"===Z&&b&&b.stickyHeader,variant:Z}),M=function(e){var t=e.classes,r=e.variant,n=e.align,a=e.padding,i=e.size,o={root:["root",r,e.stickyHeader&&"stickyHeader","inherit"!==n&&"align".concat((0,oe.Z)(n)),"normal"!==a&&"padding".concat((0,oe.Z)(a)),"size".concat((0,oe.Z)(i))]};return(0,k.Z)(o,le,t)}(S),T=null;return m&&(T="asc"===m?"ascending":"descending"),(0,v.jsx)(ce,(0,c.Z)({as:r,ref:t,className:(0,d.Z)(M.root,o),"aria-sort":T,scope:E,ownerState:S},y))})),de=fe,he=r(94382),pe=r(13827),me=r(32990),ge=r(4320),ve=r(65970),ye=r(76968),be=r(49308),we=r(24157),xe=r(43310),Ee=r(85616),ke=r(29439),Ze=r(60136),Se=r(6215),Ie=r(61120),Me=r(72407),Te=r(43144),Ce=r(15671),Pe=r(56967),De=r(13349),Ae=r.n(De),Oe=r(57690),Re=r.n(Oe),Ge=r(92827);function Fe(e,t){for(var r,n=e.width,a=e.height,i=new Uint8Array(n*a*3),o=0,l=0;o<e.length;++o,l+=3)r=256-e[o]/t*256,i[l]=r,i[l+1]=r,i[l+2]=r;return i}function Ne(e,t){for(var r,n=e.width,a=e.height,i=new Uint8Array(n*a*3),o=0,l=0;o<e.length;++o,l+=3)r=e[o]/t*256,i[l]=r,i[l+1]=r,i[l+2]=r;return i}function Ue(e,t){for(var r=e.width,n=e.height,a=new Uint8Array(r*n*3),i=t.length/3,o=t.length/3*2,l=0,s=0;l<e.length;++l,s+=3){var u=e[l];a[s]=t[u]/65536*256,a[s+1]=t[u+i]/65536*256,a[s+2]=t[u+o]/65536*256}return a}function Le(e){for(var t=e.width,r=e.height,n=new Uint8Array(t*r*3),a=0,i=0;a<e.length;a+=4,i+=3){var o=e[a],l=e[a+1],s=e[a+2],u=e[a+3];n[i]=(255-o)/256*255*((255-u)/256),n[i+1]=(255-l)/256*255*((255-u)/256),n[i+2]=(255-s)/256*255*((255-u)/256)}return n}function Ve(e){for(var t=e.width,r=e.height,n=new Uint8ClampedArray(t*r*3),a=0,i=0;a<e.length;a+=3,i+=3){var o=e[a],l=e[a+1],s=e[a+2];n[i]=o+1.402*(s-128),n[i+1]=o-.34414*(l-128)-.71414*(s-128),n[i+2]=o+1.772*(l-128)}return n}function _e(e){for(var t=e.width,r=e.height,n=new Uint8Array(t*r*3),a=0,i=0;a<e.length;a+=3,i+=3){var o=(e[a+0]+16)/116,l=(e[a+1]<<24>>24)/500+o,s=o-(e[a+2]<<24>>24)/200,u=void 0,c=void 0,f=void 0;c=-.9689*(l=.95047*(l*l*l>.008856?l*l*l:(l-16/116)/7.787))+1.8758*(o=1*(o*o*o>.008856?o*o*o:(o-16/116)/7.787))+.0415*(s=1.08883*(s*s*s>.008856?s*s*s:(s-16/116)/7.787)),f=.0557*l+-.204*o+1.057*s,u=(u=3.2406*l+-1.5372*o+-.4986*s)>.0031308?1.055*Math.pow(u,1/2.4)-.055:12.92*u,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:12.92*c,f=f>.0031308?1.055*Math.pow(f,1/2.4)-.055:12.92*f,n[i]=255*Math.max(0,Math.min(1,u)),n[i+1]=255*Math.max(0,Math.min(1,c)),n[i+2]=255*Math.max(0,Math.min(1,f))}return n}var Be=new Map;function je(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){return Be.set(e,t)}))}function He(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,a.Z)(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Be.get(t.Compression)){e.next=3;break}throw new Error("Unknown compression method identifier: ".concat(t.Compression));case 3:return e.next=5,r();case 5:return n=e.sent,e.abrupt("return",new n(t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new(Object.getPrototypeOf(e).constructor)(t*r*n)}function ze(e,t,r,n,a){var i=t/n,o=r/a;return e.map((function(e){for(var l=We(e,n,a),s=0;s<a;++s)for(var u=Math.min(Math.round(o*s),r-1),c=0;c<n;++c){var f=Math.min(Math.round(i*c),t-1),d=e[u*t+f];l[s*n+c]=d}return l}))}function qe(e,t,r){return(1-r)*e+r*t}function Ye(e,t,r,n,a){var i=t/n,o=r/a;return e.map((function(e){for(var l=We(e,n,a),s=0;s<a;++s)for(var u=o*s,c=Math.floor(u),f=Math.min(Math.ceil(u),r-1),d=0;d<n;++d){var h=i*d,p=h%1,m=Math.floor(h),g=Math.min(Math.ceil(h),t-1),v=e[c*t+m],y=e[c*t+g],b=e[f*t+m],w=e[f*t+g],x=qe(qe(v,y,p),qe(b,w,p),u%1);l[s*n+d]=x}return l}))}function Xe(e,t,r,n,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nearest";switch(i.toLowerCase()){case"nearest":return ze(e,t,r,n,a);case"bilinear":case"linear":return Ye(e,t,r,n,a);default:throw new Error("Unsupported resampling method: '".concat(i,"'"))}}function Qe(e,t,r,n,a,i){for(var o=t/n,l=r/a,s=We(e,n,a,i),u=0;u<a;++u)for(var c=Math.min(Math.round(l*u),r-1),f=0;f<n;++f)for(var d=Math.min(Math.round(o*f),t-1),h=0;h<i;++h){var p=e[c*t*i+d*i+h];s[u*n*i+f*i+h]=p}return s}function $e(e,t,r,n,a,i){for(var o=t/n,l=r/a,s=We(e,n,a,i),u=0;u<a;++u)for(var c=l*u,f=Math.floor(c),d=Math.min(Math.ceil(c),r-1),h=0;h<n;++h)for(var p=o*h,m=p%1,g=Math.floor(p),v=Math.min(Math.ceil(p),t-1),y=0;y<i;++y){var b=e[f*t*i+g*i+y],w=e[f*t*i+v*i+y],x=e[d*t*i+g*i+y],E=e[d*t*i+v*i+y],k=qe(qe(b,w,m),qe(x,E,m),c%1);s[u*n*i+h*i+y]=k}return s}function Je(e,t,r,n,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest";switch(o.toLowerCase()){case"nearest":return Qe(e,t,r,n,a,i);case"bilinear":case"linear":return $e(e,t,r,n,a,i);default:throw new Error("Unsupported resampling method: '".concat(o,"'"))}}function et(e,t,r){for(var n=0,a=t;a<r;++a)n+=e[a];return n}function tt(e,t,r){switch(e){case 1:if(t<=8)return new Uint8Array(r);if(t<=16)return new Uint16Array(r);if(t<=32)return new Uint32Array(r);break;case 2:if(8===t)return new Int8Array(r);if(16===t)return new Int16Array(r);if(32===t)return new Int32Array(r);break;case 3:switch(t){case 16:case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error("Unsupported data format/bitsPerSample")}function rt(e,t){return(1!==e&&2!==e||!(t<=32)||t%8!=0)&&(3!==e||16!==t&&32!==t&&64!==t)}function nt(e,t,r,n,a,i,o){var l=new DataView(e),s=2===r?1:n,u=tt(t,a,2===r?o*i:o*i*n),c=parseInt("1".repeat(a),2);if(1===t){var f=i*(1===r?n*a:a);0!=(7&f)&&(f=f+7&-8);for(var d=0;d<o;++d)for(var h=d*f,p=0;p<i;++p)for(var m=h+p*s*a,g=0;g<s;++g){var v=m+g*a,y=(d*i+p)*s+g,b=Math.floor(v/8),w=v%8;if(w+a<=8)u[y]=l.getUint8(b)>>8-a-w&c;else if(w+a<=16)u[y]=l.getUint16(b)>>16-a-w&c;else if(w+a<=24){var x=l.getUint16(b)<<8|l.getUint8(b+2);u[y]=x>>24-a-w&c}else u[y]=l.getUint32(b)>>32-a-w&c}}return u.buffer}je([void 0,1],(function(){return r.e(5918).then(r.bind(r,5918)).then((function(e){return e.default}))})),je(5,(function(){return r.e(6663).then(r.bind(r,66663)).then((function(e){return e.default}))})),je(6,(function(){throw new Error("old style JPEG compression is not supported.")})),je(7,(function(){return r.e(6898).then(r.bind(r,56898)).then((function(e){return e.default}))})),je([8,32946],(function(){return Promise.all([r.e(2655),r.e(1773)]).then(r.bind(r,71773)).then((function(e){return e.default}))})),je(32773,(function(){return r.e(7764).then(r.bind(r,97764)).then((function(e){return e.default}))})),je(34887,(function(){return Promise.all([r.e(2655),r.e(317),r.e(691)]).then(r.bind(r,80691)).then((function(e){return e.default}))})),je(50001,(function(){return r.e(6036).then(r.bind(r,66036)).then((function(e){return e.default}))}));var at=function(){function e(t,r,n,a,i,o){(0,Ce.Z)(this,e),this.fileDirectory=t,this.geoKeys=r,this.dataView=n,this.littleEndian=a,this.tiles=i?{}:null,this.isTiled=!t.StripOffsets;var l=t.PlanarConfiguration;if(this.planarConfiguration=void 0===l?1:l,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o}var t,r,n,i;return(0,Te.Z)(e,[{key:"getFileDirectory",value:function(){return this.fileDirectory}},{key:"getGeoKeys",value:function(){return this.geoKeys}},{key:"getWidth",value:function(){return this.fileDirectory.ImageWidth}},{key:"getHeight",value:function(){return this.fileDirectory.ImageLength}},{key:"getSamplesPerPixel",value:function(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}},{key:"getTileWidth",value:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}},{key:"getTileHeight",value:function(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}},{key:"getBlockWidth",value:function(){return this.getTileWidth()}},{key:"getBlockHeight",value:function(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}},{key:"getBytesPerPixel",value:function(){for(var e=0,t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}},{key:"getSampleByteSize",value:function(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index ".concat(e," is out of range."));return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}},{key:"getReaderForSample",value:function(e){var t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(e,t){return(0,Pe.g)(this,e,t)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}},{key:"getSampleFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}},{key:"getBitsPerSample",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.BitsPerSample[e]}},{key:"getArrayForSample",value:function(e,t){return tt(this.getSampleFormat(e),this.getBitsPerSample(e),t)}},{key:"getTileOrStrip",value:(i=(0,a.Z)(o().mark((function e(t,r,n,i,l){var s,u,c,f,d,h,p,m,g=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Math.ceil(this.getWidth()/this.getTileWidth()),u=Math.ceil(this.getHeight()/this.getTileHeight()),f=this.tiles,1===this.planarConfiguration?c=r*s+t:2===this.planarConfiguration&&(c=n*s*u+r*s+t),this.isTiled?(d=this.fileDirectory.TileOffsets[c],h=this.fileDirectory.TileByteCounts[c]):(d=this.fileDirectory.StripOffsets[c],h=this.fileDirectory.StripByteCounts[c]),e.next=7,this.source.fetch([{offset:d,length:h}],l);case 7:return p=e.sent[0],null!==f&&f[c]?m=f[c]:(m=(0,a.Z)(o().mark((function e(){var t,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.decode(g.fileDirectory,p);case 2:return t=e.sent,n=g.getSampleFormat(),a=g.getBitsPerSample(),rt(n,a)&&(t=nt(t,n,g.planarConfiguration,g.getSamplesPerPixel(),a,g.getTileWidth(),g.getBlockHeight(r))),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))(),null!==f&&(f[c]=m)),e.t0=t,e.t1=r,e.t2=n,e.next=14,m;case 14:return e.t3=e.sent,e.abrupt("return",{x:e.t0,y:e.t1,sample:e.t2,data:e.t3});case 16:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,a){return i.apply(this,arguments)})},{key:"_readRaster",value:(n=(0,a.Z)(o().mark((function e(t,r,n,a,i,l,s,u,c){var f,d,h,p,m,g,v,y,b,w,x,E,k,Z,S,I,M,T,C,P,D=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(f=this.getTileWidth(),d=this.getTileHeight(),h=this.getWidth(),p=this.getHeight(),m=Math.max(Math.floor(t[0]/f),0),g=Math.min(Math.ceil(t[2]/f),Math.ceil(h/f)),v=Math.max(Math.floor(t[1]/d),0),y=Math.min(Math.ceil(t[3]/d),Math.ceil(p/d)),b=t[2]-t[0],w=this.getBytesPerPixel(),x=[],E=[],k=0;k<r.length;++k)1===this.planarConfiguration?x.push(et(this.fileDirectory.BitsPerSample,0,r[k])/8):x.push(0),E.push(this.getReaderForSample(r[k]));for(Z=[],S=this.littleEndian,I=v;I<y;++I)for(M=m;M<g;++M)for(T=function(e){var o=e,l=r[e];2===D.planarConfiguration&&(w=D.getSampleByteSize(e));var s=D.getTileOrStrip(M,I,l,i,c).then((function(e){for(var i=e.data,l=new DataView(i),s=D.getBlockHeight(e.y),u=e.y*d,c=e.x*f,m=u+s,g=(e.x+1)*f,v=E[o],y=Math.min(s,s-(m-t[3]),p-u),k=Math.min(f,f-(g-t[2]),h-c),Z=Math.max(0,t[1]-u);Z<y;++Z)for(var I=Math.max(0,t[0]-c);I<k;++I){var M=(Z*f+I)*w,T=v.call(l,M+x[o],S),C=void 0;a?(C=(Z+u-t[1])*b*r.length+(I+c-t[0])*r.length+o,n[C]=T):(C=(Z+u-t[1])*b+I+c-t[0],n[o][C]=T)}}));Z.push(s)},C=0;C<r.length;++C)T(C);return e.next=18,Promise.all(Z);case 18:if(!(l&&t[2]-t[0]!==l||s&&t[3]-t[1]!==s)){e.next=23;break}return(P=a?Je(n,t[2]-t[0],t[3]-t[1],l,s,r.length,u):Xe(n,t[2]-t[0],t[3]-t[1],l,s,u)).width=l,P.height=s,e.abrupt("return",P);case 23:return n.width=l||t[2]-t[0],n.height=s||t[3]-t[1],e.abrupt("return",n);case 26:case"end":return e.stop()}}),e,this)}))),function(e,t,r,a,i,o,l,s,u){return n.apply(this,arguments)})},{key:"readRasters",value:(r=(0,a.Z)(o().mark((function e(){var t,r,n,a,i,l,s,u,c,f,d,h,p,m,g,v,y,b,w,x,E,k,Z,S,I,M,T=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=T.length>0&&void 0!==T[0]?T[0]:{},r=t.window,n=t.samples,a=void 0===n?[]:n,i=t.interleave,l=t.pool,s=void 0===l?null:l,u=t.width,c=t.height,f=t.resampleMethod,d=t.fillValue,h=t.signal,!((p=r||[0,0,this.getWidth(),this.getHeight()])[0]>p[2]||p[1]>p[3])){e.next=4;break}throw new Error("Invalid subsets");case 4:if(m=p[2]-p[0],g=p[3]-p[1],v=m*g,y=this.getSamplesPerPixel(),a&&a.length){e.next=12;break}for(b=0;b<y;++b)a.push(b);e.next=19;break;case 12:w=0;case 13:if(!(w<a.length)){e.next=19;break}if(!(a[w]>=y)){e.next=16;break}return e.abrupt("return",Promise.reject(new RangeError("Invalid sample index '".concat(a[w],"'."))));case 16:++w,e.next=13;break;case 19:if(i)E=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,k=Math.max.apply(null,this.fileDirectory.BitsPerSample),x=tt(E,k,v*a.length),d&&x.fill(d);else for(x=[],Z=0;Z<a.length;++Z)S=this.getArrayForSample(a[Z],v),Array.isArray(d)&&Z<d.length?S.fill(d[Z]):d&&!Array.isArray(d)&&S.fill(d),x.push(S);if(e.t0=s,e.t0){e.next=25;break}return e.next=24,He(this.fileDirectory);case 24:e.t0=e.sent;case 25:return I=e.t0,e.next=28,this._readRaster(p,a,x,i,I,u,c,f,h);case 28:return M=e.sent,e.abrupt("return",M);case 30:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"readRGB",value:(t=(0,a.Z)(o().mark((function e(){var t,r,n,a,i,l,s,u,c,f,d,h,p,m,g,v,y,b,w,x,E,k,Z,S,I,M,T,C=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=C.length>0&&void 0!==C[0]?C[0]:{},r=t.window,n=t.interleave,a=void 0===n||n,i=t.pool,l=void 0===i?null:i,s=t.width,u=t.height,c=t.resampleMethod,f=t.enableAlpha,d=void 0!==f&&f,h=t.signal,!((p=r||[0,0,this.getWidth(),this.getHeight()])[0]>p[2]||p[1]>p[3])){e.next=4;break}throw new Error("Invalid subsets");case 4:if((m=this.fileDirectory.PhotometricInterpretation)!==Ge.Ie.RGB){e.next=9;break}if(g=[0,1,2],this.fileDirectory.ExtraSamples!==Ge.pd.Unspecified&&d)for(g=[],v=0;v<this.fileDirectory.BitsPerSample.length;v+=1)g.push(v);return e.abrupt("return",this.readRasters({window:r,interleave:a,samples:g,pool:l,width:s,height:u,resampleMethod:c,signal:h}));case 9:e.t0=m,e.next=e.t0===Ge.Ie.WhiteIsZero||e.t0===Ge.Ie.BlackIsZero||e.t0===Ge.Ie.Palette?12:e.t0===Ge.Ie.CMYK?14:e.t0===Ge.Ie.YCbCr||e.t0===Ge.Ie.CIELab?16:18;break;case 12:return y=[0],e.abrupt("break",19);case 14:return y=[0,1,2,3],e.abrupt("break",19);case 16:return y=[0,1,2],e.abrupt("break",19);case 18:throw new Error("Invalid or unsupported photometric interpretation.");case 19:return b={window:p,interleave:!0,samples:y,pool:l,width:s,height:u,resampleMethod:c,signal:h},w=this.fileDirectory,e.next=23,this.readRasters(b);case 23:x=e.sent,E=Math.pow(2,this.fileDirectory.BitsPerSample[0]),e.t1=m,e.next=e.t1===Ge.Ie.WhiteIsZero?28:e.t1===Ge.Ie.BlackIsZero?30:e.t1===Ge.Ie.Palette?32:e.t1===Ge.Ie.CMYK?34:e.t1===Ge.Ie.YCbCr?36:e.t1===Ge.Ie.CIELab?38:40;break;case 28:return k=Fe(x,E),e.abrupt("break",41);case 30:return k=Ne(x,E),e.abrupt("break",41);case 32:return k=Ue(x,w.ColorMap),e.abrupt("break",41);case 34:return k=Le(x),e.abrupt("break",41);case 36:return k=Ve(x),e.abrupt("break",41);case 38:return k=_e(x),e.abrupt("break",41);case 40:throw new Error("Unsupported photometric interpretation.");case 41:if(!a){for(Z=new Uint8Array(k.length/3),S=new Uint8Array(k.length/3),I=new Uint8Array(k.length/3),M=0,T=0;M<k.length;M+=3,++T)Z[T]=k[M],S[T]=k[M+1],I[T]=k[M+2];k=[Z,S,I]}return k.width=x.width,k.height=x.height,e.abrupt("return",k);case 45:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getTiePoints",value:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var e=[],t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}},{key:"getGDALMetadata",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={};if(!this.fileDirectory.GDAL_METADATA)return null;var r=this.fileDirectory.GDAL_METADATA,n=Re()(r,"Item");n=null===e?n.filter((function(e){return void 0===Ae()(e,"sample")})):n.filter((function(t){return Number(Ae()(t,"sample"))===e}));for(var a=0;a<n.length;++a){var i=n[a];t[Ae()(i,"name")]=i.inner}return t}},{key:"getGDALNoData",value:function(){if(!this.fileDirectory.GDAL_NODATA)return null;var e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}},{key:"getOrigin",value:function(){var e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}},{key:"getResolution",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(r)return[r[0],r[5],r[10]];if(e){var n=e.getResolution(),a=(0,ke.Z)(n,3),i=a[0],o=a[1],l=a[2];return[i*e.getWidth()/this.getWidth(),o*e.getHeight()/this.getHeight(),l*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}},{key:"pixelIsArea",value:function(){return 1===this.geoKeys.GTRasterTypeGeoKey}},{key:"getBoundingBox",value:function(){var e=this.getOrigin(),t=this.getResolution(),r=e[0],n=e[1],a=r+t[0]*this.getWidth(),i=n+t[1]*this.getHeight();return[Math.min(r,a),Math.min(n,i),Math.max(r,a),Math.max(n,i)]}}]),e}(),it=at,ot=function(){function e(t){(0,Ce.Z)(this,e),this._dataView=new DataView(t)}return(0,Te.Z)(e,[{key:"buffer",get:function(){return this._dataView.buffer}},{key:"getUint64",value:function(e,t){var r,n=this.getUint32(e,t),a=this.getUint32(e+4,t);if(t){if(r=n+Math.pow(2,32)*a,!Number.isSafeInteger(r))throw new Error("".concat(r," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return r}if(r=Math.pow(2,32)*n+a,!Number.isSafeInteger(r))throw new Error("".concat(r," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return r}},{key:"getInt64",value:function(e,t){for(var r=0,n=(128&this._dataView.getUint8(e+(t?7:0)))>0,a=!0,i=0;i<8;i++){var o=this._dataView.getUint8(e+(t?i:7-i));n&&(a?0!==o&&(o=255&~(o-1),a=!1):o=255&~o),r+=o*Math.pow(256,i)}return n&&(r=-r),r}},{key:"getUint8",value:function(e,t){return this._dataView.getUint8(e,t)}},{key:"getInt8",value:function(e,t){return this._dataView.getInt8(e,t)}},{key:"getUint16",value:function(e,t){return this._dataView.getUint16(e,t)}},{key:"getInt16",value:function(e,t){return this._dataView.getInt16(e,t)}},{key:"getUint32",value:function(e,t){return this._dataView.getUint32(e,t)}},{key:"getInt32",value:function(e,t){return this._dataView.getInt32(e,t)}},{key:"getFloat16",value:function(e,t){return(0,Pe.g)(this._dataView,e,t)}},{key:"getFloat32",value:function(e,t){return this._dataView.getFloat32(e,t)}},{key:"getFloat64",value:function(e,t){return this._dataView.getFloat64(e,t)}}]),e}(),lt=function(){function e(t,r,n,a){(0,Ce.Z)(this,e),this._dataView=new DataView(t),this._sliceOffset=r,this._littleEndian=n,this._bigTiff=a}return(0,Te.Z)(e,[{key:"sliceOffset",get:function(){return this._sliceOffset}},{key:"sliceTop",get:function(){return this._sliceOffset+this.buffer.byteLength}},{key:"littleEndian",get:function(){return this._littleEndian}},{key:"bigTiff",get:function(){return this._bigTiff}},{key:"buffer",get:function(){return this._dataView.buffer}},{key:"covers",value:function(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}},{key:"readUint8",value:function(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}},{key:"readInt8",value:function(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}},{key:"readUint16",value:function(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}},{key:"readInt16",value:function(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}},{key:"readUint32",value:function(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}},{key:"readInt32",value:function(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}},{key:"readFloat32",value:function(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}},{key:"readFloat64",value:function(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}},{key:"readUint64",value:function(e){var t,r=this.readUint32(e),n=this.readUint32(e+4);if(this._littleEndian){if(t=r+Math.pow(2,32)*n,!Number.isSafeInteger(t))throw new Error("".concat(t," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return t}if(t=Math.pow(2,32)*r+n,!Number.isSafeInteger(t))throw new Error("".concat(t," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return t}},{key:"readInt64",value:function(e){for(var t=0,r=(128&this._dataView.getUint8(e+(this._littleEndian?7:0)))>0,n=!0,a=0;a<8;a++){var i=this._dataView.getUint8(e+(this._littleEndian?a:7-a));r&&(n?0!==i&&(i=255&~(i-1),n=!1):i=255&~i),t+=i*Math.pow(256,a)}return r&&(t=-t),t}},{key:"readOffset",value:function(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}]),e}(),st=function(){function e(){(0,Ce.Z)(this,e)}var t,r,n;return(0,Te.Z)(e,[{key:"fetch",value:(n=(0,a.Z)(o().mark((function e(t){var r,n=this,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,e.abrupt("return",Promise.all(t.map((function(e){return n.fetchSlice(e,r)}))));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"fetchSlice",value:(r=(0,a.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("fetching of slice ".concat(t," not possible, not implemented"));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"fileSize",get:function(){return null}},{key:"close",value:(t=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}();function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,Ie.Z)(e);if(t){var a=(0,Ie.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,Se.Z)(this,r)}}var ct=function(e){(0,Ze.Z)(n,e);var t,r=ut(n);function n(e){var t;return(0,Ce.Z)(this,n),(t=r.call(this)).file=e,t}return(0,Te.Z)(n,[{key:"fetchSlice",value:(t=(0,a.Z)(o().mark((function e(t,r){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var i=n.file.slice(t.offset,t.offset+t.length),o=new FileReader;o.onload=function(t){return e(t.target.result)},o.onerror=a,o.onabort=a,o.readAsArrayBuffer(i),r&&r.addEventListener("abort",(function(){return o.abort()}))})));case 1:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),n}(st);function ft(e){return new ct(e)}function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){(0,E.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,Ie.Z)(e);if(t){var a=(0,Ie.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,Se.Z)(this,r)}}function mt(e){switch(e){case Ge.sf.BYTE:case Ge.sf.ASCII:case Ge.sf.SBYTE:case Ge.sf.UNDEFINED:return 1;case Ge.sf.SHORT:case Ge.sf.SSHORT:return 2;case Ge.sf.LONG:case Ge.sf.SLONG:case Ge.sf.FLOAT:case Ge.sf.IFD:return 4;case Ge.sf.RATIONAL:case Ge.sf.SRATIONAL:case Ge.sf.DOUBLE:case Ge.sf.LONG8:case Ge.sf.SLONG8:case Ge.sf.IFD8:return 8;default:throw new RangeError("Invalid field type: ".concat(e))}}function gt(e){var t=e.GeoKeyDirectory;if(!t)return null;for(var r={},n=4;n<=4*t[3];n+=4){var a=Ge.P1[t[n]],i=t[n+1]?Ge.L[t[n+1]]:null,o=t[n+2],l=t[n+3],s=null;if(i){if(null==(s=e[i]))throw new Error("Could not get value of geoKey '".concat(a,"'."));"string"==typeof s?s=s.substring(l,l+o-1):s.subarray&&(s=s.subarray(l,l+o),1===o&&(s=s[0]))}else s=l;r[a]=s}return r}function vt(e,t,r,n){var a=null,i=null,o=mt(t);switch(t){case Ge.sf.BYTE:case Ge.sf.ASCII:case Ge.sf.UNDEFINED:a=new Uint8Array(r),i=e.readUint8;break;case Ge.sf.SBYTE:a=new Int8Array(r),i=e.readInt8;break;case Ge.sf.SHORT:a=new Uint16Array(r),i=e.readUint16;break;case Ge.sf.SSHORT:a=new Int16Array(r),i=e.readInt16;break;case Ge.sf.LONG:case Ge.sf.IFD:a=new Uint32Array(r),i=e.readUint32;break;case Ge.sf.SLONG:a=new Int32Array(r),i=e.readInt32;break;case Ge.sf.LONG8:case Ge.sf.IFD8:a=new Array(r),i=e.readUint64;break;case Ge.sf.SLONG8:a=new Array(r),i=e.readInt64;break;case Ge.sf.RATIONAL:a=new Uint32Array(2*r),i=e.readUint32;break;case Ge.sf.SRATIONAL:a=new Int32Array(2*r),i=e.readInt32;break;case Ge.sf.FLOAT:a=new Float32Array(r),i=e.readFloat32;break;case Ge.sf.DOUBLE:a=new Float64Array(r),i=e.readFloat64;break;default:throw new RangeError("Invalid field type: ".concat(t))}if(t!==Ge.sf.RATIONAL&&t!==Ge.sf.SRATIONAL)for(var l=0;l<r;++l)a[l]=i.call(e,n+l*o);else for(var s=0;s<r;s+=2)a[s]=i.call(e,n+s*o),a[s+1]=i.call(e,n+(s*o+4));return t===Ge.sf.ASCII?new TextDecoder("utf-8").decode(a):a}var yt=(0,Te.Z)((function e(t,r,n){(0,Ce.Z)(this,e),this.fileDirectory=t,this.geoKeyDirectory=r,this.nextIFDByteOffset=n})),bt=function(e){(0,Ze.Z)(r,e);var t=pt(r);function r(e){var n;return(0,Ce.Z)(this,r),(n=t.call(this,"No image at index ".concat(e))).index=e,n}return(0,Te.Z)(r)}((0,Me.Z)(Error)),wt=function(){function e(){(0,Ce.Z)(this,e)}var t;return(0,Te.Z)(e,[{key:"readRasters",value:(t=(0,a.Z)(o().mark((function e(){var t,r,n,a,i,l,s,u,c,f,d,h,p,m,g,v,y,b,w,x,E,k,Z,S,I,M,T,C,P,D,A,O,R,G,F,N,U,L,V,_=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.length>0&&void 0!==_[0]?_[0]:{},r=t.window,n=t.width,a=t.height,i=t.resX,l=t.resY,s=t.bbox,e.next=5,this.getImage();case 5:return u=e.sent,c=u,e.next=9,this.getImageCount();case 9:if(f=e.sent,d=u.getBoundingBox(),!r||!s){e.next=13;break}throw new Error('Both "bbox" and "window" passed.');case 13:if(!n&&!a){e.next=24;break}if(r&&(h=u.getOrigin(),p=(0,ke.Z)(h,2),m=p[0],g=p[1],v=u.getResolution(),y=(0,ke.Z)(v,2),b=y[0],w=y[1],s=[m+r[0]*b,g+r[1]*w,m+r[2]*b,g+r[3]*w]),x=s||d,!n){e.next=20;break}if(!i){e.next=19;break}throw new Error("Both width and resX passed");case 19:i=(x[2]-x[0])/n;case 20:if(!a){e.next=24;break}if(!l){e.next=23;break}throw new Error("Both width and resY passed");case 23:l=(x[3]-x[1])/a;case 24:if(!i&&!l){e.next=48;break}E=[],k=0;case 27:if(!(k<f)){e.next=36;break}return e.next=30,this.getImage(k);case 30:Z=e.sent,S=Z.fileDirectory,I=S.SubfileType,M=S.NewSubfileType,(0===k||2===I||1&M)&&E.push(Z);case 33:++k,e.next=27;break;case 36:E.sort((function(e,t){return e.getWidth()-t.getWidth()})),T=0;case 38:if(!(T<E.length)){e.next=48;break}if(C=E[T],P=(d[2]-d[0])/C.getWidth(),D=(d[3]-d[1])/C.getHeight(),c=C,!(i&&i>P||l&&l>D)){e.next=45;break}return e.abrupt("break",48);case 45:++T,e.next=38;break;case 48:return A=r,s&&(O=u.getOrigin(),R=(0,ke.Z)(O,2),G=R[0],F=R[1],N=c.getResolution(u),U=(0,ke.Z)(N,2),L=U[0],V=U[1],A=[Math.round((s[0]-G)/L),Math.round((s[1]-F)/V),Math.round((s[2]-G)/L),Math.round((s[3]-F)/V)],A=[Math.min(A[0],A[2]),Math.min(A[1],A[3]),Math.max(A[0],A[2]),Math.max(A[1],A[3])]),e.abrupt("return",c.readRasters(ht(ht({},t),{},{window:A})));case 51:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),xt=function(e){(0,Ze.Z)(f,e);var t,r,n,i,l,s,u,c=pt(f);function f(e,t,r,n){var a,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(0,Ce.Z)(this,f),(a=c.call(this)).source=e,a.littleEndian=t,a.bigTiff=r,a.firstIFDOffset=n,a.cache=i.cache||!1,a.ifdRequests=[],a.ghostValues=null,a}return(0,Te.Z)(f,[{key:"getSlice",value:(u=(0,a.Z)(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.bigTiff?4048:1024,e.t0=lt,e.next=4,this.source.fetch([{offset:t,length:void 0!==r?r:n}]);case 4:return e.t1=e.sent[0],e.t2=t,e.t3=this.littleEndian,e.t4=this.bigTiff,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"parseFileDirectoryAt",value:(s=(0,a.Z)(o().mark((function e(t){var r,n,a,i,l,s,u,c,f,d,h,p,m,g,v,y,b,w,x,E;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.bigTiff?20:12,n=this.bigTiff?8:2,e.next=4,this.getSlice(t);case 4:if(a=e.sent,i=this.bigTiff?a.readUint64(t):a.readUint16(t),l=i*r+(this.bigTiff?16:6),a.covers(t,l)){e.next=11;break}return e.next=10,this.getSlice(t,l);case 10:a=e.sent;case 11:s={},u=t+(this.bigTiff?8:2),c=0;case 14:if(!(c<i)){e.next=41;break}if(f=a.readUint16(u),d=a.readUint16(u+2),h=this.bigTiff?a.readUint64(u+4):a.readUint32(u+4),p=void 0,m=void 0,g=mt(d),v=u+(this.bigTiff?12:8),!(g*h<=(this.bigTiff?8:4))){e.next=26;break}p=vt(a,d,h,v),e.next=36;break;case 26:if(y=a.readOffset(v),b=mt(d)*h,!a.covers(y,b)){e.next=32;break}p=vt(a,d,h,y),e.next=36;break;case 32:return e.next=34,this.getSlice(y,b);case 34:w=e.sent,p=vt(w,d,h,y);case 36:m=1===h&&-1===Ge.It.indexOf(f)&&d!==Ge.sf.RATIONAL&&d!==Ge.sf.SRATIONAL?p[0]:p,s[Ge.L[f]]=m;case 38:u+=r,++c,e.next=14;break;case 41:return x=gt(s),E=a.readOffset(t+n+r*i),e.abrupt("return",new yt(s,x,E));case 44:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"requestIFD",value:(l=(0,a.Z)(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ifdRequests[t]){e.next=4;break}return e.abrupt("return",this.ifdRequests[t]);case 4:if(0!==t){e.next=9;break}return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),e.abrupt("return",this.ifdRequests[t]);case 9:if(this.ifdRequests[t-1]){e.next=19;break}e.prev=10,this.ifdRequests[t-1]=this.requestIFD(t-1),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(10),!(e.t0 instanceof bt)){e.next=18;break}throw new bt(t);case 18:throw e.t0;case 19:return this.ifdRequests[t]=(0,a.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.ifdRequests[t-1];case 2:if(0!==(n=e.sent).nextIFDByteOffset){e.next=5;break}throw new bt(t);case 5:return e.abrupt("return",r.parseFileDirectoryAt(n.nextIFDByteOffset));case 6:case"end":return e.stop()}}),e)})))(),e.abrupt("return",this.ifdRequests[t]);case 21:case"end":return e.stop()}}),e,this,[[10,14]])}))),function(e){return l.apply(this,arguments)})},{key:"getImage",value:(i=(0,a.Z)(o().mark((function e(){var t,r,n=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:0,e.next=3,this.requestIFD(t);case 3:return r=e.sent,e.abrupt("return",new it(r.fileDirectory,r.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source));case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getImageCount",value:(n=(0,a.Z)(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,r=!0;case 2:if(!r){e.next=18;break}return e.prev=3,e.next=6,this.requestIFD(t);case 6:++t,e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof bt)){e.next=15;break}r=!1,e.next=16;break;case 15:throw e.t0;case 16:e.next=2;break;case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return n.apply(this,arguments)})},{key:"getGhostValues",value:(r=(0,a.Z)(o().mark((function e(){var t,r,n,a,i,l,s,u,c=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.bigTiff?16:8,!this.ghostValues){e.next=3;break}return e.abrupt("return",this.ghostValues);case 3:return n=(r="GDAL_STRUCTURAL_METADATA_SIZE=").length+100,e.next=7,this.getSlice(t,n);case 7:if(a=e.sent,r!==vt(a,Ge.sf.ASCII,r.length,t)){e.next=19;break}if(i=vt(a,Ge.sf.ASCII,n,t),l=i.split("\n")[0],!((s=Number(l.split("=")[1].split(" ")[0])+l.length)>n)){e.next=16;break}return e.next=15,this.getSlice(t,s);case 15:a=e.sent;case 16:u=vt(a,Ge.sf.ASCII,s,t),this.ghostValues={},u.split("\n").filter((function(e){return e.length>0})).map((function(e){return e.split("=")})).forEach((function(e){var t=(0,ke.Z)(e,2),r=t[0],n=t[1];c.ghostValues[r]=n}));case 19:return e.abrupt("return",this.ghostValues);case 20:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"close",value:function(){return"function"==typeof this.source.close&&this.source.close()}}],[{key:"fromSource",value:(t=(0,a.Z)(o().mark((function e(t,r,n){var a,i,l,s,u,c,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch([{offset:0,length:1024}],n);case 2:if(a=e.sent[0],i=new ot(a),18761!==(l=i.getUint16(0,0))){e.next=9;break}s=!0,e.next=14;break;case 9:if(19789!==l){e.next=13;break}s=!1,e.next=14;break;case 13:throw new TypeError("Invalid byte order value.");case 14:if(42!==(u=i.getUint16(2,s))){e.next=19;break}c=!1,e.next=27;break;case 19:if(43!==u){e.next=26;break}if(c=!0,8===i.getUint16(4,s)){e.next=24;break}throw new Error("Unsupported offset byte-size.");case 24:e.next=27;break;case 26:throw new TypeError("Invalid magic number.");case 27:return d=c?i.getUint64(8,s):i.getUint32(4,s),e.abrupt("return",new f(t,s,c,d,r));case 29:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)})}]),f}(wt);function Et(e,t){return kt.apply(this,arguments)}function kt(){return(kt=(0,a.Z)(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xt.fromSource(ft(t),r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zt=r(99467),St=r.n(Zt);function It(e){var t=e.getSampleFormat(),r=e.getBitsPerSample();switch(t){case 1:if(r<=8)return[0,255,St().CV_8UC1];if(r<=16)return[0,65535,St().CV_16UC1];if(r<=32)return[0,4294967295,null];break;case 2:if(8===r)return[-128,127,St().CV_8SC1];if(16===r)return[-32768,32767,St().CV_16UC1];if(32===r)return[-2147483648,2147483647,St().CV_32SC1];break;case 3:switch(r){case 16:case 32:return[-34e37,34e37,St().CV_32FC1];case 64:return[-Number.MAX_VALUE,Number.MAX_VALUE,St().CV_64FC1]}}return null}function Mt(e,t,r){if(255===r&&0===t)return e;var n=1/(r-t),a=-t*n;return Math.ceil(255*Math.min(Math.max(n*e+a,0),1))}var Tt=function(e){var t,r,n=e.loading,i=e.setValue,u=e.setLoading,c=(0,s.cI)({mode:"onSubmit",criteriaMode:"all",defaultValues:{files:""}}),f=c.handleSubmit,d=c.register,h=c.formState.errors,p=l.useCallback(function(){var e=(0,a.Z)(o().mark((function e(t){var r,n,a,l,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof FileList&&t.length>0)){e.next=19;break}return u(!0),e.prev=2,e.next=5,Et(t[0]);case 5:return r=e.sent,e.next=8,r.getImage(0);case 8:if(n=e.sent,a=n.getWidth(),l=n.getHeight(),s=n.getSamplesPerPixel(),c=It(n)){e.next=15;break}throw new Error("invalid tiff.");case 15:i({image:n,width:a,height:l,bands:s,range:c});case 16:return e.prev=16,u(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,,16,19]])})));return function(t){return e.apply(this,arguments)}}(),[i,u]),m=l.useCallback((function(e){p(e.files)}),[p]);return l.createElement("form",{onSubmit:f(m)},l.createElement(he.Z,{spacing:2},l.createElement(pe.Z,{component:"fieldset",error:!(null==h||!h.files),fullWidth:!0},l.createElement("input",Object.assign({},d("files",{required:!0,validate:{length:function(e){return e instanceof FileList&&1===e.length}}}),{disabled:n,accept:".tif, .tiff",type:"file",onChange:function(e){e.target.files&&p(e.target.files)}})),"required"===(null==h||null===(t=h.files)||void 0===t?void 0:t.type)&&l.createElement(me.Z,null,"Required. ",l.createElement("br",null),"ファイルを選択してください。"),"length"===(null==h||null===(r=h.files)||void 0===r?void 0:r.type)&&l.createElement(me.Z,null,"Select only one. ",l.createElement("br",null),"ファイルを1つ選択してください。"))))},Ct=function(e){var t=e.statics,r=l.useRef(null);return l.useEffect((function(){if(t.hist&&r.current){for(var e=r.current;e.firstChild;)e.removeChild(e.firstChild);var a=t.hist.length,i=[2*a,a],o=Math.max.apply(Math,(0,n.Z)(Array.from(t.hist))),l=new(St().Mat.zeros)(i[1],i[0],St().CV_8UC3);St().rectangle(l,new(St().Point)(0,0),new(St().Point)(i[0]-1,i[1]-1),new(St().Scalar)(224,224,224),St().FILLED);for(var s=0;s<a;s++)if(t.hist[s]>0){var u=t.hist[s]*i[1]/o,c=new(St().Point)(s*i[0]/a,i[1]-1),f=new(St().Point)((s+1)*i[0]/a-1,i[1]-u);St().rectangle(l,c,f,new(St().Scalar)(0,0,0),St().FILLED)}var d=new(St().Mat),h=[256,Math.floor(256*i[1]/i[0])];St().resize(l,d,new(St().Size)(h[0],h[1]),0,0,St().INTER_AREA);var p=document.createElement("canvas");p.width=h[0],p.height=h[1],St().imshow(p,d),e.appendChild(p)}}),[t]),l.createElement(he.Z,{spacing:2},l.createElement(x,null,"min ",t.min.value," at (",t.min.position.x,","," ",t.min.position.y,")",l.createElement("br",null),"max ",t.max.value," at (",t.max.position.x,","," ",t.max.position.y,")",l.createElement("br",null),"mean ",t.mean,l.createElement("br",null),"stddev ",t.stddev),t.hist&&l.createElement(x,{ref:r}))},Pt=function(e){var t=e.tiffValue,r=e.loading,i=e.setLoading,u=e.setValue,c=l.useState(""),f=c[0],d=c[1],h=(0,s.cI)({mode:"onSubmit",criteriaMode:"all",defaultValues:{xs:"0",xe:"0",ys:"0",ye:"0",bands:"1"}}),p=h.control,m=h.watch,g=h.handleSubmit,v=h.reset;l.useEffect((function(){v({xs:"0",xe:String(Math.min(1e3,t.width)),ys:"0",ye:String(Math.min(1e3,t.height)),bands:Array.from({length:t.bands},(function(e,t){return t+1})).join()})}),[v,t]);var y=m(),b=l.useMemo((function(){var e=[],t=Array.from(new Set(y.bands.split(",").map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)})))),r=parseInt(y.xs),n=parseInt(y.xe),a=parseInt(y.ys),i=parseInt(y.ye);return isNaN(r)||isNaN(n)||isNaN(a)||isNaN(i)||(n-r>32767&&e.push("tooLargeWidth"),i-a>32767&&e.push("tooLargeHeight"),(n-r)*(i-a)*t.length>6912e4&&e.push("tooLargePixelReading")),e}),[y]),w=l.useCallback((function(e){u(null),d("");var r=[parseInt(e.xs),parseInt(e.xe)],l=[parseInt(e.ys),parseInt(e.ye)];if(isNaN(r[0]))d("nanOfXs");else if(r[0]<0||t.width<r[0])d("outOfRangeXs");else if(isNaN(r[1]))d("nanOfXe");else if(r[1]<0||t.width<r[1])d("outOfRangeXe");else if(r[1]<=r[0])d("reverseX");else if(isNaN(l[0]))d("nanOfYs");else if(l[0]<0||t.height<l[0])d("outOfRangeYs");else if(isNaN(l[1]))d("nanOfYe");else if(l[1]<0||t.height<l[1])d("outOfRangeYe");else if(l[1]<=l[0])d("reverseY");else{var s=Array.from(new Set(e.bands.split(",").map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)})))),c=Math.min.apply(Math,(0,n.Z)(s)),f=Math.max.apply(Math,(0,n.Z)(s));c<1||t.bands<c||f<1||t.bands<f?d("outOfRangeBands"):(0,a.Z)(o().mark((function e(){var n,a,c,f,d,h,p,m,g,v,y,b,w;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[r[1]-r[0],l[1]-l[0]],a=null,c=null,f=[],d=[],e.prev=5,i(!0),h=new Date,e.next=10,t.image.readRasters({window:[r[0],l[0],r[1],l[1]],samples:s.map((function(e){return e-1}))});case 10:p=e.sent,m=new Date,a=(m.getTime()-h.getTime())/1e3,d=Array.isArray(p)?p:[p],g=function(e,t,r,n){var a=St().matFromArray(t[1],t[0],r,Array.from(e)),i=St().minMaxLoc(a),o=i.minVal,l=i.maxVal,s=i.minLoc,u=i.maxLoc,c=new(St().Mat),f=new(St().Mat);St().meanStdDev(a,c,f);var d=f.doubleAt(0,0),h=3.5*d/Math.pow(a.rows,1/3),p=null;try{var m=new(St().MatVector);m.push_back(a);var g=new(St().Mat),v=n[0],y=n[1]+1,b=(y-v)/h;St().calcHist(m,[0],new(St().Mat),g,[b],[v,y]),p=g.data32F}catch(w){}return{mean:c.doubleAt(0,0),stddev:d,min:{value:o,position:s},max:{value:l,position:u},hist:p}},null!==(v=t.range[2])&&(y=new Date,d.forEach((function(e){f.push(g(e,n,v,[t.range[0],t.range[1]]))})),b=new Date,c=(b.getTime()-y.getTime())/1e3);case 17:return e.prev=17,i(!1),w=[],s.forEach((function(e,t){w.push({band:e,data:d.length>t?d[t]:null,statics:f.length>t?f[t]:null})})),u({elapsed:{reading:a,calcurating:c},size:n,values:w}),e.finish(17);case 23:case"end":return e.stop()}}),e,null,[[5,,17,23]])})))()}}),[t,u,i]);return l.createElement("form",{onSubmit:g(w)},l.createElement(ge.ZP,{container:!0,spacing:2},l.createElement(ge.ZP,{item:!0,xs:6},l.createElement(s.Qr,{control:p,name:"xs",render:function(e){var t=e.field,n=e.fieldState,a=n.invalid,i=n.error;return l.createElement(pe.Z,{component:"fieldset",error:a,fullWidth:!0,sx:{mb:2}},l.createElement(ve.Z,Object.assign({},t,{label:"start x",error:a,disabled:r})),"required"===(null==i?void 0:i.type)&&l.createElement(me.Z,null,"Required. ",l.createElement("br",null),"必須です。入力してください。"),"pattern"===(null==i?void 0:i.type)&&l.createElement(me.Z,null,"Must be a positive number or zero. ",l.createElement("br",null),"0以上の整数を入力してください。"))},rules:{required:!0,pattern:/^[0-9]{1,}$/}})),l.createElement(ge.ZP,{item:!0,xs:6},l.createElement(s.Qr,{control:p,name:"xe",render:function(e){var t=e.field,n=e.fieldState,a=n.invalid,i=n.error;return l.createElement(pe.Z,{component:"fieldset",error:a,fullWidth:!0,sx:{mb:2}},l.createElement(ve.Z,Object.assign({},t,{label:"end x",error:a,disabled:r})),"required"===(null==i?void 0:i.type)&&l.createElement(me.Z,null,"Required. ",l.createElement("br",null),"必須です。入力してください。"),"pattern"===(null==i?void 0:i.type)&&l.createElement(me.Z,null,"Must be a positive number or zero. ",l.createElement("br",null),"0以上の整数を入力してください。"))},rules:{required:!0,pattern:/^[0-9]{1,}$/}})),l.createElement(ge.ZP,{item:!0,xs:6},l.createElement(s.Qr,{control:p,name:"ys",render:function(e){var t=e.field,n=e.fieldState,a=n.invalid,i=n.error;return l.createElement(pe.Z,{component:"fieldset",error:a,fullWidth:!0,sx:{mb:2}},l.createElement(ve.Z,Object.assign({},t,{label:"start y",error:a,disabled:r})),"required"===(null==i?void 0:i.type)&&l.createElement(me.Z,null,"Required. ",l.createElement("br",null),"必須です。入力してください。"),"pattern"===(null==i?void 0:i.type)&&l.createElement(me.Z,null,"Must be a positive number or zero. ",l.createElement("br",null),"0以上の整数を入力してください。"))},rules:{required:!0,pattern:/^[0-9]{1,}$/}})),l.createElement(ge.ZP,{item:!0,xs:6},l.createElement(s.Qr,{control:p,name:"ye",render:function(e){var t=e.field,n=e.fieldState,a=n.invalid,i=n.error;return l.createElement(pe.Z,{component:"fieldset",error:a,fullWidth:!0,sx:{mb:2}},l.createElement(ve.Z,Object.assign({},t,{label:"end y",error:a,disabled:r})),"required"===(null==i?void 0:i.type)&&l.createElement(me.Z,null,"Required. ",l.createElement("br",null),"必須です。入力してください。"),"pattern"===(null==i?void 0:i.type)&&l.createElement(me.Z,null,"Must be a positive number or zero. ",l.createElement("br",null),"0以上の整数を入力してください。"))},rules:{required:!0,pattern:/^[0-9]{1,}$/}})),l.createElement(ge.ZP,{item:!0,xs:12},l.createElement(s.Qr,{control:p,name:"bands",render:function(e){var t=e.field,n=e.fieldState,a=n.invalid,i=n.error;return l.createElement(pe.Z,{component:"fieldset",error:a,fullWidth:!0,sx:{mb:2}},l.createElement(ve.Z,Object.assign({},t,{label:"bands",error:a,disabled:r})),"required"===(null==i?void 0:i.type)&&l.createElement(me.Z,null,"Required. ",l.createElement("br",null),"必須です。入力してください。"),"pattern"===(null==i?void 0:i.type)&&l.createElement(me.Z,null,'Must be Integer or ",". ',l.createElement("br",null),"正数またはカンマを入力してください。"))},rules:{required:!0,pattern:/^[1-9]([0-9]|,)*$/}}),b.length>0&&l.createElement(x,null,b.includes("tooLargeWidth")&&l.createElement(me.Z,null,"HTML canvas dosen't support too large width.",l.createElement("br",null),"幅が大きすぎるため、canvasで描画できません。"),b.includes("tooLargeHeight")&&l.createElement(me.Z,null,"HTML canvas dosen't support too large height.",l.createElement("br",null),"高さが大きすぎるため、canvasで描画できません。"),b.includes("tooLargePixelReading")&&l.createElement(me.Z,null,"The browser may crash due to the large area to be loaded."," ",l.createElement("br",null),"読み込む範囲が広いためブラウザがクラッシュする可能性があります。"))),l.createElement(ge.ZP,{item:!0,xs:12},l.createElement(pe.Z,{error:!!f,sx:{mb:2}},l.createElement(ye.Z,{variant:"contained",type:"submit",disabled:r},"Load"),"nanOfXs"===f&&l.createElement(me.Z,null,"start x is Invalid value. ",l.createElement("br",null),"start x に正しい値を入力してくだい。"),"outOfRangeXs"===f&&l.createElement(me.Z,null,"start x is out of range. ",l.createElement("br",null),"start x に範囲外の数値が設定されています。"),"nanOfXe"===f&&l.createElement(me.Z,null,"end x is Invalid value. ",l.createElement("br",null),"end x に正しい値を入力してくだい。"),"outOfRangeXe"===f&&l.createElement(me.Z,null,"end x is out of range. ",l.createElement("br",null),"end x に範囲外の数値が設定されています。"),"reverseX"===f&&l.createElement(me.Z,null,"end x must be greater than start x. ",l.createElement("br",null),"end x に start x よりも小さい数値が設定されています。"),"nanOfYs"===f&&l.createElement(me.Z,null,"start y is Invalid value. ",l.createElement("br",null),"start y に正しい値を入力してくだい。"),"outOfRangeYs"===f&&l.createElement(me.Z,null,"start y is out of range. ",l.createElement("br",null),"start y に範囲外の数値が設定されています。"),"nanOfYe"===f&&l.createElement(me.Z,null,"end x is Invalid value. ",l.createElement("br",null),"end x に正しい値を入力してくだい。"),"outOfRangeYe"===f&&l.createElement(me.Z,null,"end y is out of range. ",l.createElement("br",null),"end y に範囲外の数値が設定されています。"),"reverseY"===f&&l.createElement(me.Z,null,"end y must be greater than start y. ",l.createElement("br",null),"end y に start y よりも小さい数値が設定されています。"),"outOfRangeBands"===f&&l.createElement(me.Z,null,"bands include out of range value. ",l.createElement("br",null),"bands に存在しないレイヤーが設定されています。")))))},Dt=function(e){var t=e.tiffValue,r=e.readResult,n=e.loading,a=e.setLoading,i=l.useRef(null),o=l.useState(""),u=o[0],c=o[1],f=(0,s.cI)({mode:"onSubmit",criteriaMode:"all",defaultValues:{min:"",max:"",r:String(r.values.length>0?r.values[0].band:1),g:String(r.values.length>1?r.values[1].band:1),b:String(r.values.length>2?r.values[2].band:1)}}),d=f.control,h=f.handleSubmit,p=l.useCallback((function(e){var n,o,l;c("");var s=parseInt(e.r),u=parseInt(e.g),f=parseInt(e.b),d=null===(n=r.values.find((function(e){return e.band===s})))||void 0===n?void 0:n.data,h=null===(o=r.values.find((function(e){return e.band===u})))||void 0===o?void 0:o.data,p=null===(l=r.values.find((function(e){return e.band===f})))||void 0===l?void 0:l.data;if(d)if(h)if(p){var m=parseFloat(e.min),g=parseFloat(e.max);if(!isNaN(m)&&!isNaN(g)&&g<=m)c("reverseCanvasValue");else{var v=i.current;if(v){for(;v.firstChild;)v.removeChild(v.firstChild);try{a(!0);for(var y=isNaN(m)?t.range[0]:m,b=isNaN(g)?t.range[1]:g,w=St().CV_8UC3,x=d.length,E=[],k=0;k<x;k++)E.push(Mt(d[k],y,b)),E.push(Mt(h[k],y,b)),E.push(Mt(p[k],y,b));var Z=document.createElement("canvas");Z.width=r.size[0],Z.height=r.size[1];var S=St().matFromArray(r.size[1],r.size[0],w,E);St().imshow(Z,S),v.appendChild(Z)}finally{a(!1)}}}}else c("invalidB");else c("invalidG");else c("invalidR")}),[t,r,a]);return l.createElement(he.Z,{spacing:2},l.createElement(be.Z,{variant:"subtitle2",sx:{mb:1}},"Draw Config"),l.createElement("form",{onSubmit:h(p)},l.createElement(ge.ZP,{container:!0,spacing:2},l.createElement(ge.ZP,{item:!0,xs:4},l.createElement(s.Qr,{control:d,name:"r",render:function(e){var t=e.field,a=e.fieldState.invalid;return l.createElement(pe.Z,{component:"fieldset",error:a,fullWidth:!0,sx:{mb:2}},l.createElement(we.Z,{id:"select-r-label"},"R"),l.createElement(xe.Z,Object.assign({},t,{labelId:"select-r-label",label:"R",error:a,disabled:n}),r.values.map((function(e){return l.createElement(V,{key:e.band,value:e.band},e.band)}))))}})),l.createElement(ge.ZP,{item:!0,xs:4},l.createElement(s.Qr,{control:d,name:"g",render:function(e){var t=e.field,a=e.fieldState.invalid;return l.createElement(pe.Z,{component:"fieldset",error:a,fullWidth:!0,sx:{mb:2}},l.createElement(we.Z,{id:"select-g-label"},"G"),l.createElement(xe.Z,Object.assign({},t,{labelId:"select-g-label",label:"G",error:a,disabled:n}),r.values.map((function(e){return l.createElement(V,{key:e.band,value:e.band},e.band)}))))}})),l.createElement(ge.ZP,{item:!0,xs:4},l.createElement(s.Qr,{control:d,name:"b",render:function(e){var t=e.field,a=e.fieldState.invalid;return l.createElement(pe.Z,{component:"fieldset",error:a,fullWidth:!0,sx:{mb:2}},l.createElement(we.Z,{id:"select-b-label"},"B"),l.createElement(xe.Z,Object.assign({},t,{labelId:"select-b-label",label:"B",error:a,disabled:n}),r.values.map((function(e){return l.createElement(V,{key:e.band,value:e.band},e.band)}))))}})),l.createElement(ge.ZP,{item:!0,xs:6},l.createElement(s.Qr,{control:d,name:"min",render:function(e){var t=e.field,r=e.fieldState,a=r.invalid,i=r.error;return l.createElement(pe.Z,{component:"fieldset",error:a,fullWidth:!0,sx:{mb:2}},l.createElement(ve.Z,Object.assign({},t,{label:"min (optional)",error:a,disabled:n})),"pattern"===(null==i?void 0:i.type)&&l.createElement(me.Z,null,"Must be number. ",l.createElement("br",null),"数値を入力してください。"))},rules:{pattern:/^-?[0-9]+(\.[0-9]+)*$/}})),l.createElement(ge.ZP,{item:!0,xs:6},l.createElement(s.Qr,{control:d,name:"max",render:function(e){var t=e.field,r=e.fieldState,a=r.invalid,i=r.error;return l.createElement(pe.Z,{component:"fieldset",error:a,fullWidth:!0,sx:{mb:2}},l.createElement(ve.Z,Object.assign({},t,{label:"max (optional)",error:a,disabled:n})),"pattern"===(null==i?void 0:i.type)&&l.createElement(me.Z,null,"Must be number. ",l.createElement("br",null),"数値を入力してください。"))},rules:{pattern:/^-?[0-9]+(\.[0-9]+)*$/}})),l.createElement(ge.ZP,{item:!0,xs:12},l.createElement(pe.Z,{error:!!u,sx:{mb:2}},l.createElement(ye.Z,{variant:"contained",type:"submit",disabled:n},"Draw"),"inavlidR"===u&&l.createElement(me.Z,null,"r is invalid. ",l.createElement("br",null),"rの値が不正です。"),"inavlidG"===u&&l.createElement(me.Z,null,"g is invalid. ",l.createElement("br",null),"gの値が不正です。"),"inavlidB"===u&&l.createElement(me.Z,null,"b is invalid. ",l.createElement("br",null),"bの値が不正です。"),"reverseCanvasValue"===u&&l.createElement(me.Z,null,"max must be greater than min. ",l.createElement("br",null),"max に min よりも小さい数値が設定されています。"))))),l.createElement(x,{ref:i,sx:{py:2}}))},At=function(){var e=l.useState(!1),t=e[0],r=e[1],n=l.useState(),a=n[0],i=n[1],o=l.useState(null),s=o[0],c=o[1];return l.createElement(l.Fragment,null,l.createElement(u.Helmet,null,l.createElement("title",null,"Univariate"),l.createElement("meta",{name:"description",content:"Univariate of GeoTIFF."}),l.createElement("link",{rel:"canonical",href:"https://yonda-yonda.github.io/exmap/univar"}),l.createElement("link",{rel:"icon",type:"image/x-icon",href:"https://github.githubassets.com/favicon.ico"}),l.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),l.createElement("meta",{name:"twitter:card",content:"summary_large_image"}),l.createElement("meta",{name:"twitter:title",content:"Univariate of GeoTIFF"}),l.createElement("meta",{name:"twitter:description",content:"GeoTIFFの統計量を計算します。"}),l.createElement("meta",{property:"og:url",content:"https://yonda-yonda.github.io/exmap/univar"}),l.createElement("meta",{name:"twitter:image",content:"https://yonda-yonda.github.io/exmap/image/twitter_univar.png"})),l.createElement(Ee.Z,null,l.createElement(be.Z,{variant:"h2",component:"h1"},"Univariate"),l.createElement(he.Z,{my:4,spacing:8},l.createElement(he.Z,{spacing:2},l.createElement(x,null,l.createElement(Tt,{loading:t,setLoading:function(e){r(e)},setValue:function(e){c(null),i(e)}})),a&&(s?l.createElement(x,{sx:{pt:4}},l.createElement(W,{size:"small"},l.createElement(J,null,l.createElement(ie,null,l.createElement(de,{component:"th",scope:"row"},"Reading"),l.createElement(de,null,s.elapsed.reading?s.elapsed.reading+"s":"failed.")),l.createElement(ie,null,l.createElement(de,{component:"th",scope:"row"},"Calcurating"),l.createElement(de,null,s.elapsed.calcurating?s.elapsed.calcurating+"s":"failed.")),s.values.map((function(e,t){return l.createElement(ie,{key:t},l.createElement(de,{component:"th",scope:"row"},"Band ",e.band),l.createElement(de,null,e.statics?l.createElement(Ct,{statics:e.statics}):"failed."))})))),l.createElement(x,{sx:{mt:4}},l.createElement(Dt,{tiffValue:a,readResult:s,loading:t,setLoading:r}))):l.createElement(he.Z,{spacing:2},l.createElement(W,{size:"small"},l.createElement(J,null,l.createElement(ie,null,l.createElement(de,{component:"th",scope:"row"},"Width"),l.createElement(de,null,a.width,"px")),l.createElement(ie,null,l.createElement(de,{component:"th",scope:"row"},"Height"),l.createElement(de,null,a.height,"px")),l.createElement(ie,null,l.createElement(de,{component:"th",scope:"row"},"Number of bands"),l.createElement(de,null,a.bands)))),l.createElement(x,{sx:{pt:2}},l.createElement(Pt,{tiffValue:a,loading:t,setLoading:r,setValue:c}))))))))}},33499:function(){},52999:function(){},8300:function(){}}]);
//# sourceMappingURL=component---src-pages-univar-index-tsx-1cb8322836491cee53c3.js.map