{"version":3,"file":"component---src-pages-localgeotiff-index-tsx-e9924425cb5f911df418.js","mappings":"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","sources":["webpack://exmap/./node_modules/colormap/colorScale.js","webpack://exmap/./node_modules/colormap/index.js","webpack://exmap/./node_modules/geotiff/dist-module/globals.js","webpack://exmap/./node_modules/lerp/index.js","webpack://exmap/./node_modules/@mui/material/Divider/dividerClasses.js","webpack://exmap/./node_modules/@mui/material/ListItemIcon/listItemIconClasses.js","webpack://exmap/./node_modules/@mui/material/ListItemText/listItemTextClasses.js","webpack://exmap/./node_modules/@mui/material/MenuItem/menuItemClasses.js","webpack://exmap/./node_modules/@mui/material/MenuItem/MenuItem.js","webpack://exmap/./node_modules/geotiff/dist-module/rgb.js","webpack://exmap/./node_modules/geotiff/dist-module/compression/index.js","webpack://exmap/./node_modules/geotiff/dist-module/resample.js","webpack://exmap/./node_modules/geotiff/dist-module/geotiffimage.js","webpack://exmap/./node_modules/geotiff/dist-module/dataview64.js","webpack://exmap/./node_modules/geotiff/dist-module/dataslice.js","webpack://exmap/./node_modules/geotiff/dist-module/source/httputils.js","webpack://exmap/./node_modules/geotiff/dist-module/source/basesource.js","webpack://exmap/./node_modules/quick-lru/index.js","webpack://exmap/./node_modules/geotiff/dist-module/utils.js","webpack://exmap/./node_modules/geotiff/dist-module/source/blockedsource.js","webpack://exmap/./node_modules/geotiff/dist-module/source/client/base.js","webpack://exmap/./node_modules/geotiff/dist-module/source/client/fetch.js","webpack://exmap/./node_modules/geotiff/dist-module/source/client/xhr.js","webpack://exmap/./node_modules/geotiff/dist-module/source/client/http.js","webpack://exmap/./node_modules/geotiff/dist-module/source/remote.js","webpack://exmap/./node_modules/geotiff/dist-module/source/filereader.js","webpack://exmap/./node_modules/geotiff/dist-module/geotiff.js","webpack://exmap/./node_modules/geotiff/dist-module/pool.js","webpack://exmap/./src/scripts/GeotiffGrid/Reader.ts","webpack://exmap/./src/scripts/GeotiffGrid/Regional.ts","webpack://exmap/./src/pages/localgeotiff/index.tsx"],"sourcesContent":["module.exports = {\n  \"jet\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 131]\n  }, {\n    \"index\": 0.125,\n    \"rgb\": [0, 60, 170]\n  }, {\n    \"index\": 0.375,\n    \"rgb\": [5, 255, 255]\n  }, {\n    \"index\": 0.625,\n    \"rgb\": [255, 255, 0]\n  }, {\n    \"index\": 0.875,\n    \"rgb\": [250, 0, 0]\n  }, {\n    \"index\": 1,\n    \"rgb\": [128, 0, 0]\n  }],\n  \"hsv\": [{\n    \"index\": 0,\n    \"rgb\": [255, 0, 0]\n  }, {\n    \"index\": 0.169,\n    \"rgb\": [253, 255, 2]\n  }, {\n    \"index\": 0.173,\n    \"rgb\": [247, 255, 2]\n  }, {\n    \"index\": 0.337,\n    \"rgb\": [0, 252, 4]\n  }, {\n    \"index\": 0.341,\n    \"rgb\": [0, 252, 10]\n  }, {\n    \"index\": 0.506,\n    \"rgb\": [1, 249, 255]\n  }, {\n    \"index\": 0.671,\n    \"rgb\": [2, 0, 253]\n  }, {\n    \"index\": 0.675,\n    \"rgb\": [8, 0, 253]\n  }, {\n    \"index\": 0.839,\n    \"rgb\": [255, 0, 251]\n  }, {\n    \"index\": 0.843,\n    \"rgb\": [255, 0, 245]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 0, 6]\n  }],\n  \"hot\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 0]\n  }, {\n    \"index\": 0.3,\n    \"rgb\": [230, 0, 0]\n  }, {\n    \"index\": 0.6,\n    \"rgb\": [255, 210, 0]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 255, 255]\n  }],\n  \"spring\": [{\n    \"index\": 0,\n    \"rgb\": [255, 0, 255]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 255, 0]\n  }],\n  \"summer\": [{\n    \"index\": 0,\n    \"rgb\": [0, 128, 102]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 255, 102]\n  }],\n  \"autumn\": [{\n    \"index\": 0,\n    \"rgb\": [255, 0, 0]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 255, 0]\n  }],\n  \"winter\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 255]\n  }, {\n    \"index\": 1,\n    \"rgb\": [0, 255, 128]\n  }],\n  \"bone\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 0]\n  }, {\n    \"index\": 0.376,\n    \"rgb\": [84, 84, 116]\n  }, {\n    \"index\": 0.753,\n    \"rgb\": [169, 200, 200]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 255, 255]\n  }],\n  \"copper\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 0]\n  }, {\n    \"index\": 0.804,\n    \"rgb\": [255, 160, 102]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 199, 127]\n  }],\n  \"greys\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 0]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 255, 255]\n  }],\n  \"yignbu\": [{\n    \"index\": 0,\n    \"rgb\": [8, 29, 88]\n  }, {\n    \"index\": 0.125,\n    \"rgb\": [37, 52, 148]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [34, 94, 168]\n  }, {\n    \"index\": 0.375,\n    \"rgb\": [29, 145, 192]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [65, 182, 196]\n  }, {\n    \"index\": 0.625,\n    \"rgb\": [127, 205, 187]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [199, 233, 180]\n  }, {\n    \"index\": 0.875,\n    \"rgb\": [237, 248, 217]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 255, 217]\n  }],\n  \"greens\": [{\n    \"index\": 0,\n    \"rgb\": [0, 68, 27]\n  }, {\n    \"index\": 0.125,\n    \"rgb\": [0, 109, 44]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [35, 139, 69]\n  }, {\n    \"index\": 0.375,\n    \"rgb\": [65, 171, 93]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [116, 196, 118]\n  }, {\n    \"index\": 0.625,\n    \"rgb\": [161, 217, 155]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [199, 233, 192]\n  }, {\n    \"index\": 0.875,\n    \"rgb\": [229, 245, 224]\n  }, {\n    \"index\": 1,\n    \"rgb\": [247, 252, 245]\n  }],\n  \"yiorrd\": [{\n    \"index\": 0,\n    \"rgb\": [128, 0, 38]\n  }, {\n    \"index\": 0.125,\n    \"rgb\": [189, 0, 38]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [227, 26, 28]\n  }, {\n    \"index\": 0.375,\n    \"rgb\": [252, 78, 42]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [253, 141, 60]\n  }, {\n    \"index\": 0.625,\n    \"rgb\": [254, 178, 76]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [254, 217, 118]\n  }, {\n    \"index\": 0.875,\n    \"rgb\": [255, 237, 160]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 255, 204]\n  }],\n  \"bluered\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 255]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 0, 0]\n  }],\n  \"rdbu\": [{\n    \"index\": 0,\n    \"rgb\": [5, 10, 172]\n  }, {\n    \"index\": 0.35,\n    \"rgb\": [106, 137, 247]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [190, 190, 190]\n  }, {\n    \"index\": 0.6,\n    \"rgb\": [220, 170, 132]\n  }, {\n    \"index\": 0.7,\n    \"rgb\": [230, 145, 90]\n  }, {\n    \"index\": 1,\n    \"rgb\": [178, 10, 28]\n  }],\n  \"picnic\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 255]\n  }, {\n    \"index\": 0.1,\n    \"rgb\": [51, 153, 255]\n  }, {\n    \"index\": 0.2,\n    \"rgb\": [102, 204, 255]\n  }, {\n    \"index\": 0.3,\n    \"rgb\": [153, 204, 255]\n  }, {\n    \"index\": 0.4,\n    \"rgb\": [204, 204, 255]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [255, 255, 255]\n  }, {\n    \"index\": 0.6,\n    \"rgb\": [255, 204, 255]\n  }, {\n    \"index\": 0.7,\n    \"rgb\": [255, 153, 255]\n  }, {\n    \"index\": 0.8,\n    \"rgb\": [255, 102, 204]\n  }, {\n    \"index\": 0.9,\n    \"rgb\": [255, 102, 102]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 0, 0]\n  }],\n  \"rainbow\": [{\n    \"index\": 0,\n    \"rgb\": [150, 0, 90]\n  }, {\n    \"index\": 0.125,\n    \"rgb\": [0, 0, 200]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [0, 25, 255]\n  }, {\n    \"index\": 0.375,\n    \"rgb\": [0, 152, 255]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [44, 255, 150]\n  }, {\n    \"index\": 0.625,\n    \"rgb\": [151, 255, 0]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [255, 234, 0]\n  }, {\n    \"index\": 0.875,\n    \"rgb\": [255, 111, 0]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 0, 0]\n  }],\n  \"portland\": [{\n    \"index\": 0,\n    \"rgb\": [12, 51, 131]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [10, 136, 186]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [242, 211, 56]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [242, 143, 56]\n  }, {\n    \"index\": 1,\n    \"rgb\": [217, 30, 30]\n  }],\n  \"blackbody\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 0]\n  }, {\n    \"index\": 0.2,\n    \"rgb\": [230, 0, 0]\n  }, {\n    \"index\": 0.4,\n    \"rgb\": [230, 210, 0]\n  }, {\n    \"index\": 0.7,\n    \"rgb\": [255, 255, 255]\n  }, {\n    \"index\": 1,\n    \"rgb\": [160, 200, 255]\n  }],\n  \"earth\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 130]\n  }, {\n    \"index\": 0.1,\n    \"rgb\": [0, 180, 180]\n  }, {\n    \"index\": 0.2,\n    \"rgb\": [40, 210, 40]\n  }, {\n    \"index\": 0.4,\n    \"rgb\": [230, 230, 50]\n  }, {\n    \"index\": 0.6,\n    \"rgb\": [120, 70, 20]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 255, 255]\n  }],\n  \"electric\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 0]\n  }, {\n    \"index\": 0.15,\n    \"rgb\": [30, 0, 100]\n  }, {\n    \"index\": 0.4,\n    \"rgb\": [120, 0, 100]\n  }, {\n    \"index\": 0.6,\n    \"rgb\": [160, 90, 0]\n  }, {\n    \"index\": 0.8,\n    \"rgb\": [230, 200, 0]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 250, 220]\n  }],\n  \"alpha\": [{\n    \"index\": 0,\n    \"rgb\": [255, 255, 255, 0]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 255, 255, 1]\n  }],\n  \"viridis\": [{\n    \"index\": 0,\n    \"rgb\": [68, 1, 84]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [71, 44, 122]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [59, 81, 139]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [44, 113, 142]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [33, 144, 141]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [39, 173, 129]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [92, 200, 99]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [170, 220, 50]\n  }, {\n    \"index\": 1,\n    \"rgb\": [253, 231, 37]\n  }],\n  \"inferno\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 4]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [31, 12, 72]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [85, 15, 109]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [136, 34, 106]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [186, 54, 85]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [227, 89, 51]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [249, 140, 10]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [249, 201, 50]\n  }, {\n    \"index\": 1,\n    \"rgb\": [252, 255, 164]\n  }],\n  \"magma\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 4]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [28, 16, 68]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [79, 18, 123]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [129, 37, 129]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [181, 54, 122]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [229, 80, 100]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [251, 135, 97]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [254, 194, 135]\n  }, {\n    \"index\": 1,\n    \"rgb\": [252, 253, 191]\n  }],\n  \"plasma\": [{\n    \"index\": 0,\n    \"rgb\": [13, 8, 135]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [75, 3, 161]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [125, 3, 168]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [168, 34, 150]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [203, 70, 121]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [229, 107, 93]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [248, 148, 65]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [253, 195, 40]\n  }, {\n    \"index\": 1,\n    \"rgb\": [240, 249, 33]\n  }],\n  \"warm\": [{\n    \"index\": 0,\n    \"rgb\": [125, 0, 179]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [172, 0, 187]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [219, 0, 170]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [255, 0, 130]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [255, 63, 74]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [255, 123, 0]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [234, 176, 0]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [190, 228, 0]\n  }, {\n    \"index\": 1,\n    \"rgb\": [147, 255, 0]\n  }],\n  \"cool\": [{\n    \"index\": 0,\n    \"rgb\": [125, 0, 179]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [116, 0, 218]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [98, 74, 237]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [68, 146, 231]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [0, 204, 197]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [0, 247, 146]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [0, 255, 88]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [40, 255, 8]\n  }, {\n    \"index\": 1,\n    \"rgb\": [147, 255, 0]\n  }],\n  \"rainbow-soft\": [{\n    \"index\": 0,\n    \"rgb\": [125, 0, 179]\n  }, {\n    \"index\": 0.1,\n    \"rgb\": [199, 0, 180]\n  }, {\n    \"index\": 0.2,\n    \"rgb\": [255, 0, 121]\n  }, {\n    \"index\": 0.3,\n    \"rgb\": [255, 108, 0]\n  }, {\n    \"index\": 0.4,\n    \"rgb\": [222, 194, 0]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [150, 255, 0]\n  }, {\n    \"index\": 0.6,\n    \"rgb\": [0, 255, 55]\n  }, {\n    \"index\": 0.7,\n    \"rgb\": [0, 246, 150]\n  }, {\n    \"index\": 0.8,\n    \"rgb\": [50, 167, 222]\n  }, {\n    \"index\": 0.9,\n    \"rgb\": [103, 51, 235]\n  }, {\n    \"index\": 1,\n    \"rgb\": [124, 0, 186]\n  }],\n  \"bathymetry\": [{\n    \"index\": 0,\n    \"rgb\": [40, 26, 44]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [59, 49, 90]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [64, 76, 139]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [63, 110, 151]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [72, 142, 158]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [85, 174, 163]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [120, 206, 163]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [187, 230, 172]\n  }, {\n    \"index\": 1,\n    \"rgb\": [253, 254, 204]\n  }],\n  \"cdom\": [{\n    \"index\": 0,\n    \"rgb\": [47, 15, 62]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [87, 23, 86]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [130, 28, 99]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [171, 41, 96]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [206, 67, 86]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [230, 106, 84]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [242, 149, 103]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [249, 193, 135]\n  }, {\n    \"index\": 1,\n    \"rgb\": [254, 237, 176]\n  }],\n  \"chlorophyll\": [{\n    \"index\": 0,\n    \"rgb\": [18, 36, 20]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [25, 63, 41]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [24, 91, 59]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [13, 119, 72]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [18, 148, 80]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [80, 173, 89]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [132, 196, 122]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [175, 221, 162]\n  }, {\n    \"index\": 1,\n    \"rgb\": [215, 249, 208]\n  }],\n  \"density\": [{\n    \"index\": 0,\n    \"rgb\": [54, 14, 36]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [89, 23, 80]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [110, 45, 132]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [120, 77, 178]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [120, 113, 213]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [115, 151, 228]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [134, 185, 227]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [177, 214, 227]\n  }, {\n    \"index\": 1,\n    \"rgb\": [230, 241, 241]\n  }],\n  \"freesurface-blue\": [{\n    \"index\": 0,\n    \"rgb\": [30, 4, 110]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [47, 14, 176]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [41, 45, 236]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [25, 99, 212]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [68, 131, 200]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [114, 156, 197]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [157, 181, 203]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [200, 208, 216]\n  }, {\n    \"index\": 1,\n    \"rgb\": [241, 237, 236]\n  }],\n  \"freesurface-red\": [{\n    \"index\": 0,\n    \"rgb\": [60, 9, 18]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [100, 17, 27]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [142, 20, 29]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [177, 43, 27]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [192, 87, 63]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [205, 125, 105]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [216, 162, 148]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [227, 199, 193]\n  }, {\n    \"index\": 1,\n    \"rgb\": [241, 237, 236]\n  }],\n  \"oxygen\": [{\n    \"index\": 0,\n    \"rgb\": [64, 5, 5]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [106, 6, 15]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [144, 26, 7]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [168, 64, 3]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [188, 100, 4]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [206, 136, 11]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [220, 174, 25]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [231, 215, 44]\n  }, {\n    \"index\": 1,\n    \"rgb\": [248, 254, 105]\n  }],\n  \"par\": [{\n    \"index\": 0,\n    \"rgb\": [51, 20, 24]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [90, 32, 35]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [129, 44, 34]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [159, 68, 25]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [182, 99, 19]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [199, 134, 22]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [212, 171, 35]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [221, 210, 54]\n  }, {\n    \"index\": 1,\n    \"rgb\": [225, 253, 75]\n  }],\n  \"phase\": [{\n    \"index\": 0,\n    \"rgb\": [145, 105, 18]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [184, 71, 38]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [186, 58, 115]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [160, 71, 185]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [110, 97, 218]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [50, 123, 164]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [31, 131, 110]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [77, 129, 34]\n  }, {\n    \"index\": 1,\n    \"rgb\": [145, 105, 18]\n  }],\n  \"salinity\": [{\n    \"index\": 0,\n    \"rgb\": [42, 24, 108]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [33, 50, 162]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [15, 90, 145]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [40, 118, 137]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [59, 146, 135]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [79, 175, 126]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [120, 203, 104]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [193, 221, 100]\n  }, {\n    \"index\": 1,\n    \"rgb\": [253, 239, 154]\n  }],\n  \"temperature\": [{\n    \"index\": 0,\n    \"rgb\": [4, 35, 51]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [23, 51, 122]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [85, 59, 157]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [129, 79, 143]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [175, 95, 130]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [222, 112, 101]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [249, 146, 66]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [249, 196, 65]\n  }, {\n    \"index\": 1,\n    \"rgb\": [232, 250, 91]\n  }],\n  \"turbidity\": [{\n    \"index\": 0,\n    \"rgb\": [34, 31, 27]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [65, 50, 41]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [98, 69, 52]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [131, 89, 57]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [161, 112, 59]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [185, 140, 66]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [202, 174, 88]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [216, 209, 126]\n  }, {\n    \"index\": 1,\n    \"rgb\": [233, 246, 171]\n  }],\n  \"velocity-blue\": [{\n    \"index\": 0,\n    \"rgb\": [17, 32, 64]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [35, 52, 116]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [29, 81, 156]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [31, 113, 162]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [50, 144, 169]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [87, 173, 176]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [149, 196, 189]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [203, 221, 211]\n  }, {\n    \"index\": 1,\n    \"rgb\": [254, 251, 230]\n  }],\n  \"velocity-green\": [{\n    \"index\": 0,\n    \"rgb\": [23, 35, 19]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [24, 64, 38]\n  }, {\n    \"index\": 0.25,\n    \"rgb\": [11, 95, 45]\n  }, {\n    \"index\": 0.38,\n    \"rgb\": [39, 123, 35]\n  }, {\n    \"index\": 0.5,\n    \"rgb\": [95, 146, 12]\n  }, {\n    \"index\": 0.63,\n    \"rgb\": [152, 165, 18]\n  }, {\n    \"index\": 0.75,\n    \"rgb\": [201, 186, 69]\n  }, {\n    \"index\": 0.88,\n    \"rgb\": [233, 216, 137]\n  }, {\n    \"index\": 1,\n    \"rgb\": [255, 253, 205]\n  }],\n  \"cubehelix\": [{\n    \"index\": 0,\n    \"rgb\": [0, 0, 0]\n  }, {\n    \"index\": 0.07,\n    \"rgb\": [22, 5, 59]\n  }, {\n    \"index\": 0.13,\n    \"rgb\": [60, 4, 105]\n  }, {\n    \"index\": 0.2,\n    \"rgb\": [109, 1, 135]\n  }, {\n    \"index\": 0.27,\n    \"rgb\": [161, 0, 147]\n  }, {\n    \"index\": 0.33,\n    \"rgb\": [210, 2, 142]\n  }, {\n    \"index\": 0.4,\n    \"rgb\": [251, 11, 123]\n  }, {\n    \"index\": 0.47,\n    \"rgb\": [255, 29, 97]\n  }, {\n    \"index\": 0.53,\n    \"rgb\": [255, 54, 69]\n  }, {\n    \"index\": 0.6,\n    \"rgb\": [255, 85, 46]\n  }, {\n    \"index\": 0.67,\n    \"rgb\": [255, 120, 34]\n  }, {\n    \"index\": 0.73,\n    \"rgb\": [255, 157, 37]\n  }, {\n    \"index\": 0.8,\n    \"rgb\": [241, 191, 57]\n  }, {\n    \"index\": 0.87,\n    \"rgb\": [224, 220, 93]\n  }, {\n    \"index\": 0.93,\n    \"rgb\": [218, 241, 142]\n  }, {\n    \"index\": 1,\n    \"rgb\": [227, 253, 198]\n  }]\n};","/*\n * Ben Postlethwaite\n * January 2013\n * License MIT\n */\n'use strict';\n\nvar colorScale = require('./colorScale');\n\nvar lerp = require('lerp');\n\nmodule.exports = createColormap;\n\nfunction createColormap(spec) {\n  /*\n   * Default Options\n   */\n  var indicies, fromrgba, torgba, nsteps, cmap, colormap, format, nshades, colors, alpha, i;\n  if (!spec) spec = {};\n  nshades = (spec.nshades || 72) - 1;\n  format = spec.format || 'hex';\n  colormap = spec.colormap;\n  if (!colormap) colormap = 'jet';\n\n  if (typeof colormap === 'string') {\n    colormap = colormap.toLowerCase();\n\n    if (!colorScale[colormap]) {\n      throw Error(colormap + ' not a supported colorscale');\n    }\n\n    cmap = colorScale[colormap];\n  } else if (Array.isArray(colormap)) {\n    cmap = colormap.slice();\n  } else {\n    throw Error('unsupported colormap option', colormap);\n  }\n\n  if (cmap.length > nshades + 1) {\n    throw new Error(colormap + ' map requires nshades to be at least size ' + cmap.length);\n  }\n\n  if (!Array.isArray(spec.alpha)) {\n    if (typeof spec.alpha === 'number') {\n      alpha = [spec.alpha, spec.alpha];\n    } else {\n      alpha = [1, 1];\n    }\n  } else if (spec.alpha.length !== 2) {\n    alpha = [1, 1];\n  } else {\n    alpha = spec.alpha.slice();\n  } // map index points from 0..1 to 0..n-1\n\n\n  indicies = cmap.map(function (c) {\n    return Math.round(c.index * nshades);\n  }); // Add alpha channel to the map\n\n  alpha[0] = Math.min(Math.max(alpha[0], 0), 1);\n  alpha[1] = Math.min(Math.max(alpha[1], 0), 1);\n  var steps = cmap.map(function (c, i) {\n    var index = cmap[i].index;\n    var rgba = cmap[i].rgb.slice(); // if user supplies their own map use it\n\n    if (rgba.length === 4 && rgba[3] >= 0 && rgba[3] <= 1) {\n      return rgba;\n    }\n\n    rgba[3] = alpha[0] + (alpha[1] - alpha[0]) * index;\n    return rgba;\n  });\n  /*\n   * map increasing linear values between indicies to\n   * linear steps in colorvalues\n   */\n\n  var colors = [];\n\n  for (i = 0; i < indicies.length - 1; ++i) {\n    nsteps = indicies[i + 1] - indicies[i];\n    fromrgba = steps[i];\n    torgba = steps[i + 1];\n\n    for (var j = 0; j < nsteps; j++) {\n      var amt = j / nsteps;\n      colors.push([Math.round(lerp(fromrgba[0], torgba[0], amt)), Math.round(lerp(fromrgba[1], torgba[1], amt)), Math.round(lerp(fromrgba[2], torgba[2], amt)), lerp(fromrgba[3], torgba[3], amt)]);\n    }\n  } //add 1 step as last value\n\n\n  colors.push(cmap[cmap.length - 1].rgb.concat(alpha[1]));\n  if (format === 'hex') colors = colors.map(rgb2hex);else if (format === 'rgbaString') colors = colors.map(rgbaStr);else if (format === 'float') colors = colors.map(rgb2float);\n  return colors;\n}\n\n;\n\nfunction rgb2float(rgba) {\n  return [rgba[0] / 255, rgba[1] / 255, rgba[2] / 255, rgba[3]];\n}\n\nfunction rgb2hex(rgba) {\n  var dig,\n      hex = '#';\n\n  for (var i = 0; i < 3; ++i) {\n    dig = rgba[i];\n    dig = dig.toString(16);\n    hex += ('00' + dig).substr(dig.length);\n  }\n\n  return hex;\n}\n\nfunction rgbaStr(rgba) {\n  return 'rgba(' + rgba.join(',') + ')';\n}","export var fieldTagNames = {\n  // TIFF Baseline\n  0x013B: 'Artist',\n  0x0102: 'BitsPerSample',\n  0x0109: 'CellLength',\n  0x0108: 'CellWidth',\n  0x0140: 'ColorMap',\n  0x0103: 'Compression',\n  0x8298: 'Copyright',\n  0x0132: 'DateTime',\n  0x0152: 'ExtraSamples',\n  0x010A: 'FillOrder',\n  0x0121: 'FreeByteCounts',\n  0x0120: 'FreeOffsets',\n  0x0123: 'GrayResponseCurve',\n  0x0122: 'GrayResponseUnit',\n  0x013C: 'HostComputer',\n  0x010E: 'ImageDescription',\n  0x0101: 'ImageLength',\n  0x0100: 'ImageWidth',\n  0x010F: 'Make',\n  0x0119: 'MaxSampleValue',\n  0x0118: 'MinSampleValue',\n  0x0110: 'Model',\n  0x00FE: 'NewSubfileType',\n  0x0112: 'Orientation',\n  0x0106: 'PhotometricInterpretation',\n  0x011C: 'PlanarConfiguration',\n  0x0128: 'ResolutionUnit',\n  0x0116: 'RowsPerStrip',\n  0x0115: 'SamplesPerPixel',\n  0x0131: 'Software',\n  0x0117: 'StripByteCounts',\n  0x0111: 'StripOffsets',\n  0x00FF: 'SubfileType',\n  0x0107: 'Threshholding',\n  0x011A: 'XResolution',\n  0x011B: 'YResolution',\n  // TIFF Extended\n  0x0146: 'BadFaxLines',\n  0x0147: 'CleanFaxData',\n  0x0157: 'ClipPath',\n  0x0148: 'ConsecutiveBadFaxLines',\n  0x01B1: 'Decode',\n  0x01B2: 'DefaultImageColor',\n  0x010D: 'DocumentName',\n  0x0150: 'DotRange',\n  0x0141: 'HalftoneHints',\n  0x015A: 'Indexed',\n  0x015B: 'JPEGTables',\n  0x011D: 'PageName',\n  0x0129: 'PageNumber',\n  0x013D: 'Predictor',\n  0x013F: 'PrimaryChromaticities',\n  0x0214: 'ReferenceBlackWhite',\n  0x0153: 'SampleFormat',\n  0x0154: 'SMinSampleValue',\n  0x0155: 'SMaxSampleValue',\n  0x022F: 'StripRowCounts',\n  0x014A: 'SubIFDs',\n  0x0124: 'T4Options',\n  0x0125: 'T6Options',\n  0x0145: 'TileByteCounts',\n  0x0143: 'TileLength',\n  0x0144: 'TileOffsets',\n  0x0142: 'TileWidth',\n  0x012D: 'TransferFunction',\n  0x013E: 'WhitePoint',\n  0x0158: 'XClipPathUnits',\n  0x011E: 'XPosition',\n  0x0211: 'YCbCrCoefficients',\n  0x0213: 'YCbCrPositioning',\n  0x0212: 'YCbCrSubSampling',\n  0x0159: 'YClipPathUnits',\n  0x011F: 'YPosition',\n  // EXIF\n  0x9202: 'ApertureValue',\n  0xA001: 'ColorSpace',\n  0x9004: 'DateTimeDigitized',\n  0x9003: 'DateTimeOriginal',\n  0x8769: 'Exif IFD',\n  0x9000: 'ExifVersion',\n  0x829A: 'ExposureTime',\n  0xA300: 'FileSource',\n  0x9209: 'Flash',\n  0xA000: 'FlashpixVersion',\n  0x829D: 'FNumber',\n  0xA420: 'ImageUniqueID',\n  0x9208: 'LightSource',\n  0x927C: 'MakerNote',\n  0x9201: 'ShutterSpeedValue',\n  0x9286: 'UserComment',\n  // IPTC\n  0x83BB: 'IPTC',\n  // ICC\n  0x8773: 'ICC Profile',\n  // XMP\n  0x02BC: 'XMP',\n  // GDAL\n  0xA480: 'GDAL_METADATA',\n  0xA481: 'GDAL_NODATA',\n  // Photoshop\n  0x8649: 'Photoshop',\n  // GeoTiff\n  0x830E: 'ModelPixelScale',\n  0x8482: 'ModelTiepoint',\n  0x85D8: 'ModelTransformation',\n  0x87AF: 'GeoKeyDirectory',\n  0x87B0: 'GeoDoubleParams',\n  0x87B1: 'GeoAsciiParams',\n  // LERC\n  0xC5F2: 'LercParameters'\n};\nexport var fieldTags = {};\n\nfor (var key in fieldTagNames) {\n  if (fieldTagNames.hasOwnProperty(key)) {\n    fieldTags[fieldTagNames[key]] = parseInt(key, 10);\n  }\n}\n\nexport var fieldTagTypes = {\n  256: 'SHORT',\n  257: 'SHORT',\n  258: 'SHORT',\n  259: 'SHORT',\n  262: 'SHORT',\n  273: 'LONG',\n  274: 'SHORT',\n  277: 'SHORT',\n  278: 'LONG',\n  279: 'LONG',\n  282: 'RATIONAL',\n  283: 'RATIONAL',\n  284: 'SHORT',\n  286: 'SHORT',\n  287: 'RATIONAL',\n  296: 'SHORT',\n  297: 'SHORT',\n  305: 'ASCII',\n  306: 'ASCII',\n  338: 'SHORT',\n  339: 'SHORT',\n  513: 'LONG',\n  514: 'LONG',\n  1024: 'SHORT',\n  1025: 'SHORT',\n  2048: 'SHORT',\n  2049: 'ASCII',\n  3072: 'SHORT',\n  3073: 'ASCII',\n  33550: 'DOUBLE',\n  33922: 'DOUBLE',\n  34665: 'LONG',\n  34735: 'SHORT',\n  34737: 'ASCII',\n  42113: 'ASCII'\n};\nexport var arrayFields = [fieldTags.BitsPerSample, fieldTags.ExtraSamples, fieldTags.SampleFormat, fieldTags.StripByteCounts, fieldTags.StripOffsets, fieldTags.StripRowCounts, fieldTags.TileByteCounts, fieldTags.TileOffsets, fieldTags.SubIFDs];\nexport var fieldTypeNames = {\n  0x0001: 'BYTE',\n  0x0002: 'ASCII',\n  0x0003: 'SHORT',\n  0x0004: 'LONG',\n  0x0005: 'RATIONAL',\n  0x0006: 'SBYTE',\n  0x0007: 'UNDEFINED',\n  0x0008: 'SSHORT',\n  0x0009: 'SLONG',\n  0x000A: 'SRATIONAL',\n  0x000B: 'FLOAT',\n  0x000C: 'DOUBLE',\n  // IFD offset, suggested by https://owl.phy.queensu.ca/~phil/exiftool/standards.html\n  0x000D: 'IFD',\n  // introduced by BigTIFF\n  0x0010: 'LONG8',\n  0x0011: 'SLONG8',\n  0x0012: 'IFD8'\n};\nexport var fieldTypes = {};\n\nfor (var _key in fieldTypeNames) {\n  if (fieldTypeNames.hasOwnProperty(_key)) {\n    fieldTypes[fieldTypeNames[_key]] = parseInt(_key, 10);\n  }\n}\n\nexport var photometricInterpretations = {\n  WhiteIsZero: 0,\n  BlackIsZero: 1,\n  RGB: 2,\n  Palette: 3,\n  TransparencyMask: 4,\n  CMYK: 5,\n  YCbCr: 6,\n  CIELab: 8,\n  ICCLab: 9\n};\nexport var ExtraSamplesValues = {\n  Unspecified: 0,\n  Assocalpha: 1,\n  Unassalpha: 2\n};\nexport var LercParameters = {\n  Version: 0,\n  AddCompression: 1\n};\nexport var LercAddCompression = {\n  None: 0,\n  Deflate: 1\n};\nexport var geoKeyNames = {\n  1024: 'GTModelTypeGeoKey',\n  1025: 'GTRasterTypeGeoKey',\n  1026: 'GTCitationGeoKey',\n  2048: 'GeographicTypeGeoKey',\n  2049: 'GeogCitationGeoKey',\n  2050: 'GeogGeodeticDatumGeoKey',\n  2051: 'GeogPrimeMeridianGeoKey',\n  2052: 'GeogLinearUnitsGeoKey',\n  2053: 'GeogLinearUnitSizeGeoKey',\n  2054: 'GeogAngularUnitsGeoKey',\n  2055: 'GeogAngularUnitSizeGeoKey',\n  2056: 'GeogEllipsoidGeoKey',\n  2057: 'GeogSemiMajorAxisGeoKey',\n  2058: 'GeogSemiMinorAxisGeoKey',\n  2059: 'GeogInvFlatteningGeoKey',\n  2060: 'GeogAzimuthUnitsGeoKey',\n  2061: 'GeogPrimeMeridianLongGeoKey',\n  2062: 'GeogTOWGS84GeoKey',\n  3072: 'ProjectedCSTypeGeoKey',\n  3073: 'PCSCitationGeoKey',\n  3074: 'ProjectionGeoKey',\n  3075: 'ProjCoordTransGeoKey',\n  3076: 'ProjLinearUnitsGeoKey',\n  3077: 'ProjLinearUnitSizeGeoKey',\n  3078: 'ProjStdParallel1GeoKey',\n  3079: 'ProjStdParallel2GeoKey',\n  3080: 'ProjNatOriginLongGeoKey',\n  3081: 'ProjNatOriginLatGeoKey',\n  3082: 'ProjFalseEastingGeoKey',\n  3083: 'ProjFalseNorthingGeoKey',\n  3084: 'ProjFalseOriginLongGeoKey',\n  3085: 'ProjFalseOriginLatGeoKey',\n  3086: 'ProjFalseOriginEastingGeoKey',\n  3087: 'ProjFalseOriginNorthingGeoKey',\n  3088: 'ProjCenterLongGeoKey',\n  3089: 'ProjCenterLatGeoKey',\n  3090: 'ProjCenterEastingGeoKey',\n  3091: 'ProjCenterNorthingGeoKey',\n  3092: 'ProjScaleAtNatOriginGeoKey',\n  3093: 'ProjScaleAtCenterGeoKey',\n  3094: 'ProjAzimuthAngleGeoKey',\n  3095: 'ProjStraightVertPoleLongGeoKey',\n  3096: 'ProjRectifiedGridAngleGeoKey',\n  4096: 'VerticalCSTypeGeoKey',\n  4097: 'VerticalCitationGeoKey',\n  4098: 'VerticalDatumGeoKey',\n  4099: 'VerticalUnitsGeoKey'\n};\nexport var geoKeys = {};\n\nfor (var _key2 in geoKeyNames) {\n  if (geoKeyNames.hasOwnProperty(_key2)) {\n    geoKeys[geoKeyNames[_key2]] = parseInt(_key2, 10);\n  }\n}","function lerp(v0, v1, t) {\n  return v0 * (1 - t) + v1 * t;\n}\n\nmodule.exports = lerp;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getDividerUtilityClass(slot) {\n  return generateUtilityClass('MuiDivider', slot);\n}\nvar dividerClasses = generateUtilityClasses('MuiDivider', ['root', 'absolute', 'fullWidth', 'inset', 'middle', 'flexItem', 'light', 'vertical', 'withChildren', 'withChildrenVertical', 'textAlignRight', 'textAlignLeft', 'wrapper', 'wrapperVertical']);\nexport default dividerClasses;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getListItemIconUtilityClass(slot) {\n  return generateUtilityClass('MuiListItemIcon', slot);\n}\nvar listItemIconClasses = generateUtilityClasses('MuiListItemIcon', ['root', 'alignItemsFlexStart']);\nexport default listItemIconClasses;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getListItemTextUtilityClass(slot) {\n  return generateUtilityClass('MuiListItemText', slot);\n}\nvar listItemTextClasses = generateUtilityClasses('MuiListItemText', ['root', 'multiline', 'dense', 'inset', 'primary', 'secondary']);\nexport default listItemTextClasses;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getMenuItemUtilityClass(slot) {\n  return generateUtilityClass('MuiMenuItem', slot);\n}\nvar menuItemClasses = generateUtilityClasses('MuiMenuItem', ['root', 'focusVisible', 'dense', 'disabled', 'divider', 'gutters', 'selected']);\nexport default menuItemClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"autoFocus\", \"component\", \"dense\", \"divider\", \"disableGutters\", \"focusVisibleClassName\", \"role\", \"tabIndex\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport { alpha } from '@mui/system';\nimport styled, { rootShouldForwardProp } from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport ListContext from '../List/ListContext';\nimport ButtonBase from '../ButtonBase';\nimport useEnhancedEffect from '../utils/useEnhancedEffect';\nimport useForkRef from '../utils/useForkRef';\nimport { dividerClasses } from '../Divider';\nimport { listItemIconClasses } from '../ListItemIcon';\nimport { listItemTextClasses } from '../ListItemText';\nimport menuItemClasses, { getMenuItemUtilityClass } from './menuItemClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var overridesResolver = function overridesResolver(props, styles) {\n  var ownerState = props.ownerState;\n  return [styles.root, ownerState.dense && styles.dense, ownerState.divider && styles.divider, !ownerState.disableGutters && styles.gutters];\n};\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var disabled = ownerState.disabled,\n      dense = ownerState.dense,\n      divider = ownerState.divider,\n      disableGutters = ownerState.disableGutters,\n      selected = ownerState.selected,\n      classes = ownerState.classes;\n  var slots = {\n    root: ['root', dense && 'dense', disabled && 'disabled', !disableGutters && 'gutters', divider && 'divider', selected && 'selected']\n  };\n  var composedClasses = composeClasses(slots, getMenuItemUtilityClass, classes);\n  return _extends({}, classes, composedClasses);\n};\n\nvar MenuItemRoot = styled(ButtonBase, {\n  shouldForwardProp: function shouldForwardProp(prop) {\n    return rootShouldForwardProp(prop) || prop === 'classes';\n  },\n  name: 'MuiMenuItem',\n  slot: 'Root',\n  overridesResolver: overridesResolver\n})(function (_ref) {\n  var _extends2;\n\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({}, theme.typography.body1, {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    position: 'relative',\n    textDecoration: 'none',\n    minHeight: 48,\n    paddingTop: 6,\n    paddingBottom: 6,\n    boxSizing: 'border-box',\n    whiteSpace: 'nowrap'\n  }, !ownerState.disableGutters && {\n    paddingLeft: 16,\n    paddingRight: 16\n  }, ownerState.divider && {\n    borderBottom: \"1px solid \".concat(theme.palette.divider),\n    backgroundClip: 'padding-box'\n  }, (_extends2 = {\n    '&:hover': {\n      textDecoration: 'none',\n      backgroundColor: theme.palette.action.hover,\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    }\n  }, _defineProperty(_extends2, \"&.\".concat(menuItemClasses.selected), _defineProperty({\n    backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity)\n  }, \"&.\".concat(menuItemClasses.focusVisible), {\n    backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity + theme.palette.action.focusOpacity)\n  })), _defineProperty(_extends2, \"&.\".concat(menuItemClasses.selected, \":hover\"), {\n    backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity + theme.palette.action.hoverOpacity),\n    // Reset on touch devices, it doesn't add specificity\n    '@media (hover: none)': {\n      backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity)\n    }\n  }), _defineProperty(_extends2, \"&.\".concat(menuItemClasses.focusVisible), {\n    backgroundColor: theme.palette.action.focus\n  }), _defineProperty(_extends2, \"&.\".concat(menuItemClasses.disabled), {\n    opacity: theme.palette.action.disabledOpacity\n  }), _defineProperty(_extends2, \"& + .\".concat(dividerClasses.root), {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  }), _defineProperty(_extends2, \"& + .\".concat(dividerClasses.inset), {\n    marginLeft: 52\n  }), _defineProperty(_extends2, \"& .\".concat(listItemTextClasses.root), {\n    marginTop: 0,\n    marginBottom: 0\n  }), _defineProperty(_extends2, \"& .\".concat(listItemTextClasses.inset), {\n    paddingLeft: 36\n  }), _defineProperty(_extends2, \"& .\".concat(listItemIconClasses.root), {\n    minWidth: 36\n  }), _extends2), !ownerState.dense && _defineProperty({}, theme.breakpoints.up('sm'), {\n    minHeight: 'auto'\n  }), ownerState.dense && _extends({\n    minHeight: 32,\n    // https://material.io/components/menus#specs > Dense\n    paddingTop: 4,\n    paddingBottom: 4\n  }, theme.typography.body2, _defineProperty({}, \"& .\".concat(listItemIconClasses.root, \" svg\"), {\n    fontSize: '1.25rem'\n  })));\n});\nvar MenuItem = /*#__PURE__*/React.forwardRef(function MenuItem(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiMenuItem'\n  });\n\n  var _props$autoFocus = props.autoFocus,\n      autoFocus = _props$autoFocus === void 0 ? false : _props$autoFocus,\n      _props$component = props.component,\n      component = _props$component === void 0 ? 'li' : _props$component,\n      _props$dense = props.dense,\n      dense = _props$dense === void 0 ? false : _props$dense,\n      _props$divider = props.divider,\n      divider = _props$divider === void 0 ? false : _props$divider,\n      _props$disableGutters = props.disableGutters,\n      disableGutters = _props$disableGutters === void 0 ? false : _props$disableGutters,\n      focusVisibleClassName = props.focusVisibleClassName,\n      _props$role = props.role,\n      role = _props$role === void 0 ? 'menuitem' : _props$role,\n      tabIndexProp = props.tabIndex,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var context = React.useContext(ListContext);\n  var childContext = {\n    dense: dense || context.dense || false,\n    disableGutters: disableGutters\n  };\n  var menuItemRef = React.useRef(null);\n  useEnhancedEffect(function () {\n    if (autoFocus) {\n      if (menuItemRef.current) {\n        menuItemRef.current.focus();\n      } else if (process.env.NODE_ENV !== 'production') {\n        console.error('MUI: Unable to set focus to a MenuItem whose component has not been rendered.');\n      }\n    }\n  }, [autoFocus]);\n\n  var ownerState = _extends({}, props, {\n    dense: childContext.dense,\n    divider: divider,\n    disableGutters: disableGutters\n  });\n\n  var classes = useUtilityClasses(props);\n  var handleRef = useForkRef(menuItemRef, ref);\n  var tabIndex;\n\n  if (!props.disabled) {\n    tabIndex = tabIndexProp !== undefined ? tabIndexProp : -1;\n  }\n\n  return /*#__PURE__*/_jsx(ListContext.Provider, {\n    value: childContext,\n    children: /*#__PURE__*/_jsx(MenuItemRoot, _extends({\n      ref: handleRef,\n      role: role,\n      tabIndex: tabIndex,\n      component: component,\n      focusVisibleClassName: clsx(classes.focusVisible, focusVisibleClassName)\n    }, other, {\n      ownerState: ownerState,\n      classes: classes\n    }))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default MenuItem;","export function fromWhiteIsZero(raster, max) {\n  var width = raster.width,\n      height = raster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n  var value;\n\n  for (var i = 0, j = 0; i < raster.length; ++i, j += 3) {\n    value = 256 - raster[i] / max * 256;\n    rgbRaster[j] = value;\n    rgbRaster[j + 1] = value;\n    rgbRaster[j + 2] = value;\n  }\n\n  return rgbRaster;\n}\nexport function fromBlackIsZero(raster, max) {\n  var width = raster.width,\n      height = raster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n  var value;\n\n  for (var i = 0, j = 0; i < raster.length; ++i, j += 3) {\n    value = raster[i] / max * 256;\n    rgbRaster[j] = value;\n    rgbRaster[j + 1] = value;\n    rgbRaster[j + 2] = value;\n  }\n\n  return rgbRaster;\n}\nexport function fromPalette(raster, colorMap) {\n  var width = raster.width,\n      height = raster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n  var greenOffset = colorMap.length / 3;\n  var blueOffset = colorMap.length / 3 * 2;\n\n  for (var i = 0, j = 0; i < raster.length; ++i, j += 3) {\n    var mapIndex = raster[i];\n    rgbRaster[j] = colorMap[mapIndex] / 65536 * 256;\n    rgbRaster[j + 1] = colorMap[mapIndex + greenOffset] / 65536 * 256;\n    rgbRaster[j + 2] = colorMap[mapIndex + blueOffset] / 65536 * 256;\n  }\n\n  return rgbRaster;\n}\nexport function fromCMYK(cmykRaster) {\n  var width = cmykRaster.width,\n      height = cmykRaster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n\n  for (var i = 0, j = 0; i < cmykRaster.length; i += 4, j += 3) {\n    var c = cmykRaster[i];\n    var m = cmykRaster[i + 1];\n    var y = cmykRaster[i + 2];\n    var k = cmykRaster[i + 3];\n    rgbRaster[j] = 255 * ((255 - c) / 256) * ((255 - k) / 256);\n    rgbRaster[j + 1] = 255 * ((255 - m) / 256) * ((255 - k) / 256);\n    rgbRaster[j + 2] = 255 * ((255 - y) / 256) * ((255 - k) / 256);\n  }\n\n  return rgbRaster;\n}\nexport function fromYCbCr(yCbCrRaster) {\n  var width = yCbCrRaster.width,\n      height = yCbCrRaster.height;\n  var rgbRaster = new Uint8ClampedArray(width * height * 3);\n\n  for (var i = 0, j = 0; i < yCbCrRaster.length; i += 3, j += 3) {\n    var y = yCbCrRaster[i];\n    var cb = yCbCrRaster[i + 1];\n    var cr = yCbCrRaster[i + 2];\n    rgbRaster[j] = y + 1.40200 * (cr - 0x80);\n    rgbRaster[j + 1] = y - 0.34414 * (cb - 0x80) - 0.71414 * (cr - 0x80);\n    rgbRaster[j + 2] = y + 1.77200 * (cb - 0x80);\n  }\n\n  return rgbRaster;\n}\nvar Xn = 0.95047;\nvar Yn = 1.00000;\nvar Zn = 1.08883; // from https://github.com/antimatter15/rgb-lab/blob/master/color.js\n\nexport function fromCIELab(cieLabRaster) {\n  var width = cieLabRaster.width,\n      height = cieLabRaster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n\n  for (var i = 0, j = 0; i < cieLabRaster.length; i += 3, j += 3) {\n    var L = cieLabRaster[i + 0];\n    var a_ = cieLabRaster[i + 1] << 24 >> 24; // conversion from uint8 to int8\n\n    var b_ = cieLabRaster[i + 2] << 24 >> 24; // same\n\n    var y = (L + 16) / 116;\n    var x = a_ / 500 + y;\n    var z = y - b_ / 200;\n    var r = void 0;\n    var g = void 0;\n    var b = void 0;\n    x = Xn * (x * x * x > 0.008856 ? x * x * x : (x - 16 / 116) / 7.787);\n    y = Yn * (y * y * y > 0.008856 ? y * y * y : (y - 16 / 116) / 7.787);\n    z = Zn * (z * z * z > 0.008856 ? z * z * z : (z - 16 / 116) / 7.787);\n    r = x * 3.2406 + y * -1.5372 + z * -0.4986;\n    g = x * -0.9689 + y * 1.8758 + z * 0.0415;\n    b = x * 0.0557 + y * -0.2040 + z * 1.0570;\n    r = r > 0.0031308 ? 1.055 * Math.pow(r, 1 / 2.4) - 0.055 : 12.92 * r;\n    g = g > 0.0031308 ? 1.055 * Math.pow(g, 1 / 2.4) - 0.055 : 12.92 * g;\n    b = b > 0.0031308 ? 1.055 * Math.pow(b, 1 / 2.4) - 0.055 : 12.92 * b;\n    rgbRaster[j] = Math.max(0, Math.min(1, r)) * 255;\n    rgbRaster[j + 1] = Math.max(0, Math.min(1, g)) * 255;\n    rgbRaster[j + 2] = Math.max(0, Math.min(1, b)) * 255;\n  }\n\n  return rgbRaster;\n}","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\nvar registry = new Map();\nexport function addDecoder(cases, importFn) {\n  if (!Array.isArray(cases)) {\n    cases = [cases]; // eslint-disable-line no-param-reassign\n  }\n\n  cases.forEach(function (c) {\n    return registry.set(c, importFn);\n  });\n}\nexport function getDecoder(_x) {\n  return _getDecoder.apply(this, arguments);\n} // Add default decoders to registry (end-user may override with other implementations)\n\nfunction _getDecoder() {\n  _getDecoder = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fileDirectory) {\n    var importFn, Decoder;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            importFn = registry.get(fileDirectory.Compression);\n\n            if (importFn) {\n              _context.next = 3;\n              break;\n            }\n\n            throw new Error(\"Unknown compression method identifier: \".concat(fileDirectory.Compression));\n\n          case 3:\n            _context.next = 5;\n            return importFn();\n\n          case 5:\n            Decoder = _context.sent;\n            return _context.abrupt(\"return\", new Decoder(fileDirectory));\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getDecoder.apply(this, arguments);\n}\n\naddDecoder([undefined, 1], function () {\n  return import('./raw.js').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(5, function () {\n  return import('./lzw.js').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(6, function () {\n  throw new Error('old style JPEG compression is not supported.');\n});\naddDecoder(7, function () {\n  return import('./jpeg.js').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder([8, 32946], function () {\n  return import('./deflate.js').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(32773, function () {\n  return import('./packbits.js').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(34887, function () {\n  return import('./lerc.js').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(50001, function () {\n  return import('./webimage.js').then(function (m) {\n    return m.default;\n  });\n});","/**\n * @module resample\n */\nfunction copyNewSize(array, width, height) {\n  var samplesPerPixel = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  return new (Object.getPrototypeOf(array).constructor)(width * height * samplesPerPixel);\n}\n/**\n * Resample the input arrays using nearest neighbor value selection.\n * @param {TypedArray[]} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @returns {TypedArray[]} The resampled rasters\n */\n\n\nexport function resampleNearest(valueArrays, inWidth, inHeight, outWidth, outHeight) {\n  var relX = inWidth / outWidth;\n  var relY = inHeight / outHeight;\n  return valueArrays.map(function (array) {\n    var newArray = copyNewSize(array, outWidth, outHeight);\n\n    for (var y = 0; y < outHeight; ++y) {\n      var cy = Math.min(Math.round(relY * y), inHeight - 1);\n\n      for (var x = 0; x < outWidth; ++x) {\n        var cx = Math.min(Math.round(relX * x), inWidth - 1);\n        var value = array[cy * inWidth + cx];\n        newArray[y * outWidth + x] = value;\n      }\n    }\n\n    return newArray;\n  });\n} // simple linear interpolation, code from:\n// https://en.wikipedia.org/wiki/Linear_interpolation#Programming_language_support\n\nfunction lerp(v0, v1, t) {\n  return (1 - t) * v0 + t * v1;\n}\n/**\n * Resample the input arrays using bilinear interpolation.\n * @param {TypedArray[]} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @returns {TypedArray[]} The resampled rasters\n */\n\n\nexport function resampleBilinear(valueArrays, inWidth, inHeight, outWidth, outHeight) {\n  var relX = inWidth / outWidth;\n  var relY = inHeight / outHeight;\n  return valueArrays.map(function (array) {\n    var newArray = copyNewSize(array, outWidth, outHeight);\n\n    for (var y = 0; y < outHeight; ++y) {\n      var rawY = relY * y;\n      var yl = Math.floor(rawY);\n      var yh = Math.min(Math.ceil(rawY), inHeight - 1);\n\n      for (var x = 0; x < outWidth; ++x) {\n        var rawX = relX * x;\n        var tx = rawX % 1;\n        var xl = Math.floor(rawX);\n        var xh = Math.min(Math.ceil(rawX), inWidth - 1);\n        var ll = array[yl * inWidth + xl];\n        var hl = array[yl * inWidth + xh];\n        var lh = array[yh * inWidth + xl];\n        var hh = array[yh * inWidth + xh];\n        var value = lerp(lerp(ll, hl, tx), lerp(lh, hh, tx), rawY % 1);\n        newArray[y * outWidth + x] = value;\n      }\n    }\n\n    return newArray;\n  });\n}\n/**\n * Resample the input arrays using the selected resampling method.\n * @param {TypedArray[]} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {string} [method = 'nearest'] The desired resampling method\n * @returns {TypedArray[]} The resampled rasters\n */\n\nexport function resample(valueArrays, inWidth, inHeight, outWidth, outHeight) {\n  var method = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 'nearest';\n\n  switch (method.toLowerCase()) {\n    case 'nearest':\n      return resampleNearest(valueArrays, inWidth, inHeight, outWidth, outHeight);\n\n    case 'bilinear':\n    case 'linear':\n      return resampleBilinear(valueArrays, inWidth, inHeight, outWidth, outHeight);\n\n    default:\n      throw new Error(\"Unsupported resampling method: '\".concat(method, \"'\"));\n  }\n}\n/**\n * Resample the pixel interleaved input array using nearest neighbor value selection.\n * @param {TypedArray} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {number} samples The number of samples per pixel for pixel\n *                         interleaved data\n * @returns {TypedArray} The resampled raster\n */\n\nexport function resampleNearestInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples) {\n  var relX = inWidth / outWidth;\n  var relY = inHeight / outHeight;\n  var newArray = copyNewSize(valueArray, outWidth, outHeight, samples);\n\n  for (var y = 0; y < outHeight; ++y) {\n    var cy = Math.min(Math.round(relY * y), inHeight - 1);\n\n    for (var x = 0; x < outWidth; ++x) {\n      var cx = Math.min(Math.round(relX * x), inWidth - 1);\n\n      for (var i = 0; i < samples; ++i) {\n        var value = valueArray[cy * inWidth * samples + cx * samples + i];\n        newArray[y * outWidth * samples + x * samples + i] = value;\n      }\n    }\n  }\n\n  return newArray;\n}\n/**\n * Resample the pixel interleaved input array using bilinear interpolation.\n * @param {TypedArray} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {number} samples The number of samples per pixel for pixel\n *                         interleaved data\n * @returns {TypedArray} The resampled raster\n */\n\nexport function resampleBilinearInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples) {\n  var relX = inWidth / outWidth;\n  var relY = inHeight / outHeight;\n  var newArray = copyNewSize(valueArray, outWidth, outHeight, samples);\n\n  for (var y = 0; y < outHeight; ++y) {\n    var rawY = relY * y;\n    var yl = Math.floor(rawY);\n    var yh = Math.min(Math.ceil(rawY), inHeight - 1);\n\n    for (var x = 0; x < outWidth; ++x) {\n      var rawX = relX * x;\n      var tx = rawX % 1;\n      var xl = Math.floor(rawX);\n      var xh = Math.min(Math.ceil(rawX), inWidth - 1);\n\n      for (var i = 0; i < samples; ++i) {\n        var ll = valueArray[yl * inWidth * samples + xl * samples + i];\n        var hl = valueArray[yl * inWidth * samples + xh * samples + i];\n        var lh = valueArray[yh * inWidth * samples + xl * samples + i];\n        var hh = valueArray[yh * inWidth * samples + xh * samples + i];\n        var value = lerp(lerp(ll, hl, tx), lerp(lh, hh, tx), rawY % 1);\n        newArray[y * outWidth * samples + x * samples + i] = value;\n      }\n    }\n  }\n\n  return newArray;\n}\n/**\n * Resample the pixel interleaved input array using the selected resampling method.\n * @param {TypedArray} valueArray The input array to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {number} samples The number of samples per pixel for pixel\n *                                 interleaved data\n * @param {string} [method = 'nearest'] The desired resampling method\n * @returns {TypedArray} The resampled rasters\n */\n\nexport function resampleInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples) {\n  var method = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 'nearest';\n\n  switch (method.toLowerCase()) {\n    case 'nearest':\n      return resampleNearestInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples);\n\n    case 'bilinear':\n    case 'linear':\n      return resampleBilinearInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples);\n\n    default:\n      throw new Error(\"Unsupported resampling method: '\".concat(method, \"'\"));\n  }\n}","import _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\n/** @module geotiffimage */\nimport { getFloat16 } from '@petamoriken/float16';\nimport getAttribute from 'xml-utils/get-attribute.js';\nimport findTagsByName from 'xml-utils/find-tags-by-name.js';\nimport { photometricInterpretations, ExtraSamplesValues } from './globals.js';\nimport { fromWhiteIsZero, fromBlackIsZero, fromPalette, fromCMYK, fromYCbCr, fromCIELab } from './rgb.js';\nimport { getDecoder } from './compression/index.js';\nimport { resample, resampleInterleaved } from './resample.js';\n/**\n * @typedef {Object} ReadRasterOptions\n * @property {Array<number>} [window=whole window] the subset to read data from in pixels.\n * @property {Array<number>} [bbox=whole image] the subset to read data from in\n *                                           geographical coordinates.\n * @property {Array<number>} [samples=all samples] the selection of samples to read from. Default is all samples.\n * @property {boolean} [interleave=false] whether the data shall be read\n *                                             in one single array or separate\n *                                             arrays.\n * @property {Pool} [pool=null] The optional decoder pool to use.\n * @property {number} [width] The desired width of the output. When the width is not the\n *                                 same as the images, resampling will be performed.\n * @property {number} [height] The desired height of the output. When the width is not the\n *                                  same as the images, resampling will be performed.\n * @property {string} [resampleMethod='nearest'] The desired resampling method.\n * @property {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                                       to be aborted\n * @property {number|number[]} [fillValue] The value to use for parts of the image\n *                                              outside of the images extent. When multiple\n *                                              samples are requested, an array of fill values\n *                                              can be passed.\n */\n\n/** @typedef {import(\"./geotiff.js\").TypedArray} TypedArray */\n\nfunction sum(array, start, end) {\n  var s = 0;\n\n  for (var i = start; i < end; ++i) {\n    s += array[i];\n  }\n\n  return s;\n}\n\nfunction arrayForType(format, bitsPerSample, size) {\n  switch (format) {\n    case 1:\n      // unsigned integer data\n      if (bitsPerSample <= 8) {\n        return new Uint8Array(size);\n      } else if (bitsPerSample <= 16) {\n        return new Uint16Array(size);\n      } else if (bitsPerSample <= 32) {\n        return new Uint32Array(size);\n      }\n\n      break;\n\n    case 2:\n      // twos complement signed integer data\n      if (bitsPerSample === 8) {\n        return new Int8Array(size);\n      } else if (bitsPerSample === 16) {\n        return new Int16Array(size);\n      } else if (bitsPerSample === 32) {\n        return new Int32Array(size);\n      }\n\n      break;\n\n    case 3:\n      // floating point data\n      switch (bitsPerSample) {\n        case 16:\n        case 32:\n          return new Float32Array(size);\n\n        case 64:\n          return new Float64Array(size);\n\n        default:\n          break;\n      }\n\n      break;\n\n    default:\n      break;\n  }\n\n  throw Error('Unsupported data format/bitsPerSample');\n}\n\nfunction needsNormalization(format, bitsPerSample) {\n  if ((format === 1 || format === 2) && bitsPerSample <= 32 && bitsPerSample % 8 === 0) {\n    return false;\n  } else if (format === 3 && (bitsPerSample === 16 || bitsPerSample === 32 || bitsPerSample === 64)) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction normalizeArray(inBuffer, format, planarConfiguration, samplesPerPixel, bitsPerSample, tileWidth, tileHeight) {\n  // const inByteArray = new Uint8Array(inBuffer);\n  var view = new DataView(inBuffer);\n  var outSize = planarConfiguration === 2 ? tileHeight * tileWidth : tileHeight * tileWidth * samplesPerPixel;\n  var samplesToTransfer = planarConfiguration === 2 ? 1 : samplesPerPixel;\n  var outArray = arrayForType(format, bitsPerSample, outSize); // let pixel = 0;\n\n  var bitMask = parseInt('1'.repeat(bitsPerSample), 2);\n\n  if (format === 1) {\n    // unsigned integer\n    // translation of https://github.com/OSGeo/gdal/blob/master/gdal/frmts/gtiff/geotiff.cpp#L7337\n    var pixelBitSkip; // let sampleBitOffset = 0;\n\n    if (planarConfiguration === 1) {\n      pixelBitSkip = samplesPerPixel * bitsPerSample; // sampleBitOffset = (samplesPerPixel - 1) * bitsPerSample;\n    } else {\n      pixelBitSkip = bitsPerSample;\n    } // Bits per line rounds up to next byte boundary.\n\n\n    var bitsPerLine = tileWidth * pixelBitSkip;\n\n    if ((bitsPerLine & 7) !== 0) {\n      bitsPerLine = bitsPerLine + 7 & ~7;\n    }\n\n    for (var y = 0; y < tileHeight; ++y) {\n      var lineBitOffset = y * bitsPerLine;\n\n      for (var x = 0; x < tileWidth; ++x) {\n        var pixelBitOffset = lineBitOffset + x * samplesToTransfer * bitsPerSample;\n\n        for (var i = 0; i < samplesToTransfer; ++i) {\n          var bitOffset = pixelBitOffset + i * bitsPerSample;\n          var outIndex = (y * tileWidth + x) * samplesToTransfer + i;\n          var byteOffset = Math.floor(bitOffset / 8);\n          var innerBitOffset = bitOffset % 8;\n\n          if (innerBitOffset + bitsPerSample <= 8) {\n            outArray[outIndex] = view.getUint8(byteOffset) >> 8 - bitsPerSample - innerBitOffset & bitMask;\n          } else if (innerBitOffset + bitsPerSample <= 16) {\n            outArray[outIndex] = view.getUint16(byteOffset) >> 16 - bitsPerSample - innerBitOffset & bitMask;\n          } else if (innerBitOffset + bitsPerSample <= 24) {\n            var raw = view.getUint16(byteOffset) << 8 | view.getUint8(byteOffset + 2);\n            outArray[outIndex] = raw >> 24 - bitsPerSample - innerBitOffset & bitMask;\n          } else {\n            outArray[outIndex] = view.getUint32(byteOffset) >> 32 - bitsPerSample - innerBitOffset & bitMask;\n          } // let outWord = 0;\n          // for (let bit = 0; bit < bitsPerSample; ++bit) {\n          //   if (inByteArray[bitOffset >> 3]\n          //     & (0x80 >> (bitOffset & 7))) {\n          //     outWord |= (1 << (bitsPerSample - 1 - bit));\n          //   }\n          //   ++bitOffset;\n          // }\n          // outArray[outIndex] = outWord;\n          // outArray[pixel] = outWord;\n          // pixel += 1;\n\n        } // bitOffset = bitOffset + pixelBitSkip - bitsPerSample;\n\n      }\n    }\n  } else if (format === 3) {// floating point\n    // Float16 is handled elsewhere\n    // normalize 16/24 bit floats to 32 bit floats in the array\n    // console.time();\n    // if (bitsPerSample === 16) {\n    //   for (let byte = 0, outIndex = 0; byte < inBuffer.byteLength; byte += 2, ++outIndex) {\n    //     outArray[outIndex] = getFloat16(view, byte);\n    //   }\n    // }\n    // console.timeEnd()\n  }\n\n  return outArray.buffer;\n}\n/**\n * GeoTIFF sub-file image.\n */\n\n\nvar GeoTIFFImage = /*#__PURE__*/function () {\n  /**\n   * @constructor\n   * @param {Object} fileDirectory The parsed file directory\n   * @param {Object} geoKeys The parsed geo-keys\n   * @param {DataView} dataView The DataView for the underlying file.\n   * @param {Boolean} littleEndian Whether the file is encoded in little or big endian\n   * @param {Boolean} cache Whether or not decoded tiles shall be cached\n   * @param {Source} source The datasource to read from\n   */\n  function GeoTIFFImage(fileDirectory, geoKeys, dataView, littleEndian, cache, source) {\n    _classCallCheck(this, GeoTIFFImage);\n\n    this.fileDirectory = fileDirectory;\n    this.geoKeys = geoKeys;\n    this.dataView = dataView;\n    this.littleEndian = littleEndian;\n    this.tiles = cache ? {} : null;\n    this.isTiled = !fileDirectory.StripOffsets;\n    var planarConfiguration = fileDirectory.PlanarConfiguration;\n    this.planarConfiguration = typeof planarConfiguration === 'undefined' ? 1 : planarConfiguration;\n\n    if (this.planarConfiguration !== 1 && this.planarConfiguration !== 2) {\n      throw new Error('Invalid planar configuration.');\n    }\n\n    this.source = source;\n  }\n  /**\n   * Returns the associated parsed file directory.\n   * @returns {Object} the parsed file directory\n   */\n\n\n  _createClass(GeoTIFFImage, [{\n    key: \"getFileDirectory\",\n    value: function getFileDirectory() {\n      return this.fileDirectory;\n    }\n    /**\n     * Returns the associated parsed geo keys.\n     * @returns {Object} the parsed geo keys\n     */\n\n  }, {\n    key: \"getGeoKeys\",\n    value: function getGeoKeys() {\n      return this.geoKeys;\n    }\n    /**\n     * Returns the width of the image.\n     * @returns {Number} the width of the image\n     */\n\n  }, {\n    key: \"getWidth\",\n    value: function getWidth() {\n      return this.fileDirectory.ImageWidth;\n    }\n    /**\n     * Returns the height of the image.\n     * @returns {Number} the height of the image\n     */\n\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      return this.fileDirectory.ImageLength;\n    }\n    /**\n     * Returns the number of samples per pixel.\n     * @returns {Number} the number of samples per pixel\n     */\n\n  }, {\n    key: \"getSamplesPerPixel\",\n    value: function getSamplesPerPixel() {\n      return typeof this.fileDirectory.SamplesPerPixel !== 'undefined' ? this.fileDirectory.SamplesPerPixel : 1;\n    }\n    /**\n     * Returns the width of each tile.\n     * @returns {Number} the width of each tile\n     */\n\n  }, {\n    key: \"getTileWidth\",\n    value: function getTileWidth() {\n      return this.isTiled ? this.fileDirectory.TileWidth : this.getWidth();\n    }\n    /**\n     * Returns the height of each tile.\n     * @returns {Number} the height of each tile\n     */\n\n  }, {\n    key: \"getTileHeight\",\n    value: function getTileHeight() {\n      if (this.isTiled) {\n        return this.fileDirectory.TileLength;\n      }\n\n      if (typeof this.fileDirectory.RowsPerStrip !== 'undefined') {\n        return Math.min(this.fileDirectory.RowsPerStrip, this.getHeight());\n      }\n\n      return this.getHeight();\n    }\n  }, {\n    key: \"getBlockWidth\",\n    value: function getBlockWidth() {\n      return this.getTileWidth();\n    }\n  }, {\n    key: \"getBlockHeight\",\n    value: function getBlockHeight(y) {\n      if (this.isTiled || (y + 1) * this.getTileHeight() <= this.getHeight()) {\n        return this.getTileHeight();\n      } else {\n        return this.getHeight() - y * this.getTileHeight();\n      }\n    }\n    /**\n     * Calculates the number of bytes for each pixel across all samples. Only full\n     * bytes are supported, an exception is thrown when this is not the case.\n     * @returns {Number} the bytes per pixel\n     */\n\n  }, {\n    key: \"getBytesPerPixel\",\n    value: function getBytesPerPixel() {\n      var bytes = 0;\n\n      for (var i = 0; i < this.fileDirectory.BitsPerSample.length; ++i) {\n        bytes += this.getSampleByteSize(i);\n      }\n\n      return bytes;\n    }\n  }, {\n    key: \"getSampleByteSize\",\n    value: function getSampleByteSize(i) {\n      if (i >= this.fileDirectory.BitsPerSample.length) {\n        throw new RangeError(\"Sample index \".concat(i, \" is out of range.\"));\n      }\n\n      return Math.ceil(this.fileDirectory.BitsPerSample[i] / 8);\n    }\n  }, {\n    key: \"getReaderForSample\",\n    value: function getReaderForSample(sampleIndex) {\n      var format = this.fileDirectory.SampleFormat ? this.fileDirectory.SampleFormat[sampleIndex] : 1;\n      var bitsPerSample = this.fileDirectory.BitsPerSample[sampleIndex];\n\n      switch (format) {\n        case 1:\n          // unsigned integer data\n          if (bitsPerSample <= 8) {\n            return DataView.prototype.getUint8;\n          } else if (bitsPerSample <= 16) {\n            return DataView.prototype.getUint16;\n          } else if (bitsPerSample <= 32) {\n            return DataView.prototype.getUint32;\n          }\n\n          break;\n\n        case 2:\n          // twos complement signed integer data\n          if (bitsPerSample <= 8) {\n            return DataView.prototype.getInt8;\n          } else if (bitsPerSample <= 16) {\n            return DataView.prototype.getInt16;\n          } else if (bitsPerSample <= 32) {\n            return DataView.prototype.getInt32;\n          }\n\n          break;\n\n        case 3:\n          switch (bitsPerSample) {\n            case 16:\n              return function (offset, littleEndian) {\n                return getFloat16(this, offset, littleEndian);\n              };\n\n            case 32:\n              return DataView.prototype.getFloat32;\n\n            case 64:\n              return DataView.prototype.getFloat64;\n\n            default:\n              break;\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      throw Error('Unsupported data format/bitsPerSample');\n    }\n  }, {\n    key: \"getSampleFormat\",\n    value: function getSampleFormat() {\n      var sampleIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      return this.fileDirectory.SampleFormat ? this.fileDirectory.SampleFormat[sampleIndex] : 1;\n    }\n  }, {\n    key: \"getBitsPerSample\",\n    value: function getBitsPerSample() {\n      var sampleIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      return this.fileDirectory.BitsPerSample[sampleIndex];\n    }\n  }, {\n    key: \"getArrayForSample\",\n    value: function getArrayForSample(sampleIndex, size) {\n      var format = this.getSampleFormat(sampleIndex);\n      var bitsPerSample = this.getBitsPerSample(sampleIndex);\n      return arrayForType(format, bitsPerSample, size);\n    }\n    /**\n     * Returns the decoded strip or tile.\n     * @param {Number} x the strip or tile x-offset\n     * @param {Number} y the tile y-offset (0 for stripped images)\n     * @param {Number} sample the sample to get for separated samples\n     * @param {import(\"./geotiff\").Pool|AbstractDecoder} poolOrDecoder the decoder or decoder pool\n     * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n     *                               to be aborted\n     * @returns {Promise.<ArrayBuffer>}\n     */\n\n  }, {\n    key: \"getTileOrStrip\",\n    value: function () {\n      var _getTileOrStrip = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(x, y, sample, poolOrDecoder, signal) {\n        var _this = this;\n\n        var numTilesPerRow, numTilesPerCol, index, tiles, offset, byteCount, slice, request;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                numTilesPerRow = Math.ceil(this.getWidth() / this.getTileWidth());\n                numTilesPerCol = Math.ceil(this.getHeight() / this.getTileHeight());\n                tiles = this.tiles;\n\n                if (this.planarConfiguration === 1) {\n                  index = y * numTilesPerRow + x;\n                } else if (this.planarConfiguration === 2) {\n                  index = sample * numTilesPerRow * numTilesPerCol + y * numTilesPerRow + x;\n                }\n\n                if (this.isTiled) {\n                  offset = this.fileDirectory.TileOffsets[index];\n                  byteCount = this.fileDirectory.TileByteCounts[index];\n                } else {\n                  offset = this.fileDirectory.StripOffsets[index];\n                  byteCount = this.fileDirectory.StripByteCounts[index];\n                }\n\n                _context2.next = 7;\n                return this.source.fetch([{\n                  offset: offset,\n                  length: byteCount\n                }], signal);\n\n              case 7:\n                slice = _context2.sent[0];\n\n                if (tiles === null || !tiles[index]) {\n                  // resolve each request by potentially applying array normalization\n                  request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                    var data, sampleFormat, bitsPerSample;\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return poolOrDecoder.decode(_this.fileDirectory, slice);\n\n                          case 2:\n                            data = _context.sent;\n                            sampleFormat = _this.getSampleFormat();\n                            bitsPerSample = _this.getBitsPerSample();\n\n                            if (needsNormalization(sampleFormat, bitsPerSample)) {\n                              data = normalizeArray(data, sampleFormat, _this.planarConfiguration, _this.getSamplesPerPixel(), bitsPerSample, _this.getTileWidth(), _this.getBlockHeight(y));\n                            }\n\n                            return _context.abrupt(\"return\", data);\n\n                          case 7:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }))(); // set the cache\n\n                  if (tiles !== null) {\n                    tiles[index] = request;\n                  }\n                } else {\n                  // get from the cache\n                  request = tiles[index];\n                } // cache the tile request\n\n\n                _context2.t0 = x;\n                _context2.t1 = y;\n                _context2.t2 = sample;\n                _context2.next = 14;\n                return request;\n\n              case 14:\n                _context2.t3 = _context2.sent;\n                return _context2.abrupt(\"return\", {\n                  x: _context2.t0,\n                  y: _context2.t1,\n                  sample: _context2.t2,\n                  data: _context2.t3\n                });\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getTileOrStrip(_x, _x2, _x3, _x4, _x5) {\n        return _getTileOrStrip.apply(this, arguments);\n      }\n\n      return getTileOrStrip;\n    }()\n    /**\n     * Internal read function.\n     * @private\n     * @param {Array} imageWindow The image window in pixel coordinates\n     * @param {Array} samples The selected samples (0-based indices)\n     * @param {TypedArray[]|TypedArray} valueArrays The array(s) to write into\n     * @param {Boolean} interleave Whether or not to write in an interleaved manner\n     * @param {import(\"./geotiff\").Pool|AbstractDecoder} poolOrDecoder the decoder or decoder pool\n     * @param {number} width the width of window to be read into\n     * @param {number} height the height of window to be read into\n     * @param {number} resampleMethod the resampling method to be used when interpolating\n     * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n     *                               to be aborted\n     * @returns {Promise<TypedArray[]>|Promise<TypedArray>}\n     */\n\n  }, {\n    key: \"_readRaster\",\n    value: function () {\n      var _readRaster2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(imageWindow, samples, valueArrays, interleave, poolOrDecoder, width, height, resampleMethod, signal) {\n        var _this2 = this;\n\n        var tileWidth, tileHeight, imageWidth, imageHeight, minXTile, maxXTile, minYTile, maxYTile, windowWidth, bytesPerPixel, srcSampleOffsets, sampleReaders, i, promises, littleEndian, yTile, xTile, _loop, sampleIndex, resampled;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                tileWidth = this.getTileWidth();\n                tileHeight = this.getTileHeight();\n                imageWidth = this.getWidth();\n                imageHeight = this.getHeight();\n                minXTile = Math.max(Math.floor(imageWindow[0] / tileWidth), 0);\n                maxXTile = Math.min(Math.ceil(imageWindow[2] / tileWidth), Math.ceil(imageWidth / tileWidth));\n                minYTile = Math.max(Math.floor(imageWindow[1] / tileHeight), 0);\n                maxYTile = Math.min(Math.ceil(imageWindow[3] / tileHeight), Math.ceil(imageHeight / tileHeight));\n                windowWidth = imageWindow[2] - imageWindow[0];\n                bytesPerPixel = this.getBytesPerPixel();\n                srcSampleOffsets = [];\n                sampleReaders = [];\n\n                for (i = 0; i < samples.length; ++i) {\n                  if (this.planarConfiguration === 1) {\n                    srcSampleOffsets.push(sum(this.fileDirectory.BitsPerSample, 0, samples[i]) / 8);\n                  } else {\n                    srcSampleOffsets.push(0);\n                  }\n\n                  sampleReaders.push(this.getReaderForSample(samples[i]));\n                }\n\n                promises = [];\n                littleEndian = this.littleEndian;\n\n                for (yTile = minYTile; yTile < maxYTile; ++yTile) {\n                  for (xTile = minXTile; xTile < maxXTile; ++xTile) {\n                    _loop = function _loop(sampleIndex) {\n                      var si = sampleIndex;\n                      var sample = samples[sampleIndex];\n\n                      if (_this2.planarConfiguration === 2) {\n                        bytesPerPixel = _this2.getSampleByteSize(sampleIndex);\n                      }\n\n                      var promise = _this2.getTileOrStrip(xTile, yTile, sample, poolOrDecoder, signal).then(function (tile) {\n                        var buffer = tile.data;\n                        var dataView = new DataView(buffer);\n\n                        var blockHeight = _this2.getBlockHeight(tile.y);\n\n                        var firstLine = tile.y * tileHeight;\n                        var firstCol = tile.x * tileWidth;\n                        var lastLine = firstLine + blockHeight;\n                        var lastCol = (tile.x + 1) * tileWidth;\n                        var reader = sampleReaders[si];\n                        var ymax = Math.min(blockHeight, blockHeight - (lastLine - imageWindow[3]), imageHeight - firstLine);\n                        var xmax = Math.min(tileWidth, tileWidth - (lastCol - imageWindow[2]), imageWidth - firstCol);\n\n                        for (var y = Math.max(0, imageWindow[1] - firstLine); y < ymax; ++y) {\n                          for (var x = Math.max(0, imageWindow[0] - firstCol); x < xmax; ++x) {\n                            var pixelOffset = (y * tileWidth + x) * bytesPerPixel;\n                            var value = reader.call(dataView, pixelOffset + srcSampleOffsets[si], littleEndian);\n                            var windowCoordinate = void 0;\n\n                            if (interleave) {\n                              windowCoordinate = (y + firstLine - imageWindow[1]) * windowWidth * samples.length + (x + firstCol - imageWindow[0]) * samples.length + si;\n                              valueArrays[windowCoordinate] = value;\n                            } else {\n                              windowCoordinate = (y + firstLine - imageWindow[1]) * windowWidth + x + firstCol - imageWindow[0];\n                              valueArrays[si][windowCoordinate] = value;\n                            }\n                          }\n                        }\n                      });\n\n                      promises.push(promise);\n                    };\n\n                    for (sampleIndex = 0; sampleIndex < samples.length; ++sampleIndex) {\n                      _loop(sampleIndex);\n                    }\n                  }\n                }\n\n                _context3.next = 18;\n                return Promise.all(promises);\n\n              case 18:\n                if (!(width && imageWindow[2] - imageWindow[0] !== width || height && imageWindow[3] - imageWindow[1] !== height)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                if (interleave) {\n                  resampled = resampleInterleaved(valueArrays, imageWindow[2] - imageWindow[0], imageWindow[3] - imageWindow[1], width, height, samples.length, resampleMethod);\n                } else {\n                  resampled = resample(valueArrays, imageWindow[2] - imageWindow[0], imageWindow[3] - imageWindow[1], width, height, resampleMethod);\n                }\n\n                resampled.width = width;\n                resampled.height = height;\n                return _context3.abrupt(\"return\", resampled);\n\n              case 23:\n                valueArrays.width = width || imageWindow[2] - imageWindow[0];\n                valueArrays.height = height || imageWindow[3] - imageWindow[1];\n                return _context3.abrupt(\"return\", valueArrays);\n\n              case 26:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function _readRaster(_x6, _x7, _x8, _x9, _x10, _x11, _x12, _x13, _x14) {\n        return _readRaster2.apply(this, arguments);\n      }\n\n      return _readRaster;\n    }()\n    /**\n     * Reads raster data from the image. This function reads all selected samples\n     * into separate arrays of the correct type for that sample or into a single\n     * combined array when `interleave` is set. When provided, only a subset\n     * of the raster is read for each sample.\n     *\n     * @param {ReadRasterOptions} [options={}] optional parameters\n     * @returns {Promise.<(TypedArray|TypedArray[])>} the decoded arrays as a promise\n     */\n\n  }, {\n    key: \"readRasters\",\n    value: function () {\n      var _readRasters = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var _ref2,\n            wnd,\n            _ref2$samples,\n            samples,\n            interleave,\n            _ref2$pool,\n            pool,\n            width,\n            height,\n            resampleMethod,\n            fillValue,\n            signal,\n            imageWindow,\n            imageWindowWidth,\n            imageWindowHeight,\n            numPixels,\n            samplesPerPixel,\n            i,\n            _i,\n            valueArrays,\n            format,\n            bitsPerSample,\n            _i2,\n            valueArray,\n            poolOrDecoder,\n            result,\n            _args4 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _ref2 = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : {}, wnd = _ref2.window, _ref2$samples = _ref2.samples, samples = _ref2$samples === void 0 ? [] : _ref2$samples, interleave = _ref2.interleave, _ref2$pool = _ref2.pool, pool = _ref2$pool === void 0 ? null : _ref2$pool, width = _ref2.width, height = _ref2.height, resampleMethod = _ref2.resampleMethod, fillValue = _ref2.fillValue, signal = _ref2.signal;\n                imageWindow = wnd || [0, 0, this.getWidth(), this.getHeight()]; // check parameters\n\n                if (!(imageWindow[0] > imageWindow[2] || imageWindow[1] > imageWindow[3])) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                throw new Error('Invalid subsets');\n\n              case 4:\n                imageWindowWidth = imageWindow[2] - imageWindow[0];\n                imageWindowHeight = imageWindow[3] - imageWindow[1];\n                numPixels = imageWindowWidth * imageWindowHeight;\n                samplesPerPixel = this.getSamplesPerPixel();\n\n                if (!(!samples || !samples.length)) {\n                  _context4.next = 12;\n                  break;\n                }\n\n                for (i = 0; i < samplesPerPixel; ++i) {\n                  samples.push(i);\n                }\n\n                _context4.next = 19;\n                break;\n\n              case 12:\n                _i = 0;\n\n              case 13:\n                if (!(_i < samples.length)) {\n                  _context4.next = 19;\n                  break;\n                }\n\n                if (!(samples[_i] >= samplesPerPixel)) {\n                  _context4.next = 16;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", Promise.reject(new RangeError(\"Invalid sample index '\".concat(samples[_i], \"'.\"))));\n\n              case 16:\n                ++_i;\n                _context4.next = 13;\n                break;\n\n              case 19:\n                if (interleave) {\n                  format = this.fileDirectory.SampleFormat ? Math.max.apply(null, this.fileDirectory.SampleFormat) : 1;\n                  bitsPerSample = Math.max.apply(null, this.fileDirectory.BitsPerSample);\n                  valueArrays = arrayForType(format, bitsPerSample, numPixels * samples.length);\n\n                  if (fillValue) {\n                    valueArrays.fill(fillValue);\n                  }\n                } else {\n                  valueArrays = [];\n\n                  for (_i2 = 0; _i2 < samples.length; ++_i2) {\n                    valueArray = this.getArrayForSample(samples[_i2], numPixels);\n\n                    if (Array.isArray(fillValue) && _i2 < fillValue.length) {\n                      valueArray.fill(fillValue[_i2]);\n                    } else if (fillValue && !Array.isArray(fillValue)) {\n                      valueArray.fill(fillValue);\n                    }\n\n                    valueArrays.push(valueArray);\n                  }\n                }\n\n                _context4.t0 = pool;\n\n                if (_context4.t0) {\n                  _context4.next = 25;\n                  break;\n                }\n\n                _context4.next = 24;\n                return getDecoder(this.fileDirectory);\n\n              case 24:\n                _context4.t0 = _context4.sent;\n\n              case 25:\n                poolOrDecoder = _context4.t0;\n                _context4.next = 28;\n                return this._readRaster(imageWindow, samples, valueArrays, interleave, poolOrDecoder, width, height, resampleMethod, signal);\n\n              case 28:\n                result = _context4.sent;\n                return _context4.abrupt(\"return\", result);\n\n              case 30:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function readRasters() {\n        return _readRasters.apply(this, arguments);\n      }\n\n      return readRasters;\n    }()\n    /**\n     * Reads raster data from the image as RGB. The result is always an\n     * interleaved typed array.\n     * Colorspaces other than RGB will be transformed to RGB, color maps expanded.\n     * When no other method is applicable, the first sample is used to produce a\n     * greayscale image.\n     * When provided, only a subset of the raster is read for each sample.\n     *\n     * @param {Object} [options] optional parameters\n     * @param {Array<number>} [options.window] the subset to read data from in pixels.\n     * @param {boolean} [options.interleave=true] whether the data shall be read\n     *                                             in one single array or separate\n     *                                             arrays.\n     * @param {import(\"./geotiff\").Pool} [options.pool=null] The optional decoder pool to use.\n     * @param {number} [options.width] The desired width of the output. When the width is no the\n     *                                 same as the images, resampling will be performed.\n     * @param {number} [options.height] The desired height of the output. When the width is no the\n     *                                  same as the images, resampling will be performed.\n     * @param {string} [options.resampleMethod='nearest'] The desired resampling method.\n     * @param {boolean} [options.enableAlpha=false] Enable reading alpha channel if present.\n     * @param {AbortSignal} [options.signal] An AbortSignal that may be signalled if the request is\n     *                                       to be aborted\n     * @returns {Promise<TypedArray|TypedArray[]>} the RGB array as a Promise\n     */\n\n  }, {\n    key: \"readRGB\",\n    value: function () {\n      var _readRGB = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var _ref3,\n            window,\n            _ref3$interleave,\n            interleave,\n            _ref3$pool,\n            pool,\n            width,\n            height,\n            resampleMethod,\n            _ref3$enableAlpha,\n            enableAlpha,\n            signal,\n            imageWindow,\n            pi,\n            s,\n            i,\n            samples,\n            subOptions,\n            fileDirectory,\n            raster,\n            max,\n            data,\n            red,\n            green,\n            blue,\n            _i3,\n            j,\n            _args5 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _ref3 = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {}, window = _ref3.window, _ref3$interleave = _ref3.interleave, interleave = _ref3$interleave === void 0 ? true : _ref3$interleave, _ref3$pool = _ref3.pool, pool = _ref3$pool === void 0 ? null : _ref3$pool, width = _ref3.width, height = _ref3.height, resampleMethod = _ref3.resampleMethod, _ref3$enableAlpha = _ref3.enableAlpha, enableAlpha = _ref3$enableAlpha === void 0 ? false : _ref3$enableAlpha, signal = _ref3.signal;\n                imageWindow = window || [0, 0, this.getWidth(), this.getHeight()]; // check parameters\n\n                if (!(imageWindow[0] > imageWindow[2] || imageWindow[1] > imageWindow[3])) {\n                  _context5.next = 4;\n                  break;\n                }\n\n                throw new Error('Invalid subsets');\n\n              case 4:\n                pi = this.fileDirectory.PhotometricInterpretation;\n\n                if (!(pi === photometricInterpretations.RGB)) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                s = [0, 1, 2];\n\n                if (!(this.fileDirectory.ExtraSamples === ExtraSamplesValues.Unspecified) && enableAlpha) {\n                  s = [];\n\n                  for (i = 0; i < this.fileDirectory.BitsPerSample.length; i += 1) {\n                    s.push(i);\n                  }\n                }\n\n                return _context5.abrupt(\"return\", this.readRasters({\n                  window: window,\n                  interleave: interleave,\n                  samples: s,\n                  pool: pool,\n                  width: width,\n                  height: height,\n                  resampleMethod: resampleMethod,\n                  signal: signal\n                }));\n\n              case 9:\n                _context5.t0 = pi;\n                _context5.next = _context5.t0 === photometricInterpretations.WhiteIsZero ? 12 : _context5.t0 === photometricInterpretations.BlackIsZero ? 12 : _context5.t0 === photometricInterpretations.Palette ? 12 : _context5.t0 === photometricInterpretations.CMYK ? 14 : _context5.t0 === photometricInterpretations.YCbCr ? 16 : _context5.t0 === photometricInterpretations.CIELab ? 16 : 18;\n                break;\n\n              case 12:\n                samples = [0];\n                return _context5.abrupt(\"break\", 19);\n\n              case 14:\n                samples = [0, 1, 2, 3];\n                return _context5.abrupt(\"break\", 19);\n\n              case 16:\n                samples = [0, 1, 2];\n                return _context5.abrupt(\"break\", 19);\n\n              case 18:\n                throw new Error('Invalid or unsupported photometric interpretation.');\n\n              case 19:\n                subOptions = {\n                  window: imageWindow,\n                  interleave: true,\n                  samples: samples,\n                  pool: pool,\n                  width: width,\n                  height: height,\n                  resampleMethod: resampleMethod,\n                  signal: signal\n                };\n                fileDirectory = this.fileDirectory;\n                _context5.next = 23;\n                return this.readRasters(subOptions);\n\n              case 23:\n                raster = _context5.sent;\n                max = Math.pow(2, this.fileDirectory.BitsPerSample[0]);\n                _context5.t1 = pi;\n                _context5.next = _context5.t1 === photometricInterpretations.WhiteIsZero ? 28 : _context5.t1 === photometricInterpretations.BlackIsZero ? 30 : _context5.t1 === photometricInterpretations.Palette ? 32 : _context5.t1 === photometricInterpretations.CMYK ? 34 : _context5.t1 === photometricInterpretations.YCbCr ? 36 : _context5.t1 === photometricInterpretations.CIELab ? 38 : 40;\n                break;\n\n              case 28:\n                data = fromWhiteIsZero(raster, max);\n                return _context5.abrupt(\"break\", 41);\n\n              case 30:\n                data = fromBlackIsZero(raster, max);\n                return _context5.abrupt(\"break\", 41);\n\n              case 32:\n                data = fromPalette(raster, fileDirectory.ColorMap);\n                return _context5.abrupt(\"break\", 41);\n\n              case 34:\n                data = fromCMYK(raster);\n                return _context5.abrupt(\"break\", 41);\n\n              case 36:\n                data = fromYCbCr(raster);\n                return _context5.abrupt(\"break\", 41);\n\n              case 38:\n                data = fromCIELab(raster);\n                return _context5.abrupt(\"break\", 41);\n\n              case 40:\n                throw new Error('Unsupported photometric interpretation.');\n\n              case 41:\n                // if non-interleaved data is requested, we must split the channels\n                // into their respective arrays\n                if (!interleave) {\n                  red = new Uint8Array(data.length / 3);\n                  green = new Uint8Array(data.length / 3);\n                  blue = new Uint8Array(data.length / 3);\n\n                  for (_i3 = 0, j = 0; _i3 < data.length; _i3 += 3, ++j) {\n                    red[j] = data[_i3];\n                    green[j] = data[_i3 + 1];\n                    blue[j] = data[_i3 + 2];\n                  }\n\n                  data = [red, green, blue];\n                }\n\n                data.width = raster.width;\n                data.height = raster.height;\n                return _context5.abrupt(\"return\", data);\n\n              case 45:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function readRGB() {\n        return _readRGB.apply(this, arguments);\n      }\n\n      return readRGB;\n    }()\n    /**\n     * Returns an array of tiepoints.\n     * @returns {Object[]}\n     */\n\n  }, {\n    key: \"getTiePoints\",\n    value: function getTiePoints() {\n      if (!this.fileDirectory.ModelTiepoint) {\n        return [];\n      }\n\n      var tiePoints = [];\n\n      for (var i = 0; i < this.fileDirectory.ModelTiepoint.length; i += 6) {\n        tiePoints.push({\n          i: this.fileDirectory.ModelTiepoint[i],\n          j: this.fileDirectory.ModelTiepoint[i + 1],\n          k: this.fileDirectory.ModelTiepoint[i + 2],\n          x: this.fileDirectory.ModelTiepoint[i + 3],\n          y: this.fileDirectory.ModelTiepoint[i + 4],\n          z: this.fileDirectory.ModelTiepoint[i + 5]\n        });\n      }\n\n      return tiePoints;\n    }\n    /**\n     * Returns the parsed GDAL metadata items.\n     *\n     * If sample is passed to null, dataset-level metadata will be returned.\n     * Otherwise only metadata specific to the provided sample will be returned.\n     *\n     * @param {number} [sample=null] The sample index.\n     * @returns {Object}\n     */\n\n  }, {\n    key: \"getGDALMetadata\",\n    value: function getGDALMetadata() {\n      var sample = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var metadata = {};\n\n      if (!this.fileDirectory.GDAL_METADATA) {\n        return null;\n      }\n\n      var string = this.fileDirectory.GDAL_METADATA;\n      var items = findTagsByName(string, 'Item');\n\n      if (sample === null) {\n        items = items.filter(function (item) {\n          return getAttribute(item, 'sample') === undefined;\n        });\n      } else {\n        items = items.filter(function (item) {\n          return Number(getAttribute(item, 'sample')) === sample;\n        });\n      }\n\n      for (var i = 0; i < items.length; ++i) {\n        var item = items[i];\n        metadata[getAttribute(item, 'name')] = item.inner;\n      }\n\n      return metadata;\n    }\n    /**\n     * Returns the GDAL nodata value\n     * @returns {number|null}\n     */\n\n  }, {\n    key: \"getGDALNoData\",\n    value: function getGDALNoData() {\n      if (!this.fileDirectory.GDAL_NODATA) {\n        return null;\n      }\n\n      var string = this.fileDirectory.GDAL_NODATA;\n      return Number(string.substring(0, string.length - 1));\n    }\n    /**\n     * Returns the image origin as a XYZ-vector. When the image has no affine\n     * transformation, then an exception is thrown.\n     * @returns {Array<number>} The origin as a vector\n     */\n\n  }, {\n    key: \"getOrigin\",\n    value: function getOrigin() {\n      var tiePoints = this.fileDirectory.ModelTiepoint;\n      var modelTransformation = this.fileDirectory.ModelTransformation;\n\n      if (tiePoints && tiePoints.length === 6) {\n        return [tiePoints[3], tiePoints[4], tiePoints[5]];\n      }\n\n      if (modelTransformation) {\n        return [modelTransformation[3], modelTransformation[7], modelTransformation[11]];\n      }\n\n      throw new Error('The image does not have an affine transformation.');\n    }\n    /**\n     * Returns the image resolution as a XYZ-vector. When the image has no affine\n     * transformation, then an exception is thrown.\n     * @param {GeoTIFFImage} [referenceImage=null] A reference image to calculate the resolution from\n     *                                             in cases when the current image does not have the\n     *                                             required tags on its own.\n     * @returns {Array<number>} The resolution as a vector\n     */\n\n  }, {\n    key: \"getResolution\",\n    value: function getResolution() {\n      var referenceImage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var modelPixelScale = this.fileDirectory.ModelPixelScale;\n      var modelTransformation = this.fileDirectory.ModelTransformation;\n\n      if (modelPixelScale) {\n        return [modelPixelScale[0], -modelPixelScale[1], modelPixelScale[2]];\n      }\n\n      if (modelTransformation) {\n        return [modelTransformation[0], modelTransformation[5], modelTransformation[10]];\n      }\n\n      if (referenceImage) {\n        var _referenceImage$getRe = referenceImage.getResolution(),\n            _referenceImage$getRe2 = _slicedToArray(_referenceImage$getRe, 3),\n            refResX = _referenceImage$getRe2[0],\n            refResY = _referenceImage$getRe2[1],\n            refResZ = _referenceImage$getRe2[2];\n\n        return [refResX * referenceImage.getWidth() / this.getWidth(), refResY * referenceImage.getHeight() / this.getHeight(), refResZ * referenceImage.getWidth() / this.getWidth()];\n      }\n\n      throw new Error('The image does not have an affine transformation.');\n    }\n    /**\n     * Returns whether or not the pixels of the image depict an area (or point).\n     * @returns {Boolean} Whether the pixels are a point\n     */\n\n  }, {\n    key: \"pixelIsArea\",\n    value: function pixelIsArea() {\n      return this.geoKeys.GTRasterTypeGeoKey === 1;\n    }\n    /**\n     * Returns the image bounding box as an array of 4 values: min-x, min-y,\n     * max-x and max-y. When the image has no affine transformation, then an\n     * exception is thrown.\n     * @returns {Array<number>} The bounding box\n     */\n\n  }, {\n    key: \"getBoundingBox\",\n    value: function getBoundingBox() {\n      var origin = this.getOrigin();\n      var resolution = this.getResolution();\n      var x1 = origin[0];\n      var y1 = origin[1];\n      var x2 = x1 + resolution[0] * this.getWidth();\n      var y2 = y1 + resolution[1] * this.getHeight();\n      return [Math.min(x1, x2), Math.min(y1, y2), Math.max(x1, x2), Math.max(y1, y2)];\n    }\n  }]);\n\n  return GeoTIFFImage;\n}();\n\nexport default GeoTIFFImage;","import _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { getFloat16 as _getFloat } from '@petamoriken/float16';\n\nvar DataView64 = /*#__PURE__*/function () {\n  function DataView64(arrayBuffer) {\n    _classCallCheck(this, DataView64);\n\n    this._dataView = new DataView(arrayBuffer);\n  }\n\n  _createClass(DataView64, [{\n    key: \"buffer\",\n    get: function get() {\n      return this._dataView.buffer;\n    }\n  }, {\n    key: \"getUint64\",\n    value: function getUint64(offset, littleEndian) {\n      var left = this.getUint32(offset, littleEndian);\n      var right = this.getUint32(offset + 4, littleEndian);\n      var combined;\n\n      if (littleEndian) {\n        combined = left + Math.pow(2, 32) * right;\n\n        if (!Number.isSafeInteger(combined)) {\n          throw new Error(\"\".concat(combined, \" exceeds MAX_SAFE_INTEGER. \") + 'Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues');\n        }\n\n        return combined;\n      }\n\n      combined = Math.pow(2, 32) * left + right;\n\n      if (!Number.isSafeInteger(combined)) {\n        throw new Error(\"\".concat(combined, \" exceeds MAX_SAFE_INTEGER. \") + 'Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues');\n      }\n\n      return combined;\n    } // adapted from https://stackoverflow.com/a/55338384/8060591\n\n  }, {\n    key: \"getInt64\",\n    value: function getInt64(offset, littleEndian) {\n      var value = 0;\n      var isNegative = (this._dataView.getUint8(offset + (littleEndian ? 7 : 0)) & 0x80) > 0;\n      var carrying = true;\n\n      for (var i = 0; i < 8; i++) {\n        var byte = this._dataView.getUint8(offset + (littleEndian ? i : 7 - i));\n\n        if (isNegative) {\n          if (carrying) {\n            if (byte !== 0x00) {\n              byte = ~(byte - 1) & 0xff;\n              carrying = false;\n            }\n          } else {\n            byte = ~byte & 0xff;\n          }\n        }\n\n        value += byte * Math.pow(256, i);\n      }\n\n      if (isNegative) {\n        value = -value;\n      }\n\n      return value;\n    }\n  }, {\n    key: \"getUint8\",\n    value: function getUint8(offset, littleEndian) {\n      return this._dataView.getUint8(offset, littleEndian);\n    }\n  }, {\n    key: \"getInt8\",\n    value: function getInt8(offset, littleEndian) {\n      return this._dataView.getInt8(offset, littleEndian);\n    }\n  }, {\n    key: \"getUint16\",\n    value: function getUint16(offset, littleEndian) {\n      return this._dataView.getUint16(offset, littleEndian);\n    }\n  }, {\n    key: \"getInt16\",\n    value: function getInt16(offset, littleEndian) {\n      return this._dataView.getInt16(offset, littleEndian);\n    }\n  }, {\n    key: \"getUint32\",\n    value: function getUint32(offset, littleEndian) {\n      return this._dataView.getUint32(offset, littleEndian);\n    }\n  }, {\n    key: \"getInt32\",\n    value: function getInt32(offset, littleEndian) {\n      return this._dataView.getInt32(offset, littleEndian);\n    }\n  }, {\n    key: \"getFloat16\",\n    value: function getFloat16(offset, littleEndian) {\n      return _getFloat(this._dataView, offset, littleEndian);\n    }\n  }, {\n    key: \"getFloat32\",\n    value: function getFloat32(offset, littleEndian) {\n      return this._dataView.getFloat32(offset, littleEndian);\n    }\n  }, {\n    key: \"getFloat64\",\n    value: function getFloat64(offset, littleEndian) {\n      return this._dataView.getFloat64(offset, littleEndian);\n    }\n  }]);\n\n  return DataView64;\n}();\n\nexport { DataView64 as default };","import _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nvar DataSlice = /*#__PURE__*/function () {\n  function DataSlice(arrayBuffer, sliceOffset, littleEndian, bigTiff) {\n    _classCallCheck(this, DataSlice);\n\n    this._dataView = new DataView(arrayBuffer);\n    this._sliceOffset = sliceOffset;\n    this._littleEndian = littleEndian;\n    this._bigTiff = bigTiff;\n  }\n\n  _createClass(DataSlice, [{\n    key: \"sliceOffset\",\n    get: function get() {\n      return this._sliceOffset;\n    }\n  }, {\n    key: \"sliceTop\",\n    get: function get() {\n      return this._sliceOffset + this.buffer.byteLength;\n    }\n  }, {\n    key: \"littleEndian\",\n    get: function get() {\n      return this._littleEndian;\n    }\n  }, {\n    key: \"bigTiff\",\n    get: function get() {\n      return this._bigTiff;\n    }\n  }, {\n    key: \"buffer\",\n    get: function get() {\n      return this._dataView.buffer;\n    }\n  }, {\n    key: \"covers\",\n    value: function covers(offset, length) {\n      return this.sliceOffset <= offset && this.sliceTop >= offset + length;\n    }\n  }, {\n    key: \"readUint8\",\n    value: function readUint8(offset) {\n      return this._dataView.getUint8(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readInt8\",\n    value: function readInt8(offset) {\n      return this._dataView.getInt8(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readUint16\",\n    value: function readUint16(offset) {\n      return this._dataView.getUint16(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readInt16\",\n    value: function readInt16(offset) {\n      return this._dataView.getInt16(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readUint32\",\n    value: function readUint32(offset) {\n      return this._dataView.getUint32(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readInt32\",\n    value: function readInt32(offset) {\n      return this._dataView.getInt32(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readFloat32\",\n    value: function readFloat32(offset) {\n      return this._dataView.getFloat32(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readFloat64\",\n    value: function readFloat64(offset) {\n      return this._dataView.getFloat64(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readUint64\",\n    value: function readUint64(offset) {\n      var left = this.readUint32(offset);\n      var right = this.readUint32(offset + 4);\n      var combined;\n\n      if (this._littleEndian) {\n        combined = left + Math.pow(2, 32) * right;\n\n        if (!Number.isSafeInteger(combined)) {\n          throw new Error(\"\".concat(combined, \" exceeds MAX_SAFE_INTEGER. \") + 'Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues');\n        }\n\n        return combined;\n      }\n\n      combined = Math.pow(2, 32) * left + right;\n\n      if (!Number.isSafeInteger(combined)) {\n        throw new Error(\"\".concat(combined, \" exceeds MAX_SAFE_INTEGER. \") + 'Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues');\n      }\n\n      return combined;\n    } // adapted from https://stackoverflow.com/a/55338384/8060591\n\n  }, {\n    key: \"readInt64\",\n    value: function readInt64(offset) {\n      var value = 0;\n      var isNegative = (this._dataView.getUint8(offset + (this._littleEndian ? 7 : 0)) & 0x80) > 0;\n      var carrying = true;\n\n      for (var i = 0; i < 8; i++) {\n        var byte = this._dataView.getUint8(offset + (this._littleEndian ? i : 7 - i));\n\n        if (isNegative) {\n          if (carrying) {\n            if (byte !== 0x00) {\n              byte = ~(byte - 1) & 0xff;\n              carrying = false;\n            }\n          } else {\n            byte = ~byte & 0xff;\n          }\n        }\n\n        value += byte * Math.pow(256, i);\n      }\n\n      if (isNegative) {\n        value = -value;\n      }\n\n      return value;\n    }\n  }, {\n    key: \"readOffset\",\n    value: function readOffset(offset) {\n      if (this._bigTiff) {\n        return this.readUint64(offset);\n      }\n\n      return this.readUint32(offset);\n    }\n  }]);\n\n  return DataSlice;\n}();\n\nexport { DataSlice as default };","import _toArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/toArray.js\";\nimport _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.object.from-entries.js\";\nvar CRLFCRLF = '\\r\\n\\r\\n';\n/*\n * Shim for 'Object.fromEntries'\n */\n\nfunction itemsToObject(items) {\n  if (typeof Object.fromEntries !== 'undefined') {\n    return Object.fromEntries(items);\n  }\n\n  var obj = {};\n\n  var _iterator = _createForOfIteratorHelper(items),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _slicedToArray(_step.value, 2),\n          key = _step$value[0],\n          value = _step$value[1];\n\n      obj[key.toLowerCase()] = value;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return obj;\n}\n/**\n * Parse HTTP headers from a given string.\n * @param {String} text the text to parse the headers from\n * @returns {Object} the parsed headers with lowercase keys\n */\n\n\nfunction parseHeaders(text) {\n  var items = text.split('\\r\\n').map(function (line) {\n    var kv = line.split(':').map(function (str) {\n      return str.trim();\n    });\n    kv[0] = kv[0].toLowerCase();\n    return kv;\n  });\n  return itemsToObject(items);\n}\n/**\n * Parse a 'Content-Type' header value to the content-type and parameters\n * @param {String} rawContentType the raw string to parse from\n * @returns {Object} the parsed content type with the fields: type and params\n */\n\n\nexport function parseContentType(rawContentType) {\n  var _rawContentType$split = rawContentType.split(';').map(function (s) {\n    return s.trim();\n  }),\n      _rawContentType$split2 = _toArray(_rawContentType$split),\n      type = _rawContentType$split2[0],\n      rawParams = _rawContentType$split2.slice(1);\n\n  var paramsItems = rawParams.map(function (param) {\n    return param.split('=');\n  });\n  return {\n    type: type,\n    params: itemsToObject(paramsItems)\n  };\n}\n/**\n * Parse a 'Content-Range' header value to its start, end, and total parts\n * @param {String} rawContentRange the raw string to parse from\n * @returns {Object} the parsed parts\n */\n\nexport function parseContentRange(rawContentRange) {\n  var start;\n  var end;\n  var total;\n\n  if (rawContentRange) {\n    var _rawContentRange$matc = rawContentRange.match(/bytes (\\d+)-(\\d+)\\/(\\d+)/);\n\n    var _rawContentRange$matc2 = _slicedToArray(_rawContentRange$matc, 4);\n\n    start = _rawContentRange$matc2[1];\n    end = _rawContentRange$matc2[2];\n    total = _rawContentRange$matc2[3];\n    start = parseInt(start, 10);\n    end = parseInt(end, 10);\n    total = parseInt(total, 10);\n  }\n\n  return {\n    start: start,\n    end: end,\n    total: total\n  };\n}\n/**\n * Parses a list of byteranges from the given 'multipart/byteranges' HTTP response.\n * Each item in the list has the following properties:\n * - headers: the HTTP headers\n * - data: the sliced ArrayBuffer for that specific part\n * - offset: the offset of the byterange within its originating file\n * - length: the length of the byterange\n * @param {ArrayBuffer} responseArrayBuffer the response to be parsed and split\n * @param {String} boundary the boundary string used to split the sections\n * @returns {Object[]} the parsed byteranges\n */\n\nexport function parseByteRanges(responseArrayBuffer, boundary) {\n  var offset = null;\n  var decoder = new TextDecoder('ascii');\n  var out = [];\n  var startBoundary = \"--\".concat(boundary);\n  var endBoundary = \"\".concat(startBoundary, \"--\"); // search for the initial boundary, may be offset by some bytes\n  // TODO: more efficient to check for `--` in bytes directly\n\n  for (var i = 0; i < 10; ++i) {\n    var text = decoder.decode(new Uint8Array(responseArrayBuffer, i, startBoundary.length));\n\n    if (text === startBoundary) {\n      offset = i;\n    }\n  }\n\n  if (offset === null) {\n    throw new Error('Could not find initial boundary');\n  }\n\n  while (offset < responseArrayBuffer.byteLength) {\n    var _text = decoder.decode(new Uint8Array(responseArrayBuffer, offset, Math.min(startBoundary.length + 1024, responseArrayBuffer.byteLength - offset))); // break if we arrived at the end\n\n\n    if (_text.length === 0 || _text.startsWith(endBoundary)) {\n      break;\n    } // assert that we are actually dealing with a byterange and are at the correct offset\n\n\n    if (!_text.startsWith(startBoundary)) {\n      throw new Error('Part does not start with boundary');\n    } // get a substring from where we read the headers\n\n\n    var innerText = _text.substr(startBoundary.length + 2);\n\n    if (innerText.length === 0) {\n      break;\n    } // find the double linebreak that denotes the end of the headers\n\n\n    var endOfHeaders = innerText.indexOf(CRLFCRLF); // parse the headers to get the content range size\n\n    var headers = parseHeaders(innerText.substr(0, endOfHeaders));\n\n    var _parseContentRange = parseContentRange(headers['content-range']),\n        start = _parseContentRange.start,\n        end = _parseContentRange.end,\n        total = _parseContentRange.total; // calculate the length of the slice and the next offset\n\n\n    var startOfData = offset + startBoundary.length + endOfHeaders + CRLFCRLF.length;\n    var length = parseInt(end, 10) + 1 - parseInt(start, 10);\n    out.push({\n      headers: headers,\n      data: responseArrayBuffer.slice(startOfData, startOfData + length),\n      offset: start,\n      length: length,\n      fileSize: total\n    });\n    offset = startOfData + length + 4;\n  }\n\n  return out;\n}","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\n/**\n * @typedef Slice\n * @property {number} offset\n * @property {number} length\n */\nexport var BaseSource = /*#__PURE__*/function () {\n  function BaseSource() {\n    _classCallCheck(this, BaseSource);\n  }\n\n  _createClass(BaseSource, [{\n    key: \"fetch\",\n    value:\n    /**\n     *\n     * @param {Slice[]} slices\n     * @returns {ArrayBuffer[]}\n     */\n    function () {\n      var _fetch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(slices) {\n        var _this = this;\n\n        var signal,\n            _args = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                signal = _args.length > 1 && _args[1] !== undefined ? _args[1] : undefined;\n                return _context.abrupt(\"return\", Promise.all(slices.map(function (slice) {\n                  return _this.fetchSlice(slice, signal);\n                })));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function fetch(_x) {\n        return _fetch.apply(this, arguments);\n      }\n\n      return fetch;\n    }()\n    /**\n     *\n     * @param {Slice} slice\n     * @returns {ArrayBuffer}\n     */\n\n  }, {\n    key: \"fetchSlice\",\n    value: function () {\n      var _fetchSlice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(slice) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                throw new Error(\"fetching of slice \".concat(slice, \" not possible, not implemented\"));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function fetchSlice(_x2) {\n        return _fetchSlice.apply(this, arguments);\n      }\n\n      return fetchSlice;\n    }()\n    /**\n     * Returns the filesize if already determined and null otherwise\n     */\n\n  }, {\n    key: \"fileSize\",\n    get: function get() {\n      return null;\n    }\n  }, {\n    key: \"close\",\n    value: function () {\n      var _close = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function close() {\n        return _close.apply(this, arguments);\n      }\n\n      return close;\n    }()\n  }]);\n\n  return BaseSource;\n}();","import _toConsumableArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _wrapNativeSuper from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar QuickLRU = /*#__PURE__*/function (_Map, _Symbol$iterator, _Symbol$toStringTag) {\n  _inherits(QuickLRU, _Map);\n\n  var _super = _createSuper(QuickLRU);\n\n  function QuickLRU() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, QuickLRU);\n\n    _this = _super.call(this);\n\n    if (!(options.maxSize && options.maxSize > 0)) {\n      throw new TypeError('`maxSize` must be a number greater than 0');\n    }\n\n    if (typeof options.maxAge === 'number' && options.maxAge === 0) {\n      throw new TypeError('`maxAge` must be a number greater than 0');\n    } // TODO: Use private class fields when ESLint supports them.\n\n\n    _this.maxSize = options.maxSize;\n    _this.maxAge = options.maxAge || Number.POSITIVE_INFINITY;\n    _this.onEviction = options.onEviction;\n    _this.cache = new Map();\n    _this.oldCache = new Map();\n    _this._size = 0;\n    return _this;\n  } // TODO: Use private class methods when targeting Node.js 16.\n\n\n  _createClass(QuickLRU, [{\n    key: \"_emitEvictions\",\n    value: function _emitEvictions(cache) {\n      if (typeof this.onEviction !== 'function') {\n        return;\n      }\n\n      var _iterator = _createForOfIteratorHelper(cache),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              key = _step$value[0],\n              item = _step$value[1];\n\n          this.onEviction(key, item.value);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"_deleteIfExpired\",\n    value: function _deleteIfExpired(key, item) {\n      if (typeof item.expiry === 'number' && item.expiry <= Date.now()) {\n        if (typeof this.onEviction === 'function') {\n          this.onEviction(key, item.value);\n        }\n\n        return this.delete(key);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_getOrDeleteIfExpired\",\n    value: function _getOrDeleteIfExpired(key, item) {\n      var deleted = this._deleteIfExpired(key, item);\n\n      if (deleted === false) {\n        return item.value;\n      }\n    }\n  }, {\n    key: \"_getItemValue\",\n    value: function _getItemValue(key, item) {\n      return item.expiry ? this._getOrDeleteIfExpired(key, item) : item.value;\n    }\n  }, {\n    key: \"_peek\",\n    value: function _peek(key, cache) {\n      var item = cache.get(key);\n      return this._getItemValue(key, item);\n    }\n  }, {\n    key: \"_set\",\n    value: function _set(key, value) {\n      this.cache.set(key, value);\n      this._size++;\n\n      if (this._size >= this.maxSize) {\n        this._size = 0;\n\n        this._emitEvictions(this.oldCache);\n\n        this.oldCache = this.cache;\n        this.cache = new Map();\n      }\n    }\n  }, {\n    key: \"_moveToRecent\",\n    value: function _moveToRecent(key, item) {\n      this.oldCache.delete(key);\n\n      this._set(key, item);\n    }\n  }, {\n    key: \"_entriesAscending\",\n    value: /*#__PURE__*/_regeneratorRuntime.mark(function _entriesAscending() {\n      var _iterator2, _step2, item, _item, key, value, deleted, _iterator3, _step3, _item2, _item3, _key, _value, _deleted;\n\n      return _regeneratorRuntime.wrap(function _entriesAscending$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _iterator2 = _createForOfIteratorHelper(this.oldCache);\n              _context.prev = 1;\n\n              _iterator2.s();\n\n            case 3:\n              if ((_step2 = _iterator2.n()).done) {\n                _context.next = 13;\n                break;\n              }\n\n              item = _step2.value;\n              _item = _slicedToArray(item, 2), key = _item[0], value = _item[1];\n\n              if (this.cache.has(key)) {\n                _context.next = 11;\n                break;\n              }\n\n              deleted = this._deleteIfExpired(key, value);\n\n              if (!(deleted === false)) {\n                _context.next = 11;\n                break;\n              }\n\n              _context.next = 11;\n              return item;\n\n            case 11:\n              _context.next = 3;\n              break;\n\n            case 13:\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](1);\n\n              _iterator2.e(_context.t0);\n\n            case 18:\n              _context.prev = 18;\n\n              _iterator2.f();\n\n              return _context.finish(18);\n\n            case 21:\n              _iterator3 = _createForOfIteratorHelper(this.cache);\n              _context.prev = 22;\n\n              _iterator3.s();\n\n            case 24:\n              if ((_step3 = _iterator3.n()).done) {\n                _context.next = 33;\n                break;\n              }\n\n              _item2 = _step3.value;\n              _item3 = _slicedToArray(_item2, 2), _key = _item3[0], _value = _item3[1];\n              _deleted = this._deleteIfExpired(_key, _value);\n\n              if (!(_deleted === false)) {\n                _context.next = 31;\n                break;\n              }\n\n              _context.next = 31;\n              return _item2;\n\n            case 31:\n              _context.next = 24;\n              break;\n\n            case 33:\n              _context.next = 38;\n              break;\n\n            case 35:\n              _context.prev = 35;\n              _context.t1 = _context[\"catch\"](22);\n\n              _iterator3.e(_context.t1);\n\n            case 38:\n              _context.prev = 38;\n\n              _iterator3.f();\n\n              return _context.finish(38);\n\n            case 41:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _entriesAscending, this, [[1, 15, 18, 21], [22, 35, 38, 41]]);\n    })\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      if (this.cache.has(key)) {\n        var item = this.cache.get(key);\n        return this._getItemValue(key, item);\n      }\n\n      if (this.oldCache.has(key)) {\n        var _item4 = this.oldCache.get(key);\n\n        if (this._deleteIfExpired(key, _item4) === false) {\n          this._moveToRecent(key, _item4);\n\n          return _item4.value;\n        }\n      }\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value) {\n      var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n          _ref$maxAge = _ref.maxAge,\n          maxAge = _ref$maxAge === void 0 ? this.maxAge : _ref$maxAge;\n\n      var expiry = typeof maxAge === 'number' && maxAge !== Number.POSITIVE_INFINITY ? Date.now() + maxAge : undefined;\n\n      if (this.cache.has(key)) {\n        this.cache.set(key, {\n          value: value,\n          expiry: expiry\n        });\n      } else {\n        this._set(key, {\n          value: value,\n          expiry: expiry\n        });\n      }\n    }\n  }, {\n    key: \"has\",\n    value: function has(key) {\n      if (this.cache.has(key)) {\n        return !this._deleteIfExpired(key, this.cache.get(key));\n      }\n\n      if (this.oldCache.has(key)) {\n        return !this._deleteIfExpired(key, this.oldCache.get(key));\n      }\n\n      return false;\n    }\n  }, {\n    key: \"peek\",\n    value: function peek(key) {\n      if (this.cache.has(key)) {\n        return this._peek(key, this.cache);\n      }\n\n      if (this.oldCache.has(key)) {\n        return this._peek(key, this.oldCache);\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(key) {\n      var deleted = this.cache.delete(key);\n\n      if (deleted) {\n        this._size--;\n      }\n\n      return this.oldCache.delete(key) || deleted;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.cache.clear();\n      this.oldCache.clear();\n      this._size = 0;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(newSize) {\n      if (!(newSize && newSize > 0)) {\n        throw new TypeError('`maxSize` must be a number greater than 0');\n      }\n\n      var items = _toConsumableArray(this._entriesAscending());\n\n      var removeCount = items.length - newSize;\n\n      if (removeCount < 0) {\n        this.cache = new Map(items);\n        this.oldCache = new Map();\n        this._size = items.length;\n      } else {\n        if (removeCount > 0) {\n          this._emitEvictions(items.slice(0, removeCount));\n        }\n\n        this.oldCache = new Map(items.slice(removeCount));\n        this.cache = new Map();\n        this._size = 0;\n      }\n\n      this.maxSize = newSize;\n    }\n  }, {\n    key: \"keys\",\n    value: /*#__PURE__*/_regeneratorRuntime.mark(function keys() {\n      var _iterator4, _step4, _step4$value, key;\n\n      return _regeneratorRuntime.wrap(function keys$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _iterator4 = _createForOfIteratorHelper(this);\n              _context2.prev = 1;\n\n              _iterator4.s();\n\n            case 3:\n              if ((_step4 = _iterator4.n()).done) {\n                _context2.next = 9;\n                break;\n              }\n\n              _step4$value = _slicedToArray(_step4.value, 1), key = _step4$value[0];\n              _context2.next = 7;\n              return key;\n\n            case 7:\n              _context2.next = 3;\n              break;\n\n            case 9:\n              _context2.next = 14;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](1);\n\n              _iterator4.e(_context2.t0);\n\n            case 14:\n              _context2.prev = 14;\n\n              _iterator4.f();\n\n              return _context2.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, keys, this, [[1, 11, 14, 17]]);\n    })\n  }, {\n    key: \"values\",\n    value: /*#__PURE__*/_regeneratorRuntime.mark(function values() {\n      var _iterator5, _step5, _step5$value, value;\n\n      return _regeneratorRuntime.wrap(function values$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _iterator5 = _createForOfIteratorHelper(this);\n              _context3.prev = 1;\n\n              _iterator5.s();\n\n            case 3:\n              if ((_step5 = _iterator5.n()).done) {\n                _context3.next = 9;\n                break;\n              }\n\n              _step5$value = _slicedToArray(_step5.value, 2), value = _step5$value[1];\n              _context3.next = 7;\n              return value;\n\n            case 7:\n              _context3.next = 3;\n              break;\n\n            case 9:\n              _context3.next = 14;\n              break;\n\n            case 11:\n              _context3.prev = 11;\n              _context3.t0 = _context3[\"catch\"](1);\n\n              _iterator5.e(_context3.t0);\n\n            case 14:\n              _context3.prev = 14;\n\n              _iterator5.f();\n\n              return _context3.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, values, this, [[1, 11, 14, 17]]);\n    })\n  }, {\n    key: _Symbol$iterator,\n    value: /*#__PURE__*/_regeneratorRuntime.mark(function value() {\n      var _iterator6, _step6, item, _item5, key, value, deleted, _iterator7, _step7, _item6, _item7, _key2, _value2, _deleted2;\n\n      return _regeneratorRuntime.wrap(function value$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _iterator6 = _createForOfIteratorHelper(this.cache);\n              _context4.prev = 1;\n\n              _iterator6.s();\n\n            case 3:\n              if ((_step6 = _iterator6.n()).done) {\n                _context4.next = 12;\n                break;\n              }\n\n              item = _step6.value;\n              _item5 = _slicedToArray(item, 2), key = _item5[0], value = _item5[1];\n              deleted = this._deleteIfExpired(key, value);\n\n              if (!(deleted === false)) {\n                _context4.next = 10;\n                break;\n              }\n\n              _context4.next = 10;\n              return [key, value.value];\n\n            case 10:\n              _context4.next = 3;\n              break;\n\n            case 12:\n              _context4.next = 17;\n              break;\n\n            case 14:\n              _context4.prev = 14;\n              _context4.t0 = _context4[\"catch\"](1);\n\n              _iterator6.e(_context4.t0);\n\n            case 17:\n              _context4.prev = 17;\n\n              _iterator6.f();\n\n              return _context4.finish(17);\n\n            case 20:\n              _iterator7 = _createForOfIteratorHelper(this.oldCache);\n              _context4.prev = 21;\n\n              _iterator7.s();\n\n            case 23:\n              if ((_step7 = _iterator7.n()).done) {\n                _context4.next = 33;\n                break;\n              }\n\n              _item6 = _step7.value;\n              _item7 = _slicedToArray(_item6, 2), _key2 = _item7[0], _value2 = _item7[1];\n\n              if (this.cache.has(_key2)) {\n                _context4.next = 31;\n                break;\n              }\n\n              _deleted2 = this._deleteIfExpired(_key2, _value2);\n\n              if (!(_deleted2 === false)) {\n                _context4.next = 31;\n                break;\n              }\n\n              _context4.next = 31;\n              return [_key2, _value2.value];\n\n            case 31:\n              _context4.next = 23;\n              break;\n\n            case 33:\n              _context4.next = 38;\n              break;\n\n            case 35:\n              _context4.prev = 35;\n              _context4.t1 = _context4[\"catch\"](21);\n\n              _iterator7.e(_context4.t1);\n\n            case 38:\n              _context4.prev = 38;\n\n              _iterator7.f();\n\n              return _context4.finish(38);\n\n            case 41:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, value, this, [[1, 14, 17, 20], [21, 35, 38, 41]]);\n    })\n  }, {\n    key: \"entriesDescending\",\n    value: /*#__PURE__*/_regeneratorRuntime.mark(function entriesDescending() {\n      var items, i, item, _item8, key, value, deleted, _i, _item9, _item10, _key3, _value3, _deleted3;\n\n      return _regeneratorRuntime.wrap(function entriesDescending$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              items = _toConsumableArray(this.cache);\n              i = items.length - 1;\n\n            case 2:\n              if (!(i >= 0)) {\n                _context5.next = 12;\n                break;\n              }\n\n              item = items[i];\n              _item8 = _slicedToArray(item, 2), key = _item8[0], value = _item8[1];\n              deleted = this._deleteIfExpired(key, value);\n\n              if (!(deleted === false)) {\n                _context5.next = 9;\n                break;\n              }\n\n              _context5.next = 9;\n              return [key, value.value];\n\n            case 9:\n              --i;\n              _context5.next = 2;\n              break;\n\n            case 12:\n              items = _toConsumableArray(this.oldCache);\n              _i = items.length - 1;\n\n            case 14:\n              if (!(_i >= 0)) {\n                _context5.next = 25;\n                break;\n              }\n\n              _item9 = items[_i];\n              _item10 = _slicedToArray(_item9, 2), _key3 = _item10[0], _value3 = _item10[1];\n\n              if (this.cache.has(_key3)) {\n                _context5.next = 22;\n                break;\n              }\n\n              _deleted3 = this._deleteIfExpired(_key3, _value3);\n\n              if (!(_deleted3 === false)) {\n                _context5.next = 22;\n                break;\n              }\n\n              _context5.next = 22;\n              return [_key3, _value3.value];\n\n            case 22:\n              --_i;\n              _context5.next = 14;\n              break;\n\n            case 25:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, entriesDescending, this);\n    })\n  }, {\n    key: \"entriesAscending\",\n    value: /*#__PURE__*/_regeneratorRuntime.mark(function entriesAscending() {\n      var _iterator8, _step8, _step8$value, key, value;\n\n      return _regeneratorRuntime.wrap(function entriesAscending$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _iterator8 = _createForOfIteratorHelper(this._entriesAscending());\n              _context6.prev = 1;\n\n              _iterator8.s();\n\n            case 3:\n              if ((_step8 = _iterator8.n()).done) {\n                _context6.next = 9;\n                break;\n              }\n\n              _step8$value = _slicedToArray(_step8.value, 2), key = _step8$value[0], value = _step8$value[1];\n              _context6.next = 7;\n              return [key, value.value];\n\n            case 7:\n              _context6.next = 3;\n              break;\n\n            case 9:\n              _context6.next = 14;\n              break;\n\n            case 11:\n              _context6.prev = 11;\n              _context6.t0 = _context6[\"catch\"](1);\n\n              _iterator8.e(_context6.t0);\n\n            case 14:\n              _context6.prev = 14;\n\n              _iterator8.f();\n\n              return _context6.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, entriesAscending, this, [[1, 11, 14, 17]]);\n    })\n  }, {\n    key: \"size\",\n    get: function get() {\n      if (!this._size) {\n        return this.oldCache.size;\n      }\n\n      var oldCacheSize = 0;\n\n      var _iterator9 = _createForOfIteratorHelper(this.oldCache.keys()),\n          _step9;\n\n      try {\n        for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n          var key = _step9.value;\n\n          if (!this.cache.has(key)) {\n            oldCacheSize++;\n          }\n        }\n      } catch (err) {\n        _iterator9.e(err);\n      } finally {\n        _iterator9.f();\n      }\n\n      return Math.min(this._size + oldCacheSize, this.maxSize);\n    }\n  }, {\n    key: \"entries\",\n    value: function entries() {\n      return this.entriesAscending();\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(callbackFunction) {\n      var thisArgument = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this;\n\n      var _iterator10 = _createForOfIteratorHelper(this.entriesAscending()),\n          _step10;\n\n      try {\n        for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n          var _step10$value = _slicedToArray(_step10.value, 2),\n              key = _step10$value[0],\n              value = _step10$value[1];\n\n          callbackFunction.call(thisArgument, value, key, this);\n        }\n      } catch (err) {\n        _iterator10.e(err);\n      } finally {\n        _iterator10.f();\n      }\n    }\n  }, {\n    key: _Symbol$toStringTag,\n    get: function get() {\n      return JSON.stringify(_toConsumableArray(this.entriesAscending()));\n    }\n  }]);\n\n  return QuickLRU;\n}( /*#__PURE__*/_wrapNativeSuper(Map), Symbol.iterator, Symbol.toStringTag);\n\nexport { QuickLRU as default };","import _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _assertThisInitialized from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _wrapNativeSuper from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nexport function assign(target, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      target[key] = source[key];\n    }\n  }\n}\nexport function chunk(iterable, length) {\n  var results = [];\n  var lengthOfIterable = iterable.length;\n\n  for (var i = 0; i < lengthOfIterable; i += length) {\n    var chunked = [];\n\n    for (var ci = i; ci < i + length; ci++) {\n      chunked.push(iterable[ci]);\n    }\n\n    results.push(chunked);\n  }\n\n  return results;\n}\nexport function endsWith(string, expectedEnding) {\n  if (string.length < expectedEnding.length) {\n    return false;\n  }\n\n  var actualEnding = string.substr(string.length - expectedEnding.length);\n  return actualEnding === expectedEnding;\n}\nexport function forEach(iterable, func) {\n  var length = iterable.length;\n\n  for (var i = 0; i < length; i++) {\n    func(iterable[i], i);\n  }\n}\nexport function invert(oldObj) {\n  var newObj = {};\n\n  for (var key in oldObj) {\n    if (oldObj.hasOwnProperty(key)) {\n      var value = oldObj[key];\n      newObj[value] = key;\n    }\n  }\n\n  return newObj;\n}\nexport function range(n) {\n  var results = [];\n\n  for (var i = 0; i < n; i++) {\n    results.push(i);\n  }\n\n  return results;\n}\nexport function times(numTimes, func) {\n  var results = [];\n\n  for (var i = 0; i < numTimes; i++) {\n    results.push(func(i));\n  }\n\n  return results;\n}\nexport function toArray(iterable) {\n  var results = [];\n  var length = iterable.length;\n\n  for (var i = 0; i < length; i++) {\n    results.push(iterable[i]);\n  }\n\n  return results;\n}\nexport function toArrayRecursively(input) {\n  if (input.length) {\n    return toArray(input).map(toArrayRecursively);\n  }\n\n  return input;\n} // copied from https://github.com/academia-de-codigo/parse-content-range-header/blob/master/index.js\n\nexport function parseContentRange(headerValue) {\n  if (!headerValue) {\n    return null;\n  }\n\n  if (typeof headerValue !== 'string') {\n    throw new Error('invalid argument');\n  }\n\n  var parseInt = function parseInt(number) {\n    return Number.parseInt(number, 10);\n  }; // Check for presence of unit\n\n\n  var matches = headerValue.match(/^(\\w*) /);\n  var unit = matches && matches[1]; // check for start-end/size header format\n\n  matches = headerValue.match(/(\\d+)-(\\d+)\\/(\\d+|\\*)/);\n\n  if (matches) {\n    return {\n      unit: unit,\n      first: parseInt(matches[1]),\n      last: parseInt(matches[2]),\n      length: matches[3] === '*' ? null : parseInt(matches[3])\n    };\n  } // check for size header format\n\n\n  matches = headerValue.match(/(\\d+|\\*)/);\n\n  if (matches) {\n    return {\n      unit: unit,\n      first: null,\n      last: null,\n      length: matches[1] === '*' ? null : parseInt(matches[1])\n    };\n  }\n\n  return null;\n}\n/*\n * Promisified wrapper around 'setTimeout' to allow 'await'\n */\n\nexport function wait(_x) {\n  return _wait.apply(this, arguments);\n}\n\nfunction _wait() {\n  _wait = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(milliseconds) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", new Promise(function (resolve) {\n              return setTimeout(resolve, milliseconds);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _wait.apply(this, arguments);\n}\n\nexport function zip(a, b) {\n  var A = Array.isArray(a) ? a : Array.from(a);\n  var B = Array.isArray(b) ? b : Array.from(b);\n  return A.map(function (k, i) {\n    return [k, B[i]];\n  });\n} // Based on https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error\n\nexport var AbortError = /*#__PURE__*/function (_Error) {\n  _inherits(AbortError, _Error);\n\n  var _super = _createSuper(AbortError);\n\n  function AbortError(params) {\n    var _this;\n\n    _classCallCheck(this, AbortError);\n\n    // Pass remaining arguments (including vendor specific ones) to parent constructor\n    _this = _super.call(this, params); // Maintains proper stack trace for where our error was thrown (only available on V8)\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(_assertThisInitialized(_this), AbortError);\n    }\n\n    _this.name = 'AbortError';\n    return _this;\n  }\n\n  return _createClass(AbortError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nexport var CustomAggregateError = /*#__PURE__*/function (_Error2) {\n  _inherits(CustomAggregateError, _Error2);\n\n  var _super2 = _createSuper(CustomAggregateError);\n\n  function CustomAggregateError(errors, message) {\n    var _this2;\n\n    _classCallCheck(this, CustomAggregateError);\n\n    _this2 = _super2.call(this, message);\n    _this2.errors = errors;\n    _this2.message = message;\n    _this2.name = 'AggregateError';\n    return _this2;\n  }\n\n  return _createClass(CustomAggregateError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nexport var AggregateError = CustomAggregateError;","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\nimport \"core-js/modules/esnext.promise.all-settled.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport QuickLRU from 'quick-lru';\nimport { BaseSource } from './basesource.js';\nimport { AbortError, AggregateError, wait, zip } from '../utils.js';\n\nvar Block = /*#__PURE__*/function () {\n  /**\n   *\n   * @param {number} offset\n   * @param {number} length\n   * @param {ArrayBuffer} [data]\n   */\n  function Block(offset, length) {\n    var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    _classCallCheck(this, Block);\n\n    this.offset = offset;\n    this.length = length;\n    this.data = data;\n  }\n  /**\n   * @returns {number} the top byte border\n   */\n\n\n  _createClass(Block, [{\n    key: \"top\",\n    get: function get() {\n      return this.offset + this.length;\n    }\n  }]);\n\n  return Block;\n}();\n\nvar BlockGroup = /*#__PURE__*/_createClass(\n/**\n *\n * @param {number} offset\n * @param {number} length\n * @param {number[]} blockIds\n */\nfunction BlockGroup(offset, length, blockIds) {\n  _classCallCheck(this, BlockGroup);\n\n  this.offset = offset;\n  this.length = length;\n  this.blockIds = blockIds;\n});\n\nexport var BlockedSource = /*#__PURE__*/function (_BaseSource) {\n  _inherits(BlockedSource, _BaseSource);\n\n  var _super = _createSuper(BlockedSource);\n\n  /**\n   *\n   * @param {Source} source The underlying source that shall be blocked and cached\n   * @param {object} options\n   */\n  function BlockedSource(source) {\n    var _this;\n\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$blockSize = _ref.blockSize,\n        blockSize = _ref$blockSize === void 0 ? 65536 : _ref$blockSize,\n        _ref$cacheSize = _ref.cacheSize,\n        cacheSize = _ref$cacheSize === void 0 ? 100 : _ref$cacheSize;\n\n    _classCallCheck(this, BlockedSource);\n\n    _this = _super.call(this);\n    _this.source = source;\n    _this.blockSize = blockSize;\n    _this.blockCache = new QuickLRU({\n      maxSize: cacheSize\n    }); // mapping blockId -> Block instance\n\n    _this.blockRequests = new Map(); // set of blockIds missing for the current requests\n\n    _this.blockIdsToFetch = new Set();\n    _this.abortedBlockIds = new Set();\n    return _this;\n  }\n\n  _createClass(BlockedSource, [{\n    key: \"fileSize\",\n    get: function get() {\n      return this.source.fileSize;\n    }\n    /**\n     *\n     * @param {basesource/Slice[]} slices\n     */\n\n  }, {\n    key: \"fetch\",\n    value: function () {\n      var _fetch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(slices, signal) {\n        var _this2 = this;\n\n        var blockRequests, missingBlockIds, allBlockIds, _iterator, _step, _step$value, offset, length, top, fileSize, firstBlockOffset, current, _blockId2, missingRequests, _i, _missingBlockIds, blockId, abortedBlockRequests, abortedBlockIds, _iterator2, _step2, _blockId, block, blocks, failedBlocks, requiredBlocks;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                blockRequests = [];\n                missingBlockIds = [];\n                allBlockIds = [];\n                _iterator = _createForOfIteratorHelper(slices);\n\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    _step$value = _step.value, offset = _step$value.offset, length = _step$value.length;\n                    top = offset + length;\n                    fileSize = this.fileSize;\n\n                    if (fileSize !== null) {\n                      top = Math.min(top, fileSize);\n                    }\n\n                    firstBlockOffset = Math.floor(offset / this.blockSize) * this.blockSize;\n\n                    for (current = firstBlockOffset; current < top; current += this.blockSize) {\n                      _blockId2 = Math.floor(current / this.blockSize);\n\n                      if (!this.blockCache.has(_blockId2) && !this.blockRequests.has(_blockId2)) {\n                        this.blockIdsToFetch.add(_blockId2);\n                        missingBlockIds.push(_blockId2);\n                      }\n\n                      if (this.blockRequests.has(_blockId2)) {\n                        blockRequests.push(this.blockRequests.get(_blockId2));\n                      }\n\n                      allBlockIds.push(_blockId2);\n                    }\n                  } // allow additional block requests to accumulate\n\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n\n                _context.next = 7;\n                return wait();\n\n              case 7:\n                this.fetchBlocks(signal); // Gather all of the new requests that this fetch call is contributing to `fetch`.\n\n                missingRequests = [];\n\n                for (_i = 0, _missingBlockIds = missingBlockIds; _i < _missingBlockIds.length; _i++) {\n                  blockId = _missingBlockIds[_i];\n\n                  // The requested missing block could already be in the cache\n                  // instead of having its request still be outstanding.\n                  if (this.blockRequests.has(blockId)) {\n                    missingRequests.push(this.blockRequests.get(blockId));\n                  }\n                } // Actually await all pending requests that are needed for this `fetch`.\n\n\n                _context.next = 12;\n                return Promise.allSettled(blockRequests);\n\n              case 12:\n                _context.next = 14;\n                return Promise.allSettled(missingRequests);\n\n              case 14:\n                // Perform retries if a block was interrupted by a previous signal\n                abortedBlockRequests = [];\n                abortedBlockIds = allBlockIds.filter(function (id) {\n                  return _this2.abortedBlockIds.has(id) || !_this2.blockCache.has(id);\n                });\n                abortedBlockIds.forEach(function (id) {\n                  return _this2.blockIdsToFetch.add(id);\n                }); // start the retry of some blocks if required\n\n                if (!(abortedBlockIds.length > 0 && signal && !signal.aborted)) {\n                  _context.next = 40;\n                  break;\n                }\n\n                this.fetchBlocks(null);\n                _iterator2 = _createForOfIteratorHelper(abortedBlockIds);\n                _context.prev = 20;\n\n                _iterator2.s();\n\n              case 22:\n                if ((_step2 = _iterator2.n()).done) {\n                  _context.next = 30;\n                  break;\n                }\n\n                _blockId = _step2.value;\n                block = this.blockRequests.get(_blockId);\n\n                if (block) {\n                  _context.next = 27;\n                  break;\n                }\n\n                throw new Error(\"Block \".concat(_blockId, \" is not in the block requests\"));\n\n              case 27:\n                abortedBlockRequests.push(block);\n\n              case 28:\n                _context.next = 22;\n                break;\n\n              case 30:\n                _context.next = 35;\n                break;\n\n              case 32:\n                _context.prev = 32;\n                _context.t0 = _context[\"catch\"](20);\n\n                _iterator2.e(_context.t0);\n\n              case 35:\n                _context.prev = 35;\n\n                _iterator2.f();\n\n                return _context.finish(35);\n\n              case 38:\n                _context.next = 40;\n                return Promise.allSettled(abortedBlockRequests);\n\n              case 40:\n                if (!(signal && signal.aborted)) {\n                  _context.next = 42;\n                  break;\n                }\n\n                throw new AbortError('Request was aborted');\n\n              case 42:\n                blocks = allBlockIds.map(function (id) {\n                  return _this2.blockCache.get(id);\n                });\n                failedBlocks = blocks.filter(function (i) {\n                  return !i;\n                });\n\n                if (!failedBlocks.length) {\n                  _context.next = 46;\n                  break;\n                }\n\n                throw new AggregateError(failedBlocks, 'Request failed');\n\n              case 46:\n                // create a final Map, with all required blocks for this request to satisfy\n                requiredBlocks = new Map(zip(allBlockIds, blocks)); // TODO: satisfy each slice\n\n                return _context.abrupt(\"return\", this.readSliceData(slices, requiredBlocks));\n\n              case 48:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[20, 32, 35, 38]]);\n      }));\n\n      function fetch(_x, _x2) {\n        return _fetch.apply(this, arguments);\n      }\n\n      return fetch;\n    }()\n    /**\n     *\n     * @param {AbortSignal} signal\n     */\n\n  }, {\n    key: \"fetchBlocks\",\n    value: function fetchBlocks(signal) {\n      var _this3 = this;\n\n      // check if we still need to\n      if (this.blockIdsToFetch.size > 0) {\n        (function () {\n          var groups = _this3.groupBlocks(_this3.blockIdsToFetch); // start requesting slices of data\n\n\n          var groupRequests = _this3.source.fetch(groups, signal);\n\n          var _loop = function _loop(groupIndex) {\n            var group = groups[groupIndex];\n\n            var _iterator3 = _createForOfIteratorHelper(group.blockIds),\n                _step3;\n\n            try {\n              var _loop2 = function _loop2() {\n                var blockId = _step3.value;\n\n                // make an async IIFE for each block\n                _this3.blockRequests.set(blockId, _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                  var response, blockOffset, o, t, data, block;\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.prev = 0;\n                          _context2.next = 3;\n                          return groupRequests;\n\n                        case 3:\n                          _context2.t0 = groupIndex;\n                          response = _context2.sent[_context2.t0];\n                          blockOffset = blockId * _this3.blockSize;\n                          o = blockOffset - response.offset;\n                          t = Math.min(o + _this3.blockSize, response.data.byteLength);\n                          data = response.data.slice(o, t);\n                          block = new Block(blockOffset, data.byteLength, data, blockId);\n\n                          _this3.blockCache.set(blockId, block);\n\n                          _this3.abortedBlockIds.delete(blockId);\n\n                          _context2.next = 23;\n                          break;\n\n                        case 14:\n                          _context2.prev = 14;\n                          _context2.t1 = _context2[\"catch\"](0);\n\n                          if (!(_context2.t1.name === 'AbortError')) {\n                            _context2.next = 22;\n                            break;\n                          }\n\n                          // store the signal here, we need it to determine later if an\n                          // error was caused by this signal\n                          _context2.t1.signal = signal;\n\n                          _this3.blockCache.delete(blockId);\n\n                          _this3.abortedBlockIds.add(blockId);\n\n                          _context2.next = 23;\n                          break;\n\n                        case 22:\n                          throw _context2.t1;\n\n                        case 23:\n                          _context2.prev = 23;\n\n                          _this3.blockRequests.delete(blockId);\n\n                          return _context2.finish(23);\n\n                        case 26:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2, null, [[0, 14, 23, 26]]);\n                }))());\n              };\n\n              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                _loop2();\n              }\n            } catch (err) {\n              _iterator3.e(err);\n            } finally {\n              _iterator3.f();\n            }\n          };\n\n          for (var groupIndex = 0; groupIndex < groups.length; ++groupIndex) {\n            _loop(groupIndex);\n          }\n\n          _this3.blockIdsToFetch.clear();\n        })();\n      }\n    }\n    /**\n     *\n     * @param {Set} blockIds\n     * @returns {BlockGroup[]}\n     */\n\n  }, {\n    key: \"groupBlocks\",\n    value: function groupBlocks(blockIds) {\n      var sortedBlockIds = Array.from(blockIds).sort(function (a, b) {\n        return a - b;\n      });\n\n      if (sortedBlockIds.length === 0) {\n        return [];\n      }\n\n      var current = [];\n      var lastBlockId = null;\n      var groups = [];\n\n      var _iterator4 = _createForOfIteratorHelper(sortedBlockIds),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var blockId = _step4.value;\n\n          if (lastBlockId === null || lastBlockId + 1 === blockId) {\n            current.push(blockId);\n            lastBlockId = blockId;\n          } else {\n            groups.push(new BlockGroup(current[0] * this.blockSize, current.length * this.blockSize, current));\n            current = [blockId];\n            lastBlockId = blockId;\n          }\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n\n      groups.push(new BlockGroup(current[0] * this.blockSize, current.length * this.blockSize, current));\n      return groups;\n    }\n    /**\n     *\n     * @param {Slice[]} slices\n     * @param {Map} blocks\n     */\n\n  }, {\n    key: \"readSliceData\",\n    value: function readSliceData(slices, blocks) {\n      var _this4 = this;\n\n      return slices.map(function (slice) {\n        var top = slice.offset + slice.length;\n\n        if (_this4.fileSize !== null) {\n          top = Math.min(_this4.fileSize, top);\n        }\n\n        var blockIdLow = Math.floor(slice.offset / _this4.blockSize);\n        var blockIdHigh = Math.floor(top / _this4.blockSize);\n        var sliceData = new ArrayBuffer(slice.length);\n        var sliceView = new Uint8Array(sliceData);\n\n        for (var blockId = blockIdLow; blockId <= blockIdHigh; ++blockId) {\n          var block = blocks.get(blockId);\n          var delta = block.offset - slice.offset;\n          var topDelta = block.top - top;\n          var blockInnerOffset = 0;\n          var rangeInnerOffset = 0;\n          var usedBlockLength = void 0;\n\n          if (delta < 0) {\n            blockInnerOffset = -delta;\n          } else if (delta > 0) {\n            rangeInnerOffset = delta;\n          }\n\n          if (topDelta < 0) {\n            usedBlockLength = block.length - blockInnerOffset;\n          } else {\n            usedBlockLength = top - block.offset - blockInnerOffset;\n          }\n\n          var blockView = new Uint8Array(block.data, blockInnerOffset, usedBlockLength);\n          sliceView.set(blockView, rangeInnerOffset);\n        }\n\n        return sliceData;\n      });\n    }\n  }]);\n\n  return BlockedSource;\n}(BaseSource);","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\nexport var BaseResponse = /*#__PURE__*/function () {\n  function BaseResponse() {\n    _classCallCheck(this, BaseResponse);\n  }\n\n  _createClass(BaseResponse, [{\n    key: \"ok\",\n    get:\n    /**\n     * Returns whether the response has an ok'ish status code\n     */\n    function get() {\n      return this.status >= 200 && this.status <= 299;\n    }\n    /**\n     * Returns the status code of the response\n     */\n\n  }, {\n    key: \"status\",\n    get: function get() {\n      throw new Error('not implemented');\n    }\n    /**\n     * Returns the value of the specified header\n     * @param {string} headerName the header name\n     * @returns {string} the header value\n     */\n\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(headerName) {\n      // eslint-disable-line no-unused-vars\n      throw new Error('not implemented');\n    }\n    /**\n     * @returns {ArrayBuffer} the response data of the request\n     */\n\n  }, {\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                throw new Error('not implemented');\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }()\n  }]);\n\n  return BaseResponse;\n}();\nexport var BaseClient = /*#__PURE__*/function () {\n  function BaseClient(url) {\n    _classCallCheck(this, BaseClient);\n\n    this.url = url;\n  }\n  /**\n   * Send a request with the options\n   * @param {object} [options]\n   */\n\n\n  _createClass(BaseClient, [{\n    key: \"request\",\n    value: function () {\n      var _request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _ref,\n            headers,\n            credentials,\n            signal,\n            _args2 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _ref = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {}, headers = _ref.headers, credentials = _ref.credentials, signal = _ref.signal;\n                throw new Error('request is not implemented');\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function request() {\n        return _request.apply(this, arguments);\n      }\n\n      return request;\n    }()\n  }]);\n\n  return BaseClient;\n}();","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { BaseClient, BaseResponse } from './base.js';\n\nvar FetchResponse = /*#__PURE__*/function (_BaseResponse) {\n  _inherits(FetchResponse, _BaseResponse);\n\n  var _super = _createSuper(FetchResponse);\n\n  /**\n   * BaseResponse facade for fetch API Response\n   * @param {Response} response\n   */\n  function FetchResponse(response) {\n    var _this;\n\n    _classCallCheck(this, FetchResponse);\n\n    _this = _super.call(this);\n    _this.response = response;\n    return _this;\n  }\n\n  _createClass(FetchResponse, [{\n    key: \"status\",\n    get: function get() {\n      return this.response.status;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(name) {\n      return this.response.headers.get(name);\n    }\n  }, {\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.response.arrayBuffer) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 3;\n                return this.response.arrayBuffer();\n\n              case 3:\n                _context.t0 = _context.sent;\n                _context.next = 9;\n                break;\n\n              case 6:\n                _context.next = 8;\n                return this.response.buffer();\n\n              case 8:\n                _context.t0 = _context.sent.buffer;\n\n              case 9:\n                data = _context.t0;\n                return _context.abrupt(\"return\", data);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }()\n  }]);\n\n  return FetchResponse;\n}(BaseResponse);\n\nexport var FetchClient = /*#__PURE__*/function (_BaseClient) {\n  _inherits(FetchClient, _BaseClient);\n\n  var _super2 = _createSuper(FetchClient);\n\n  function FetchClient(url, credentials) {\n    var _this2;\n\n    _classCallCheck(this, FetchClient);\n\n    _this2 = _super2.call(this, url);\n    _this2.credentials = credentials;\n    return _this2;\n  }\n\n  _createClass(FetchClient, [{\n    key: \"request\",\n    value: function () {\n      var _request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _ref,\n            headers,\n            credentials,\n            signal,\n            response,\n            _args2 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _ref = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {}, headers = _ref.headers, credentials = _ref.credentials, signal = _ref.signal;\n                _context2.next = 3;\n                return fetch(this.url, {\n                  headers: headers,\n                  credentials: credentials,\n                  signal: signal\n                });\n\n              case 3:\n                response = _context2.sent;\n                return _context2.abrupt(\"return\", new FetchResponse(response));\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function request() {\n        return _request.apply(this, arguments);\n      }\n\n      return request;\n    }()\n  }]);\n\n  return FetchClient;\n}(BaseClient);","import _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { BaseClient, BaseResponse } from './base.js';\nimport { AbortError } from '../../utils.js';\n\nvar XHRResponse = /*#__PURE__*/function (_BaseResponse) {\n  _inherits(XHRResponse, _BaseResponse);\n\n  var _super = _createSuper(XHRResponse);\n\n  /**\n   * BaseResponse facade for XMLHttpRequest\n   * @param {XMLHttpRequest} xhr\n   * @param {ArrayBuffer} data\n   */\n  function XHRResponse(xhr, data) {\n    var _this;\n\n    _classCallCheck(this, XHRResponse);\n\n    _this = _super.call(this);\n    _this.xhr = xhr;\n    _this.data = data;\n    return _this;\n  }\n\n  _createClass(XHRResponse, [{\n    key: \"status\",\n    get: function get() {\n      return this.xhr.status;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(name) {\n      return this.xhr.getResponseHeader(name);\n    }\n  }, {\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", this.data);\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }()\n  }]);\n\n  return XHRResponse;\n}(BaseResponse);\n\nexport var XHRClient = /*#__PURE__*/function (_BaseClient) {\n  _inherits(XHRClient, _BaseClient);\n\n  var _super2 = _createSuper(XHRClient);\n\n  function XHRClient() {\n    _classCallCheck(this, XHRClient);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(XHRClient, [{\n    key: \"constructRequest\",\n    value: function constructRequest(headers, signal) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', _this2.url);\n        xhr.responseType = 'arraybuffer';\n\n        for (var _i = 0, _Object$entries = Object.entries(headers); _i < _Object$entries.length; _i++) {\n          var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n              key = _Object$entries$_i[0],\n              value = _Object$entries$_i[1];\n\n          xhr.setRequestHeader(key, value);\n        } // hook signals\n\n\n        xhr.onload = function () {\n          var data = xhr.response;\n          resolve(new XHRResponse(xhr, data));\n        };\n\n        xhr.onerror = reject;\n\n        xhr.onabort = function () {\n          return reject(new AbortError('Request aborted'));\n        };\n\n        xhr.send();\n\n        if (signal) {\n          if (signal.aborted) {\n            xhr.abort();\n          }\n\n          signal.addEventListener('abort', function () {\n            return xhr.abort();\n          });\n        }\n      });\n    }\n  }, {\n    key: \"request\",\n    value: function () {\n      var _request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _ref,\n            headers,\n            signal,\n            response,\n            _args2 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _ref = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {}, headers = _ref.headers, signal = _ref.signal;\n                _context2.next = 3;\n                return this.constructRequest(headers, signal);\n\n              case 3:\n                response = _context2.sent;\n                return _context2.abrupt(\"return\", response);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function request() {\n        return _request.apply(this, arguments);\n      }\n\n      return request;\n    }()\n  }]);\n\n  return XHRClient;\n}(BaseClient);","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport http from 'http';\nimport https from 'https';\nimport urlMod from 'url';\nimport { BaseClient, BaseResponse } from './base.js';\nimport { AbortError } from '../../utils.js';\n\nvar HttpResponse = /*#__PURE__*/function (_BaseResponse) {\n  _inherits(HttpResponse, _BaseResponse);\n\n  var _super = _createSuper(HttpResponse);\n\n  /**\n   * BaseResponse facade for node HTTP/HTTPS API Response\n   * @param {http.ServerResponse} response\n   */\n  function HttpResponse(response, dataPromise) {\n    var _this;\n\n    _classCallCheck(this, HttpResponse);\n\n    _this = _super.call(this);\n    _this.response = response;\n    _this.dataPromise = dataPromise;\n    return _this;\n  }\n\n  _createClass(HttpResponse, [{\n    key: \"status\",\n    get: function get() {\n      return this.response.statusCode;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(name) {\n      return this.response.headers[name];\n    }\n  }, {\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.dataPromise;\n\n              case 2:\n                data = _context.sent;\n                return _context.abrupt(\"return\", data);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }()\n  }]);\n\n  return HttpResponse;\n}(BaseResponse);\n\nexport var HttpClient = /*#__PURE__*/function (_BaseClient) {\n  _inherits(HttpClient, _BaseClient);\n\n  var _super2 = _createSuper(HttpClient);\n\n  function HttpClient(url) {\n    var _this2;\n\n    _classCallCheck(this, HttpClient);\n\n    _this2 = _super2.call(this, url);\n    _this2.parsedUrl = urlMod.parse(_this2.url);\n    _this2.httpApi = _this2.parsedUrl.protocol === 'http:' ? http : https;\n    return _this2;\n  }\n\n  _createClass(HttpClient, [{\n    key: \"constructRequest\",\n    value: function constructRequest(headers, signal) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        var request = _this3.httpApi.get(_objectSpread(_objectSpread({}, _this3.parsedUrl), {}, {\n          headers: headers\n        }), function (response) {\n          var dataPromise = new Promise(function (resolveData) {\n            var chunks = []; // collect chunks\n\n            response.on('data', function (chunk) {\n              chunks.push(chunk);\n            }); // concatenate all chunks and resolve the promise with the resulting buffer\n\n            response.on('end', function () {\n              var data = Buffer.concat(chunks).buffer;\n              resolveData(data);\n            });\n            response.on('error', reject);\n          });\n          resolve(new HttpResponse(response, dataPromise));\n        });\n\n        request.on('error', reject);\n\n        if (signal) {\n          if (signal.aborted) {\n            request.destroy(new AbortError('Request aborted'));\n          }\n\n          signal.addEventListener('abort', function () {\n            return request.destroy(new AbortError('Request aborted'));\n          });\n        }\n      });\n    }\n  }, {\n    key: \"request\",\n    value: function () {\n      var _request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _ref,\n            headers,\n            signal,\n            response,\n            _args2 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _ref = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {}, headers = _ref.headers, signal = _ref.signal;\n                _context2.next = 3;\n                return this.constructRequest(headers, signal);\n\n              case 3:\n                response = _context2.sent;\n                return _context2.abrupt(\"return\", response);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function request() {\n        return _request.apply(this, arguments);\n      }\n\n      return request;\n    }()\n  }]);\n\n  return HttpClient;\n}(BaseClient);","import _objectWithoutProperties from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nvar _excluded = [\"headers\", \"credentials\", \"maxRanges\", \"allowFullFile\"],\n    _excluded2 = [\"headers\", \"maxRanges\", \"allowFullFile\"],\n    _excluded3 = [\"headers\", \"maxRanges\", \"allowFullFile\"],\n    _excluded4 = [\"forceXHR\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { parseByteRanges, parseContentRange, parseContentType } from './httputils.js';\nimport { BaseSource } from './basesource.js';\nimport { BlockedSource } from './blockedsource.js';\nimport { FetchClient } from './client/fetch.js';\nimport { XHRClient } from './client/xhr.js';\nimport { HttpClient } from './client/http.js';\n\nvar RemoteSource = /*#__PURE__*/function (_BaseSource) {\n  _inherits(RemoteSource, _BaseSource);\n\n  var _super = _createSuper(RemoteSource);\n\n  /**\n   *\n   * @param {BaseClient} client\n   * @param {object} headers\n   * @param {numbers} maxRanges\n   * @param {boolean} allowFullFile\n   */\n  function RemoteSource(client, headers, maxRanges, allowFullFile) {\n    var _this;\n\n    _classCallCheck(this, RemoteSource);\n\n    _this = _super.call(this);\n    _this.client = client;\n    _this.headers = headers;\n    _this.maxRanges = maxRanges;\n    _this.allowFullFile = allowFullFile;\n    _this._fileSize = null;\n    return _this;\n  }\n  /**\n   *\n   * @param {Slice[]} slices\n   */\n\n\n  _createClass(RemoteSource, [{\n    key: \"fetch\",\n    value: function () {\n      var _fetch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(slices, signal) {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this.maxRanges >= slices.length)) {\n                  _context.next = 4;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", this.fetchSlices(slices, signal));\n\n              case 4:\n                if (this.maxRanges > 0 && slices.length > 1) {// TODO: split into multiple multi-range requests\n                  // const subSlicesRequests = [];\n                  // for (let i = 0; i < slices.length; i += this.maxRanges) {\n                  //   subSlicesRequests.push(\n                  //     this.fetchSlices(slices.slice(i, i + this.maxRanges), signal),\n                  //   );\n                  // }\n                  // return (await Promise.all(subSlicesRequests)).flat();\n                }\n\n              case 5:\n                return _context.abrupt(\"return\", Promise.all(slices.map(function (slice) {\n                  return _this2.fetchSlice(slice, signal);\n                })));\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function fetch(_x, _x2) {\n        return _fetch.apply(this, arguments);\n      }\n\n      return fetch;\n    }()\n  }, {\n    key: \"fetchSlices\",\n    value: function () {\n      var _fetchSlices = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(slices, signal) {\n        var _this3 = this;\n\n        var response, _parseContentType, type, params, byteRanges, data, _parseContentRange, start, end, total, first, others, _data;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.client.request({\n                  headers: _objectSpread(_objectSpread({}, this.headers), {}, {\n                    Range: \"bytes=\".concat(slices.map(function (_ref) {\n                      var offset = _ref.offset,\n                          length = _ref.length;\n                      return \"\".concat(offset, \"-\").concat(offset + length);\n                    }).join(','))\n                  }),\n                  signal: signal\n                });\n\n              case 2:\n                response = _context2.sent;\n\n                if (response.ok) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw new Error('Error fetching data.');\n\n              case 7:\n                if (!(response.status === 206)) {\n                  _context2.next = 32;\n                  break;\n                }\n\n                _parseContentType = parseContentType(response.getHeader('content-type')), type = _parseContentType.type, params = _parseContentType.params;\n\n                if (!(type === 'multipart/byteranges')) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                _context2.t0 = parseByteRanges;\n                _context2.next = 13;\n                return response.getData();\n\n              case 13:\n                _context2.t1 = _context2.sent;\n                _context2.t2 = params.boundary;\n                byteRanges = (0, _context2.t0)(_context2.t1, _context2.t2);\n                this._fileSize = byteRanges[0].fileSize || null;\n                return _context2.abrupt(\"return\", byteRanges);\n\n              case 18:\n                _context2.next = 20;\n                return response.getData();\n\n              case 20:\n                data = _context2.sent;\n                _parseContentRange = parseContentRange(response.getHeader('content-range')), start = _parseContentRange.start, end = _parseContentRange.end, total = _parseContentRange.total;\n                this._fileSize = total || null;\n                first = [{\n                  data: data,\n                  offset: start,\n                  length: end - start\n                }];\n\n                if (!(slices.length > 1)) {\n                  _context2.next = 29;\n                  break;\n                }\n\n                _context2.next = 27;\n                return Promise.all(slices.slice(1).map(function (slice) {\n                  return _this3.fetchSlice(slice, signal);\n                }));\n\n              case 27:\n                others = _context2.sent;\n                return _context2.abrupt(\"return\", first.concat(others));\n\n              case 29:\n                return _context2.abrupt(\"return\", first);\n\n              case 32:\n                if (this.allowFullFile) {\n                  _context2.next = 34;\n                  break;\n                }\n\n                throw new Error('Server responded with full file');\n\n              case 34:\n                _context2.next = 36;\n                return response.getData();\n\n              case 36:\n                _data = _context2.sent;\n                this._fileSize = _data.byteLength;\n                return _context2.abrupt(\"return\", [{\n                  data: _data,\n                  offset: 0,\n                  length: _data.byteLength\n                }]);\n\n              case 39:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function fetchSlices(_x3, _x4) {\n        return _fetchSlices.apply(this, arguments);\n      }\n\n      return fetchSlices;\n    }()\n  }, {\n    key: \"fetchSlice\",\n    value: function () {\n      var _fetchSlice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(slice, signal) {\n        var offset, length, response, data, _parseContentRange2, total, _data2;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                offset = slice.offset, length = slice.length;\n                _context3.next = 3;\n                return this.client.request({\n                  headers: _objectSpread(_objectSpread({}, this.headers), {}, {\n                    Range: \"bytes=\".concat(offset, \"-\").concat(offset + length)\n                  }),\n                  signal: signal\n                });\n\n              case 3:\n                response = _context3.sent;\n\n                if (response.ok) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                throw new Error('Error fetching data.');\n\n              case 8:\n                if (!(response.status === 206)) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                _context3.next = 11;\n                return response.getData();\n\n              case 11:\n                data = _context3.sent;\n                _parseContentRange2 = parseContentRange(response.getHeader('content-range')), total = _parseContentRange2.total;\n                this._fileSize = total || null;\n                return _context3.abrupt(\"return\", {\n                  data: data,\n                  offset: offset,\n                  length: length\n                });\n\n              case 17:\n                if (this.allowFullFile) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                throw new Error('Server responded with full file');\n\n              case 19:\n                _context3.next = 21;\n                return response.getData();\n\n              case 21:\n                _data2 = _context3.sent;\n                this._fileSize = _data2.byteLength;\n                return _context3.abrupt(\"return\", {\n                  data: _data2,\n                  offset: 0,\n                  length: _data2.byteLength\n                });\n\n              case 24:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function fetchSlice(_x5, _x6) {\n        return _fetchSlice.apply(this, arguments);\n      }\n\n      return fetchSlice;\n    }()\n  }, {\n    key: \"fileSize\",\n    get: function get() {\n      return this._fileSize;\n    }\n  }]);\n\n  return RemoteSource;\n}(BaseSource);\n\nfunction maybeWrapInBlockedSource(source, _ref2) {\n  var blockSize = _ref2.blockSize,\n      cacheSize = _ref2.cacheSize;\n\n  if (blockSize === null) {\n    return source;\n  }\n\n  return new BlockedSource(source, {\n    blockSize: blockSize,\n    cacheSize: cacheSize\n  });\n}\n\nexport function makeFetchSource(url) {\n  var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref3$headers = _ref3.headers,\n      headers = _ref3$headers === void 0 ? {} : _ref3$headers,\n      credentials = _ref3.credentials,\n      _ref3$maxRanges = _ref3.maxRanges,\n      maxRanges = _ref3$maxRanges === void 0 ? 0 : _ref3$maxRanges,\n      _ref3$allowFullFile = _ref3.allowFullFile,\n      allowFullFile = _ref3$allowFullFile === void 0 ? false : _ref3$allowFullFile,\n      blockOptions = _objectWithoutProperties(_ref3, _excluded);\n\n  var client = new FetchClient(url, credentials);\n  var source = new RemoteSource(client, headers, maxRanges, allowFullFile);\n  return maybeWrapInBlockedSource(source, blockOptions);\n}\nexport function makeXHRSource(url) {\n  var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref4$headers = _ref4.headers,\n      headers = _ref4$headers === void 0 ? {} : _ref4$headers,\n      _ref4$maxRanges = _ref4.maxRanges,\n      maxRanges = _ref4$maxRanges === void 0 ? 0 : _ref4$maxRanges,\n      _ref4$allowFullFile = _ref4.allowFullFile,\n      allowFullFile = _ref4$allowFullFile === void 0 ? false : _ref4$allowFullFile,\n      blockOptions = _objectWithoutProperties(_ref4, _excluded2);\n\n  var client = new XHRClient(url);\n  var source = new RemoteSource(client, headers, maxRanges, allowFullFile);\n  return maybeWrapInBlockedSource(source, blockOptions);\n}\nexport function makeHttpSource(url) {\n  var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref5$headers = _ref5.headers,\n      headers = _ref5$headers === void 0 ? {} : _ref5$headers,\n      _ref5$maxRanges = _ref5.maxRanges,\n      maxRanges = _ref5$maxRanges === void 0 ? 0 : _ref5$maxRanges,\n      _ref5$allowFullFile = _ref5.allowFullFile,\n      allowFullFile = _ref5$allowFullFile === void 0 ? false : _ref5$allowFullFile,\n      blockOptions = _objectWithoutProperties(_ref5, _excluded3);\n\n  var client = new HttpClient(url);\n  var source = new RemoteSource(client, headers, maxRanges, allowFullFile);\n  return maybeWrapInBlockedSource(source, blockOptions);\n}\n/**\n *\n * @param {string} url\n * @param {object} options\n */\n\nexport function makeRemoteSource(url) {\n  var _ref6 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref6$forceXHR = _ref6.forceXHR,\n      forceXHR = _ref6$forceXHR === void 0 ? false : _ref6$forceXHR,\n      clientOptions = _objectWithoutProperties(_ref6, _excluded4);\n\n  if (typeof fetch === 'function' && !forceXHR) {\n    return makeFetchSource(url, clientOptions);\n  }\n\n  if (typeof XMLHttpRequest !== 'undefined') {\n    return makeXHRSource(url, clientOptions);\n  }\n\n  return makeHttpSource(url, clientOptions);\n}","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { BaseSource } from './basesource.js';\n\nvar FileReaderSource = /*#__PURE__*/function (_BaseSource) {\n  _inherits(FileReaderSource, _BaseSource);\n\n  var _super = _createSuper(FileReaderSource);\n\n  function FileReaderSource(file) {\n    var _this;\n\n    _classCallCheck(this, FileReaderSource);\n\n    _this = _super.call(this);\n    _this.file = file;\n    return _this;\n  }\n\n  _createClass(FileReaderSource, [{\n    key: \"fetchSlice\",\n    value: function () {\n      var _fetchSlice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(slice, signal) {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  var blob = _this2.file.slice(slice.offset, slice.offset + slice.length);\n\n                  var reader = new FileReader();\n\n                  reader.onload = function (event) {\n                    return resolve(event.target.result);\n                  };\n\n                  reader.onerror = reject;\n                  reader.onabort = reject;\n                  reader.readAsArrayBuffer(blob);\n\n                  if (signal) {\n                    signal.addEventListener('abort', function () {\n                      return reader.abort();\n                    });\n                  }\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function fetchSlice(_x, _x2) {\n        return _fetchSlice.apply(this, arguments);\n      }\n\n      return fetchSlice;\n    }()\n  }]);\n\n  return FileReaderSource;\n}(BaseSource);\n/**\n * Create a new source from a given file/blob.\n * @param {Blob} file The file or blob to read from.\n * @returns The constructed source\n */\n\n\nexport function makeFileReaderSource(file) {\n  return new FileReaderSource(file);\n}","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _wrapNativeSuper from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/** @module geotiff */\nimport GeoTIFFImage from './geotiffimage.js';\nimport DataView64 from './dataview64.js';\nimport DataSlice from './dataslice.js';\nimport Pool from './pool.js';\nimport { makeRemoteSource } from './source/remote.js';\nimport { makeBufferSource } from './source/arraybuffer.js';\nimport { makeFileReaderSource } from './source/filereader.js';\nimport { makeFileSource } from './source/file.js';\nimport { fieldTypes, fieldTagNames, arrayFields, geoKeyNames } from './globals.js';\nimport { writeGeotiff } from './geotiffwriter.js';\nimport * as globals from './globals.js';\nimport * as rgb from './rgb.js';\nimport { getDecoder, addDecoder } from './compression/index.js';\nimport { setLogger } from './logging.js';\nexport { globals };\nexport { rgb };\nexport { default as BaseDecoder } from './compression/basedecoder.js';\nexport { getDecoder, addDecoder };\nexport { setLogger };\n/**\n * @typedef {Uint8Array | Int8Array | Uint16Array | Int16Array | Uint32Array | Int32Array | Float32Array | Float64Array}\n * TypedArray\n */\n\nfunction getFieldTypeLength(fieldType) {\n  switch (fieldType) {\n    case fieldTypes.BYTE:\n    case fieldTypes.ASCII:\n    case fieldTypes.SBYTE:\n    case fieldTypes.UNDEFINED:\n      return 1;\n\n    case fieldTypes.SHORT:\n    case fieldTypes.SSHORT:\n      return 2;\n\n    case fieldTypes.LONG:\n    case fieldTypes.SLONG:\n    case fieldTypes.FLOAT:\n    case fieldTypes.IFD:\n      return 4;\n\n    case fieldTypes.RATIONAL:\n    case fieldTypes.SRATIONAL:\n    case fieldTypes.DOUBLE:\n    case fieldTypes.LONG8:\n    case fieldTypes.SLONG8:\n    case fieldTypes.IFD8:\n      return 8;\n\n    default:\n      throw new RangeError(\"Invalid field type: \".concat(fieldType));\n  }\n}\n\nfunction parseGeoKeyDirectory(fileDirectory) {\n  var rawGeoKeyDirectory = fileDirectory.GeoKeyDirectory;\n\n  if (!rawGeoKeyDirectory) {\n    return null;\n  }\n\n  var geoKeyDirectory = {};\n\n  for (var i = 4; i <= rawGeoKeyDirectory[3] * 4; i += 4) {\n    var key = geoKeyNames[rawGeoKeyDirectory[i]];\n    var location = rawGeoKeyDirectory[i + 1] ? fieldTagNames[rawGeoKeyDirectory[i + 1]] : null;\n    var count = rawGeoKeyDirectory[i + 2];\n    var offset = rawGeoKeyDirectory[i + 3];\n    var value = null;\n\n    if (!location) {\n      value = offset;\n    } else {\n      value = fileDirectory[location];\n\n      if (typeof value === 'undefined' || value === null) {\n        throw new Error(\"Could not get value of geoKey '\".concat(key, \"'.\"));\n      } else if (typeof value === 'string') {\n        value = value.substring(offset, offset + count - 1);\n      } else if (value.subarray) {\n        value = value.subarray(offset, offset + count);\n\n        if (count === 1) {\n          value = value[0];\n        }\n      }\n    }\n\n    geoKeyDirectory[key] = value;\n  }\n\n  return geoKeyDirectory;\n}\n\nfunction getValues(dataSlice, fieldType, count, offset) {\n  var values = null;\n  var readMethod = null;\n  var fieldTypeLength = getFieldTypeLength(fieldType);\n\n  switch (fieldType) {\n    case fieldTypes.BYTE:\n    case fieldTypes.ASCII:\n    case fieldTypes.UNDEFINED:\n      values = new Uint8Array(count);\n      readMethod = dataSlice.readUint8;\n      break;\n\n    case fieldTypes.SBYTE:\n      values = new Int8Array(count);\n      readMethod = dataSlice.readInt8;\n      break;\n\n    case fieldTypes.SHORT:\n      values = new Uint16Array(count);\n      readMethod = dataSlice.readUint16;\n      break;\n\n    case fieldTypes.SSHORT:\n      values = new Int16Array(count);\n      readMethod = dataSlice.readInt16;\n      break;\n\n    case fieldTypes.LONG:\n    case fieldTypes.IFD:\n      values = new Uint32Array(count);\n      readMethod = dataSlice.readUint32;\n      break;\n\n    case fieldTypes.SLONG:\n      values = new Int32Array(count);\n      readMethod = dataSlice.readInt32;\n      break;\n\n    case fieldTypes.LONG8:\n    case fieldTypes.IFD8:\n      values = new Array(count);\n      readMethod = dataSlice.readUint64;\n      break;\n\n    case fieldTypes.SLONG8:\n      values = new Array(count);\n      readMethod = dataSlice.readInt64;\n      break;\n\n    case fieldTypes.RATIONAL:\n      values = new Uint32Array(count * 2);\n      readMethod = dataSlice.readUint32;\n      break;\n\n    case fieldTypes.SRATIONAL:\n      values = new Int32Array(count * 2);\n      readMethod = dataSlice.readInt32;\n      break;\n\n    case fieldTypes.FLOAT:\n      values = new Float32Array(count);\n      readMethod = dataSlice.readFloat32;\n      break;\n\n    case fieldTypes.DOUBLE:\n      values = new Float64Array(count);\n      readMethod = dataSlice.readFloat64;\n      break;\n\n    default:\n      throw new RangeError(\"Invalid field type: \".concat(fieldType));\n  } // normal fields\n\n\n  if (!(fieldType === fieldTypes.RATIONAL || fieldType === fieldTypes.SRATIONAL)) {\n    for (var i = 0; i < count; ++i) {\n      values[i] = readMethod.call(dataSlice, offset + i * fieldTypeLength);\n    }\n  } else {\n    // RATIONAL or SRATIONAL\n    for (var _i = 0; _i < count; _i += 2) {\n      values[_i] = readMethod.call(dataSlice, offset + _i * fieldTypeLength);\n      values[_i + 1] = readMethod.call(dataSlice, offset + (_i * fieldTypeLength + 4));\n    }\n  }\n\n  if (fieldType === fieldTypes.ASCII) {\n    return new TextDecoder('utf-8').decode(values);\n  }\n\n  return values;\n}\n/**\n * Data class to store the parsed file directory, geo key directory and\n * offset to the next IFD\n */\n\n\nvar ImageFileDirectory = /*#__PURE__*/_createClass(function ImageFileDirectory(fileDirectory, geoKeyDirectory, nextIFDByteOffset) {\n  _classCallCheck(this, ImageFileDirectory);\n\n  this.fileDirectory = fileDirectory;\n  this.geoKeyDirectory = geoKeyDirectory;\n  this.nextIFDByteOffset = nextIFDByteOffset;\n});\n/**\n * Error class for cases when an IFD index was requested, that does not exist\n * in the file.\n */\n\n\nvar GeoTIFFImageIndexError = /*#__PURE__*/function (_Error) {\n  _inherits(GeoTIFFImageIndexError, _Error);\n\n  var _super = _createSuper(GeoTIFFImageIndexError);\n\n  function GeoTIFFImageIndexError(index) {\n    var _this;\n\n    _classCallCheck(this, GeoTIFFImageIndexError);\n\n    _this = _super.call(this, \"No image at index \".concat(index));\n    _this.index = index;\n    return _this;\n  }\n\n  return _createClass(GeoTIFFImageIndexError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nvar GeoTIFFBase = /*#__PURE__*/function () {\n  function GeoTIFFBase() {\n    _classCallCheck(this, GeoTIFFBase);\n  }\n\n  _createClass(GeoTIFFBase, [{\n    key: \"readRasters\",\n    value:\n    /**\n     * (experimental) Reads raster data from the best fitting image. This function uses\n     * the image with the lowest resolution that is still a higher resolution than the\n     * requested resolution.\n     * When specified, the `bbox` option is translated to the `window` option and the\n     * `resX` and `resY` to `width` and `height` respectively.\n     * Then, the [readRasters]{@link GeoTIFFImage#readRasters} method of the selected\n     * image is called and the result returned.\n     * @see GeoTIFFImage.readRasters\n     * @param {import('./geotiffimage').ReadRasterOptions} [options={}] optional parameters\n     * @returns {Promise<(TypedArray|TypedArray[])>} the decoded arrays as a promise\n     */\n    function () {\n      var _readRasters = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var options,\n            imageWindow,\n            width,\n            height,\n            resX,\n            resY,\n            bbox,\n            firstImage,\n            usedImage,\n            imageCount,\n            imgBBox,\n            _firstImage$getOrigin,\n            _firstImage$getOrigin2,\n            oX,\n            oY,\n            _firstImage$getResolu,\n            _firstImage$getResolu2,\n            rX,\n            rY,\n            usedBBox,\n            allImages,\n            i,\n            image,\n            _image$fileDirectory,\n            subfileType,\n            newSubfileType,\n            _i2,\n            _image,\n            imgResX,\n            imgResY,\n            wnd,\n            _firstImage$getOrigin3,\n            _firstImage$getOrigin4,\n            _oX,\n            _oY,\n            _usedImage$getResolut,\n            _usedImage$getResolut2,\n            imageResX,\n            imageResY,\n            _args = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n                imageWindow = options.window, width = options.width, height = options.height;\n                resX = options.resX, resY = options.resY, bbox = options.bbox;\n                _context.next = 5;\n                return this.getImage();\n\n              case 5:\n                firstImage = _context.sent;\n                usedImage = firstImage;\n                _context.next = 9;\n                return this.getImageCount();\n\n              case 9:\n                imageCount = _context.sent;\n                imgBBox = firstImage.getBoundingBox();\n\n                if (!(imageWindow && bbox)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                throw new Error('Both \"bbox\" and \"window\" passed.');\n\n              case 13:\n                if (!(width || height)) {\n                  _context.next = 24;\n                  break;\n                }\n\n                // if we have an image window (pixel coordinates), transform it to a BBox\n                // using the origin/resolution of the first image.\n                if (imageWindow) {\n                  _firstImage$getOrigin = firstImage.getOrigin(), _firstImage$getOrigin2 = _slicedToArray(_firstImage$getOrigin, 2), oX = _firstImage$getOrigin2[0], oY = _firstImage$getOrigin2[1];\n                  _firstImage$getResolu = firstImage.getResolution(), _firstImage$getResolu2 = _slicedToArray(_firstImage$getResolu, 2), rX = _firstImage$getResolu2[0], rY = _firstImage$getResolu2[1];\n                  bbox = [oX + imageWindow[0] * rX, oY + imageWindow[1] * rY, oX + imageWindow[2] * rX, oY + imageWindow[3] * rY];\n                } // if we have a bbox (or calculated one)\n\n\n                usedBBox = bbox || imgBBox;\n\n                if (!width) {\n                  _context.next = 20;\n                  break;\n                }\n\n                if (!resX) {\n                  _context.next = 19;\n                  break;\n                }\n\n                throw new Error('Both width and resX passed');\n\n              case 19:\n                resX = (usedBBox[2] - usedBBox[0]) / width;\n\n              case 20:\n                if (!height) {\n                  _context.next = 24;\n                  break;\n                }\n\n                if (!resY) {\n                  _context.next = 23;\n                  break;\n                }\n\n                throw new Error('Both width and resY passed');\n\n              case 23:\n                resY = (usedBBox[3] - usedBBox[1]) / height;\n\n              case 24:\n                if (!(resX || resY)) {\n                  _context.next = 48;\n                  break;\n                }\n\n                allImages = [];\n                i = 0;\n\n              case 27:\n                if (!(i < imageCount)) {\n                  _context.next = 36;\n                  break;\n                }\n\n                _context.next = 30;\n                return this.getImage(i);\n\n              case 30:\n                image = _context.sent;\n                _image$fileDirectory = image.fileDirectory, subfileType = _image$fileDirectory.SubfileType, newSubfileType = _image$fileDirectory.NewSubfileType;\n\n                if (i === 0 || subfileType === 2 || newSubfileType & 1) {\n                  allImages.push(image);\n                }\n\n              case 33:\n                ++i;\n                _context.next = 27;\n                break;\n\n              case 36:\n                allImages.sort(function (a, b) {\n                  return a.getWidth() - b.getWidth();\n                });\n                _i2 = 0;\n\n              case 38:\n                if (!(_i2 < allImages.length)) {\n                  _context.next = 48;\n                  break;\n                }\n\n                _image = allImages[_i2];\n                imgResX = (imgBBox[2] - imgBBox[0]) / _image.getWidth();\n                imgResY = (imgBBox[3] - imgBBox[1]) / _image.getHeight();\n                usedImage = _image;\n\n                if (!(resX && resX > imgResX || resY && resY > imgResY)) {\n                  _context.next = 45;\n                  break;\n                }\n\n                return _context.abrupt(\"break\", 48);\n\n              case 45:\n                ++_i2;\n                _context.next = 38;\n                break;\n\n              case 48:\n                wnd = imageWindow;\n\n                if (bbox) {\n                  _firstImage$getOrigin3 = firstImage.getOrigin(), _firstImage$getOrigin4 = _slicedToArray(_firstImage$getOrigin3, 2), _oX = _firstImage$getOrigin4[0], _oY = _firstImage$getOrigin4[1];\n                  _usedImage$getResolut = usedImage.getResolution(firstImage), _usedImage$getResolut2 = _slicedToArray(_usedImage$getResolut, 2), imageResX = _usedImage$getResolut2[0], imageResY = _usedImage$getResolut2[1];\n                  wnd = [Math.round((bbox[0] - _oX) / imageResX), Math.round((bbox[1] - _oY) / imageResY), Math.round((bbox[2] - _oX) / imageResX), Math.round((bbox[3] - _oY) / imageResY)];\n                  wnd = [Math.min(wnd[0], wnd[2]), Math.min(wnd[1], wnd[3]), Math.max(wnd[0], wnd[2]), Math.max(wnd[1], wnd[3])];\n                }\n\n                return _context.abrupt(\"return\", usedImage.readRasters(_objectSpread(_objectSpread({}, options), {}, {\n                  window: wnd\n                })));\n\n              case 51:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function readRasters() {\n        return _readRasters.apply(this, arguments);\n      }\n\n      return readRasters;\n    }()\n  }]);\n\n  return GeoTIFFBase;\n}();\n/**\n * @typedef {Object} GeoTIFFOptions\n * @property {boolean} [cache=false] whether or not decoded tiles shall be cached.\n */\n\n/**\n * The abstraction for a whole GeoTIFF file.\n * @augments GeoTIFFBase\n */\n\n\nvar GeoTIFF = /*#__PURE__*/function (_GeoTIFFBase) {\n  _inherits(GeoTIFF, _GeoTIFFBase);\n\n  var _super2 = _createSuper(GeoTIFF);\n\n  /**\n   * @constructor\n   * @param {*} source The datasource to read from.\n   * @param {boolean} littleEndian Whether the image uses little endian.\n   * @param {boolean} bigTiff Whether the image uses bigTIFF conventions.\n   * @param {number} firstIFDOffset The numeric byte-offset from the start of the image\n   *                                to the first IFD.\n   * @param {GeoTIFFOptions} [options] further options.\n   */\n  function GeoTIFF(source, littleEndian, bigTiff, firstIFDOffset) {\n    var _this2;\n\n    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n    _classCallCheck(this, GeoTIFF);\n\n    _this2 = _super2.call(this);\n    _this2.source = source;\n    _this2.littleEndian = littleEndian;\n    _this2.bigTiff = bigTiff;\n    _this2.firstIFDOffset = firstIFDOffset;\n    _this2.cache = options.cache || false;\n    _this2.ifdRequests = [];\n    _this2.ghostValues = null;\n    return _this2;\n  }\n\n  _createClass(GeoTIFF, [{\n    key: \"getSlice\",\n    value: function () {\n      var _getSlice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(offset, size) {\n        var fallbackSize;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                fallbackSize = this.bigTiff ? 4048 : 1024;\n                _context2.t0 = DataSlice;\n                _context2.next = 4;\n                return this.source.fetch([{\n                  offset: offset,\n                  length: typeof size !== 'undefined' ? size : fallbackSize\n                }]);\n\n              case 4:\n                _context2.t1 = _context2.sent[0];\n                _context2.t2 = offset;\n                _context2.t3 = this.littleEndian;\n                _context2.t4 = this.bigTiff;\n                return _context2.abrupt(\"return\", new _context2.t0(_context2.t1, _context2.t2, _context2.t3, _context2.t4));\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getSlice(_x, _x2) {\n        return _getSlice.apply(this, arguments);\n      }\n\n      return getSlice;\n    }()\n    /**\n     * Instructs to parse an image file directory at the given file offset.\n     * As there is no way to ensure that a location is indeed the start of an IFD,\n     * this function must be called with caution (e.g only using the IFD offsets from\n     * the headers or other IFDs).\n     * @param {number} offset the offset to parse the IFD at\n     * @returns {Promise<ImageFileDirectory>} the parsed IFD\n     */\n\n  }, {\n    key: \"parseFileDirectoryAt\",\n    value: function () {\n      var _parseFileDirectoryAt = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(offset) {\n        var entrySize, offsetSize, dataSlice, numDirEntries, byteSize, fileDirectory, i, entryCount, fieldTag, fieldType, typeCount, fieldValues, value, fieldTypeLength, valueOffset, actualOffset, length, fieldDataSlice, geoKeyDirectory, nextIFDByteOffset;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                entrySize = this.bigTiff ? 20 : 12;\n                offsetSize = this.bigTiff ? 8 : 2;\n                _context3.next = 4;\n                return this.getSlice(offset);\n\n              case 4:\n                dataSlice = _context3.sent;\n                numDirEntries = this.bigTiff ? dataSlice.readUint64(offset) : dataSlice.readUint16(offset); // if the slice does not cover the whole IFD, request a bigger slice, where the\n                // whole IFD fits: num of entries + n x tag length + offset to next IFD\n\n                byteSize = numDirEntries * entrySize + (this.bigTiff ? 16 : 6);\n\n                if (dataSlice.covers(offset, byteSize)) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                _context3.next = 10;\n                return this.getSlice(offset, byteSize);\n\n              case 10:\n                dataSlice = _context3.sent;\n\n              case 11:\n                fileDirectory = {}; // loop over the IFD and create a file directory object\n\n                i = offset + (this.bigTiff ? 8 : 2);\n                entryCount = 0;\n\n              case 14:\n                if (!(entryCount < numDirEntries)) {\n                  _context3.next = 41;\n                  break;\n                }\n\n                fieldTag = dataSlice.readUint16(i);\n                fieldType = dataSlice.readUint16(i + 2);\n                typeCount = this.bigTiff ? dataSlice.readUint64(i + 4) : dataSlice.readUint32(i + 4);\n                fieldValues = void 0;\n                value = void 0;\n                fieldTypeLength = getFieldTypeLength(fieldType);\n                valueOffset = i + (this.bigTiff ? 12 : 8); // check whether the value is directly encoded in the tag or refers to a\n                // different external byte range\n\n                if (!(fieldTypeLength * typeCount <= (this.bigTiff ? 8 : 4))) {\n                  _context3.next = 26;\n                  break;\n                }\n\n                fieldValues = getValues(dataSlice, fieldType, typeCount, valueOffset);\n                _context3.next = 36;\n                break;\n\n              case 26:\n                // resolve the reference to the actual byte range\n                actualOffset = dataSlice.readOffset(valueOffset);\n                length = getFieldTypeLength(fieldType) * typeCount; // check, whether we actually cover the referenced byte range; if not,\n                // request a new slice of bytes to read from it\n\n                if (!dataSlice.covers(actualOffset, length)) {\n                  _context3.next = 32;\n                  break;\n                }\n\n                fieldValues = getValues(dataSlice, fieldType, typeCount, actualOffset);\n                _context3.next = 36;\n                break;\n\n              case 32:\n                _context3.next = 34;\n                return this.getSlice(actualOffset, length);\n\n              case 34:\n                fieldDataSlice = _context3.sent;\n                fieldValues = getValues(fieldDataSlice, fieldType, typeCount, actualOffset);\n\n              case 36:\n                // unpack single values from the array\n                if (typeCount === 1 && arrayFields.indexOf(fieldTag) === -1 && !(fieldType === fieldTypes.RATIONAL || fieldType === fieldTypes.SRATIONAL)) {\n                  value = fieldValues[0];\n                } else {\n                  value = fieldValues;\n                } // write the tags value to the file directly\n\n\n                fileDirectory[fieldTagNames[fieldTag]] = value;\n\n              case 38:\n                i += entrySize, ++entryCount;\n                _context3.next = 14;\n                break;\n\n              case 41:\n                geoKeyDirectory = parseGeoKeyDirectory(fileDirectory);\n                nextIFDByteOffset = dataSlice.readOffset(offset + offsetSize + entrySize * numDirEntries);\n                return _context3.abrupt(\"return\", new ImageFileDirectory(fileDirectory, geoKeyDirectory, nextIFDByteOffset));\n\n              case 44:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function parseFileDirectoryAt(_x3) {\n        return _parseFileDirectoryAt.apply(this, arguments);\n      }\n\n      return parseFileDirectoryAt;\n    }()\n  }, {\n    key: \"requestIFD\",\n    value: function () {\n      var _requestIFD = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(index) {\n        var _this3 = this;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (!this.ifdRequests[index]) {\n                  _context5.next = 4;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", this.ifdRequests[index]);\n\n              case 4:\n                if (!(index === 0)) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                // special case for index 0\n                this.ifdRequests[index] = this.parseFileDirectoryAt(this.firstIFDOffset);\n                return _context5.abrupt(\"return\", this.ifdRequests[index]);\n\n              case 9:\n                if (this.ifdRequests[index - 1]) {\n                  _context5.next = 19;\n                  break;\n                }\n\n                _context5.prev = 10;\n                this.ifdRequests[index - 1] = this.requestIFD(index - 1);\n                _context5.next = 19;\n                break;\n\n              case 14:\n                _context5.prev = 14;\n                _context5.t0 = _context5[\"catch\"](10);\n\n                if (!(_context5.t0 instanceof GeoTIFFImageIndexError)) {\n                  _context5.next = 18;\n                  break;\n                }\n\n                throw new GeoTIFFImageIndexError(index);\n\n              case 18:\n                throw _context5.t0;\n\n              case 19:\n                // if the previous IFD was loaded, we can finally fetch the one we are interested in.\n                // we need to wrap this in an IIFE, otherwise this.ifdRequests[index] would be delayed\n                this.ifdRequests[index] = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n                  var previousIfd;\n                  return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                    while (1) {\n                      switch (_context4.prev = _context4.next) {\n                        case 0:\n                          _context4.next = 2;\n                          return _this3.ifdRequests[index - 1];\n\n                        case 2:\n                          previousIfd = _context4.sent;\n\n                          if (!(previousIfd.nextIFDByteOffset === 0)) {\n                            _context4.next = 5;\n                            break;\n                          }\n\n                          throw new GeoTIFFImageIndexError(index);\n\n                        case 5:\n                          return _context4.abrupt(\"return\", _this3.parseFileDirectoryAt(previousIfd.nextIFDByteOffset));\n\n                        case 6:\n                        case \"end\":\n                          return _context4.stop();\n                      }\n                    }\n                  }, _callee4);\n                }))();\n                return _context5.abrupt(\"return\", this.ifdRequests[index]);\n\n              case 21:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[10, 14]]);\n      }));\n\n      function requestIFD(_x4) {\n        return _requestIFD.apply(this, arguments);\n      }\n\n      return requestIFD;\n    }()\n    /**\n     * Get the n-th internal subfile of an image. By default, the first is returned.\n     *\n     * @param {number} [index=0] the index of the image to return.\n     * @returns {Promise<GeoTIFFImage>} the image at the given index\n     */\n\n  }, {\n    key: \"getImage\",\n    value: function () {\n      var _getImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var index,\n            ifd,\n            _args6 = arguments;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                index = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : 0;\n                _context6.next = 3;\n                return this.requestIFD(index);\n\n              case 3:\n                ifd = _context6.sent;\n                return _context6.abrupt(\"return\", new GeoTIFFImage(ifd.fileDirectory, ifd.geoKeyDirectory, this.dataView, this.littleEndian, this.cache, this.source));\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function getImage() {\n        return _getImage.apply(this, arguments);\n      }\n\n      return getImage;\n    }()\n    /**\n     * Returns the count of the internal subfiles.\n     *\n     * @returns {Promise<number>} the number of internal subfile images\n     */\n\n  }, {\n    key: \"getImageCount\",\n    value: function () {\n      var _getImageCount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n        var index, hasNext;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                index = 0; // loop until we run out of IFDs\n\n                hasNext = true;\n\n              case 2:\n                if (!hasNext) {\n                  _context7.next = 18;\n                  break;\n                }\n\n                _context7.prev = 3;\n                _context7.next = 6;\n                return this.requestIFD(index);\n\n              case 6:\n                ++index;\n                _context7.next = 16;\n                break;\n\n              case 9:\n                _context7.prev = 9;\n                _context7.t0 = _context7[\"catch\"](3);\n\n                if (!(_context7.t0 instanceof GeoTIFFImageIndexError)) {\n                  _context7.next = 15;\n                  break;\n                }\n\n                hasNext = false;\n                _context7.next = 16;\n                break;\n\n              case 15:\n                throw _context7.t0;\n\n              case 16:\n                _context7.next = 2;\n                break;\n\n              case 18:\n                return _context7.abrupt(\"return\", index);\n\n              case 19:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[3, 9]]);\n      }));\n\n      function getImageCount() {\n        return _getImageCount.apply(this, arguments);\n      }\n\n      return getImageCount;\n    }()\n    /**\n     * Get the values of the COG ghost area as a parsed map.\n     * See https://gdal.org/drivers/raster/cog.html#header-ghost-area for reference\n     * @returns {Promise<Object>} the parsed ghost area or null, if no such area was found\n     */\n\n  }, {\n    key: \"getGhostValues\",\n    value: function () {\n      var _getGhostValues = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n        var _this4 = this;\n\n        var offset, detectionString, heuristicAreaSize, slice, valuesString, firstLine, metadataSize, fullString;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                offset = this.bigTiff ? 16 : 8;\n\n                if (!this.ghostValues) {\n                  _context8.next = 3;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", this.ghostValues);\n\n              case 3:\n                detectionString = 'GDAL_STRUCTURAL_METADATA_SIZE=';\n                heuristicAreaSize = detectionString.length + 100;\n                _context8.next = 7;\n                return this.getSlice(offset, heuristicAreaSize);\n\n              case 7:\n                slice = _context8.sent;\n\n                if (!(detectionString === getValues(slice, fieldTypes.ASCII, detectionString.length, offset))) {\n                  _context8.next = 19;\n                  break;\n                }\n\n                valuesString = getValues(slice, fieldTypes.ASCII, heuristicAreaSize, offset);\n                firstLine = valuesString.split('\\n')[0];\n                metadataSize = Number(firstLine.split('=')[1].split(' ')[0]) + firstLine.length;\n\n                if (!(metadataSize > heuristicAreaSize)) {\n                  _context8.next = 16;\n                  break;\n                }\n\n                _context8.next = 15;\n                return this.getSlice(offset, metadataSize);\n\n              case 15:\n                slice = _context8.sent;\n\n              case 16:\n                fullString = getValues(slice, fieldTypes.ASCII, metadataSize, offset);\n                this.ghostValues = {};\n                fullString.split('\\n').filter(function (line) {\n                  return line.length > 0;\n                }).map(function (line) {\n                  return line.split('=');\n                }).forEach(function (_ref2) {\n                  var _ref3 = _slicedToArray(_ref2, 2),\n                      key = _ref3[0],\n                      value = _ref3[1];\n\n                  _this4.ghostValues[key] = value;\n                });\n\n              case 19:\n                return _context8.abrupt(\"return\", this.ghostValues);\n\n              case 20:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function getGhostValues() {\n        return _getGhostValues.apply(this, arguments);\n      }\n\n      return getGhostValues;\n    }()\n    /**\n     * Parse a (Geo)TIFF file from the given source.\n     *\n     * @param {*} source The source of data to parse from.\n     * @param {GeoTIFFOptions} [options] Additional options.\n     * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n     *                               to be aborted\n     */\n\n  }, {\n    key: \"close\",\n    value:\n    /**\n     * Closes the underlying file buffer\n     * N.B. After the GeoTIFF has been completely processed it needs\n     * to be closed but only if it has been constructed from a file.\n     */\n    function close() {\n      if (typeof this.source.close === 'function') {\n        return this.source.close();\n      }\n\n      return false;\n    }\n  }], [{\n    key: \"fromSource\",\n    value: function () {\n      var _fromSource = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(source, options, signal) {\n        var headerData, dataView, BOM, littleEndian, magicNumber, bigTiff, offsetByteSize, firstIFDOffset;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return source.fetch([{\n                  offset: 0,\n                  length: 1024\n                }], signal);\n\n              case 2:\n                headerData = _context9.sent[0];\n                dataView = new DataView64(headerData);\n                BOM = dataView.getUint16(0, 0);\n\n                if (!(BOM === 0x4949)) {\n                  _context9.next = 9;\n                  break;\n                }\n\n                littleEndian = true;\n                _context9.next = 14;\n                break;\n\n              case 9:\n                if (!(BOM === 0x4D4D)) {\n                  _context9.next = 13;\n                  break;\n                }\n\n                littleEndian = false;\n                _context9.next = 14;\n                break;\n\n              case 13:\n                throw new TypeError('Invalid byte order value.');\n\n              case 14:\n                magicNumber = dataView.getUint16(2, littleEndian);\n\n                if (!(magicNumber === 42)) {\n                  _context9.next = 19;\n                  break;\n                }\n\n                bigTiff = false;\n                _context9.next = 27;\n                break;\n\n              case 19:\n                if (!(magicNumber === 43)) {\n                  _context9.next = 26;\n                  break;\n                }\n\n                bigTiff = true;\n                offsetByteSize = dataView.getUint16(4, littleEndian);\n\n                if (!(offsetByteSize !== 8)) {\n                  _context9.next = 24;\n                  break;\n                }\n\n                throw new Error('Unsupported offset byte-size.');\n\n              case 24:\n                _context9.next = 27;\n                break;\n\n              case 26:\n                throw new TypeError('Invalid magic number.');\n\n              case 27:\n                firstIFDOffset = bigTiff ? dataView.getUint64(8, littleEndian) : dataView.getUint32(4, littleEndian);\n                return _context9.abrupt(\"return\", new GeoTIFF(source, littleEndian, bigTiff, firstIFDOffset, options));\n\n              case 29:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      function fromSource(_x5, _x6, _x7) {\n        return _fromSource.apply(this, arguments);\n      }\n\n      return fromSource;\n    }()\n  }]);\n\n  return GeoTIFF;\n}(GeoTIFFBase);\n\nexport { GeoTIFF };\nexport default GeoTIFF;\n/**\n * Wrapper for GeoTIFF files that have external overviews.\n * @augments GeoTIFFBase\n */\n\nvar MultiGeoTIFF = /*#__PURE__*/function (_GeoTIFFBase2) {\n  _inherits(MultiGeoTIFF, _GeoTIFFBase2);\n\n  var _super3 = _createSuper(MultiGeoTIFF);\n\n  /**\n   * Construct a new MultiGeoTIFF from a main and several overview files.\n   * @param {GeoTIFF} mainFile The main GeoTIFF file.\n   * @param {GeoTIFF[]} overviewFiles An array of overview files.\n   */\n  function MultiGeoTIFF(mainFile, overviewFiles) {\n    var _this5;\n\n    _classCallCheck(this, MultiGeoTIFF);\n\n    _this5 = _super3.call(this);\n    _this5.mainFile = mainFile;\n    _this5.overviewFiles = overviewFiles;\n    _this5.imageFiles = [mainFile].concat(overviewFiles);\n    _this5.fileDirectoriesPerFile = null;\n    _this5.fileDirectoriesPerFileParsing = null;\n    _this5.imageCount = null;\n    return _this5;\n  }\n\n  _createClass(MultiGeoTIFF, [{\n    key: \"parseFileDirectoriesPerFile\",\n    value: function () {\n      var _parseFileDirectoriesPerFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n        var requests;\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                requests = [this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(function (file) {\n                  return file.parseFileDirectoryAt(file.firstIFDOffset);\n                }));\n                _context10.next = 3;\n                return Promise.all(requests);\n\n              case 3:\n                this.fileDirectoriesPerFile = _context10.sent;\n                return _context10.abrupt(\"return\", this.fileDirectoriesPerFile);\n\n              case 5:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function parseFileDirectoriesPerFile() {\n        return _parseFileDirectoriesPerFile.apply(this, arguments);\n      }\n\n      return parseFileDirectoriesPerFile;\n    }()\n    /**\n     * Get the n-th internal subfile of an image. By default, the first is returned.\n     *\n     * @param {number} [index=0] the index of the image to return.\n     * @returns {Promise<GeoTIFFImage>} the image at the given index\n     */\n\n  }, {\n    key: \"getImage\",\n    value: function () {\n      var _getImage2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n        var index,\n            visited,\n            relativeIndex,\n            i,\n            imageFile,\n            ii,\n            ifd,\n            _args11 = arguments;\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                index = _args11.length > 0 && _args11[0] !== undefined ? _args11[0] : 0;\n                _context11.next = 3;\n                return this.getImageCount();\n\n              case 3:\n                _context11.next = 5;\n                return this.parseFileDirectoriesPerFile();\n\n              case 5:\n                visited = 0;\n                relativeIndex = 0;\n                i = 0;\n\n              case 8:\n                if (!(i < this.imageFiles.length)) {\n                  _context11.next = 26;\n                  break;\n                }\n\n                imageFile = this.imageFiles[i];\n                ii = 0;\n\n              case 11:\n                if (!(ii < this.imageCounts[i])) {\n                  _context11.next = 22;\n                  break;\n                }\n\n                if (!(index === visited)) {\n                  _context11.next = 17;\n                  break;\n                }\n\n                _context11.next = 15;\n                return imageFile.requestIFD(relativeIndex);\n\n              case 15:\n                ifd = _context11.sent;\n                return _context11.abrupt(\"return\", new GeoTIFFImage(ifd.fileDirectory, ifd.geoKeyDirectory, imageFile.dataView, imageFile.littleEndian, imageFile.cache, imageFile.source));\n\n              case 17:\n                visited++;\n                relativeIndex++;\n\n              case 19:\n                ii++;\n                _context11.next = 11;\n                break;\n\n              case 22:\n                relativeIndex = 0;\n\n              case 23:\n                i++;\n                _context11.next = 8;\n                break;\n\n              case 26:\n                throw new RangeError('Invalid image index');\n\n              case 27:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function getImage() {\n        return _getImage2.apply(this, arguments);\n      }\n\n      return getImage;\n    }()\n    /**\n     * Returns the count of the internal subfiles.\n     *\n     * @returns {Promise<number>} the number of internal subfile images\n     */\n\n  }, {\n    key: \"getImageCount\",\n    value: function () {\n      var _getImageCount2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n        var requests;\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                if (!(this.imageCount !== null)) {\n                  _context12.next = 2;\n                  break;\n                }\n\n                return _context12.abrupt(\"return\", this.imageCount);\n\n              case 2:\n                requests = [this.mainFile.getImageCount()].concat(this.overviewFiles.map(function (file) {\n                  return file.getImageCount();\n                }));\n                _context12.next = 5;\n                return Promise.all(requests);\n\n              case 5:\n                this.imageCounts = _context12.sent;\n                this.imageCount = this.imageCounts.reduce(function (count, ifds) {\n                  return count + ifds;\n                }, 0);\n                return _context12.abrupt(\"return\", this.imageCount);\n\n              case 8:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function getImageCount() {\n        return _getImageCount2.apply(this, arguments);\n      }\n\n      return getImageCount;\n    }()\n  }]);\n\n  return MultiGeoTIFF;\n}(GeoTIFFBase);\n\nexport { MultiGeoTIFF };\n/**\n * Creates a new GeoTIFF from a remote URL.\n * @param {string} url The URL to access the image from\n * @param {object} [options] Additional options to pass to the source.\n *                           See {@link makeRemoteSource} for details.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise<GeoTIFF>} The resulting GeoTIFF file.\n */\n\nexport function fromUrl(_x8) {\n  return _fromUrl.apply(this, arguments);\n}\n/**\n * Construct a new GeoTIFF from an\n * [ArrayBuffer]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer}.\n * @param {ArrayBuffer} arrayBuffer The data to read the file from.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise<GeoTIFF>} The resulting GeoTIFF file.\n */\n\nfunction _fromUrl() {\n  _fromUrl = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(url) {\n    var options,\n        signal,\n        _args13 = arguments;\n    return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            options = _args13.length > 1 && _args13[1] !== undefined ? _args13[1] : {};\n            signal = _args13.length > 2 ? _args13[2] : undefined;\n            return _context13.abrupt(\"return\", GeoTIFF.fromSource(makeRemoteSource(url, options), signal));\n\n          case 3:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, _callee13);\n  }));\n  return _fromUrl.apply(this, arguments);\n}\n\nexport function fromArrayBuffer(_x9, _x10) {\n  return _fromArrayBuffer.apply(this, arguments);\n}\n/**\n * Construct a GeoTIFF from a local file path. This uses the node\n * [filesystem API]{@link https://nodejs.org/api/fs.html} and is\n * not available on browsers.\n *\n * N.B. After the GeoTIFF has been completely processed it needs\n * to be closed but only if it has been constructed from a file.\n * @param {string} path The file path to read from.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise<GeoTIFF>} The resulting GeoTIFF file.\n */\n\nfunction _fromArrayBuffer() {\n  _fromArrayBuffer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14(arrayBuffer, signal) {\n    return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n      while (1) {\n        switch (_context14.prev = _context14.next) {\n          case 0:\n            return _context14.abrupt(\"return\", GeoTIFF.fromSource(makeBufferSource(arrayBuffer), signal));\n\n          case 1:\n          case \"end\":\n            return _context14.stop();\n        }\n      }\n    }, _callee14);\n  }));\n  return _fromArrayBuffer.apply(this, arguments);\n}\n\nexport function fromFile(_x11, _x12) {\n  return _fromFile.apply(this, arguments);\n}\n/**\n * Construct a GeoTIFF from an HTML\n * [Blob]{@link https://developer.mozilla.org/en-US/docs/Web/API/Blob} or\n * [File]{@link https://developer.mozilla.org/en-US/docs/Web/API/File}\n * object.\n * @param {Blob|File} blob The Blob or File object to read from.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise<GeoTIFF>} The resulting GeoTIFF file.\n */\n\nfunction _fromFile() {\n  _fromFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15(path, signal) {\n    return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            return _context15.abrupt(\"return\", GeoTIFF.fromSource(makeFileSource(path), signal));\n\n          case 1:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, _callee15);\n  }));\n  return _fromFile.apply(this, arguments);\n}\n\nexport function fromBlob(_x13, _x14) {\n  return _fromBlob.apply(this, arguments);\n}\n/**\n * Construct a MultiGeoTIFF from the given URLs.\n * @param {string} mainUrl The URL for the main file.\n * @param {string[]} overviewUrls An array of URLs for the overview images.\n * @param {Object} [options] Additional options to pass to the source.\n *                           See [makeRemoteSource]{@link module:source.makeRemoteSource}\n *                           for details.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise<MultiGeoTIFF>} The resulting MultiGeoTIFF file.\n */\n\nfunction _fromBlob() {\n  _fromBlob = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16(blob, signal) {\n    return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n      while (1) {\n        switch (_context16.prev = _context16.next) {\n          case 0:\n            return _context16.abrupt(\"return\", GeoTIFF.fromSource(makeFileReaderSource(blob), signal));\n\n          case 1:\n          case \"end\":\n            return _context16.stop();\n        }\n      }\n    }, _callee16);\n  }));\n  return _fromBlob.apply(this, arguments);\n}\n\nexport function fromUrls(_x15) {\n  return _fromUrls.apply(this, arguments);\n}\n/**\n * Main creating function for GeoTIFF files.\n * @param {(Array)} array of pixel values\n * @returns {metadata} metadata\n */\n\nfunction _fromUrls() {\n  _fromUrls = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17(mainUrl) {\n    var overviewUrls,\n        options,\n        signal,\n        mainFile,\n        overviewFiles,\n        _args17 = arguments;\n    return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n      while (1) {\n        switch (_context17.prev = _context17.next) {\n          case 0:\n            overviewUrls = _args17.length > 1 && _args17[1] !== undefined ? _args17[1] : [];\n            options = _args17.length > 2 && _args17[2] !== undefined ? _args17[2] : {};\n            signal = _args17.length > 3 ? _args17[3] : undefined;\n            _context17.next = 5;\n            return GeoTIFF.fromSource(makeRemoteSource(mainUrl, options), signal);\n\n          case 5:\n            mainFile = _context17.sent;\n            _context17.next = 8;\n            return Promise.all(overviewUrls.map(function (url) {\n              return GeoTIFF.fromSource(makeRemoteSource(url, options));\n            }));\n\n          case 8:\n            overviewFiles = _context17.sent;\n            return _context17.abrupt(\"return\", new MultiGeoTIFF(mainFile, overviewFiles));\n\n          case 10:\n          case \"end\":\n            return _context17.stop();\n        }\n      }\n    }, _callee17);\n  }));\n  return _fromUrls.apply(this, arguments);\n}\n\nexport function writeArrayBuffer(values, metadata) {\n  return writeGeotiff(values, metadata);\n}\nexport { Pool };\nexport { GeoTIFFImage };","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\nimport { getDecoder } from './compression/index.js';\nvar defaultPoolSize = typeof navigator !== 'undefined' ? navigator.hardwareConcurrency || 2 : 2;\n/**\n * @module pool\n */\n\n/**\n * Pool for workers to decode chunks of the images.\n */\n\nvar Pool = /*#__PURE__*/function () {\n  /**\n   * @constructor\n   * @param {Number} [size] The size of the pool. Defaults to the number of CPUs\n   *                      available. When this parameter is `null` or 0, then the\n   *                      decoding will be done in the main thread.\n   * @param {function(): Worker} [createWorker] A function that creates the decoder worker.\n   * Defaults to a worker with all decoders that ship with geotiff.js. The `createWorker()`\n   * function is expected to return a `Worker` compatible with Web Workers. For code that\n   * runs in Node, [web-worker](https://www.npmjs.com/package/web-worker) is a good choice.\n   *\n   * A worker that uses a custom lzw decoder would look like this `my-custom-worker.js` file:\n   * ```js\n   * import { addDecoder, getDecoder } from 'geotiff';\n   * addDecoder(5, () => import ('./my-custom-lzw').then((m) => m.default));\n   * self.addEventListener('message', async (e) => {\n   *   const { id, fileDirectory, buffer } = e.data;\n   *   const decoder = await getDecoder(fileDirectory);\n   *   const decoded = await decoder.decode(fileDirectory, buffer);\n   *   self.postMessage({ decoded, id }, [decoded]);\n   * });\n   * ```\n   * The way the above code is built into a worker by the `createWorker()` function\n   * depends on the used bundler. For most bundlers, something like this will work:\n   * ```js\n   * function createWorker() {\n   *   return new Worker(new URL('./my-custom-worker.js', import.meta.url));\n   * }\n   * ```\n   */\n  function Pool() {\n    var _this = this;\n\n    var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultPoolSize;\n    var createWorker = arguments.length > 1 ? arguments[1] : undefined;\n\n    _classCallCheck(this, Pool);\n\n    this.workers = null;\n    this._awaitingDecoder = null;\n    this.size = size;\n    this.messageId = 0;\n\n    if (size) {\n      this._awaitingDecoder = createWorker ? Promise.resolve(createWorker) : new Promise(function (resolve) {\n        import('./worker/decoder.js').then(function (module) {\n          resolve(module.create);\n        });\n      });\n\n      this._awaitingDecoder.then(function (create) {\n        _this._awaitingDecoder = null;\n        _this.workers = [];\n\n        for (var i = 0; i < size; i++) {\n          _this.workers.push({\n            worker: create(),\n            idle: true\n          });\n        }\n      });\n    }\n  }\n  /**\n   * Decode the given block of bytes with the set compression method.\n   * @param {ArrayBuffer} buffer the array buffer of bytes to decode.\n   * @returns {Promise<ArrayBuffer>} the decoded result as a `Promise`\n   */\n\n\n  _createClass(Pool, [{\n    key: \"decode\",\n    value: function () {\n      var _decode = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fileDirectory, buffer) {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this._awaitingDecoder) {\n                  _context.next = 3;\n                  break;\n                }\n\n                _context.next = 3;\n                return this._awaitingDecoder;\n\n              case 3:\n                return _context.abrupt(\"return\", this.size === 0 ? getDecoder(fileDirectory).then(function (decoder) {\n                  return decoder.decode(fileDirectory, buffer);\n                }) : new Promise(function (resolve) {\n                  var worker = _this2.workers.find(function (candidate) {\n                    return candidate.idle;\n                  }) || _this2.workers[Math.floor(Math.random() * _this2.size)];\n\n                  worker.idle = false;\n                  var id = _this2.messageId++;\n\n                  var onMessage = function onMessage(e) {\n                    if (e.data.id === id) {\n                      worker.idle = true;\n                      resolve(e.data.decoded);\n                      worker.worker.removeEventListener('message', onMessage);\n                    }\n                  };\n\n                  worker.worker.addEventListener('message', onMessage);\n                  worker.worker.postMessage({\n                    fileDirectory: fileDirectory,\n                    buffer: buffer,\n                    id: id\n                  }, [buffer]);\n                }));\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function decode(_x, _x2) {\n        return _decode.apply(this, arguments);\n      }\n\n      return decode;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.workers) {\n        this.workers.forEach(function (worker) {\n          worker.worker.terminate();\n        });\n        this.workers = null;\n      }\n    }\n  }]);\n\n  return Pool;\n}();\n\nexport default Pool;","import { fromUrl, fromBlob, GeoTIFF, GeoTIFFImage, Pool, TypedArray } from \"geotiff\";\nimport colormap from \"colormap\";\n\nlet pool: Pool | null = null;\nconst getPool = () => {\n    if (!pool) pool = new Pool();\n    return pool;\n}\n\n/*\n\n```\nconst reader = new Reader({\n    files\n});\n```\nfile\n```\nreader.getRasters({\n    sources: [{\n        index: 0,\n        bands: [1, 3],\n        window: [10, 20, 40, 60];\n        nodata: 0;\n    }]\n})\n```\nfiles013[10, 20, 40, 60]\n\n```\nconst arr = reader.render({\n    mode: \"rgb\",\n    samples: [{\n        index: 0,\n        bands: [1, 3],\n        nodata: 0,\n    }, {\n        index: 1,\n        bands: [1],\n        nodata: -9999,\n    }],\n    width: 512,\n    height: 512,\n    bands: [{\n        index: 0, // samples01\n        min: 0,\n        max: 255,\n    }, {\n        index: 2, // samples11\n        min: -500,\n        max: 6000,\n    }, {\n        index: 1, // samples0\n        min: 0,\n        max: 255,\n    }]\n});\nconst canvas = document.createElement(\"canvas\");\nconst context = canvas.getContext(\"2d\");\ncontext.putImageData(arr, 0, 0);\n```\n\n\n*/\n\nexport interface Sample {\n    index: number;\n    bands: number[]; // 1-based\n    window?: number[];\n    nodata?: number;\n    resampleMethod?: string;\n}\n\nexport interface Layer {\n    index: number;\n    min?: number;\n    max?: number;\n}\n\nexport interface Source extends Sample {\n    width?: number;\n    height?: number;\n}\n\nexport interface RasterProps {\n    sources: Source[];\n}\n\nexport interface RasterValue {\n    data: TypedArray[];\n    width: number,\n    height: number,\n    nodata: number,\n}\n\nexport interface RenderProps {\n    mode: \"rgb\" | \"single\" | \"ndi\";\n    samples: Sample[];\n    width: number;\n    height: number;\n    layers?: Layer[];\n    alpha?: boolean;\n    cmap?: string;\n}\n\nconst clamp = (value: number, min: number, max: number): number => {\n    const gain = 255 / (max - min);\n    const bias = -min * gain;\n    return Math.min(Math.max(gain * value + bias, 0), 255);\n}\n\nexport class Reader {\n    private files: File[];\n    private urls: string[];\n    private tiffs: GeoTIFF[];\n\n    constructor(props: {\n        files?: File[];\n        urls?: string[];\n    }) {\n        if (!(props.urls && props.urls.length > 0) && !(props.files && props.files.length > 0))\n            throw new Error(\"urls or files is necessary.\");\n\n        this.files = [];\n        this.urls = [];\n        this.tiffs = [];\n        if (props.files && props.files.length > 0) {\n            this.files = props.files;\n        } else if (props.urls && props.urls.length > 0) {\n            this.urls = props.urls;\n        }\n    }\n\n    getCount() {\n        if (this.files.length > 0) return this.files.length;\n        if (this.urls.length > 0) return this.urls.length;\n        return 0;\n    }\n\n    async getTiffs(): Promise<GeoTIFF[]> {\n        if (this.tiffs.length > 0) return this.tiffs;\n        this.tiffs = this.files.length > 0 ?\n            await Promise.all(\n                this.files.map((file) => fromBlob(file))\n            ) : await Promise.all(\n                this.urls.map((url) => fromUrl(url))\n            );\n        return this.tiffs;\n    }\n\n    async getImage(fileIndex = 0, imageIndex = 0): Promise<GeoTIFFImage | null> {\n        const tiff = (await this.getTiffs())[fileIndex];\n        return await tiff.getImage(imageIndex) || null;\n    }\n\n    async getBandCount(fileIndex = 0, imageIndex = 0): Promise<number | null> {\n        const image = await this.getImage(fileIndex, imageIndex);\n        if (image)\n            return image.getBytesPerPixel() / (image.getBitsPerSample() / 8);\n        return null;\n    }\n\n    async getCode(fileIndex = 0, imageIndex = 0): Promise<string | null> {\n        const image = await this.getImage(fileIndex, imageIndex);\n        const geoKeys = image?.geoKeys;\n        if (geoKeys?.ProjectedCSTypeGeoKey) {\n            return \"EPSG:\" + geoKeys.ProjectedCSTypeGeoKey;\n        }\n        if (geoKeys?.GeographicTypeGeoKey) {\n            return \"EPSG:\" + geoKeys.GeographicTypeGeoKey;\n        }\n        return null;\n    }\n\n    async getUnit(fileIndex = 0, imageIndex = 0): Promise<string | null> {\n        const image = await this.getImage(fileIndex, imageIndex);\n        const geoKeys = image?.geoKeys;\n        switch (geoKeys?.ProjLinearUnitsGeoKey) {\n            case (9001): {\n                return \"m\"\n            }\n            case (9002): {\n                return \"ft\"\n            }\n            case (9003): {\n                return \"us-ft\"\n            }\n            case (9101): {\n                return \"radians\"\n            }\n            case (9102): {\n                return \"degrees\"\n            }\n        }\n        return null;\n    }\n\n    async getRasters(\n        props: RasterProps\n    ): Promise<RasterValue[]> {\n        const { sources } = props;\n        const tiffs = await this.getTiffs();\n        return await Promise.all(sources.map(async (source) => {\n            const tiff = tiffs[source.index];\n            if (!tiff) throw new Error(\"index is out of range.\");\n\n            let targetImage = await tiff.getImage(0);\n            const originWidth = targetImage.getWidth();\n            const originHeight = targetImage.getHeight();\n\n            const sourceWindow = Array.isArray(source.window) ? [...source.window] : [0, 0, originWidth, originHeight];\n            if (sourceWindow.length !== 4) throw new Error(\"window must be 4 length.\");\n\n            const dstWidth = source.width ?? sourceWindow[2] - sourceWindow[0];\n            const dstHeight = source.height ?? (sourceWindow[3] - sourceWindow[1]);\n            if (dstWidth < 1 || dstHeight < 1) throw new Error(\"dist size is too small.\");\n            const nodata = source.nodata || targetImage.getGDALNoData() || 0;\n            const imageCount = await tiff.getImageCount();\n\n            let dstWindow = sourceWindow;\n            for (let i = 1; i < imageCount; i++) {\n                const image = await tiff.getImage(i);\n                const imageWidth = image.getWidth();\n                const imageHeight = image.getHeight();\n                const window = [\n                    Math.floor(sourceWindow[0] * imageWidth / originWidth),\n                    Math.floor(sourceWindow[1] * imageHeight / originHeight),\n                    Math.floor(sourceWindow[2] * imageWidth / originWidth),\n                    Math.floor(sourceWindow[3] * imageHeight / originHeight),\n                ];\n                const sourceWidth = window[2] - window[0];\n                const sourceHeight = window[3] - window[1];\n                if (sourceWidth < dstWidth || sourceHeight < dstHeight) {\n                    break;\n                }\n                dstWindow = window;\n                targetImage = image;\n            }\n            const bandCount = targetImage.getBytesPerPixel() / (targetImage.getBitsPerSample() / 8);\n            if (!source.bands.every((band) => {\n                return 1 <= band && band <= bandCount\n            })) throw new Error(\"band's index is out of range.\");\n            const targetSamples = source.bands.map((v) => {\n                return v - 1;\n            });\n            const data = await targetImage.readRasters({\n                window: dstWindow,\n                width: dstWidth,\n                height: dstHeight,\n                samples: targetSamples,\n                fillValue: nodata,\n                resampleMethod: source.resampleMethod,\n                pool: getPool(),\n                interleave: false,\n            });\n            return {\n                data: (Array.isArray(data) ? data : [data]) as TypedArray[],\n                width: dstWidth,\n                height: dstHeight,\n                nodata,\n            }\n        }));\n    }\n\n    async render(\n        props: RenderProps\n    ): Promise<ImageData> {\n        const { samples, mode = \"rgb\", layers = [], alpha = true, cmap = \"jet\", width, height } = props;\n\n        let orders: number[] = [];\n        let colors: number[][] = [];\n        const mapping: [number, number][] = [];\n        samples.forEach((sample, i) => {\n            sample.bands.forEach((_, j) => {\n                mapping.push([i, j]);\n            });\n        });\n        switch (mode) {\n            case \"rgb\": {\n                orders = layers.length > 0 ? [...(layers || []).map((layer) => {\n                    return layer.index\n                })] : [0, 1, 2];\n                if (orders?.length !== 3) throw new Error(\"layers length must be 3 at rgb mode.\");\n                break;\n            }\n            case \"ndi\": {\n                orders = layers.length > 0 ? [...(layers || []).map((layer) => {\n                    return layer.index\n                })] : [0, 1];\n                if (orders?.length !== 2) throw new Error(\"layers length must be 2 at single mode.\");\n                colors = colormap({\n                    colormap: cmap,\n                    nshades: 256,\n                    format: \"rgba\",\n                    alpha: 1\n                })\n                break;\n            }\n            case \"single\": {\n                orders = layers.length > 0 ? [...(layers || []).map((layer) => {\n                    return layer.index\n                })] : [0];\n                if (orders?.length !== 1) throw new Error(\"layers length must be 1 at single mode.\");\n                colors = colormap({\n                    colormap: cmap,\n                    nshades: 256,\n                    format: \"rgba\",\n                    alpha: 1\n                })\n                break;\n            }\n            default: {\n                throw new Error(\"Unexpected mode.\")\n            }\n        }\n        orders.forEach((order) => {\n            if (order < 0 || mapping.length <= order) throw new Error(\"layers include out of range index.\")\n        });\n        const rasters = await this.getRasters({\n            sources: samples.map((sample) => {\n                return {\n                    width,\n                    height,\n                    ...sample\n                }\n            })\n        });\n        const length = width * height;\n        const data = new Uint8ClampedArray(length * 4);\n        let dstIndex = 0;\n        for (let i = 0; i < length; i++) {\n            let includeNodata = false;\n            switch (mode) {\n                case \"rgb\": {\n                    for (let j = 0; j < 3; j++) {\n                        const indexes = mapping[orders[j]];\n                        const raster = rasters[indexes[0]];\n                        const layer = indexes[1];\n                        let value = raster.data[layer][i];\n                        if (value === raster.nodata) includeNodata = true;\n\n                        const min = layers[j]?.min || 0;\n                        const max = layers[j]?.max || 255;\n                        value = clamp(value, min, max);\n                        data[dstIndex++] = Math.round(value);\n                    }\n                    break;\n                }\n                case \"ndi\": {\n                    const values = [];\n                    for (let j = 0; j < 2; j++) {\n                        const indexes = mapping[j];\n                        const raster = rasters[indexes[0]];\n                        const layer = indexes[1];\n                        let value = raster.data[layer][i];\n                        if (value === raster.nodata) includeNodata = true;\n\n                        const min = layers[0]?.min || 0;\n                        const max = layers[0]?.max || 255;\n                        value = clamp(value, min, max);\n                        values.push(value);\n                    }\n                    let normalized = 0;\n                    if (values[1] - values[0] !== 0) {\n                        normalized = (values[1] + values[0]) / (values[1] - values[0]);\n                    }\n                    normalized = clamp(normalized, -1, 1);\n\n                    const pixels = colors[Math.round(normalized)];\n                    data[dstIndex++] = pixels[0];\n                    data[dstIndex++] = pixels[1];\n                    data[dstIndex++] = pixels[2];\n                    break;\n                }\n                case \"single\": {\n                    const indexes = mapping[0];\n                    const raster = rasters[indexes[0]];\n                    const layer = indexes[1];\n                    let value = raster.data[layer][i];\n                    if (value === raster.nodata) includeNodata = true;\n\n                    const min = layers[0]?.min || 0;\n                    const max = layers[0]?.max || 255;\n                    value = clamp(value, min, max);\n                    const pixels = colors[Math.round(value)];\n                    data[dstIndex++] = pixels[0];\n                    data[dstIndex++] = pixels[1];\n                    data[dstIndex++] = pixels[2];\n                    break;\n                }\n            }\n            data[dstIndex++] = (alpha && includeNodata) ? 0 : 255;\n        }\n        return new ImageData(data, width, height);\n    };\n}","import SourceState from \"ol/source/State\";\nimport TileState from \"ol/TileState\";\nimport {\n    DEFAULT_MAX_ZOOM,\n    DEFAULT_TILE_SIZE\n} from \"ol/tilegrid/common\";\nimport {\n    getHeight,\n    getWidth,\n} from \"ol/extent\";\nimport { AttributionLike } from \"ol/source/Source\";\nimport ImageTile from \"ol/ImageTile\";\nimport Tile from \"ol/Tile\";\nimport TileImage from \"ol/source/TileImage\";\nimport TileGrid from \"ol/tilegrid/TileGrid\";\nimport { Projection, get as getProjection } from \"ol/proj\";\nimport { register } from \"ol/proj/proj4\";\nimport proj4 from \"proj4\";\nimport { utils } from \"geo4326\";\nimport { Reader, Layer } from \"./Reader\";\n\ninterface ResolutionsFromExtentOptions {\n    maxZoom?: number;\n    tileSize?: number;\n    maxResolution?: number;\n    sourceResolution?: number;\n}\nfunction resolutionsFromExtent(\n    extent: number[],\n    options?: ResolutionsFromExtentOptions\n): number[] {\n    const maxZoom = options?.maxZoom !== undefined ? options.maxZoom : DEFAULT_MAX_ZOOM;\n\n    const height = getHeight(extent);\n    const width = getWidth(extent);\n\n    const tileSize = options?.tileSize !== undefined ? options.tileSize : DEFAULT_TILE_SIZE;\n    const maxResolution =\n        options?.maxResolution && options.maxResolution > 0 ?\n            options.maxResolution :\n            Math.max(width / tileSize, height / tileSize);\n\n    const sourceResolution =\n        options?.sourceResolution && options.sourceResolution > 0 ? options.sourceResolution : 0;\n\n\n    const length = maxZoom + 1;\n    const resolutions: number[] = [];\n    for (let z = 0; z < length; ++z) {\n        const resolution = maxResolution / Math.pow(2, z);\n        if (resolution < sourceResolution) break;\n        resolutions.push(resolution);\n    }\n    return resolutions;\n}\n\nfunction getWindow(gridExtent: number[], z: number, x: number, y: number,): number[] {\n    const size = Math.max(gridExtent[2] - gridExtent[0], gridExtent[3] - gridExtent[1]) / (2 ** z);\n    const left = gridExtent[0] + x * size;\n    const top = gridExtent[3] - y * size;\n    const right = left + size;\n    const bottom = top - size;\n\n    return [left, top, right, bottom]\n}\n\ninterface SampleConfig {\n    index: number;\n    bands: number[]; // 1-based\n    nodata?: number;\n}\n\nexport interface SourceConfig {\n    index: number;\n    band: number; // 1-based\n    nodata?: number;\n    min?: number;\n    max?: number;\n}\n\nexport type RegionalProps = {\n    urls?: string[];\n    files?: File[];\n    sources: SourceConfig[];\n    minZoom?: number;\n    maxZoom?: number;\n    tileSize?: number;\n    attributions?: AttributionLike;\n    attributionsCollapsible?: boolean;\n    cacheSize?: number;\n    crossOrigin?: string | null;\n    interpolate?: boolean;\n    opaque?: boolean;\n    reprojectionErrorThreshold?: number;\n    tilePixelRatio?: number;\n    wrapX?: boolean;\n    transition?: number;\n};\n\nexport class Regional extends TileImage {\n    private bbox_: number[] | null;\n    private reader_: Reader;\n    private width_: number;\n    private height_: number;\n    private samples_: SampleConfig[];\n    private layers_: Layer[];\n    constructor(userOptions: RegionalProps) {\n        const options = userOptions || {};\n\n        const tileSize = options.tileSize ? options.tileSize : DEFAULT_TILE_SIZE;\n        const interpolate =\n            options.interpolate !== undefined ? options.interpolate : true;\n\n        const tileLoadFunction =\n            (imageTile: Tile, coordString: string) => {\n                const [z, x, y] = coordString.split(\",\").map(Number);\n                const canvas = document.createElement(\"canvas\");\n                const context = canvas.getContext(\"2d\");\n                if (!this.bbox_ || !context) {\n                    imageTile.setState(TileState.ERROR);\n                    return;\n                }\n                canvas.width = tileSize;\n                canvas.height = tileSize;\n\n                const window = getWindow(this.bbox_, z, x, y);\n                const tileLeft = window[0];\n                const tileRight = window[2];\n                const tileTop = window[1];\n                const tileBottom = window[3];\n                const [\n                    imageExtentLeft, imageExtentBottom, imageExtentRight, imageExtentTop\n                ] = this.bbox_;\n\n                const sourcePerPixel = [(imageExtentRight - imageExtentLeft) / this.width_, (imageExtentTop - imageExtentBottom) / this.height_];\n                const tilePerPixel = [(tileRight - tileLeft) / tileSize, (tileTop - tileBottom) / tileSize];\n                const leftBottom = [Math.max(tileLeft, imageExtentLeft), Math.max(imageExtentBottom, tileBottom)];\n                const rightTop = [Math.min(tileRight, imageExtentRight), Math.min(imageExtentTop, tileTop)];\n                const tileRect = [\n                    Math.round((leftBottom[0] - tileLeft) / tilePerPixel[0]), Math.round((tileTop - rightTop[1]) / tilePerPixel[1]),\n                    Math.round((rightTop[0] - tileLeft) / tilePerPixel[0]), Math.round((tileTop - leftBottom[1]) / tilePerPixel[1])\n                ];\n                const sourceRect = [\n                    Math.round((leftBottom[0] - imageExtentLeft) / sourcePerPixel[0]), Math.round((imageExtentTop - rightTop[1]) / sourcePerPixel[1]),\n                    Math.round((rightTop[0] - imageExtentLeft) / sourcePerPixel[0]), Math.round((imageExtentTop - leftBottom[1]) / sourcePerPixel[1])\n                ];\n\n                const sourceRectSize = [sourceRect[2] - sourceRect[0], sourceRect[3] - sourceRect[1]];\n                const tileRectSize = [tileRect[2] - tileRect[0], tileRect[3] - tileRect[1]];\n\n                if (Math.min(...sourceRectSize, ...tileRectSize) <= 0) {\n                    imageTile.setState(TileState.EMPTY);\n                    return\n                }\n                (async () => {\n                    const image = await this.reader_.render({\n                        mode: \"rgb\",\n                        samples: this.samples_.map((sample) => {\n                            return {\n                                window: sourceRect,\n                                ...sample\n                            }\n                        }),\n                        width: tileSize,\n                        height: tileSize,\n                        layers: this.layers_\n                    });\n                    context.putImageData(image, 0, 0);\n                    const src = canvas.toDataURL();\n                    ((imageTile as ImageTile).getImage() as HTMLImageElement).src = src;\n\n                })();\n            };\n\n        super({\n            state: SourceState.LOADING,\n            attributions: options.attributions,\n            cacheSize: options.cacheSize,\n            crossOrigin: options.crossOrigin,\n            interpolate: interpolate,\n            opaque: options.opaque,\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            tileLoadFunction,\n            tilePixelRatio: options.tilePixelRatio,\n            url: \"{z},{x},{y}\",\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n            transition: options.transition,\n            attributionsCollapsible: options.attributionsCollapsible,\n        });\n        this.bbox_ = null;\n        this.width_ = 0;\n        this.height_ = 0;\n\n        const sources = options.sources || [];\n\n        const samples: SampleConfig[] = [];\n        const layers: Layer[] = [];\n        const mapping: [number, number, (number | undefined), (number | undefined)][] = [];\n        sources.forEach(({\n            index, band, nodata, min, max\n        }) => {\n            const existed = samples.findIndex((sample) => {\n                return sample.index === index\n            });\n            if (existed >= 0 && samples[existed].nodata === nodata) {\n                mapping.push([existed, samples[existed].bands.length, min, max]);\n                samples[existed].bands.push(band);\n            } else {\n                mapping.push([samples.length, 0, min, max]);\n                samples.push({\n                    index,\n                    bands: [band],\n                    nodata,\n                });\n            }\n        });\n        mapping.forEach(([sampleIndex, bandIndex, min, max]) => {\n            let index = 0;\n            for (let i = 0; i < sampleIndex; i++) {\n                index += samples[i].bands.length;\n            }\n            index += bandIndex;\n\n            layers.push({\n                index, min, max\n            });\n        });\n\n        this.samples_ = samples;\n        this.layers_ = layers;\n        this.reader_ = new Reader({ files: options.files, urls: options.urls });\n\n        this.setup(this.reader_, this.samples_, {\n            tileSize,\n            minZoom: options.minZoom,\n            maxZoom: options.maxZoom\n        })\n    }\n\n    getBoundingBox(): number[] | null {\n        return this.bbox_;\n    }\n\n    private async setup(reader: Reader, samples: SampleConfig[], options: {\n        tileSize: number,\n        minZoom?: number,\n        maxZoom?: number,\n    }) {\n        let code: string | null = null;\n        let unit: string | null = null;\n        let imageWidth = 0;\n        let imageHeight = 0;\n        let bbox: number[] = []\n        for (let i = 0; i < samples.length; i++) {\n            if (i === 0) {\n                code = await reader.getCode(samples[0].index);\n                unit = await reader.getUnit(samples[0].index);\n                const image = await reader.getImage(samples[0].index);\n                bbox = image?.getBoundingBox() || [];\n                imageWidth = image?.getWidth() || 1;\n                imageHeight = image?.getHeight() || 1;\n            }\n            else {\n                if (code !== await reader.getCode(samples[i].index)) {\n                    this.setState(SourceState.ERROR);\n                    throw new Error(\"Unmatched code.\");\n                }\n                if (unit !== await reader.getUnit(samples[i].index)) {\n                    this.setState(SourceState.ERROR);\n                    throw new Error(\"Unmatched unit.\");\n                }\n\n                const image = await reader.getImage(samples[i].index);\n                const currentBbox = image?.getBoundingBox() || [];\n                bbox.forEach((v, i) => {\n                    if (v !== currentBbox[i]) {\n                        this.setState(SourceState.ERROR);\n                        throw new Error(\"Unmatched coordinates.\");\n                    }\n                })\n                if (imageWidth !== image?.getWidth()) {\n                    this.setState(SourceState.ERROR);\n                    throw new Error(\"Unmatched width.\");\n                }\n                if (imageHeight !== image?.getHeight()) {\n                    this.setState(SourceState.ERROR);\n                    throw new Error(\"Unmatched height.\");\n                }\n            }\n        }\n        this.width_ = imageWidth;\n        this.height_ = imageHeight;\n\n        let projection = code ? getProjection(code) : null;\n        if (!projection) {\n            if (code) {\n                try {\n                    const crs = utils.getCrs(code);\n                    proj4.defs(code, crs);\n                    register(proj4);\n                    projection = getProjection(code);\n                } catch {\n                    if (unit) {\n                        projection = new Projection({\n                            code: code,\n                            units: unit,\n                        });\n                    }\n                }\n            }\n        }\n        if (!projection) {\n            this.setState(SourceState.ERROR);\n            throw new Error(\"Unsupported projection.\");\n        }\n        this.projection = projection;\n        this.bbox_ = bbox;\n        const bboxWidth = this.bbox_[2] - this.bbox_[0];\n        const bboxHeight = this.bbox_[3] - this.bbox_[1];\n        if (\n            bboxWidth <= 0 || bboxHeight <= 0\n        ) {\n            this.setState(SourceState.ERROR);\n            throw new Error(\"Invalid extent.\");\n        }\n\n        const sourceResolution = Math.max(\n            bboxWidth / imageWidth,\n            bboxHeight / imageHeight\n        );\n        const extentWidth = bboxWidth;\n        const extentHeight = bboxHeight;\n        const maxResolution = Math.max(extentWidth, extentHeight) / options.tileSize;\n        const tileGrid = new TileGrid({\n            extent: this.bbox_,\n            tileSize: options.tileSize,\n            minZoom: options.minZoom,\n            resolutions: resolutionsFromExtent(this.bbox_, {\n                maxZoom: options.maxZoom,\n                tileSize: options.tileSize,\n                maxResolution,\n                sourceResolution,\n            }),\n        });\n        if (!tileGrid) {\n            this.setState(SourceState.ERROR);\n            throw new Error(\"Unexpected Error.\");\n        }\n        this.tileGrid = tileGrid;\n        this.setState(SourceState.READY);\n    }\n}","import * as React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport {\n  useForm,\n  useFieldArray,\n  SubmitHandler,\n  Controller,\n} from \"react-hook-form\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport {\n  Container,\n  Typography,\n  Stack,\n  Grid,\n  TextField,\n  Button,\n  IconButton,\n  Tooltip,\n  Select,\n  InputLabel,\n  FormControl,\n  MenuItem,\n  FormHelperText,\n} from \"@mui/material\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport { styled } from \"@mui/system\";\n\n// import { toSize } from \"ol/size\";\n// import ImageTile from \"ol/ImageTile\";\n// import Tile from \"ol/Tile\";\n// import XYZ from \"ol/source/XYZ\";\n// import TileState from \"ol/TileState\";\nimport { transformExtent } from \"ol/proj\"; //get as getProjection, Projection,\n// import { register as olRegister } from \"ol/proj/proj4\";\nimport proj4 from \"proj4\";\n// import { utils } from \"geo4326\";\nimport SourceState from \"ol/source/State\";\nimport { WebGLTile } from \"ol/layer\";\n\nimport { useOl } from \"~/hooks/useOl\";\nimport { useDnDSort } from \"~/hooks/useDnDSort\";\nimport { Regional } from \"~/scripts/GeotiffGrid/Regional\";\n\n// import * as CustomGeoTIFFSource from \"~/scripts/CustomGeoTIFF\";\n\nconst EllipsisWrapper = styled(\"div\")({\n  overflow: \"hidden\",\n});\n\nconst EllipsisTypography = styled(Typography)({\n  overflow: \"hidden\",\n  whiteSpace: \"nowrap\",\n  textOverflow: \"ellipsis\",\n});\n\nconst LayerName = styled(EllipsisWrapper)({\n  flex: \"1 1 auto\",\n});\n\nconst LayerButton = styled(\"div\")({\n  flex: \"0 0 auto\",\n});\n\nconst StyledUl = styled(\"ul\")({\n  listStyle: \"none\",\n  margin: 0,\n  padding: 0,\n  \"& > li\": {\n    marginTop: \"5px\",\n    \"&:firstChild\": {\n      marginTop: 0,\n    },\n  },\n});\n\ntype FormError = \"SourceNumber\" | \"SourceError\" | \"Duplicate\";\n\ninterface SourceConf {\n  file: string;\n  nodata: number;\n  band: number;\n  min: number;\n  max: number;\n}\n\ninterface LayerConf {\n  layer: WebGLTile;\n  sources: SourceConf[];\n  id: string;\n}\n\nconst defaultSourcesValue = {\n  index: \"\",\n  band: \"1\",\n  nodata: \"0\",\n  min: \"0\",\n  max: \"255\",\n};\n\ninterface Input {\n  sources: {\n    index: string;\n    band: string;\n    nodata: string;\n    min: string;\n    max: string;\n  }[];\n}\n\nconst Coordinates = styled(\"div\")({\n  position: \"absolute\",\n  top: 0,\n  left: 0,\n  padding: \"2px 4px\",\n  fontSize: 10,\n  pointerEvents: \"none\",\n});\n\nconst FileInputWrapper = styled(\"dl\")({\n  margin: \"0 0 50px\",\n  \"&>dt\": {\n    fontSize: \"14px\",\n    margin: \"0 0 5px\",\n  },\n  \"&>dd\": {\n    margin: 0,\n  },\n});\n\nconst Config = styled(\"div\")({\n  marginBottom: \"20px\",\n});\n\nconst Buttons = styled(\"ul\")({\n  listStyle: \"none\",\n  margin: 0,\n  padding: 0,\n  display: \"flex\",\n  \"&>*\": {\n    marginRight: \"10px\",\n  },\n});\n\nconst LayerDetail = styled(\"div\")({\n  marginLeft: \"20px\",\n});\n\nconst Viewer = (): React.ReactElement => {\n  const ol = useOl();\n  const wrapperRef = React.useRef<HTMLDivElement | null>(null);\n  const positionRef = React.useRef<HTMLDivElement | null>(null);\n  const [layerConfs, setLayerConfs] = React.useState<LayerConf[]>([]);\n  const [filelist, setFilelist] = React.useState<File[]>([]);\n  const [error, setError] = React.useState<FormError | null>(null);\n  const [loading, setLoading] = React.useState<boolean>();\n\n  const layerList = useDnDSort<LayerConf>({\n    defaultItems: [],\n    mode: \"topbottom\",\n    drop: (draged, hovered) => {\n      if (draged.index !== hovered.index)\n        setLayerConfs(prevList => {\n          if (\n            hovered.index < 0 ||\n            draged.index < 0 ||\n            draged.index > prevList.length - 1 ||\n            hovered.index > prevList.length - 1\n          ) {\n            return prevList;\n          }\n\n          const nextList = [...prevList];\n          const target = nextList[draged.index];\n          nextList.splice(draged.index, 1);\n          nextList.splice(hovered.index, 0, target);\n          return nextList;\n        });\n    },\n  });\n\n  const { control, handleSubmit, reset } = useForm<Input>({\n    mode: \"onSubmit\",\n    criteriaMode: \"all\",\n    defaultValues: {\n      sources: [defaultSourcesValue],\n    },\n  });\n\n  const { fields, append, remove } = useFieldArray({\n    name: \"sources\",\n    control,\n  });\n\n  const onSubmit: SubmitHandler<Input> = React.useCallback(\n    data => {\n      if (![1, 3].includes(data.sources.length)) {\n        setError(\"SourceNumber\");\n        return;\n      }\n      let id = \"\";\n      const sourceConfigs: SourceConf[] = [];\n      for (let i = 0; i < data.sources.length; i++) {\n        const source = data.sources[i];\n        const addedId = filelist[Number(source.index)].name;\n\n        if (addedId.length > 0) {\n          id +=\n            addedId +\n            \"_\" +\n            source.band +\n            \"_\" +\n            source.min +\n            \"_\" +\n            source.max +\n            \"_\" +\n            source.nodata;\n        }\n\n        sourceConfigs.push({\n          file: filelist[Number(source.index)].name || \"\",\n          min: Number(source.min),\n          max: Number(source.max),\n          band: Number(source.band),\n          nodata: Number(source.nodata),\n        });\n      }\n      const index = layerConfs.findIndex(layerConf => {\n        return id === layerConf.id;\n      });\n      if (index >= 0) {\n        setError(\"Duplicate\");\n        return;\n      }\n      if (!ol.map) return;\n      const sources =\n        data.sources.length === 3\n          ? [...data.sources]\n          : [data.sources[0], data.sources[0], data.sources[0]];\n\n      setLoading(true);\n      const source = new Regional({\n        files: filelist,\n        sources: sources.map(source => {\n          return {\n            index: Number(source.index),\n            min: Number(source.min),\n            max: Number(source.max),\n            band: Number(source.band),\n            nodata: Number(source.nodata),\n          };\n        }),\n      });\n      const layer = new WebGLTile({\n        source,\n      });\n      ol.map.addLayer(layer);\n      setLayerConfs(layerConfs => {\n        return [\n          ...layerConfs,\n          {\n            id,\n            layer,\n            sources: sourceConfigs,\n          },\n        ];\n      });\n\n      const fitting = () => {\n        const originExtent = source.getBoundingBox();\n        const code = source.getProjection().getCode();\n        if (ol.map && originExtent && code) {\n          let extent = originExtent;\n          if (code !== \"EPSG:3857\") {\n            const transformed = transformExtent(\n              originExtent,\n              code,\n              \"EPSG:3857\"\n            );\n            if (transformed[0] > transformed[2])\n              transformed[2] += proj4(code, \"EPSG:3857\", [180, 0])[0] * 2;\n            extent = transformed;\n          }\n          ol.map.getView().fit(extent, {\n            padding: [40, 20, 40, 20],\n            maxZoom: 20,\n          });\n        }\n      };\n\n      if (source.getState() === SourceState.READY) {\n        fitting();\n        reset();\n        setFilelist([]);\n        setLoading(false);\n      } else {\n        const sourceListener = () => {\n          const sourceState = source.getState();\n          if (sourceState !== SourceState.LOADING) {\n            source.removeEventListener(\"change\", sourceListener);\n\n            if (sourceState === SourceState.READY) {\n              fitting();\n              reset();\n              setFilelist([]);\n            }\n            if (sourceState === SourceState.ERROR) {\n              setError(\"SourceError\");\n            }\n            setLoading(false);\n          }\n        };\n        source.addEventListener(\"change\", sourceListener);\n      }\n      // const source = new CustomGeoTIFFSource.default({\n      //   sources: sources.map(source => {\n      //     return {\n      //       blob: filelist[Number(source.index)],\n      //       min: Number(source.min),\n      //       max: Number(source.max),\n      //       nodata: Number(source.nodata),\n      //       bands: [Number(source.band)],\n      //     };\n      //   }) as unknown as CustomGeoTIFFSource.SourceInfo[],\n      // });\n\n      // (async () => {\n      // if (!ol.map) return;\n      // const sourceView = await source.getView();\n      // const sourceProjection = sourceView?.projection;\n      // if (!(sourceProjection instanceof Projection)) {\n      //   return;\n      // }\n      // const code = sourceProjection.getCode();\n\n      // if (!getProjection(code)) {\n      //   try {\n      //     const crs = utils.getCrs(code);\n      //     proj4.defs(code, crs);\n      //   } catch {\n      //     return;\n      //   }\n      //   olRegister(proj4);\n      // }\n      // const tileGrid = source.getTileGrid();\n      // if (tileGrid) {\n      //   const imageSource = new XYZ({\n      //     tileGrid: tileGrid,\n      //     url: \"{z},{x},{y}\",\n      //     interpolate: false,\n      //     tileLoadFunction: function (imageTile: Tile, coordString: string) {\n      //       const coord = coordString.split(\",\").map(Number);\n      //       const tile = source.getTile(\n      //         coord[0],\n      //         coord[1],\n      //         coord[2],\n      //         1,\n      //         sourceProjection\n      //       );\n\n      //       const setImage = function () {\n      //         const tilesize = toSize(tileGrid.getTileSize(coord[0]));\n      //         const canvas = document.createElement(\"canvas\");\n      //         canvas.width = tilesize[0];\n      //         canvas.height = tilesize[1];\n      //         const context = canvas.getContext(\"2d\");\n      //         if (!context) return;\n      //         const imgData = context.getImageData(\n      //           0,\n      //           0,\n      //           canvas.width,\n      //           canvas.height\n      //         );\n\n      //         const pixels = imgData.data;\n      //         const data = tile.getData();\n      //         if (data instanceof DataView) return;\n      //         const l = data.length;\n      //         for (let i = 0; i < l; i++) {\n      //           pixels[i] = data[i];\n      //         }\n      //         context.putImageData(imgData, 0, 0);\n      //         ((imageTile as ImageTile).getImage() as HTMLImageElement).src =\n      //           canvas.toDataURL();\n      //       };\n\n      //       const tileState = tile.getState();\n      //       if (tileState === TileState.LOADED) {\n      //         setImage();\n      //       } else {\n      //         const tileListener = () => {\n      //           const tileState = tile.getState();\n      //           if (tileState !== TileState.LOADING) {\n      //             tile.removeEventListener(\"change\", tileListener);\n\n      //             if (tileState === TileState.LOADED) {\n      //               setImage();\n      //             }\n      //           }\n      //         };\n      //         tile.addEventListener(\"change\", tileListener);\n      //         tile.load();\n      //       }\n      //     },\n      //     projection: sourceProjection,\n      //   });\n\n      //   const layer = new WebGLTile({\n      //     source: imageSource,\n      //   });\n      //   ol.map.addLayer(layer);\n      //   setLayerConfs(layerConfs => {\n      //     return [\n      //       ...layerConfs,\n      //       {\n      //         id,\n      //         layer,\n      //         error: null,\n      //       },\n      //     ];\n      //   });\n\n      //   const originExtent = sourceView.extent;\n      //   if (originExtent) {\n      //     let extent = originExtent;\n      //     if (code !== \"EPSG:3857\") {\n      //       const transformed = transformExtent(\n      //         originExtent,\n      //         code,\n      //         \"EPSG:3857\"\n      //       );\n\n      //       if (transformed[0] > transformed[2])\n      //         transformed[2] += proj4(code, \"EPSG:3857\", [180, 0])[0] * 2;\n\n      //       extent = transformed;\n      //     }\n      //     ol.map.getView().fit(extent, {\n      //       padding: [40, 20, 40, 20],\n      //       maxZoom: 20,\n      //     });\n      //   }\n      // }\n      // })();\n    },\n    [filelist, ol.map, layerConfs, reset]\n  );\n\n  const resetList = layerList.reset;\n  React.useEffect(() => {\n    let zIndex = 0;\n    layerConfs.forEach(({ layer }) => {\n      layer.setZIndex(zIndex++);\n    });\n\n    resetList([...layerConfs]);\n  }, [layerConfs, resetList]);\n  const removeLayer = React.useCallback(\n    (id: string) => {\n      setLayerConfs(layerConfs => {\n        const newLayerConfs = [...layerConfs];\n        const index = newLayerConfs.findIndex(layerConf => {\n          return id === layerConf.id;\n        });\n        const target = newLayerConfs[index];\n        if (target) {\n          if (ol.map) {\n            ol.map.removeLayer(target.layer);\n\n            newLayerConfs.splice(index, 1);\n            return newLayerConfs;\n          }\n        }\n        return newLayerConfs;\n      });\n    },\n    [ol.map]\n  );\n\n  return (\n    <>\n      <CssBaseline />\n      <Helmet>\n        <title>Display Local GeoTIFF</title>\n        <meta name=\"description\" content=\"Display Remote GeoTIFF on map.\" />\n        <link\n          rel=\"canonical\"\n          href=\"https://yonda-yonda.github.io/exmap/localgeotiff\"\n        />\n        <link\n          rel=\"icon\"\n          type=\"image/x-icon\"\n          href=\"https://github.githubassets.com/favicon.ico\"\n        />\n        <link\n          rel=\"stylesheet\"\n          href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap\"\n        />\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:title\" content=\"Display Local GeoTIFF\" />\n        <meta\n          name=\"twitter:description\"\n          content=\"GeoTIFF\"\n        />\n        <meta\n          property=\"og:url\"\n          content=\"https://yonda-yonda.github.io/exmap/localgeotiff\"\n        />\n        <meta\n          name=\"twitter:image\"\n          content=\"https://yonda-yonda.github.io/exmap/image/twitter_localgeotiff.png\"\n        />\n      </Helmet>\n      <Container>\n        <Typography variant=\"h2\" component=\"h1\">\n          Display Local GeoTIFF\n        </Typography>\n        <Stack my={4} spacing={4}>\n          <div>\n            <Grid container spacing={2}>\n              <Grid item xs={9}>\n                <div style={{ position: \"relative\" }} ref={wrapperRef}>\n                  <div\n                    ref={ol.ref}\n                    style={{\n                      width: \"100%\",\n                      height: \"340px\",\n                    }}\n                  />\n                  <Coordinates ref={positionRef}></Coordinates>\n                </div>\n              </Grid>\n              <Grid item xs={3}>\n                {layerConfs.length > 0 ? (\n                  <StyledUl>\n                    {layerList.items.map(item => {\n                      return (\n                        <li key={item.key} ref={item.ref} {...item.trigger}>\n                          <Stack\n                            direction=\"row\"\n                            spacing={1}\n                            justifyContent=\"space-between\"\n                            alignItems=\"center\"\n                          >\n                            <LayerName>\n                              <Tooltip\n                                title={\n                                  <div>\n                                    {item.value.sources.map((source, i) => {\n                                      return (\n                                        <Typography\n                                          key={i}\n                                          variant=\"caption\"\n                                          display=\"block\"\n                                          {...item.propagation}\n                                        >\n                                          {source.file}\n                                          <LayerDetail>\n                                            band: {source.band}\n                                            <br />\n                                            range:{\" \"}\n                                            {`${source.min} to ${source.max}`}\n                                            <br />\n                                            nodata: {source.nodata}\n                                          </LayerDetail>\n                                        </Typography>\n                                      );\n                                    })}\n                                  </div>\n                                }\n                                arrow\n                                placement=\"left\"\n                              >\n                                <EllipsisTypography variant=\"body2\">\n                                  {Array.from(\n                                    new Set(\n                                      item.value.sources.map(source => {\n                                        return source.file;\n                                      })\n                                    )\n                                  ).reduce((prev, name) => {\n                                    return (\n                                      prev + (prev.length > 0 ? \",\" : \"\") + name\n                                    );\n                                  }, \"\")}\n                                </EllipsisTypography>\n                              </Tooltip>\n                            </LayerName>\n                            <LayerButton {...item.propagation}>\n                              <Button\n                                size=\"small\"\n                                variant=\"outlined\"\n                                onClick={() => {\n                                  removeLayer(item.value.id);\n                                }}\n                              >\n                                REMOVE\n                              </Button>\n                            </LayerButton>\n                          </Stack>\n                        </li>\n                      );\n                    })}\n                  </StyledUl>\n                ) : (\n                  <Typography>Nothing to display.</Typography>\n                )}\n              </Grid>\n            </Grid>\n          </div>\n        </Stack>\n\n        <Stack my={4} spacing={4}>\n          <form onSubmit={handleSubmit(onSubmit)}>\n            <FileInputWrapper>\n              <dt>Read File</dt>\n              <dd>\n                <input\n                  name=\"file\"\n                  type=\"file\"\n                  accept=\".tiff,image/tiff\"\n                  onChange={e => {\n                    if (e.target.files) {\n                      const file = e.target.files[0] || undefined;\n                      if (file) {\n                        setFilelist(prev => {\n                          return [...prev, file];\n                        });\n                        e.target.value = \"\";\n                      }\n                    }\n                  }}\n                  disabled={filelist.length > 2 || loading || loading}\n                />\n              </dd>\n            </FileInputWrapper>\n            {fields.map((field, index) => {\n              return (\n                <Config key={field.id}>\n                  <Controller\n                    control={control}\n                    name={`sources.${index}.index`}\n                    render={({ field, fieldState: { invalid, error } }) => (\n                      <FormControl error={invalid} fullWidth size=\"small\">\n                        <InputLabel>File</InputLabel>\n                        <Select\n                          {...field}\n                          disabled={filelist.length < 1 || loading}\n                        >\n                          {filelist.map((f, i) => {\n                            return (\n                              <MenuItem value={String(i)} key={i}>\n                                {f.name}\n                              </MenuItem>\n                            );\n                          })}\n                        </Select>\n\n                        {error?.type === \"required\" && (\n                          <FormHelperText>\n                            Required. <br />\n                            \n                          </FormHelperText>\n                        )}\n                      </FormControl>\n                    )}\n                    rules={{\n                      required: true,\n                    }}\n                  />\n                  <Stack direction=\"row\" spacing={2} sx={{ mt: 2, mb: 1 }}>\n                    <Controller\n                      control={control}\n                      name={`sources.${index}.band`}\n                      render={({ field, fieldState: { invalid, error } }) => (\n                        <FormControl\n                          component=\"fieldset\"\n                          error={invalid}\n                          fullWidth\n                        >\n                          <TextField\n                            {...field}\n                            label=\"band\"\n                            size=\"small\"\n                            error={invalid}\n                            disabled={loading}\n                            placeholder=\"1\"\n                          />\n                          {error?.type === \"required\" && (\n                            <FormHelperText>\n                              Required. <br />\n                              \n                            </FormHelperText>\n                          )}\n                          {error?.type === \"pattern\" && (\n                            <FormHelperText>\n                              must be a number. <br />\n                              \n                            </FormHelperText>\n                          )}\n                        </FormControl>\n                      )}\n                      rules={{\n                        required: true,\n                        pattern: /^((\\+|-){0,1}[1-9]\\d*|0)(\\.\\d+)?$/,\n                      }}\n                    />\n                    <Controller\n                      control={control}\n                      name={`sources.${index}.nodata`}\n                      render={({ field, fieldState: { invalid, error } }) => (\n                        <FormControl\n                          component=\"fieldset\"\n                          error={invalid}\n                          disabled={loading}\n                          fullWidth\n                        >\n                          <TextField\n                            {...field}\n                            label=\"nodata\"\n                            size=\"small\"\n                            error={invalid}\n                          />\n                          {error?.type === \"required\" && (\n                            <FormHelperText>\n                              Required. <br />\n                              \n                            </FormHelperText>\n                          )}\n                          {error?.type === \"pattern\" && (\n                            <FormHelperText>\n                              must be a number. <br />\n                              \n                            </FormHelperText>\n                          )}\n                        </FormControl>\n                      )}\n                      rules={{\n                        required: true,\n                        pattern: /^((\\+|-){0,1}[1-9]\\d*|0)(\\.\\d+)?$/,\n                      }}\n                    />\n                    <Controller\n                      control={control}\n                      name={`sources.${index}.min`}\n                      render={({ field, fieldState: { invalid, error } }) => (\n                        <FormControl\n                          component=\"fieldset\"\n                          error={invalid}\n                          disabled={loading}\n                          fullWidth\n                        >\n                          <TextField\n                            {...field}\n                            label=\"min\"\n                            size=\"small\"\n                            error={invalid}\n                          />\n                          {error?.type === \"required\" && (\n                            <FormHelperText>\n                              Required. <br />\n                              \n                            </FormHelperText>\n                          )}\n                          {error?.type === \"pattern\" && (\n                            <FormHelperText>\n                              must be a number. <br />\n                              \n                            </FormHelperText>\n                          )}\n                        </FormControl>\n                      )}\n                      rules={{\n                        required: true,\n                        pattern: /^((\\+|-){0,1}[1-9]\\d*|0)(\\.\\d+)?$/,\n                      }}\n                    />\n                    <Controller\n                      control={control}\n                      name={`sources.${index}.max`}\n                      render={({ field, fieldState: { invalid, error } }) => (\n                        <FormControl\n                          component=\"fieldset\"\n                          error={invalid}\n                          disabled={loading}\n                          fullWidth\n                        >\n                          <TextField\n                            {...field}\n                            label=\"max\"\n                            size=\"small\"\n                            error={invalid}\n                          />\n                          {error?.type === \"required\" && (\n                            <FormHelperText>\n                              Required. <br />\n                              \n                            </FormHelperText>\n                          )}\n                          {error?.type === \"pattern\" && (\n                            <FormHelperText>\n                              must be a number. <br />\n                              \n                            </FormHelperText>\n                          )}\n                        </FormControl>\n                      )}\n                      rules={{\n                        required: true,\n                        pattern: /^((\\+|-){0,1}[1-9]\\d*|0)(\\.\\d+)?$/,\n                      }}\n                    />\n                  </Stack>\n\n                  <div>\n                    {index > 0 && (\n                      <IconButton\n                        color=\"primary\"\n                        size=\"small\"\n                        aria-label=\"Delete\"\n                        component=\"span\"\n                        disabled={loading}\n                        onClick={() => {\n                          remove(index);\n                        }}\n                      >\n                        <DeleteIcon />\n                      </IconButton>\n                    )}\n                    {index === fields.length - 1 && index < 2 && (\n                      <IconButton\n                        color=\"primary\"\n                        size=\"small\"\n                        aria-label=\"Add\"\n                        component=\"span\"\n                        disabled={loading}\n                        onClick={() => {\n                          append(defaultSourcesValue);\n                        }}\n                      >\n                        <AddIcon />\n                      </IconButton>\n                    )}\n                  </div>\n                </Config>\n              );\n            })}\n            <FormControl error={!!error} sx={{ mt: 3 }}>\n              <Buttons>\n                <li>\n                  <Button\n                    variant=\"contained\"\n                    type=\"submit\"\n                    disabled={filelist.length < 1 || loading}\n                    onClick={() => {\n                      setError(null);\n                    }}\n                  >\n                    Add Layer\n                  </Button>\n                </li>\n                <li>\n                  <Button\n                    variant=\"outlined\"\n                    type=\"button\"\n                    onClick={() => {\n                      setFilelist([]);\n                      reset();\n                    }}\n                    disabled={filelist.length < 1 || loading}\n                  >\n                    Clear\n                  </Button>\n                </li>\n              </Buttons>\n              {error === \"SourceNumber\" && (\n                <FormHelperText sx={{ ml: 0 }}>\n                  Unexpected number of sources. <br />\n                  \n                </FormHelperText>\n              )}\n              {error === \"SourceError\" && (\n                <FormHelperText sx={{ ml: 0 }}>\n                  Catched source error. <br />\n                  \n                </FormHelperText>\n              )}\n              {error === \"Duplicate\" && (\n                <FormHelperText sx={{ ml: 0 }}>\n                  Duplicate Layer. <br />\n                  \n                </FormHelperText>\n              )}\n            </FormControl>\n          </form>\n        </Stack>\n      </Container>\n    </>\n  );\n};\nexport default Viewer;\n"],"names":["module","exports","colorScale","lerp","rgb2float","rgba","rgb2hex","dig","hex","i","toString","substr","length","rgbaStr","join","spec","indicies","fromrgba","torgba","nsteps","cmap","colormap","format","nshades","alpha","toLowerCase","Error","Array","isArray","slice","map","c","Math","round","index","min","max","steps","rgb","colors","j","amt","push","concat","fieldTagNames","fieldTags","key","hasOwnProperty","parseInt","arrayFields","BitsPerSample","ExtraSamples","SampleFormat","StripByteCounts","StripOffsets","StripRowCounts","TileByteCounts","TileOffsets","SubIFDs","fieldTypeNames","fieldTypes","_key","photometricInterpretations","WhiteIsZero","BlackIsZero","RGB","Palette","TransparencyMask","CMYK","YCbCr","CIELab","ICCLab","ExtraSamplesValues","Unspecified","Assocalpha","Unassalpha","LercParameters","Version","AddCompression","LercAddCompression","None","Deflate","geoKeyNames","geoKeys","_key2","v0","v1","t","generateUtilityClasses","getMenuItemUtilityClass","slot","_excluded","MenuItemRoot","styled","ButtonBase","shouldForwardProp","prop","name","overridesResolver","props","styles","ownerState","root","dense","divider","disableGutters","gutters","_ref","_extends2","theme","typography","body1","display","justifyContent","alignItems","position","textDecoration","minHeight","paddingTop","paddingBottom","boxSizing","whiteSpace","paddingLeft","paddingRight","borderBottom","palette","backgroundClip","backgroundColor","action","hover","primary","main","selectedOpacity","focusOpacity","hoverOpacity","focus","opacity","disabledOpacity","marginTop","spacing","marginBottom","marginLeft","minWidth","breakpoints","up","body2","fontSize","inProps","ref","useThemeProps","_props$autoFocus","autoFocus","_props$component","component","_props$dense","_props$divider","_props$disableGutters","focusVisibleClassName","_props$role","role","tabIndexProp","tabIndex","other","context","ListContext","childContext","menuItemRef","useEnhancedEffect","current","classes","disabled","selected","slots","composedClasses","composeClasses","useUtilityClasses","handleRef","useForkRef","undefined","value","children","focusVisible","fromWhiteIsZero","raster","width","height","rgbRaster","Uint8Array","fromBlackIsZero","fromPalette","colorMap","greenOffset","blueOffset","mapIndex","fromCMYK","cmykRaster","m","y","k","fromYCbCr","yCbCrRaster","Uint8ClampedArray","cb","cr","fromCIELab","cieLabRaster","x","z","r","g","b","pow","registry","Map","addDecoder","cases","importFn","forEach","set","getDecoder","_x","_getDecoder","apply","this","arguments","_callee","fileDirectory","Decoder","_context","prev","next","get","Compression","sent","abrupt","stop","copyNewSize","array","samplesPerPixel","Object","getPrototypeOf","resampleNearest","valueArrays","inWidth","inHeight","outWidth","outHeight","relX","relY","newArray","cy","cx","resampleBilinear","rawY","yl","floor","yh","ceil","rawX","tx","xl","xh","ll","hl","lh","hh","resample","method","resampleNearestInterleaved","valueArray","samples","resampleBilinearInterleaved","resampleInterleaved","sum","start","end","s","arrayForType","bitsPerSample","size","Uint16Array","Uint32Array","Int8Array","Int16Array","Int32Array","Float32Array","Float64Array","needsNormalization","normalizeArray","inBuffer","planarConfiguration","tileWidth","tileHeight","view","DataView","samplesToTransfer","outArray","bitMask","repeat","bitsPerLine","lineBitOffset","pixelBitOffset","bitOffset","outIndex","byteOffset","innerBitOffset","getUint8","getUint16","raw","getUint32","buffer","then","default","GeoTIFFImage","dataView","littleEndian","cache","source","tiles","isTiled","PlanarConfiguration","_readRGB","_readRasters","_readRaster2","_getTileOrStrip","ImageWidth","ImageLength","SamplesPerPixel","TileWidth","getWidth","TileLength","RowsPerStrip","getHeight","getTileWidth","getTileHeight","bytes","getSampleByteSize","RangeError","sampleIndex","prototype","getInt8","getInt16","getInt32","offset","getFloat32","getFloat64","getSampleFormat","getBitsPerSample","_callee2","sample","poolOrDecoder","signal","numTilesPerRow","numTilesPerCol","byteCount","request","_this","_context2","fetch","data","sampleFormat","decode","getSamplesPerPixel","getBlockHeight","t0","t1","t2","t3","_x2","_x3","_x4","_x5","_callee3","imageWindow","interleave","resampleMethod","imageWidth","imageHeight","minXTile","maxXTile","minYTile","maxYTile","windowWidth","bytesPerPixel","srcSampleOffsets","sampleReaders","promises","yTile","xTile","_loop","resampled","_this2","_context3","getBytesPerPixel","getReaderForSample","si","promise","getTileOrStrip","tile","blockHeight","firstLine","firstCol","lastLine","lastCol","reader","ymax","xmax","pixelOffset","call","windowCoordinate","Promise","all","_x6","_x7","_x8","_x9","_x10","_x11","_x12","_x13","_x14","_callee4","_ref2","wnd","_ref2$samples","_ref2$pool","pool","fillValue","imageWindowWidth","imageWindowHeight","numPixels","_i","_i2","result","_args4","_context4","window","reject","fill","getArrayForSample","_readRaster","_callee5","_ref3","_ref3$interleave","_ref3$pool","_ref3$enableAlpha","enableAlpha","pi","subOptions","red","green","blue","_i3","_args5","_context5","PhotometricInterpretation","readRasters","ColorMap","ModelTiepoint","tiePoints","metadata","GDAL_METADATA","string","items","filter","item","Number","inner","GDAL_NODATA","substring","modelTransformation","ModelTransformation","referenceImage","modelPixelScale","ModelPixelScale","_referenceImage$getRe","getResolution","_referenceImage$getRe2","refResX","refResY","refResZ","GTRasterTypeGeoKey","origin","getOrigin","resolution","x1","y1","x2","y2","DataView64","arrayBuffer","_dataView","combined","left","right","isSafeInteger","isNegative","carrying","byte","DataSlice","sliceOffset","bigTiff","_sliceOffset","_littleEndian","_bigTiff","byteLength","sliceTop","readUint32","readUint64","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","minLen","_arrayLikeToArray","n","constructor","from","test","_unsupportedIterableToArray","F","done","e","_e","f","TypeError","err","normalCompletion","didErr","step","_e2","return","arr","len","arr2","CRLFCRLF","itemsToObject","fromEntries","_step","obj","_iterator","_step$value","parseHeaders","text","split","line","kv","str","trim","parseContentRange","rawContentRange","total","_rawContentRange$matc","match","_rawContentRange$matc2","parseByteRanges","responseArrayBuffer","boundary","decoder","TextDecoder","out","startBoundary","endBoundary","_text","startsWith","innerText","endOfHeaders","indexOf","headers","_parseContentRange","startOfData","fileSize","BaseSource","_close","_fetchSlice","_fetch","slices","_args","fetchSlice","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","Super","NewTarget","QuickLRU","_Map","_Symbol$iterator","_Symbol$toStringTag","_super","options","maxSize","maxAge","POSITIVE_INFINITY","onEviction","oldCache","_size","expiry","Date","now","delete","_deleteIfExpired","_getOrDeleteIfExpired","_getItemValue","_emitEvictions","_set","_entriesAscending","_iterator2","_step2","_item","_iterator3","_step3","_item2","_item3","_value","has","finish","_item4","_moveToRecent","_ref$maxAge","_peek","deleted","clear","newSize","removeCount","keys","_iterator4","_step4","_step4$value","values","_iterator5","_step5","_step5$value","_iterator6","_step6","_item5","_iterator7","_step7","_item6","_item7","_value2","entriesDescending","_item8","_item9","_item10","_key3","_value3","entriesAscending","_iterator8","_step8","_step8$value","_context6","_step9","oldCacheSize","_iterator9","callbackFunction","_step10","thisArgument","_iterator10","_step10$value","JSON","stringify","toStringTag","wait","_wait","milliseconds","resolve","setTimeout","zip","a","A","B","AbortError","_Error","params","captureStackTrace","AggregateError","_Error2","CustomAggregateError","_super2","errors","message","Block","BlockGroup","blockIds","BlockedSource","_BaseSource","_ref$blockSize","blockSize","_ref$cacheSize","cacheSize","blockCache","blockRequests","blockIdsToFetch","Set","abortedBlockIds","missingBlockIds","allBlockIds","top","firstBlockOffset","_blockId2","missingRequests","_missingBlockIds","blockId","abortedBlockRequests","_blockId","block","blocks","failedBlocks","requiredBlocks","add","fetchBlocks","allSettled","id","aborted","readSliceData","_this3","groups","groupBlocks","groupRequests","groupIndex","_loop2","response","blockOffset","sortedBlockIds","sort","lastBlockId","_this4","blockIdLow","blockIdHigh","sliceData","ArrayBuffer","sliceView","delta","blockInnerOffset","rangeInnerOffset","usedBlockLength","blockView","BaseResponse","_getData","status","headerName","BaseClient","url","_request","_args2","credentials","FetchResponse","_BaseResponse","FetchClient","_BaseClient","XHRResponse","xhr","getResponseHeader","XHRClient","XMLHttpRequest","open","responseType","_Object$entries","entries","_Object$entries$_i","setRequestHeader","onload","onerror","onabort","send","abort","addEventListener","constructRequest","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","getOwnPropertyDescriptors","defineProperties","defineProperty","HttpResponse","dataPromise","statusCode","HttpClient","parsedUrl","httpApi","protocol","resolveData","chunks","on","chunk","Buffer","destroy","_excluded2","_excluded3","_excluded4","RemoteSource","_fetchSlices","client","maxRanges","allowFullFile","_fileSize","fetchSlices","_parseContentType","byteRanges","first","others","_data","Range","ok","rawContentType","getHeader","_rawContentType$split","_rawContentType$split2","type","param","getData","_parseContentRange2","_data2","maybeWrapInBlockedSource","makeFetchSource","_ref3$headers","_ref3$maxRanges","_ref3$allowFullFile","blockOptions","makeXHRSource","_ref4","_ref4$headers","_ref4$maxRanges","_ref4$allowFullFile","makeHttpSource","_ref5","_ref5$headers","_ref5$maxRanges","_ref5$allowFullFile","_ref6","_ref6$forceXHR","forceXHR","clientOptions","FileReaderSource","file","blob","FileReader","event","readAsArrayBuffer","makeFileReaderSource","getFieldTypeLength","fieldType","parseGeoKeyDirectory","rawGeoKeyDirectory","GeoKeyDirectory","geoKeyDirectory","location","count","subarray","getValues","dataSlice","readMethod","fieldTypeLength","readUint8","readInt8","readUint16","readInt16","readInt32","readInt64","readFloat32","readFloat64","ImageFileDirectory","nextIFDByteOffset","GeoTIFFImageIndexError","GeoTIFFBase","resX","resY","bbox","firstImage","usedImage","imageCount","imgBBox","_firstImage$getOrigin","_firstImage$getOrigin2","oX","oY","_firstImage$getResolu","_firstImage$getResolu2","rX","rY","usedBBox","allImages","image","_image$fileDirectory","subfileType","newSubfileType","_image","imgResX","imgResY","_firstImage$getOrigin3","_firstImage$getOrigin4","_oX","_oY","_usedImage$getResolut","_usedImage$getResolut2","imageResX","imageResY","getImage","getImageCount","getBoundingBox","SubfileType","NewSubfileType","GeoTIFF","_GeoTIFFBase","_fromSource","_getGhostValues","_getImageCount","_getImage","_requestIFD","_parseFileDirectoryAt","_getSlice","firstIFDOffset","ifdRequests","ghostValues","fallbackSize","t4","entrySize","offsetSize","numDirEntries","byteSize","entryCount","fieldTag","typeCount","fieldValues","valueOffset","actualOffset","fieldDataSlice","getSlice","covers","readOffset","parseFileDirectoryAt","requestIFD","previousIfd","_callee6","ifd","_args6","_callee7","hasNext","_context7","_callee8","detectionString","heuristicAreaSize","valuesString","metadataSize","fullString","_context8","close","_callee9","headerData","BOM","magicNumber","_context9","getUint64","fromUrl","_fromUrl","_callee13","_args13","_context13","fromSource","fromBlob","_fromBlob","_callee16","_context16","defaultPoolSize","navigator","hardwareConcurrency","Pool","createWorker","workers","_awaitingDecoder","messageId","create","worker","idle","_decode","find","candidate","random","onMessage","decoded","removeEventListener","postMessage","terminate","clamp","gain","bias","Reader","urls","files","tiffs","getCount","getTiffs","fileIndex","imageIndex","tiff","getBandCount","getCode","ProjectedCSTypeGeoKey","GeographicTypeGeoKey","getUnit","ProjLinearUnitsGeoKey","getRasters","sources","targetImage","originWidth","originHeight","sourceWindow","dstWidth","dstHeight","nodata","getGDALNoData","dstWindow","sourceWidth","sourceHeight","bandCount","bands","every","band","targetSamples","v","render","mode","layers","orders","mapping","_","layer","order","rasters","dstIndex","includeNodata","indexes","normalized","pixels","ImageData","resolutionsFromExtent","extent","maxZoom","DEFAULT_MAX_ZOOM","tileSize","DEFAULT_TILE_SIZE","maxResolution","sourceResolution","resolutions","Regional","userOptions","interpolate","state","SourceState","attributions","crossOrigin","opaque","reprojectionErrorThreshold","tileLoadFunction","imageTile","coordString","canvas","document","createElement","getContext","bbox_","gridExtent","getWindow","tileLeft","tileRight","tileTop","tileBottom","imageExtentLeft","imageExtentBottom","imageExtentRight","imageExtentTop","sourcePerPixel","width_","height_","tilePerPixel","leftBottom","rightTop","tileRect","sourceRect","sourceRectSize","tileRectSize","setState","TileState","reader_","samples_","layers_","putImageData","src","toDataURL","tilePixelRatio","wrapX","transition","attributionsCollapsible","existed","findIndex","bandIndex","setup","minZoom","code","unit","currentBbox","projection","getProjection","crs","utils","proj4","register","Projection","units","bboxWidth","bboxHeight","extentWidth","extentHeight","tileGrid","TileGrid","TileImage","EllipsisWrapper","overflow","EllipsisTypography","Typography","textOverflow","LayerName","flex","LayerButton","StyledUl","listStyle","margin","padding","defaultSourcesValue","Coordinates","pointerEvents","FileInputWrapper","Config","Buttons","marginRight","LayerDetail","ol","useOl","wrapperRef","React","positionRef","layerConfs","setLayerConfs","filelist","setFilelist","error","setError","loading","setLoading","layerList","useDnDSort","defaultItems","drop","draged","hovered","prevList","nextList","splice","useForm","criteriaMode","defaultValues","control","handleSubmit","reset","useFieldArray","fields","append","remove","onSubmit","includes","sourceConfigs","addedId","layerConf","WebGLTile","addLayer","fitting","originExtent","transformed","transformExtent","getView","fit","getState","sourceListener","sourceState","resetList","zIndex","setZIndex","removeLayer","newLayerConfs","CssBaseline","Helmet","content","rel","href","property","Container","variant","Stack","my","Grid","container","xs","style","trigger","direction","Tooltip","title","propagation","arrow","placement","reduce","Button","onClick","accept","onChange","field","fieldState","invalid","FormControl","fullWidth","InputLabel","Select","String","FormHelperText","rules","required","sx","mt","mb","TextField","label","placeholder","pattern","IconButton","color","Delete","Add","ml"],"sourceRoot":""}