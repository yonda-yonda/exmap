{"version":3,"file":"component---src-pages-geotiff-index-tsx-78b1c223c49cbcde2a9e.js","mappings":"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","sources":["webpack://exmap/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://exmap/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://exmap/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://exmap/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://exmap/./node_modules/@babel/runtime/helpers/construct.js","webpack://exmap/./node_modules/@babel/runtime/helpers/createClass.js","webpack://exmap/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://exmap/./node_modules/@babel/runtime/helpers/get.js","webpack://exmap/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://exmap/./node_modules/@babel/runtime/helpers/inherits.js","webpack://exmap/./node_modules/@babel/runtime/helpers/isNativeFunction.js","webpack://exmap/./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack://exmap/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://exmap/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://exmap/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://exmap/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://exmap/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://exmap/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://exmap/./node_modules/@babel/runtime/helpers/superPropBase.js","webpack://exmap/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://exmap/./node_modules/@babel/runtime/helpers/typeof.js","webpack://exmap/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://exmap/./node_modules/@babel/runtime/helpers/wrapNativeSuper.js","webpack://exmap/./node_modules/@mui/icons-material/Add.js","webpack://exmap/./node_modules/@mui/icons-material/Delete.js","webpack://exmap/./node_modules/@mui/material/internal/svg-icons/RadioButtonUnchecked.js","webpack://exmap/./node_modules/@mui/material/internal/svg-icons/RadioButtonChecked.js","webpack://exmap/./node_modules/@mui/material/Radio/RadioButtonIcon.js","webpack://exmap/./node_modules/@mui/material/Radio/radioClasses.js","webpack://exmap/./node_modules/@mui/material/Radio/Radio.js","webpack://exmap/./node_modules/@mui/material/RadioGroup/useRadioGroup.js","webpack://exmap/./node_modules/@mui/material/FormGroup/formGroupClasses.js","webpack://exmap/./node_modules/@mui/material/FormGroup/FormGroup.js","webpack://exmap/./node_modules/@mui/material/RadioGroup/RadioGroup.js","webpack://exmap/./node_modules/@mui/material/RadioGroup/RadioGroupContext.js","webpack://exmap/./node_modules/@mui/system/esm/styled.js","webpack://exmap/./node_modules/core-js/internals/classof.js","webpack://exmap/./node_modules/core-js/internals/create-property.js","webpack://exmap/./node_modules/core-js/internals/function-bind-context.js","webpack://exmap/./node_modules/core-js/internals/get-iterator-method.js","webpack://exmap/./node_modules/core-js/internals/get-iterator.js","webpack://exmap/./node_modules/core-js/internals/is-array-iterator-method.js","webpack://exmap/./node_modules/core-js/internals/iterate.js","webpack://exmap/./node_modules/core-js/internals/iterator-close.js","webpack://exmap/./node_modules/core-js/internals/iterators.js","webpack://exmap/./node_modules/core-js/internals/new-promise-capability.js","webpack://exmap/./node_modules/core-js/internals/perform.js","webpack://exmap/./node_modules/core-js/internals/to-string-tag-support.js","webpack://exmap/./node_modules/core-js/modules/es.object.from-entries.js","webpack://exmap/./node_modules/core-js/modules/es.promise.all-settled.js","webpack://exmap/./node_modules/core-js/modules/esnext.promise.all-settled.js","webpack://exmap/./src/hooks/useDnDSort.tsx","webpack://exmap/./node_modules/@mui/material/IconButton/iconButtonClasses.js","webpack://exmap/./node_modules/@mui/material/IconButton/IconButton.js","webpack://exmap/./node_modules/ol/webgl.js","webpack://exmap/./node_modules/ol/webgl/Buffer.js","webpack://exmap/./node_modules/ol/webgl/TileTexture.js","webpack://exmap/./node_modules/ol/webgl/ContextEventType.js","webpack://exmap/./node_modules/ol/webgl/PostProcessingPass.js","webpack://exmap/./node_modules/ol/vec/mat4.js","webpack://exmap/./node_modules/ol/webgl/Helper.js","webpack://exmap/./node_modules/ol/renderer/webgl/Layer.js","webpack://exmap/./node_modules/ol/renderer/webgl/TileLayer.js","webpack://exmap/./node_modules/ol/webgl/PaletteTexture.js","webpack://exmap/./node_modules/ol/style/expressions.js","webpack://exmap/./node_modules/ol/layer/WebGLTile.js","webpack://exmap/./node_modules/ol/control/MousePosition.js","webpack://exmap/./node_modules/ol/DataTile.js","webpack://exmap/./node_modules/ol/source/DataTile.js","webpack://exmap/./src/scripts/CustomGeoTIFFSource.js","webpack://exmap/./node_modules/ol/worker/geotiff-decoder.js","webpack://exmap/./src/pages/geotiff/index.tsx","webpack://exmap/./node_modules/geotiff/dist-browser|sync"],"sourcesContent":["function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var superPropBase = require(\"./superPropBase.js\");\n\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n\n      return desc.value;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n\n  return _get.apply(this, arguments);\n}\n\nmodule.exports = _get, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableRest = require(\"./nonIterableRest.js\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nvar isNativeFunction = require(\"./isNativeFunction.js\");\n\nvar construct = require(\"./construct.js\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","import * as React from 'react';\nimport createSvgIcon from '../../utils/createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'RadioButtonUnchecked');","import * as React from 'react';\nimport createSvgIcon from '../../utils/createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z\"\n}), 'RadioButtonChecked');","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport RadioButtonUncheckedIcon from '../internal/svg-icons/RadioButtonUnchecked';\nimport RadioButtonCheckedIcon from '../internal/svg-icons/RadioButtonChecked';\nimport styled from '../styles/styled';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar RadioButtonIconRoot = styled('span')({\n  position: 'relative',\n  display: 'flex'\n});\nvar RadioButtonIconBackground = styled(RadioButtonUncheckedIcon, {\n  skipSx: true\n})({\n  // Scale applied to prevent dot misalignment in Safari\n  transform: 'scale(1)'\n});\nvar RadioButtonIconDot = styled(RadioButtonCheckedIcon, {\n  skipSx: true\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    left: 0,\n    position: 'absolute',\n    transform: 'scale(0)',\n    transition: theme.transitions.create('transform', {\n      easing: theme.transitions.easing.easeIn,\n      duration: theme.transitions.duration.shortest\n    })\n  }, ownerState.checked && {\n    transform: 'scale(1)',\n    transition: theme.transitions.create('transform', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.shortest\n    })\n  });\n});\n/**\n * @ignore - internal component.\n */\n\nfunction RadioButtonIcon(props) {\n  var _props$checked = props.checked,\n      checked = _props$checked === void 0 ? false : _props$checked,\n      _props$classes = props.classes,\n      classes = _props$classes === void 0 ? {} : _props$classes,\n      fontSize = props.fontSize;\n\n  var ownerState = _extends({}, props, {\n    checked: checked\n  });\n\n  return /*#__PURE__*/_jsxs(RadioButtonIconRoot, {\n    className: classes.root,\n    ownerState: ownerState,\n    children: [/*#__PURE__*/_jsx(RadioButtonIconBackground, {\n      fontSize: fontSize,\n      className: classes.background,\n      ownerState: ownerState\n    }), /*#__PURE__*/_jsx(RadioButtonIconDot, {\n      fontSize: fontSize,\n      className: classes.dot,\n      ownerState: ownerState\n    })]\n  });\n}\n\nprocess.env.NODE_ENV !== \"production\" ? RadioButtonIcon.propTypes = {\n  /**\n   * If `true`, the component is checked.\n   */\n  checked: PropTypes.bool,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * The size of the component.\n   * `small` is equivalent to the dense radio styling.\n   */\n  fontSize: PropTypes.oneOf(['small', 'medium'])\n} : void 0;\nexport default RadioButtonIcon;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getRadioUtilityClass(slot) {\n  return generateUtilityClass('MuiRadio', slot);\n}\nvar radioClasses = generateUtilityClasses('MuiRadio', ['root', 'checked', 'disabled', 'colorPrimary', 'colorSecondary']);\nexport default radioClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"checked\", \"checkedIcon\", \"color\", \"icon\", \"name\", \"onChange\", \"size\"];\nimport * as React from 'react';\nimport { refType } from '@mui/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport { alpha } from '@mui/system';\nimport SwitchBase from '../internal/SwitchBase';\nimport useThemeProps from '../styles/useThemeProps';\nimport RadioButtonIcon from './RadioButtonIcon';\nimport capitalize from '../utils/capitalize';\nimport createChainedFunction from '../utils/createChainedFunction';\nimport useRadioGroup from '../RadioGroup/useRadioGroup';\nimport radioClasses, { getRadioUtilityClass } from './radioClasses';\nimport styled, { rootShouldForwardProp } from '../styles/styled';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      color = ownerState.color;\n  var slots = {\n    root: ['root', \"color\".concat(capitalize(color))]\n  };\n  return _extends({}, classes, composeClasses(slots, getRadioUtilityClass, classes));\n};\n\nvar RadioRoot = styled(SwitchBase, {\n  shouldForwardProp: function shouldForwardProp(prop) {\n    return rootShouldForwardProp(prop) || prop === 'classes';\n  },\n  name: 'MuiRadio',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, styles[\"color\".concat(capitalize(ownerState.color))]];\n  }\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    color: theme.palette.text.secondary,\n    '&:hover': {\n      backgroundColor: alpha(ownerState.color === 'default' ? theme.palette.action.active : theme.palette[ownerState.color].main, theme.palette.action.hoverOpacity),\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    }\n  }, ownerState.color !== 'default' && _defineProperty({}, \"&.\".concat(radioClasses.checked), {\n    color: theme.palette[ownerState.color].main\n  }), _defineProperty({}, \"&.\".concat(radioClasses.disabled), {\n    color: theme.palette.action.disabled\n  }));\n});\n\nfunction areEqualValues(a, b) {\n  if (typeof b === 'object' && b !== null) {\n    return a === b;\n  } // The value could be a number, the DOM will stringify it anyway.\n\n\n  return String(a) === String(b);\n}\n\nvar defaultCheckedIcon = /*#__PURE__*/_jsx(RadioButtonIcon, {\n  checked: true\n});\n\nvar defaultIcon = /*#__PURE__*/_jsx(RadioButtonIcon, {});\n\nvar Radio = /*#__PURE__*/React.forwardRef(function Radio(inProps, ref) {\n  var _defaultIcon$props$fo, _defaultCheckedIcon$p;\n\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiRadio'\n  });\n\n  var checkedProp = props.checked,\n      _props$checkedIcon = props.checkedIcon,\n      checkedIcon = _props$checkedIcon === void 0 ? defaultCheckedIcon : _props$checkedIcon,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$icon = props.icon,\n      icon = _props$icon === void 0 ? defaultIcon : _props$icon,\n      nameProp = props.name,\n      onChangeProp = props.onChange,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    color: color,\n    size: size\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  var radioGroup = useRadioGroup();\n  var checked = checkedProp;\n  var onChange = createChainedFunction(onChangeProp, radioGroup && radioGroup.onChange);\n  var name = nameProp;\n\n  if (radioGroup) {\n    if (typeof checked === 'undefined') {\n      checked = areEqualValues(radioGroup.value, props.value);\n    }\n\n    if (typeof name === 'undefined') {\n      name = radioGroup.name;\n    }\n  }\n\n  return /*#__PURE__*/_jsx(RadioRoot, _extends({\n    type: \"radio\",\n    icon: /*#__PURE__*/React.cloneElement(icon, {\n      fontSize: (_defaultIcon$props$fo = defaultIcon.props.fontSize) != null ? _defaultIcon$props$fo : size\n    }),\n    checkedIcon: /*#__PURE__*/React.cloneElement(checkedIcon, {\n      fontSize: (_defaultCheckedIcon$p = defaultCheckedIcon.props.fontSize) != null ? _defaultCheckedIcon$p : size\n    }),\n    ownerState: ownerState,\n    classes: classes,\n    name: name,\n    checked: checked,\n    onChange: onChange,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default Radio;","import * as React from 'react';\nimport RadioGroupContext from './RadioGroupContext';\nexport default function useRadioGroup() {\n  return React.useContext(RadioGroupContext);\n}","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getFormGroupUtilityClass(slot) {\n  return generateUtilityClass('MuiFormGroup', slot);\n}\nvar formGroupClasses = generateUtilityClasses('MuiFormGroup', ['root', 'row']);\nexport default formGroupClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"className\", \"row\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport { getFormGroupUtilityClass } from './formGroupClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      row = ownerState.row;\n  var slots = {\n    root: ['root', row && 'row']\n  };\n  return composeClasses(slots, getFormGroupUtilityClass, classes);\n};\n\nvar FormGroupRoot = styled('div', {\n  name: 'MuiFormGroup',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, ownerState.row && styles.row];\n  }\n})(function (_ref) {\n  var ownerState = _ref.ownerState;\n  return _extends({\n    display: 'flex',\n    flexDirection: 'column',\n    flexWrap: 'wrap'\n  }, ownerState.row && {\n    flexDirection: 'row'\n  });\n});\n/**\n * `FormGroup` wraps controls such as `Checkbox` and `Switch`.\n * It provides compact row layout.\n * For the `Radio`, you should be using the `RadioGroup` component instead of this one.\n */\n\nvar FormGroup = /*#__PURE__*/React.forwardRef(function FormGroup(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiFormGroup'\n  });\n\n  var className = props.className,\n      _props$row = props.row,\n      row = _props$row === void 0 ? false : _props$row,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    row: row\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(FormGroupRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default FormGroup;","import _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"actions\", \"children\", \"defaultValue\", \"name\", \"onChange\", \"value\"];\nimport * as React from 'react';\nimport FormGroup from '../FormGroup';\nimport useForkRef from '../utils/useForkRef';\nimport useControlled from '../utils/useControlled';\nimport RadioGroupContext from './RadioGroupContext';\nimport useId from '../utils/useId';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar RadioGroup = /*#__PURE__*/React.forwardRef(function RadioGroup(props, ref) {\n  var actions = props.actions,\n      children = props.children,\n      defaultValue = props.defaultValue,\n      nameProp = props.name,\n      onChange = props.onChange,\n      valueProp = props.value,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var rootRef = React.useRef(null);\n\n  var _useControlled = useControlled({\n    controlled: valueProp,\n    default: defaultValue,\n    name: 'RadioGroup'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      value = _useControlled2[0],\n      setValueState = _useControlled2[1];\n\n  React.useImperativeHandle(actions, function () {\n    return {\n      focus: function focus() {\n        var input = rootRef.current.querySelector('input:not(:disabled):checked');\n\n        if (!input) {\n          input = rootRef.current.querySelector('input:not(:disabled)');\n        }\n\n        if (input) {\n          input.focus();\n        }\n      }\n    };\n  }, []);\n  var handleRef = useForkRef(ref, rootRef);\n\n  var handleChange = function handleChange(event) {\n    setValueState(event.target.value);\n\n    if (onChange) {\n      onChange(event, event.target.value);\n    }\n  };\n\n  var name = useId(nameProp);\n  return /*#__PURE__*/_jsx(RadioGroupContext.Provider, {\n    value: {\n      name: name,\n      onChange: handleChange,\n      value: value\n    },\n    children: /*#__PURE__*/_jsx(FormGroup, _extends({\n      role: \"radiogroup\",\n      ref: handleRef\n    }, other, {\n      children: children\n    }))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default RadioGroup;","import * as React from 'react';\n/**\n * @ignore - internal component.\n */\n\nvar RadioGroupContext = /*#__PURE__*/React.createContext(undefined);\n\nif (process.env.NODE_ENV !== 'production') {\n  RadioGroupContext.displayName = 'RadioGroupContext';\n}\n\nexport default RadioGroupContext;","import createStyled from './createStyled';\nvar styled = createStyled();\nexport default styled;","var global = require('../internals/global');\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar Object = global.Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","'use strict';\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : bind ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var classof = require('../internals/classof');\nvar getMethod = require('../internals/get-method');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar TypeError = global.TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw TypeError(tryToString(argument) + ' is not iterable');\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","var global = require('../internals/global');\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar TypeError = global.TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal', condition);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n","var call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getMethod = require('../internals/get-method');\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n","module.exports = {};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aCallable(resolve);\n  this.reject = aCallable(reject);\n};\n\n// `NewPromiseCapability` abstract operation\n// https://tc39.es/ecma262/#sec-newpromisecapability\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","module.exports = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar createProperty = require('../internals/create-property');\n\n// `Object.fromEntries` method\n// https://github.com/tc39/proposal-object-from-entries\n$({ target: 'Object', stat: true }, {\n  fromEntries: function fromEntries(iterable) {\n    var obj = {};\n    iterate(iterable, function (k, v) {\n      createProperty(obj, k, v);\n    }, { AS_ENTRIES: true });\n    return obj;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar iterate = require('../internals/iterate');\n\n// `Promise.allSettled` method\n// https://tc39.es/ecma262/#sec-promise.allsettled\n$({ target: 'Promise', stat: true }, {\n  allSettled: function allSettled(iterable) {\n    var C = this;\n    var capability = newPromiseCapabilityModule.f(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var promiseResolve = aCallable(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        remaining++;\n        call(promiseResolve, C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = { status: 'fulfilled', value: value };\n          --remaining || resolve(values);\n        }, function (error) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = { status: 'rejected', reason: error };\n          --remaining || resolve(values);\n        });\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","// TODO: Remove from `core-js@4`\nrequire('../modules/es.promise.all-settled.js');\n","import React, { useRef, useState } from \"react\";\n\n// thx https://zenn.dev/uttk/articles/b90454baec68c8\n\ntype DnDMode = \"grid\" | \"topbottom\" | \"bottomtop\" | \"leftright\" | \"rightleft\";\n\nconst getClientCoordinates = (\n  event:\n    | MouseEvent\n    | TouchEvent\n    | React.MouseEvent<HTMLElement>\n    | React.TouchEvent<HTMLElement>\n): { clientX: number; clientY: number } | null => {\n  if (\"changedTouches\" in event && event.changedTouches?.length > 0) {\n    return {\n      clientX: event.changedTouches[0].clientX,\n      clientY: event.changedTouches[0].clientY,\n    };\n  } else if (\"clientX\" in event && \"clientY\" in event) {\n    return {\n      clientX: event.clientX,\n      clientY: event.clientY,\n    };\n  }\n  return null;\n};\n\nconst isHover = (\n  event: MouseEvent | TouchEvent,\n  element: HTMLElement,\n  mode: DnDMode = \"grid\",\n  index: number,\n  length: number\n): boolean => {\n  const coordinates = getClientCoordinates(event);\n  if (!coordinates) return false;\n  const { clientX, clientY } = coordinates;\n  const rect = element.getBoundingClientRect();\n\n  switch (mode) {\n    case \"topbottom\": {\n      return (\n        (clientY < rect.bottom ||\n          (index === length - 1 && clientY >= rect.bottom)) &&\n        (clientY > rect.top || (index === 0 && clientY <= rect.top))\n      );\n    }\n    case \"bottomtop\": {\n      return (\n        (clientY < rect.bottom || (index === 0 && clientY >= rect.bottom)) &&\n        (clientY > rect.top || (index === length - 1 && clientY <= rect.top))\n      );\n    }\n    case \"leftright\": {\n      return (\n        (clientX > rect.left || (index === 0 && clientX <= rect.left)) &&\n        (clientX < rect.right ||\n          (index === length - 1 && clientX >= rect.right))\n      );\n    }\n    case \"rightleft\": {\n      return (\n        (clientX > rect.left ||\n          (index === length - 1 && clientX <= rect.left)) &&\n        (clientX < rect.right || (index === 0 && clientX >= rect.right))\n      );\n    }\n    default: {\n      return (\n        clientY < rect.bottom &&\n        clientY > rect.top &&\n        clientX < rect.right &&\n        clientX > rect.left\n      );\n    }\n  }\n};\n\ninterface Position {\n  x: number;\n  y: number;\n}\n\ninterface DnDItem<T> {\n  value: T;\n  key: string;\n  position: Position;\n  element: HTMLElement;\n  index: number;\n}\n\ninterface DnDRef<T> {\n  keys: Map<T, string>;\n  dndItems: DnDItem<T>[];\n  canCheckHovered: boolean;\n  pointerPosition: Position;\n  dragElement: DnDItem<T> | null;\n  hoverIndex: number | null;\n}\n\ninterface DnDSortResult<T> {\n  key: string;\n  value: T;\n  ref: (element: HTMLElement | null) => void;\n  events: {\n    onMouseDown: (event: React.MouseEvent<HTMLElement>) => void;\n    onTouchStart: (event: React.TouchEvent<HTMLElement>) => void;\n  };\n}\n\ninterface DnDProps<T> {\n  defaultItems: T[];\n  mode: DnDMode;\n  zIndex?: number;\n  duration?: number;\n  drop?: (dragIndex: number, hoverIndex: number) => void;\n}\n\nconst getInitState = () => {\n  return {\n    dndItems: [],\n    keys: new Map(),\n    dragElement: null,\n    hoverIndex: null,\n    canCheckHovered: true,\n    pointerPosition: { x: 0, y: 0 },\n  };\n};\n\nexport const useDnDSort = <T,>(\n  props: DnDProps<T>\n): { items: DnDSortResult<T>[]; reset: (items: T[]) => void } => {\n  const { mode, defaultItems, zIndex = 100, duration = 300, drop } = props;\n\n  const [items, setItems] = useState(defaultItems);\n\n  const state = useRef<DnDRef<T>>(getInitState());\n\n  const onMove = (event: MouseEvent | TouchEvent) => {\n    if (event.cancelable) event.preventDefault();\n\n    const coordinates = getClientCoordinates(event);\n    if (!coordinates) return;\n    const { clientX, clientY } = coordinates;\n\n    const { dndItems, dragElement, pointerPosition } = state.current;\n    if (!dragElement) return;\n\n    const x = clientX - pointerPosition.x;\n    const y = clientY - pointerPosition.y;\n\n    const dragStyle = dragElement.element.style;\n\n    dragStyle.zIndex = String(zIndex);\n    dragStyle.cursor = \"grabbing\";\n    dragStyle.transform = `translate(${x}px,${y}px)`;\n\n    if (!state.current.canCheckHovered) return;\n\n    state.current.canCheckHovered = false;\n    setTimeout(() => (state.current.canCheckHovered = true), 300);\n\n    const dragIndex = dndItems.findIndex(({ key }) => key === dragElement.key);\n\n    const hoveredIndex = dndItems.findIndex(\n      ({ element }, index) =>\n        index !== dragIndex &&\n        isHover(event, element, mode, index, dndItems.length)\n    );\n    if (hoveredIndex !== -1) {\n      state.current.hoverIndex = hoveredIndex;\n      state.current.pointerPosition.x = clientX;\n      state.current.pointerPosition.y = clientY;\n      dndItems.splice(dragIndex, 1);\n      dndItems.splice(hoveredIndex, 0, dragElement);\n      const { left: x, top: y } = dragElement.element.getBoundingClientRect();\n      dragElement.position = { x, y };\n      setItems(dndItems.map(v => v.value));\n    }\n  };\n\n  const onEnd = () => {\n    const { dragElement, hoverIndex } = state.current;\n    if (dragElement === null) return;\n    const dragIndex = dragElement.index;\n    const dragStyle = dragElement.element.style;\n    dragStyle.zIndex = \"\";\n    dragStyle.cursor = \"\";\n    dragStyle.transform = \"\";\n    dragStyle.userSelect = \"\";\n    state.current.dragElement = null;\n    state.current.hoverIndex = null;\n\n    if (window) {\n      window.removeEventListener(\"mouseup\", onEnd);\n      window.removeEventListener(\"mousemove\", onMove);\n      window.removeEventListener(\"touchend\", onEnd);\n      window.removeEventListener(\"touchmove\", onMove);\n    }\n\n    if (drop) drop(dragIndex, hoverIndex ?? dragIndex);\n  };\n\n  const reset = React.useCallback((items: T[]) => {\n    state.current = getInitState();\n    setItems(items);\n  }, []);\n\n  return {\n    items: items.map((value: T, index: number): DnDSortResult<T> => {\n      const key = state.current.keys.get(value) || Math.random().toString(16);\n\n      state.current.keys.set(value, key);\n\n      const onStart = (\n        event: React.MouseEvent<HTMLElement> | React.TouchEvent<HTMLElement>\n      ) => {\n        const element = event.currentTarget;\n\n        const coordinates = getClientCoordinates(event);\n        if (!coordinates) return;\n        const { clientX, clientY } = coordinates;\n        state.current.pointerPosition.x = clientX;\n        state.current.pointerPosition.y = clientY;\n\n        const dragStyle = element.style;\n        dragStyle.transition = \"\";\n        dragStyle.cursor = \"grabbing\";\n        dragStyle.userSelect = \"none\";\n\n        const { left: x, top: y } = element.getBoundingClientRect();\n        const position: Position = { x, y };\n\n        state.current.dragElement = { key, value, element, position, index };\n\n        if (window) {\n          window.addEventListener(\"mouseup\", onEnd);\n          window.addEventListener(\"mousemove\", onMove, { passive: false });\n          window.addEventListener(\"touchend\", onEnd);\n          window.addEventListener(\"touchmove\", onMove, { passive: false });\n        }\n      };\n\n      return {\n        value,\n        key,\n        ref: (element: HTMLElement | null) => {\n          if (!element) return;\n\n          const { dndItems, dragElement, pointerPosition } = state.current;\n\n          element.style.transform = \"\";\n          const { left: x, top: y } = element.getBoundingClientRect();\n          const position: Position = { x, y };\n\n          const itemIndex = dndItems.findIndex(item => item.key === key);\n\n          if (itemIndex === -1) {\n            return dndItems.push({\n              key,\n              value,\n              element,\n              position,\n              index: dndItems.length,\n            });\n          }\n\n          if (dragElement?.key === key) {\n            const dragX = dragElement.position.x - position.x;\n            const dragY = dragElement.position.y - position.y;\n            element.style.transform = `translate(${dragX}px,${dragY}px)`;\n\n            pointerPosition.x -= dragX;\n            pointerPosition.y -= dragY;\n          } else {\n            const item = dndItems[itemIndex];\n\n            const x = item.position.x - position.x;\n            const y = item.position.y - position.y;\n\n            element.style.transition = \"\";\n            element.style.transform = `translate(${x}px,${y}px)`;\n\n            requestAnimationFrame(() => {\n              if (dragElement) {\n                element.style.transition = `all ${duration}ms`;\n              }\n              element.style.transform = \"\";\n            });\n          }\n\n          state.current.dndItems[itemIndex] = {\n            key,\n            value,\n            element,\n            position,\n            index: itemIndex,\n          };\n        },\n        events: {\n          onMouseDown: onStart,\n          onTouchStart: onStart,\n        },\n      };\n    }),\n    reset,\n  };\n};\n","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getIconButtonUtilityClass(slot) {\n  return generateUtilityClass('MuiIconButton', slot);\n}\nvar iconButtonClasses = generateUtilityClasses('MuiIconButton', ['root', 'disabled', 'colorInherit', 'colorPrimary', 'colorSecondary', 'edgeStart', 'edgeEnd', 'sizeSmall', 'sizeMedium', 'sizeLarge']);\nexport default iconButtonClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"edge\", \"children\", \"className\", \"color\", \"disabled\", \"disableFocusRipple\", \"size\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@mui/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport { alpha } from '@mui/system';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport ButtonBase from '../ButtonBase';\nimport capitalize from '../utils/capitalize';\nimport iconButtonClasses, { getIconButtonUtilityClass } from './iconButtonClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      disabled = ownerState.disabled,\n      color = ownerState.color,\n      edge = ownerState.edge,\n      size = ownerState.size;\n  var slots = {\n    root: ['root', disabled && 'disabled', color !== 'default' && \"color\".concat(capitalize(color)), edge && \"edge\".concat(capitalize(edge)), \"size\".concat(capitalize(size))]\n  };\n  return composeClasses(slots, getIconButtonUtilityClass, classes);\n};\n\nvar IconButtonRoot = styled(ButtonBase, {\n  name: 'MuiIconButton',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, ownerState.color !== 'default' && styles[\"color\".concat(capitalize(ownerState.color))], ownerState.edge && styles[\"edge\".concat(capitalize(ownerState.edge))], styles[\"size\".concat(capitalize(ownerState.size))]];\n  }\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    textAlign: 'center',\n    flex: '0 0 auto',\n    fontSize: theme.typography.pxToRem(24),\n    padding: 8,\n    borderRadius: '50%',\n    overflow: 'visible',\n    // Explicitly set the default value to solve a bug on IE11.\n    color: theme.palette.action.active,\n    transition: theme.transitions.create('background-color', {\n      duration: theme.transitions.duration.shortest\n    })\n  }, !ownerState.disableRipple && {\n    '&:hover': {\n      backgroundColor: alpha(theme.palette.action.active, theme.palette.action.hoverOpacity),\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    }\n  }, ownerState.edge === 'start' && {\n    marginLeft: ownerState.size === 'small' ? -3 : -12\n  }, ownerState.edge === 'end' && {\n    marginRight: ownerState.size === 'small' ? -3 : -12\n  });\n}, function (_ref2) {\n  var theme = _ref2.theme,\n      ownerState = _ref2.ownerState;\n  return _extends({}, ownerState.color === 'inherit' && {\n    color: 'inherit'\n  }, ownerState.color !== 'inherit' && ownerState.color !== 'default' && _extends({\n    color: theme.palette[ownerState.color].main\n  }, !ownerState.disableRipple && {\n    '&:hover': {\n      backgroundColor: alpha(theme.palette[ownerState.color].main, theme.palette.action.hoverOpacity),\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    }\n  }), ownerState.size === 'small' && {\n    padding: 5,\n    fontSize: theme.typography.pxToRem(18)\n  }, ownerState.size === 'large' && {\n    padding: 12,\n    fontSize: theme.typography.pxToRem(28)\n  }, _defineProperty({}, \"&.\".concat(iconButtonClasses.disabled), {\n    backgroundColor: 'transparent',\n    color: theme.palette.action.disabled\n  }));\n});\n/**\n * Refer to the [Icons](/components/icons/) section of the documentation\n * regarding the available icon options.\n */\n\nvar IconButton = /*#__PURE__*/React.forwardRef(function IconButton(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiIconButton'\n  });\n\n  var _props$edge = props.edge,\n      edge = _props$edge === void 0 ? false : _props$edge,\n      children = props.children,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'default' : _props$color,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$disableFocusRi = props.disableFocusRipple,\n      disableFocusRipple = _props$disableFocusRi === void 0 ? false : _props$disableFocusRi,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    edge: edge,\n    color: color,\n    disabled: disabled,\n    disableFocusRipple: disableFocusRipple,\n    size: size\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(IconButtonRoot, _extends({\n    className: clsx(classes.root, className),\n    centerRipple: true,\n    focusRipple: !disableFocusRipple,\n    disabled: disabled,\n    ref: ref,\n    ownerState: ownerState\n  }, other, {\n    children: children\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default IconButton;","/**\n * @module ol/webgl\n */\nimport { assign } from './obj.js';\n/**\n * Constants taken from goog.webgl\n */\n\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing vertices data, such as\n * position, color, texture coordinate, etc. These vertices are then referenced by an index buffer\n * to be drawn on screen (see {@link module:ol/webgl.ELEMENT_ARRAY_BUFFER}).\n * @const\n * @type {number}\n * @api\n */\n\nexport var ARRAY_BUFFER = 0x8892;\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing indices data.\n * Index buffers are essentially lists of references to vertices defined in a vertex buffer\n * (see {@link module:ol/webgl.ARRAY_BUFFER}), and define the primitives (triangles) to be drawn.\n * @const\n * @type {number}\n * @api\n */\n\nexport var ELEMENT_ARRAY_BUFFER = 0x8893;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\n\nexport var STREAM_DRAW = 0x88e0;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\n\nexport var STATIC_DRAW = 0x88e4;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\n\nexport var DYNAMIC_DRAW = 0x88e8;\n/**\n * @const\n * @type {number}\n */\n\nexport var UNSIGNED_BYTE = 0x1401;\n/**\n * @const\n * @type {number}\n */\n\nexport var UNSIGNED_SHORT = 0x1403;\n/**\n * @const\n * @type {number}\n */\n\nexport var UNSIGNED_INT = 0x1405;\n/**\n * @const\n * @type {number}\n */\n\nexport var FLOAT = 0x1406;\n/** end of goog.webgl constants\n */\n\n/**\n * @const\n * @type {Array<string>}\n */\n\nvar CONTEXT_IDS = ['experimental-webgl', 'webgl', 'webkit-3d', 'moz-webgl'];\n/**\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {Object} [opt_attributes] Attributes.\n * @return {WebGLRenderingContext} WebGL rendering context.\n */\n\nexport function getContext(canvas, opt_attributes) {\n  var attributes = assign({\n    preserveDrawingBuffer: true\n  }, opt_attributes);\n  var ii = CONTEXT_IDS.length;\n\n  for (var i = 0; i < ii; ++i) {\n    try {\n      var context = canvas.getContext(CONTEXT_IDS[i], attributes);\n\n      if (context) {\n        return (\n          /** @type {!WebGLRenderingContext} */\n          context\n        );\n      }\n    } catch (e) {// pass\n    }\n  }\n\n  return null;\n}\n/**\n * @type {Array<string>}\n */\n\nvar supportedExtensions;\n/**\n * @return {Array<string>} List of supported WebGL extensions.\n */\n\nexport function getSupportedExtensions() {\n  if (!supportedExtensions) {\n    var canvas = document.createElement('canvas');\n    var gl = getContext(canvas);\n\n    if (gl) {\n      supportedExtensions = gl.getSupportedExtensions();\n    }\n  }\n\n  return supportedExtensions;\n}","/**\n * @module ol/webgl/Buffer\n */\nimport { ARRAY_BUFFER, ELEMENT_ARRAY_BUFFER } from '../webgl.js';\nimport { DYNAMIC_DRAW, STATIC_DRAW, STREAM_DRAW } from '../webgl.js';\nimport { assert } from '../asserts.js';\n/**\n * Used to describe the intended usage for the data: `STATIC_DRAW`, `STREAM_DRAW`\n * or `DYNAMIC_DRAW`.\n * @enum {number}\n */\n\nexport var BufferUsage = {\n  STATIC_DRAW: STATIC_DRAW,\n  STREAM_DRAW: STREAM_DRAW,\n  DYNAMIC_DRAW: DYNAMIC_DRAW\n};\n/**\n * @classdesc\n * Object used to store an array of data as well as usage information for that data.\n * Stores typed arrays internally, either Float32Array or Uint16/32Array depending on\n * the buffer type (ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER) and available extensions.\n *\n * To populate the array, you can either use:\n * * A size using `#ofSize(buffer)`\n * * An `ArrayBuffer` object using `#fromArrayBuffer(buffer)`\n * * A plain array using `#fromArray(array)`\n *\n * Note:\n * See the documentation of [WebGLRenderingContext.bufferData](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/bufferData)\n * for more info on buffer usage.\n * @api\n */\n\nvar WebGLArrayBuffer =\n/** @class */\nfunction () {\n  /**\n   * @param {number} type Buffer type, either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER.\n   * @param {number} [opt_usage] Intended usage, either `STATIC_DRAW`, `STREAM_DRAW` or `DYNAMIC_DRAW`.\n   * Default is `DYNAMIC_DRAW`.\n   */\n  function WebGLArrayBuffer(type, opt_usage) {\n    /**\n     * @private\n     * @type {Float32Array|Uint32Array}\n     */\n    this.array = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.type = type;\n    assert(type === ARRAY_BUFFER || type === ELEMENT_ARRAY_BUFFER, 62);\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.usage = opt_usage !== undefined ? opt_usage : BufferUsage.STATIC_DRAW;\n  }\n  /**\n   * Populates the buffer with an array of the given size (all values will be zeroes).\n   * @param {number} size Array size\n   */\n\n\n  WebGLArrayBuffer.prototype.ofSize = function (size) {\n    this.array = new (getArrayClassForType(this.type))(size);\n  };\n  /**\n   * Populates the buffer with an array of the given size (all values will be zeroes).\n   * @param {Array<number>} array Numerical array\n   */\n\n\n  WebGLArrayBuffer.prototype.fromArray = function (array) {\n    var arrayClass = getArrayClassForType(this.type);\n    this.array = arrayClass.from ? arrayClass.from(array) : new arrayClass(array);\n  };\n  /**\n   * Populates the buffer with a raw binary array buffer.\n   * @param {ArrayBuffer} buffer Raw binary buffer to populate the array with. Note that this buffer must have been\n   * initialized for the same typed array class.\n   */\n\n\n  WebGLArrayBuffer.prototype.fromArrayBuffer = function (buffer) {\n    this.array = new (getArrayClassForType(this.type))(buffer);\n  };\n  /**\n   * @return {number} Buffer type.\n   */\n\n\n  WebGLArrayBuffer.prototype.getType = function () {\n    return this.type;\n  };\n  /**\n   * Will return null if the buffer was not initialized\n   * @return {Float32Array|Uint32Array} Array.\n   */\n\n\n  WebGLArrayBuffer.prototype.getArray = function () {\n    return this.array;\n  };\n  /**\n   * @return {number} Usage.\n   */\n\n\n  WebGLArrayBuffer.prototype.getUsage = function () {\n    return this.usage;\n  };\n  /**\n   * Will return 0 if the buffer is not initialized\n   * @return {number} Array size\n   */\n\n\n  WebGLArrayBuffer.prototype.getSize = function () {\n    return this.array ? this.array.length : 0;\n  };\n\n  return WebGLArrayBuffer;\n}();\n/**\n * Returns a typed array constructor based on the given buffer type\n * @param {number} type Buffer type, either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER.\n * @return {Float32ArrayConstructor|Uint32ArrayConstructor} The typed array class to use for this buffer.\n */\n\n\nexport function getArrayClassForType(type) {\n  switch (type) {\n    case ARRAY_BUFFER:\n      return Float32Array;\n\n    case ELEMENT_ARRAY_BUFFER:\n      return Uint32Array;\n\n    default:\n      return Float32Array;\n  }\n}\nexport default WebGLArrayBuffer;","/**\n * @module ol/webgl/TileTexture\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageTile from '../ImageTile.js';\nimport ReprojTile from '../reproj/Tile.js';\nimport TileState from '../TileState.js';\nimport WebGLArrayBuffer from './Buffer.js';\nimport { ARRAY_BUFFER, STATIC_DRAW } from '../webgl.js';\nimport { toSize } from '../size.js';\n/**\n * @param {WebGLRenderingContext} gl The WebGL context.\n * @param {WebGLTexture} texture The texture.\n * @param {boolean} interpolate Interpolate when resampling.\n */\n\nfunction bindAndConfigure(gl, texture, interpolate) {\n  var resampleFilter = interpolate ? gl.LINEAR : gl.NEAREST;\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, resampleFilter);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, resampleFilter);\n}\n/**\n * @param {WebGLRenderingContext} gl The WebGL context.\n * @param {WebGLTexture} texture The texture.\n * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image The image.\n * @param {boolean} interpolate Interpolate when resampling.\n */\n\n\nfunction uploadImageTexture(gl, texture, image, interpolate) {\n  bindAndConfigure(gl, texture, interpolate);\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n}\n/**\n * @param {import(\"./Helper.js\").default} helper The WebGL helper.\n * @param {WebGLTexture} texture The texture.\n * @param {import(\"../DataTile.js\").Data} data The pixel data.\n * @param {import(\"../size.js\").Size} size The pixel size.\n * @param {number} bandCount The band count.\n * @param {boolean} interpolate Interpolate when resampling.\n */\n\n\nfunction uploadDataTexture(helper, texture, data, size, bandCount, interpolate) {\n  var gl = helper.getGL();\n  bindAndConfigure(gl, texture, interpolate);\n  var bytesPerRow = data.byteLength / size[1];\n  var unpackAlignment = 1;\n\n  if (bytesPerRow % 8 === 0) {\n    unpackAlignment = 8;\n  } else if (bytesPerRow % 4 === 0) {\n    unpackAlignment = 4;\n  } else if (bytesPerRow % 2 === 0) {\n    unpackAlignment = 2;\n  }\n\n  var format;\n\n  switch (bandCount) {\n    case 1:\n      {\n        format = gl.LUMINANCE;\n        break;\n      }\n\n    case 2:\n      {\n        format = gl.LUMINANCE_ALPHA;\n        break;\n      }\n\n    case 3:\n      {\n        format = gl.RGB;\n        break;\n      }\n\n    case 4:\n      {\n        format = gl.RGBA;\n        break;\n      }\n\n    default:\n      {\n        throw new Error(\"Unsupported number of bands: \" + bandCount);\n      }\n  }\n\n  var textureType;\n\n  if (data instanceof Float32Array) {\n    textureType = gl.FLOAT;\n    helper.getExtension('OES_texture_float');\n    helper.getExtension('OES_texture_float_linear');\n  } else {\n    textureType = gl.UNSIGNED_BYTE;\n  }\n\n  var oldUnpackAlignment = gl.getParameter(gl.UNPACK_ALIGNMENT);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, unpackAlignment);\n  gl.texImage2D(gl.TEXTURE_2D, 0, format, size[0], size[1], 0, format, textureType, data);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, oldUnpackAlignment);\n}\n/**\n * @typedef {import(\"../DataTile.js\").default|ImageTile|ReprojTile} TileType\n */\n\n\nvar TileTexture =\n/** @class */\nfunction (_super) {\n  __extends(TileTexture, _super);\n  /**\n   * @param {TileType} tile The tile.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} grid Tile grid.\n   * @param {import(\"../webgl/Helper.js\").default} helper WebGL helper.\n   */\n\n\n  function TileTexture(tile, grid, helper) {\n    var _this = _super.call(this) || this;\n    /**\n     * @type {TileType}\n     */\n\n\n    _this.tile;\n    /**\n     * @type {Array<WebGLTexture>}\n     */\n\n    _this.textures = [];\n    _this.handleTileChange_ = _this.handleTileChange_.bind(_this);\n    _this.size = toSize(grid.getTileSize(tile.tileCoord[0]));\n    _this.bandCount = NaN;\n    _this.helper_ = helper;\n    var coords = new WebGLArrayBuffer(ARRAY_BUFFER, STATIC_DRAW);\n    coords.fromArray([0, 1, 1, 1, 1, 0, 0, 0]);\n    helper.flushBufferData(coords);\n    _this.coords = coords;\n\n    _this.setTile(tile);\n\n    return _this;\n  }\n  /**\n   * @param {TileType} tile Tile.\n   */\n\n\n  TileTexture.prototype.setTile = function (tile) {\n    if (tile !== this.tile) {\n      if (this.tile) {\n        this.tile.removeEventListener(EventType.CHANGE, this.handleTileChange_);\n      }\n\n      this.tile = tile;\n      this.textures.length = 0;\n      this.loaded = tile.getState() === TileState.LOADED;\n\n      if (this.loaded) {\n        this.uploadTile_();\n      } else {\n        tile.addEventListener(EventType.CHANGE, this.handleTileChange_);\n      }\n    }\n  };\n\n  TileTexture.prototype.uploadTile_ = function () {\n    var helper = this.helper_;\n    var gl = helper.getGL();\n    var tile = this.tile;\n\n    if (tile instanceof ImageTile || tile instanceof ReprojTile) {\n      var texture = gl.createTexture();\n      this.textures.push(texture);\n      this.bandCount = 4;\n      uploadImageTexture(gl, texture, tile.getImage(), tile.interpolate);\n      return;\n    }\n\n    var data = tile.getData();\n    var isFloat = data instanceof Float32Array;\n    var pixelCount = this.size[0] * this.size[1];\n    var DataType = isFloat ? Float32Array : Uint8Array;\n    var bytesPerElement = DataType.BYTES_PER_ELEMENT;\n    var bytesPerRow = data.byteLength / this.size[1];\n    this.bandCount = Math.floor(bytesPerRow / bytesPerElement / this.size[0]);\n    var textureCount = Math.ceil(this.bandCount / 4);\n\n    if (textureCount === 1) {\n      var texture = gl.createTexture();\n      this.textures.push(texture);\n      uploadDataTexture(helper, texture, data, this.size, this.bandCount, tile.interpolate);\n      return;\n    }\n\n    var textureDataArrays = new Array(textureCount);\n\n    for (var textureIndex = 0; textureIndex < textureCount; ++textureIndex) {\n      var texture = gl.createTexture();\n      this.textures.push(texture);\n      var bandCount = textureIndex < textureCount - 1 ? 4 : this.bandCount % 4;\n      textureDataArrays[textureIndex] = new DataType(pixelCount * bandCount);\n    }\n\n    var dataIndex = 0;\n    var rowOffset = 0;\n    var colCount = this.size[0] * this.bandCount;\n\n    for (var rowIndex = 0; rowIndex < this.size[1]; ++rowIndex) {\n      for (var colIndex = 0; colIndex < colCount; ++colIndex) {\n        var dataValue = data[rowOffset + colIndex];\n        var pixelIndex = Math.floor(dataIndex / this.bandCount);\n        var bandIndex = colIndex % this.bandCount;\n        var textureIndex = Math.floor(bandIndex / 4);\n        var textureData = textureDataArrays[textureIndex];\n        var bandCount = textureData.length / pixelCount;\n        var textureBandIndex = bandIndex % 4;\n        textureData[pixelIndex * bandCount + textureBandIndex] = dataValue;\n        ++dataIndex;\n      }\n\n      rowOffset += bytesPerRow / bytesPerElement;\n    }\n\n    for (var textureIndex = 0; textureIndex < textureCount; ++textureIndex) {\n      var texture = this.textures[textureIndex];\n      var textureData = textureDataArrays[textureIndex];\n      var bandCount = textureData.length / pixelCount;\n      uploadDataTexture(helper, texture, textureData, this.size, bandCount, tile.interpolate);\n    }\n  };\n\n  TileTexture.prototype.handleTileChange_ = function () {\n    if (this.tile.getState() === TileState.LOADED) {\n      this.loaded = true;\n      this.uploadTile_();\n      this.dispatchEvent(EventType.CHANGE);\n    }\n  };\n\n  TileTexture.prototype.disposeInternal = function () {\n    var gl = this.helper_.getGL();\n    this.helper_.deleteBuffer(this.coords);\n\n    for (var i = 0; i < this.textures.length; ++i) {\n      gl.deleteTexture(this.textures[i]);\n    }\n\n    this.tile.removeEventListener(EventType.CHANGE, this.handleTileChange_);\n  };\n\n  return TileTexture;\n}(EventTarget);\n\nexport default TileTexture;","/**\n * @module ol/webgl/ContextEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LOST: 'webglcontextlost',\n  RESTORED: 'webglcontextrestored'\n};","/**\n * @module ol/webgl/PostProcessingPass\n */\nimport { getUid } from '../util.js';\nvar DEFAULT_VERTEX_SHADER = \"\\n  precision mediump float;\\n  \\n  attribute vec2 a_position;\\n  varying vec2 v_texCoord;\\n  varying vec2 v_screenCoord;\\n  \\n  uniform vec2 u_screenSize;\\n   \\n  void main() {\\n    v_texCoord = a_position * 0.5 + 0.5;\\n    v_screenCoord = v_texCoord * u_screenSize;\\n    gl_Position = vec4(a_position, 0.0, 1.0);\\n  }\\n\";\nvar DEFAULT_FRAGMENT_SHADER = \"\\n  precision mediump float;\\n   \\n  uniform sampler2D u_image;\\n  uniform float u_opacity;\\n   \\n  varying vec2 v_texCoord;\\n   \\n  void main() {\\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\\n  }\\n\";\n/**\n * @typedef {Object} Options\n * @property {WebGLRenderingContext} webGlContext WebGL context; mandatory.\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas that will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object<string,import(\"./Helper\").UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n\n/**\n * @typedef {Object} UniformInternalDescription\n * @property {import(\"./Helper\").UniformValue} value Value\n * @property {number} location Location\n * @property {WebGLTexture} [texture] Texture\n * @private\n */\n\n/**\n * @classdesc\n * This class is used to define Post Processing passes with custom shaders and uniforms.\n * This is used internally by {@link module:ol/webgl/Helper~WebGLHelper}.\n *\n * Please note that the final output on the DOM canvas is expected to have premultiplied alpha, which means that\n * a pixel which is 100% red with an opacity of 50% must have a color of (r=0.5, g=0, b=0, a=0.5).\n * Failing to provide pixel colors with premultiplied alpha will result in render anomalies.\n *\n * The default post-processing pass does *not* multiply color values with alpha value, it expects color values to be\n * premultiplied.\n *\n * Default shaders are shown hereafter:\n *\n * * Vertex shader:\n *\n *   ```\n *   precision mediump float;\n *\n *   attribute vec2 a_position;\n *   varying vec2 v_texCoord;\n *   varying vec2 v_screenCoord;\n *\n *   uniform vec2 u_screenSize;\n *\n *   void main() {\n *     v_texCoord = a_position * 0.5 + 0.5;\n *     v_screenCoord = v_texCoord * u_screenSize;\n *     gl_Position = vec4(a_position, 0.0, 1.0);\n *   }\n *   ```\n *\n * * Fragment shader:\n *\n *   ```\n *   precision mediump float;\n *\n *   uniform sampler2D u_image;\n *   uniform float u_opacity;\n *\n *   varying vec2 v_texCoord;\n *\n *   void main() {\n *     gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n *   }\n *   ```\n *\n * @api\n */\n\nvar WebGLPostProcessingPass =\n/** @class */\nfunction () {\n  /**\n   * @param {Options} options Options.\n   */\n  function WebGLPostProcessingPass(options) {\n    this.gl_ = options.webGlContext;\n    var gl = this.gl_;\n    this.scaleRatio_ = options.scaleRatio || 1;\n    this.renderTargetTexture_ = gl.createTexture();\n    this.renderTargetTextureSize_ = null;\n    this.frameBuffer_ = gl.createFramebuffer(); // compile the program for the frame buffer\n    // TODO: make compilation errors show up\n\n    var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, options.vertexShader || DEFAULT_VERTEX_SHADER);\n    gl.compileShader(vertexShader);\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, options.fragmentShader || DEFAULT_FRAGMENT_SHADER);\n    gl.compileShader(fragmentShader);\n    this.renderTargetProgram_ = gl.createProgram();\n    gl.attachShader(this.renderTargetProgram_, vertexShader);\n    gl.attachShader(this.renderTargetProgram_, fragmentShader);\n    gl.linkProgram(this.renderTargetProgram_); // bind the vertices buffer for the frame buffer\n\n    this.renderTargetVerticesBuffer_ = gl.createBuffer();\n    var verticesArray = [-1, -1, 1, -1, -1, 1, 1, -1, 1, 1, -1, 1];\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.renderTargetVerticesBuffer_);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesArray), gl.STATIC_DRAW);\n    this.renderTargetAttribLocation_ = gl.getAttribLocation(this.renderTargetProgram_, 'a_position');\n    this.renderTargetUniformLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_screenSize');\n    this.renderTargetOpacityLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_opacity');\n    this.renderTargetTextureLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_image');\n    /**\n     * Holds info about custom uniforms used in the post processing pass\n     * @type {Array<UniformInternalDescription>}\n     * @private\n     */\n\n    this.uniforms_ = [];\n    options.uniforms && Object.keys(options.uniforms).forEach(function (name) {\n      this.uniforms_.push({\n        value: options.uniforms[name],\n        location: gl.getUniformLocation(this.renderTargetProgram_, name)\n      });\n    }.bind(this));\n  }\n  /**\n   * Get the WebGL rendering context\n   * @return {WebGLRenderingContext} The rendering context.\n   * @api\n   */\n\n\n  WebGLPostProcessingPass.prototype.getGL = function () {\n    return this.gl_;\n  };\n  /**\n   * Initialize the render target texture of the post process, make sure it is at the\n   * right size and bind it as a render target for the next draw calls.\n   * The last step to be initialized will be the one where the primitives are rendered.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @api\n   */\n\n\n  WebGLPostProcessingPass.prototype.init = function (frameState) {\n    var gl = this.getGL();\n    var textureSize = [gl.drawingBufferWidth * this.scaleRatio_, gl.drawingBufferHeight * this.scaleRatio_]; // rendering goes to my buffer\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.getFrameBuffer());\n    gl.viewport(0, 0, textureSize[0], textureSize[1]); // if size has changed: adjust canvas & render target texture\n\n    if (!this.renderTargetTextureSize_ || this.renderTargetTextureSize_[0] !== textureSize[0] || this.renderTargetTextureSize_[1] !== textureSize[1]) {\n      this.renderTargetTextureSize_ = textureSize; // create a new texture\n\n      var level = 0;\n      var internalFormat = gl.RGBA;\n      var border = 0;\n      var format = gl.RGBA;\n      var type = gl.UNSIGNED_BYTE;\n      var data = null;\n      gl.bindTexture(gl.TEXTURE_2D, this.renderTargetTexture_);\n      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, textureSize[0], textureSize[1], border, format, type, data);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE); // bind the texture to the framebuffer\n\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.renderTargetTexture_, 0);\n    }\n  };\n  /**\n   * Render to the next postprocessing pass (or to the canvas if final pass).\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @param {WebGLPostProcessingPass} [nextPass] Next pass, optional\n   * @param {function(WebGLRenderingContext, import(\"../PluggableMap.js\").FrameState):void} [preCompose] Called before composing.\n   * @param {function(WebGLRenderingContext, import(\"../PluggableMap.js\").FrameState):void} [postCompose] Called before composing.\n   * @api\n   */\n\n\n  WebGLPostProcessingPass.prototype.apply = function (frameState, nextPass, preCompose, postCompose) {\n    var gl = this.getGL();\n    var size = frameState.size;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, nextPass ? nextPass.getFrameBuffer() : null);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, this.renderTargetTexture_);\n\n    if (!nextPass) {\n      // clear the canvas if we are the first to render to it\n      // and preserveDrawingBuffer is true\n      var canvasId = getUid(gl.canvas);\n\n      if (!frameState.renderTargets[canvasId]) {\n        var attributes = gl.getContextAttributes();\n\n        if (attributes && attributes.preserveDrawingBuffer) {\n          gl.clearColor(0.0, 0.0, 0.0, 0.0);\n          gl.clear(gl.COLOR_BUFFER_BIT);\n        }\n\n        frameState.renderTargets[canvasId] = true;\n      }\n    }\n\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.renderTargetVerticesBuffer_);\n    gl.useProgram(this.renderTargetProgram_);\n    gl.enableVertexAttribArray(this.renderTargetAttribLocation_);\n    gl.vertexAttribPointer(this.renderTargetAttribLocation_, 2, gl.FLOAT, false, 0, 0);\n    gl.uniform2f(this.renderTargetUniformLocation_, size[0], size[1]);\n    gl.uniform1i(this.renderTargetTextureLocation_, 0);\n    var opacity = frameState.layerStatesArray[frameState.layerIndex].opacity;\n    gl.uniform1f(this.renderTargetOpacityLocation_, opacity);\n    this.applyUniforms(frameState);\n\n    if (preCompose) {\n      preCompose(gl, frameState);\n    }\n\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n\n    if (postCompose) {\n      postCompose(gl, frameState);\n    }\n  };\n  /**\n   * @return {WebGLFramebuffer} Frame buffer\n   * @api\n   */\n\n\n  WebGLPostProcessingPass.prototype.getFrameBuffer = function () {\n    return this.frameBuffer_;\n  };\n  /**\n   * Sets the custom uniforms based on what was given in the constructor.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n\n\n  WebGLPostProcessingPass.prototype.applyUniforms = function (frameState) {\n    var gl = this.getGL();\n    var value;\n    var textureSlot = 1;\n    this.uniforms_.forEach(function (uniform) {\n      value = typeof uniform.value === 'function' ? uniform.value(frameState) : uniform.value; // apply value based on type\n\n      if (value instanceof HTMLCanvasElement || value instanceof ImageData) {\n        // create a texture & put data\n        if (!uniform.texture) {\n          uniform.texture = gl.createTexture();\n        }\n\n        gl.activeTexture(gl[\"TEXTURE\" + textureSlot]);\n        gl.bindTexture(gl.TEXTURE_2D, uniform.texture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n        if (value instanceof ImageData) {\n          gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, value.width, value.height, 0, gl.UNSIGNED_BYTE, new Uint8Array(value.data));\n        } else {\n          gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, value);\n        } // fill texture slots\n\n\n        gl.uniform1i(uniform.location, textureSlot++);\n      } else if (Array.isArray(value)) {\n        switch (value.length) {\n          case 2:\n            gl.uniform2f(uniform.location, value[0], value[1]);\n            return;\n\n          case 3:\n            gl.uniform3f(uniform.location, value[0], value[1], value[2]);\n            return;\n\n          case 4:\n            gl.uniform4f(uniform.location, value[0], value[1], value[2], value[3]);\n            return;\n\n          default:\n            return;\n        }\n      } else if (typeof value === 'number') {\n        gl.uniform1f(uniform.location, value);\n      }\n    });\n  };\n\n  return WebGLPostProcessingPass;\n}();\n\nexport default WebGLPostProcessingPass;","/**\n * @module ol/vec/mat4\n */\n\n/**\n * @return {Array<number>} \"4x4 matrix representing a 3D identity transform.\"\n */\nexport function create() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\n/**\n * @param {Array<number>} mat4 Flattened 4x4 matrix receiving the result.\n * @param {import(\"../transform.js\").Transform} transform Transformation matrix.\n * @return {Array<number>} \"2D transformation matrix as flattened 4x4 matrix.\"\n */\n\nexport function fromTransform(mat4, transform) {\n  mat4[0] = transform[0];\n  mat4[1] = transform[1];\n  mat4[4] = transform[2];\n  mat4[5] = transform[3];\n  mat4[12] = transform[4];\n  mat4[13] = transform[5];\n  return mat4;\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/webgl/Helper\n */\n\n\nimport ContextEventType from '../webgl/ContextEventType.js';\nimport Disposable from '../Disposable.js';\nimport WebGLPostProcessingPass from './PostProcessingPass.js';\nimport { FLOAT, UNSIGNED_BYTE, UNSIGNED_INT, UNSIGNED_SHORT, getContext } from '../webgl.js';\nimport { clear } from '../obj.js';\nimport { compose as composeTransform, create as createTransform, reset as resetTransform, rotate as rotateTransform, scale as scaleTransform } from '../transform.js';\nimport { create, fromTransform } from '../vec/mat4.js';\nimport { getUid } from '../util.js';\n/**\n * @typedef {Object} BufferCacheEntry\n * @property {import(\"./Buffer.js\").default} buffer Buffer.\n * @property {WebGLBuffer} webGlBuffer WebGlBuffer.\n */\n\n/**\n * Shader types, either `FRAGMENT_SHADER` or `VERTEX_SHADER`.\n * @enum {number}\n */\n\nexport var ShaderType = {\n  FRAGMENT_SHADER: 0x8b30,\n  VERTEX_SHADER: 0x8b31\n};\n/**\n * Uniform names used in the default shaders: `PROJECTION_MATRIX`, `OFFSET_SCALE_MATRIX`.\n * and `OFFSET_ROTATION_MATRIX`.\n * @enum {string}\n */\n\nexport var DefaultUniform = {\n  PROJECTION_MATRIX: 'u_projectionMatrix',\n  OFFSET_SCALE_MATRIX: 'u_offsetScaleMatrix',\n  OFFSET_ROTATION_MATRIX: 'u_offsetRotateMatrix',\n  TIME: 'u_time',\n  ZOOM: 'u_zoom',\n  RESOLUTION: 'u_resolution'\n};\n/**\n * Attribute types, either `UNSIGNED_BYTE`, `UNSIGNED_SHORT`, `UNSIGNED_INT` or `FLOAT`\n * Note: an attribute stored in a `Float32Array` should be of type `FLOAT`.\n * @enum {number}\n */\n\nexport var AttributeType = {\n  UNSIGNED_BYTE: UNSIGNED_BYTE,\n  UNSIGNED_SHORT: UNSIGNED_SHORT,\n  UNSIGNED_INT: UNSIGNED_INT,\n  FLOAT: FLOAT\n};\n/**\n * Description of an attribute in a buffer\n * @typedef {Object} AttributeDescription\n * @property {string} name Attribute name to use in shaders\n * @property {number} size Number of components per attributes\n * @property {AttributeType} [type] Attribute type, i.e. number of bytes used to store the value. This is\n * determined by the class of typed array which the buffer uses (eg. `Float32Array` for a `FLOAT` attribute).\n * Default is `FLOAT`.\n */\n\n/**\n * @typedef {number|Array<number>|HTMLCanvasElement|HTMLImageElement|ImageData|import(\"../transform\").Transform} UniformLiteralValue\n */\n\n/**\n * Uniform value can be a number, array of numbers (2 to 4), canvas element or a callback returning\n * one of the previous types.\n * @typedef {UniformLiteralValue|function(import(\"../PluggableMap.js\").FrameState):UniformLiteralValue} UniformValue\n */\n\n/**\n * @typedef {Object} PostProcessesOptions\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas which will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object<string,UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n\n/**\n * @typedef {Object} Options\n * @property {Object<string,UniformValue>} [uniforms] Uniform definitions; property names must match the uniform\n * names in the provided or default shaders.\n * @property {Array<PostProcessesOptions>} [postProcesses] Post-processes definitions\n * @property {string} [canvasCacheKey] The cache key for the canvas.\n */\n\n/**\n * @typedef {Object} UniformInternalDescription\n * @property {string} name Name\n * @property {UniformValue} [value] Value\n * @property {WebGLTexture} [texture] Texture\n * @private\n */\n\n/**\n * @typedef {Object} CanvasCacheItem\n * @property {HTMLCanvasElement} canvas Canvas element.\n * @property {number} users The count of users of this canvas.\n */\n\n/**\n * @type {Object<string,CanvasCacheItem>}\n */\n\nvar canvasCache = {};\n/**\n * @param {string} key The cache key for the canvas.\n * @return {string} The shared cache key.\n */\n\nfunction getSharedCanvasCacheKey(key) {\n  return 'shared/' + key;\n}\n\nvar uniqueCanvasCacheKeyCount = 0;\n/**\n * @return {string} The unique cache key.\n */\n\nfunction getUniqueCanvasCacheKey() {\n  var key = 'unique/' + uniqueCanvasCacheKeyCount;\n  uniqueCanvasCacheKeyCount += 1;\n  return key;\n}\n/**\n * @param {string} key The cache key for the canvas.\n * @return {HTMLCanvasElement} The canvas.\n */\n\n\nfunction getCanvas(key) {\n  var cacheItem = canvasCache[key];\n\n  if (!cacheItem) {\n    var canvas = document.createElement('canvas');\n    canvas.style.position = 'absolute';\n    canvas.style.left = '0';\n    cacheItem = {\n      users: 0,\n      canvas: canvas\n    };\n    canvasCache[key] = cacheItem;\n  }\n\n  cacheItem.users += 1;\n  return cacheItem.canvas;\n}\n/**\n * @param {string} key The cache key for the canvas.\n */\n\n\nfunction releaseCanvas(key) {\n  var cacheItem = canvasCache[key];\n\n  if (!cacheItem) {\n    return;\n  }\n\n  cacheItem.users -= 1;\n\n  if (cacheItem.users > 0) {\n    return;\n  }\n\n  var canvas = cacheItem.canvas;\n  var gl = getContext(canvas);\n  var extension = gl.getExtension('WEBGL_lose_context');\n\n  if (extension) {\n    extension.loseContext();\n  }\n\n  delete canvasCache[key];\n}\n/**\n * @classdesc\n * This class is intended to provide low-level functions related to WebGL rendering, so that accessing\n * directly the WebGL API should not be required anymore.\n *\n * Several operations are handled by the `WebGLHelper` class:\n *\n * ### Define custom shaders and uniforms\n *\n *   *Shaders* are low-level programs executed on the GPU and written in GLSL. There are two types of shaders:\n *\n *   Vertex shaders are used to manipulate the position and attribute of *vertices* of rendered primitives (ie. corners of a square).\n *   Outputs are:\n *\n *   * `gl_Position`: position of the vertex in screen space\n *\n *   * Varyings usually prefixed with `v_` are passed on to the fragment shader\n *\n *   Fragment shaders are used to control the actual color of the pixels drawn on screen. Their only output is `gl_FragColor`.\n *\n *   Both shaders can take *uniforms* or *attributes* as input. Attributes are explained later. Uniforms are common, read-only values that\n *   can be changed at every frame and can be of type float, arrays of float or images.\n *\n *   Shaders must be compiled and assembled into a program like so:\n *   ```js\n *   // here we simply create two shaders and assemble them in a program which is then used\n *   // for subsequent rendering calls\n *   const vertexShader = new WebGLVertex(VERTEX_SHADER);\n *   const fragmentShader = new WebGLFragment(FRAGMENT_SHADER);\n *   const program = this.context.getProgram(fragmentShader, vertexShader);\n *   helper.useProgram(this.program);\n *   ```\n *\n *   Uniforms are defined using the `uniforms` option and can either be explicit values or callbacks taking the frame state as argument.\n *   You can also change their value along the way like so:\n *   ```js\n *   helper.setUniformFloatValue('u_value', valueAsNumber);\n *   ```\n *\n * ### Defining post processing passes\n *\n *   *Post processing* describes the act of rendering primitives to a texture, and then rendering this texture to the final canvas\n *   while applying special effects in screen space.\n *   Typical uses are: blurring, color manipulation, depth of field, filtering...\n *\n *   The `WebGLHelper` class offers the possibility to define post processes at creation time using the `postProcesses` option.\n *   A post process step accepts the following options:\n *\n *   * `fragmentShader` and `vertexShader`: text literals in GLSL language that will be compiled and used in the post processing step.\n *   * `uniforms`: uniforms can be defined for the post processing steps just like for the main render.\n *   * `scaleRatio`: allows using an intermediate texture smaller or higher than the final canvas in the post processing step.\n *     This is typically used in blur steps to reduce the performance overhead by using an already downsampled texture as input.\n *\n *   The {@link module:ol/webgl/PostProcessingPass~WebGLPostProcessingPass} class is used internally, refer to its documentation for more info.\n *\n * ### Binding WebGL buffers and flushing data into them\n *\n *   Data that must be passed to the GPU has to be transferred using {@link module:ol/webgl/Buffer~WebGLArrayBuffer} objects.\n *   A buffer has to be created only once, but must be bound every time the buffer content will be used for rendering.\n *   This is done using {@link bindBuffer}.\n *   When the buffer's array content has changed, the new data has to be flushed to the GPU memory; this is done using\n *   {@link flushBufferData}. Note: this operation is expensive and should be done as infrequently as possible.\n *\n *   When binding an array buffer, a `target` parameter must be given: it should be either {@link module:ol/webgl.ARRAY_BUFFER}\n *   (if the buffer contains vertices data) or {@link module:ol/webgl.ELEMENT_ARRAY_BUFFER} (if the buffer contains indices data).\n *\n *   Examples below:\n *   ```js\n *   // at initialization phase\n *   const verticesBuffer = new WebGLArrayBuffer([], DYNAMIC_DRAW);\n *   const indicesBuffer = new WebGLArrayBuffer([], DYNAMIC_DRAW);\n *\n *   // when array values have changed\n *   helper.flushBufferData(ARRAY_BUFFER, this.verticesBuffer);\n *   helper.flushBufferData(ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n *\n *   // at rendering phase\n *   helper.bindBuffer(ARRAY_BUFFER, this.verticesBuffer);\n *   helper.bindBuffer(ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n *   ```\n *\n * ### Specifying attributes\n *\n *   The GPU only receives the data as arrays of numbers. These numbers must be handled differently depending on what it describes (position, texture coordinate...).\n *   Attributes are used to specify these uses. Use {@link enableAttributeArray_} and either\n *   the default attribute names in {@link module:ol/webgl/Helper.DefaultAttrib} or custom ones.\n *\n *   Please note that you will have to specify the type and offset of the attributes in the data array. You can refer to the documentation of [WebGLRenderingContext.vertexAttribPointer](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer) for more explanation.\n *   ```js\n *   // here we indicate that the data array has the following structure:\n *   // [posX, posY, offsetX, offsetY, texCoordU, texCoordV, posX, posY, ...]\n *   helper.enableAttributes([\n *     {\n *        name: 'a_position',\n *        size: 2\n *     },\n *     {\n *       name: 'a_offset',\n *       size: 2\n *     },\n *     {\n *       name: 'a_texCoord',\n *       size: 2\n *     }\n *   ])\n *   ```\n *\n * ### Rendering primitives\n *\n *   Once all the steps above have been achieved, rendering primitives to the screen is done using {@link prepareDraw}, {@link drawElements} and {@link finalizeDraw}.\n *   ```js\n *   // frame preparation step\n *   helper.prepareDraw(frameState);\n *\n *   // call this for every data array that has to be rendered on screen\n *   helper.drawElements(0, this.indicesBuffer.getArray().length);\n *\n *   // finalize the rendering by applying post processes\n *   helper.finalizeDraw(frameState);\n *   ```\n *\n * For an example usage of this class, refer to {@link module:ol/renderer/webgl/PointsLayer~WebGLPointsLayerRenderer}.\n *\n *\n * @api\n */\n\n\nvar WebGLHelper =\n/** @class */\nfunction (_super) {\n  __extends(WebGLHelper, _super);\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n\n\n  function WebGLHelper(opt_options) {\n    var _this = _super.call(this) || this;\n\n    var options = opt_options || {};\n    /** @private */\n\n    _this.boundHandleWebGLContextLost_ = _this.handleWebGLContextLost.bind(_this);\n    /** @private */\n\n    _this.boundHandleWebGLContextRestored_ = _this.handleWebGLContextRestored.bind(_this);\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.canvasCacheKey_ = options.canvasCacheKey ? getSharedCanvasCacheKey(options.canvasCacheKey) : getUniqueCanvasCacheKey();\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n\n    _this.canvas_ = getCanvas(_this.canvasCacheKey_);\n    /**\n     * @private\n     * @type {WebGLRenderingContext}\n     */\n\n    _this.gl_ = getContext(_this.canvas_);\n    /**\n     * @private\n     * @type {!Object<string, BufferCacheEntry>}\n     */\n\n    _this.bufferCache_ = {};\n    /**\n     * @private\n     * @type {Object<string, Object>}\n     */\n\n    _this.extensionCache_ = {};\n    /**\n     * @private\n     * @type {WebGLProgram}\n     */\n\n    _this.currentProgram_ = null;\n\n    _this.canvas_.addEventListener(ContextEventType.LOST, _this.boundHandleWebGLContextLost_);\n\n    _this.canvas_.addEventListener(ContextEventType.RESTORED, _this.boundHandleWebGLContextRestored_);\n    /**\n     * @private\n     * @type {import(\"../transform.js\").Transform}\n     */\n\n\n    _this.offsetRotateMatrix_ = createTransform();\n    /**\n     * @private\n     * @type {import(\"../transform.js\").Transform}\n     */\n\n    _this.offsetScaleMatrix_ = createTransform();\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.tmpMat4_ = create();\n    /**\n     * @private\n     * @type {Object<string, WebGLUniformLocation>}\n     */\n\n    _this.uniformLocations_ = {};\n    /**\n     * @private\n     * @type {Object<string, number>}\n     */\n\n    _this.attribLocations_ = {};\n    /**\n     * Holds info about custom uniforms used in the post processing pass.\n     * If the uniform is a texture, the WebGL Texture object will be stored here.\n     * @type {Array<UniformInternalDescription>}\n     * @private\n     */\n\n    _this.uniforms_ = [];\n\n    if (options.uniforms) {\n      _this.setUniforms(options.uniforms);\n    }\n\n    var gl = _this.getGL();\n    /**\n     * An array of PostProcessingPass objects is kept in this variable, built from the steps provided in the\n     * options. If no post process was given, a default one is used (so as not to have to make an exception to\n     * the frame buffer logic).\n     * @type {Array<WebGLPostProcessingPass>}\n     * @private\n     */\n\n\n    _this.postProcessPasses_ = options.postProcesses ? options.postProcesses.map(function (options) {\n      return new WebGLPostProcessingPass({\n        webGlContext: gl,\n        scaleRatio: options.scaleRatio,\n        vertexShader: options.vertexShader,\n        fragmentShader: options.fragmentShader,\n        uniforms: options.uniforms\n      });\n    }) : [new WebGLPostProcessingPass({\n      webGlContext: gl\n    })];\n    /**\n     * @type {string|null}\n     * @private\n     */\n\n    _this.shaderCompileErrors_ = null;\n    /**\n     * @type {number}\n     * @private\n     */\n\n    _this.startTime_ = Date.now();\n    return _this;\n  }\n  /**\n   * @param {Object<string, UniformValue>} uniforms Uniform definitions.\n   */\n\n\n  WebGLHelper.prototype.setUniforms = function (uniforms) {\n    this.uniforms_ = [];\n\n    for (var name_1 in uniforms) {\n      this.uniforms_.push({\n        name: name_1,\n        value: uniforms[name_1]\n      });\n    }\n\n    this.uniformLocations_ = {};\n  };\n  /**\n   * @param {string} canvasCacheKey The canvas cache key.\n   * @return {boolean} The provided key matches the one this helper was constructed with.\n   */\n\n\n  WebGLHelper.prototype.canvasCacheKeyMatches = function (canvasCacheKey) {\n    return this.canvasCacheKey_ === getSharedCanvasCacheKey(canvasCacheKey);\n  };\n  /**\n   * Get a WebGL extension.  If the extension is not supported, null is returned.\n   * Extensions are cached after they are enabled for the first time.\n   * @param {string} name The extension name.\n   * @return {Object} The extension or null if not supported.\n   */\n\n\n  WebGLHelper.prototype.getExtension = function (name) {\n    if (name in this.extensionCache_) {\n      return this.extensionCache_[name];\n    }\n\n    var extension = this.gl_.getExtension(name);\n    this.extensionCache_[name] = extension;\n    return extension;\n  };\n  /**\n   * Just bind the buffer if it's in the cache. Otherwise create\n   * the WebGL buffer, bind it, populate it, and add an entry to\n   * the cache.\n   * @param {import(\"./Buffer\").default} buffer Buffer.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.bindBuffer = function (buffer) {\n    var gl = this.getGL();\n    var bufferKey = getUid(buffer);\n    var bufferCache = this.bufferCache_[bufferKey];\n\n    if (!bufferCache) {\n      var webGlBuffer = gl.createBuffer();\n      bufferCache = {\n        buffer: buffer,\n        webGlBuffer: webGlBuffer\n      };\n      this.bufferCache_[bufferKey] = bufferCache;\n    }\n\n    gl.bindBuffer(buffer.getType(), bufferCache.webGlBuffer);\n  };\n  /**\n   * Update the data contained in the buffer array; this is required for the\n   * new data to be rendered\n   * @param {import(\"./Buffer\").default} buffer Buffer.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.flushBufferData = function (buffer) {\n    var gl = this.getGL();\n    this.bindBuffer(buffer);\n    gl.bufferData(buffer.getType(), buffer.getArray(), buffer.getUsage());\n  };\n  /**\n   * @param {import(\"./Buffer.js\").default} buf Buffer.\n   */\n\n\n  WebGLHelper.prototype.deleteBuffer = function (buf) {\n    var gl = this.getGL();\n    var bufferKey = getUid(buf);\n    var bufferCacheEntry = this.bufferCache_[bufferKey];\n\n    if (bufferCacheEntry && !gl.isContextLost()) {\n      gl.deleteBuffer(bufferCacheEntry.webGlBuffer);\n    }\n\n    delete this.bufferCache_[bufferKey];\n  };\n  /**\n   * Clean up.\n   */\n\n\n  WebGLHelper.prototype.disposeInternal = function () {\n    this.canvas_.removeEventListener(ContextEventType.LOST, this.boundHandleWebGLContextLost_);\n    this.canvas_.removeEventListener(ContextEventType.RESTORED, this.boundHandleWebGLContextRestored_);\n    releaseCanvas(this.canvasCacheKey_);\n    delete this.gl_;\n    delete this.canvas_;\n  };\n  /**\n   * Clear the buffer & set the viewport to draw.\n   * Post process passes will be initialized here, the first one being bound as a render target for\n   * subsequent draw calls.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @param {boolean} [opt_disableAlphaBlend] If true, no alpha blending will happen.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.prepareDraw = function (frameState, opt_disableAlphaBlend) {\n    var gl = this.getGL();\n    var canvas = this.getCanvas();\n    var size = frameState.size;\n    var pixelRatio = frameState.pixelRatio;\n    canvas.width = size[0] * pixelRatio;\n    canvas.height = size[1] * pixelRatio;\n    canvas.style.width = size[0] + 'px';\n    canvas.style.height = size[1] + 'px';\n    gl.useProgram(this.currentProgram_); // loop backwards in post processes list\n\n    for (var i = this.postProcessPasses_.length - 1; i >= 0; i--) {\n      this.postProcessPasses_[i].init(frameState);\n    }\n\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    gl.clearColor(0.0, 0.0, 0.0, 0.0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.ONE, opt_disableAlphaBlend ? gl.ZERO : gl.ONE_MINUS_SRC_ALPHA);\n    gl.useProgram(this.currentProgram_);\n    this.applyFrameState(frameState);\n    this.applyUniforms(frameState);\n  };\n  /**\n   * Clear the render target & bind it for future draw operations.\n   * This is similar to `prepareDraw`, only post processes will not be applied.\n   * Note: the whole viewport will be drawn to the render target, regardless of its size.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @param {import(\"./RenderTarget.js\").default} renderTarget Render target to draw to\n   * @param {boolean} [opt_disableAlphaBlend] If true, no alpha blending will happen.\n   */\n\n\n  WebGLHelper.prototype.prepareDrawToRenderTarget = function (frameState, renderTarget, opt_disableAlphaBlend) {\n    var gl = this.getGL();\n    var size = renderTarget.getSize();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, renderTarget.getFramebuffer());\n    gl.viewport(0, 0, size[0], size[1]);\n    gl.bindTexture(gl.TEXTURE_2D, renderTarget.getTexture());\n    gl.clearColor(0.0, 0.0, 0.0, 0.0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.ONE, opt_disableAlphaBlend ? gl.ZERO : gl.ONE_MINUS_SRC_ALPHA);\n    gl.useProgram(this.currentProgram_);\n    this.applyFrameState(frameState);\n    this.applyUniforms(frameState);\n  };\n  /**\n   * Execute a draw call based on the currently bound program, texture, buffers, attributes.\n   * @param {number} start Start index.\n   * @param {number} end End index.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.drawElements = function (start, end) {\n    var gl = this.getGL();\n    this.getExtension('OES_element_index_uint');\n    var elementType = gl.UNSIGNED_INT;\n    var elementSize = 4;\n    var numItems = end - start;\n    var offsetInBytes = start * elementSize;\n    gl.drawElements(gl.TRIANGLES, numItems, elementType, offsetInBytes);\n  };\n  /**\n   * Apply the successive post process passes which will eventually render to the actual canvas.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @param {function(WebGLRenderingContext, import(\"../PluggableMap.js\").FrameState):void} [preCompose] Called before composing.\n   * @param {function(WebGLRenderingContext, import(\"../PluggableMap.js\").FrameState):void} [postCompose] Called before composing.\n   */\n\n\n  WebGLHelper.prototype.finalizeDraw = function (frameState, preCompose, postCompose) {\n    // apply post processes using the next one as target\n    for (var i = 0, ii = this.postProcessPasses_.length; i < ii; i++) {\n      if (i === ii - 1) {\n        this.postProcessPasses_[i].apply(frameState, null, preCompose, postCompose);\n      } else {\n        this.postProcessPasses_[i].apply(frameState, this.postProcessPasses_[i + 1]);\n      }\n    }\n  };\n  /**\n   * @return {HTMLCanvasElement} Canvas.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.getCanvas = function () {\n    return this.canvas_;\n  };\n  /**\n   * Get the WebGL rendering context\n   * @return {WebGLRenderingContext} The rendering context.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.getGL = function () {\n    return this.gl_;\n  };\n  /**\n   * Sets the default matrix uniforms for a given frame state. This is called internally in `prepareDraw`.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n\n\n  WebGLHelper.prototype.applyFrameState = function (frameState) {\n    var size = frameState.size;\n    var rotation = frameState.viewState.rotation;\n    var offsetScaleMatrix = resetTransform(this.offsetScaleMatrix_);\n    scaleTransform(offsetScaleMatrix, 2 / size[0], 2 / size[1]);\n    var offsetRotateMatrix = resetTransform(this.offsetRotateMatrix_);\n\n    if (rotation !== 0) {\n      rotateTransform(offsetRotateMatrix, -rotation);\n    }\n\n    this.setUniformMatrixValue(DefaultUniform.OFFSET_SCALE_MATRIX, fromTransform(this.tmpMat4_, offsetScaleMatrix));\n    this.setUniformMatrixValue(DefaultUniform.OFFSET_ROTATION_MATRIX, fromTransform(this.tmpMat4_, offsetRotateMatrix));\n    this.setUniformFloatValue(DefaultUniform.TIME, (Date.now() - this.startTime_) * 0.001);\n    this.setUniformFloatValue(DefaultUniform.ZOOM, frameState.viewState.zoom);\n    this.setUniformFloatValue(DefaultUniform.RESOLUTION, frameState.viewState.resolution);\n  };\n  /**\n   * Sets the custom uniforms based on what was given in the constructor. This is called internally in `prepareDraw`.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n\n\n  WebGLHelper.prototype.applyUniforms = function (frameState) {\n    var gl = this.getGL();\n    var value;\n    var textureSlot = 0;\n    this.uniforms_.forEach(function (uniform) {\n      value = typeof uniform.value === 'function' ? uniform.value(frameState) : uniform.value; // apply value based on type\n\n      if (value instanceof HTMLCanvasElement || value instanceof HTMLImageElement || value instanceof ImageData) {\n        // create a texture & put data\n        if (!uniform.texture) {\n          uniform.prevValue = undefined;\n          uniform.texture = gl.createTexture();\n        }\n\n        gl.activeTexture(gl[\"TEXTURE\" + textureSlot]);\n        gl.bindTexture(gl.TEXTURE_2D, uniform.texture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        var imageReady = !(value instanceof HTMLImageElement) ||\n        /** @type {HTMLImageElement} */\n        value.complete;\n\n        if (imageReady && uniform.prevValue !== value) {\n          uniform.prevValue = value;\n          gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, value);\n        } // fill texture slots by increasing index\n\n\n        gl.uniform1i(this.getUniformLocation(uniform.name), textureSlot++);\n      } else if (Array.isArray(value) && value.length === 6) {\n        this.setUniformMatrixValue(uniform.name, fromTransform(this.tmpMat4_, value));\n      } else if (Array.isArray(value) && value.length <= 4) {\n        switch (value.length) {\n          case 2:\n            gl.uniform2f(this.getUniformLocation(uniform.name), value[0], value[1]);\n            return;\n\n          case 3:\n            gl.uniform3f(this.getUniformLocation(uniform.name), value[0], value[1], value[2]);\n            return;\n\n          case 4:\n            gl.uniform4f(this.getUniformLocation(uniform.name), value[0], value[1], value[2], value[3]);\n            return;\n\n          default:\n            return;\n        }\n      } else if (typeof value === 'number') {\n        gl.uniform1f(this.getUniformLocation(uniform.name), value);\n      }\n    }.bind(this));\n  };\n  /**\n   * Use a program.  If the program is already in use, this will return `false`.\n   * @param {WebGLProgram} program Program.\n   * @return {boolean} Changed.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.useProgram = function (program) {\n    if (program == this.currentProgram_) {\n      return false;\n    } else {\n      var gl = this.getGL();\n      gl.useProgram(program);\n      this.currentProgram_ = program;\n      this.uniformLocations_ = {};\n      this.attribLocations_ = {};\n      return true;\n    }\n  };\n  /**\n   * Will attempt to compile a vertex or fragment shader based on source\n   * On error, the shader will be returned but\n   * `gl.getShaderParameter(shader, gl.COMPILE_STATUS)` will return `true`\n   * Use `gl.getShaderInfoLog(shader)` to have details\n   * @param {string} source Shader source\n   * @param {ShaderType} type VERTEX_SHADER or FRAGMENT_SHADER\n   * @return {WebGLShader} Shader object\n   */\n\n\n  WebGLHelper.prototype.compileShader = function (source, type) {\n    var gl = this.getGL();\n    var shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    return shader;\n  };\n  /**\n   * Create a program for a vertex and fragment shader.  Throws if shader compilation fails.\n   * @param {string} fragmentShaderSource Fragment shader source.\n   * @param {string} vertexShaderSource Vertex shader source.\n   * @return {WebGLProgram} Program\n   * @api\n   */\n\n\n  WebGLHelper.prototype.getProgram = function (fragmentShaderSource, vertexShaderSource) {\n    var gl = this.getGL();\n    var fragmentShader = this.compileShader(fragmentShaderSource, gl.FRAGMENT_SHADER);\n    var vertexShader = this.compileShader(vertexShaderSource, gl.VERTEX_SHADER);\n    var program = gl.createProgram();\n    gl.attachShader(program, fragmentShader);\n    gl.attachShader(program, vertexShader);\n    gl.linkProgram(program);\n\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      var message = \"Fragment shader compliation failed: \" + gl.getShaderInfoLog(fragmentShader);\n      throw new Error(message);\n    }\n\n    gl.deleteShader(fragmentShader);\n\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      var message = \"Vertex shader compilation failed: \" + gl.getShaderInfoLog(vertexShader);\n      throw new Error(message);\n    }\n\n    gl.deleteShader(vertexShader);\n\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      var message = \"GL program linking failed: \" + gl.getShaderInfoLog(vertexShader);\n      throw new Error(message);\n    }\n\n    return program;\n  };\n  /**\n   * Will get the location from the shader or the cache\n   * @param {string} name Uniform name\n   * @return {WebGLUniformLocation} uniformLocation\n   * @api\n   */\n\n\n  WebGLHelper.prototype.getUniformLocation = function (name) {\n    if (this.uniformLocations_[name] === undefined) {\n      this.uniformLocations_[name] = this.getGL().getUniformLocation(this.currentProgram_, name);\n    }\n\n    return this.uniformLocations_[name];\n  };\n  /**\n   * Will get the location from the shader or the cache\n   * @param {string} name Attribute name\n   * @return {number} attribLocation\n   * @api\n   */\n\n\n  WebGLHelper.prototype.getAttributeLocation = function (name) {\n    if (this.attribLocations_[name] === undefined) {\n      this.attribLocations_[name] = this.getGL().getAttribLocation(this.currentProgram_, name);\n    }\n\n    return this.attribLocations_[name];\n  };\n  /**\n   * Modifies the given transform to apply the rotation/translation/scaling of the given frame state.\n   * The resulting transform can be used to convert world space coordinates to view coordinates.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../transform\").Transform} transform Transform to update.\n   * @return {import(\"../transform\").Transform} The updated transform object.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.makeProjectionTransform = function (frameState, transform) {\n    var size = frameState.size;\n    var rotation = frameState.viewState.rotation;\n    var resolution = frameState.viewState.resolution;\n    var center = frameState.viewState.center;\n    resetTransform(transform);\n    composeTransform(transform, 0, 0, 2 / (resolution * size[0]), 2 / (resolution * size[1]), -rotation, -center[0], -center[1]);\n    return transform;\n  };\n  /**\n   * Give a value for a standard float uniform\n   * @param {string} uniform Uniform name\n   * @param {number} value Value\n   * @api\n   */\n\n\n  WebGLHelper.prototype.setUniformFloatValue = function (uniform, value) {\n    this.getGL().uniform1f(this.getUniformLocation(uniform), value);\n  };\n  /**\n   * Give a value for a standard matrix4 uniform\n   * @param {string} uniform Uniform name\n   * @param {Array<number>} value Matrix value\n   * @api\n   */\n\n\n  WebGLHelper.prototype.setUniformMatrixValue = function (uniform, value) {\n    this.getGL().uniformMatrix4fv(this.getUniformLocation(uniform), false, value);\n  };\n  /**\n   * Will set the currently bound buffer to an attribute of the shader program. Used by `#enableAttributes`\n   * internally.\n   * @param {string} attribName Attribute name\n   * @param {number} size Number of components per attributes\n   * @param {number} type UNSIGNED_INT, UNSIGNED_BYTE, UNSIGNED_SHORT or FLOAT\n   * @param {number} stride Stride in bytes (0 means attribs are packed)\n   * @param {number} offset Offset in bytes\n   * @private\n   */\n\n\n  WebGLHelper.prototype.enableAttributeArray_ = function (attribName, size, type, stride, offset) {\n    var location = this.getAttributeLocation(attribName); // the attribute has not been found in the shaders; do not enable it\n\n    if (location < 0) {\n      return;\n    }\n\n    this.getGL().enableVertexAttribArray(location);\n    this.getGL().vertexAttribPointer(location, size, type, false, stride, offset);\n  };\n  /**\n   * Will enable the following attributes to be read from the currently bound buffer,\n   * i.e. tell the GPU where to read the different attributes in the buffer. An error in the\n   * size/type/order of attributes will most likely break the rendering and throw a WebGL exception.\n   * @param {Array<AttributeDescription>} attributes Ordered list of attributes to read from the buffer\n   * @api\n   */\n\n\n  WebGLHelper.prototype.enableAttributes = function (attributes) {\n    var stride = computeAttributesStride(attributes);\n    var offset = 0;\n\n    for (var i = 0; i < attributes.length; i++) {\n      var attr = attributes[i];\n      this.enableAttributeArray_(attr.name, attr.size, attr.type || FLOAT, stride, offset);\n      offset += attr.size * getByteSizeFromType(attr.type);\n    }\n  };\n  /**\n   * WebGL context was lost\n   * @private\n   */\n\n\n  WebGLHelper.prototype.handleWebGLContextLost = function () {\n    clear(this.bufferCache_);\n    this.currentProgram_ = null;\n  };\n  /**\n   * WebGL context was restored\n   * @private\n   */\n\n\n  WebGLHelper.prototype.handleWebGLContextRestored = function () {};\n  /**\n   * Will create or reuse a given webgl texture and apply the given size. If no image data\n   * specified, the texture will be empty, otherwise image data will be used and the `size`\n   * parameter will be ignored.\n   * Note: wrap parameters are set to clamp to edge, min filter is set to linear.\n   * @param {Array<number>} size Expected size of the texture\n   * @param {ImageData|HTMLImageElement|HTMLCanvasElement} [opt_data] Image data/object to bind to the texture\n   * @param {WebGLTexture} [opt_texture] Existing texture to reuse\n   * @return {WebGLTexture} The generated texture\n   * @api\n   */\n\n\n  WebGLHelper.prototype.createTexture = function (size, opt_data, opt_texture) {\n    var gl = this.getGL();\n    var texture = opt_texture || gl.createTexture(); // set params & size\n\n    var level = 0;\n    var internalFormat = gl.RGBA;\n    var border = 0;\n    var format = gl.RGBA;\n    var type = gl.UNSIGNED_BYTE;\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n\n    if (opt_data) {\n      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, format, type, opt_data);\n    } else {\n      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, size[0], size[1], border, format, type, null);\n    }\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    return texture;\n  };\n\n  return WebGLHelper;\n}(Disposable);\n/**\n * Compute a stride in bytes based on a list of attributes\n * @param {Array<AttributeDescription>} attributes Ordered list of attributes\n * @return {number} Stride, ie amount of values for each vertex in the vertex buffer\n * @api\n */\n\n\nexport function computeAttributesStride(attributes) {\n  var stride = 0;\n\n  for (var i = 0; i < attributes.length; i++) {\n    var attr = attributes[i];\n    stride += attr.size * getByteSizeFromType(attr.type);\n  }\n\n  return stride;\n}\n/**\n * Computes the size in byte of an attribute type.\n * @param {AttributeType} type Attribute type\n * @return {number} The size in bytes\n */\n\nfunction getByteSizeFromType(type) {\n  switch (type) {\n    case AttributeType.UNSIGNED_BYTE:\n      return Uint8Array.BYTES_PER_ELEMENT;\n\n    case AttributeType.UNSIGNED_SHORT:\n      return Uint16Array.BYTES_PER_ELEMENT;\n\n    case AttributeType.UNSIGNED_INT:\n      return Uint32Array.BYTES_PER_ELEMENT;\n\n    case AttributeType.FLOAT:\n    default:\n      return Float32Array.BYTES_PER_ELEMENT;\n  }\n}\n\nexport default WebGLHelper;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/renderer/webgl/Layer\n */\n\n\nimport LayerProperty from '../../layer/Property.js';\nimport LayerRenderer from '../Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport WebGLHelper from '../../webgl/Helper.js';\nimport { compose as composeTransform, create as createTransform } from '../../transform.js';\n/**\n * @enum {string}\n */\n\nexport var WebGLWorkerMessageType = {\n  GENERATE_BUFFERS: 'GENERATE_BUFFERS'\n};\n/**\n * @typedef {Object} WebGLWorkerGenerateBuffersMessage\n * This message will trigger the generation of a vertex and an index buffer based on the given render instructions.\n * When the buffers are generated, the worked will send a message of the same type to the main thread, with\n * the generated buffers in it.\n * Note that any addition properties present in the message *will* be sent back to the main thread.\n * @property {WebGLWorkerMessageType} type Message type\n * @property {ArrayBuffer} renderInstructions Render instructions raw binary buffer.\n * @property {ArrayBuffer} [vertexBuffer] Vertices array raw binary buffer (sent by the worker).\n * @property {ArrayBuffer} [indexBuffer] Indices array raw binary buffer (sent by the worker).\n * @property {number} [customAttributesCount] Amount of custom attributes count in the render instructions.\n */\n\n/**\n * @typedef {Object} PostProcessesOptions\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas that will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n\n/**\n * @typedef {Object} Options\n * @property {Object<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process steps\n * @property {Array<PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n\n/**\n * @classdesc\n * Base WebGL renderer class.\n * Holds all logic related to data manipulation & some common rendering logic\n * @template {import(\"../../layer/Layer.js\").default} LayerType\n * @extends {LayerRenderer<LayerType>}\n */\n\nvar WebGLLayerRenderer =\n/** @class */\nfunction (_super) {\n  __extends(WebGLLayerRenderer, _super);\n  /**\n   * @param {LayerType} layer Layer.\n   * @param {Options} [opt_options] Options.\n   */\n\n\n  function WebGLLayerRenderer(layer, opt_options) {\n    var _this = _super.call(this, layer) || this;\n\n    var options = opt_options || {};\n    /**\n     * The transform for viewport CSS pixels to rendered pixels.  This transform is only\n     * set before dispatching rendering events.\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n\n    _this.inversePixelTransform_ = createTransform();\n    /**\n     * @private\n     */\n\n    _this.postProcesses_ = options.postProcesses;\n    /**\n     * @private\n     */\n\n    _this.uniforms_ = options.uniforms;\n    /**\n     * @type {WebGLHelper}\n     * @protected\n     */\n\n    _this.helper;\n    layer.addChangeListener(LayerProperty.MAP, _this.removeHelper_.bind(_this));\n    _this.dispatchPreComposeEvent = _this.dispatchPreComposeEvent.bind(_this);\n    _this.dispatchPostComposeEvent = _this.dispatchPostComposeEvent.bind(_this);\n    return _this;\n  }\n  /**\n   * @param {WebGLRenderingContext} context The WebGL rendering context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n\n\n  WebGLLayerRenderer.prototype.dispatchPreComposeEvent = function (context, frameState) {\n    var layer = this.getLayer();\n\n    if (layer.hasListener(RenderEventType.PRECOMPOSE)) {\n      var event_1 = new RenderEvent(RenderEventType.PRECOMPOSE, undefined, frameState, context);\n      layer.dispatchEvent(event_1);\n    }\n  };\n  /**\n   * @param {WebGLRenderingContext} context The WebGL rendering context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n\n\n  WebGLLayerRenderer.prototype.dispatchPostComposeEvent = function (context, frameState) {\n    var layer = this.getLayer();\n\n    if (layer.hasListener(RenderEventType.POSTCOMPOSE)) {\n      var event_2 = new RenderEvent(RenderEventType.POSTCOMPOSE, undefined, frameState, context);\n      layer.dispatchEvent(event_2);\n    }\n  };\n  /**\n   * Reset options (only handles uniforms).\n   * @param {Options} options Options.\n   */\n\n\n  WebGLLayerRenderer.prototype.reset = function (options) {\n    this.uniforms_ = options.uniforms;\n\n    if (this.helper) {\n      this.helper.setUniforms(this.uniforms_);\n    }\n  };\n\n  WebGLLayerRenderer.prototype.removeHelper_ = function () {\n    if (this.helper) {\n      this.helper.dispose();\n      delete this.helper;\n    }\n  };\n  /**\n   * Determine whether renderFrame should be called.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n\n\n  WebGLLayerRenderer.prototype.prepareFrame = function (frameState) {\n    if (this.getLayer().getSource()) {\n      var incrementGroup = true;\n      var groupNumber = -1;\n      var className = void 0;\n\n      for (var i = 0, ii = frameState.layerStatesArray.length; i < ii; i++) {\n        var layer = frameState.layerStatesArray[i].layer;\n        var renderer = layer.getRenderer();\n\n        if (!(renderer instanceof WebGLLayerRenderer)) {\n          incrementGroup = true;\n          continue;\n        }\n\n        var layerClassName = layer.getClassName();\n\n        if (incrementGroup || layerClassName !== className) {\n          groupNumber += 1;\n          incrementGroup = false;\n        }\n\n        className = layerClassName;\n\n        if (renderer === this) {\n          break;\n        }\n      }\n\n      var canvasCacheKey = 'map/' + frameState.mapId + '/group/' + groupNumber;\n\n      if (!this.helper || !this.helper.canvasCacheKeyMatches(canvasCacheKey)) {\n        if (this.helper) {\n          this.helper.dispose();\n        }\n\n        this.helper = new WebGLHelper({\n          postProcesses: this.postProcesses_,\n          uniforms: this.uniforms_,\n          canvasCacheKey: canvasCacheKey\n        });\n\n        if (className) {\n          this.helper.getCanvas().className = className;\n        }\n\n        this.afterHelperCreated();\n      }\n    }\n\n    return this.prepareFrameInternal(frameState);\n  };\n  /**\n   * @protected\n   */\n\n\n  WebGLLayerRenderer.prototype.afterHelperCreated = function () {};\n  /**\n   * Determine whether renderFrame should be called.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   * @protected\n   */\n\n\n  WebGLLayerRenderer.prototype.prepareFrameInternal = function (frameState) {\n    return true;\n  };\n  /**\n   * Clean up.\n   */\n\n\n  WebGLLayerRenderer.prototype.disposeInternal = function () {\n    this.removeHelper_();\n\n    _super.prototype.disposeInternal.call(this);\n  };\n  /**\n   * @param {import(\"../../render/EventType.js\").default} type Event type.\n   * @param {WebGLRenderingContext} context The rendering context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n\n\n  WebGLLayerRenderer.prototype.dispatchRenderEvent_ = function (type, context, frameState) {\n    var layer = this.getLayer();\n\n    if (layer.hasListener(type)) {\n      composeTransform(this.inversePixelTransform_, 0, 0, frameState.pixelRatio, -frameState.pixelRatio, 0, 0, -frameState.size[1]);\n      var event_3 = new RenderEvent(type, this.inversePixelTransform_, frameState, context);\n      layer.dispatchEvent(event_3);\n    }\n  };\n  /**\n   * @param {WebGLRenderingContext} context The rendering context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n\n\n  WebGLLayerRenderer.prototype.preRender = function (context, frameState) {\n    this.dispatchRenderEvent_(RenderEventType.PRERENDER, context, frameState);\n  };\n  /**\n   * @param {WebGLRenderingContext} context The rendering context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n\n\n  WebGLLayerRenderer.prototype.postRender = function (context, frameState) {\n    this.dispatchRenderEvent_(RenderEventType.POSTRENDER, context, frameState);\n  };\n\n  return WebGLLayerRenderer;\n}(LayerRenderer);\n\nvar tmpArray_ = [];\nvar bufferPositions_ = {\n  vertexPosition: 0,\n  indexPosition: 0\n};\n\nfunction writePointVertex(buffer, pos, x, y, index) {\n  buffer[pos + 0] = x;\n  buffer[pos + 1] = y;\n  buffer[pos + 2] = index;\n}\n/**\n * An object holding positions both in an index and a vertex buffer.\n * @typedef {Object} BufferPositions\n * @property {number} vertexPosition Position in the vertex buffer\n * @property {number} indexPosition Position in the index buffer\n */\n\n/**\n * Pushes a quad (two triangles) based on a point geometry\n * @param {Float32Array} instructions Array of render instructions for points.\n * @param {number} elementIndex Index from which render instructions will be read.\n * @param {Float32Array} vertexBuffer Buffer in the form of a typed array.\n * @param {Uint32Array} indexBuffer Buffer in the form of a typed array.\n * @param {number} customAttributesCount Amount of custom attributes for each element.\n * @param {BufferPositions} [bufferPositions] Buffer write positions; if not specified, positions will be set at 0.\n * @return {BufferPositions} New buffer positions where to write next\n * @property {number} vertexPosition New position in the vertex buffer where future writes should start.\n * @property {number} indexPosition New position in the index buffer where future writes should start.\n * @private\n */\n\n\nexport function writePointFeatureToBuffers(instructions, elementIndex, vertexBuffer, indexBuffer, customAttributesCount, bufferPositions) {\n  // This is for x, y and index\n  var baseVertexAttrsCount = 3;\n  var baseInstructionsCount = 2;\n  var stride = baseVertexAttrsCount + customAttributesCount;\n  var x = instructions[elementIndex + 0];\n  var y = instructions[elementIndex + 1]; // read custom numerical attributes on the feature\n\n  var customAttrs = tmpArray_;\n  customAttrs.length = customAttributesCount;\n\n  for (var i = 0; i < customAttrs.length; i++) {\n    customAttrs[i] = instructions[elementIndex + baseInstructionsCount + i];\n  }\n\n  var vPos = bufferPositions ? bufferPositions.vertexPosition : 0;\n  var iPos = bufferPositions ? bufferPositions.indexPosition : 0;\n  var baseIndex = vPos / stride; // push vertices for each of the four quad corners (first standard then custom attributes)\n\n  writePointVertex(vertexBuffer, vPos, x, y, 0);\n  customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n  vPos += stride;\n  writePointVertex(vertexBuffer, vPos, x, y, 1);\n  customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n  vPos += stride;\n  writePointVertex(vertexBuffer, vPos, x, y, 2);\n  customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n  vPos += stride;\n  writePointVertex(vertexBuffer, vPos, x, y, 3);\n  customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n  vPos += stride;\n  indexBuffer[iPos++] = baseIndex;\n  indexBuffer[iPos++] = baseIndex + 1;\n  indexBuffer[iPos++] = baseIndex + 3;\n  indexBuffer[iPos++] = baseIndex + 1;\n  indexBuffer[iPos++] = baseIndex + 2;\n  indexBuffer[iPos++] = baseIndex + 3;\n  bufferPositions_.vertexPosition = vPos;\n  bufferPositions_.indexPosition = iPos;\n  return bufferPositions_;\n}\n/**\n * Returns a texture of 1x1 pixel, white\n * @private\n * @return {ImageData} Image data.\n */\n\nexport function getBlankImageData() {\n  var canvas = document.createElement('canvas');\n  var image = canvas.getContext('2d').createImageData(1, 1);\n  image.data[0] = 255;\n  image.data[1] = 255;\n  image.data[2] = 255;\n  image.data[3] = 255;\n  return image;\n}\n/**\n * Generates a color array based on a numerical id\n * Note: the range for each component is 0 to 1 with 256 steps\n * @param {number} id Id\n * @param {Array<number>} [opt_array] Reusable array\n * @return {Array<number>} Color array containing the encoded id\n */\n\nexport function colorEncodeId(id, opt_array) {\n  var array = opt_array || [];\n  var radix = 256;\n  var divide = radix - 1;\n  array[0] = Math.floor(id / radix / radix / radix) / divide;\n  array[1] = Math.floor(id / radix / radix) % radix / divide;\n  array[2] = Math.floor(id / radix) % radix / divide;\n  array[3] = id % radix / divide;\n  return array;\n}\n/**\n * Reads an id from a color-encoded array\n * Note: the expected range for each component is 0 to 1 with 256 steps.\n * @param {Array<number>} color Color array containing the encoded id\n * @return {number} Decoded id\n */\n\nexport function colorDecodeId(color) {\n  var id = 0;\n  var radix = 256;\n  var mult = radix - 1;\n  id += Math.round(color[0] * radix * radix * radix * mult);\n  id += Math.round(color[1] * radix * radix * mult);\n  id += Math.round(color[2] * radix * mult);\n  id += Math.round(color[3] * mult);\n  return id;\n}\nexport default WebGLLayerRenderer;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/renderer/webgl/TileLayer\n */\n\n\nimport LRUCache from '../../structs/LRUCache.js';\nimport State from '../../source/State.js';\nimport TileRange from '../../TileRange.js';\nimport TileState from '../../TileState.js';\nimport TileTexture from '../../webgl/TileTexture.js';\nimport WebGLArrayBuffer from '../../webgl/Buffer.js';\nimport WebGLLayerRenderer from './Layer.js';\nimport { AttributeType } from '../../webgl/Helper.js';\nimport { ELEMENT_ARRAY_BUFFER, STATIC_DRAW } from '../../webgl.js';\nimport { compose as composeTransform, create as createTransform } from '../../transform.js';\nimport { create as createMat4, fromTransform as mat4FromTransform } from '../../vec/mat4.js';\nimport { createOrUpdate as createTileCoord, getKeyZXY, getKey as getTileCoordKey } from '../../tilecoord.js';\nimport { fromUserExtent } from '../../proj.js';\nimport { getIntersection } from '../../extent.js';\nimport { getUid } from '../../util.js';\nimport { isEmpty } from '../../extent.js';\nimport { numberSafeCompareFunction } from '../../array.js';\nimport { toSize } from '../../size.js';\nexport var Uniforms = {\n  TILE_TEXTURE_ARRAY: 'u_tileTextures',\n  TILE_TRANSFORM: 'u_tileTransform',\n  TRANSITION_ALPHA: 'u_transitionAlpha',\n  DEPTH: 'u_depth',\n  TEXTURE_PIXEL_WIDTH: 'u_texturePixelWidth',\n  TEXTURE_PIXEL_HEIGHT: 'u_texturePixelHeight',\n  RESOLUTION: 'u_resolution',\n  ZOOM: 'u_zoom'\n};\nexport var Attributes = {\n  TEXTURE_COORD: 'a_textureCoord'\n};\n/**\n * @type {Array<import('../../webgl/Helper.js').AttributeDescription>}\n */\n\nvar attributeDescriptions = [{\n  name: Attributes.TEXTURE_COORD,\n  size: 2,\n  type: AttributeType.FLOAT\n}];\n/**\n * @type {Object<string, boolean>}\n */\n\nvar empty = {};\n/**\n * Transform a zoom level into a depth value ranging from -1 to 1.\n * @param {number} z A zoom level.\n * @return {number} A depth value.\n */\n\nfunction depthForZ(z) {\n  return 2 * (1 - 1 / (z + 1)) - 1;\n}\n/**\n * Add a tile texture to the lookup.\n * @param {Object<number, Array<import(\"../../webgl/TileTexture.js\").default>>} tileTexturesByZ Lookup of\n * tile textures by zoom level.\n * @param {import(\"../../webgl/TileTexture.js\").default} tileTexture A tile texture.\n * @param {number} z The zoom level.\n */\n\n\nfunction addTileTextureToLookup(tileTexturesByZ, tileTexture, z) {\n  if (!(z in tileTexturesByZ)) {\n    tileTexturesByZ[z] = [];\n  }\n\n  tileTexturesByZ[z].push(tileTexture);\n}\n/**\n * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n * @param {import(\"../../extent.js\").Extent} extent The frame extent.\n * @return {import(\"../../extent.js\").Extent} Frame extent intersected with layer extents.\n */\n\n\nfunction getRenderExtent(frameState, extent) {\n  var layerState = frameState.layerStatesArray[frameState.layerIndex];\n\n  if (layerState.extent) {\n    extent = getIntersection(extent, fromUserExtent(layerState.extent, frameState.viewState.projection));\n  }\n\n  var source =\n  /** {import(\"../../source/Tile.js\").default} */\n  layerState.layer.getSource();\n\n  if (!source.getWrapX()) {\n    var gridExtent = source.tileGrid.getExtent();\n\n    if (gridExtent) {\n      extent = getIntersection(extent, gridExtent);\n    }\n  }\n\n  return extent;\n}\n/**\n * @typedef {Object} Options\n * @property {string} vertexShader Vertex shader source.\n * @property {string} fragmentShader Fragment shader source.\n * @property {Object<string, import(\"../../webgl/Helper\").UniformValue>} [uniforms] Additional uniforms\n * made available to shaders.\n * @property {Array<import(\"../../webgl/PaletteTexture.js\").default>} [paletteTextures] Palette textures.\n * @property {number} [cacheSize=512] The texture cache size.\n */\n\n/**\n * @typedef {import(\"../../layer/WebGLTile.js\").default} LayerType\n */\n\n/**\n * @classdesc\n * WebGL renderer for tile layers.\n * @extends {WebGLLayerRenderer<LayerType>}\n * @api\n */\n\n\nvar WebGLTileLayerRenderer =\n/** @class */\nfunction (_super) {\n  __extends(WebGLTileLayerRenderer, _super);\n  /**\n   * @param {LayerType} tileLayer Tile layer.\n   * @param {Options} options Options.\n   */\n\n\n  function WebGLTileLayerRenderer(tileLayer, options) {\n    var _this = _super.call(this, tileLayer, {\n      uniforms: options.uniforms\n    }) || this;\n    /**\n     * This transform converts tile i, j coordinates to screen coordinates.\n     * @type {import(\"../../transform.js\").Transform}\n     * @private\n     */\n\n\n    _this.tileTransform_ = createTransform();\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n\n    _this.tempMat4_ = createMat4();\n    /**\n     * @type {import(\"../../TileRange.js\").default}\n     * @private\n     */\n\n    _this.tempTileRange_ = new TileRange(0, 0, 0, 0);\n    /**\n     * @type {import(\"../../tilecoord.js\").TileCoord}\n     * @private\n     */\n\n    _this.tempTileCoord_ = createTileCoord(0, 0, 0);\n    /**\n     * @type {import(\"../../size.js\").Size}\n     * @private\n     */\n\n    _this.tempSize_ = [0, 0];\n    /**\n     * @type {WebGLProgram}\n     * @private\n     */\n\n    _this.program_;\n    /**\n     * @private\n     */\n\n    _this.vertexShader_ = options.vertexShader;\n    /**\n     * @private\n     */\n\n    _this.fragmentShader_ = options.fragmentShader;\n    /**\n     * Tiles are rendered as a quad with the following structure:\n     *\n     *  [P3]---------[P2]\n     *   |`           |\n     *   |  `     B   |\n     *   |    `       |\n     *   |      `     |\n     *   |   A    `   |\n     *   |          ` |\n     *  [P0]---------[P1]\n     *\n     * Triangle A: P0, P1, P3\n     * Triangle B: P1, P2, P3\n     *\n     * @private\n     */\n\n    _this.indices_ = new WebGLArrayBuffer(ELEMENT_ARRAY_BUFFER, STATIC_DRAW);\n\n    _this.indices_.fromArray([0, 1, 3, 1, 2, 3]);\n\n    var cacheSize = options.cacheSize !== undefined ? options.cacheSize : 512;\n    /**\n     * @type {import(\"../../structs/LRUCache.js\").default<import(\"../../webgl/TileTexture.js\").default>}\n     * @private\n     */\n\n    _this.tileTextureCache_ = new LRUCache(cacheSize);\n    /**\n     * @type {Array<import(\"../../webgl/PaletteTexture.js\").default>}\n     * @private\n     */\n\n    _this.paletteTextures_ = options.paletteTextures || [];\n    return _this;\n  }\n  /**\n   * @param {Options} options Options.\n   */\n\n\n  WebGLTileLayerRenderer.prototype.reset = function (options) {\n    _super.prototype.reset.call(this, {\n      uniforms: options.uniforms\n    });\n\n    this.vertexShader_ = options.vertexShader;\n    this.fragmentShader_ = options.fragmentShader;\n    this.paletteTextures_ = options.paletteTextures || [];\n\n    if (this.helper) {\n      this.program_ = this.helper.getProgram(this.fragmentShader_, this.vertexShader_);\n    }\n  };\n\n  WebGLTileLayerRenderer.prototype.afterHelperCreated = function () {\n    this.program_ = this.helper.getProgram(this.fragmentShader_, this.vertexShader_);\n    this.helper.flushBufferData(this.indices_);\n  };\n  /**\n   * @param {import(\"../../webgl/TileTexture\").TileType} tile Tile.\n   * @return {boolean} Tile is drawable.\n   * @private\n   */\n\n\n  WebGLTileLayerRenderer.prototype.isDrawableTile_ = function (tile) {\n    var tileLayer = this.getLayer();\n    var tileState = tile.getState();\n    var useInterimTilesOnError = tileLayer.getUseInterimTilesOnError();\n    return tileState == TileState.LOADED || tileState == TileState.EMPTY || tileState == TileState.ERROR && !useInterimTilesOnError;\n  };\n  /**\n   * Determine whether renderFrame should be called.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n\n\n  WebGLTileLayerRenderer.prototype.prepareFrameInternal = function (frameState) {\n    var layer = this.getLayer();\n    var source = layer.getSource();\n\n    if (!source) {\n      return false;\n    }\n\n    if (isEmpty(getRenderExtent(frameState, frameState.extent))) {\n      return false;\n    }\n\n    return source.getState() === State.READY;\n  };\n  /**\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../extent.js\").Extent} extent The extent to be rendered.\n   * @param {number} z The zoom level.\n   * @param {Object<number, Array<TileTexture>>} tileTexturesByZ The zoom level.\n   */\n\n\n  WebGLTileLayerRenderer.prototype.enqueueTiles = function (frameState, extent, z, tileTexturesByZ) {\n    var viewState = frameState.viewState;\n    var tileLayer = this.getLayer();\n    var tileSource = tileLayer.getSource();\n    var tileGrid = tileSource.getTileGridForProjection(viewState.projection);\n    var tileTextureCache = this.tileTextureCache_;\n    var tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z, this.tempTileRange_);\n    var tileSourceKey = getUid(tileSource);\n\n    if (!(tileSourceKey in frameState.wantedTiles)) {\n      frameState.wantedTiles[tileSourceKey] = {};\n    }\n\n    var wantedTiles = frameState.wantedTiles[tileSourceKey];\n    var tileResolution = tileGrid.getResolution(z);\n\n    for (var x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (var y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        var tileCoord = createTileCoord(z, x, y, this.tempTileCoord_);\n        var tileCoordKey = getTileCoordKey(tileCoord);\n        /**\n         * @type {TileTexture}\n         */\n\n        var tileTexture = void 0;\n        /**\n         * @type {import(\"../../webgl/TileTexture\").TileType}\n         */\n\n        var tile = void 0;\n\n        if (tileTextureCache.containsKey(tileCoordKey)) {\n          tileTexture = tileTextureCache.get(tileCoordKey);\n          tile = tileTexture.tile;\n        }\n\n        if (!tileTexture || tileTexture.tile.key !== tileSource.getKey()) {\n          tile = tileSource.getTile(z, x, y, frameState.pixelRatio, viewState.projection);\n\n          if (!tileTexture) {\n            tileTexture = new TileTexture(tile, tileGrid, this.helper);\n            tileTextureCache.set(tileCoordKey, tileTexture);\n          } else {\n            if (this.isDrawableTile_(tile)) {\n              tileTexture.setTile(tile);\n            } else {\n              var interimTile =\n              /** @type {import(\"../../webgl/TileTexture\").TileType} */\n              tile.getInterimTile();\n              tileTexture.setTile(interimTile);\n            }\n          }\n        }\n\n        addTileTextureToLookup(tileTexturesByZ, tileTexture, z);\n        var tileQueueKey = tile.getKey();\n        wantedTiles[tileQueueKey] = true;\n\n        if (tile.getState() === TileState.IDLE) {\n          if (!frameState.tileQueue.isKeyQueued(tileQueueKey)) {\n            frameState.tileQueue.enqueue([tile, tileSourceKey, tileGrid.getTileCoordCenter(tileCoord), tileResolution]);\n          }\n        }\n      }\n    }\n  };\n  /**\n   * Render the layer.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {HTMLElement} The rendered element.\n   */\n\n\n  WebGLTileLayerRenderer.prototype.renderFrame = function (frameState) {\n    var gl = this.helper.getGL();\n    this.preRender(gl, frameState);\n    var viewState = frameState.viewState;\n    var tileLayer = this.getLayer();\n    var tileSource = tileLayer.getSource();\n    var tileGrid = tileSource.getTileGridForProjection(viewState.projection);\n    var extent = getRenderExtent(frameState, frameState.extent);\n    var z = tileGrid.getZForResolution(viewState.resolution, tileSource.zDirection);\n    /**\n     * @type {Object<number, Array<import(\"../../webgl/TileTexture.js\").default>>}\n     */\n\n    var tileTexturesByZ = {};\n\n    if (frameState.nextExtent) {\n      var targetZ = tileGrid.getZForResolution(viewState.nextResolution, tileSource.zDirection);\n      var nextExtent = getRenderExtent(frameState, frameState.nextExtent);\n      this.enqueueTiles(frameState, nextExtent, targetZ, tileTexturesByZ);\n    }\n\n    this.enqueueTiles(frameState, extent, z, tileTexturesByZ);\n    /**\n     * A lookup of alpha values for tiles at the target rendering resolution\n     * for tiles that are in transition.  If a tile coord key is absent from\n     * this lookup, the tile should be rendered at alpha 1.\n     * @type {Object<string, number>}\n     */\n\n    var alphaLookup = {};\n    var uid = getUid(this);\n    var time = frameState.time;\n    var blend = false; // look for cached tiles to use if a target tile is not ready\n\n    var tileTextures = tileTexturesByZ[z];\n\n    for (var i = 0, ii = tileTextures.length; i < ii; ++i) {\n      var tileTexture = tileTextures[i];\n      var tile = tileTexture.tile;\n      var tileCoord = tile.tileCoord;\n\n      if (tileTexture.loaded) {\n        var alpha = tile.getAlpha(uid, time);\n\n        if (alpha === 1) {\n          // no need to look for alt tiles\n          tile.endTransition(uid);\n          continue;\n        }\n\n        blend = true;\n        var tileCoordKey = getTileCoordKey(tileCoord);\n        alphaLookup[tileCoordKey] = alpha;\n      } // first look for child tiles (at z + 1)\n\n\n      var coveredByChildren = this.findAltTiles_(tileGrid, tileCoord, z + 1, tileTexturesByZ);\n\n      if (coveredByChildren) {\n        continue;\n      } // next look for parent tiles\n\n\n      var minZoom = tileGrid.getMinZoom();\n\n      for (var parentZ = z - 1; parentZ >= minZoom; --parentZ) {\n        var coveredByParent = this.findAltTiles_(tileGrid, tileCoord, parentZ, tileTexturesByZ);\n\n        if (coveredByParent) {\n          break;\n        }\n      }\n    }\n\n    this.helper.useProgram(this.program_);\n    this.helper.prepareDraw(frameState, !blend);\n    var zs = Object.keys(tileTexturesByZ).map(Number).sort(numberSafeCompareFunction);\n    var centerX = viewState.center[0];\n    var centerY = viewState.center[1];\n\n    for (var j = 0, jj = zs.length; j < jj; ++j) {\n      var tileZ = zs[j];\n      var tileResolution = tileGrid.getResolution(tileZ);\n      var tileSize = toSize(tileGrid.getTileSize(tileZ), this.tempSize_);\n      var tileOrigin = tileGrid.getOrigin(tileZ);\n      var centerI = (centerX - tileOrigin[0]) / (tileSize[0] * tileResolution);\n      var centerJ = (tileOrigin[1] - centerY) / (tileSize[1] * tileResolution);\n      var tileScale = viewState.resolution / tileResolution;\n      var depth = depthForZ(tileZ);\n      var tileTextures_1 = tileTexturesByZ[tileZ];\n\n      for (var i = 0, ii = tileTextures_1.length; i < ii; ++i) {\n        var tileTexture = tileTextures_1[i];\n\n        if (!tileTexture.loaded) {\n          continue;\n        }\n\n        var tile = tileTexture.tile;\n        var tileCoord = tile.tileCoord;\n        var tileCoordKey = getTileCoordKey(tileCoord);\n        var tileCenterI = tileCoord[1];\n        var tileCenterJ = tileCoord[2];\n        composeTransform(this.tileTransform_, 0, 0, 2 / (frameState.size[0] * tileScale / tileSize[0]), -2 / (frameState.size[1] * tileScale / tileSize[1]), viewState.rotation, -(centerI - tileCenterI), -(centerJ - tileCenterJ));\n        this.helper.setUniformMatrixValue(Uniforms.TILE_TRANSFORM, mat4FromTransform(this.tempMat4_, this.tileTransform_));\n        this.helper.bindBuffer(tileTexture.coords);\n        this.helper.bindBuffer(this.indices_);\n        this.helper.enableAttributes(attributeDescriptions);\n        var textureSlot = 0;\n\n        while (textureSlot < tileTexture.textures.length) {\n          var textureProperty = 'TEXTURE' + textureSlot;\n          var uniformName = Uniforms.TILE_TEXTURE_ARRAY + \"[\" + textureSlot + \"]\";\n          gl.activeTexture(gl[textureProperty]);\n          gl.bindTexture(gl.TEXTURE_2D, tileTexture.textures[textureSlot]);\n          gl.uniform1i(this.helper.getUniformLocation(uniformName), textureSlot);\n          ++textureSlot;\n        }\n\n        for (var paletteIndex = 0; paletteIndex < this.paletteTextures_.length; ++paletteIndex) {\n          var paletteTexture = this.paletteTextures_[paletteIndex];\n          gl.activeTexture(gl['TEXTURE' + textureSlot]);\n          var texture = paletteTexture.getTexture(gl);\n          gl.bindTexture(gl.TEXTURE_2D, texture);\n          gl.uniform1i(this.helper.getUniformLocation(paletteTexture.name), textureSlot);\n          ++textureSlot;\n        }\n\n        var alpha = tileCoordKey in alphaLookup ? alphaLookup[tileCoordKey] : 1;\n\n        if (alpha < 1) {\n          frameState.animate = true;\n        }\n\n        this.helper.setUniformFloatValue(Uniforms.TRANSITION_ALPHA, alpha);\n        this.helper.setUniformFloatValue(Uniforms.DEPTH, depth);\n        this.helper.setUniformFloatValue(Uniforms.TEXTURE_PIXEL_WIDTH, tileSize[0]);\n        this.helper.setUniformFloatValue(Uniforms.TEXTURE_PIXEL_HEIGHT, tileSize[1]);\n        this.helper.setUniformFloatValue(Uniforms.RESOLUTION, viewState.resolution);\n        this.helper.setUniformFloatValue(Uniforms.ZOOM, viewState.zoom);\n        this.helper.drawElements(0, this.indices_.getSize());\n      }\n    }\n\n    this.helper.finalizeDraw(frameState, this.dispatchPreComposeEvent, this.dispatchPostComposeEvent);\n    var canvas = this.helper.getCanvas();\n    var tileTextureCache = this.tileTextureCache_;\n\n    while (tileTextureCache.canExpireCache()) {\n      var tileTexture = tileTextureCache.pop();\n      tileTexture.dispose();\n    } // TODO: let the renderers manage their own cache instead of managing the source cache\n\n    /**\n     * Here we unconditionally expire the source cache since the renderer maintains\n     * its own cache.\n     * @param {import(\"../../PluggableMap.js\").default} map Map.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n\n\n    var postRenderFunction = function postRenderFunction(map, frameState) {\n      tileSource.expireCache(frameState.viewState.projection, empty);\n    };\n\n    frameState.postRenderFunctions.push(postRenderFunction);\n    this.postRender(gl, frameState);\n    return canvas;\n  };\n  /**\n   * Look for tiles covering the provided tile coordinate at an alternate\n   * zoom level.  Loaded tiles will be added to the provided tile texture lookup.\n   * @param {import(\"../../tilegrid/TileGrid.js\").default} tileGrid The tile grid.\n   * @param {import(\"../../tilecoord.js\").TileCoord} tileCoord The target tile coordinate.\n   * @param {number} altZ The alternate zoom level.\n   * @param {Object<number, Array<import(\"../../webgl/TileTexture.js\").default>>} tileTexturesByZ Lookup of\n   * tile textures by zoom level.\n   * @return {boolean} The tile coordinate is covered by loaded tiles at the alternate zoom level.\n   * @private\n   */\n\n\n  WebGLTileLayerRenderer.prototype.findAltTiles_ = function (tileGrid, tileCoord, altZ, tileTexturesByZ) {\n    var tileRange = tileGrid.getTileRangeForTileCoordAndZ(tileCoord, altZ, this.tempTileRange_);\n\n    if (!tileRange) {\n      return false;\n    }\n\n    var covered = true;\n    var tileTextureCache = this.tileTextureCache_;\n\n    for (var x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (var y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        var cacheKey = getKeyZXY(altZ, x, y);\n        var loaded = false;\n\n        if (tileTextureCache.containsKey(cacheKey)) {\n          var tileTexture = tileTextureCache.get(cacheKey);\n\n          if (tileTexture.loaded) {\n            addTileTextureToLookup(tileTexturesByZ, tileTexture, altZ);\n            loaded = true;\n          }\n        }\n\n        if (!loaded) {\n          covered = false;\n        }\n      }\n    }\n\n    return covered;\n  };\n  /**\n   * Clean up.\n   */\n\n\n  WebGLTileLayerRenderer.prototype.disposeInternal = function () {\n    var helper = this.helper;\n    var gl = helper.getGL();\n    helper.deleteBuffer(this.indices_);\n    delete this.indices_;\n    gl.deleteProgram(this.program_);\n    delete this.program_;\n    var tileTextureCache = this.tileTextureCache_;\n    tileTextureCache.forEach(function (tileTexture) {\n      tileTexture.dispose();\n    });\n    tileTextureCache.clear();\n    delete this.tileTextureCache_;\n\n    _super.prototype.disposeInternal.call(this);\n  };\n\n  return WebGLTileLayerRenderer;\n}(WebGLLayerRenderer);\n/**\n * @function\n * @return {import(\"../../layer/WebGLTile.js\").default}\n */\n\n\nWebGLTileLayerRenderer.prototype.getLayer;\nexport default WebGLTileLayerRenderer;","/**\n * @module ol/webgl/PaletteTexture\n */\nvar PaletteTexture =\n/** @class */\nfunction () {\n  /**\n   * @param {string} name The name of the texture.\n   * @param {Uint8Array} data The texture data.\n   */\n  function PaletteTexture(name, data) {\n    this.name = name;\n    this.data = data;\n    /**\n     * @type {WebGLTexture}\n     * @private\n     */\n\n    this.texture_ = null;\n  }\n  /**\n   * @param {WebGLRenderingContext} gl Rendering context.\n   * @return {WebGLTexture} The texture.\n   */\n\n\n  PaletteTexture.prototype.getTexture = function (gl) {\n    if (!this.texture_) {\n      var texture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.data.length / 4, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, this.data);\n      this.texture_ = texture;\n    }\n\n    return this.texture_;\n  };\n\n  return PaletteTexture;\n}();\n\nexport default PaletteTexture;","/**\n * Operators and utilities used for style expressions\n * @module ol/style/expressions\n */\nimport PaletteTexture from '../webgl/PaletteTexture.js';\nimport { Uniforms } from '../renderer/webgl/TileLayer.js';\nimport { asArray, fromString, isStringColor } from '../color.js';\nimport { log2 } from '../math.js';\n/**\n * Base type used for literal style parameters; can be a number literal or the output of an operator,\n * which in turns takes {@link import(\"./expressions.js\").ExpressionValue} arguments.\n *\n * The following operators can be used:\n *\n * * Reading operators:\n *   * `['band', bandIndex, xOffset, yOffset]` For tile layers only. Fetches pixel values from band\n *     `bandIndex` of the source's data. The first `bandIndex` of the source data is `1`. Fetched values\n *     are in the 0..1 range. {@link import(\"../source/TileImage.js\").default} sources have 4 bands: red,\n *     green, blue and alpha. {@link import(\"../source/DataTile.js\").default} sources can have any number\n *     of bands, depending on the underlying data source and\n *     {@link import(\"../source/GeoTIFF.js\").Options configuration}. `xOffset` and `yOffset` are optional\n *     and allow specifying pixel offsets for x and y. This is used for sampling data from neighboring pixels.\n *   * `['get', 'attributeName']` fetches a feature attribute (it will be prefixed by `a_` in the shader)\n *     Note: those will be taken from the attributes provided to the renderer\n *   * `['resolution']` returns the current resolution\n *   * `['time']` returns the time in seconds since the creation of the layer\n *   * `['var', 'varName']` fetches a value from the style variables, or 0 if undefined\n *   * `['zoom']` returns the current zoom level\n *\n * * Math operators:\n *   * `['*', value1, value2]` multiplies `value1` by `value2`\n *   * `['/', value1, value2]` divides `value1` by `value2`\n *   * `['+', value1, value2]` adds `value1` and `value2`\n *   * `['-', value1, value2]` subtracts `value2` from `value1`\n *   * `['clamp', value, low, high]` clamps `value` between `low` and `high`\n *   * `['%', value1, value2]` returns the result of `value1 % value2` (modulo)\n *   * `['^', value1, value2]` returns the value of `value1` raised to the `value2` power\n *   * `['abs', value1]` returns the absolute value of `value1`\n *   * `['sin', value1]` returns the sine of `value1`\n *   * `['cos', value1]` returns the cosine of `value1`\n *   * `['atan', value1, value2]` returns `atan2(value1, value2)`. If `value2` is not provided, returns `atan(value1)`\n *\n * * Transform operators:\n *   * `['case', condition1, output1, ...conditionN, outputN, fallback]` selects the first output whose corresponding\n *     condition evaluates to `true`. If no match is found, returns the `fallback` value.\n *     All conditions should be `boolean`, output and fallback can be any kind.\n *   * `['match', input, match1, output1, ...matchN, outputN, fallback]` compares the `input` value against all\n *     provided `matchX` values, returning the output associated with the first valid match. If no match is found,\n *     returns the `fallback` value.\n *     `input` and `matchX` values must all be of the same type, and can be `number` or `string`. `outputX` and\n *     `fallback` values must be of the same type, and can be of any kind.\n *   * `['interpolate', interpolation, input, stop1, output1, ...stopN, outputN]` returns a value by interpolating between\n *     pairs of inputs and outputs; `interpolation` can either be `['linear']` or `['exponential', base]` where `base` is\n *     the rate of increase from stop A to stop B (i.e. power to which the interpolation ratio is raised); a value\n *     of 1 is equivalent to `['linear']`.\n *     `input` and `stopX` values must all be of type `number`. `outputX` values can be `number` or `color` values.\n *     Note: `input` will be clamped between `stop1` and `stopN`, meaning that all output values will be comprised\n *     between `output1` and `outputN`.\n *\n * * Logical operators:\n *   * `['<', value1, value2]` returns `true` if `value1` is strictly lower than `value2`, or `false` otherwise.\n *   * `['<=', value1, value2]` returns `true` if `value1` is lower than or equals `value2`, or `false` otherwise.\n *   * `['>', value1, value2]` returns `true` if `value1` is strictly greater than `value2`, or `false` otherwise.\n *   * `['>=', value1, value2]` returns `true` if `value1` is greater than or equals `value2`, or `false` otherwise.\n *   * `['==', value1, value2]` returns `true` if `value1` equals `value2`, or `false` otherwise.\n *   * `['!=', value1, value2]` returns `true` if `value1` does not equal `value2`, or `false` otherwise.\n *   * `['!', value1]` returns `false` if `value1` is `true` or greater than `0`, or `true` otherwise.\n *   * `['all', value1, value2, ...]` returns `true` if all the inputs are `true`, `false` otherwise.\n *   * `['any', value1, value2, ...]` returns `true` if any of the inputs are `true`, `false` otherwise.\n *   * `['between', value1, value2, value3]` returns `true` if `value1` is contained between `value2` and `value3`\n *     (inclusively), or `false` otherwise.\n *\n * * Conversion operators:\n *   * `['array', value1, ...valueN]` creates a numerical array from `number` values; please note that the amount of\n *     values can currently only be 2, 3 or 4.\n *   * `['color', red, green, blue, alpha]` creates a `color` value from `number` values; the `alpha` parameter is\n *     optional; if not specified, it will be set to 1.\n *     Note: `red`, `green` and `blue` components must be values between 0 and 255; `alpha` between 0 and 1.\n *   * `['palette', index, colors]` picks a `color` value from an array of colors using the given index; the `index`\n *     expression must evaluate to a number; the items in the `colors` array must be strings with hex colors\n *     (e.g. `'#86A136'`), colors using the rgba[a] functional notation (e.g. `'rgb(134, 161, 54)'` or `'rgba(134, 161, 54, 1)'`),\n *     named colors (e.g. `'red'`), or array literals with 3 ([r, g, b]) or 4 ([r, g, b, a]) values (with r, g, and b\n *     in the 0-255 range and a in the 0-1 range).\n *\n * Values can either be literals or another operator, as they will be evaluated recursively.\n * Literal values can be of the following types:\n * * `boolean`\n * * `number`\n * * `string`\n * * {@link module:ol/color~Color}\n *\n * @typedef {Array<*>|import(\"../color.js\").Color|string|number|boolean} ExpressionValue\n * @api\n */\n\n/**\n * Possible inferred types from a given value or expression.\n * Note: these are binary flags.\n * @enum {number}\n */\n\nexport var ValueTypes = {\n  NUMBER: 1,\n  STRING: 2,\n  COLOR: 4,\n  BOOLEAN: 8,\n  NUMBER_ARRAY: 16,\n  ANY: 31,\n  NONE: 0\n};\n/**\n * An operator declaration must contain two methods: `getReturnType` which returns a type based on\n * the operator arguments, and `toGlsl` which returns a GLSL-compatible string.\n * Note: both methods can process arguments recursively.\n * @typedef {Object} Operator\n * @property {function(Array<ExpressionValue>): ValueTypes|number} getReturnType Returns one or several types\n * @property {function(ParsingContext, Array<ExpressionValue>, ValueTypes=): string} toGlsl Returns a GLSL-compatible string\n * Note: takes in an optional type hint as 3rd parameter\n */\n\n/**\n * Operator declarations\n * @type {Object<string, Operator>}\n */\n\nexport var Operators = {};\n/**\n * Returns the possible types for a given value (each type being a binary flag)\n * To test a value use e.g. `getValueType(v) & ValueTypes.BOOLEAN`\n * @param {ExpressionValue} value Value\n * @return {ValueTypes|number} Type or types inferred from the value\n */\n\nexport function getValueType(value) {\n  if (typeof value === 'number') {\n    return ValueTypes.NUMBER;\n  }\n\n  if (typeof value === 'boolean') {\n    return ValueTypes.BOOLEAN;\n  }\n\n  if (typeof value === 'string') {\n    if (isStringColor(value)) {\n      return ValueTypes.COLOR | ValueTypes.STRING;\n    }\n\n    return ValueTypes.STRING;\n  }\n\n  if (!Array.isArray(value)) {\n    throw new Error(\"Unhandled value type: \" + JSON.stringify(value));\n  }\n\n  var valueArr =\n  /** @type {Array<*>} */\n  value;\n  var onlyNumbers = valueArr.every(function (v) {\n    return typeof v === 'number';\n  });\n\n  if (onlyNumbers) {\n    if (valueArr.length === 3 || valueArr.length === 4) {\n      return ValueTypes.COLOR | ValueTypes.NUMBER_ARRAY;\n    }\n\n    return ValueTypes.NUMBER_ARRAY;\n  }\n\n  if (typeof valueArr[0] !== 'string') {\n    throw new Error(\"Expected an expression operator but received: \" + JSON.stringify(valueArr));\n  }\n\n  var operator = Operators[valueArr[0]];\n\n  if (operator === undefined) {\n    throw new Error(\"Unrecognized expression operator: \" + JSON.stringify(valueArr));\n  }\n\n  return operator.getReturnType(valueArr.slice(1));\n}\n/**\n * Checks if only one value type is enabled in the input number.\n * @param {ValueTypes|number} valueType Number containing value type binary flags\n * @return {boolean} True if only one type flag is enabled, false if zero or multiple\n */\n\nexport function isTypeUnique(valueType) {\n  return log2(valueType) % 1 === 0;\n}\n/**\n * Context available during the parsing of an expression.\n * @typedef {Object} ParsingContext\n * @property {boolean} [inFragmentShader] If false, means the expression output should be made for a vertex shader\n * @property {Array<string>} variables List of variables used in the expression; contains **unprefixed names**\n * @property {Array<string>} attributes List of attributes used in the expression; contains **unprefixed names**\n * @property {Object<string, number>} stringLiteralsMap This object maps all encountered string values to a number\n * @property {Object<string, string>} functions Lookup of functions used by the style.\n * @property {number} [bandCount] Number of bands per pixel.\n * @property {Array<PaletteTexture>} [paletteTextures] List of palettes used by the style.\n */\n\n/**\n * Will return the number as a float with a dot separator, which is required by GLSL.\n * @param {number} v Numerical value.\n * @return {string} The value as string.\n */\n\nexport function numberToGlsl(v) {\n  var s = v.toString();\n  return s.indexOf('.') === -1 ? s + '.0' : s;\n}\n/**\n * Will return the number array as a float with a dot separator, concatenated with ', '.\n * @param {Array<number>} array Numerical values array.\n * @return {string} The array as a vector, e. g.: `vec3(1.0, 2.0, 3.0)`.\n */\n\nexport function arrayToGlsl(array) {\n  if (array.length < 2 || array.length > 4) {\n    throw new Error('`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.');\n  }\n\n  return \"vec\" + array.length + \"(\" + array.map(numberToGlsl).join(', ') + \")\";\n}\n/**\n * Will normalize and converts to string a `vec4` color array compatible with GLSL.\n * @param {string|import(\"../color.js\").Color} color Color either in string format or [r, g, b, a] array format,\n * with RGB components in the 0..255 range and the alpha component in the 0..1 range.\n * Note that the final array will always have 4 components.\n * @return {string} The color expressed in the `vec4(1.0, 1.0, 1.0, 1.0)` form.\n */\n\nexport function colorToGlsl(color) {\n  var array = asArray(color).slice();\n\n  if (array.length < 4) {\n    array.push(1);\n  }\n\n  return arrayToGlsl(array.map(function (c, i) {\n    return i < 3 ? c / 255 : c;\n  }));\n}\n/**\n * Returns a stable equivalent number for the string literal.\n * @param {ParsingContext} context Parsing context\n * @param {string} string String literal value\n * @return {number} Number equivalent\n */\n\nexport function getStringNumberEquivalent(context, string) {\n  if (context.stringLiteralsMap[string] === undefined) {\n    context.stringLiteralsMap[string] = Object.keys(context.stringLiteralsMap).length;\n  }\n\n  return context.stringLiteralsMap[string];\n}\n/**\n * Returns a stable equivalent number for the string literal, for use in shaders. This number is then\n * converted to be a GLSL-compatible string.\n * @param {ParsingContext} context Parsing context\n * @param {string} string String literal value\n * @return {string} GLSL-compatible string containing a number\n */\n\nexport function stringToGlsl(context, string) {\n  return numberToGlsl(getStringNumberEquivalent(context, string));\n}\n/**\n * Recursively parses a style expression and outputs a GLSL-compatible string. Takes in a parsing context that\n * will be read and modified during the parsing operation.\n * @param {ParsingContext} context Parsing context\n * @param {ExpressionValue} value Value\n * @param {ValueTypes|number} [typeHint] Hint for the expected final type (can be several types combined)\n * @return {string} GLSL-compatible output\n */\n\nexport function expressionToGlsl(context, value, typeHint) {\n  // operator\n  if (Array.isArray(value) && typeof value[0] === 'string') {\n    var operator = Operators[value[0]];\n\n    if (operator === undefined) {\n      throw new Error(\"Unrecognized expression operator: \" + JSON.stringify(value));\n    }\n\n    return operator.toGlsl(context, value.slice(1), typeHint);\n  }\n\n  var valueType = getValueType(value);\n\n  if ((valueType & ValueTypes.NUMBER) > 0) {\n    return numberToGlsl(\n    /** @type {number} */\n    value);\n  }\n\n  if ((valueType & ValueTypes.BOOLEAN) > 0) {\n    return value.toString();\n  }\n\n  if ((valueType & ValueTypes.STRING) > 0 && (typeHint === undefined || typeHint == ValueTypes.STRING)) {\n    return stringToGlsl(context, value.toString());\n  }\n\n  if ((valueType & ValueTypes.COLOR) > 0 && (typeHint === undefined || typeHint == ValueTypes.COLOR)) {\n    return colorToGlsl(\n    /** @type {Array<number> | string} */\n    value);\n  }\n\n  if ((valueType & ValueTypes.NUMBER_ARRAY) > 0) {\n    return arrayToGlsl(\n    /** @type {Array<number>} */\n    value);\n  }\n\n  throw new Error(\"Unexpected expression \" + value + \" (expected type \" + typeHint + \")\");\n}\n\nfunction assertNumber(value) {\n  if (!(getValueType(value) & ValueTypes.NUMBER)) {\n    throw new Error(\"A numeric value was expected, got \" + JSON.stringify(value) + \" instead\");\n  }\n}\n\nfunction assertNumbers(values) {\n  for (var i = 0; i < values.length; i++) {\n    assertNumber(values[i]);\n  }\n}\n\nfunction assertString(value) {\n  if (!(getValueType(value) & ValueTypes.STRING)) {\n    throw new Error(\"A string value was expected, got \" + JSON.stringify(value) + \" instead\");\n  }\n}\n\nfunction assertBoolean(value) {\n  if (!(getValueType(value) & ValueTypes.BOOLEAN)) {\n    throw new Error(\"A boolean value was expected, got \" + JSON.stringify(value) + \" instead\");\n  }\n}\n\nfunction assertArgsCount(args, count) {\n  if (args.length !== count) {\n    throw new Error(\"Exactly \" + count + \" arguments were expected, got \" + args.length + \" instead\");\n  }\n}\n\nfunction assertArgsMinCount(args, count) {\n  if (args.length < count) {\n    throw new Error(\"At least \" + count + \" arguments were expected, got \" + args.length + \" instead\");\n  }\n}\n\nfunction assertArgsMaxCount(args, count) {\n  if (args.length > count) {\n    throw new Error(\"At most \" + count + \" arguments were expected, got \" + args.length + \" instead\");\n  }\n}\n\nfunction assertArgsEven(args) {\n  if (args.length % 2 !== 0) {\n    throw new Error(\"An even amount of arguments was expected, got \" + args + \" instead\");\n  }\n}\n\nfunction assertArgsOdd(args) {\n  if (args.length % 2 === 0) {\n    throw new Error(\"An odd amount of arguments was expected, got \" + args + \" instead\");\n  }\n}\n\nfunction assertUniqueInferredType(args, types) {\n  if (!isTypeUnique(types)) {\n    throw new Error(\"Could not infer only one type from the following expression: \" + JSON.stringify(args));\n  }\n}\n\nOperators['get'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.ANY;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 1);\n    assertString(args[0]);\n    var value = args[0].toString();\n\n    if (context.attributes.indexOf(value) === -1) {\n      context.attributes.push(value);\n    }\n\n    var prefix = context.inFragmentShader ? 'v_' : 'a_';\n    return prefix + value;\n  }\n};\n/**\n * Get the uniform name given a variable name.\n * @param {string} variableName The variable name.\n * @return {string} The uniform name.\n */\n\nexport function uniformNameForVariable(variableName) {\n  return 'u_var_' + variableName;\n}\nOperators['var'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.ANY;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 1);\n    assertString(args[0]);\n    var value = args[0].toString();\n\n    if (context.variables.indexOf(value) === -1) {\n      context.variables.push(value);\n    }\n\n    return uniformNameForVariable(value);\n  }\n};\nexport var PALETTE_TEXTURE_ARRAY = 'u_paletteTextures'; // ['palette', index, colors]\n\nOperators['palette'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.COLOR;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumber(args[0]);\n    var index = expressionToGlsl(context, args[0]);\n    var colors = args[1];\n\n    if (!Array.isArray(colors)) {\n      throw new Error('The second argument of palette must be an array');\n    }\n\n    var numColors = colors.length;\n    var palette = new Uint8Array(numColors * 4);\n\n    for (var i = 0; i < numColors; i++) {\n      var candidate = colors[i];\n      /**\n       * @type {import('../color.js').Color}\n       */\n\n      var color = void 0;\n\n      if (typeof candidate === 'string') {\n        color = fromString(candidate);\n      } else {\n        if (!Array.isArray(candidate)) {\n          throw new Error('The second argument of palette must be an array of strings or colors');\n        }\n\n        var length_1 = candidate.length;\n\n        if (length_1 === 4) {\n          color = candidate;\n        } else {\n          if (length_1 !== 3) {\n            throw new Error(\"Expected palette color to have 3 or 4 values, got \" + length_1);\n          }\n\n          color = [candidate[0], candidate[1], candidate[2], 1];\n        }\n      }\n\n      var offset = i * 4;\n      palette[offset] = color[0];\n      palette[offset + 1] = color[1];\n      palette[offset + 2] = color[2];\n      palette[offset + 3] = color[3] * 255;\n    }\n\n    if (!context.paletteTextures) {\n      context.paletteTextures = [];\n    }\n\n    var paletteName = PALETTE_TEXTURE_ARRAY + \"[\" + context.paletteTextures.length + \"]\";\n    var paletteTexture = new PaletteTexture(paletteName, palette);\n    context.paletteTextures.push(paletteTexture);\n    return \"texture2D(\" + paletteName + \", vec2((\" + index + \" + 0.5) / \" + numColors + \".0, 0.5))\";\n  }\n};\nvar GET_BAND_VALUE_FUNC = 'getBandValue';\nOperators['band'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsMinCount(args, 1);\n    assertArgsMaxCount(args, 3);\n    var band = args[0];\n\n    if (!(GET_BAND_VALUE_FUNC in context.functions)) {\n      var ifBlocks = '';\n      var bandCount = context.bandCount || 1;\n\n      for (var i = 0; i < bandCount; i++) {\n        var colorIndex = Math.floor(i / 4);\n        var bandIndex = i % 4;\n\n        if (bandIndex === bandCount - 1 && bandIndex === 1) {\n          // LUMINANCE_ALPHA - band 1 assigned to rgb and band 2 assigned to alpha\n          bandIndex = 3;\n        }\n\n        var textureName = Uniforms.TILE_TEXTURE_ARRAY + \"[\" + colorIndex + \"]\";\n        ifBlocks += \"\\n          if (band == \" + (i + 1) + \".0) {\\n            return texture2D(\" + textureName + \", v_textureCoord + vec2(dx, dy))[\" + bandIndex + \"];\\n          }\\n        \";\n      }\n\n      context.functions[GET_BAND_VALUE_FUNC] = \"\\n        float getBandValue(float band, float xOffset, float yOffset) {\\n          float dx = xOffset / \" + Uniforms.TEXTURE_PIXEL_WIDTH + \";\\n          float dy = yOffset / \" + Uniforms.TEXTURE_PIXEL_HEIGHT + \";\\n          \" + ifBlocks + \"\\n        }\\n      \";\n    }\n\n    var bandExpression = expressionToGlsl(context, band);\n    var xOffsetExpression = expressionToGlsl(context, args[1] || 0);\n    var yOffsetExpression = expressionToGlsl(context, args[2] || 0);\n    return GET_BAND_VALUE_FUNC + \"(\" + bandExpression + \", \" + xOffsetExpression + \", \" + yOffsetExpression + \")\";\n  }\n};\nOperators['time'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 0);\n    return 'u_time';\n  }\n};\nOperators['zoom'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 0);\n    return 'u_zoom';\n  }\n};\nOperators['resolution'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 0);\n    return 'u_resolution';\n  }\n};\nOperators['*'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" * \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['/'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" / \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['+'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" + \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['-'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" - \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['clamp'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 3);\n    assertNumbers(args);\n    var min = expressionToGlsl(context, args[1]);\n    var max = expressionToGlsl(context, args[2]);\n    return \"clamp(\" + expressionToGlsl(context, args[0]) + \", \" + min + \", \" + max + \")\";\n  }\n};\nOperators['%'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"mod(\" + expressionToGlsl(context, args[0]) + \", \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['^'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"pow(\" + expressionToGlsl(context, args[0]) + \", \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['abs'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 1);\n    assertNumbers(args);\n    return \"abs(\" + expressionToGlsl(context, args[0]) + \")\";\n  }\n};\nOperators['sin'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 1);\n    assertNumbers(args);\n    return \"sin(\" + expressionToGlsl(context, args[0]) + \")\";\n  }\n};\nOperators['cos'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 1);\n    assertNumbers(args);\n    return \"cos(\" + expressionToGlsl(context, args[0]) + \")\";\n  }\n};\nOperators['atan'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsMinCount(args, 1);\n    assertArgsMaxCount(args, 2);\n    assertNumbers(args);\n    return args.length === 2 ? \"atan(\" + expressionToGlsl(context, args[0]) + \", \" + expressionToGlsl(context, args[1]) + \")\" : \"atan(\" + expressionToGlsl(context, args[0]) + \")\";\n  }\n};\nOperators['>'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.BOOLEAN;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" > \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['>='] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.BOOLEAN;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" >= \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['<'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.BOOLEAN;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" < \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['<='] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.BOOLEAN;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" <= \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\n\nfunction getEqualOperator(operator) {\n  return {\n    getReturnType: function getReturnType(args) {\n      return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function toGlsl(context, args) {\n      assertArgsCount(args, 2); // find common type\n\n      var type = ValueTypes.ANY;\n\n      for (var i = 0; i < args.length; i++) {\n        type &= getValueType(args[i]);\n      }\n\n      if (type === ValueTypes.NONE) {\n        throw new Error(\"All arguments should be of compatible type, got \" + JSON.stringify(args) + \" instead\");\n      } // Since it's not possible to have color types here, we can leave it out\n      // This fixes issues in case the value type is ambiguously detected as a color (e.g. the string 'red')\n\n\n      type &= ~ValueTypes.COLOR;\n      return \"(\" + expressionToGlsl(context, args[0], type) + \" \" + operator + \" \" + expressionToGlsl(context, args[1], type) + \")\";\n    }\n  };\n}\n\nOperators['=='] = getEqualOperator('==');\nOperators['!='] = getEqualOperator('!=');\nOperators['!'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.BOOLEAN;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 1);\n    assertBoolean(args[0]);\n    return \"(!\" + expressionToGlsl(context, args[0]) + \")\";\n  }\n};\n\nfunction getDecisionOperator(operator) {\n  return {\n    getReturnType: function getReturnType(args) {\n      return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function toGlsl(context, args) {\n      assertArgsMinCount(args, 2);\n\n      for (var i = 0; i < args.length; i++) {\n        assertBoolean(args[i]);\n      }\n\n      var result = '';\n      result = args.map(function (arg) {\n        return expressionToGlsl(context, arg);\n      }).join(\" \" + operator + \" \");\n      result = \"(\" + result + \")\";\n      return result;\n    }\n  };\n}\n\nOperators['all'] = getDecisionOperator('&&');\nOperators['any'] = getDecisionOperator('||');\nOperators['between'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.BOOLEAN;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 3);\n    assertNumbers(args);\n    var min = expressionToGlsl(context, args[1]);\n    var max = expressionToGlsl(context, args[2]);\n    var value = expressionToGlsl(context, args[0]);\n    return \"(\" + value + \" >= \" + min + \" && \" + value + \" <= \" + max + \")\";\n  }\n};\nOperators['array'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER_ARRAY;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsMinCount(args, 2);\n    assertArgsMaxCount(args, 4);\n    assertNumbers(args);\n    var parsedArgs = args.map(function (val) {\n      return expressionToGlsl(context, val, ValueTypes.NUMBER);\n    });\n    return \"vec\" + args.length + \"(\" + parsedArgs.join(', ') + \")\";\n  }\n};\nOperators['color'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.COLOR;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsMinCount(args, 3);\n    assertArgsMaxCount(args, 4);\n    assertNumbers(args);\n    var array =\n    /** @type {Array<number>} */\n    args;\n\n    if (args.length === 3) {\n      array.push(1);\n    }\n\n    var parsedArgs = args.map(function (val, i) {\n      return expressionToGlsl(context, val, ValueTypes.NUMBER) + (i < 3 ? ' / 255.0' : '');\n    });\n    return \"vec\" + args.length + \"(\" + parsedArgs.join(', ') + \")\";\n  }\n};\nOperators['interpolate'] = {\n  getReturnType: function getReturnType(args) {\n    var type = ValueTypes.COLOR | ValueTypes.NUMBER;\n\n    for (var i = 3; i < args.length; i += 2) {\n      type = type & getValueType(args[i]);\n    }\n\n    return type;\n  },\n  toGlsl: function toGlsl(context, args, opt_typeHint) {\n    assertArgsEven(args);\n    assertArgsMinCount(args, 6); // validate interpolation type\n\n    var type = args[0];\n    var interpolation;\n\n    switch (type[0]) {\n      case 'linear':\n        interpolation = 1;\n        break;\n\n      case 'exponential':\n        interpolation = type[1];\n        break;\n\n      default:\n        interpolation = null;\n    }\n\n    if (!interpolation) {\n      throw new Error(\"Invalid interpolation type for \\\"interpolate\\\" operator, received: \" + JSON.stringify(type));\n    } // compute input/output types\n\n\n    var typeHint = opt_typeHint !== undefined ? opt_typeHint : ValueTypes.ANY;\n    var outputType = Operators['interpolate'].getReturnType(args) & typeHint;\n    assertUniqueInferredType(args, outputType);\n    var input = expressionToGlsl(context, args[1]);\n    var exponent = numberToGlsl(interpolation);\n    var result = '';\n\n    for (var i = 2; i < args.length - 2; i += 2) {\n      var stop1 = expressionToGlsl(context, args[i]);\n      var output1 = result || expressionToGlsl(context, args[i + 1], outputType);\n      var stop2 = expressionToGlsl(context, args[i + 2]);\n      var output2 = expressionToGlsl(context, args[i + 3], outputType);\n      result = \"mix(\" + output1 + \", \" + output2 + \", pow(clamp((\" + input + \" - \" + stop1 + \") / (\" + stop2 + \" - \" + stop1 + \"), 0.0, 1.0), \" + exponent + \"))\";\n    }\n\n    return result;\n  }\n};\nOperators['match'] = {\n  getReturnType: function getReturnType(args) {\n    var type = ValueTypes.ANY;\n\n    for (var i = 2; i < args.length; i += 2) {\n      type = type & getValueType(args[i]);\n    }\n\n    type = type & getValueType(args[args.length - 1]);\n    return type;\n  },\n  toGlsl: function toGlsl(context, args, opt_typeHint) {\n    assertArgsEven(args);\n    assertArgsMinCount(args, 4);\n    var typeHint = opt_typeHint !== undefined ? opt_typeHint : ValueTypes.ANY;\n    var outputType = Operators['match'].getReturnType(args) & typeHint;\n    assertUniqueInferredType(args, outputType);\n    var input = expressionToGlsl(context, args[0]);\n    var fallback = expressionToGlsl(context, args[args.length - 1], outputType);\n    var result = null;\n\n    for (var i = args.length - 3; i >= 1; i -= 2) {\n      var match = expressionToGlsl(context, args[i]);\n      var output = expressionToGlsl(context, args[i + 1], outputType);\n      result = \"(\" + input + \" == \" + match + \" ? \" + output + \" : \" + (result || fallback) + \")\";\n    }\n\n    return result;\n  }\n};\nOperators['case'] = {\n  getReturnType: function getReturnType(args) {\n    var type = ValueTypes.ANY;\n\n    for (var i = 1; i < args.length; i += 2) {\n      type = type & getValueType(args[i]);\n    }\n\n    type = type & getValueType(args[args.length - 1]);\n    return type;\n  },\n  toGlsl: function toGlsl(context, args, opt_typeHint) {\n    assertArgsOdd(args);\n    assertArgsMinCount(args, 3);\n    var typeHint = opt_typeHint !== undefined ? opt_typeHint : ValueTypes.ANY;\n    var outputType = Operators['case'].getReturnType(args) & typeHint;\n    assertUniqueInferredType(args, outputType);\n\n    for (var i = 0; i < args.length - 1; i += 2) {\n      assertBoolean(args[i]);\n    }\n\n    var fallback = expressionToGlsl(context, args[args.length - 1], outputType);\n    var result = null;\n\n    for (var i = args.length - 3; i >= 0; i -= 2) {\n      var condition = expressionToGlsl(context, args[i]);\n      var output = expressionToGlsl(context, args[i + 1], outputType);\n      result = \"(\" + condition + \" ? \" + output + \" : \" + (result || fallback) + \")\";\n    }\n\n    return result;\n  }\n};","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/layer/WebGLTile\n */\n\n\nimport BaseTileLayer from './BaseTile.js';\nimport LayerProperty from '../layer/Property.js';\nimport WebGLTileLayerRenderer, { Attributes, Uniforms } from '../renderer/webgl/TileLayer.js';\nimport { PALETTE_TEXTURE_ARRAY, ValueTypes, expressionToGlsl, getStringNumberEquivalent, uniformNameForVariable } from '../style/expressions.js';\nimport { assign } from '../obj.js';\n/**\n * @typedef {import(\"../source/DataTile.js\").default|import(\"../source/TileImage.js\").default} SourceType\n */\n\n/**\n * @typedef {Object} Style\n * Translates tile data to rendered pixels.\n *\n * @property {Object<string, (string|number)>} [variables] Style variables.  Each variable must hold a number or string.  These\n * variables can be used in the `color`, `brightness`, `contrast`, `exposure`, `saturation` and `gamma`\n * {@link import(\"../style/expressions.js\").ExpressionValue expressions}, using the `['var', 'varName']` operator.\n * To update style variables, use the {@link import(\"./WebGLTile.js\").default#updateStyleVariables} method.\n * @property {import(\"../style/expressions.js\").ExpressionValue} [color] An expression applied to color values.\n * @property {import(\"../style/expressions.js\").ExpressionValue} [brightness=0] Value used to decrease or increase\n * the layer brightness.  Values range from -1 to 1.\n * @property {import(\"../style/expressions.js\").ExpressionValue} [contrast=0] Value used to decrease or increase\n * the layer contrast.  Values range from -1 to 1.\n * @property {import(\"../style/expressions.js\").ExpressionValue} [exposure=0] Value used to decrease or increase\n * the layer exposure.  Values range from -1 to 1.\n * @property {import(\"../style/expressions.js\").ExpressionValue} [saturation=0] Value used to decrease or increase\n * the layer saturation.  Values range from -1 to 1.\n * @property {import(\"../style/expressions.js\").ExpressionValue} [gamma=1] Apply a gamma correction to the layer.\n * Values range from 0 to infinity.\n */\n\n/**\n * @typedef {Object} Options\n * @property {Style} [style] Style to apply to the layer.\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {SourceType} [source] Source for this layer.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n * @property {number} [cacheSize=512] The internal texture cache size.  This needs to be large enough to render\n * two zoom levels worth of tiles.\n */\n\n/**\n * @typedef {Object} ParsedStyle\n * @property {string} vertexShader The vertex shader.\n * @property {string} fragmentShader The fragment shader.\n * @property {Object<string,import(\"../webgl/Helper.js\").UniformValue>} uniforms Uniform definitions.\n * @property {Array<import(\"../webgl/PaletteTexture.js\").default>} paletteTextures Palette textures.\n */\n\n/**\n * @param {Style} style The layer style.\n * @param {number} [bandCount] The number of bands.\n * @return {ParsedStyle} Shaders and uniforms generated from the style.\n */\n\nfunction parseStyle(style, bandCount) {\n  var vertexShader = \"\\n    attribute vec2 \" + Attributes.TEXTURE_COORD + \";\\n    uniform mat4 \" + Uniforms.TILE_TRANSFORM + \";\\n    uniform float \" + Uniforms.DEPTH + \";\\n\\n    varying vec2 v_textureCoord;\\n\\n    void main() {\\n      v_textureCoord = \" + Attributes.TEXTURE_COORD + \";\\n      gl_Position = \" + Uniforms.TILE_TRANSFORM + \" * vec4(\" + Attributes.TEXTURE_COORD + \", \" + Uniforms.DEPTH + \", 1.0);\\n    }\\n  \";\n  /**\n   * @type {import(\"../style/expressions.js\").ParsingContext}\n   */\n\n  var context = {\n    inFragmentShader: true,\n    variables: [],\n    attributes: [],\n    stringLiteralsMap: {},\n    functions: {},\n    bandCount: bandCount\n  };\n  var pipeline = [];\n\n  if (style.color !== undefined) {\n    var color = expressionToGlsl(context, style.color, ValueTypes.COLOR);\n    pipeline.push(\"color = \" + color + \";\");\n  }\n\n  if (style.contrast !== undefined) {\n    var contrast = expressionToGlsl(context, style.contrast, ValueTypes.NUMBER);\n    pipeline.push(\"color.rgb = clamp((\" + contrast + \" + 1.0) * color.rgb - (\" + contrast + \" / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\");\n  }\n\n  if (style.exposure !== undefined) {\n    var exposure = expressionToGlsl(context, style.exposure, ValueTypes.NUMBER);\n    pipeline.push(\"color.rgb = clamp((\" + exposure + \" + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\");\n  }\n\n  if (style.saturation !== undefined) {\n    var saturation = expressionToGlsl(context, style.saturation, ValueTypes.NUMBER);\n    pipeline.push(\"\\n      float saturation = \" + saturation + \" + 1.0;\\n      float sr = (1.0 - saturation) * 0.2126;\\n      float sg = (1.0 - saturation) * 0.7152;\\n      float sb = (1.0 - saturation) * 0.0722;\\n      mat3 saturationMatrix = mat3(\\n        sr + saturation, sr, sr,\\n        sg, sg + saturation, sg,\\n        sb, sb, sb + saturation\\n      );\\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\\n    \");\n  }\n\n  if (style.gamma !== undefined) {\n    var gamma = expressionToGlsl(context, style.gamma, ValueTypes.NUMBER);\n    pipeline.push(\"color.rgb = pow(color.rgb, vec3(1.0 / \" + gamma + \"));\");\n  }\n\n  if (style.brightness !== undefined) {\n    var brightness = expressionToGlsl(context, style.brightness, ValueTypes.NUMBER);\n    pipeline.push(\"color.rgb = clamp(color.rgb + \" + brightness + \", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\");\n  }\n  /** @type {Object<string,import(\"../webgl/Helper\").UniformValue>} */\n\n\n  var uniforms = {};\n  var numVariables = context.variables.length;\n\n  if (numVariables > 1 && !style.variables) {\n    throw new Error(\"Missing variables in style (expected \" + context.variables + \")\");\n  }\n\n  var _loop_1 = function _loop_1(i) {\n    var variableName = context.variables[i];\n\n    if (!(variableName in style.variables)) {\n      throw new Error(\"Missing '\" + variableName + \"' in style variables\");\n    }\n\n    var uniformName = uniformNameForVariable(variableName);\n\n    uniforms[uniformName] = function () {\n      var value = style.variables[variableName];\n\n      if (typeof value === 'string') {\n        value = getStringNumberEquivalent(context, value);\n      }\n\n      return value !== undefined ? value : -9999999; // to avoid matching with the first string literal\n    };\n  };\n\n  for (var i = 0; i < numVariables; ++i) {\n    _loop_1(i);\n  }\n\n  var uniformDeclarations = Object.keys(uniforms).map(function (name) {\n    return \"uniform float \" + name + \";\";\n  });\n  var textureCount = Math.ceil(bandCount / 4);\n  uniformDeclarations.push(\"uniform sampler2D \" + Uniforms.TILE_TEXTURE_ARRAY + \"[\" + textureCount + \"];\");\n\n  if (context.paletteTextures) {\n    uniformDeclarations.push(\"uniform sampler2D \" + PALETTE_TEXTURE_ARRAY + \"[\" + context.paletteTextures.length + \"];\");\n  }\n\n  var functionDefintions = Object.keys(context.functions).map(function (name) {\n    return context.functions[name];\n  });\n  var fragmentShader = \"\\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\\n    precision highp float;\\n    #else\\n    precision mediump float;\\n    #endif\\n\\n    varying vec2 v_textureCoord;\\n    uniform float \" + Uniforms.TRANSITION_ALPHA + \";\\n    uniform float \" + Uniforms.TEXTURE_PIXEL_WIDTH + \";\\n    uniform float \" + Uniforms.TEXTURE_PIXEL_HEIGHT + \";\\n    uniform float \" + Uniforms.RESOLUTION + \";\\n    uniform float \" + Uniforms.ZOOM + \";\\n\\n    \" + uniformDeclarations.join('\\n') + \"\\n\\n    \" + functionDefintions.join('\\n') + \"\\n\\n    void main() {\\n      vec4 color = texture2D(\" + Uniforms.TILE_TEXTURE_ARRAY + \"[0],  v_textureCoord);\\n\\n      \" + pipeline.join('\\n') + \"\\n\\n      if (color.a == 0.0) {\\n        discard;\\n      }\\n\\n      gl_FragColor = color;\\n      gl_FragColor.rgb *= gl_FragColor.a;\\n      gl_FragColor *= \" + Uniforms.TRANSITION_ALPHA + \";\\n    }\";\n  return {\n    vertexShader: vertexShader,\n    fragmentShader: fragmentShader,\n    uniforms: uniforms,\n    paletteTextures: context.paletteTextures\n  };\n}\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @extends BaseTileLayer<SourceType, WebGLTileLayerRenderer>\n * @api\n */\n\n\nvar WebGLTileLayer =\n/** @class */\nfunction (_super) {\n  __extends(WebGLTileLayer, _super);\n  /**\n   * @param {Options} opt_options Tile layer options.\n   */\n\n\n  function WebGLTileLayer(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? assign({}, opt_options) : {};\n    var style = options.style || {};\n    delete options.style;\n    var cacheSize = options.cacheSize;\n    delete options.cacheSize;\n    _this = _super.call(this, options) || this;\n    /**\n     * @type {Style}\n     * @private\n     */\n\n    _this.style_ = style;\n    /**\n     * @type {number}\n     * @private\n     */\n\n    _this.cacheSize_ = cacheSize;\n    /**\n     * @type {Object<string, (string|number)>}\n     * @private\n     */\n\n    _this.styleVariables_ = _this.style_.variables || {};\n\n    _this.addChangeListener(LayerProperty.SOURCE, _this.handleSourceUpdate_);\n\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  WebGLTileLayer.prototype.handleSourceUpdate_ = function () {\n    this.setStyle(this.style_);\n  };\n  /**\n   * @private\n   * @return {number} The number of source bands.\n   */\n\n\n  WebGLTileLayer.prototype.getSourceBandCount_ = function () {\n    var source = this.getSource();\n    return source && 'bandCount' in source ? source.bandCount : 4;\n  };\n\n  WebGLTileLayer.prototype.createRenderer = function () {\n    var parsedStyle = parseStyle(this.style_, this.getSourceBandCount_());\n    return new WebGLTileLayerRenderer(this, {\n      vertexShader: parsedStyle.vertexShader,\n      fragmentShader: parsedStyle.fragmentShader,\n      uniforms: parsedStyle.uniforms,\n      cacheSize: this.cacheSize_,\n      paletteTextures: parsedStyle.paletteTextures\n    });\n  };\n  /**\n   * Update the layer style.  The `updateStyleVariables` function is a more efficient\n   * way to update layer rendering.  In cases where the whole style needs to be updated,\n   * this method may be called instead.\n   * @param {Style} style The new style.\n   */\n\n\n  WebGLTileLayer.prototype.setStyle = function (style) {\n    this.style_ = style;\n    var parsedStyle = parseStyle(this.style_, this.getSourceBandCount_());\n    var renderer = this.getRenderer();\n    renderer.reset({\n      vertexShader: parsedStyle.vertexShader,\n      fragmentShader: parsedStyle.fragmentShader,\n      uniforms: parsedStyle.uniforms,\n      paletteTextures: parsedStyle.paletteTextures\n    });\n    this.changed();\n  };\n  /**\n   * Update any variables used by the layer style and trigger a re-render.\n   * @param {Object<string, number>} variables Variables to update.\n   * @api\n   */\n\n\n  WebGLTileLayer.prototype.updateStyleVariables = function (variables) {\n    assign(this.styleVariables_, variables);\n    this.changed();\n  };\n\n  return WebGLTileLayer;\n}(BaseTileLayer);\n/**\n * Clean up underlying WebGL resources.\n * @function\n * @api\n */\n\n\nWebGLTileLayer.prototype.dispose;\nexport default WebGLTileLayer;","/**\n * @module ol/control/MousePosition\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport Control from './Control.js';\nimport EventType from '../pointer/EventType.js';\nimport { get as getProjection, getTransformFromProjections, getUserProjection, identityTransform } from '../proj.js';\nimport { listen } from '../events.js';\n/**\n * @type {string}\n */\n\nvar PROJECTION = 'projection';\n/**\n * @type {string}\n */\n\nvar COORDINATE_FORMAT = 'coordinateFormat';\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:coordinateFormat'|'change:projection', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:coordinateFormat'|'change:projection', Return>} MousePositionOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-mouse-position'] CSS class name.\n * @property {import(\"../coordinate.js\").CoordinateFormat} [coordinateFormat] Coordinate format.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the\n * control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {HTMLElement|string} [target] Specify a target if you want the\n * control to be rendered outside of the map's viewport.\n * @property {string|boolean} [placeholder] Markup to show when the mouse position is not\n * available (e.g. when the pointer leaves the map viewport).  By default, a non-breaking space\n * is rendered when the mouse leaves the viewport.  To render something else, provide a string\n * to be used as the text content (e.g. 'no position' or '' for an empty string).  Set the placeholder\n * to `false` to retain the last position when the mouse leaves the viewport.  In a future release, this\n * will be the default behavior.\n * @property {string} [undefinedHTML='&#160;'] This option is deprecated.  Use the `placeholder` option instead.\n */\n\n/**\n * @classdesc\n * A control to show the 2D coordinates of the mouse cursor. By default, these\n * are in the view projection, but can be in any supported projection.\n * By default the control is shown in the top right corner of the map, but this\n * can be changed by using the css selector `.ol-mouse-position`.\n *\n * On touch devices, which usually do not have a mouse cursor, the coordinates\n * of the currently touched position are shown.\n *\n * @api\n */\n\nvar MousePosition =\n/** @class */\nfunction (_super) {\n  __extends(MousePosition, _super);\n  /**\n   * @param {Options} [opt_options] Mouse position options.\n   */\n\n\n  function MousePosition(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    var element = document.createElement('div');\n    element.className = options.className !== undefined ? options.className : 'ol-mouse-position';\n    _this = _super.call(this, {\n      element: element,\n      render: options.render,\n      target: options.target\n    }) || this;\n    /***\n     * @type {MousePositionOnSignature<import(\"../events\").EventsKey>}\n     */\n\n    _this.on;\n    /***\n     * @type {MousePositionOnSignature<import(\"../events\").EventsKey>}\n     */\n\n    _this.once;\n    /***\n     * @type {MousePositionOnSignature<void>}\n     */\n\n    _this.un;\n\n    _this.addChangeListener(PROJECTION, _this.handleProjectionChanged_);\n\n    if (options.coordinateFormat) {\n      _this.setCoordinateFormat(options.coordinateFormat);\n    }\n\n    if (options.projection) {\n      _this.setProjection(options.projection);\n    }\n    /**\n     * Change this to `false` when removing the deprecated `undefinedHTML` option.\n     * @type {boolean}\n     */\n\n\n    var renderOnMouseOut = true;\n    /**\n     * @type {string}\n     */\n\n    var placeholder = '&#160;';\n\n    if ('undefinedHTML' in options) {\n      // deprecated behavior\n      if (options.undefinedHTML !== undefined) {\n        placeholder = options.undefinedHTML;\n      }\n\n      renderOnMouseOut = !!placeholder;\n    } else if ('placeholder' in options) {\n      if (options.placeholder === false) {\n        renderOnMouseOut = false;\n      } else {\n        placeholder = String(options.placeholder);\n      }\n    }\n    /**\n     * @private\n     * @type {string}\n     */\n\n\n    _this.placeholder_ = placeholder;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.renderOnMouseOut_ = renderOnMouseOut;\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.renderedHTML_ = element.innerHTML;\n    /**\n     * @private\n     * @type {?import(\"../proj/Projection.js\").default}\n     */\n\n    _this.mapProjection_ = null;\n    /**\n     * @private\n     * @type {?import(\"../proj.js\").TransformFunction}\n     */\n\n    _this.transform_ = null;\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  MousePosition.prototype.handleProjectionChanged_ = function () {\n    this.transform_ = null;\n  };\n  /**\n   * Return the coordinate format type used to render the current position or\n   * undefined.\n   * @return {import(\"../coordinate.js\").CoordinateFormat|undefined} The format to render the current\n   *     position in.\n   * @observable\n   * @api\n   */\n\n\n  MousePosition.prototype.getCoordinateFormat = function () {\n    return (\n      /** @type {import(\"../coordinate.js\").CoordinateFormat|undefined} */\n      this.get(COORDINATE_FORMAT)\n    );\n  };\n  /**\n   * Return the projection that is used to report the mouse position.\n   * @return {import(\"../proj/Projection.js\").default|undefined} The projection to report mouse\n   *     position in.\n   * @observable\n   * @api\n   */\n\n\n  MousePosition.prototype.getProjection = function () {\n    return (\n      /** @type {import(\"../proj/Projection.js\").default|undefined} */\n      this.get(PROJECTION)\n    );\n  };\n  /**\n   * @param {MouseEvent} event Browser event.\n   * @protected\n   */\n\n\n  MousePosition.prototype.handleMouseMove = function (event) {\n    var map = this.getMap();\n    this.updateHTML_(map.getEventPixel(event));\n  };\n  /**\n   * @param {Event} event Browser event.\n   * @protected\n   */\n\n\n  MousePosition.prototype.handleMouseOut = function (event) {\n    this.updateHTML_(null);\n  };\n  /**\n   * Remove the control from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @api\n   */\n\n\n  MousePosition.prototype.setMap = function (map) {\n    _super.prototype.setMap.call(this, map);\n\n    if (map) {\n      var viewport = map.getViewport();\n      this.listenerKeys.push(listen(viewport, EventType.POINTERMOVE, this.handleMouseMove, this));\n\n      if (this.renderOnMouseOut_) {\n        this.listenerKeys.push(listen(viewport, EventType.POINTEROUT, this.handleMouseOut, this));\n      }\n\n      this.updateHTML_(null);\n    }\n  };\n  /**\n   * Set the coordinate format type used to render the current position.\n   * @param {import(\"../coordinate.js\").CoordinateFormat} format The format to render the current\n   *     position in.\n   * @observable\n   * @api\n   */\n\n\n  MousePosition.prototype.setCoordinateFormat = function (format) {\n    this.set(COORDINATE_FORMAT, format);\n  };\n  /**\n   * Set the projection that is used to report the mouse position.\n   * @param {import(\"../proj.js\").ProjectionLike} projection The projection to report mouse\n   *     position in.\n   * @observable\n   * @api\n   */\n\n\n  MousePosition.prototype.setProjection = function (projection) {\n    this.set(PROJECTION, getProjection(projection));\n  };\n  /**\n   * @param {?import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @private\n   */\n\n\n  MousePosition.prototype.updateHTML_ = function (pixel) {\n    var html = this.placeholder_;\n\n    if (pixel && this.mapProjection_) {\n      if (!this.transform_) {\n        var projection = this.getProjection();\n\n        if (projection) {\n          this.transform_ = getTransformFromProjections(this.mapProjection_, projection);\n        } else {\n          this.transform_ = identityTransform;\n        }\n      }\n\n      var map = this.getMap();\n      var coordinate = map.getCoordinateFromPixelInternal(pixel);\n\n      if (coordinate) {\n        var userProjection = getUserProjection();\n\n        if (userProjection) {\n          this.transform_ = getTransformFromProjections(this.mapProjection_, userProjection);\n        }\n\n        this.transform_(coordinate, coordinate);\n        var coordinateFormat = this.getCoordinateFormat();\n\n        if (coordinateFormat) {\n          html = coordinateFormat(coordinate);\n        } else {\n          html = coordinate.toString();\n        }\n      }\n    }\n\n    if (!this.renderedHTML_ || html !== this.renderedHTML_) {\n      this.element.innerHTML = html;\n      this.renderedHTML_ = html;\n    }\n  };\n  /**\n   * Update the projection. Rendering of the coordinates is done in\n   * `handleMouseMove` and `handleMouseUp`.\n   * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n   * @override\n   */\n\n\n  MousePosition.prototype.render = function (mapEvent) {\n    var frameState = mapEvent.frameState;\n\n    if (!frameState) {\n      this.mapProjection_ = null;\n    } else {\n      if (this.mapProjection_ != frameState.viewState.projection) {\n        this.mapProjection_ = frameState.viewState.projection;\n        this.transform_ = null;\n      }\n    }\n  };\n\n  return MousePosition;\n}(Control);\n\nexport default MousePosition;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/DataTile\n */\n\n\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\n/**\n * Data that can be used with a DataTile.  For increased browser compatibility, use\n * Uint8Array instead of Uint8ClampedArray where possible.\n * @typedef {Uint8Array|Uint8ClampedArray|Float32Array|DataView} Data\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @property {function(): Promise<Data>} loader Data loader.\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n * @api\n */\n\nvar DataTile =\n/** @class */\nfunction (_super) {\n  __extends(DataTile, _super);\n  /**\n   * @param {Options} options Tile options.\n   */\n\n\n  function DataTile(options) {\n    var _this = this;\n\n    var state = TileState.IDLE;\n    _this = _super.call(this, options.tileCoord, state, {\n      transition: options.transition,\n      interpolate: options.interpolate\n    }) || this;\n    /**\n     * @type {function(): Promise<Data>}\n     * @private\n     */\n\n    _this.loader_ = options.loader;\n    /**\n     * @type {Data}\n     * @private\n     */\n\n    _this.data_ = null;\n    /**\n     * @type {Error}\n     * @private\n     */\n\n    _this.error_ = null;\n    return _this;\n  }\n  /**\n   * Get the data for the tile.\n   * @return {Data} Tile data.\n   * @api\n   */\n\n\n  DataTile.prototype.getData = function () {\n    return this.data_;\n  };\n  /**\n   * Get any loading error.\n   * @return {Error} Loading error.\n   * @api\n   */\n\n\n  DataTile.prototype.getError = function () {\n    return this.error_;\n  };\n  /**\n   * Load not yet loaded URI.\n   * @api\n   */\n\n\n  DataTile.prototype.load = function () {\n    this.state = TileState.LOADING;\n    this.changed();\n    var self = this;\n    this.loader_().then(function (data) {\n      self.data_ = data;\n      self.state = TileState.LOADED;\n      self.changed();\n    }).catch(function (error) {\n      self.error_ = error;\n      self.state = TileState.ERROR;\n      self.changed();\n    });\n  };\n\n  return DataTile;\n}(Tile);\n\nexport default DataTile;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/source/DataTile\n */\n\n\nimport DataTile from '../DataTile.js';\nimport EventType from '../events/EventType.js';\nimport TileEventType from './TileEventType.js';\nimport TileSource, { TileSourceEvent } from './Tile.js';\nimport TileState from '../TileState.js';\nimport { assign } from '../obj.js';\nimport { createXYZ, extentFromProjection } from '../tilegrid.js';\nimport { getKeyZXY } from '../tilecoord.js';\nimport { getUid } from '../util.js';\nimport { toPromise } from '../functions.js';\n/**\n * Data tile loading function.  The function is called with z, x, and y tile coordinates and\n * returns {@link import(\"../DataTile.js\").Data data} for a tile or a promise for the same.\n * @typedef {function(number, number, number) : (import(\"../DataTile.js\").Data|Promise<import(\"../DataTile.js\").Data>)} Loader\n */\n\n/**\n * @typedef {Object} Options\n * @property {Loader} [loader] Data loader.  Called with z, x, and y tile coordinates.\n * Returns {@link import(\"../DataTile.js\").Data data} for a tile or a promise for the same.\n * @property {number} [maxZoom=42] Optional max zoom level. Not used if `tileGrid` is provided.\n * @property {number} [minZoom=0] Optional min zoom level. Not used if `tileGrid` is provided.\n * @property {number|import(\"../size.js\").Size} [tileSize=[256, 256]] The pixel width and height of the tiles.\n * @property {number} [maxResolution] Optional tile grid resolution at level zero. Not used if `tileGrid` is provided.\n * @property {import(\"../proj.js\").ProjectionLike} [projection='EPSG:3857'] Tile projection.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {boolean} [opaque=false] Whether the layer is opaque.\n * @property {import(\"./State.js\").default} [state] The source state.\n * @property {number} [tilePixelRatio] Tile pixel ratio.\n * @property {boolean} [wrapX=false] Render tiles beyond the antimeridian.\n * @property {number} [transition] Transition time when fading in new tiles (in miliseconds).\n * @property {number} [bandCount=4] Number of bands represented in the data.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n */\n\n/**\n * @classdesc\n * A source for typed array data tiles.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n * @api\n */\n\nvar DataTileSource =\n/** @class */\nfunction (_super) {\n  __extends(DataTileSource, _super);\n  /**\n   * @param {Options} options Image tile options.\n   */\n\n\n  function DataTileSource(options) {\n    var _this = this;\n\n    var projection = options.projection === undefined ? 'EPSG:3857' : options.projection;\n    var tileGrid = options.tileGrid;\n\n    if (tileGrid === undefined && projection) {\n      tileGrid = createXYZ({\n        extent: extentFromProjection(projection),\n        maxResolution: options.maxResolution,\n        maxZoom: options.maxZoom,\n        minZoom: options.minZoom,\n        tileSize: options.tileSize\n      });\n    }\n\n    _this = _super.call(this, {\n      cacheSize: 0.1,\n      projection: projection,\n      tileGrid: tileGrid,\n      opaque: options.opaque,\n      state: options.state,\n      tilePixelRatio: options.tilePixelRatio,\n      wrapX: options.wrapX,\n      transition: options.transition,\n      interpolate: options.interpolate\n    }) || this;\n    /**\n     * @private\n     * @type {!Object<string, boolean>}\n     */\n\n    _this.tileLoadingKeys_ = {};\n    /**\n     * @private\n     */\n\n    _this.loader_ = options.loader;\n    _this.handleTileChange_ = _this.handleTileChange_.bind(_this);\n    /**\n     * @type {number}\n     */\n\n    _this.bandCount = options.bandCount === undefined ? 4 : options.bandCount; // assume RGBA if undefined\n\n    return _this;\n  }\n  /**\n   * @param {Loader} loader The data loader.\n   * @protected\n   */\n\n\n  DataTileSource.prototype.setLoader = function (loader) {\n    this.loader_ = loader;\n  };\n  /**\n   * @abstract\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!DataTile} Tile.\n   */\n\n\n  DataTileSource.prototype.getTile = function (z, x, y, pixelRatio, projection) {\n    var tileCoordKey = getKeyZXY(z, x, y);\n\n    if (this.tileCache.containsKey(tileCoordKey)) {\n      return this.tileCache.get(tileCoordKey);\n    }\n\n    var sourceLoader = this.loader_;\n\n    function loader() {\n      return toPromise(function () {\n        return sourceLoader(z, x, y);\n      });\n    }\n\n    var tile = new DataTile(assign({\n      tileCoord: [z, x, y],\n      loader: loader\n    }, this.tileOptions));\n    tile.key = this.getKey();\n    tile.addEventListener(EventType.CHANGE, this.handleTileChange_);\n    this.tileCache.set(tileCoordKey, tile);\n    return tile;\n  };\n  /**\n   * Handle tile change events.\n   * @param {import(\"../events/Event.js\").default} event Event.\n   */\n\n\n  DataTileSource.prototype.handleTileChange_ = function (event) {\n    var tile =\n    /** @type {import(\"../Tile.js\").default} */\n    event.target;\n    var uid = getUid(tile);\n    var tileState = tile.getState();\n    var type;\n\n    if (tileState == TileState.LOADING) {\n      this.tileLoadingKeys_[uid] = true;\n      type = TileEventType.TILELOADSTART;\n    } else if (uid in this.tileLoadingKeys_) {\n      delete this.tileLoadingKeys_[uid];\n      type = tileState == TileState.ERROR ? TileEventType.TILELOADERROR : tileState == TileState.LOADED ? TileEventType.TILELOADEND : undefined;\n    }\n\n    if (type) {\n      this.dispatchEvent(new TileSourceEvent(type, tile));\n    }\n  };\n\n  return DataTileSource;\n}(TileSource);\n\nexport default DataTileSource;","/**\n * https://github.com/openlayers/openlayers/blob/d6e9f8bea4c03c2cea0229ab1a2e06d25349f26c/src/ol/source/GeoTIFF.js\n * \n **/\n\n/**\n * @module ol/source/GeoTIFF\n */\nimport DataTile from \"ol/source/DataTile.js\";\nimport State from \"ol/source/State.js\";\nimport TileGrid from \"ol/tilegrid/TileGrid.js\";\nimport {\n  Pool,\n  fromUrl as tiffFromUrl,\n  fromBlob as tiffFromBlob,\n} from \"geotiff/dist-browser/geotiff.js\";\n// : https://github.com/openlayers/openlayers/issues/13046\n//  geotiff/src/geotiff.js \nimport {\n  Projection,\n  get as getCachedProjection,\n  toUserCoordinate,\n  toUserExtent,\n} from \"ol/proj.js\";\nimport {\n  clamp\n} from \"ol/math.js\";\nimport {\n  create as createDecoderWorker\n} from \"ol/worker/geotiff-decoder.js\";\nimport {\n  getCenter,\n  getIntersection\n} from \"ol/extent.js\";\nimport {\n  toSize\n} from \"ol/size.js\";\nimport {\n  fromCode as unitsFromCode\n} from \"ol/proj/Units.js\";\n\n/**\n * @typedef {Object} SourceInfo\n * @property {string} url URL for the source GeoTIFF.\n * @property {Blob} blob Blob containing the source GeoTIFF. `blob` and `url` are mutually exclusive.\n * @property {number} [min=0] The minimum source data value.  Rendered values are scaled from 0 to 1 based on\n * the configured min and max.  If not provided and raster statistics are available, those will be used instead.\n * If neither are available, the minimum for the data type will be used.  To disable this behavior, set\n * the `normalize` option to `false` in the constructor.\n * @property {number} [max] The maximum source data value.  Rendered values are scaled from 0 to 1 based on\n * the configured min and max.  If not provided and raster statistics are available, those will be used instead.\n * If neither are available, the maximum for the data type will be used.  To disable this behavior, set\n * the `normalize` option to `false` in the constructor.\n * @property {number} [nodata] Values to discard (overriding any nodata values in the metadata).\n * When provided, an additional alpha band will be added to the data.  Often the GeoTIFF metadata\n * will include information about nodata values, so you should only need to set this property if\n * you find that it is not already extracted from the metadata.\n * @property {Array<number>} [bands] Band numbers to be read from (where the first band is `1`). If not provided, all bands will\n * be read. For example, if a GeoTIFF has blue (1), green (2), red (3), and near-infrared (4) bands, and you only need the\n * near-infrared band, configure `bands: [4]`.\n */\n\n/**\n * @typedef {Object} GeoKeys\n * @property {number} GTModelTypeGeoKey Model type.\n * @property {number} GTRasterTypeGeoKey Raster type.\n * @property {number} GeogAngularUnitsGeoKey Angular units.\n * @property {number} GeogInvFlatteningGeoKey Inverse flattening.\n * @property {number} GeogSemiMajorAxisGeoKey Semi-major axis.\n * @property {number} GeographicTypeGeoKey Geographic coordinate system code.\n * @property {number} ProjLinearUnitsGeoKey Projected linear unit code.\n * @property {number} ProjectedCSTypeGeoKey Projected coordinate system code.\n */\n\n/**\n * @typedef {Object} GeoTIFF\n * @property {function():Promise<number>} getImageCount Get the number of internal subfile images.\n * @property {function(number):Promise<GeoTIFFImage>} getImage Get the image at the specified index.\n */\n\n/**\n * @typedef {Object} MultiGeoTIFF\n * @property {function():Promise<number>} getImageCount Get the number of internal subfile images.\n * @property {function(number):Promise<GeoTIFFImage>} getImage Get the image at the specified index.\n */\n\n/**\n * @typedef {Object} GDALMetadata\n * @property {string} STATISTICS_MINIMUM The minimum value (as a string).\n * @property {string} STATISTICS_MAXIMUM The maximum value (as a string).\n */\n\nconst STATISTICS_MAXIMUM = \"STATISTICS_MAXIMUM\";\nconst STATISTICS_MINIMUM = \"STATISTICS_MINIMUM\";\n\n/**\n * @typedef {Object} GeoTIFFImage\n * @property {Object} fileDirectory The file directory.\n * @property {GeoKeys} geoKeys The parsed geo-keys.\n * @property {boolean} littleEndian Uses little endian byte order.\n * @property {Object} tiles The tile cache.\n * @property {boolean} isTiled The image is tiled.\n * @property {function():Array<number>} getBoundingBox Get the image bounding box.\n * @property {function():Array<number>} getOrigin Get the image origin.\n * @property {function(GeoTIFFImage):Array<number>} getResolution Get the image resolution.\n * @property {function():number} getWidth Get the pixel width of the image.\n * @property {function():number} getHeight Get the pixel height of the image.\n * @property {function():number} getTileWidth Get the pixel width of image tiles.\n * @property {function():number} getTileHeight Get the pixel height of image tiles.\n * @property {function():number|null} getGDALNoData Get the nodata value (or null if none).\n * @property {function():GDALMetadata|null} getGDALMetadata Get the raster stats (or null if none).\n * @property {function():number} getSamplesPerPixel Get the number of samples per pixel.\n */\n\nlet workerPool;\n\nfunction getWorkerPool() {\n  if (!workerPool) {\n    workerPool = new Pool(undefined, createDecoderWorker());\n  }\n  return workerPool;\n}\n\n/**\n * Get the bounding box of an image.  If the image does not have an affine transform,\n * the pixel bounds are returned.\n * @param {GeoTIFFImage} image The image.\n * @return {Array<number>} The image bounding box.\n */\nfunction getBoundingBox(image) {\n  try {\n    return image.getBoundingBox();\n  } catch (_) {\n    const fileDirectory = image.fileDirectory;\n    return [0, 0, fileDirectory.ImageWidth, fileDirectory.ImageLength];\n  }\n}\n\n/**\n * Get the origin of an image.  If the image does not have an affine transform,\n * the top-left corner of the pixel bounds is returned.\n * @param {GeoTIFFImage} image The image.\n * @return {Array<number>} The image origin.\n */\nfunction getOrigin(image) {\n  try {\n    return image.getOrigin().slice(0, 2);\n  } catch (_) {\n    return [0, image.fileDirectory.ImageLength];\n  }\n}\n\n/**\n * Get the resolution of an image.  If the image does not have an affine transform,\n * the width of the image is compared with the reference image.\n * @param {GeoTIFFImage} image The image.\n * @param {GeoTIFFImage} referenceImage The reference image.\n * @return {number} The image resolution.\n */\nfunction getResolution(image, referenceImage) {\n  try {\n    return image.getResolution(referenceImage)[0];\n  } catch (_) {\n    return (\n      referenceImage.fileDirectory.ImageWidth / image.fileDirectory.ImageWidth\n    );\n  }\n}\n\n/**\n * @param {GeoTIFFImage} image A GeoTIFF.\n * @return {import(\"../proj/Projection.js\").default} The image projection.\n */\nfunction getProjection(image) {\n  const geoKeys = image.geoKeys;\n  if (!geoKeys) {\n    return null;\n  }\n\n  if (geoKeys.ProjectedCSTypeGeoKey) {\n    const code = \"EPSG:\" + geoKeys.ProjectedCSTypeGeoKey;\n    let projection = getCachedProjection(code);\n    if (!projection) {\n      const units = unitsFromCode(geoKeys.ProjLinearUnitsGeoKey);\n      if (units) {\n        projection = new Projection({\n          code: code,\n          units: units,\n        });\n      }\n    }\n    return projection;\n  }\n\n  if (geoKeys.GeographicTypeGeoKey) {\n    const code = \"EPSG:\" + geoKeys.GeographicTypeGeoKey;\n    let projection = getCachedProjection(code);\n    if (!projection) {\n      const units = unitsFromCode(geoKeys.GeogAngularUnitsGeoKey);\n      if (units) {\n        projection = new Projection({\n          code: code,\n          units: units,\n        });\n      }\n    }\n    return projection;\n  }\n\n  return null;\n}\n\n/**\n * @param {GeoTIFF|MultiGeoTIFF} tiff A GeoTIFF.\n * @return {Promise<Array<GeoTIFFImage>>} Resolves to a list of images.\n */\nfunction getImagesForTIFF(tiff) {\n  return tiff.getImageCount().then(function (count) {\n    const requests = new Array(count);\n    for (let i = 0; i < count; ++i) {\n      requests[i] = tiff.getImage(i);\n    }\n    return Promise.all(requests);\n  });\n}\n\n/**\n * @param {SourceInfo} source The GeoTIFF source.\n * @return {Promise<Array<GeoTIFFImage>>} Resolves to a list of images.\n */\nfunction getImagesForSource(source) {\n  let request;\n  if (source.blob) {\n    request = tiffFromBlob(source.blob);\n  } else {\n    request = tiffFromUrl(source.url);\n  }\n  return request.then(getImagesForTIFF);\n}\n\n/**\n * @param {number|Array<number>|Array<Array<number>>} expected Expected value.\n * @param {number|Array<number>|Array<Array<number>>} got Actual value.\n * @param {number} tolerance Accepted tolerance in fraction of expected between expected and got.\n * @param {string} message The error message.\n * @param {function(Error):void} rejector A function to be called with any error.\n */\nfunction assertEqual(expected, got, tolerance, message, rejector) {\n  if (Array.isArray(expected)) {\n    const length = expected.length;\n    if (!Array.isArray(got) || length != got.length) {\n      const error = new Error(message);\n      rejector(error);\n      throw error;\n    }\n    for (let i = 0; i < length; ++i) {\n      assertEqual(expected[i], got[i], tolerance, message, rejector);\n    }\n    return;\n  }\n\n  got = /** @type {number} */ (got);\n  if (Math.abs(expected - got) > tolerance * expected) {\n    throw new Error(message);\n  }\n}\n\n/**\n * @param {Array} array The data array.\n * @return {number} The minimum value.\n */\nfunction getMinForDataType(array) {\n  if (array instanceof Int8Array) {\n    return -128;\n  }\n  if (array instanceof Int16Array) {\n    return -32768;\n  }\n  if (array instanceof Int32Array) {\n    return -2147483648;\n  }\n  if (array instanceof Float32Array) {\n    return 1.2e-38;\n  }\n  return 0;\n}\n\n/**\n * @param {Array} array The data array.\n * @return {number} The maximum value.\n */\nfunction getMaxForDataType(array) {\n  if (array instanceof Int8Array) {\n    return 127;\n  }\n  if (array instanceof Uint8Array) {\n    return 255;\n  }\n  if (array instanceof Uint8ClampedArray) {\n    return 255;\n  }\n  if (array instanceof Int16Array) {\n    return 32767;\n  }\n  if (array instanceof Uint16Array) {\n    return 65535;\n  }\n  if (array instanceof Int32Array) {\n    return 2147483647;\n  }\n  if (array instanceof Uint32Array) {\n    return 4294967295;\n  }\n  if (array instanceof Float32Array) {\n    return 3.4e38;\n  }\n  return 255;\n}\n\n/**\n * @typedef {Object} Options\n * @property {Array<SourceInfo>} sources List of information about GeoTIFF sources.\n * Multiple sources can be combined when their resolution sets are equal after applying a scale.\n * The list of sources defines a mapping between input bands as they are read from each GeoTIFF and\n * the output bands that are provided by data tiles. To control which bands to read from each GeoTIFF,\n * use the {@link import(\"./GeoTIFF.js\").SourceInfo bands} property. If, for example, you specify two\n * sources, one with 3 bands and {@link import(\"./GeoTIFF.js\").SourceInfo nodata} configured, and\n * another with 1 band, the resulting data tiles will have 5 bands: 3 from the first source, 1 alpha\n * band from the first source, and 1 band from the second source.\n * @property {boolean} [convertToRGB = false] By default, bands from the sources are read as-is. When\n * reading GeoTIFFs with the purpose of displaying them as RGB images, setting this to `true` will\n * convert other color spaces (YCbCr, CMYK) to RGB.\n * @property {boolean} [normalize=true] By default, the source data is normalized to values between\n * 0 and 1 with scaling factors based on the raster statistics or `min` and `max` properties of each source.\n * If instead you want to work with the raw values in a style expression, set this to `false`.  Setting this option\n * to `false` will make it so any `min` and `max` properties on sources are ignored.\n * @property {boolean} [opaque=false] Whether the layer is opaque.\n * @property {number} [transition=250] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {boolean} [wrapX=false] Render tiles beyond the tile grid extent.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * the linear interpolation is used to resample the data.  If false, nearest neighbor is used.\n */\n\n/**\n * @classdesc\n * A source for working with GeoTIFF data.\n * @api\n */\nclass GeoTIFFSource extends DataTile {\n  /**\n   * @param {Options} options Data tile options.\n   */\n  constructor(options) {\n    super({\n      state: State.LOADING,\n      tileGrid: null,\n      projection: null,\n      opaque: options.opaque,\n      transition: options.transition,\n      interpolate: options.interpolate !== false,\n      wrapX: options.wrapX,\n    });\n\n    /**\n     * @type {Array<SourceInfo>}\n     * @private\n     */\n    this.sourceInfo_ = options.sources;\n\n    const numSources = this.sourceInfo_.length;\n\n    /**\n     * @type {Array<Array<GeoTIFFImage>>}\n     * @private\n     */\n    this.sourceImagery_ = new Array(numSources);\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.resolutionFactors_ = new Array(numSources);\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.samplesPerPixel_;\n\n    /**\n     * @type {Array<Array<number>>}\n     * @private\n     */\n    this.nodataValues_;\n\n    /**\n     * @type {Array<Array<GDALMetadata>>}\n     * @private\n     */\n    this.metadata_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.normalize_ = options.normalize !== false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.addAlpha_ = false;\n\n    /**\n     * @type {Error}\n     * @private\n     */\n    this.error_ = null;\n\n    /**\n     * @type {\"readRasters\" | \"readRGB\"}\n     */\n    this.readMethod_ = options.convertToRGB ? \"readRGB\" : \"readRasters\";\n\n    this.setKey(this.sourceInfo_.map(source => source.url).join(\",\"));\n\n    const self = this;\n    const requests = new Array(numSources);\n    for (let i = 0; i < numSources; ++i) {\n      requests[i] = getImagesForSource(this.sourceInfo_[i]);\n    }\n    Promise.all(requests)\n      .then(function (sources) {\n        self.configure_(sources);\n      })\n      .catch(function (error) {\n        console.error(error); // eslint-disable-line no-console\n        self.error_ = error;\n        self.setState(State.ERROR);\n      });\n  }\n\n  /**\n   * @return {Error} A source loading error. When the source state is `error`, use this function\n   * to get more information about the error. To debug a faulty configuration, you may want to use\n   * a listener like\n   * ```js\n   * geotiffSource.on(\"change\", () => {\n   *   if (geotiffSource.getState() === \"error\") {\n   *     console.error(geotiffSource.getError());\n   *   }\n   * });\n   * ```\n   */\n  getError() {\n    return this.error_;\n  }\n\n  /**\n   * Configure the tile grid based on images within the source GeoTIFFs.  Each GeoTIFF\n   * must have the same internal tiled structure.\n   * @param {Array<Array<GeoTIFFImage>>} sources Each source is a list of images\n   * from a single GeoTIFF.\n   * @private\n   */\n  configure_(sources) {\n    let extent;\n    let origin;\n    let tileSizes;\n    let resolutions;\n    const samplesPerPixel = new Array(sources.length);\n    const nodataValues = new Array(sources.length);\n    const metadata = new Array(sources.length);\n    let minZoom = 0;\n\n    const sourceCount = sources.length;\n    for (let sourceIndex = 0; sourceIndex < sourceCount; ++sourceIndex) {\n      const images = sources[sourceIndex];\n      const imageCount = images.length;\n\n      let sourceExtent;\n      let sourceOrigin;\n      const sourceTileSizes = new Array(imageCount);\n      const sourceResolutions = new Array(imageCount);\n\n      nodataValues[sourceIndex] = new Array(imageCount);\n      metadata[sourceIndex] = new Array(imageCount);\n\n      for (let imageIndex = 0; imageIndex < imageCount; ++imageIndex) {\n        const image = images[imageIndex];\n        const nodataValue = image.getGDALNoData();\n        metadata[sourceIndex][imageIndex] = image.getGDALMetadata();\n        nodataValues[sourceIndex][imageIndex] =\n          nodataValue === null ? NaN : nodataValue;\n\n        const wantedSamples = this.sourceInfo_[sourceIndex].bands;\n        samplesPerPixel[sourceIndex] = wantedSamples ?\n          wantedSamples.length :\n          image.getSamplesPerPixel();\n        const level = imageCount - (imageIndex + 1);\n\n        if (!sourceExtent) {\n          sourceExtent = getBoundingBox(image);\n        }\n\n        if (!sourceOrigin) {\n          sourceOrigin = getOrigin(image);\n        }\n\n        sourceResolutions[level] = getResolution(image, images[0]);\n        sourceTileSizes[level] = [image.getTileWidth(), image.getTileHeight()];\n      }\n\n      if (!extent) {\n        extent = sourceExtent;\n      } else {\n        getIntersection(extent, sourceExtent, extent);\n      }\n\n      if (!origin) {\n        origin = sourceOrigin;\n      } else {\n        const message = `Origin mismatch for source ${sourceIndex}, got [${sourceOrigin}] but expected [${origin}]`;\n        assertEqual(origin, sourceOrigin, 0, message, this.viewRejector);\n      }\n\n      if (!resolutions) {\n        resolutions = sourceResolutions;\n        this.resolutionFactors_[sourceIndex] = 1;\n      } else {\n        if (resolutions.length - minZoom > sourceResolutions.length) {\n          minZoom = resolutions.length - sourceResolutions.length;\n        }\n        const resolutionFactor =\n          resolutions[resolutions.length - 1] /\n          sourceResolutions[sourceResolutions.length - 1];\n        this.resolutionFactors_[sourceIndex] = resolutionFactor;\n        const scaledSourceResolutions = sourceResolutions.map(\n          resolution => (resolution *= resolutionFactor)\n        );\n        const message = `Resolution mismatch for source ${sourceIndex}, got [${scaledSourceResolutions}] but expected [${resolutions}]`;\n        assertEqual(\n          resolutions.slice(minZoom, resolutions.length),\n          scaledSourceResolutions,\n          0.005,\n          message,\n          this.viewRejector\n        );\n      }\n\n      if (!tileSizes) {\n        tileSizes = sourceTileSizes;\n      } else {\n        assertEqual(\n          tileSizes.slice(minZoom, tileSizes.length),\n          sourceTileSizes,\n          0,\n          `Tile size mismatch for source ${sourceIndex}`,\n          this.viewRejector\n        );\n      }\n\n      this.sourceImagery_[sourceIndex] = images.reverse();\n    }\n\n    for (let i = 0, ii = this.sourceImagery_.length; i < ii; ++i) {\n      const sourceImagery = this.sourceImagery_[i];\n      while (sourceImagery.length < resolutions.length) {\n        sourceImagery.unshift(undefined);\n      }\n    }\n\n    if (!this.getProjection()) {\n      const firstSource = sources[0];\n      for (let i = firstSource.length - 1; i >= 0; --i) {\n        const image = firstSource[i];\n        const projection = getProjection(image);\n        if (projection) {\n          this.projection = projection;\n          break;\n        }\n      }\n    }\n\n    this.samplesPerPixel_ = samplesPerPixel;\n    this.nodataValues_ = nodataValues;\n    this.metadata_ = metadata;\n\n    // decide if we need to add an alpha band to handle nodata\n    outer: for (let sourceIndex = 0; sourceIndex < sourceCount; ++sourceIndex) {\n      // option 1: source is configured with a nodata value\n      if (this.sourceInfo_[sourceIndex].nodata !== undefined) {\n        this.addAlpha_ = true;\n        break;\n      }\n\n      const values = nodataValues[sourceIndex];\n\n      // option 2: check image metadata for limited bands\n      const bands = this.sourceInfo_[sourceIndex].bands;\n      if (bands) {\n        for (let i = 0; i < bands.length; ++i) {\n          if (!isNaN(values[bands[i] - 1])) {\n            this.addAlpha_ = true;\n            break outer;\n          }\n        }\n        continue;\n      }\n\n      // option 3: check image metadata for all bands\n      for (let imageIndex = 0; imageIndex < values.length; ++imageIndex) {\n        if (!isNaN(values[imageIndex])) {\n          this.addAlpha_ = true;\n          break outer;\n        }\n      }\n    }\n\n    const additionalBands = this.addAlpha_ ? 1 : 0;\n    this.bandCount =\n      samplesPerPixel.reduce((accumulator, value) => {\n        accumulator += value;\n        return accumulator;\n      }, 0) + additionalBands;\n\n    const tileGrid = new TileGrid({\n      extent: extent,\n      minZoom: minZoom,\n      origin: origin,\n      resolutions: resolutions,\n      tileSizes: tileSizes,\n    });\n\n    this.tileGrid = tileGrid;\n\n    this.setLoader(this.loadTile_.bind(this));\n    this.setState(State.READY);\n    this.viewResolver({\n      projection: this.projection,\n      resolutions: resolutions,\n      center: toUserCoordinate(getCenter(extent), this.projection),\n      extent: toUserExtent(extent, this.projection),\n      zoom: 0,\n    });\n  }\n\n  loadTile_(z, x, y) {\n    const size = toSize(this.tileGrid.getTileSize(z));\n\n    const sourceCount = this.sourceImagery_.length;\n    const requests = new Array(sourceCount);\n    const addAlpha = this.addAlpha_;\n    const bandCount = this.bandCount;\n    const samplesPerPixel = this.samplesPerPixel_;\n    const nodataValues = this.nodataValues_;\n    const sourceInfo = this.sourceInfo_;\n    for (let sourceIndex = 0; sourceIndex < sourceCount; ++sourceIndex) {\n      const source = sourceInfo[sourceIndex];\n      const resolutionFactor = this.resolutionFactors_[sourceIndex];\n      const pixelBounds = [\n        Math.round(x * (size[0] * resolutionFactor)),\n        Math.round(y * (size[1] * resolutionFactor)),\n        Math.round((x + 1) * (size[0] * resolutionFactor)),\n        Math.round((y + 1) * (size[1] * resolutionFactor)),\n      ];\n      const image = this.sourceImagery_[sourceIndex][z];\n      let samples;\n      if (source.bands) {\n        samples = source.bands.map(function (bandNumber) {\n          return bandNumber - 1;\n        });\n      }\n\n      /** @type {number|Array<number>} */\n      let fillValue;\n      if (!isNaN(source.nodata)) {\n        fillValue = source.nodata;\n      } else {\n        if (!samples) {\n          fillValue = nodataValues[sourceIndex];\n        } else {\n          fillValue = samples.map(function (sampleIndex) {\n            return nodataValues[sourceIndex][sampleIndex];\n          });\n        }\n      }\n\n      requests[sourceIndex] = image[this.readMethod_]({\n        window: pixelBounds,\n        width: size[0],\n        height: size[1],\n        samples: samples,\n        fillValue: fillValue,\n        pool: getWorkerPool(),\n        interleave: false,\n      });\n    }\n\n    const pixelCount = size[0] * size[1];\n    const dataLength = pixelCount * bandCount;\n    const normalize = this.normalize_;\n    const metadata = this.metadata_;\n\n    return Promise.all(requests).then(function (sourceSamples) {\n      /** @type {Uint8Array|Float32Array} */\n      let data;\n      if (normalize) {\n        data = new Uint8Array(dataLength);\n      } else {\n        data = new Float32Array(dataLength);\n      }\n\n      let dataIndex = 0;\n      for (let pixelIndex = 0; pixelIndex < pixelCount; ++pixelIndex) {\n        let transparent = addAlpha;\n        for (let sourceIndex = 0; sourceIndex < sourceCount; ++sourceIndex) {\n          const source = sourceInfo[sourceIndex];\n\n          let min = source.min;\n          let max = source.max;\n          let gain, bias;\n          if (normalize) {\n            const stats = metadata[sourceIndex][0];\n            if (min === undefined) {\n              if (stats && STATISTICS_MINIMUM in stats) {\n                min = parseFloat(stats[STATISTICS_MINIMUM]);\n              } else {\n                min = getMinForDataType(sourceSamples[sourceIndex][0]);\n              }\n            }\n            if (max === undefined) {\n              if (stats && STATISTICS_MAXIMUM in stats) {\n                max = parseFloat(stats[STATISTICS_MAXIMUM]);\n              } else {\n                max = getMaxForDataType(sourceSamples[sourceIndex][0]);\n              }\n            }\n\n            gain = 255 / (max - min);\n            bias = -min * gain;\n          }\n\n          for (\n            let sampleIndex = 0; sampleIndex < samplesPerPixel[sourceIndex];\n            ++sampleIndex\n          ) {\n            const sourceValue =\n              sourceSamples[sourceIndex][sampleIndex][pixelIndex];\n\n            let value;\n            if (normalize) {\n              value = clamp(gain * sourceValue + bias, 0, 255);\n            } else {\n              value = sourceValue;\n            }\n\n            if (!addAlpha) {\n              data[dataIndex] = value;\n            } else {\n              let nodata = source.nodata;\n              if (nodata === undefined) {\n                let bandIndex;\n                if (source.bands) {\n                  bandIndex = source.bands[sampleIndex] - 1;\n                } else {\n                  bandIndex = sampleIndex;\n                }\n                nodata = nodataValues[sourceIndex][bandIndex];\n              }\n\n              if (sourceValue !== nodata) {\n                transparent = false;\n                data[dataIndex] = value;\n              }\n            }\n            dataIndex++;\n          }\n        }\n        if (addAlpha) {\n          if (!transparent) {\n            data[dataIndex] = 255;\n          }\n          dataIndex++;\n        }\n      }\n\n      return data;\n    });\n  }\n}\n\n/**\n * Get a promise for view properties based on the source.  Use the result of this function\n * as the `view` option in a map constructor.\n *\n *     const source = new GeoTIFF(options);\n *\n *     const map = new Map({\n *       target: \"map\",\n *       layers: [\n *         new TileLayer({\n *           source: source,\n *         }),\n *       ],\n *       view: source.getView(),\n *     });\n *\n * @function\n * @return {Promise<import(\"../View.js\").ViewOptions>} A promise for view-related properties.\n * @api\n *\n */\nGeoTIFFSource.prototype.getView;\n\nexport default GeoTIFFSource;","export function create() {\n  var source = \"function _typeof(e){return(_typeof=\\\"function\\\"==typeof Symbol&&\\\"symbol\\\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\\\"function\\\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\\\"symbol\\\":typeof e})(e)}function asyncGeneratorStep(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){asyncGeneratorStep(i,n,a,o,s,\\\"next\\\",e)}function s(e){asyncGeneratorStep(i,n,a,o,s,\\\"throw\\\",e)}o(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\\\"value\\\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,\\\"prototype\\\",{writable:!1}),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _inherits(e,t){if(\\\"function\\\"!=typeof t&&null!==t)throw new TypeError(\\\"Super expression must either be null or a function\\\");Object.defineProperty(e,\\\"prototype\\\",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct(){if(\\\"undefined\\\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\\\"function\\\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\");return e}function _possibleConstructorReturn(e,t){if(t&&(\\\"object\\\"==typeof t||\\\"function\\\"==typeof t))return t;if(void 0!==t)throw new TypeError(\\\"Derived constructors may only return object or undefined\\\");return _assertThisInitialized(e)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if(\\\"undefined\\\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\\\"@@iterator\\\"])return Array.from(e)}function _unsupportedIterableToArray(e,t){if(e){if(\\\"string\\\"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\\\"Object\\\"===r&&e.constructor&&(r=e.constructor.name),\\\"Map\\\"===r||\\\"Set\\\"===r?Array.from(e):\\\"Arguments\\\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _nonIterableSpread(){throw new TypeError(\\\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}var commonjsGlobal=\\\"undefined\\\"!=typeof globalThis?globalThis:\\\"undefined\\\"!=typeof window?window:\\\"undefined\\\"!=typeof global?global:\\\"undefined\\\"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\\\"default\\\")?e.default:e}var runtime={exports:{}};!function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,a=\\\"function\\\"==typeof Symbol?Symbol:{},i=a.iterator||\\\"@@iterator\\\",o=a.asyncIterator||\\\"@@asyncIterator\\\",s=a.toStringTag||\\\"@@toStringTag\\\";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},\\\"\\\")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),o=new A(n||[]);return i._invoke=function(e,t,r){var n=u;return function(a,i){if(n===h)throw new Error(\\\"Generator is already running\\\");if(n===p){if(\\\"throw\\\"===a)throw i;return I()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=x(o,r);if(s){if(s===m)continue;return s}}if(\\\"next\\\"===r.method)r.sent=r._sent=r.arg;else if(\\\"throw\\\"===r.method){if(n===u)throw n=p,r.arg;r.dispatchException(r.arg)}else\\\"return\\\"===r.method&&r.abrupt(\\\"return\\\",r.arg);n=h;var l=c(e,t,r);if(\\\"normal\\\"===l.type){if(n=r.done?p:d,l.arg===m)continue;return{value:l.arg,done:r.done}}\\\"throw\\\"===l.type&&(n=p,r.method=\\\"throw\\\",r.arg=l.arg)}}}(e,r,o),i}function c(e,t,r){try{return{type:\\\"normal\\\",arg:e.call(t,r)}}catch(e){return{type:\\\"throw\\\",arg:e}}}e.wrap=f;var u=\\\"suspendedStart\\\",d=\\\"suspendedYield\\\",h=\\\"executing\\\",p=\\\"completed\\\",m={};function g(){}function y(){}function _(){}var b={};l(b,i,(function(){return this}));var v=Object.getPrototypeOf,w=v&&v(v(M([])));w&&w!==r&&n.call(w,i)&&(b=w);var k=_.prototype=g.prototype=Object.create(b);function T(e){[\\\"next\\\",\\\"throw\\\",\\\"return\\\"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(a,i,o,s){var l=c(e[a],e,i);if(\\\"throw\\\"!==l.type){var f=l.arg,u=f.value;return u&&\\\"object\\\"===_typeof(u)&&n.call(u,\\\"__await\\\")?t.resolve(u.__await).then((function(e){r(\\\"next\\\",e,o,s)}),(function(e){r(\\\"throw\\\",e,o,s)})):t.resolve(u).then((function(e){f.value=e,o(f)}),(function(e){return r(\\\"throw\\\",e,o,s)}))}s(l.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}}function x(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,\\\"throw\\\"===r.method){if(e.iterator.return&&(r.method=\\\"return\\\",r.arg=t,x(e,r),\\\"throw\\\"===r.method))return m;r.method=\\\"throw\\\",r.arg=new TypeError(\\\"The iterator does not provide a 'throw' method\\\")}return m}var a=c(n,e.iterator,r.arg);if(\\\"throw\\\"===a.type)return r.method=\\\"throw\\\",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,\\\"return\\\"!==r.method&&(r.method=\\\"next\\\",r.arg=t),r.delegate=null,m):i:(r.method=\\\"throw\\\",r.arg=new TypeError(\\\"iterator result is not an object\\\"),r.delegate=null,m)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type=\\\"normal\\\",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:\\\"root\\\"}],e.forEach(S,this),this.reset(!0)}function M(e){if(e){var r=e[i];if(r)return r.call(e);if(\\\"function\\\"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:I}}function I(){return{value:t,done:!0}}return y.prototype=_,l(k,\\\"constructor\\\",_),l(_,\\\"constructor\\\",y),y.displayName=l(_,s,\\\"GeneratorFunction\\\"),e.isGeneratorFunction=function(e){var t=\\\"function\\\"==typeof e&&e.constructor;return!!t&&(t===y||\\\"GeneratorFunction\\\"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,s,\\\"GeneratorFunction\\\")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},T(E.prototype),l(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new E(f(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(k),l(k,s,\\\"Generator\\\"),l(k,i,(function(){return this})),l(k,\\\"toString\\\",(function(){return\\\"[object Generator]\\\"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method=\\\"next\\\",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)\\\"t\\\"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(\\\"throw\\\"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type=\\\"throw\\\",s.arg=e,r.next=n,a&&(r.method=\\\"next\\\",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if(\\\"root\\\"===o.tryLoc)return a(\\\"end\\\");if(o.tryLoc<=this.prev){var l=n.call(o,\\\"catchLoc\\\"),f=n.call(o,\\\"finallyLoc\\\");if(l&&f){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!f)throw new Error(\\\"try statement without catch or finally\\\");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,\\\"finallyLoc\\\")&&this.prev<a.finallyLoc){var i=a;break}}i&&(\\\"break\\\"===e||\\\"continue\\\"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method=\\\"next\\\",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if(\\\"throw\\\"===e.type)throw e.arg;return\\\"break\\\"===e.type||\\\"continue\\\"===e.type?this.next=e.arg:\\\"return\\\"===e.type?(this.rval=this.arg=e.arg,this.method=\\\"return\\\",this.next=\\\"end\\\"):\\\"normal\\\"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(\\\"throw\\\"===n.type){var a=n.arg;D(r)}return a}}throw new Error(\\\"illegal catch attempt\\\")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},\\\"next\\\"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){\\\"object\\\"===(\\\"undefined\\\"==typeof globalThis?\\\"undefined\\\":_typeof(globalThis))?globalThis.regeneratorRuntime=t:Function(\\\"r\\\",\\\"regeneratorRuntime = r\\\")(t)}}(runtime);var worker={},isObservable=function(e){return!!e&&(\\\"symbol\\\"===_typeof(Symbol.observable)&&\\\"function\\\"==typeof e[Symbol.observable]?e===e[Symbol.observable]():\\\"function\\\"==typeof e[\\\"@@observable\\\"]&&e===e[\\\"@@observable\\\"]())},common$1={},serializers={};function extendSerializer(e,t){var r=e.deserialize.bind(e),n=e.serialize.bind(e);return{deserialize:function(e){return t.deserialize(e,r)},serialize:function(e){return t.serialize(e,n)}}}Object.defineProperty(serializers,\\\"__esModule\\\",{value:!0}),serializers.DefaultSerializer=serializers.extendSerializer=void 0,serializers.extendSerializer=extendSerializer;var DefaultErrorSerializer={deserialize:function(e){return Object.assign(Error(e.message),{name:e.name,stack:e.stack})},serialize:function(e){return{__error_marker:\\\"$$error\\\",message:e.message,name:e.name,stack:e.stack}}},isSerializedError=function(e){return e&&\\\"object\\\"===_typeof(e)&&\\\"__error_marker\\\"in e&&\\\"$$error\\\"===e.__error_marker};serializers.DefaultSerializer={deserialize:function(e){return isSerializedError(e)?DefaultErrorSerializer.deserialize(e):e},serialize:function(e){return e instanceof Error?DefaultErrorSerializer.serialize(e):e}},Object.defineProperty(common$1,\\\"__esModule\\\",{value:!0}),common$1.serialize=common$1.deserialize=common$1.registerSerializer=void 0;var serializers_1=serializers,registeredSerializer=serializers_1.DefaultSerializer;function registerSerializer(e){registeredSerializer=serializers_1.extendSerializer(registeredSerializer,e)}function deserialize(e){return registeredSerializer.deserialize(e)}function serialize(e){return registeredSerializer.serialize(e)}common$1.registerSerializer=registerSerializer,common$1.deserialize=deserialize,common$1.serialize=serialize;var transferable={},symbols={};Object.defineProperty(symbols,\\\"__esModule\\\",{value:!0}),symbols.$worker=symbols.$transferable=symbols.$terminate=symbols.$events=symbols.$errors=void 0,symbols.$errors=Symbol(\\\"thread.errors\\\"),symbols.$events=Symbol(\\\"thread.events\\\"),symbols.$terminate=Symbol(\\\"thread.terminate\\\"),symbols.$transferable=Symbol(\\\"thread.transferable\\\"),symbols.$worker=Symbol(\\\"thread.worker\\\"),Object.defineProperty(transferable,\\\"__esModule\\\",{value:!0}),transferable.Transfer=transferable.isTransferDescriptor=void 0;var symbols_1=symbols;function isTransferable(e){return!(!e||\\\"object\\\"!==_typeof(e))}function isTransferDescriptor(e){return e&&\\\"object\\\"===_typeof(e)&&e[symbols_1.$transferable]}function Transfer$1(e,t){var r;if(!t){if(!isTransferable(e))throw Error();t=[e]}return _defineProperty(r={},symbols_1.$transferable,!0),_defineProperty(r,\\\"send\\\",e),_defineProperty(r,\\\"transferables\\\",t),r}transferable.isTransferDescriptor=isTransferDescriptor,transferable.Transfer=Transfer$1;var messages$1={},exports,MasterMessageType,WorkerMessageType;exports=messages$1,Object.defineProperty(exports,\\\"__esModule\\\",{value:!0}),exports.WorkerMessageType=exports.MasterMessageType=void 0,(MasterMessageType=exports.MasterMessageType||(exports.MasterMessageType={})).cancel=\\\"cancel\\\",MasterMessageType.run=\\\"run\\\",(WorkerMessageType=exports.WorkerMessageType||(exports.WorkerMessageType={})).error=\\\"error\\\",WorkerMessageType.init=\\\"init\\\",WorkerMessageType.result=\\\"result\\\",WorkerMessageType.running=\\\"running\\\",WorkerMessageType.uncaughtError=\\\"uncaughtError\\\";var implementation$1={},implementation_browser={};Object.defineProperty(implementation_browser,\\\"__esModule\\\",{value:!0});var isWorkerRuntime$2=function(){var e=\\\"undefined\\\"!=typeof self&&\\\"undefined\\\"!=typeof Window&&self instanceof Window;return!(\\\"undefined\\\"==typeof self||!self.postMessage||e)},postMessageToMaster$2=function(e,t){self.postMessage(e,t)},subscribeToMasterMessages$2=function(e){var t=function(t){e(t.data)};return self.addEventListener(\\\"message\\\",t),function(){self.removeEventListener(\\\"message\\\",t)}};implementation_browser.default={isWorkerRuntime:isWorkerRuntime$2,postMessageToMaster:postMessageToMaster$2,subscribeToMasterMessages:subscribeToMasterMessages$2};var implementation_tinyWorker={};Object.defineProperty(implementation_tinyWorker,\\\"__esModule\\\",{value:!0}),\\\"undefined\\\"==typeof self&&(commonjsGlobal.self=commonjsGlobal);var isWorkerRuntime$1=function(){return!(\\\"undefined\\\"==typeof self||!self.postMessage)},postMessageToMaster$1=function(e){self.postMessage(e)},muxingHandlerSetUp=!1,messageHandlers=new Set,subscribeToMasterMessages$1=function(e){muxingHandlerSetUp||(self.addEventListener(\\\"message\\\",(function(e){messageHandlers.forEach((function(t){return t(e.data)}))})),muxingHandlerSetUp=!0),messageHandlers.add(e);return function(){return messageHandlers.delete(e)}};implementation_tinyWorker.default={isWorkerRuntime:isWorkerRuntime$1,postMessageToMaster:postMessageToMaster$1,subscribeToMasterMessages:subscribeToMasterMessages$1};var implementation_worker_threads={},worker_threads={},implementation;function selectImplementation(){return\\\"function\\\"==typeof __non_webpack_require__?__non_webpack_require__(\\\"worker_threads\\\"):eval(\\\"require\\\")(\\\"worker_threads\\\")}function getImplementation(){return implementation||(implementation=selectImplementation()),implementation}Object.defineProperty(worker_threads,\\\"__esModule\\\",{value:!0}),worker_threads.default=getImplementation;var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(implementation_worker_threads,\\\"__esModule\\\",{value:!0});var worker_threads_1=__importDefault$1(worker_threads);function assertMessagePort(e){if(!e)throw Error(\\\"Invariant violation: MessagePort to parent is not available.\\\");return e}var isWorkerRuntime=function(){return!worker_threads_1.default().isMainThread},postMessageToMaster=function(e,t){assertMessagePort(worker_threads_1.default().parentPort).postMessage(e,t)},subscribeToMasterMessages=function(e){var t=worker_threads_1.default().parentPort;if(!t)throw Error(\\\"Invariant violation: MessagePort to parent is not available.\\\");var r=function(t){e(t)};return assertMessagePort(t).on(\\\"message\\\",r),function(){assertMessagePort(t).off(\\\"message\\\",r)}};function testImplementation(){worker_threads_1.default()}implementation_worker_threads.default={isWorkerRuntime:isWorkerRuntime,postMessageToMaster:postMessageToMaster,subscribeToMasterMessages:subscribeToMasterMessages,testImplementation:testImplementation};var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(implementation$1,\\\"__esModule\\\",{value:!0});var implementation_browser_1=__importDefault(implementation_browser),implementation_tiny_worker_1=__importDefault(implementation_tinyWorker),implementation_worker_threads_1=__importDefault(implementation_worker_threads),runningInNode=\\\"undefined\\\"!=typeof process&&\\\"browser\\\"!==process.arch&&\\\"pid\\\"in process;function selectNodeImplementation(){try{return implementation_worker_threads_1.default.testImplementation(),implementation_worker_threads_1.default}catch(e){return implementation_tiny_worker_1.default}}implementation$1.default=runningInNode?selectNodeImplementation():implementation_browser_1.default,function(e){var t=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,\\\"__esModule\\\",{value:!0}),e.expose=e.isWorkerRuntime=e.Transfer=e.registerSerializer=void 0;var n=r(isObservable),a=common$1,i=transferable,o=messages$1,s=r(implementation$1),l=common$1;Object.defineProperty(e,\\\"registerSerializer\\\",{enumerable:!0,get:function(){return l.registerSerializer}});var f=transferable;Object.defineProperty(e,\\\"Transfer\\\",{enumerable:!0,get:function(){return f.Transfer}}),e.isWorkerRuntime=s.default.isWorkerRuntime;var c=!1,u=new Map,d=function(e){return e&&e.type===o.MasterMessageType.run},h=function(e){return n.default(e)||function(e){return e&&\\\"object\\\"===_typeof(e)&&\\\"function\\\"==typeof e.subscribe}(e)};function p(e){return i.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function m(e,t){var r=p(t),n=r.payload,i=r.transferables,l={type:o.WorkerMessageType.error,uid:e,error:a.serialize(n)};s.default.postMessageToMaster(l,i)}function g(e,t,r){var n=p(r),a=n.payload,i=n.transferables,l={type:o.WorkerMessageType.result,uid:e,complete:!!t||void 0,payload:a};s.default.postMessageToMaster(l,i)}function y(e,t){var r={type:o.WorkerMessageType.running,uid:e,resultType:t};s.default.postMessageToMaster(r)}function _(e){try{var t={type:o.WorkerMessageType.uncaughtError,error:a.serialize(e)};s.default.postMessageToMaster(t)}catch(t){console.error(\\\"Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\\\\nLatest error:\\\",t,\\\"\\\\nOriginal error:\\\",e)}}function b(e,r,n){return t(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,i=r.apply(void 0,_toConsumableArray(n)),t.next=7;break;case 4:return t.prev=4,t.t0=t.catch(0),t.abrupt(\\\"return\\\",m(e,t.t0));case 7:if(o=h(i)?\\\"observable\\\":\\\"promise\\\",y(e,o),!h(i)){t.next=14;break}s=i.subscribe((function(t){return g(e,!1,a.serialize(t))}),(function(t){m(e,a.serialize(t)),u.delete(e)}),(function(){g(e,!0),u.delete(e)})),u.set(e,s),t.next=24;break;case 14:return t.prev=14,t.next=17,i;case 17:l=t.sent,g(e,!0,a.serialize(l)),t.next=24;break;case 21:t.prev=21,t.t1=t.catch(14),m(e,a.serialize(t.t1));case 24:case\\\"end\\\":return t.stop()}}),t,null,[[0,4],[14,21]])})))}e.expose=function(e){if(!s.default.isWorkerRuntime())throw Error(\\\"expose() called in the master thread.\\\");if(c)throw Error(\\\"expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.\\\");if(c=!0,\\\"function\\\"==typeof e)s.default.subscribeToMasterMessages((function(t){d(t)&&!t.method&&b(t.uid,e,t.args.map(a.deserialize))})),t={type:o.WorkerMessageType.init,exposed:{type:\\\"function\\\"}},s.default.postMessageToMaster(t);else{if(\\\"object\\\"!==_typeof(e)||!e)throw Error(\\\"Invalid argument passed to expose(). Expected a function or an object, got: \\\".concat(e));s.default.subscribeToMasterMessages((function(t){d(t)&&t.method&&b(t.uid,e[t.method],t.args.map(a.deserialize))})),function(e){var t={type:o.WorkerMessageType.init,exposed:{type:\\\"module\\\",methods:e}};s.default.postMessageToMaster(t)}(Object.keys(e).filter((function(t){return\\\"function\\\"==typeof e[t]})))}var t;s.default.subscribeToMasterMessages((function(e){if((n=e)&&n.type===o.MasterMessageType.cancel){var t=e.uid,r=u.get(t);r&&(r.unsubscribe(),u.delete(t))}var n}))},\\\"undefined\\\"!=typeof self&&\\\"function\\\"==typeof self.addEventListener&&s.default.isWorkerRuntime()&&(self.addEventListener(\\\"error\\\",(function(e){setTimeout((function(){return _(e.error||e)}),250)})),self.addEventListener(\\\"unhandledrejection\\\",(function(e){var t=e.reason;t&&\\\"string\\\"==typeof t.message&&setTimeout((function(){return _(t)}),250)}))),\\\"undefined\\\"!=typeof process&&\\\"function\\\"==typeof process.on&&s.default.isWorkerRuntime()&&(process.on(\\\"uncaughtException\\\",(function(e){setTimeout((function(){return _(e)}),250)})),process.on(\\\"unhandledRejection\\\",(function(e){e&&\\\"string\\\"==typeof e.message&&setTimeout((function(){return _(e)}),250)})))}(worker);var WorkerContext=getDefaultExportFromCjs(worker),expose=WorkerContext.expose;WorkerContext.registerSerializer;var Transfer=WorkerContext.Transfer,registry=new Map;function addDecoder(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){return registry.set(e,t)}))}function getDecoder(e){return _getDecoder.apply(this,arguments)}function _getDecoder(){return(_getDecoder=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=registry.get(t.Compression)){e.next=3;break}throw new Error(\\\"Unknown compression method identifier: \\\".concat(t.Compression));case 3:return e.next=5,r();case 5:return n=e.sent,e.abrupt(\\\"return\\\",new n(t));case 7:case\\\"end\\\":return e.stop()}}),e)})))).apply(this,arguments)}function decode(e,t){return _decode.apply(this,arguments)}function _decode(){return(_decode=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,getDecoder(t);case 2:return n=e.sent,e.next=5,n.decode(t,r);case 5:return a=e.sent,e.abrupt(\\\"return\\\",Transfer(a));case 7:case\\\"end\\\":return e.stop()}}),e)})))).apply(this,arguments)}function decodeRowAcc(e,t){var r=e.length-t,n=0;do{for(var a=t;a>0;a--)e[n+t]+=e[n],n++;r-=t}while(r>0)}function decodeRowFloatingPoint(e,t,r){for(var n=0,a=e.length,i=a/r;a>t;){for(var o=t;o>0;--o)e[n+t]+=e[n],++n;a-=t}for(var s=e.slice(),l=0;l<i;++l)for(var f=0;f<r;++f)e[r*l+f]=s[(r-f-1)*i+l]}function applyPredictor(e,t,r,n,a,i){if(!t||1===t)return e;for(var o=0;o<a.length;++o){if(a[o]%8!=0)throw new Error(\\\"When decoding with predictor, only multiple of 8 bits are supported.\\\");if(a[o]!==a[0])throw new Error(\\\"When decoding with predictor, all samples must have the same size.\\\")}for(var s=a[0]/8,l=2===i?1:a.length,f=0;f<n&&!(f*l*r*s>=e.byteLength);++f){var c=void 0;if(2===t){switch(a[0]){case 8:c=new Uint8Array(e,f*l*r*s,l*r*s);break;case 16:c=new Uint16Array(e,f*l*r*s,l*r*s/2);break;case 32:c=new Uint32Array(e,f*l*r*s,l*r*s/4);break;default:throw new Error(\\\"Predictor 2 not allowed with \\\".concat(a[0],\\\" bits per sample.\\\"))}decodeRowAcc(c,l)}else 3===t&&decodeRowFloatingPoint(c=new Uint8Array(e,f*l*r*s,l*r*s),l,s)}return e}addDecoder([void 0,1],(function(){return Promise.resolve().then((function(){return raw})).then((function(e){return e.default}))})),addDecoder(5,(function(){return Promise.resolve().then((function(){return lzw})).then((function(e){return e.default}))})),addDecoder(6,(function(){throw new Error(\\\"old style JPEG compression is not supported.\\\")})),addDecoder(7,(function(){return Promise.resolve().then((function(){return jpeg})).then((function(e){return e.default}))})),addDecoder([8,32946],(function(){return Promise.resolve().then((function(){return deflate})).then((function(e){return e.default}))})),addDecoder(32773,(function(){return Promise.resolve().then((function(){return packbits})).then((function(e){return e.default}))})),addDecoder(34887,(function(){return Promise.resolve().then((function(){return lerc})).then((function(e){return e.default}))})),expose(decode);var BaseDecoder=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:\\\"decode\\\",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decodeBlock(r);case 2:if(n=e.sent,1===(a=t.Predictor||1)){e.next=9;break}return i=!t.StripOffsets,o=i?t.TileWidth:t.ImageWidth,s=i?t.TileLength:t.RowsPerStrip||t.ImageLength,e.abrupt(\\\"return\\\",applyPredictor(n,a,o,s,t.BitsPerSample,t.PlanarConfiguration));case 9:return e.abrupt(\\\"return\\\",n);case 10:case\\\"end\\\":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),RawDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:\\\"decodeBlock\\\",value:function(e){return e}}]),r}(),raw=Object.freeze({__proto__:null,default:RawDecoder}),MIN_BITS=9,CLEAR_CODE=256,EOI_CODE=257,MAX_BYTELENGTH=12;function getByte(e,t,r){var n=t%8,a=Math.floor(t/8),i=8-n,o=t+r-8*(a+1),s=8*(a+2)-(t+r),l=8*(a+2)-t;if(s=Math.max(0,s),a>=e.length)return console.warn(\\\"ran off the end of the buffer before finding EOI_CODE (end on input code)\\\"),EOI_CODE;var f=e[a]&Math.pow(2,8-n)-1,c=f<<=r-i;if(a+1<e.length){var u=e[a+1]>>>s;c+=u<<=Math.max(0,r-l)}if(o>8&&a+2<e.length){var d=8*(a+3)-(t+r);c+=e[a+2]>>>d}return c}function appendReversed(e,t){for(var r=t.length-1;r>=0;r--)e.push(t[r]);return e}function decompress(e){for(var t=new Uint16Array(4093),r=new Uint8Array(4093),n=0;n<=257;n++)t[n]=4096,r[n]=n;var a=258,i=MIN_BITS,o=0;function s(){a=258,i=MIN_BITS}function l(e){var t=getByte(e,o,i);return o+=i,t}function f(e,n){return r[a]=n,t[a]=e,++a-1}function c(e){for(var n=[],a=e;4096!==a;a=t[a])n.push(r[a]);return n}var u=[];s();for(var d,h=new Uint8Array(e),p=l(h);p!==EOI_CODE;){if(p===CLEAR_CODE){for(s(),p=l(h);p===CLEAR_CODE;)p=l(h);if(p===EOI_CODE)break;if(p>CLEAR_CODE)throw new Error(\\\"corrupted code at scanline \\\".concat(p));appendReversed(u,c(p)),d=p}else if(p<a){var m=c(p);appendReversed(u,m),f(d,m[m.length-1]),d=p}else{var g=c(d);if(!g)throw new Error(\\\"Bogus entry. Not in dictionary, \\\".concat(d,\\\" / \\\").concat(a,\\\", position: \\\").concat(o));appendReversed(u,g),u.push(g[g.length-1]),f(d,g[g.length-1]),d=p}a+1>=Math.pow(2,i)&&(i===MAX_BYTELENGTH?d=void 0:i++),p=l(h)}return new Uint8Array(u)}var LZWDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:\\\"decodeBlock\\\",value:function(e){return decompress(e).buffer}}]),r}(),lzw=Object.freeze({__proto__:null,default:LZWDecoder}),dctZigZag=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),dctCos1=4017,dctSin1=799,dctCos3=3406,dctSin3=2276,dctCos6=1567,dctSin6=3784,dctSqrt2=5793,dctSqrt1d2=2896;function buildHuffmanTable(e,t){for(var r=0,n=[],a=16;a>0&&!e[a-1];)--a;n.push({children:[],index:0});for(var i,o=n[0],s=0;s<a;s++){for(var l=0;l<e[s];l++){for((o=n.pop()).children[o.index]=t[r];o.index>0;)o=n.pop();for(o.index++,n.push(o);n.length<=s;)n.push(i={children:[],index:0}),o.children[o.index]=i.children,o=i;r++}s+1<a&&(n.push(i={children:[],index:0}),o.children[o.index]=i.children,o=i)}return n[0].children}function decodeScan(e,t,r,n,a,i,o,s,l){var f=r.mcusPerLine,c=r.progressive,u=t,d=t,h=0,p=0;function m(){if(p>0)return p--,h>>p&1;if(255===(h=e[d++])){var t=e[d++];if(t)throw new Error(\\\"unexpected marker: \\\".concat((h<<8|t).toString(16)))}return p=7,h>>>7}function g(e){for(var t,r=e;null!==(t=m());){if(\\\"number\\\"==typeof(r=r[t]))return r;if(\\\"object\\\"!==_typeof(r))throw new Error(\\\"invalid huffman sequence\\\")}return null}function y(e){for(var t=e,r=0;t>0;){var n=m();if(null===n)return;r=r<<1|n,--t}return r}function _(e){var t=y(e);return t>=1<<e-1?t:t+(-1<<e)+1}var b=0;var v,w=0;function k(e,t,r,n,a){var i=r%f,o=(r/f|0)*e.v+n,s=i*e.h+a;t(e,e.blocks[o][s])}function T(e,t,r){var n=r/e.blocksPerLine|0,a=r%e.blocksPerLine;t(e,e.blocks[n][a])}var E,x,S,D,A,M,I=n.length;M=c?0===i?0===s?function(e,t){var r=g(e.huffmanTableDC),n=0===r?0:_(r)<<l;e.pred+=n,t[0]=e.pred}:function(e,t){t[0]|=m()<<l}:0===s?function(e,t){if(b>0)b--;else for(var r=i,n=o;r<=n;){var a=g(e.huffmanTableAC),s=15&a,f=a>>4;if(0===s){if(f<15){b=y(f)+(1<<f)-1;break}r+=16}else t[dctZigZag[r+=f]]=_(s)*(1<<l),r++}}:function(e,t){for(var r=i,n=o,a=0;r<=n;){var s=dctZigZag[r],f=t[s]<0?-1:1;switch(w){case 0:var c=g(e.huffmanTableAC),u=15&c;if(a=c>>4,0===u)a<15?(b=y(a)+(1<<a),w=4):(a=16,w=1);else{if(1!==u)throw new Error(\\\"invalid ACn encoding\\\");v=_(u),w=a?2:3}continue;case 1:case 2:t[s]?t[s]+=(m()<<l)*f:0==--a&&(w=2===w?3:0);break;case 3:t[s]?t[s]+=(m()<<l)*f:(t[s]=v<<l,w=0);break;case 4:t[s]&&(t[s]+=(m()<<l)*f)}r++}4===w&&0==--b&&(w=0)}:function(e,t){var r=g(e.huffmanTableDC),n=0===r?0:_(r);e.pred+=n,t[0]=e.pred;for(var a=1;a<64;){var i=g(e.huffmanTableAC),o=15&i,s=i>>4;if(0===o){if(s<15)break;a+=16}else t[dctZigZag[a+=s]]=_(o),a++}};var R,O,C=0;O=1===I?n[0].blocksPerLine*n[0].blocksPerColumn:f*r.mcusPerColumn;for(var P=a||O;C<O;){for(x=0;x<I;x++)n[x].pred=0;if(b=0,1===I)for(E=n[0],A=0;A<P;A++)T(E,M,C),C++;else for(A=0;A<P;A++){for(x=0;x<I;x++){var L=E=n[x],U=L.h,B=L.v;for(S=0;S<B;S++)for(D=0;D<U;D++)k(E,M,C,S,D)}if(++C===O)break}if(p=0,(R=e[d]<<8|e[d+1])<65280)throw new Error(\\\"marker was not found\\\");if(!(R>=65488&&R<=65495))break;d+=2}return d-u}function buildComponentData(e,t){var r=[],n=t.blocksPerLine,a=t.blocksPerColumn,i=n<<3,o=new Int32Array(64),s=new Uint8Array(64);function l(e,r,n){var a,i,o,s,l,f,c,u,d,h,p=t.quantizationTable,m=n;for(h=0;h<64;h++)m[h]=e[h]*p[h];for(h=0;h<8;++h){var g=8*h;0!==m[1+g]||0!==m[2+g]||0!==m[3+g]||0!==m[4+g]||0!==m[5+g]||0!==m[6+g]||0!==m[7+g]?(a=dctSqrt2*m[0+g]+128>>8,i=dctSqrt2*m[4+g]+128>>8,o=m[2+g],s=m[6+g],l=dctSqrt1d2*(m[1+g]-m[7+g])+128>>8,u=dctSqrt1d2*(m[1+g]+m[7+g])+128>>8,f=m[3+g]<<4,c=m[5+g]<<4,d=a-i+1>>1,a=a+i+1>>1,i=d,d=o*dctSin6+s*dctCos6+128>>8,o=o*dctCos6-s*dctSin6+128>>8,s=d,d=l-c+1>>1,l=l+c+1>>1,c=d,d=u+f+1>>1,f=u-f+1>>1,u=d,d=a-s+1>>1,a=a+s+1>>1,s=d,d=i-o+1>>1,i=i+o+1>>1,o=d,d=l*dctSin3+u*dctCos3+2048>>12,l=l*dctCos3-u*dctSin3+2048>>12,u=d,d=f*dctSin1+c*dctCos1+2048>>12,f=f*dctCos1-c*dctSin1+2048>>12,c=d,m[0+g]=a+u,m[7+g]=a-u,m[1+g]=i+c,m[6+g]=i-c,m[2+g]=o+f,m[5+g]=o-f,m[3+g]=s+l,m[4+g]=s-l):(d=dctSqrt2*m[0+g]+512>>10,m[0+g]=d,m[1+g]=d,m[2+g]=d,m[3+g]=d,m[4+g]=d,m[5+g]=d,m[6+g]=d,m[7+g]=d)}for(h=0;h<8;++h){var y=h;0!==m[8+y]||0!==m[16+y]||0!==m[24+y]||0!==m[32+y]||0!==m[40+y]||0!==m[48+y]||0!==m[56+y]?(a=dctSqrt2*m[0+y]+2048>>12,i=dctSqrt2*m[32+y]+2048>>12,o=m[16+y],s=m[48+y],l=dctSqrt1d2*(m[8+y]-m[56+y])+2048>>12,u=dctSqrt1d2*(m[8+y]+m[56+y])+2048>>12,f=m[24+y],c=m[40+y],d=a-i+1>>1,a=a+i+1>>1,i=d,d=o*dctSin6+s*dctCos6+2048>>12,o=o*dctCos6-s*dctSin6+2048>>12,s=d,d=l-c+1>>1,l=l+c+1>>1,c=d,d=u+f+1>>1,f=u-f+1>>1,u=d,d=a-s+1>>1,a=a+s+1>>1,s=d,d=i-o+1>>1,i=i+o+1>>1,o=d,d=l*dctSin3+u*dctCos3+2048>>12,l=l*dctCos3-u*dctSin3+2048>>12,u=d,d=f*dctSin1+c*dctCos1+2048>>12,f=f*dctCos1-c*dctSin1+2048>>12,c=d,m[0+y]=a+u,m[56+y]=a-u,m[8+y]=i+c,m[48+y]=i-c,m[16+y]=o+f,m[40+y]=o-f,m[24+y]=s+l,m[32+y]=s-l):(d=dctSqrt2*n[h+0]+8192>>14,m[0+y]=d,m[8+y]=d,m[16+y]=d,m[24+y]=d,m[32+y]=d,m[40+y]=d,m[48+y]=d,m[56+y]=d)}for(h=0;h<64;++h){var _=128+(m[h]+8>>4);r[h]=_<0?0:_>255?255:_}}for(var f=0;f<a;f++){for(var c=f<<3,u=0;u<8;u++)r.push(new Uint8Array(i));for(var d=0;d<n;d++){l(t.blocks[f][d],s,o);for(var h=0,p=d<<3,m=0;m<8;m++)for(var g=r[c+m],y=0;y<8;y++)g[p+y]=s[h++]}}return r}var JpegStreamReader=function(){function e(){_classCallCheck(this,e),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return _createClass(e,[{key:\\\"resetFrames\\\",value:function(){this.frames=[]}},{key:\\\"parse\\\",value:function(e){var t=0;function r(){var r=e[t]<<8|e[t+1];return t+=2,r}function n(e){var t,r,n=0,a=0;for(r in e.components)e.components.hasOwnProperty(r)&&(n<(t=e.components[r]).h&&(n=t.h),a<t.v&&(a=t.v));var i=Math.ceil(e.samplesPerLine/8/n),o=Math.ceil(e.scanLines/8/a);for(r in e.components)if(e.components.hasOwnProperty(r)){t=e.components[r];for(var s=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/n),l=Math.ceil(Math.ceil(e.scanLines/8)*t.v/a),f=i*t.h,c=o*t.v,u=[],d=0;d<c;d++){for(var h=[],p=0;p<f;p++)h.push(new Int32Array(64));u.push(h)}t.blocksPerLine=s,t.blocksPerColumn=l,t.blocks=u}e.maxH=n,e.maxV=a,e.mcusPerLine=i,e.mcusPerColumn=o}var a,i,o=r();if(65496!==o)throw new Error(\\\"SOI not found\\\");for(o=r();65497!==o;){switch(o){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var s=(a=void 0,i=void 0,a=r(),i=e.subarray(t,t+a-2),t+=i.length,i);65504===o&&74===s[0]&&70===s[1]&&73===s[2]&&70===s[3]&&0===s[4]&&(this.jfif={version:{major:s[5],minor:s[6]},densityUnits:s[7],xDensity:s[8]<<8|s[9],yDensity:s[10]<<8|s[11],thumbWidth:s[12],thumbHeight:s[13],thumbData:s.subarray(14,14+3*s[12]*s[13])}),65518===o&&65===s[0]&&100===s[1]&&111===s[2]&&98===s[3]&&101===s[4]&&0===s[5]&&(this.adobe={version:s[6],flags0:s[7]<<8|s[8],flags1:s[9]<<8|s[10],transformCode:s[11]});break;case 65499:for(var l=r()+t-2;t<l;){var f=e[t++],c=new Int32Array(64);if(f>>4==0)for(var u=0;u<64;u++){c[dctZigZag[u]]=e[t++]}else{if(f>>4!=1)throw new Error(\\\"DQT: invalid table spec\\\");for(var d=0;d<64;d++){c[dctZigZag[d]]=r()}}this.quantizationTables[15&f]=c}break;case 65472:case 65473:case 65474:r();for(var h={extended:65473===o,progressive:65474===o,precision:e[t++],scanLines:r(),samplesPerLine:r(),components:{},componentsOrder:[]},p=e[t++],m=void 0,g=0;g<p;g++){m=e[t];var y=e[t+1]>>4,_=15&e[t+1],b=e[t+2];h.componentsOrder.push(m),h.components[m]={h:y,v:_,quantizationIdx:b},t+=3}n(h),this.frames.push(h);break;case 65476:for(var v=r(),w=2;w<v;){for(var k=e[t++],T=new Uint8Array(16),E=0,x=0;x<16;x++,t++)T[x]=e[t],E+=T[x];for(var S=new Uint8Array(E),D=0;D<E;D++,t++)S[D]=e[t];w+=17+E,k>>4==0?this.huffmanTablesDC[15&k]=buildHuffmanTable(T,S):this.huffmanTablesAC[15&k]=buildHuffmanTable(T,S)}break;case 65501:r(),this.resetInterval=r();break;case 65498:r();for(var A=e[t++],M=[],I=this.frames[0],R=0;R<A;R++){var O=I.components[e[t++]],C=e[t++];O.huffmanTableDC=this.huffmanTablesDC[C>>4],O.huffmanTableAC=this.huffmanTablesAC[15&C],M.push(O)}var P=e[t++],L=e[t++],U=e[t++],B=decodeScan(e,t,I,M,this.resetInterval,P,L,U>>4,15&U);t+=B;break;case 65535:255!==e[t]&&t--;break;default:if(255===e[t-3]&&e[t-2]>=192&&e[t-2]<=254){t-=3;break}throw new Error(\\\"unknown JPEG marker \\\".concat(o.toString(16)))}o=r()}}},{key:\\\"getResult\\\",value:function(){var e=this.frames;if(0===this.frames.length)throw new Error(\\\"no frames were decoded\\\");this.frames.length>1&&console.warn(\\\"more than one frame is not supported\\\");for(var t=0;t<this.frames.length;t++)for(var r=this.frames[t].components,n=0,a=Object.keys(r);n<a.length;n++){var i=a[n];r[i].quantizationTable=this.quantizationTables[r[i].quantizationIdx],delete r[i].quantizationIdx}for(var o=e[0],s=o.components,l=o.componentsOrder,f=[],c=o.samplesPerLine,u=o.scanLines,d=0;d<l.length;d++){var h=s[l[d]];f.push({lines:buildComponentData(o,h),scaleX:h.h/o.maxH,scaleY:h.v/o.maxV})}for(var p=new Uint8Array(c*u*f.length),m=0,g=0;g<u;++g)for(var y=0;y<c;++y)for(var _=0;_<f.length;++_){var b=f[_];p[m]=b.lines[0|g*b.scaleY][0|y*b.scaleX],++m}return p}}]),e}(),JpegDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).reader=new JpegStreamReader,e.JPEGTables&&n.reader.parse(e.JPEGTables),n}return _createClass(r,[{key:\\\"decodeBlock\\\",value:function(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}]),r}(),jpeg=Object.freeze({__proto__:null,default:JpegDecoder});function zero$1(e){for(var t=e.length;--t>=0;)e[t]=0}var MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,DIST_CODE_LEN=512,static_ltree=new Array(2*(L_CODES$1+2));zero$1(static_ltree);var static_dtree=new Array(2*D_CODES$1);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES$1);zero$1(base_length);var base_dist=new Array(D_CODES$1);zero$1(base_dist);var adler32=function(e,t,r,n){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{i=i+(a=a+t[n++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0},adler32_1=adler32,makeTable=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t},crcTable=new Uint32Array(makeTable()),crc32=function(e,t,r,n){var a=crcTable,i=n+r;e^=-1;for(var o=n;o<i;o++)e=e>>>8^a[255&(e^t[o])];return-1^e},crc32_1=crc32,messages={2:\\\"need dictionary\\\",1:\\\"stream end\\\",0:\\\"\\\",\\\"-1\\\":\\\"file error\\\",\\\"-2\\\":\\\"stream error\\\",\\\"-3\\\":\\\"data error\\\",\\\"-4\\\":\\\"insufficient memory\\\",\\\"-5\\\":\\\"buffer error\\\",\\\"-6\\\":\\\"incompatible version\\\"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},_has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if(\\\"object\\\"!==_typeof(r))throw new TypeError(r+\\\"must be non-object\\\");for(var n in r)_has(r,n)&&(e[n]=r[n])}}return e},flattenChunks=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var a=new Uint8Array(t),i=0,o=0,s=e.length;i<s;i++){var l=e[i];a.set(l,o),o+=l.length}return a},common={assign:assign,flattenChunks:flattenChunks},STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){STR_APPLY_UIA_OK=!1}for(var _utf8len=new Uint8Array(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=function(e){if(\\\"function\\\"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,r,n,a,i,o=e.length,s=0;for(a=0;a<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),i=0,a=0;i<s;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|63&r):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|63&r):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|63&r);return t},buf2binstring=function(e,t){if(t<65534&&e.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r=\\\"\\\",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r},buf2string=function(e,t){var r,n,a=t||e.length;if(\\\"function\\\"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var i=new Array(2*a);for(n=0,r=0;r<a;){var o=e[r++];if(o<128)i[n++]=o;else{var s=_utf8len[o];if(s>4)i[n++]=65533,r+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&r<a;)o=o<<6|63&e[r++],s--;s>1?i[n++]=65533:o<65536?i[n++]=o:(o-=65536,i[n++]=55296|o>>10&1023,i[n++]=56320|1023&o)}}}return buf2binstring(i,n)},utf8border=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+_utf8len[e[r]]>t?r:t},strings={string2buf:string2buf,buf2string:buf2string,utf8border:utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\\\"\\\",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream,BAD$1=30,TYPE$1=12,inffast=function(e,t){var r,n,a,i,o,s,l,f,c,u,d,h,p,m,g,y,_,b,v,w,k,T,E,x,S=e.state;r=e.next_in,E=e.input,n=r+(e.avail_in-5),a=e.next_out,x=e.output,i=a-(t-e.avail_out),o=a+(e.avail_out-257),s=S.dmax,l=S.wsize,f=S.whave,c=S.wnext,u=S.window,d=S.hold,h=S.bits,p=S.lencode,m=S.distcode,g=(1<<S.lenbits)-1,y=(1<<S.distbits)-1;e:do{h<15&&(d+=E[r++]<<h,h+=8,d+=E[r++]<<h,h+=8),_=p[d&g];t:for(;;){if(d>>>=b=_>>>24,h-=b,0===(b=_>>>16&255))x[a++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=p[(65535&_)+(d&(1<<b)-1)];continue t}if(32&b){S.mode=TYPE$1;break e}e.msg=\\\"invalid literal/length code\\\",S.mode=BAD$1;break e}v=65535&_,(b&=15)&&(h<b&&(d+=E[r++]<<h,h+=8),v+=d&(1<<b)-1,d>>>=b,h-=b),h<15&&(d+=E[r++]<<h,h+=8,d+=E[r++]<<h,h+=8),_=m[d&y];r:for(;;){if(d>>>=b=_>>>24,h-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=m[(65535&_)+(d&(1<<b)-1)];continue r}e.msg=\\\"invalid distance code\\\",S.mode=BAD$1;break e}if(w=65535&_,h<(b&=15)&&(d+=E[r++]<<h,(h+=8)<b&&(d+=E[r++]<<h,h+=8)),(w+=d&(1<<b)-1)>s){e.msg=\\\"invalid distance too far back\\\",S.mode=BAD$1;break e}if(d>>>=b,h-=b,w>(b=a-i)){if((b=w-b)>f&&S.sane){e.msg=\\\"invalid distance too far back\\\",S.mode=BAD$1;break e}if(k=0,T=u,0===c){if(k+=l-b,b<v){v-=b;do{x[a++]=u[k++]}while(--b);k=a-w,T=x}}else if(c<b){if(k+=l+c-b,(b-=c)<v){v-=b;do{x[a++]=u[k++]}while(--b);if(k=0,c<v){v-=b=c;do{x[a++]=u[k++]}while(--b);k=a-w,T=x}}}else if(k+=c-b,b<v){v-=b;do{x[a++]=u[k++]}while(--b);k=a-w,T=x}for(;v>2;)x[a++]=T[k++],x[a++]=T[k++],x[a++]=T[k++],v-=3;v&&(x[a++]=T[k++],v>1&&(x[a++]=T[k++]))}else{k=a-w;do{x[a++]=x[k++],x[a++]=x[k++],x[a++]=x[k++],v-=3}while(v>2);v&&(x[a++]=x[k++],v>1&&(x[a++]=x[k++]))}break}}break}}while(r<n&&a<o);r-=v=h>>3,d&=(1<<(h-=v<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=a<o?o-a+257:257-(a-o),S.hold=d,S.bits=h},MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=function(e,t,r,n,a,i,o,s){var l,f,c,u,d,h,p,m,g,y=s.bits,_=0,b=0,v=0,w=0,k=0,T=0,E=0,x=0,S=0,D=0,A=null,M=0,I=new Uint16Array(MAXBITS+1),R=new Uint16Array(MAXBITS+1),O=null,C=0;for(_=0;_<=MAXBITS;_++)I[_]=0;for(b=0;b<n;b++)I[t[r+b]]++;for(k=y,w=MAXBITS;w>=1&&0===I[w];w--);if(k>w&&(k=w),0===w)return a[i++]=20971520,a[i++]=20971520,s.bits=1,0;for(v=1;v<w&&0===I[v];v++);for(k<v&&(k=v),x=1,_=1;_<=MAXBITS;_++)if(x<<=1,(x-=I[_])<0)return-1;if(x>0&&(e===CODES$1||1!==w))return-1;for(R[1]=0,_=1;_<MAXBITS;_++)R[_+1]=R[_]+I[_];for(b=0;b<n;b++)0!==t[r+b]&&(o[R[t[r+b]]++]=b);if(e===CODES$1?(A=O=o,h=19):e===LENS$1?(A=lbase,M-=257,O=lext,C-=257,h=256):(A=dbase,O=dext,h=-1),D=0,b=0,_=v,d=i,T=k,E=0,c=-1,u=(S=1<<k)-1,e===LENS$1&&S>ENOUGH_LENS$1||e===DISTS$1&&S>ENOUGH_DISTS$1)return 1;for(;;){p=_-E,o[b]<h?(m=0,g=o[b]):o[b]>h?(m=O[C+o[b]],g=A[M+o[b]]):(m=96,g=0),l=1<<_-E,v=f=1<<T;do{a[d+(D>>E)+(f-=l)]=p<<24|m<<16|g|0}while(0!==f);for(l=1<<_-1;D&l;)l>>=1;if(0!==l?(D&=l-1,D+=l):D=0,b++,0==--I[_]){if(_===w)break;_=t[r+o[b]]}if(_>k&&(D&u)!==c){for(0===E&&(E=k),d+=v,x=1<<(T=_-E);T+E<w&&!((x-=I[T+E])<=0);)T++,x<<=1;if(S+=1<<T,e===LENS$1&&S>ENOUGH_LENS$1||e===DISTS$1&&S>ENOUGH_DISTS$1)return 1;a[c=D&u]=k<<24|T<<16|d-i|0}}return 0!==D&&(a[d+D]=_-E<<24|64<<16|0),s.bits=k,0},inftrees=inflate_table,CODES=0,LENS=1,DISTS=2,Z_FINISH$1=constants$2.Z_FINISH,Z_BLOCK=constants$2.Z_BLOCK,Z_TREES=constants$2.Z_TREES,Z_OK$1=constants$2.Z_OK,Z_STREAM_END$1=constants$2.Z_STREAM_END,Z_NEED_DICT$1=constants$2.Z_NEED_DICT,Z_STREAM_ERROR$1=constants$2.Z_STREAM_ERROR,Z_DATA_ERROR$1=constants$2.Z_DATA_ERROR,Z_MEM_ERROR$1=constants$2.Z_MEM_ERROR,Z_BUF_ERROR=constants$2.Z_BUF_ERROR,Z_DEFLATED=constants$2.Z_DEFLATED,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var inflateResetKeep=function(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg=\\\"\\\",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ENOUGH_LENS),t.distcode=t.distdyn=new Int32Array(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1},inflateReset=function(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)},inflateReset2=function(e,t){var r;if(!e||!e.state)return Z_STREAM_ERROR$1;var n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR$1:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,inflateReset(e))},inflateInit2=function(e,t){if(!e)return Z_STREAM_ERROR$1;var r=new InflateState;e.state=r,r.window=null;var n=inflateReset2(e,t);return n!==Z_OK$1&&(e.state=null),n},inflateInit=function(e){return inflateInit2(e,DEF_WBITS)},virgin=!0,lenfix,distfix,fixedtables=function(e){if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inftrees(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inftrees(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5},updatewindow=function(e,t,r,n){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),(n-=a)?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},inflate$2=function(e,t){var r,n,a,i,o,s,l,f,c,u,d,h,p,m,g,y,_,b,v,w,k,T,E,x,S=0,D=new Uint8Array(4),A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR$1;(r=e.state).mode===TYPE&&(r.mode=TYPEDO),o=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,f=r.hold,c=r.bits,u=s,d=l,T=Z_OK$1;e:for(;;)switch(r.mode){case HEAD:if(0===r.wrap){r.mode=TYPEDO;break}for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(2&r.wrap&&35615===f){r.check=0,D[0]=255&f,D[1]=f>>>8&255,r.check=crc32_1(r.check,D,2,0),f=0,c=0,r.mode=FLAGS;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg=\\\"incorrect header check\\\",r.mode=BAD;break}if((15&f)!==Z_DEFLATED){e.msg=\\\"unknown compression method\\\",r.mode=BAD;break}if(c-=4,k=8+(15&(f>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){e.msg=\\\"invalid window size\\\",r.mode=BAD;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&f?DICTID:TYPE,f=0,c=0;break;case FLAGS:for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(r.flags=f,(255&r.flags)!==Z_DEFLATED){e.msg=\\\"unknown compression method\\\",r.mode=BAD;break}if(57344&r.flags){e.msg=\\\"unknown header flags set\\\",r.mode=BAD;break}r.head&&(r.head.text=f>>8&1),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,r.check=crc32_1(r.check,D,2,0)),f=0,c=0,r.mode=TIME;case TIME:for(;c<32;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.head&&(r.head.time=f),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,D[2]=f>>>16&255,D[3]=f>>>24&255,r.check=crc32_1(r.check,D,4,0)),f=0,c=0,r.mode=OS;case OS:for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.head&&(r.head.xflags=255&f,r.head.os=f>>8),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,r.check=crc32_1(r.check,D,2,0)),f=0,c=0,r.mode=EXLEN;case EXLEN:if(1024&r.flags){for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.length=f,r.head&&(r.head.extra_len=f),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,r.check=crc32_1(r.check,D,2,0)),f=0,c=0}else r.head&&(r.head.extra=null);r.mode=EXTRA;case EXTRA:if(1024&r.flags&&((h=r.length)>s&&(h=s),h&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+h),k)),512&r.flags&&(r.check=crc32_1(r.check,n,h,i)),s-=h,i+=h,r.length-=h),r.length))break e;r.length=0,r.mode=NAME;case NAME:if(2048&r.flags){if(0===s)break e;h=0;do{k=n[i+h++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k))}while(k&&h<s);if(512&r.flags&&(r.check=crc32_1(r.check,n,h,i)),s-=h,i+=h,k)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=COMMENT;case COMMENT:if(4096&r.flags){if(0===s)break e;h=0;do{k=n[i+h++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k))}while(k&&h<s);if(512&r.flags&&(r.check=crc32_1(r.check,n,h,i)),s-=h,i+=h,k)break e}else r.head&&(r.head.comment=null);r.mode=HCRC;case HCRC:if(512&r.flags){for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(f!==(65535&r.check)){e.msg=\\\"header crc mismatch\\\",r.mode=BAD;break}f=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=TYPE;break;case DICTID:for(;c<32;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}e.adler=r.check=zswap32(f),f=0,c=0,r.mode=DICT;case DICT:if(0===r.havedict)return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,r.hold=f,r.bits=c,Z_NEED_DICT$1;e.adler=r.check=1,r.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(r.last){f>>>=7&c,c-=7&c,r.mode=CHECK;break}for(;c<3;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}switch(r.last=1&f,c-=1,3&(f>>>=1)){case 0:r.mode=STORED;break;case 1:if(fixedtables(r),r.mode=LEN_,t===Z_TREES){f>>>=2,c-=2;break e}break;case 2:r.mode=TABLE;break;case 3:e.msg=\\\"invalid block type\\\",r.mode=BAD}f>>>=2,c-=2;break;case STORED:for(f>>>=7&c,c-=7&c;c<32;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if((65535&f)!=(f>>>16^65535)){e.msg=\\\"invalid stored block lengths\\\",r.mode=BAD;break}if(r.length=65535&f,f=0,c=0,r.mode=COPY_,t===Z_TREES)break e;case COPY_:r.mode=COPY;case COPY:if(h=r.length){if(h>s&&(h=s),h>l&&(h=l),0===h)break e;a.set(n.subarray(i,i+h),o),s-=h,i+=h,l-=h,o+=h,r.length-=h;break}r.mode=TYPE;break;case TABLE:for(;c<14;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(r.nlen=257+(31&f),f>>>=5,c-=5,r.ndist=1+(31&f),f>>>=5,c-=5,r.ncode=4+(15&f),f>>>=4,c-=4,r.nlen>286||r.ndist>30){e.msg=\\\"too many length or distance symbols\\\",r.mode=BAD;break}r.have=0,r.mode=LENLENS;case LENLENS:for(;r.have<r.ncode;){for(;c<3;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.lens[A[r.have++]]=7&f,f>>>=3,c-=3}for(;r.have<19;)r.lens[A[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E={bits:r.lenbits},T=inftrees(CODES,r.lens,0,19,r.lencode,0,r.work,E),r.lenbits=E.bits,T){e.msg=\\\"invalid code lengths set\\\",r.mode=BAD;break}r.have=0,r.mode=CODELENS;case CODELENS:for(;r.have<r.nlen+r.ndist;){for(;y=(S=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,_=65535&S,!((g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(_<16)f>>>=g,c-=g,r.lens[r.have++]=_;else{if(16===_){for(x=g+2;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(f>>>=g,c-=g,0===r.have){e.msg=\\\"invalid bit length repeat\\\",r.mode=BAD;break}k=r.lens[r.have-1],h=3+(3&f),f>>>=2,c-=2}else if(17===_){for(x=g+3;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}c-=g,k=0,h=3+(7&(f>>>=g)),f>>>=3,c-=3}else{for(x=g+7;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}c-=g,k=0,h=11+(127&(f>>>=g)),f>>>=7,c-=7}if(r.have+h>r.nlen+r.ndist){e.msg=\\\"invalid bit length repeat\\\",r.mode=BAD;break}for(;h--;)r.lens[r.have++]=k}}if(r.mode===BAD)break;if(0===r.lens[256]){e.msg=\\\"invalid code -- missing end-of-block\\\",r.mode=BAD;break}if(r.lenbits=9,E={bits:r.lenbits},T=inftrees(LENS,r.lens,0,r.nlen,r.lencode,0,r.work,E),r.lenbits=E.bits,T){e.msg=\\\"invalid literal/lengths set\\\",r.mode=BAD;break}if(r.distbits=6,r.distcode=r.distdyn,E={bits:r.distbits},T=inftrees(DISTS,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,E),r.distbits=E.bits,T){e.msg=\\\"invalid distances set\\\",r.mode=BAD;break}if(r.mode=LEN_,t===Z_TREES)break e;case LEN_:r.mode=LEN;case LEN:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,r.hold=f,r.bits=c,inffast(e,d),o=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,f=r.hold,c=r.bits,r.mode===TYPE&&(r.back=-1);break}for(r.back=0;y=(S=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,_=65535&S,!((g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(y&&0==(240&y)){for(b=g,v=y,w=_;y=(S=r.lencode[w+((f&(1<<b+v)-1)>>b)])>>>16&255,_=65535&S,!(b+(g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}f>>>=b,c-=b,r.back+=b}if(f>>>=g,c-=g,r.back+=g,r.length=_,0===y){r.mode=LIT;break}if(32&y){r.back=-1,r.mode=TYPE;break}if(64&y){e.msg=\\\"invalid literal/length code\\\",r.mode=BAD;break}r.extra=15&y,r.mode=LENEXT;case LENEXT:if(r.extra){for(x=r.extra;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=DIST;case DIST:for(;y=(S=r.distcode[f&(1<<r.distbits)-1])>>>16&255,_=65535&S,!((g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(0==(240&y)){for(b=g,v=y,w=_;y=(S=r.distcode[w+((f&(1<<b+v)-1)>>b)])>>>16&255,_=65535&S,!(b+(g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}f>>>=b,c-=b,r.back+=b}if(f>>>=g,c-=g,r.back+=g,64&y){e.msg=\\\"invalid distance code\\\",r.mode=BAD;break}r.offset=_,r.extra=15&y,r.mode=DISTEXT;case DISTEXT:if(r.extra){for(x=r.extra;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg=\\\"invalid distance too far back\\\",r.mode=BAD;break}r.mode=MATCH;case MATCH:if(0===l)break e;if(h=d-l,r.offset>h){if((h=r.offset-h)>r.whave&&r.sane){e.msg=\\\"invalid distance too far back\\\",r.mode=BAD;break}h>r.wnext?(h-=r.wnext,p=r.wsize-h):p=r.wnext-h,h>r.length&&(h=r.length),m=r.window}else m=a,p=o-r.offset,h=r.length;h>l&&(h=l),l-=h,r.length-=h;do{a[o++]=m[p++]}while(--h);0===r.length&&(r.mode=LEN);break;case LIT:if(0===l)break e;a[o++]=r.length,l--,r.mode=LEN;break;case CHECK:if(r.wrap){for(;c<32;){if(0===s)break e;s--,f|=n[i++]<<c,c+=8}if(d-=l,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?crc32_1(r.check,a,d,o-d):adler32_1(r.check,a,d,o-d)),d=l,(r.flags?f:zswap32(f))!==r.check){e.msg=\\\"incorrect data check\\\",r.mode=BAD;break}f=0,c=0}r.mode=LENGTH;case LENGTH:if(r.wrap&&r.flags){for(;c<32;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(f!==(4294967295&r.total)){e.msg=\\\"incorrect length check\\\",r.mode=BAD;break}f=0,c=0}r.mode=DONE;case DONE:T=Z_STREAM_END$1;break e;case BAD:T=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,r.hold=f,r.bits=c,(r.wsize||d!==e.avail_out&&r.mode<BAD&&(r.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,d-e.avail_out),u-=e.avail_in,d-=e.avail_out,e.total_in+=u,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?crc32_1(r.check,a,d,e.next_out-d):adler32_1(r.check,a,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===TYPE?128:0)+(r.mode===LEN_||r.mode===COPY_?256:0),(0===u&&0===d||t===Z_FINISH$1)&&T===Z_OK$1&&(T=Z_BUF_ERROR),T},inflateEnd=function(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1},inflateGetHeader=function(e,t){if(!e||!e.state)return Z_STREAM_ERROR$1;var r=e.state;return 0==(2&r.wrap)?Z_STREAM_ERROR$1:(r.head=t,t.done=!1,Z_OK$1)},inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==DICT?Z_STREAM_ERROR$1:r.mode===DICT&&adler32_1(1,t,n,0)!==r.check?Z_DATA_ERROR$1:updatewindow(e,t,n,n)?(r.mode=MEM,Z_MEM_ERROR$1):(r.havedict=1,Z_OK$1):Z_STREAM_ERROR$1},inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo=\\\"pako inflate (from Nodeca project)\\\",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo:inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\\\"\\\",this.comment=\\\"\\\",this.hcrc=0,this.done=!1}var gzheader=GZheader,toString=Object.prototype.toString,Z_NO_FLUSH=constants$2.Z_NO_FLUSH,Z_FINISH=constants$2.Z_FINISH,Z_OK=constants$2.Z_OK,Z_STREAM_END=constants$2.Z_STREAM_END,Z_NEED_DICT=constants$2.Z_NEED_DICT,Z_STREAM_ERROR=constants$2.Z_STREAM_ERROR,Z_DATA_ERROR=constants$2.Z_DATA_ERROR,Z_MEM_ERROR=constants$2.Z_MEM_ERROR;function Inflate$1(e){this.options=common.assign({chunkSize:65536,windowBits:15,to:\\\"\\\"},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\\\"\\\",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;var r=inflate_1$2.inflateInit2(this.strm,t.windowBits);if(r!==Z_OK)throw new Error(messages[r]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),t.dictionary&&(\\\"string\\\"==typeof t.dictionary?t.dictionary=strings.string2buf(t.dictionary):\\\"[object ArrayBuffer]\\\"===toString.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=inflate_1$2.inflateSetDictionary(this.strm,t.dictionary))!==Z_OK))throw new Error(messages[r])}function inflate$1(e,t){var r=new Inflate$1(t);if(r.push(e),r.err)throw r.msg||messages[r.err];return r.result}function inflateRaw$1(e,t){return(t=t||{}).raw=!0,inflate$1(e,t)}Inflate$1.prototype.push=function(e,t){var r,n,a,i=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?Z_FINISH:Z_NO_FLUSH,\\\"[object ArrayBuffer]\\\"===toString.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(r=inflate_1$2.inflate(i,n))===Z_NEED_DICT&&s&&((r=inflate_1$2.inflateSetDictionary(i,s))===Z_OK?r=inflate_1$2.inflate(i,n):r===Z_DATA_ERROR&&(r=Z_NEED_DICT));i.avail_in>0&&r===Z_STREAM_END&&i.state.wrap>0&&0!==e[i.next_in];)inflate_1$2.inflateReset(i),r=inflate_1$2.inflate(i,n);switch(r){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(r),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||r===Z_STREAM_END))if(\\\"string\\\"===this.options.to){var l=strings.utf8border(i.output,i.next_out),f=i.next_out-l,c=strings.buf2string(i.output,l);i.next_out=f,i.avail_out=o-f,f&&i.output.set(i.output.subarray(l,l+f),0),this.onData(c)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==Z_OK||0!==a){if(r===Z_STREAM_END)return r=inflate_1$2.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},Inflate$1.prototype.onData=function(e){this.chunks.push(e)},Inflate$1.prototype.onEnd=function(e){e===Z_OK&&(\\\"string\\\"===this.options.to?this.result=this.chunks.join(\\\"\\\"):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants:constants},inflate=inflate_1$1.inflate,inflate_1=inflate,DeflateDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:\\\"decodeBlock\\\",value:function(e){return inflate_1(new Uint8Array(e)).buffer}}]),r}(),deflate=Object.freeze({__proto__:null,default:DeflateDecoder}),PackbitsDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:\\\"decodeBlock\\\",value:function(e){for(var t=new DataView(e),r=[],n=0;n<e.byteLength;++n){var a=t.getInt8(n);if(a<0){var i=t.getUint8(n+1);a=-a;for(var o=0;o<=a;++o)r.push(i);n+=1}else{for(var s=0;s<=a;++s)r.push(t.getUint8(n+s+1));n+=a+1}}return new Uint8Array(r).buffer}}]),r}(),packbits=Object.freeze({__proto__:null,default:PackbitsDecoder}),LercDecode={exports:{}},module;module=LercDecode,\\n/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the \\\"License\\\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */\\nfunction(){var e,t,r,n,a,i,o,s,l,f,c,u,d,h,p,m,g=(e={defaultNoDataValue:-34027999387901484e22,decode:function(i,o){var s=(o=o||{}).encodedMaskData||null===o.encodedMaskData,l=a(i,o.inputOffset||0,s),f=null!==o.noDataValue?o.noDataValue:e.defaultNoDataValue,c=t(l,o.pixelType||Float32Array,o.encodedMaskData,f,o.returnMask),u={width:l.width,height:l.height,pixelData:c.resultPixels,minValue:c.minValue,maxValue:l.pixels.maxValue,noDataValue:f};return c.resultMask&&(u.maskData=c.resultMask),o.returnEncodedMask&&l.mask&&(u.encodedMaskData=l.mask.bitset?l.mask.bitset:null),o.returnFileInfo&&(u.fileInfo=r(l),o.computeUsedBitDepths&&(u.fileInfo.bitDepths=n(l))),u}},t=function(e,t,r,n,a){var o,s,l,f=0,c=e.pixels.numBlocksX,u=e.pixels.numBlocksY,d=Math.floor(e.width/c),h=Math.floor(e.height/u),p=2*e.maxZError,m=Number.MAX_VALUE;r=r||(e.mask?e.mask.bitset:null),s=new t(e.width*e.height),a&&r&&(l=new Uint8Array(e.width*e.height));for(var g,y,_=new Float32Array(d*h),b=0;b<=u;b++){var v=b!==u?h:e.height%u;if(0!==v)for(var w=0;w<=c;w++){var k=w!==c?d:e.width%c;if(0!==k){var T,E,x,S,D=b*e.width*h+w*d,A=e.width-k,M=e.pixels.blocks[f];if(M.encoding<2?(0===M.encoding?T=M.rawData:(i(M.stuffedData,M.bitsPerPixel,M.numValidPixels,M.offset,p,_,e.pixels.maxValue),T=_),E=0):x=2===M.encoding?0:M.offset,r)for(y=0;y<v;y++){for(7&D&&(S=r[D>>3],S<<=7&D),g=0;g<k;g++)7&D||(S=r[D>>3]),128&S?(l&&(l[D]=1),m=m>(o=M.encoding<2?T[E++]:x)?o:m,s[D++]=o):(l&&(l[D]=0),s[D++]=n),S<<=1;D+=A}else if(M.encoding<2)for(y=0;y<v;y++){for(g=0;g<k;g++)m=m>(o=T[E++])?o:m,s[D++]=o;D+=A}else for(m=m>x?x:m,y=0;y<v;y++){for(g=0;g<k;g++)s[D++]=x;D+=A}if(1===M.encoding&&E!==M.numValidPixels)throw\\\"Block and Mask do not match\\\";f++}}}return{resultPixels:s,resultMask:l,minValue:m}},r=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,noDataValue:e.noDataValue}}},n=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},n=0;n<t;n++){var a=e.pixels.blocks[n];0===a.encoding?r.float32=!0:1===a.encoding?r[a.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},a=function(e,t,r){var n={},a=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,a),\\\"CntZImage\\\"!==n.fileIdentifierString.trim())throw\\\"Unexpected file identifier string: \\\"+n.fileIdentifierString;t+=10;var i=new DataView(e,t,24);if(n.fileVersion=i.getInt32(0,!0),n.imageType=i.getInt32(4,!0),n.height=i.getUint32(8,!0),n.width=i.getUint32(12,!0),n.maxZError=i.getFloat64(16,!0),t+=24,!r)if(i=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=i.getUint32(0,!0),n.mask.numBlocksX=i.getUint32(4,!0),n.mask.numBytes=i.getUint32(8,!0),n.mask.maxValue=i.getFloat32(12,!0),t+=16,n.mask.numBytes>0){var o=new Uint8Array(Math.ceil(n.width*n.height/8)),s=(i=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),l=2,f=0;do{if(s>0)for(;s--;)o[f++]=i.getUint8(l++);else{var c=i.getUint8(l++);for(s=-s;s--;)o[f++]=c}s=i.getInt16(l,!0),l+=2}while(l<n.mask.numBytes);if(-32768!==s||f<o.length)throw\\\"Unexpected end of mask RLE encoding\\\";n.mask.bitset=o,t+=n.mask.numBytes}else 0==(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)&&(n.mask.bitset=new Uint8Array(Math.ceil(n.width*n.height/8)));i=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=i.getUint32(0,!0),n.pixels.numBlocksX=i.getUint32(4,!0),n.pixels.numBytes=i.getUint32(8,!0),n.pixels.maxValue=i.getFloat32(12,!0),t+=16;var u=n.pixels.numBlocksX,d=n.pixels.numBlocksY,h=u+(n.width%u>0?1:0),p=d+(n.height%d>0?1:0);n.pixels.blocks=new Array(h*p);for(var m=0,g=0;g<p;g++)for(var y=0;y<h;y++){var _=0,b=e.byteLength-t;i=new DataView(e,t,Math.min(10,b));var v={};n.pixels.blocks[m++]=v;var w=i.getUint8(0);if(_++,v.encoding=63&w,v.encoding>3)throw\\\"Invalid block encoding (\\\"+v.encoding+\\\")\\\";if(2!==v.encoding){if(0!==w&&2!==w){if(w>>=6,v.offsetType=w,2===w)v.offset=i.getInt8(1),_++;else if(1===w)v.offset=i.getInt16(1,!0),_+=2;else{if(0!==w)throw\\\"Invalid block offset type\\\";v.offset=i.getFloat32(1,!0),_+=4}if(1===v.encoding)if(w=i.getUint8(_),_++,v.bitsPerPixel=63&w,w>>=6,v.numValidPixelsType=w,2===w)v.numValidPixels=i.getUint8(_),_++;else if(1===w)v.numValidPixels=i.getUint16(_,!0),_+=2;else{if(0!==w)throw\\\"Invalid valid pixel count type\\\";v.numValidPixels=i.getUint32(_,!0),_+=4}}var k;if(t+=_,3!==v.encoding)if(0===v.encoding){var T=(n.pixels.numBytes-1)/4;if(T!==Math.floor(T))throw\\\"uncompressed block has invalid length\\\";k=new ArrayBuffer(4*T),new Uint8Array(k).set(new Uint8Array(e,t,4*T));var E=new Float32Array(k);v.rawData=E,t+=4*T}else if(1===v.encoding){var x=Math.ceil(v.numValidPixels*v.bitsPerPixel/8),S=Math.ceil(x/4);k=new ArrayBuffer(4*S),new Uint8Array(k).set(new Uint8Array(e,t,x)),v.stuffedData=new Uint32Array(k),t+=x}}else t++}return n.eofOffset=t,n},i=function(e,t,r,n,a,i,o){var s,l,f,c=(1<<t)-1,u=0,d=0,h=Math.ceil((o-n)/a),p=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*p,s=0;s<r;s++){if(0===d&&(f=e[u++],d=32),d>=t)l=f>>>d-t&c,d-=t;else{var m=t-d;l=(f&c)<<m&c,l+=(f=e[u++])>>>(d=32-m)}i[s]=l<h?n+l*a:o}return i},e),y=(o=function(e,t,r,n,a,i,o,s){var l,f,c,u,d,h=(1<<r)-1,p=0,m=0,g=4*e.length-Math.ceil(r*n/8);if(e[e.length-1]<<=8*g,a)for(l=0;l<n;l++)0===m&&(c=e[p++],m=32),m>=r?(f=c>>>m-r&h,m-=r):(f=(c&h)<<(u=r-m)&h,f+=(c=e[p++])>>>(m=32-u)),t[l]=a[f];else for(d=Math.ceil((s-i)/o),l=0;l<n;l++)0===m&&(c=e[p++],m=32),m>=r?(f=c>>>m-r&h,m-=r):(f=(c&h)<<(u=r-m)&h,f+=(c=e[p++])>>>(m=32-u)),t[l]=f<d?i+f*o:s},s=function(e,t,r,n,a,i){var o,s=(1<<t)-1,l=0,f=0,c=0,u=0,d=0,h=[],p=4*e.length-Math.ceil(t*r/8);e[e.length-1]<<=8*p;var m=Math.ceil((i-n)/a);for(f=0;f<r;f++)0===u&&(o=e[l++],u=32),u>=t?(d=o>>>u-t&s,u-=t):(d=(o&s)<<(c=t-u)&s,d+=(o=e[l++])>>>(u=32-c)),h[f]=d<m?n+d*a:i;return h.unshift(n),h},l=function(e,t,r,n,a,i,o,s){var l,f,c,u,d=(1<<r)-1,h=0,p=0,m=0;if(a)for(l=0;l<n;l++)0===p&&(c=e[h++],p=32,m=0),p>=r?(f=c>>>m&d,p-=r,m+=r):(f=c>>>m&d,p=32-(u=r-p),f|=((c=e[h++])&(1<<u)-1)<<r-u,m=u),t[l]=a[f];else{var g=Math.ceil((s-i)/o);for(l=0;l<n;l++)0===p&&(c=e[h++],p=32,m=0),p>=r?(f=c>>>m&d,p-=r,m+=r):(f=c>>>m&d,p=32-(u=r-p),f|=((c=e[h++])&(1<<u)-1)<<r-u,m=u),t[l]=f<g?i+f*o:s}return t},f=function(e,t,r,n,a,i){var o,s=(1<<t)-1,l=0,f=0,c=0,u=0,d=0,h=0,p=[],m=Math.ceil((i-n)/a);for(f=0;f<r;f++)0===u&&(o=e[l++],u=32,h=0),u>=t?(d=o>>>h&s,u-=t,h+=t):(d=o>>>h&s,u=32-(c=t-u),d|=((o=e[l++])&(1<<c)-1)<<t-c,h=c),p[f]=d<m?n+d*a:i;return p.unshift(n),p},c=function(e,t,r,n){var a,i,o,s,l=(1<<r)-1,f=0,c=0,u=4*e.length-Math.ceil(r*n/8);for(e[e.length-1]<<=8*u,a=0;a<n;a++)0===c&&(o=e[f++],c=32),c>=r?(i=o>>>c-r&l,c-=r):(i=(o&l)<<(s=r-c)&l,i+=(o=e[f++])>>>(c=32-s)),t[a]=i;return t},u=function(e,t,r,n){var a,i,o,s,l=(1<<r)-1,f=0,c=0,u=0;for(a=0;a<n;a++)0===c&&(o=e[f++],c=32,u=0),c>=r?(i=o>>>u&l,c-=r,u+=r):(i=o>>>u&l,c=32-(s=r-c),i|=((o=e[f++])&(1<<s)-1)<<r-s,u=s),t[a]=i;return t},d={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,n=e.length,a=Math.floor(n/2),i=0;a;){var o=a>=359?359:a;a-=o;do{t+=e[i++]<<8,r+=t+=e[i++]}while(--o);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16)}return 1&n&&(r+=t+=e[i]<<8),((r=(65535&r)+(r>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,n=new Uint8Array(e,r,6),a={};if(a.fileIdentifierString=String.fromCharCode.apply(null,n),0!==a.fileIdentifierString.lastIndexOf(\\\"Lerc2\\\",0))throw\\\"Unexpected file identifier string (expect Lerc2 ): \\\"+a.fileIdentifierString;r+=6;var i,o=new DataView(e,r,8),s=o.getInt32(0,!0);if(a.fileVersion=s,r+=4,s>=3&&(a.checksum=o.getUint32(4,!0),r+=4),o=new DataView(e,r,12),a.height=o.getUint32(0,!0),a.width=o.getUint32(4,!0),r+=8,s>=4?(a.numDims=o.getUint32(8,!0),r+=4):a.numDims=1,o=new DataView(e,r,40),a.numValidPixel=o.getUint32(0,!0),a.microBlockSize=o.getInt32(4,!0),a.blobSize=o.getInt32(8,!0),a.imageType=o.getInt32(12,!0),a.maxZError=o.getFloat64(16,!0),a.zMin=o.getFloat64(24,!0),a.zMax=o.getFloat64(32,!0),r+=40,t.headerInfo=a,t.ptr=r,s>=3&&(i=s>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(e,r-i,a.blobSize-14))!==a.checksum))throw\\\"Checksum failed.\\\";return!0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,n=this.getDataTypeArray(r.imageType),a=r.numDims*this.getDataTypeSize(r.imageType),i=this.readSubArray(e,t.ptr,n,a),o=this.readSubArray(e,t.ptr+a,n,a);t.ptr+=2*a;var s,l=!0;for(s=0;s<r.numDims;s++)if(i[s]!==o[s]){l=!1;break}return r.minValues=i,r.maxValues=o,l},readSubArray:function(e,t,r,n){var a;if(r===Uint8Array)a=new Uint8Array(e,t,n);else{var i=new ArrayBuffer(n);new Uint8Array(i).set(new Uint8Array(e,t,n)),a=new r(i)}return a},readMask:function(e,t){var r,n,a=t.ptr,i=t.headerInfo,o=i.width*i.height,s=i.numValidPixel,l=new DataView(e,a,4),f={};if(f.numBytes=l.getUint32(0,!0),a+=4,(0===s||o===s)&&0!==f.numBytes)throw\\\"invalid mask\\\";if(0===s)r=new Uint8Array(Math.ceil(o/8)),f.bitset=r,n=new Uint8Array(o),t.pixels.resultMask=n,a+=f.numBytes;else if(f.numBytes>0){r=new Uint8Array(Math.ceil(o/8));var c=(l=new DataView(e,a,f.numBytes)).getInt16(0,!0),u=2,d=0,h=0;do{if(c>0)for(;c--;)r[d++]=l.getUint8(u++);else for(h=l.getUint8(u++),c=-c;c--;)r[d++]=h;c=l.getInt16(u,!0),u+=2}while(u<f.numBytes);if(-32768!==c||d<r.length)throw\\\"Unexpected end of mask RLE encoding\\\";n=new Uint8Array(o);var p=0,m=0;for(m=0;m<o;m++)7&m?(p=r[m>>3],p<<=7&m):p=r[m>>3],128&p&&(n[m]=1);t.pixels.resultMask=n,f.bitset=r,a+=f.numBytes}return t.ptr=a,t.mask=f,!0},readDataOneSweep:function(e,t,r,n){var a,i=t.ptr,o=t.headerInfo,s=o.numDims,l=o.width*o.height,f=o.imageType,c=o.numValidPixel*d.getDataTypeSize(f)*s,u=t.pixels.resultMask;if(r===Uint8Array)a=new Uint8Array(e,i,c);else{var h=new ArrayBuffer(c);new Uint8Array(h).set(new Uint8Array(e,i,c)),a=new r(h)}if(a.length===l*s)t.pixels.resultPixels=n?d.swapDimensionOrder(a,l,s,r,!0):a;else{t.pixels.resultPixels=new r(l*s);var p=0,m=0,g=0,y=0;if(s>1){if(n){for(m=0;m<l;m++)if(u[m])for(y=m,g=0;g<s;g++,y+=l)t.pixels.resultPixels[y]=a[p++]}else for(m=0;m<l;m++)if(u[m])for(y=m*s,g=0;g<s;g++)t.pixels.resultPixels[y+g]=a[p++]}else for(m=0;m<l;m++)u[m]&&(t.pixels.resultPixels[m]=a[p++])}return i+=c,t.ptr=i,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(e,t.ptr,16);if(t.ptr+=16,n.getInt32(0,!0)<2)throw\\\"unsupported Huffman version\\\";var a=n.getInt32(4,!0),i=n.getInt32(8,!0),o=n.getInt32(12,!0);if(i>=o)return!1;var s=new Uint32Array(o-i);d.decodeBits(e,t,s);var l,f,c,u,p=[];for(l=i;l<o;l++)p[f=l-(l<a?0:a)]={first:s[l-i],second:null};var m=e.byteLength-t.ptr,g=Math.ceil(m/4),y=new ArrayBuffer(4*g);new Uint8Array(y).set(new Uint8Array(e,t.ptr,m));var _,b=new Uint32Array(y),v=0,w=0;for(_=b[0],l=i;l<o;l++)(u=p[f=l-(l<a?0:a)].first)>0&&(p[f].second=_<<v>>>32-u,32-v>=u?32===(v+=u)&&(v=0,_=b[++w]):(v+=u-32,_=b[++w],p[f].second|=_>>>32-v));var k=0,T=0,E=new h;for(l=0;l<p.length;l++)void 0!==p[l]&&(k=Math.max(k,p[l].first));T=k>=r?r:k;var x,S,D,A,M,I=[];for(l=i;l<o;l++)if((u=p[f=l-(l<a?0:a)].first)>0)if(x=[u,f],u<=T)for(S=p[f].second<<T-u,D=1<<T-u,c=0;c<D;c++)I[S|c]=x;else for(S=p[f].second,M=E,A=u-1;A>=0;A--)S>>>A&1?(M.right||(M.right=new h),M=M.right):(M.left||(M.left=new h),M=M.left),0!==A||M.val||(M.val=x[1]);return{decodeLut:I,numBitsLUTQick:T,numBitsLUT:k,tree:E,stuffedData:b,srcPtr:w,bitPos:v}},readHuffman:function(e,t,r,n){var a,i,o,s,l,f,c,u,h,p=t.headerInfo.numDims,m=t.headerInfo.height,g=t.headerInfo.width,y=g*m,_=this.readHuffmanTree(e,t),b=_.decodeLut,v=_.tree,w=_.stuffedData,k=_.srcPtr,T=_.bitPos,E=_.numBitsLUTQick,x=_.numBitsLUT,S=0===t.headerInfo.imageType?128:0,D=t.pixels.resultMask,A=0;T>0&&(k++,T=0);var M,I=w[k],R=1===t.encodeMode,O=new r(y*p),C=O;if(p<2||R){for(M=0;M<p;M++)if(p>1&&(C=new r(O.buffer,y*M,y),A=0),t.headerInfo.numValidPixel===g*m)for(u=0,f=0;f<m;f++)for(c=0;c<g;c++,u++){if(i=0,l=s=I<<T>>>32-E,32-T<E&&(l=s|=w[k+1]>>>64-T-E),b[l])i=b[l][1],T+=b[l][0];else for(l=s=I<<T>>>32-x,32-T<x&&(l=s|=w[k+1]>>>64-T-x),a=v,h=0;h<x;h++)if(!(a=s>>>x-h-1&1?a.right:a.left).left&&!a.right){i=a.val,T=T+h+1;break}T>=32&&(T-=32,I=w[++k]),o=i-S,R?(o+=c>0?A:f>0?C[u-g]:A,o&=255,C[u]=o,A=o):C[u]=o}else for(u=0,f=0;f<m;f++)for(c=0;c<g;c++,u++)if(D[u]){if(i=0,l=s=I<<T>>>32-E,32-T<E&&(l=s|=w[k+1]>>>64-T-E),b[l])i=b[l][1],T+=b[l][0];else for(l=s=I<<T>>>32-x,32-T<x&&(l=s|=w[k+1]>>>64-T-x),a=v,h=0;h<x;h++)if(!(a=s>>>x-h-1&1?a.right:a.left).left&&!a.right){i=a.val,T=T+h+1;break}T>=32&&(T-=32,I=w[++k]),o=i-S,R?(c>0&&D[u-1]?o+=A:f>0&&D[u-g]?o+=C[u-g]:o+=A,o&=255,C[u]=o,A=o):C[u]=o}}else for(u=0,f=0;f<m;f++)for(c=0;c<g;c++)if(u=f*g+c,!D||D[u])for(M=0;M<p;M++,u+=y){if(i=0,l=s=I<<T>>>32-E,32-T<E&&(l=s|=w[k+1]>>>64-T-E),b[l])i=b[l][1],T+=b[l][0];else for(l=s=I<<T>>>32-x,32-T<x&&(l=s|=w[k+1]>>>64-T-x),a=v,h=0;h<x;h++)if(!(a=s>>>x-h-1&1?a.right:a.left).left&&!a.right){i=a.val,T=T+h+1;break}T>=32&&(T-=32,I=w[++k]),o=i-S,C[u]=o}t.ptr=t.ptr+4*(k+1)+(T>0?4:0),t.pixels.resultPixels=O,p>1&&!n&&(t.pixels.resultPixels=d.swapDimensionOrder(O,y,p,r))},decodeBits:function(e,t,r,n,a){var i=t.headerInfo,d=i.fileVersion,h=0,p=e.byteLength-t.ptr>=5?5:e.byteLength-t.ptr,m=new DataView(e,t.ptr,p),g=m.getUint8(0);h++;var y=g>>6,_=0===y?4:3-y,b=(32&g)>0,v=31&g,w=0;if(1===_)w=m.getUint8(h),h++;else if(2===_)w=m.getUint16(h,!0),h+=2;else{if(4!==_)throw\\\"Invalid valid pixel count type\\\";w=m.getUint32(h,!0),h+=4}var k,T,E,x,S,D,A,M,I,R=2*i.maxZError,O=i.numDims>1?i.maxValues[a]:i.zMax;if(b){for(t.counter.lut++,M=m.getUint8(h),h++,x=Math.ceil((M-1)*v/8),S=Math.ceil(x/4),T=new ArrayBuffer(4*S),E=new Uint8Array(T),t.ptr+=h,E.set(new Uint8Array(e,t.ptr,x)),A=new Uint32Array(T),t.ptr+=x,I=0;M-1>>>I;)I++;x=Math.ceil(w*I/8),S=Math.ceil(x/4),T=new ArrayBuffer(4*S),(E=new Uint8Array(T)).set(new Uint8Array(e,t.ptr,x)),k=new Uint32Array(T),t.ptr+=x,D=d>=3?f(A,v,M-1,n,R,O):s(A,v,M-1,n,R,O),d>=3?l(k,r,I,w,D):o(k,r,I,w,D)}else t.counter.bitstuffer++,I=v,t.ptr+=h,I>0&&(x=Math.ceil(w*I/8),S=Math.ceil(x/4),T=new ArrayBuffer(4*S),(E=new Uint8Array(T)).set(new Uint8Array(e,t.ptr,x)),k=new Uint32Array(T),t.ptr+=x,d>=3?null==n?u(k,r,I,w):l(k,r,I,w,!1,n,R,O):null==n?c(k,r,I,w):o(k,r,I,w,!1,n,R,O))},readTiles:function(e,t,r,n){var a=t.headerInfo,i=a.width,o=a.height,s=i*o,l=a.microBlockSize,f=a.imageType,c=d.getDataTypeSize(f),u=Math.ceil(i/l),h=Math.ceil(o/l);t.pixels.numBlocksY=h,t.pixels.numBlocksX=u,t.pixels.ptr=0;var p,m,g,y,_,b,v,w,k,T,E=0,x=0,S=0,D=0,A=0,M=0,I=0,R=0,O=0,C=0,P=0,L=0,U=0,B=0,$=0,N=new r(l*l),z=o%l||l,Z=i%l||l,G=a.numDims,j=t.pixels.resultMask,V=t.pixels.resultPixels,F=a.fileVersion>=5?14:15,K=a.zMax;for(S=0;S<h;S++)for(A=S!==h-1?l:z,D=0;D<u;D++)for(C=S*i*l+D*l,P=i-(M=D!==u-1?l:Z),w=0;w<G;w++){if(G>1?(T=V,C=S*i*l+D*l,V=new r(t.pixels.resultPixels.buffer,s*w*c,s),K=a.maxValues[w]):T=null,I=e.byteLength-t.ptr,m={},$=0,R=(p=new DataView(e,t.ptr,Math.min(10,I))).getUint8(0),$++,k=a.fileVersion>=5?4&R:0,O=R>>6&255,(R>>2&F)!=(D*l>>3&F))throw\\\"integrity issue\\\";if(k&&0===w)throw\\\"integrity issue\\\";if((_=3&R)>3)throw t.ptr+=$,\\\"Invalid block encoding (\\\"+_+\\\")\\\";if(2!==_)if(0===_){if(k)throw\\\"integrity issue\\\";if(t.counter.uncompressed++,t.ptr+=$,L=(L=A*M*c)<(U=e.byteLength-t.ptr)?L:U,g=new ArrayBuffer(L%c==0?L:L+c-L%c),new Uint8Array(g).set(new Uint8Array(e,t.ptr,L)),y=new r(g),B=0,j)for(E=0;E<A;E++){for(x=0;x<M;x++)j[C]&&(V[C]=y[B++]),C++;C+=P}else for(E=0;E<A;E++){for(x=0;x<M;x++)V[C++]=y[B++];C+=P}t.ptr+=B*c}else if(b=d.getDataTypeUsed(k&&f<6?4:f,O),v=d.getOnePixel(m,$,b,p),$+=d.getDataTypeSize(b),3===_)if(t.ptr+=$,t.counter.constantoffset++,j)for(E=0;E<A;E++){for(x=0;x<M;x++)j[C]&&(V[C]=k?Math.min(K,T[C]+v):v),C++;C+=P}else for(E=0;E<A;E++){for(x=0;x<M;x++)V[C]=k?Math.min(K,T[C]+v):v,C++;C+=P}else if(t.ptr+=$,d.decodeBits(e,t,N,v,w),$=0,k)if(j)for(E=0;E<A;E++){for(x=0;x<M;x++)j[C]&&(V[C]=N[$++]+T[C]),C++;C+=P}else for(E=0;E<A;E++){for(x=0;x<M;x++)V[C]=N[$++]+T[C],C++;C+=P}else if(j)for(E=0;E<A;E++){for(x=0;x<M;x++)j[C]&&(V[C]=N[$++]),C++;C+=P}else for(E=0;E<A;E++){for(x=0;x<M;x++)V[C++]=N[$++];C+=P}else{if(k)if(j)for(E=0;E<A;E++)for(x=0;x<M;x++)j[C]&&(V[C]=T[C]),C++;else for(E=0;E<A;E++)for(x=0;x<M;x++)V[C]=T[C],C++;t.counter.constant++,t.ptr+=$}}G>1&&!n&&(t.pixels.resultPixels=d.swapDimensionOrder(t.pixels.resultPixels,s,G,r))},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:d.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e,t){var r=e.headerInfo.zMax,n=e.headerInfo.zMin,a=e.headerInfo.maxValues,i=e.headerInfo.numDims,o=e.headerInfo.height*e.headerInfo.width,s=0,l=0,f=0,c=e.pixels.resultMask,u=e.pixels.resultPixels;if(c)if(i>1){if(t)for(s=0;s<i;s++)for(f=s*o,r=a[s],l=0;l<o;l++)c[l]&&(u[f+l]=r);else for(l=0;l<o;l++)if(c[l])for(f=l*i,s=0;s<i;s++)u[f+i]=a[s]}else for(l=0;l<o;l++)c[l]&&(u[l]=r);else if(i>1&&n!==r)if(t)for(s=0;s<i;s++)for(f=s*o,r=a[s],l=0;l<o;l++)u[f+l]=r;else for(l=0;l<o;l++)for(f=l*i,s=0;s<i;s++)u[f+s]=a[s];else for(l=0;l<o*i;l++)u[l]=r},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:t=Float32Array;break;case 7:t=Float64Array;break;default:t=Float32Array}return t},getPixelType:function(e){var t;switch(e){case 0:t=\\\"S8\\\";break;case 1:t=\\\"U8\\\";break;case 2:t=\\\"S16\\\";break;case 3:t=\\\"U16\\\";break;case 4:t=\\\"S32\\\";break;case 5:t=\\\"U32\\\";break;case 6:t=\\\"F32\\\";break;case 7:t=\\\"F64\\\";break;default:t=\\\"F32\\\"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var r;switch(e){case 0:r=t>=-128&&t<=127;break;case 1:r=t>=0&&t<=255;break;case 2:r=t>=-32768&&t<=32767;break;case 3:r=t>=0&&t<=65536;break;case 4:r=t>=-2147483648&&t<=2147483647;break;case 5:r=t>=0&&t<=4294967296;break;case 6:r=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:r=t>=-17976931348623157e292&&t<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=0===t?e:1===t?2:1;break;case 7:r=0===t?e:e-2*t+1;break;default:r=e}return r},getOnePixel:function(e,t,r,n){var a=0;switch(r){case 0:a=n.getInt8(t);break;case 1:a=n.getUint8(t);break;case 2:a=n.getInt16(t,!0);break;case 3:a=n.getUint16(t,!0);break;case 4:a=n.getInt32(t,!0);break;case 5:a=n.getUInt32(t,!0);break;case 6:a=n.getFloat32(t,!0);break;case 7:a=n.getFloat64(t,!0);break;default:throw\\\"the decoder does not understand this pixel type\\\"}return a},swapDimensionOrder:function(e,t,r,n,a){var i=0,o=0,s=0,l=0,f=e;if(r>1)if(f=new n(t*r),a)for(i=0;i<t;i++)for(l=i,s=0;s<r;s++,l+=t)f[l]=e[o++];else for(i=0;i<t;i++)for(l=i,s=0;s<r;s++,l+=t)f[o++]=e[l];return f}},h=function(e,t,r){this.val=e,this.left=t,this.right=r},{decode:function(e,t){var r=(t=t||{}).noDataValue,n=0,a={};a.ptr=t.inputOffset||0,a.pixels={},d.readHeaderInfo(e,a);var i=a.headerInfo,o=i.fileVersion,s=d.getDataTypeArray(i.imageType);if(o>5)throw\\\"unsupported lerc version 2.\\\"+o;d.readMask(e,a),i.numValidPixel===i.width*i.height||a.pixels.resultMask||(a.pixels.resultMask=t.maskData);var l=i.width*i.height;a.pixels.resultPixels=new s(l*i.numDims),a.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var f,c=!t.returnPixelInterleavedDims;if(0!==i.numValidPixel)if(i.zMax===i.zMin)d.constructConstantSurface(a,c);else if(o>=4&&d.checkMinMaxRanges(e,a))d.constructConstantSurface(a,c);else{var u=new DataView(e,a.ptr,2),h=u.getUint8(0);if(a.ptr++,h)d.readDataOneSweep(e,a,s,c);else if(o>1&&i.imageType<=1&&Math.abs(i.maxZError-.5)<1e-5){var p=u.getUint8(1);if(a.ptr++,a.encodeMode=p,p>2||o<4&&p>1)throw\\\"Invalid Huffman flag \\\"+p;p?d.readHuffman(e,a,s,c):d.readTiles(e,a,s,c)}else d.readTiles(e,a,s,c)}a.eofOffset=a.ptr,t.inputOffset?(f=a.headerInfo.blobSize+t.inputOffset-a.ptr,Math.abs(f)>=1&&(a.eofOffset=t.inputOffset+a.headerInfo.blobSize)):(f=a.headerInfo.blobSize-a.ptr,Math.abs(f)>=1&&(a.eofOffset=a.headerInfo.blobSize));var m={width:i.width,height:i.height,pixelData:a.pixels.resultPixels,minValue:i.zMin,maxValue:i.zMax,validPixelCount:i.numValidPixel,dimCount:i.numDims,dimStats:{minValues:i.minValues,maxValues:i.maxValues},maskData:a.pixels.resultMask};if(a.pixels.resultMask&&d.isValidPixelValue(i.imageType,r)){var g=a.pixels.resultMask;for(n=0;n<l;n++)g[n]||(m.pixelData[n]=r);m.noDataValue=r}return a.noDataValue=r,t.returnFileInfo&&(m.fileInfo=d.formatFileInfo(a)),m},getBandCount:function(e){for(var t=0,r=0,n={ptr:0,pixels:{}};r<e.byteLength-58;)d.readHeaderInfo(e,n),r+=n.headerInfo.blobSize,t++,n.ptr=r;return t}}),_=(p=new ArrayBuffer(4),m=new Uint8Array(p),new Uint32Array(p)[0]=1,1===m[0]),b={decode:function(e,t){if(!_)throw\\\"Big endian system is not supported.\\\";var r,n,a=(t=t||{}).inputOffset||0,i=new Uint8Array(e,a,10),o=String.fromCharCode.apply(null,i);if(\\\"CntZImage\\\"===o.trim())r=g,n=1;else{if(\\\"Lerc2\\\"!==o.substring(0,5))throw\\\"Unexpected file identifier string: \\\"+o;r=y,n=2}for(var s,l,f,c,u,d,h=0,p=e.byteLength-10,m=[],b={width:0,height:0,pixels:[],pixelType:t.pixelType,mask:null,statistics:[]},v=0;a<p;){var w=r.decode(e,{inputOffset:a,encodedMaskData:s,maskData:f,returnMask:0===h,returnEncodedMask:0===h,returnFileInfo:!0,returnPixelInterleavedDims:t.returnPixelInterleavedDims,pixelType:t.pixelType||null,noDataValue:t.noDataValue||null});a=w.fileInfo.eofOffset,f=w.maskData,0===h&&(s=w.encodedMaskData,b.width=w.width,b.height=w.height,b.dimCount=w.dimCount||1,b.pixelType=w.pixelType||w.fileInfo.pixelType,b.mask=f),n>1&&(f&&m.push(f),w.fileInfo.mask&&w.fileInfo.mask.numBytes>0&&v++),h++,b.pixels.push(w.pixelData),b.statistics.push({minValue:w.minValue,maxValue:w.maxValue,noDataValue:w.noDataValue,dimStats:w.dimStats})}if(n>1&&v>1){for(d=b.width*b.height,b.bandMasks=m,(f=new Uint8Array(d)).set(m[0]),c=1;c<m.length;c++)for(l=m[c],u=0;u<d;u++)f[u]=f[u]&l[u];b.maskData=f}return b}};module.exports?module.exports=b:this.Lerc=b}();var Lerc=LercDecode.exports,fieldTagNames={315:\\\"Artist\\\",258:\\\"BitsPerSample\\\",265:\\\"CellLength\\\",264:\\\"CellWidth\\\",320:\\\"ColorMap\\\",259:\\\"Compression\\\",33432:\\\"Copyright\\\",306:\\\"DateTime\\\",338:\\\"ExtraSamples\\\",266:\\\"FillOrder\\\",289:\\\"FreeByteCounts\\\",288:\\\"FreeOffsets\\\",291:\\\"GrayResponseCurve\\\",290:\\\"GrayResponseUnit\\\",316:\\\"HostComputer\\\",270:\\\"ImageDescription\\\",257:\\\"ImageLength\\\",256:\\\"ImageWidth\\\",271:\\\"Make\\\",281:\\\"MaxSampleValue\\\",280:\\\"MinSampleValue\\\",272:\\\"Model\\\",254:\\\"NewSubfileType\\\",274:\\\"Orientation\\\",262:\\\"PhotometricInterpretation\\\",284:\\\"PlanarConfiguration\\\",296:\\\"ResolutionUnit\\\",278:\\\"RowsPerStrip\\\",277:\\\"SamplesPerPixel\\\",305:\\\"Software\\\",279:\\\"StripByteCounts\\\",273:\\\"StripOffsets\\\",255:\\\"SubfileType\\\",263:\\\"Threshholding\\\",282:\\\"XResolution\\\",283:\\\"YResolution\\\",326:\\\"BadFaxLines\\\",327:\\\"CleanFaxData\\\",343:\\\"ClipPath\\\",328:\\\"ConsecutiveBadFaxLines\\\",433:\\\"Decode\\\",434:\\\"DefaultImageColor\\\",269:\\\"DocumentName\\\",336:\\\"DotRange\\\",321:\\\"HalftoneHints\\\",346:\\\"Indexed\\\",347:\\\"JPEGTables\\\",285:\\\"PageName\\\",297:\\\"PageNumber\\\",317:\\\"Predictor\\\",319:\\\"PrimaryChromaticities\\\",532:\\\"ReferenceBlackWhite\\\",339:\\\"SampleFormat\\\",340:\\\"SMinSampleValue\\\",341:\\\"SMaxSampleValue\\\",559:\\\"StripRowCounts\\\",330:\\\"SubIFDs\\\",292:\\\"T4Options\\\",293:\\\"T6Options\\\",325:\\\"TileByteCounts\\\",323:\\\"TileLength\\\",324:\\\"TileOffsets\\\",322:\\\"TileWidth\\\",301:\\\"TransferFunction\\\",318:\\\"WhitePoint\\\",344:\\\"XClipPathUnits\\\",286:\\\"XPosition\\\",529:\\\"YCbCrCoefficients\\\",531:\\\"YCbCrPositioning\\\",530:\\\"YCbCrSubSampling\\\",345:\\\"YClipPathUnits\\\",287:\\\"YPosition\\\",37378:\\\"ApertureValue\\\",40961:\\\"ColorSpace\\\",36868:\\\"DateTimeDigitized\\\",36867:\\\"DateTimeOriginal\\\",34665:\\\"Exif IFD\\\",36864:\\\"ExifVersion\\\",33434:\\\"ExposureTime\\\",41728:\\\"FileSource\\\",37385:\\\"Flash\\\",40960:\\\"FlashpixVersion\\\",33437:\\\"FNumber\\\",42016:\\\"ImageUniqueID\\\",37384:\\\"LightSource\\\",37500:\\\"MakerNote\\\",37377:\\\"ShutterSpeedValue\\\",37510:\\\"UserComment\\\",33723:\\\"IPTC\\\",34675:\\\"ICC Profile\\\",700:\\\"XMP\\\",42112:\\\"GDAL_METADATA\\\",42113:\\\"GDAL_NODATA\\\",34377:\\\"Photoshop\\\",33550:\\\"ModelPixelScale\\\",33922:\\\"ModelTiepoint\\\",34264:\\\"ModelTransformation\\\",34735:\\\"GeoKeyDirectory\\\",34736:\\\"GeoDoubleParams\\\",34737:\\\"GeoAsciiParams\\\",50674:\\\"LercParameters\\\"},fieldTags={};for(var key in fieldTagNames)fieldTagNames.hasOwnProperty(key)&&(fieldTags[fieldTagNames[key]]=parseInt(key,10));fieldTags.BitsPerSample,fieldTags.ExtraSamples,fieldTags.SampleFormat,fieldTags.StripByteCounts,fieldTags.StripOffsets,fieldTags.StripRowCounts,fieldTags.TileByteCounts,fieldTags.TileOffsets,fieldTags.SubIFDs;var fieldTypeNames={1:\\\"BYTE\\\",2:\\\"ASCII\\\",3:\\\"SHORT\\\",4:\\\"LONG\\\",5:\\\"RATIONAL\\\",6:\\\"SBYTE\\\",7:\\\"UNDEFINED\\\",8:\\\"SSHORT\\\",9:\\\"SLONG\\\",10:\\\"SRATIONAL\\\",11:\\\"FLOAT\\\",12:\\\"DOUBLE\\\",13:\\\"IFD\\\",16:\\\"LONG8\\\",17:\\\"SLONG8\\\",18:\\\"IFD8\\\"},fieldTypes={};for(var _key in fieldTypeNames)fieldTypeNames.hasOwnProperty(_key)&&(fieldTypes[fieldTypeNames[_key]]=parseInt(_key,10));var LercParameters={Version:0,AddCompression:1},LercAddCompression={None:0,Deflate:1},geoKeyNames={1024:\\\"GTModelTypeGeoKey\\\",1025:\\\"GTRasterTypeGeoKey\\\",1026:\\\"GTCitationGeoKey\\\",2048:\\\"GeographicTypeGeoKey\\\",2049:\\\"GeogCitationGeoKey\\\",2050:\\\"GeogGeodeticDatumGeoKey\\\",2051:\\\"GeogPrimeMeridianGeoKey\\\",2052:\\\"GeogLinearUnitsGeoKey\\\",2053:\\\"GeogLinearUnitSizeGeoKey\\\",2054:\\\"GeogAngularUnitsGeoKey\\\",2055:\\\"GeogAngularUnitSizeGeoKey\\\",2056:\\\"GeogEllipsoidGeoKey\\\",2057:\\\"GeogSemiMajorAxisGeoKey\\\",2058:\\\"GeogSemiMinorAxisGeoKey\\\",2059:\\\"GeogInvFlatteningGeoKey\\\",2060:\\\"GeogAzimuthUnitsGeoKey\\\",2061:\\\"GeogPrimeMeridianLongGeoKey\\\",2062:\\\"GeogTOWGS84GeoKey\\\",3072:\\\"ProjectedCSTypeGeoKey\\\",3073:\\\"PCSCitationGeoKey\\\",3074:\\\"ProjectionGeoKey\\\",3075:\\\"ProjCoordTransGeoKey\\\",3076:\\\"ProjLinearUnitsGeoKey\\\",3077:\\\"ProjLinearUnitSizeGeoKey\\\",3078:\\\"ProjStdParallel1GeoKey\\\",3079:\\\"ProjStdParallel2GeoKey\\\",3080:\\\"ProjNatOriginLongGeoKey\\\",3081:\\\"ProjNatOriginLatGeoKey\\\",3082:\\\"ProjFalseEastingGeoKey\\\",3083:\\\"ProjFalseNorthingGeoKey\\\",3084:\\\"ProjFalseOriginLongGeoKey\\\",3085:\\\"ProjFalseOriginLatGeoKey\\\",3086:\\\"ProjFalseOriginEastingGeoKey\\\",3087:\\\"ProjFalseOriginNorthingGeoKey\\\",3088:\\\"ProjCenterLongGeoKey\\\",3089:\\\"ProjCenterLatGeoKey\\\",3090:\\\"ProjCenterEastingGeoKey\\\",3091:\\\"ProjCenterNorthingGeoKey\\\",3092:\\\"ProjScaleAtNatOriginGeoKey\\\",3093:\\\"ProjScaleAtCenterGeoKey\\\",3094:\\\"ProjAzimuthAngleGeoKey\\\",3095:\\\"ProjStraightVertPoleLongGeoKey\\\",3096:\\\"ProjRectifiedGridAngleGeoKey\\\",4096:\\\"VerticalCSTypeGeoKey\\\",4097:\\\"VerticalCitationGeoKey\\\",4098:\\\"VerticalDatumGeoKey\\\",4099:\\\"VerticalUnitsGeoKey\\\"},geoKeys={};for(var _key2 in geoKeyNames)geoKeyNames.hasOwnProperty(_key2)&&(geoKeys[geoKeyNames[_key2]]=parseInt(_key2,10));var LercDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).planarConfiguration=void 0!==e.PlanarConfiguration?e.PlanarConfiguration:1,n.samplesPerPixel=void 0!==e.SamplesPerPixel?e.SamplesPerPixel:1,n.addCompression=e.LercParameters[LercParameters.AddCompression],n}return _createClass(r,[{key:\\\"decodeBlock\\\",value:function(e){switch(this.addCompression){case LercAddCompression.None:break;case LercAddCompression.Deflate:e=inflate_1(new Uint8Array(e)).buffer;break;default:throw new Error(\\\"Unsupported LERC additional compression method identifier: \\\".concat(this.addCompression))}return Lerc.decode(e,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}]),r}(),lerc=Object.freeze({__proto__:null,default:LercDecoder});\";\n  var blob = new Blob([source], {\n    type: 'application/javascript'\n  });\n  var url = URL.createObjectURL(blob);\n  return new Worker(url);\n}","import * as React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport {\n  useForm,\n  useFieldArray,\n  SubmitHandler,\n  Controller,\n} from \"react-hook-form\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport {\n  Container,\n  Typography,\n  Stack,\n  Grid,\n  TextField,\n  Button,\n  IconButton,\n  RadioGroup,\n  Radio,\n  Tooltip,\n  FormControl,\n  FormControlLabel,\n  FormHelperText,\n} from \"@mui/material\";\nimport { styled } from \"@mui/system\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\n\nimport { Map } from \"ol\";\nimport { toSize } from \"ol/size\";\nimport ImageTile from \"ol/ImageTile\";\nimport Tile from \"ol/Tile\";\nimport { WebGLTile } from \"ol/layer\";\nimport { XYZ } from \"ol/source\";\nimport TileState from \"ol/TileState\";\nimport SourceState from \"ol/source/State\";\nimport { get as getProjection, Projection, transformExtent } from \"ol/proj\";\nimport MousePosition from \"ol/control/MousePosition\";\nimport { register as olRegister } from \"ol/proj/proj4\";\nimport proj4 from \"proj4\";\nimport { utils } from \"geo4326\";\nimport { useOl } from \"~/hooks/useOl\";\nimport { useDnDSort } from \"~/hooks/useDnDSort\";\n\nimport * as CustomGeoTIFFSource from \"~/scripts/CustomGeoTIFFSource\";\n\nconst EllipsisWrapper = styled(\"div\")({\n  overflow: \"hidden\",\n});\n\nconst EllipsisTypography = styled(Typography)({\n  overflow: \"hidden\",\n  whiteSpace: \"nowrap\",\n  textOverflow: \"ellipsis\",\n});\n\nconst LayerName = styled(EllipsisWrapper)({\n  flex: \"1 1 auto\",\n});\n\nconst LayerButton = styled(\"div\")({\n  flex: \"0 0 auto\",\n});\n\nconst StyledUl = styled(\"ul\")({\n  listStyle: \"none\",\n  margin: 0,\n  padding: 0,\n  \"& > li\": {\n    marginTop: \"5px\",\n    \"&:firstChild\": {\n      marginTop: 0,\n    },\n  },\n});\n\ntype Input = {\n  sources: {\n    type: string;\n    url: string;\n    geotiff: FileList | string;\n    bands: string;\n    nodata: string;\n    min: string;\n    max: string;\n  }[];\n};\n\ntype SourceConfBase = {\n  nodata: number;\n  bands: number[];\n  min: number;\n  max: number;\n};\n\ntype SourceConf = {\n  blob?: File;\n  url?: string;\n} & SourceConfBase;\n\ntype SubmitProps = {\n  id: string;\n  sources: SourceConf[];\n};\n\ntype FormError =\n  | \"FailedLoadSource\"\n  | \"Duplicate\"\n  | \"UnmatchBands\"\n  | \"NotFoundCrs\"\n  | \"UnsupportedCrs\";\ntype LayerError = \"FailedLoadTile\";\ntype LayerConf = {\n  layer: WebGLTile;\n  error: LayerError | null;\n} & SubmitProps;\n\nconst defaultSourcesValue = {\n  type: \"file\",\n  url: \"\",\n  geotiff: \"\",\n  bands: \"1,2,3\",\n  nodata: \"0\",\n  min: \"0\",\n  max: \"255\",\n};\n\nconst Coordinates = styled(\"div\")({\n  position: \"absolute\",\n  top: 0,\n  left: 0,\n  padding: \"2px 4px\",\n  fontSize: 10,\n  pointerEvents: \"none\",\n});\n\nconst Viewer = (): React.ReactElement => {\n  const ol = useOl();\n  const wrapperRef = React.useRef<HTMLDivElement | null>(null);\n  const positionRef = React.useRef<HTMLDivElement | null>(null);\n  const [layerConfs, setLayerConfs] = React.useState<LayerConf[]>([]);\n  const [error, setError] = React.useState<FormError | null>(null);\n  const [loading, setLoading] = React.useState<boolean>();\n\n  const layerList = useDnDSort<number>({\n    defaultItems: [],\n    mode: \"topbottom\",\n    drop: (dragIndex, hoverIndex) => {\n      if (dragIndex !== hoverIndex)\n        setLayerConfs(prevList => {\n          if (\n            hoverIndex < 0 ||\n            dragIndex < 0 ||\n            dragIndex > prevList.length - 1 ||\n            hoverIndex > prevList.length - 1\n          ) {\n            return prevList;\n          }\n\n          const nextList = [...prevList];\n          const target = nextList[dragIndex];\n          nextList.splice(dragIndex, 1);\n          nextList.splice(hoverIndex, 0, target);\n          return nextList;\n        });\n    },\n  });\n\n  const {\n    control,\n    handleSubmit,\n    register,\n    watch,\n    reset,\n    setValue,\n    formState: { errors },\n  } = useForm<Input>({\n    mode: \"onSubmit\",\n    criteriaMode: \"all\",\n    defaultValues: {\n      sources: [defaultSourcesValue],\n    },\n  });\n\n  const { fields, append, remove } = useFieldArray({\n    name: \"sources\",\n    control,\n  });\n  const watcher = watch(\"sources\");\n\n  const removeLayer = React.useCallback(\n    (id: string) => {\n      setLayerConfs(layerConfs => {\n        const newLayerConfs = [...layerConfs];\n        const index = newLayerConfs.findIndex(layerConf => {\n          return id === layerConf.id;\n        });\n        const target = newLayerConfs[index];\n        if (ol.map && target) {\n          ol.map.removeLayer(target.layer);\n\n          newLayerConfs.splice(index, 1);\n          return newLayerConfs;\n        }\n        return newLayerConfs;\n      });\n    },\n    [ol.map]\n  );\n  const setLayerError = React.useCallback(\n    (id: string, errorType: LayerError) => {\n      setLayerConfs(layerConfs => {\n        const newLayerConfs = [...layerConfs];\n        const index = newLayerConfs.findIndex(layerConf => {\n          return id === layerConf.id;\n        });\n        const target = newLayerConfs[index];\n        if (target && target.error !== errorType) {\n          target.error = errorType;\n          return newLayerConfs;\n        }\n        return layerConfs;\n      });\n    },\n    []\n  );\n\n  const resetList = layerList.reset;\n  React.useEffect(() => {\n    let zIndex = 0;\n    layerConfs.forEach(({ layer }) => {\n      layer.setZIndex(zIndex++);\n    });\n\n    resetList(Array.from({ length: layerConfs.length }, (_, k) => k));\n  }, [layerConfs, resetList]);\n\n  const setLayer = React.useCallback(\n    async (\n      map: Map,\n      source: CustomGeoTIFFSource.default,\n      id: string,\n      sources: SourceConf[]\n    ) => {\n      /*\n        refer to https://github.com/openlayers/openlayers/issues/13197\n      */\n      const sourceView = await source.getView();\n      const sourceProjection = sourceView?.projection;\n      if (!(sourceProjection instanceof Projection)) {\n        setError(\"NotFoundCrs\");\n        return;\n      }\n      const code = sourceProjection.getCode();\n\n      if (!getProjection(code)) {\n        try {\n          const crs = utils.getCrs(code);\n          proj4.defs(code, crs);\n        } catch {\n          setError(\"UnsupportedCrs\");\n          return;\n        }\n        olRegister(proj4);\n      }\n      const tileGrid = source.getTileGrid();\n      const imageSource = new XYZ({\n        tileGrid: tileGrid,\n        url: \"{z},{x},{y}\",\n        interpolate: false,\n        tileLoadFunction: function (imageTile: Tile, coordString: string) {\n          const coord = coordString.split(\",\").map(Number);\n          const tile = source.getTile(\n            coord[0],\n            coord[1],\n            coord[2],\n            1,\n            sourceProjection\n          );\n\n          const setImage = function () {\n            const tilesize = toSize(tileGrid.getTileSize(coord[0]));\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = tilesize[0];\n            canvas.height = tilesize[1];\n            const context = canvas.getContext(\"2d\");\n            if (!context) return;\n            const imgData = context.getImageData(\n              0,\n              0,\n              canvas.width,\n              canvas.height\n            );\n\n            const pixels = imgData.data;\n            const data = tile.getData();\n            if (data instanceof DataView) return;\n            const l = data.length;\n            for (let i = 0; i < l; i++) {\n              pixels[i] = data[i];\n            }\n            context.putImageData(imgData, 0, 0);\n            ((imageTile as ImageTile).getImage() as HTMLImageElement).src =\n              canvas.toDataURL();\n          };\n\n          const tileState = tile.getState();\n          if (tileState === TileState.LOADED) {\n            setImage();\n          } else {\n            const tileListener = () => {\n              const tileState = tile.getState();\n              if (tileState !== TileState.LOADING) {\n                tile.removeEventListener(\"change\", tileListener);\n\n                if (tileState === TileState.LOADED) {\n                  setImage();\n                }\n                if (tileState === TileState.ERROR) {\n                  setLayerError(id, \"FailedLoadTile\");\n                }\n              }\n            };\n            tile.addEventListener(\"change\", tileListener);\n            tile.load();\n          }\n        },\n        projection: sourceProjection,\n      });\n\n      const layer = new WebGLTile({\n        source: imageSource,\n      });\n      map.addLayer(layer);\n      setLayerConfs(layerConfs => {\n        return [\n          ...layerConfs,\n          {\n            id,\n            layer,\n            sources,\n            error: null,\n          },\n        ];\n      });\n\n      const originExtent = sourceView.extent;\n      if (originExtent) {\n        const transformed = transformExtent(originExtent, code, \"EPSG:3857\");\n\n        if (transformed[0] > transformed[2])\n          transformed[2] += proj4(\"EPSG:4326\", \"EPSG:3857\", [180, 0])[0] * 2;\n\n        map.getView().fit(transformed, {\n          padding: [40, 20, 40, 20],\n          maxZoom: 20,\n        });\n      }\n    },\n    [setLayerError]\n  );\n\n  const load = React.useCallback(\n    ({ sources, id }: SubmitProps) => {\n      setLoading(true);\n      const source = new CustomGeoTIFFSource.default({\n        sources: sources as CustomGeoTIFFSource.SourceInfo[],\n      });\n\n      const sourceState = source.getState();\n      if (sourceState === SourceState.READY) {\n        if (ol.map) setLayer(ol.map, source, id, sources);\n        setLoading(false);\n      } else {\n        const sourceListener = () => {\n          const sourceState = source.getState();\n          if (sourceState === SourceState.ERROR) {\n            source.removeEventListener(\"change\", sourceListener);\n            setError(\"FailedLoadSource\");\n            setLoading(false);\n          }\n          if (sourceState === SourceState.READY) {\n            source.removeEventListener(\"change\", sourceListener);\n            if (ol.map) setLayer(ol.map, source, id, sources);\n            setLoading(false);\n          }\n        };\n        source.addEventListener(\"change\", sourceListener);\n      }\n    },\n    [ol.map, setLayer]\n  );\n\n  const onSubmit: SubmitHandler<Input> = React.useCallback(\n    data => {\n      let id = \"\";\n      let bandLength = 0;\n      const sources: SourceConf[] = [];\n      for (let i = 0; i < data.sources.length; i++) {\n        const source = data.sources[i];\n        const bands = source.bands.split(\",\").map(v => {\n          return parseInt(v, 10);\n        });\n        bandLength += bands.length;\n\n        const min = parseFloat(source.min);\n        const max = parseFloat(source.max);\n        const nodata = parseFloat(source.nodata);\n\n        let addedId = \"\";\n        switch (source.type) {\n          case \"file\": {\n            if (!(source.geotiff instanceof FileList)) break;\n\n            const file = source.geotiff[0];\n            addedId += file.name;\n            sources.push({\n              blob: file,\n              bands,\n              min,\n              max,\n              nodata,\n            });\n            break;\n          }\n          case \"url\": {\n            const url = source.url;\n            addedId += url;\n            sources.push({\n              url,\n              bands,\n              min,\n              max,\n              nodata,\n            });\n            break;\n          }\n        }\n        if (addedId.length > 0) {\n          id +=\n            addedId +\n            \"_\" +\n            bands.join(\"\") +\n            \"_\" +\n            source.min +\n            \"_\" +\n            source.max +\n            \"_\" +\n            source.nodata;\n        }\n      }\n\n      if (sources.length === 1 && bandLength === 1) {\n        const band = sources[0].bands[0];\n        sources[0].bands = [band, band, band];\n      } else if (bandLength !== 3) {\n        setError(\"UnmatchBands\");\n        return;\n      }\n      const index = layerConfs.findIndex(layerConf => {\n        return id === layerConf.id;\n      });\n      if (index >= 0) {\n        setError(\"Duplicate\");\n        return;\n      }\n      load({\n        id,\n        sources,\n      });\n    },\n    [load, layerConfs]\n  );\n\n  React.useEffect(() => {\n    if (loading === false) {\n      reset();\n    }\n  }, [loading, reset]);\n\n  const sample1 = React.useCallback(() => {\n    setValue(\"sources\", [\n      {\n        type: \"url\",\n        geotiff: \"\",\n        url: \"https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/2020/S2A_36QWD_20200701_0_L2A/TCI.tif\",\n        bands: \"1,2,3\",\n        nodata: \"0\",\n        min: \"0\",\n        max: \"255\",\n      },\n    ]);\n    setError(null);\n  }, [setValue, setError]);\n\n  const sample2 = React.useCallback(() => {\n    setValue(\"sources\", [\n      {\n        type: \"url\",\n        geotiff: \"\",\n        url: \"https://landsat-pds.s3.amazonaws.com/c1/L8/139/045/LC08_L1TP_139045_20170304_20170316_01_T1/LC08_L1TP_139045_20170304_20170316_01_T1_B4.TIF\",\n        bands: \"1\",\n        nodata: \"0\",\n        min: \"1\",\n        max: \"15978\",\n      },\n      {\n        type: \"url\",\n        geotiff: \"\",\n        url: \"https://landsat-pds.s3.amazonaws.com/c1/L8/139/045/LC08_L1TP_139045_20170304_20170316_01_T1/LC08_L1TP_139045_20170304_20170316_01_T1_B3.TIF\",\n        bands: \"1\",\n        nodata: \"0\",\n        min: \"1\",\n        max: \"15239\",\n      },\n      {\n        type: \"url\",\n        geotiff: \"\",\n        url: \"https://landsat-pds.s3.amazonaws.com/c1/L8/139/045/LC08_L1TP_139045_20170304_20170316_01_T1/LC08_L1TP_139045_20170304_20170316_01_T1_B2.TIF\",\n        bands: \"1\",\n        nodata: \"0\",\n        min: \"1\",\n        max: \"14947\",\n      },\n    ]);\n    setError(null);\n  }, [setValue, setError]);\n\n  React.useEffect(() => {\n    let mousePositionControl: MousePosition | null = null;\n\n    if (ol.map && positionRef.current) {\n      mousePositionControl = new MousePosition({\n        coordinateFormat: coords => {\n          if (coords)\n            return `lon: ${coords[0].toFixed(4)}, lat: ${coords[1].toFixed(4)}`;\n          return \"\";\n        },\n        projection: \"EPSG:4326\",\n        className: \"\",\n        target: positionRef.current,\n      });\n      ol.map.addControl(mousePositionControl);\n    }\n    return () => {\n      if (ol.map && mousePositionControl) {\n        ol.map.removeControl(mousePositionControl);\n      }\n    };\n  }, [ol.map]);\n\n  return (\n    <>\n      <CssBaseline />\n      <Helmet>\n        <title>Display GeoTIFF</title>\n        <meta name=\"description\" content=\"Display GeoTIFF on map.\" />\n        <link\n          rel=\"canonical\"\n          href=\"https://yonda-yonda.github.io/exmap/geotiff\"\n        />\n        <link\n          rel=\"icon\"\n          type=\"image/x-icon\"\n          href=\"https://github.githubassets.com/favicon.ico\"\n        />\n        <link\n          rel=\"stylesheet\"\n          href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap\"\n        />\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:title\" content=\"Display GeoTIFF\" />\n        <meta name=\"twitter:description\" content=\"GeoTIFF\" />\n        <meta\n          property=\"og:url\"\n          content=\"https://yonda-yonda.github.io/exmap/geotiff\"\n        />\n        <meta\n          name=\"twitter:image\"\n          content=\"https://yonda-yonda.github.io/exmap/image/twitter_geotiff.png\"\n        />\n      </Helmet>\n      <Container>\n        <Typography variant=\"h2\" component=\"h1\">\n          Display GeoTIFF\n        </Typography>\n        <Stack my={4} spacing={4}>\n          <div>\n            <Grid container spacing={2}>\n              <Grid item xs={9}>\n                <div style={{ position: \"relative\" }} ref={wrapperRef}>\n                  <div\n                    ref={ol.ref}\n                    style={{\n                      width: \"100%\",\n                      height: \"340px\",\n                    }}\n                  />\n                  <Coordinates ref={positionRef}></Coordinates>\n                </div>\n              </Grid>\n              <Grid item xs={3}>\n                {layerConfs.length > 0 ? (\n                  <StyledUl>\n                    {layerList.items.map(item => {\n                      const layerConf = layerConfs[item.value];\n                      return (\n                        layerConf && (\n                          <li\n                            key={layerConf.id}\n                            ref={item.ref}\n                            {...item.events}\n                          >\n                            <Stack\n                              direction=\"row\"\n                              spacing={1}\n                              justifyContent=\"space-between\"\n                              alignItems=\"center\"\n                            >\n                              <LayerName>\n                                {layerConf.sources.map((source, i) => {\n                                  let name = \"\";\n                                  if (source.blob) name += source.blob.name;\n                                  if (source.url)\n                                    name += source.url.split(\"/\").pop();\n\n                                  return (\n                                    <Tooltip\n                                      key={i}\n                                      title={\n                                        <Typography\n                                          variant=\"caption\"\n                                          display=\"block\"\n                                        >\n                                          {name}\n                                          <br />\n                                          bands: {source.bands.join(\",\")}\n                                          <br />\n                                          range:{\" \"}\n                                          {`${source.min} to ${source.max}`}\n                                          <br />\n                                          nodata: {source.nodata}\n                                        </Typography>\n                                      }\n                                      arrow\n                                      placement=\"left\"\n                                    >\n                                      <EllipsisTypography variant=\"body2\">\n                                        {name}\n                                      </EllipsisTypography>\n                                    </Tooltip>\n                                  );\n                                })}\n                                {layerConf.error === \"FailedLoadTile\" && (\n                                  <Typography variant=\"caption\" display=\"block\">\n                                    Failed to load tiles. <br />\n                                    \n                                  </Typography>\n                                )}\n                              </LayerName>\n                              <LayerButton>\n                                <Button\n                                  size=\"small\"\n                                  variant=\"outlined\"\n                                  onClick={() => {\n                                    removeLayer(layerConf.id);\n                                  }}\n                                >\n                                  REMOVE\n                                </Button>\n                              </LayerButton>\n                            </Stack>\n                          </li>\n                        )\n                      );\n                    })}\n                  </StyledUl>\n                ) : (\n                  <Typography>Nothing to display.</Typography>\n                )}\n              </Grid>\n            </Grid>\n          </div>\n          <div>\n            <form onSubmit={handleSubmit(onSubmit)}>\n              <Stack spacing={2}>\n                <div>\n                  <Button\n                    variant=\"outlined\"\n                    onClick={sample1}\n                    size=\"small\"\n                    sx={{ mr: 1 }}\n                  >\n                    sample 1\n                  </Button>\n                  <Button variant=\"outlined\" onClick={sample2} size=\"small\">\n                    sample 2\n                  </Button>\n                </div>\n                {fields.map((field, index) => {\n                  return (\n                    <div key={field.id}>\n                      <Controller\n                        control={control}\n                        name={`sources.${index}.type`}\n                        render={({ field }) => (\n                          <FormControl fullWidth>\n                            <RadioGroup row {...field}>\n                              <FormControlLabel\n                                value=\"file\"\n                                control={<Radio size=\"small\" />}\n                                label=\"Local File\"\n                              />\n                              <FormControlLabel\n                                value=\"url\"\n                                control={<Radio size=\"small\" />}\n                                label=\"URL\"\n                              />\n                            </RadioGroup>\n                          </FormControl>\n                        )}\n                      />\n                      {watcher[index].type === \"file\" && (\n                        <FormControl\n                          component=\"fieldset\"\n                          error={!!errors?.sources?.[index]?.geotiff}\n                          fullWidth\n                        >\n                          <input\n                            {...register(`sources.${index}.geotiff`, {\n                              required: true,\n                              validate: {\n                                length: f =>\n                                  f instanceof FileList && f.length === 1,\n                              },\n                            })}\n                            type=\"file\"\n                          />\n\n                          {errors?.sources?.[index]?.geotiff?.type ===\n                            \"required\" && (\n                            <FormHelperText>\n                              Required. <br />\n                              \n                            </FormHelperText>\n                          )}\n                          {errors?.sources?.[index]?.geotiff?.type ===\n                            \"length\" && (\n                            <FormHelperText>\n                              Required. <br />\n                              1\n                            </FormHelperText>\n                          )}\n                        </FormControl>\n                      )}\n                      {watcher[index].type === \"url\" && (\n                        <Controller\n                          control={control}\n                          name={`sources.${index}.url`}\n                          render={({\n                            field,\n                            fieldState: { invalid, error },\n                          }) => (\n                            <FormControl\n                              component=\"fieldset\"\n                              error={invalid}\n                              fullWidth\n                            >\n                              <TextField\n                                {...field}\n                                label=\"url\"\n                                size=\"small\"\n                                error={invalid}\n                                placeholder=\"https://\"\n                              />\n                              {error?.type === \"required\" && (\n                                <FormHelperText>\n                                  Required. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                              {error?.type === \"pattern\" && (\n                                <FormHelperText>\n                                  Not matched URL pattern.\n                                  <br />\n                                  URL\n                                </FormHelperText>\n                              )}\n                            </FormControl>\n                          )}\n                          rules={{\n                            required: true,\n                            pattern: /^(https?):\\/\\/[^ \"]+$/,\n                          }}\n                        />\n                      )}\n                      <Stack direction=\"row\" spacing={2} sx={{ mt: 2, mb: 1 }}>\n                        <Controller\n                          control={control}\n                          name={`sources.${index}.bands`}\n                          render={({\n                            field,\n                            fieldState: { invalid, error },\n                          }) => (\n                            <FormControl\n                              component=\"fieldset\"\n                              error={invalid}\n                              fullWidth\n                            >\n                              <TextField\n                                {...field}\n                                label=\"bands\"\n                                size=\"small\"\n                                error={invalid}\n                                placeholder=\"1,2,3\"\n                              />\n                              {error?.type === \"required\" && (\n                                <FormHelperText>\n                                  Required. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                              {error?.type === \"pattern\" && (\n                                <FormHelperText>\n                                  Must be positive numbers(maximum of three)\n                                  separated by commas.\n                                  <br />\n                                  3\n                                </FormHelperText>\n                              )}\n                            </FormControl>\n                          )}\n                          rules={{\n                            required: true,\n                            pattern:\n                              /^\\s*([1-9]\\d*){1,}(\\s*,\\s*([1-9]\\d*)){0,2}\\s*$/,\n                          }}\n                        />\n                        <Controller\n                          control={control}\n                          name={`sources.${index}.nodata`}\n                          render={({\n                            field,\n                            fieldState: { invalid, error },\n                          }) => (\n                            <FormControl\n                              component=\"fieldset\"\n                              error={invalid}\n                              fullWidth\n                            >\n                              <TextField\n                                {...field}\n                                label=\"nodata\"\n                                size=\"small\"\n                                error={invalid}\n                              />\n                              {error?.type === \"required\" && (\n                                <FormHelperText>\n                                  Required. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                              {error?.type === \"pattern\" && (\n                                <FormHelperText>\n                                  must be a number. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                            </FormControl>\n                          )}\n                          rules={{\n                            required: true,\n                            pattern: /^((\\+|-){0,1}[1-9]\\d*|0)(\\.\\d+)?$/,\n                          }}\n                        />\n                        <Controller\n                          control={control}\n                          name={`sources.${index}.min`}\n                          render={({\n                            field,\n                            fieldState: { invalid, error },\n                          }) => (\n                            <FormControl\n                              component=\"fieldset\"\n                              error={invalid}\n                              fullWidth\n                            >\n                              <TextField\n                                {...field}\n                                label=\"min\"\n                                size=\"small\"\n                                error={invalid}\n                              />\n                              {error?.type === \"required\" && (\n                                <FormHelperText>\n                                  Required. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                              {error?.type === \"pattern\" && (\n                                <FormHelperText>\n                                  must be a number. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                            </FormControl>\n                          )}\n                          rules={{\n                            required: true,\n                            pattern: /^((\\+|-){0,1}[1-9]\\d*|0)(\\.\\d+)?$/,\n                          }}\n                        />\n                        <Controller\n                          control={control}\n                          name={`sources.${index}.max`}\n                          render={({\n                            field,\n                            fieldState: { invalid, error },\n                          }) => (\n                            <FormControl\n                              component=\"fieldset\"\n                              error={invalid}\n                              fullWidth\n                            >\n                              <TextField\n                                {...field}\n                                label=\"max\"\n                                size=\"small\"\n                                error={invalid}\n                              />\n                              {error?.type === \"required\" && (\n                                <FormHelperText>\n                                  Required. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                              {error?.type === \"pattern\" && (\n                                <FormHelperText>\n                                  must be a number. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                            </FormControl>\n                          )}\n                          rules={{\n                            required: true,\n                            pattern: /^((\\+|-){0,1}[1-9]\\d*|0)(\\.\\d+)?$/,\n                          }}\n                        />\n                      </Stack>\n\n                      <div>\n                        {index > 0 && (\n                          <IconButton\n                            color=\"primary\"\n                            size=\"small\"\n                            aria-label=\"Delete\"\n                            component=\"span\"\n                            onClick={() => {\n                              remove(index);\n                            }}\n                          >\n                            <DeleteIcon />\n                          </IconButton>\n                        )}\n                        {index === fields.length - 1 && index < 2 && (\n                          <IconButton\n                            color=\"primary\"\n                            size=\"small\"\n                            aria-label=\"Add\"\n                            component=\"span\"\n                            onClick={() => {\n                              append(defaultSourcesValue);\n                            }}\n                          >\n                            <AddIcon />\n                          </IconButton>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n              </Stack>\n\n              <FormControl error={!!error} sx={{ mt: 3 }}>\n                <div>\n                  <Button\n                    variant=\"contained\"\n                    type=\"submit\"\n                    onClick={() => {\n                      setError(null);\n                    }}\n                  >\n                    Add Layer\n                  </Button>\n                </div>\n                {error === \"FailedLoadSource\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Failed to load source. <br />\n                    \n                  </FormHelperText>\n                )}\n                {error === \"Duplicate\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Duplicate Layer. <br />\n                    \n                  </FormHelperText>\n                )}\n                {error === \"UnmatchBands\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Number of Bands must be 3. <br />\n                    3\n                  </FormHelperText>\n                )}\n                {error === \"NotFoundCrs\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Not found CRS. <br />\n                    \n                  </FormHelperText>\n                )}\n                {error === \"UnsupportedCrs\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Unsupported CRS. <br />\n                    \n                  </FormHelperText>\n                )}\n              </FormControl>\n            </form>\n          </div>\n        </Stack>\n      </Container>\n    </>\n  );\n};\nexport default Viewer;\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 5479;\nmodule.exports = webpackEmptyContext;"],"names":["module","exports","arr","len","length","i","arr2","Array","__esModule","isArray","arrayLikeToArray","instance","Constructor","TypeError","setPrototypeOf","isNativeReflectConstruct","_construct","Parent","args","Class","Reflect","construct","a","push","apply","Function","bind","prototype","arguments","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","obj","value","superPropBase","_get","get","property","receiver","base","desc","getOwnPropertyDescriptor","call","this","_getPrototypeOf","o","getPrototypeOf","__proto__","subClass","superClass","create","constructor","fn","toString","indexOf","sham","Proxy","Boolean","valueOf","e","iter","Symbol","iterator","from","_i","_s","_e","_arr","_n","_d","next","done","err","_typeof","assertThisInitialized","self","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","object","hasOwnProperty","arrayWithoutHoles","iterableToArray","nonIterableSpread","minLen","n","slice","name","test","isNativeFunction","_wrapNativeSuper","_cache","Map","undefined","has","set","Wrapper","_interopRequireDefault","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","createSvgIcon","RadioButtonIconRoot","styled","position","display","RadioButtonIconBackground","RadioButtonUnchecked","skipSx","transform","RadioButtonIconDot","RadioButtonChecked","_ref","theme","ownerState","left","transition","transitions","easing","easeIn","duration","shortest","checked","easeOut","_props$checked","_props$classes","classes","fontSize","className","root","children","background","dot","getRadioUtilityClass","slot","generateUtilityClass","_excluded","RadioRoot","SwitchBase","shouldForwardProp","prop","overridesResolver","styles","concat","capitalize","color","palette","text","secondary","backgroundColor","action","active","main","hoverOpacity","disabled","defaultCheckedIcon","defaultIcon","inProps","ref","_defaultIcon$props$fo","_defaultCheckedIcon$p","b","useThemeProps","checkedProp","_props$checkedIcon","checkedIcon","_props$color","_props$icon","icon","nameProp","onChangeProp","onChange","_props$size","size","other","slots","composeClasses","useUtilityClasses","radioGroup","RadioGroupContext","createChainedFunction","String","type","getFormGroupUtilityClass","FormGroupRoot","row","flexDirection","flexWrap","_props$row","actions","defaultValue","valueProp","rootRef","_useControlled","useControlled","controlled","_useControlled2","setValueState","focus","input","current","querySelector","handleRef","useForkRef","useId","event","role","global","TO_STRING_TAG_SUPPORT","isCallable","classofRaw","TO_STRING_TAG","wellKnownSymbol","CORRECT_ARGUMENTS","it","O","tag","result","error","tryGet","callee","toPropertyKey","definePropertyModule","createPropertyDescriptor","propertyKey","f","uncurryThis","aCallable","that","classof","getMethod","Iterators","ITERATOR","anObject","tryToString","getIteratorMethod","argument","usingIterator","iteratorMethod","ArrayPrototype","isArrayIteratorMethod","lengthOfArrayLike","isPrototypeOf","getIterator","iteratorClose","Result","stopped","ResultPrototype","iterable","unboundFunction","options","iterFn","index","step","AS_ENTRIES","IS_ITERATOR","INTERRUPTED","stop","condition","callFn","kind","innerResult","innerError","PromiseCapability","C","resolve","reject","promise","$$resolve","$$reject","exec","$","iterate","createProperty","stat","fromEntries","k","v","newPromiseCapabilityModule","perform","allSettled","capability","promiseResolve","values","counter","remaining","alreadyCalled","then","status","reason","getClientCoordinates","changedTouches","clientX","clientY","getInitState","dndItems","keys","dragElement","hoverIndex","canCheckHovered","pointerPosition","x","y","useDnDSort","mode","defaultItems","zIndex","drop","useState","items","setItems","state","useRef","onMove","cancelable","preventDefault","coordinates","dragStyle","element","style","cursor","setTimeout","dragIndex","findIndex","hoveredIndex","rect","getBoundingClientRect","bottom","top","right","isHover","splice","map","onEnd","userSelect","window","removeEventListener","reset","React","Math","random","onStart","currentTarget","addEventListener","passive","itemIndex","item","dragX","dragY","requestAnimationFrame","events","onMouseDown","onTouchStart","getIconButtonUtilityClass","IconButtonRoot","ButtonBase","edge","textAlign","flex","typography","pxToRem","padding","borderRadius","overflow","disableRipple","marginLeft","marginRight","_ref2","_props$edge","_props$disabled","_props$disableFocusRi","disableFocusRipple","centerRipple","focusRipple","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","STATIC_DRAW","CONTEXT_IDS","getContext","canvas","opt_attributes","attributes","preserveDrawingBuffer","ii","context","BufferUsage","WebGLArrayBuffer","opt_usage","array","usage","ofSize","getArrayClassForType","fromArray","arrayClass","fromArrayBuffer","buffer","getType","getArray","getUsage","getSize","Float32Array","Uint32Array","_extendStatics","__extends","p","__","bindAndConfigure","gl","texture","interpolate","resampleFilter","LINEAR","NEAREST","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","uploadDataTexture","helper","data","bandCount","getGL","format","textureType","bytesPerRow","byteLength","unpackAlignment","LUMINANCE","LUMINANCE_ALPHA","RGB","RGBA","Error","FLOAT","getExtension","UNSIGNED_BYTE","oldUnpackAlignment","getParameter","UNPACK_ALIGNMENT","pixelStorei","texImage2D","_super","TileTexture","tile","grid","_this","textures","handleTileChange_","getTileSize","tileCoord","NaN","helper_","coords","flushBufferData","setTile","EventType","loaded","getState","TileState","uploadTile_","ImageTile","createTexture","image","uploadImageTexture","getImage","getData","isFloat","pixelCount","DataType","Uint8Array","bytesPerElement","BYTES_PER_ELEMENT","floor","textureCount","ceil","textureDataArrays","textureIndex","dataIndex","rowOffset","colCount","rowIndex","colIndex","dataValue","pixelIndex","bandIndex","textureData","dispatchEvent","disposeInternal","deleteBuffer","deleteTexture","WebGLPostProcessingPass","gl_","webGlContext","scaleRatio_","scaleRatio","renderTargetTexture_","renderTargetTextureSize_","frameBuffer_","createFramebuffer","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","renderTargetProgram_","createProgram","attachShader","linkProgram","renderTargetVerticesBuffer_","createBuffer","bindBuffer","bufferData","renderTargetAttribLocation_","getAttribLocation","renderTargetUniformLocation_","getUniformLocation","renderTargetOpacityLocation_","renderTargetTextureLocation_","uniforms_","uniforms","forEach","location","init","frameState","textureSize","drawingBufferWidth","drawingBufferHeight","bindFramebuffer","FRAMEBUFFER","getFrameBuffer","viewport","internalFormat","framebufferTexture2D","COLOR_ATTACHMENT0","nextPass","preCompose","postCompose","activeTexture","TEXTURE0","canvasId","renderTargets","getContextAttributes","clearColor","clear","COLOR_BUFFER_BIT","enable","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","useProgram","enableVertexAttribArray","vertexAttribPointer","uniform2f","uniform1i","opacity","layerStatesArray","layerIndex","uniform1f","applyUniforms","drawArrays","TRIANGLES","textureSlot","uniform","HTMLCanvasElement","ImageData","width","height","uniform3f","uniform4f","fromTransform","mat4","DefaultUniform","AttributeType","canvasCache","getSharedCanvasCacheKey","uniqueCanvasCacheKeyCount","getByteSizeFromType","Uint16Array","WebGLHelper","opt_options","boundHandleWebGLContextLost_","handleWebGLContextLost","boundHandleWebGLContextRestored_","handleWebGLContextRestored","canvasCacheKey_","canvasCacheKey","canvas_","cacheItem","document","createElement","users","getCanvas","bufferCache_","extensionCache_","currentProgram_","ContextEventType","offsetRotateMatrix_","offsetScaleMatrix_","tmpMat4_","uniformLocations_","attribLocations_","setUniforms","postProcessPasses_","postProcesses","shaderCompileErrors_","startTime_","Date","now","name_1","canvasCacheKeyMatches","extension","bufferKey","bufferCache","webGlBuffer","buf","bufferCacheEntry","isContextLost","loseContext","releaseCanvas","prepareDraw","opt_disableAlphaBlend","pixelRatio","ZERO","applyFrameState","prepareDrawToRenderTarget","renderTarget","getFramebuffer","getTexture","drawElements","start","end","elementType","UNSIGNED_INT","numItems","offsetInBytes","finalizeDraw","rotation","viewState","offsetScaleMatrix","offsetRotateMatrix","setUniformMatrixValue","setUniformFloatValue","zoom","resolution","HTMLImageElement","prevValue","complete","program","source","shader","getProgram","fragmentShaderSource","vertexShaderSource","getShaderParameter","COMPILE_STATUS","message","getShaderInfoLog","deleteShader","getProgramParameter","LINK_STATUS","getAttributeLocation","makeProjectionTransform","center","uniformMatrix4fv","enableAttributeArray_","attribName","stride","offset","enableAttributes","attr","computeAttributesStride","opt_data","opt_texture","Disposable","WebGLLayerRenderer","layer","inversePixelTransform_","postProcesses_","addChangeListener","removeHelper_","dispatchPreComposeEvent","dispatchPostComposeEvent","getLayer","hasListener","event_1","event_2","dispose","prepareFrame","getSource","incrementGroup","groupNumber","renderer","getRenderer","layerClassName","getClassName","mapId","afterHelperCreated","prepareFrameInternal","dispatchRenderEvent_","event_3","preRender","postRender","Layer","Uniforms","Attributes","attributeDescriptions","empty","depthForZ","z","addTileTextureToLookup","tileTexturesByZ","tileTexture","getRenderExtent","extent","layerState","projection","getWrapX","gridExtent","tileGrid","getExtent","WebGLTileLayerRenderer","tileLayer","tileTransform_","tempMat4_","tempTileRange_","TileRange","tempTileCoord_","tempSize_","program_","vertexShader_","fragmentShader_","indices_","cacheSize","tileTextureCache_","LRUCache","paletteTextures_","paletteTextures","isDrawableTile_","tileState","useInterimTilesOnError","getUseInterimTilesOnError","State","enqueueTiles","tileSource","getTileGridForProjection","tileTextureCache","tileRange","getTileRangeForExtentAndZ","tileSourceKey","wantedTiles","tileResolution","getResolution","minX","maxX","minY","maxY","tileCoordKey","containsKey","getKey","getTile","interimTile","getInterimTile","tileQueueKey","tileQueue","isKeyQueued","enqueue","getTileCoordCenter","renderFrame","getZForResolution","zDirection","nextExtent","targetZ","nextResolution","alphaLookup","uid","time","blend","tileTextures","alpha","getAlpha","endTransition","findAltTiles_","minZoom","getMinZoom","parentZ","zs","Number","sort","centerX","centerY","j","jj","tileZ","tileSize","tileOrigin","getOrigin","centerI","centerJ","tileScale","depth","tileTextures_1","tileCenterI","tileCenterJ","textureProperty","uniformName","paletteIndex","paletteTexture","animate","canExpireCache","pop","postRenderFunctions","expireCache","altZ","getTileRangeForTileCoordAndZ","covered","cacheKey","deleteProgram","PaletteTexture","texture_","ValueTypes","Operators","getValueType","JSON","stringify","valueArr","every","operator","getReturnType","numberToGlsl","s","arrayToGlsl","join","getStringNumberEquivalent","string","stringLiteralsMap","expressionToGlsl","typeHint","toGlsl","valueType","stringToGlsl","c","colorToGlsl","assertNumber","assertNumbers","assertString","assertBoolean","assertArgsCount","count","assertArgsMinCount","assertArgsMaxCount","assertArgsEven","assertUniqueInferredType","types","uniformNameForVariable","variableName","inFragmentShader","variables","colors","numColors","candidate","length_1","paletteName","PALETTE_TEXTURE_ARRAY","GET_BAND_VALUE_FUNC","getEqualOperator","getDecisionOperator","arg","band","functions","ifBlocks","colorIndex","min","max","parsedArgs","val","opt_typeHint","interpolation","outputType","exponent","stop1","output1","stop2","fallback","assertArgsOdd","parseStyle","pipeline","contrast","exposure","saturation","gamma","brightness","numVariables","_loop_1","uniformDeclarations","functionDefintions","WebGLTileLayer","style_","cacheSize_","styleVariables_","handleSourceUpdate_","setStyle","getSourceBandCount_","createRenderer","parsedStyle","changed","updateStyleVariables","BaseTile","PROJECTION","COORDINATE_FORMAT","MousePosition","render","on","once","un","handleProjectionChanged_","coordinateFormat","setCoordinateFormat","setProjection","renderOnMouseOut","placeholder","undefinedHTML","placeholder_","renderOnMouseOut_","renderedHTML_","innerHTML","mapProjection_","transform_","getCoordinateFormat","getProjection","handleMouseMove","getMap","updateHTML_","getEventPixel","handleMouseOut","setMap","getViewport","listenerKeys","pixel","html","coordinate","getCoordinateFromPixelInternal","userProjection","mapEvent","Control","DataTile","loader_","loader","data_","error_","getError","load","catch","DataTileSource","maxResolution","maxZoom","opaque","tilePixelRatio","wrapX","tileLoadingKeys_","setLoader","tileCache","sourceLoader","tileOptions","TileEventType","workerPool","STATISTICS_MAXIMUM","STATISTICS_MINIMUM","getWorkerPool","blob","url","Pool","Blob","URL","createObjectURL","Worker","getBoundingBox","_","fileDirectory","ImageWidth","ImageLength","referenceImage","geoKeys","ProjectedCSTypeGeoKey","code","getCachedProjection","units","unitsFromCode","ProjLinearUnitsGeoKey","Projection","GeographicTypeGeoKey","GeogAngularUnitsGeoKey","getImagesForTIFF","tiff","getImageCount","requests","Promise","all","assertEqual","expected","got","tolerance","rejector","abs","getMinForDataType","Int8Array","Int16Array","Int32Array","getMaxForDataType","Uint8ClampedArray","GeoTIFFSource","sourceInfo_","sources","numSources","sourceImagery_","resolutionFactors_","samplesPerPixel_","nodataValues_","metadata_","normalize_","normalize","addAlpha_","readMethod_","convertToRGB","setKey","tiffFromBlob","tiffFromUrl","configure_","console","setState","origin","tileSizes","resolutions","samplesPerPixel","nodataValues","metadata","sourceCount","sourceIndex","images","imageCount","sourceExtent","sourceOrigin","sourceTileSizes","sourceResolutions","imageIndex","nodataValue","getGDALNoData","getGDALMetadata","wantedSamples","bands","getSamplesPerPixel","level","getTileWidth","getTileHeight","getIntersection","viewRejector","resolutionFactor","scaledSourceResolutions","reverse","sourceImagery","unshift","firstSource","outer","nodata","isNaN","additionalBands","reduce","accumulator","TileGrid","loadTile_","viewResolver","toUserCoordinate","getCenter","toUserExtent","toSize","addAlpha","sourceInfo","pixelBounds","round","samples","bandNumber","fillValue","sampleIndex","pool","interleave","dataLength","sourceSamples","transparent","gain","bias","stats","parseFloat","sourceValue","clamp","getView","EllipsisWrapper","EllipsisTypography","Typography","whiteSpace","textOverflow","LayerName","LayerButton","StyledUl","listStyle","margin","marginTop","defaultSourcesValue","geotiff","Coordinates","pointerEvents","ol","useOl","wrapperRef","positionRef","layerConfs","setLayerConfs","setError","loading","setLoading","layerList","prevList","nextList","useForm","criteriaMode","defaultValues","control","handleSubmit","register","watch","setValue","errors","formState","useFieldArray","fields","append","remove","watcher","removeLayer","id","newLayerConfs","layerConf","setLayerError","errorType","resetList","setZIndex","setLayer","sourceView","sourceProjection","getCode","crs","utils","proj4","olRegister","getTileGrid","imageSource","XYZ","tileLoadFunction","imageTile","coordString","coord","split","setImage","tilesize","imgData","getImageData","pixels","DataView","l","putImageData","src","toDataURL","tileListener","WebGLTile","addLayer","originExtent","transformed","transformExtent","fit","CustomGeoTIFFSource","SourceState","sourceListener","sourceState","onSubmit","bandLength","parseInt","addedId","FileList","file","sample1","sample2","mousePositionControl","toFixed","addControl","removeControl","CssBaseline","Helmet","content","rel","href","Container","variant","component","Stack","my","spacing","Grid","container","xs","direction","justifyContent","alignItems","Tooltip","title","arrow","placement","Button","onClick","sx","mr","field","FormControl","fullWidth","RadioGroup","FormControlLabel","Radio","label","required","validate","FormHelperText","fieldState","invalid","TextField","rules","pattern","mt","mb","Delete","Add","ml","webpackEmptyContext","req"],"sourceRoot":""}