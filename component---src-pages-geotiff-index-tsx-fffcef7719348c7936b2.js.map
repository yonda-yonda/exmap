{"version":3,"file":"component---src-pages-geotiff-index-tsx-fffcef7719348c7936b2.js","mappings":"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","sources":["webpack://exmap/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://exmap/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://exmap/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://exmap/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://exmap/./node_modules/@babel/runtime/helpers/construct.js","webpack://exmap/./node_modules/@babel/runtime/helpers/createClass.js","webpack://exmap/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://exmap/./node_modules/@babel/runtime/helpers/get.js","webpack://exmap/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://exmap/./node_modules/@babel/runtime/helpers/inherits.js","webpack://exmap/./node_modules/@babel/runtime/helpers/isNativeFunction.js","webpack://exmap/./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack://exmap/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://exmap/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://exmap/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://exmap/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://exmap/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://exmap/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://exmap/./node_modules/@babel/runtime/helpers/superPropBase.js","webpack://exmap/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://exmap/./node_modules/@babel/runtime/helpers/typeof.js","webpack://exmap/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://exmap/./node_modules/@babel/runtime/helpers/wrapNativeSuper.js","webpack://exmap/./node_modules/@mui/icons-material/Add.js","webpack://exmap/./node_modules/@mui/icons-material/Delete.js","webpack://exmap/./node_modules/@mui/material/internal/svg-icons/RadioButtonUnchecked.js","webpack://exmap/./node_modules/@mui/material/internal/svg-icons/RadioButtonChecked.js","webpack://exmap/./node_modules/@mui/material/Radio/RadioButtonIcon.js","webpack://exmap/./node_modules/@mui/material/Radio/radioClasses.js","webpack://exmap/./node_modules/@mui/material/Radio/Radio.js","webpack://exmap/./node_modules/@mui/material/RadioGroup/useRadioGroup.js","webpack://exmap/./node_modules/@mui/material/FormGroup/formGroupClasses.js","webpack://exmap/./node_modules/@mui/material/FormGroup/FormGroup.js","webpack://exmap/./node_modules/@mui/material/RadioGroup/RadioGroup.js","webpack://exmap/./node_modules/@mui/material/RadioGroup/RadioGroupContext.js","webpack://exmap/./node_modules/@mui/system/esm/styled.js","webpack://exmap/./node_modules/debug/node_modules/ms/index.js","webpack://exmap/./node_modules/debug/src/browser.js","webpack://exmap/./node_modules/debug/src/common.js","webpack://exmap/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://exmap/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://exmap/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://exmap/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://exmap/./node_modules/@petamoriken/float16/src/_util/primordials.mjs","webpack://exmap/./node_modules/@petamoriken/float16/src/_util/arrayIterator.mjs","webpack://exmap/./node_modules/@petamoriken/float16/src/_util/converter.mjs","webpack://exmap/./node_modules/@petamoriken/float16/src/DataView.mjs","webpack://exmap/./node_modules/geotiff/src/rgb.js","webpack://exmap/./node_modules/geotiff/src/compression/index.js","webpack://exmap/./node_modules/geotiff/src/resample.js","webpack://exmap/./node_modules/geotiff/src/geotiffimage.js","webpack://exmap/./node_modules/geotiff/src/dataview64.js","webpack://exmap/./node_modules/geotiff/src/dataslice.js","webpack://exmap/./node_modules/threads/index.mjs","webpack://exmap/./node_modules/geotiff/src/pool.js","webpack://exmap/./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://exmap/./node_modules/geotiff/src/source/httputils.js","webpack://exmap/./node_modules/@babel/runtime/helpers/esm/toArray.js","webpack://exmap/./node_modules/geotiff/src/source/basesource.js","webpack://exmap/./node_modules/geotiff/src/utils.js","webpack://exmap/./node_modules/geotiff/src/source/blockedsource.js","webpack://exmap/./node_modules/geotiff/src/source/client/base.js","webpack://exmap/./node_modules/geotiff/src/source/client/fetch.js","webpack://exmap/./node_modules/geotiff/src/source/client/xhr.js","webpack://exmap/./node_modules/geotiff/src/source/client/http.js","webpack://exmap/./node_modules/geotiff/src/source/remote.js","webpack://exmap/./node_modules/geotiff/src/source/arraybuffer.js","webpack://exmap/./node_modules/geotiff/src/source/filereader.js","webpack://exmap/./node_modules/geotiff/src/source/file.js","webpack://exmap/./node_modules/geotiff/src/geotiffwriter.js","webpack://exmap/./node_modules/geotiff/src/logging.js","webpack://exmap/./node_modules/geotiff/src/geotiff.js","webpack://exmap/./node_modules/geotiff/src/globals.js","webpack://exmap/./node_modules/is-observable/index.js","webpack://exmap/./node_modules/lru-cache/index.js","webpack://exmap/./node_modules/lru-cache/node_modules/yallist/iterator.js","webpack://exmap/./node_modules/lru-cache/node_modules/yallist/yallist.js","webpack://exmap/./node_modules/observable-fns/dist.esm/_scheduler.js","webpack://exmap/./node_modules/observable-fns/dist.esm/_symbols.js","webpack://exmap/./node_modules/observable-fns/dist.esm/observable.js","webpack://exmap/./node_modules/observable-fns/dist.esm/unsubscribe.js","webpack://exmap/./node_modules/observable-fns/dist.esm/filter.js","webpack://exmap/./node_modules/observable-fns/dist.esm/_util.js","webpack://exmap/./node_modules/observable-fns/dist.esm/flatMap.js","webpack://exmap/./node_modules/observable-fns/dist.esm/interval.js","webpack://exmap/./node_modules/observable-fns/dist.esm/map.js","webpack://exmap/./node_modules/observable-fns/dist.esm/merge.js","webpack://exmap/./node_modules/observable-fns/dist.esm/subject.js","webpack://exmap/./node_modules/observable-fns/dist.esm/multicast.js","webpack://exmap/./node_modules/observable-fns/dist.esm/scan.js","webpack://exmap/./node_modules/threads/dist/common.js","webpack://exmap/./node_modules/threads/dist/index.js","webpack://exmap/./node_modules/threads/dist/master/get-bundle-url.browser.js","webpack://exmap/./node_modules/threads/dist/master/implementation.browser.js","webpack://exmap/./node_modules/threads/dist/master/index.js","webpack://exmap/./node_modules/threads/dist/master/invocation-proxy.js","webpack://exmap/./node_modules/threads/dist/master/pool-types.js","webpack://exmap/./node_modules/threads/dist/master/pool.js","webpack://exmap/./node_modules/threads/dist/master/spawn.js","webpack://exmap/./node_modules/threads/dist/master/thread.js","webpack://exmap/./node_modules/threads/dist/observable-promise.js","webpack://exmap/./node_modules/threads/dist/ponyfills.js","webpack://exmap/./node_modules/threads/dist/promise.js","webpack://exmap/./node_modules/threads/dist/serializers.js","webpack://exmap/./node_modules/threads/dist/symbols.js","webpack://exmap/./node_modules/threads/dist/transferable.js","webpack://exmap/./node_modules/threads/dist/types/master.js","webpack://exmap/./node_modules/threads/dist/types/messages.js","webpack://exmap/./node_modules/threads/dist/worker/implementation.browser.js","webpack://exmap/./node_modules/threads/dist/worker/index.js","webpack://exmap/./node_modules/xml-utils/find-tag-by-name.js","webpack://exmap/./node_modules/xml-utils/find-tags-by-name.js","webpack://exmap/./node_modules/xml-utils/get-attribute.js","webpack://exmap/./node_modules/xml-utils/index-of-match.js","webpack://exmap/./node_modules/core-js/internals/classof.js","webpack://exmap/./node_modules/core-js/internals/create-property.js","webpack://exmap/./node_modules/core-js/internals/function-bind-context.js","webpack://exmap/./node_modules/core-js/internals/get-iterator-method.js","webpack://exmap/./node_modules/core-js/internals/get-iterator.js","webpack://exmap/./node_modules/core-js/internals/is-array-iterator-method.js","webpack://exmap/./node_modules/core-js/internals/iterate.js","webpack://exmap/./node_modules/core-js/internals/iterator-close.js","webpack://exmap/./node_modules/core-js/internals/iterators.js","webpack://exmap/./node_modules/core-js/internals/new-promise-capability.js","webpack://exmap/./node_modules/core-js/internals/perform.js","webpack://exmap/./node_modules/core-js/internals/to-string-tag-support.js","webpack://exmap/./node_modules/core-js/modules/es.object.from-entries.js","webpack://exmap/./node_modules/core-js/modules/es.promise.all-settled.js","webpack://exmap/./node_modules/core-js/modules/esnext.promise.all-settled.js","webpack://exmap/./node_modules/@mui/material/IconButton/iconButtonClasses.js","webpack://exmap/./node_modules/@mui/material/IconButton/IconButton.js","webpack://exmap/./node_modules/ol/webgl.js","webpack://exmap/./node_modules/ol/webgl/Buffer.js","webpack://exmap/./node_modules/ol/webgl/TileTexture.js","webpack://exmap/./node_modules/ol/webgl/ContextEventType.js","webpack://exmap/./node_modules/ol/webgl/PostProcessingPass.js","webpack://exmap/./node_modules/ol/vec/mat4.js","webpack://exmap/./node_modules/ol/webgl/Helper.js","webpack://exmap/./node_modules/ol/renderer/webgl/Layer.js","webpack://exmap/./node_modules/ol/renderer/webgl/TileLayer.js","webpack://exmap/./node_modules/ol/webgl/PaletteTexture.js","webpack://exmap/./node_modules/ol/style/expressions.js","webpack://exmap/./node_modules/ol/layer/WebGLTile.js","webpack://exmap/./node_modules/ol/DataTile.js","webpack://exmap/./node_modules/ol/source/DataTile.js","webpack://exmap/./src/scripts/CustomGeoTIFFSource.js","webpack://exmap/./node_modules/ol/worker/geotiff-decoder.js","webpack://exmap/./src/pages/geotiff/index.tsx","webpack://exmap/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://exmap/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://exmap/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://exmap/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"],"sourcesContent":["function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var superPropBase = require(\"./superPropBase.js\");\n\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n\n      return desc.value;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n\n  return _get.apply(this, arguments);\n}\n\nmodule.exports = _get, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableRest = require(\"./nonIterableRest.js\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nvar isNativeFunction = require(\"./isNativeFunction.js\");\n\nvar construct = require(\"./construct.js\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","import * as React from 'react';\nimport createSvgIcon from '../../utils/createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'RadioButtonUnchecked');","import * as React from 'react';\nimport createSvgIcon from '../../utils/createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z\"\n}), 'RadioButtonChecked');","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport RadioButtonUncheckedIcon from '../internal/svg-icons/RadioButtonUnchecked';\nimport RadioButtonCheckedIcon from '../internal/svg-icons/RadioButtonChecked';\nimport styled from '../styles/styled';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar RadioButtonIconRoot = styled('span')({\n  position: 'relative',\n  display: 'flex'\n});\nvar RadioButtonIconBackground = styled(RadioButtonUncheckedIcon, {\n  skipSx: true\n})({\n  // Scale applied to prevent dot misalignment in Safari\n  transform: 'scale(1)'\n});\nvar RadioButtonIconDot = styled(RadioButtonCheckedIcon, {\n  skipSx: true\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    left: 0,\n    position: 'absolute',\n    transform: 'scale(0)',\n    transition: theme.transitions.create('transform', {\n      easing: theme.transitions.easing.easeIn,\n      duration: theme.transitions.duration.shortest\n    })\n  }, ownerState.checked && {\n    transform: 'scale(1)',\n    transition: theme.transitions.create('transform', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.shortest\n    })\n  });\n});\n/**\n * @ignore - internal component.\n */\n\nfunction RadioButtonIcon(props) {\n  var _props$checked = props.checked,\n      checked = _props$checked === void 0 ? false : _props$checked,\n      _props$classes = props.classes,\n      classes = _props$classes === void 0 ? {} : _props$classes,\n      fontSize = props.fontSize;\n\n  var ownerState = _extends({}, props, {\n    checked: checked\n  });\n\n  return /*#__PURE__*/_jsxs(RadioButtonIconRoot, {\n    className: classes.root,\n    ownerState: ownerState,\n    children: [/*#__PURE__*/_jsx(RadioButtonIconBackground, {\n      fontSize: fontSize,\n      className: classes.background,\n      ownerState: ownerState\n    }), /*#__PURE__*/_jsx(RadioButtonIconDot, {\n      fontSize: fontSize,\n      className: classes.dot,\n      ownerState: ownerState\n    })]\n  });\n}\n\nprocess.env.NODE_ENV !== \"production\" ? RadioButtonIcon.propTypes = {\n  /**\n   * If `true`, the component is checked.\n   */\n  checked: PropTypes.bool,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * The size of the component.\n   * `small` is equivalent to the dense radio styling.\n   */\n  fontSize: PropTypes.oneOf(['small', 'medium'])\n} : void 0;\nexport default RadioButtonIcon;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getRadioUtilityClass(slot) {\n  return generateUtilityClass('MuiRadio', slot);\n}\nvar radioClasses = generateUtilityClasses('MuiRadio', ['root', 'checked', 'disabled', 'colorPrimary', 'colorSecondary']);\nexport default radioClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"checked\", \"checkedIcon\", \"color\", \"icon\", \"name\", \"onChange\", \"size\"];\nimport * as React from 'react';\nimport { refType } from '@mui/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport { alpha } from '@mui/system';\nimport SwitchBase from '../internal/SwitchBase';\nimport useThemeProps from '../styles/useThemeProps';\nimport RadioButtonIcon from './RadioButtonIcon';\nimport capitalize from '../utils/capitalize';\nimport createChainedFunction from '../utils/createChainedFunction';\nimport useRadioGroup from '../RadioGroup/useRadioGroup';\nimport radioClasses, { getRadioUtilityClass } from './radioClasses';\nimport styled, { rootShouldForwardProp } from '../styles/styled';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      color = ownerState.color;\n  var slots = {\n    root: ['root', \"color\".concat(capitalize(color))]\n  };\n  return _extends({}, classes, composeClasses(slots, getRadioUtilityClass, classes));\n};\n\nvar RadioRoot = styled(SwitchBase, {\n  shouldForwardProp: function shouldForwardProp(prop) {\n    return rootShouldForwardProp(prop) || prop === 'classes';\n  },\n  name: 'MuiRadio',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, styles[\"color\".concat(capitalize(ownerState.color))]];\n  }\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    color: theme.palette.text.secondary,\n    '&:hover': {\n      backgroundColor: alpha(ownerState.color === 'default' ? theme.palette.action.active : theme.palette[ownerState.color].main, theme.palette.action.hoverOpacity),\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    }\n  }, ownerState.color !== 'default' && _defineProperty({}, \"&.\".concat(radioClasses.checked), {\n    color: theme.palette[ownerState.color].main\n  }), _defineProperty({}, \"&.\".concat(radioClasses.disabled), {\n    color: theme.palette.action.disabled\n  }));\n});\n\nfunction areEqualValues(a, b) {\n  if (typeof b === 'object' && b !== null) {\n    return a === b;\n  } // The value could be a number, the DOM will stringify it anyway.\n\n\n  return String(a) === String(b);\n}\n\nvar defaultCheckedIcon = /*#__PURE__*/_jsx(RadioButtonIcon, {\n  checked: true\n});\n\nvar defaultIcon = /*#__PURE__*/_jsx(RadioButtonIcon, {});\n\nvar Radio = /*#__PURE__*/React.forwardRef(function Radio(inProps, ref) {\n  var _defaultIcon$props$fo, _defaultCheckedIcon$p;\n\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiRadio'\n  });\n\n  var checkedProp = props.checked,\n      _props$checkedIcon = props.checkedIcon,\n      checkedIcon = _props$checkedIcon === void 0 ? defaultCheckedIcon : _props$checkedIcon,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$icon = props.icon,\n      icon = _props$icon === void 0 ? defaultIcon : _props$icon,\n      nameProp = props.name,\n      onChangeProp = props.onChange,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    color: color,\n    size: size\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  var radioGroup = useRadioGroup();\n  var checked = checkedProp;\n  var onChange = createChainedFunction(onChangeProp, radioGroup && radioGroup.onChange);\n  var name = nameProp;\n\n  if (radioGroup) {\n    if (typeof checked === 'undefined') {\n      checked = areEqualValues(radioGroup.value, props.value);\n    }\n\n    if (typeof name === 'undefined') {\n      name = radioGroup.name;\n    }\n  }\n\n  return /*#__PURE__*/_jsx(RadioRoot, _extends({\n    type: \"radio\",\n    icon: /*#__PURE__*/React.cloneElement(icon, {\n      fontSize: (_defaultIcon$props$fo = defaultIcon.props.fontSize) != null ? _defaultIcon$props$fo : size\n    }),\n    checkedIcon: /*#__PURE__*/React.cloneElement(checkedIcon, {\n      fontSize: (_defaultCheckedIcon$p = defaultCheckedIcon.props.fontSize) != null ? _defaultCheckedIcon$p : size\n    }),\n    ownerState: ownerState,\n    classes: classes,\n    name: name,\n    checked: checked,\n    onChange: onChange,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default Radio;","import * as React from 'react';\nimport RadioGroupContext from './RadioGroupContext';\nexport default function useRadioGroup() {\n  return React.useContext(RadioGroupContext);\n}","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getFormGroupUtilityClass(slot) {\n  return generateUtilityClass('MuiFormGroup', slot);\n}\nvar formGroupClasses = generateUtilityClasses('MuiFormGroup', ['root', 'row']);\nexport default formGroupClasses;","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"className\", \"row\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport { getFormGroupUtilityClass } from './formGroupClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      row = ownerState.row;\n  var slots = {\n    root: ['root', row && 'row']\n  };\n  return composeClasses(slots, getFormGroupUtilityClass, classes);\n};\n\nvar FormGroupRoot = styled('div', {\n  name: 'MuiFormGroup',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, ownerState.row && styles.row];\n  }\n})(function (_ref) {\n  var ownerState = _ref.ownerState;\n  return _extends({\n    display: 'flex',\n    flexDirection: 'column',\n    flexWrap: 'wrap'\n  }, ownerState.row && {\n    flexDirection: 'row'\n  });\n});\n/**\n * `FormGroup` wraps controls such as `Checkbox` and `Switch`.\n * It provides compact row layout.\n * For the `Radio`, you should be using the `RadioGroup` component instead of this one.\n */\n\nvar FormGroup = /*#__PURE__*/React.forwardRef(function FormGroup(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiFormGroup'\n  });\n\n  var className = props.className,\n      _props$row = props.row,\n      row = _props$row === void 0 ? false : _props$row,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    row: row\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(FormGroupRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default FormGroup;","import _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"actions\", \"children\", \"defaultValue\", \"name\", \"onChange\", \"value\"];\nimport * as React from 'react';\nimport FormGroup from '../FormGroup';\nimport useForkRef from '../utils/useForkRef';\nimport useControlled from '../utils/useControlled';\nimport RadioGroupContext from './RadioGroupContext';\nimport useId from '../utils/useId';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar RadioGroup = /*#__PURE__*/React.forwardRef(function RadioGroup(props, ref) {\n  var actions = props.actions,\n      children = props.children,\n      defaultValue = props.defaultValue,\n      nameProp = props.name,\n      onChange = props.onChange,\n      valueProp = props.value,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var rootRef = React.useRef(null);\n\n  var _useControlled = useControlled({\n    controlled: valueProp,\n    default: defaultValue,\n    name: 'RadioGroup'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      value = _useControlled2[0],\n      setValueState = _useControlled2[1];\n\n  React.useImperativeHandle(actions, function () {\n    return {\n      focus: function focus() {\n        var input = rootRef.current.querySelector('input:not(:disabled):checked');\n\n        if (!input) {\n          input = rootRef.current.querySelector('input:not(:disabled)');\n        }\n\n        if (input) {\n          input.focus();\n        }\n      }\n    };\n  }, []);\n  var handleRef = useForkRef(ref, rootRef);\n\n  var handleChange = function handleChange(event) {\n    setValueState(event.target.value);\n\n    if (onChange) {\n      onChange(event, event.target.value);\n    }\n  };\n\n  var name = useId(nameProp);\n  return /*#__PURE__*/_jsx(RadioGroupContext.Provider, {\n    value: {\n      name: name,\n      onChange: handleChange,\n      value: value\n    },\n    children: /*#__PURE__*/_jsx(FormGroup, _extends({\n      role: \"radiogroup\",\n      ref: handleRef\n    }, other, {\n      children: children\n    }))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default RadioGroup;","import * as React from 'react';\n/**\n * @ignore - internal component.\n */\n\nvar RadioGroupContext = /*#__PURE__*/React.createContext(undefined);\n\nif (process.env.NODE_ENV !== 'production') {\n  RadioGroupContext.displayName = 'RadioGroupContext';\n}\n\nexport default RadioGroupContext;","import createStyled from './createStyled';\nvar styled = createStyled();\nexport default styled;","/**\n * Helpers.\n */\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n\n  throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val));\n};\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\n\nfunction parse(str) {\n  str = String(str);\n\n  if (str.length > 100) {\n    return;\n  }\n\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);\n\n  if (!match) {\n    return;\n  }\n\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n\n    default:\n      return undefined;\n  }\n}\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n\n  return ms + 'ms';\n}\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n\n  return ms + ' ms';\n}\n/**\n * Pluralization helper.\n */\n\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\nexports.destroy = function () {\n  var warned = false;\n  return function () {\n    if (!warned) {\n      warned = true;\n      console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n    }\n  };\n}();\n/**\n * Colors.\n */\n\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\n\n\nexports.log = console.debug || console.log || function () {};\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  } // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};","var _toConsumableArray = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  createDebug.destroy = destroy;\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n    var enableOverride = null;\n    var namespacesCache;\n    var enabledCache;\n\n    function debug() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return '%';\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.useColors = createDebug.useColors();\n    debug.color = createDebug.selectColor(namespace);\n    debug.extend = extend;\n    debug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n    Object.defineProperty(debug, 'enabled', {\n      enumerable: true,\n      configurable: false,\n      get: function get() {\n        if (enableOverride !== null) {\n          return enableOverride;\n        }\n\n        if (namespacesCache !== createDebug.namespaces) {\n          namespacesCache = createDebug.namespaces;\n          enabledCache = createDebug.enabled(namespace);\n        }\n\n        return enabledCache;\n      },\n      set: function set(v) {\n        enableOverride = v;\n      }\n    }); // Env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    return debug;\n  }\n\n  function extend(namespace, delimiter) {\n    var newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n    newDebug.log = this.log;\n    return newDebug;\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.namespaces = namespaces;\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @return {String} namespaces\n  * @api public\n  */\n\n\n  function disable() {\n    var namespaces = [].concat(_toConsumableArray(createDebug.names.map(toNamespace)), _toConsumableArray(createDebug.skips.map(toNamespace).map(function (namespace) {\n      return '-' + namespace;\n    }))).join(',');\n    createDebug.enable('');\n    return namespaces;\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Convert regexp to namespace\n  *\n  * @param {RegExp} regxep\n  * @return {String} namespace\n  * @api private\n  */\n\n\n  function toNamespace(regexp) {\n    return regexp.toString().substring(2, regexp.toString().length - 2).replace(/\\.\\*\\?$/, '*');\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n  /**\n  * XXX DO NOT USE. This is a temporary stub function.\n  * XXX It WILL be removed in the next major release.\n  */\n\n\n  function destroy() {\n    console.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\n/* eslint-disable no-restricted-globals, no-restricted-syntax */\n\n/* global SharedArrayBuffer */\n\n/** @type {<T extends (...args: any) => any>(target: T) => (thisArg: ThisType<T>, ...args: any[]) => any} */\nfunction uncurryThis(target) {\n  return function (thisArg) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return ReflectApply(target, thisArg, args);\n  };\n}\n/** @type {(target: any, key: string | symbol) => (thisArg: any, ...args: any[]) => any} */\n\n\nfunction uncurryThisGetter(target, key) {\n  return uncurryThis(ReflectGetOwnPropertyDescriptor(target, key).get);\n} // Reflect\n\n\nvar ReflectApply = Reflect.apply,\n    ReflectConstruct = Reflect.construct,\n    ReflectDefineProperty = Reflect.defineProperty,\n    ReflectGet = Reflect.get,\n    ReflectGetOwnPropertyDescriptor = Reflect.getOwnPropertyDescriptor,\n    ReflectGetPrototypeOf = Reflect.getPrototypeOf,\n    ReflectHas = Reflect.has,\n    ReflectOwnKeys = Reflect.ownKeys,\n    ReflectSet = Reflect.set,\n    ReflectSetPrototypeOf = Reflect.setPrototypeOf; // Proxy\n\nexport { ReflectApply, ReflectConstruct, ReflectDefineProperty, ReflectGet, ReflectGetOwnPropertyDescriptor, ReflectGetPrototypeOf, ReflectHas, ReflectOwnKeys, ReflectSet, ReflectSetPrototypeOf };\nexport var NativeProxy = Proxy; // Number\n\nexport var NativeNumber = Number;\nvar NumberIsFinite = NativeNumber.isFinite,\n    NumberIsNaN = NativeNumber.isNaN; // Symbol\n\nexport { NumberIsFinite, NumberIsNaN };\nvar SymbolIterator = Symbol.iterator,\n    SymbolSpecies = Symbol.species,\n    SymbolToStringTag = Symbol.toStringTag,\n    SymbolFor = Symbol.for; // Object\n\nexport { SymbolIterator, SymbolSpecies, SymbolToStringTag, SymbolFor };\nexport var NativeObject = Object;\nvar ObjectCreate = NativeObject.create,\n    ObjectDefineProperty = NativeObject.defineProperty,\n    ObjectFreeze = NativeObject.freeze,\n    ObjectIs = NativeObject.is;\nexport { ObjectCreate, ObjectDefineProperty, ObjectFreeze, ObjectIs };\nvar ObjectPrototype = NativeObject.prototype;\nexport var ObjectPrototypeIsPrototypeOf = uncurryThis(ObjectPrototype.isPrototypeOf);\n/** @type {(object: object, key: PropertyKey) => boolean} */\n\nexport var ObjectHasOwn =\n/** @type {any} */\nNativeObject.hasOwn || uncurryThis(ObjectPrototype.hasOwnProperty); // Array\n\nvar NativeArray = Array;\nexport var ArrayIsArray = NativeArray.isArray;\nvar ArrayPrototype = NativeArray.prototype;\n/** @type {(array: ArrayLike<unknown>, separator?: string) => string} */\n\nexport var ArrayPrototypeJoin = uncurryThis(ArrayPrototype.join);\n/** @type {<T>(array: T[], ...items: T[]) => number} */\n\nexport var ArrayPrototypePush = uncurryThis(ArrayPrototype.push);\n/** @type {(array: ArrayLike<unknown>, ...opts: any[]) => string} */\n\nexport var ArrayPrototypeToLocaleString = uncurryThis(ArrayPrototype.toLocaleString);\nexport var NativeArrayPrototypeSymbolIterator = ArrayPrototype[SymbolIterator];\n/** @type {<T>(array: T[]) => IterableIterator<T>} */\n\nexport var ArrayPrototypeSymbolIterator = uncurryThis(NativeArrayPrototypeSymbolIterator); // Math\n\nexport var MathTrunc = Math.trunc; // ArrayBuffer\n\nexport var NativeArrayBuffer = ArrayBuffer;\nexport var ArrayBufferIsView = NativeArrayBuffer.isView;\n/** @type {(buffer: ArrayBuffer, begin?: number, end?: number) => number} */\n\nexport var ArrayBufferPrototypeSlice = uncurryThis(NativeArrayBuffer.prototype.slice);\n/** @type {(buffer: ArrayBuffer) => ArrayBuffer} */\n\nexport var ArrayBufferPrototypeGetByteLength = uncurryThisGetter(NativeArrayBuffer.prototype, \"byteLength\"); // SharedArrayBuffer\n\nexport var NativeSharedArrayBuffer = typeof SharedArrayBuffer !== \"undefined\" ? SharedArrayBuffer : null;\n/** @type {(buffer: SharedArrayBuffer) => SharedArrayBuffer} */\n\nexport var SharedArrayBufferPrototypeGetByteLength = NativeSharedArrayBuffer && uncurryThisGetter(NativeSharedArrayBuffer.prototype, \"byteLength\"); // TypedArray\n\n/** @typedef {Uint8Array|Uint8ClampedArray|Uint16Array|Uint32Array|Int8Array|Int16Array|Int32Array|Float32Array|Float64Array|BigUint64Array|BigInt64Array} TypedArray */\n\n/** @type {any} */\n\nexport var TypedArray = ReflectGetPrototypeOf(Uint8Array);\nvar TypedArrayFrom = TypedArray.from;\nexport var TypedArrayPrototype = TypedArray.prototype;\nexport var NativeTypedArrayPrototypeSymbolIterator = TypedArrayPrototype[SymbolIterator];\n/** @type {(typedArray: TypedArray) => IterableIterator<number>} */\n\nexport var TypedArrayPrototypeKeys = uncurryThis(TypedArrayPrototype.keys);\n/** @type {(typedArray: TypedArray) => IterableIterator<number>} */\n\nexport var TypedArrayPrototypeValues = uncurryThis(TypedArrayPrototype.values);\n/** @type {(typedArray: TypedArray) => IterableIterator<[number, number]>} */\n\nexport var TypedArrayPrototypeEntries = uncurryThis(TypedArrayPrototype.entries);\n/** @type {(typedArray: TypedArray, array: ArrayLike<number>, offset?: number) => void} */\n\nexport var TypedArrayPrototypeSet = uncurryThis(TypedArrayPrototype.set);\n/** @type {<T extends TypedArray>(typedArray: T) => T} */\n\nexport var TypedArrayPrototypeReverse = uncurryThis(TypedArrayPrototype.reverse);\n/** @type {<T extends TypedArray>(typedArray: T, value: number, start?: number, end?: number) => T} */\n\nexport var TypedArrayPrototypeFill = uncurryThis(TypedArrayPrototype.fill);\n/** @type {<T extends TypedArray>(typedArray: T, target: number, start: number, end?: number) => T} */\n\nexport var TypedArrayPrototypeCopyWithin = uncurryThis(TypedArrayPrototype.copyWithin);\n/** @type {<T extends TypedArray>(typedArray: T, compareFn?: (a: number, b: number) => number) => T} */\n\nexport var TypedArrayPrototypeSort = uncurryThis(TypedArrayPrototype.sort);\n/** @type {<T extends TypedArray>(typedArray: T, start?: number, end?: number) => T} */\n\nexport var TypedArrayPrototypeSlice = uncurryThis(TypedArrayPrototype.slice);\n/** @type {<T extends TypedArray>(typedArray: T, start?: number, end?: number) => T} */\n\nexport var TypedArrayPrototypeSubarray = uncurryThis(TypedArrayPrototype.subarray);\n/** @type {((typedArray: TypedArray) => ArrayBuffer)} */\n\nexport var TypedArrayPrototypeGetBuffer = uncurryThisGetter(TypedArrayPrototype, \"buffer\");\n/** @type {((typedArray: TypedArray) => number)} */\n\nexport var TypedArrayPrototypeGetByteOffset = uncurryThisGetter(TypedArrayPrototype, \"byteOffset\");\n/** @type {((typedArray: TypedArray) => number)} */\n\nexport var TypedArrayPrototypeGetLength = uncurryThisGetter(TypedArrayPrototype, \"length\");\n/** @type {(target: unknown) => string} */\n\nexport var TypedArrayPrototypeGetSymbolToStringTag = uncurryThisGetter(TypedArrayPrototype, SymbolToStringTag); // Uint16Array\n\nexport var NativeUint16Array = Uint16Array;\n/** @type {Uint16ArrayConstructor[\"from\"]} */\n\nexport var Uint16ArrayFrom = function Uint16ArrayFrom() {\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  return ReflectApply(TypedArrayFrom, NativeUint16Array, args);\n}; // Uint32Array\n\nexport var NativeUint32Array = Uint32Array; // Float32Array\n\nexport var NativeFloat32Array = Float32Array; // ArrayIterator\n\n/** @type {any} */\n\nexport var ArrayIteratorPrototype = ReflectGetPrototypeOf([][SymbolIterator]());\n/** @type {<T>(arrayIterator: IterableIterator<T>) => IteratorResult<T>} */\n\nexport var ArrayIteratorPrototypeNext = uncurryThis(ArrayIteratorPrototype.next); // Generator\n\n/** @type {<T = unknown, TReturn = any, TNext = unknown>(generator: Generator<T, TReturn, TNext>, value?: TNext) => T} */\n\nexport var GeneratorPrototypeNext = uncurryThis( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n})().next); // Iterator\n\nexport var IteratorPrototype = ReflectGetPrototypeOf(ArrayIteratorPrototype); // DataView\n\nvar DataViewPrototype = DataView.prototype;\n/** @type {(dataView: DataView, byteOffset: number, littleEndian?: boolean) => number} */\n\nexport var DataViewPrototypeGetUint16 = uncurryThis(DataViewPrototype.getUint16);\n/** @type {(dataView: DataView, byteOffset: number, value: number, littleEndian?: boolean) => void} */\n\nexport var DataViewPrototypeSetUint16 = uncurryThis(DataViewPrototype.setUint16); // Error\n\nexport var NativeTypeError = TypeError;\nexport var NativeRangeError = RangeError; // Set\n\n/**\n * Do not construct with arguments to avoid calling the \"add\" method\n *\n * @type {{new <T = any>(): Set<T>}}\n */\n\nexport var NativeSet = Set;\nvar SetPrototype = NativeSet.prototype;\n/** @type {<T>(set: Set<T>, value: T) => Set<T>} */\n\nexport var SetPrototypeAdd = uncurryThis(SetPrototype.add);\n/** @type {<T>(set: Set<T>, value: T) => boolean} */\n\nexport var SetPrototypeHas = uncurryThis(SetPrototype.has); // WeakMap\n\n/**\n * Do not construct with arguments to avoid calling the \"set\" method\n *\n * @type {{new <K extends {}, V>(): WeakMap<K, V>}}\n */\n\nexport var NativeWeakMap = WeakMap;\nvar WeakMapPrototype = NativeWeakMap.prototype;\n/** @type {<K extends {}, V>(weakMap: WeakMap<K, V>, key: K) => V} */\n\nexport var WeakMapPrototypeGet = uncurryThis(WeakMapPrototype.get);\n/** @type {<K extends {}, V>(weakMap: WeakMap<K, V>, key: K) => boolean} */\n\nexport var WeakMapPrototypeHas = uncurryThis(WeakMapPrototype.has);\n/** @type {<K extends {}, V>(weakMap: WeakMap<K, V>, key: K, value: V) => WeakMap} */\n\nexport var WeakMapPrototypeSet = uncurryThis(WeakMapPrototype.set);","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { ArrayIteratorPrototype, ArrayIteratorPrototypeNext, ArrayPrototypeSymbolIterator, GeneratorPrototypeNext, IteratorPrototype, NativeArrayPrototypeSymbolIterator, NativeWeakMap, ObjectCreate, ObjectDefineProperty, ReflectGetOwnPropertyDescriptor, ReflectOwnKeys, SymbolIterator, WeakMapPrototypeGet, WeakMapPrototypeSet } from \"./primordials.mjs\";\n/** @type {WeakMap<{}, IterableIterator<any>>} */\n\nvar arrayIterators = new NativeWeakMap();\nvar SafeIteratorPrototype = ObjectCreate(null, _defineProperty({\n  next: {\n    value: function next() {\n      var arrayIterator = WeakMapPrototypeGet(arrayIterators, this);\n      return ArrayIteratorPrototypeNext(arrayIterator);\n    }\n  }\n}, SymbolIterator, {\n  value: function values() {\n    return this;\n  }\n}));\n/**\n * Wrap the Array around the SafeIterator If Array.prototype [@@iterator] has been modified\n *\n * @type {<T>(array: T[]) => Iterable<T>}\n */\n\nexport function safeIfNeeded(array) {\n  if (array[SymbolIterator] === NativeArrayPrototypeSymbolIterator) {\n    return array;\n  }\n\n  var safe = ObjectCreate(SafeIteratorPrototype);\n  WeakMapPrototypeSet(arrayIterators, safe, ArrayPrototypeSymbolIterator(array));\n  return safe;\n}\n/** @type {WeakMap<{}, Generator<any>>} */\n\nvar generators = new NativeWeakMap();\n/** @see https://tc39.es/ecma262/#sec-%arrayiteratorprototype%-object */\n\nvar DummyArrayIteratorPrototype = ObjectCreate(IteratorPrototype, {\n  next: {\n    value: function next() {\n      var generator = WeakMapPrototypeGet(generators, this);\n      return GeneratorPrototypeNext(generator);\n    },\n    writable: true,\n    configurable: true\n  }\n});\n\nvar _iterator = _createForOfIteratorHelper(ReflectOwnKeys(ArrayIteratorPrototype)),\n    _step;\n\ntry {\n  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n    var key = _step.value;\n\n    // next method has already defined\n    if (key === \"next\") {\n      continue;\n    } // Copy ArrayIteratorPrototype descriptors to DummyArrayIteratorPrototype\n\n\n    ObjectDefineProperty(DummyArrayIteratorPrototype, key, ReflectGetOwnPropertyDescriptor(ArrayIteratorPrototype, key));\n  }\n  /**\n   * Wrap the Generator around the dummy ArrayIterator\n   *\n   * @type {<T>(generator: Generator<T>) => IterableIterator<T>}\n   */\n\n} catch (err) {\n  _iterator.e(err);\n} finally {\n  _iterator.f();\n}\n\nexport function wrap(generator) {\n  var dummy = ObjectCreate(DummyArrayIteratorPrototype);\n  WeakMapPrototypeSet(generators, dummy, generator);\n  return dummy;\n}","// algorithm: http://fox-toolkit.org/ftp/fasthalffloatconversion.pdf\nimport { NativeArrayBuffer, NativeFloat32Array, NativeUint32Array } from \"./primordials.mjs\";\nvar buffer = new NativeArrayBuffer(4);\nvar floatView = new NativeFloat32Array(buffer);\nvar uint32View = new NativeUint32Array(buffer);\nvar baseTable = new NativeUint32Array(512);\nvar shiftTable = new NativeUint32Array(512);\n\nfor (var i = 0; i < 256; ++i) {\n  var e = i - 127; // very small number (0, -0)\n\n  if (e < -27) {\n    baseTable[i] = 0x0000;\n    baseTable[i | 0x100] = 0x8000;\n    shiftTable[i] = 24;\n    shiftTable[i | 0x100] = 24; // small number (denorm)\n  } else if (e < -14) {\n    baseTable[i] = 0x0400 >> -e - 14;\n    baseTable[i | 0x100] = 0x0400 >> -e - 14 | 0x8000;\n    shiftTable[i] = -e - 1;\n    shiftTable[i | 0x100] = -e - 1; // normal number\n  } else if (e <= 15) {\n    baseTable[i] = e + 15 << 10;\n    baseTable[i | 0x100] = e + 15 << 10 | 0x8000;\n    shiftTable[i] = 13;\n    shiftTable[i | 0x100] = 13; // large number (Infinity, -Infinity)\n  } else if (e < 128) {\n    baseTable[i] = 0x7c00;\n    baseTable[i | 0x100] = 0xfc00;\n    shiftTable[i] = 24;\n    shiftTable[i | 0x100] = 24; // stay (NaN, Infinity, -Infinity)\n  } else {\n    baseTable[i] = 0x7c00;\n    baseTable[i | 0x100] = 0xfc00;\n    shiftTable[i] = 13;\n    shiftTable[i | 0x100] = 13;\n  }\n}\n/**\n * round a number to a half float number bits.\n *\n * @param {unknown} num - double float\n * @returns {number} half float number bits\n */\n\n\nexport function roundToFloat16Bits(num) {\n  floatView[0] =\n  /** @type {any} */\n  num;\n  var f = uint32View[0];\n  var e = f >> 23 & 0x1ff;\n  return baseTable[e] + ((f & 0x007fffff) >> shiftTable[e]);\n}\nvar mantissaTable = new NativeUint32Array(2048);\nvar exponentTable = new NativeUint32Array(64);\nvar offsetTable = new NativeUint32Array(64);\nmantissaTable[0] = 0;\n\nfor (var _i = 1; _i < 1024; ++_i) {\n  var m = _i << 13; // zero pad mantissa bits\n\n  var _e = 0; // zero exponent\n  // normalized\n\n  while ((m & 0x00800000) === 0) {\n    _e -= 0x00800000; // decrement exponent\n\n    m <<= 1;\n  }\n\n  m &= ~0x00800000; // clear leading 1 bit\n\n  _e += 0x38800000; // adjust bias\n\n  mantissaTable[_i] = m | _e;\n}\n\nfor (var _i2 = 1024; _i2 < 2048; ++_i2) {\n  mantissaTable[_i2] = 0x38000000 + (_i2 - 1024 << 13);\n}\n\nexponentTable[0] = 0;\n\nfor (var _i3 = 1; _i3 < 31; ++_i3) {\n  exponentTable[_i3] = _i3 << 23;\n}\n\nexponentTable[31] = 0x47800000;\nexponentTable[32] = 0x80000000;\n\nfor (var _i4 = 33; _i4 < 63; ++_i4) {\n  exponentTable[_i4] = 0x80000000 + (_i4 - 32 << 23);\n}\n\nexponentTable[63] = 0xc7800000;\noffsetTable[0] = 0;\n\nfor (var _i5 = 1; _i5 < 64; ++_i5) {\n  if (_i5 === 32) {\n    offsetTable[_i5] = 0;\n  } else {\n    offsetTable[_i5] = 1024;\n  }\n}\n/**\n * convert a half float number bits to a number.\n *\n * @param {number} float16bits - half float number bits\n * @returns {number} double float\n */\n\n\nexport function convertToNumber(float16bits) {\n  var m = float16bits >> 10;\n  uint32View[0] = mantissaTable[offsetTable[m] + (float16bits & 0x3ff)] + exponentTable[m];\n  return floatView[0];\n}","import _toConsumableArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport { safeIfNeeded } from \"./_util/arrayIterator.mjs\";\nimport { convertToNumber, roundToFloat16Bits } from \"./_util/converter.mjs\";\nimport { DataViewPrototypeGetUint16, DataViewPrototypeSetUint16 } from \"./_util/primordials.mjs\";\n/**\n * returns an unsigned 16-bit float at the specified byte offset from the start of the DataView.\n *\n * @param {DataView} dataView\n * @param {number} byteOffset\n * @param {[boolean]} opts\n * @returns {number}\n */\n\nexport function getFloat16(dataView, byteOffset) {\n  for (var _len = arguments.length, opts = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    opts[_key - 2] = arguments[_key];\n  }\n\n  return convertToNumber(DataViewPrototypeGetUint16.apply(void 0, [dataView, byteOffset].concat(_toConsumableArray(safeIfNeeded(opts)))));\n}\n/**\n * stores an unsigned 16-bit float value at the specified byte offset from the start of the DataView.\n *\n * @param {DataView} dataView\n * @param {number} byteOffset\n * @param {number} value\n * @param {[boolean]} opts\n */\n\nexport function setFloat16(dataView, byteOffset, value) {\n  for (var _len2 = arguments.length, opts = new Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n    opts[_key2 - 3] = arguments[_key2];\n  }\n\n  return DataViewPrototypeSetUint16.apply(void 0, [dataView, byteOffset, roundToFloat16Bits(value)].concat(_toConsumableArray(safeIfNeeded(opts))));\n}","export function fromWhiteIsZero(raster, max) {\n  var width = raster.width,\n      height = raster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n  var value;\n\n  for (var i = 0, j = 0; i < raster.length; ++i, j += 3) {\n    value = 256 - raster[i] / max * 256;\n    rgbRaster[j] = value;\n    rgbRaster[j + 1] = value;\n    rgbRaster[j + 2] = value;\n  }\n\n  return rgbRaster;\n}\nexport function fromBlackIsZero(raster, max) {\n  var width = raster.width,\n      height = raster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n  var value;\n\n  for (var i = 0, j = 0; i < raster.length; ++i, j += 3) {\n    value = raster[i] / max * 256;\n    rgbRaster[j] = value;\n    rgbRaster[j + 1] = value;\n    rgbRaster[j + 2] = value;\n  }\n\n  return rgbRaster;\n}\nexport function fromPalette(raster, colorMap) {\n  var width = raster.width,\n      height = raster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n  var greenOffset = colorMap.length / 3;\n  var blueOffset = colorMap.length / 3 * 2;\n\n  for (var i = 0, j = 0; i < raster.length; ++i, j += 3) {\n    var mapIndex = raster[i];\n    rgbRaster[j] = colorMap[mapIndex] / 65536 * 256;\n    rgbRaster[j + 1] = colorMap[mapIndex + greenOffset] / 65536 * 256;\n    rgbRaster[j + 2] = colorMap[mapIndex + blueOffset] / 65536 * 256;\n  }\n\n  return rgbRaster;\n}\nexport function fromCMYK(cmykRaster) {\n  var width = cmykRaster.width,\n      height = cmykRaster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n\n  for (var i = 0, j = 0; i < cmykRaster.length; i += 4, j += 3) {\n    var c = cmykRaster[i];\n    var m = cmykRaster[i + 1];\n    var y = cmykRaster[i + 2];\n    var k = cmykRaster[i + 3];\n    rgbRaster[j] = 255 * ((255 - c) / 256) * ((255 - k) / 256);\n    rgbRaster[j + 1] = 255 * ((255 - m) / 256) * ((255 - k) / 256);\n    rgbRaster[j + 2] = 255 * ((255 - y) / 256) * ((255 - k) / 256);\n  }\n\n  return rgbRaster;\n}\nexport function fromYCbCr(yCbCrRaster) {\n  var width = yCbCrRaster.width,\n      height = yCbCrRaster.height;\n  var rgbRaster = new Uint8ClampedArray(width * height * 3);\n\n  for (var i = 0, j = 0; i < yCbCrRaster.length; i += 3, j += 3) {\n    var y = yCbCrRaster[i];\n    var cb = yCbCrRaster[i + 1];\n    var cr = yCbCrRaster[i + 2];\n    rgbRaster[j] = y + 1.40200 * (cr - 0x80);\n    rgbRaster[j + 1] = y - 0.34414 * (cb - 0x80) - 0.71414 * (cr - 0x80);\n    rgbRaster[j + 2] = y + 1.77200 * (cb - 0x80);\n  }\n\n  return rgbRaster;\n}\nvar Xn = 0.95047;\nvar Yn = 1.00000;\nvar Zn = 1.08883; // from https://github.com/antimatter15/rgb-lab/blob/master/color.js\n\nexport function fromCIELab(cieLabRaster) {\n  var width = cieLabRaster.width,\n      height = cieLabRaster.height;\n  var rgbRaster = new Uint8Array(width * height * 3);\n\n  for (var i = 0, j = 0; i < cieLabRaster.length; i += 3, j += 3) {\n    var L = cieLabRaster[i + 0];\n    var a_ = cieLabRaster[i + 1] << 24 >> 24; // conversion from uint8 to int8\n\n    var b_ = cieLabRaster[i + 2] << 24 >> 24; // same\n\n    var y = (L + 16) / 116;\n    var x = a_ / 500 + y;\n    var z = y - b_ / 200;\n    var r = void 0;\n    var g = void 0;\n    var b = void 0;\n    x = Xn * (x * x * x > 0.008856 ? x * x * x : (x - 16 / 116) / 7.787);\n    y = Yn * (y * y * y > 0.008856 ? y * y * y : (y - 16 / 116) / 7.787);\n    z = Zn * (z * z * z > 0.008856 ? z * z * z : (z - 16 / 116) / 7.787);\n    r = x * 3.2406 + y * -1.5372 + z * -0.4986;\n    g = x * -0.9689 + y * 1.8758 + z * 0.0415;\n    b = x * 0.0557 + y * -0.2040 + z * 1.0570;\n    r = r > 0.0031308 ? 1.055 * Math.pow(r, 1 / 2.4) - 0.055 : 12.92 * r;\n    g = g > 0.0031308 ? 1.055 * Math.pow(g, 1 / 2.4) - 0.055 : 12.92 * g;\n    b = b > 0.0031308 ? 1.055 * Math.pow(b, 1 / 2.4) - 0.055 : 12.92 * b;\n    rgbRaster[j] = Math.max(0, Math.min(1, r)) * 255;\n    rgbRaster[j + 1] = Math.max(0, Math.min(1, g)) * 255;\n    rgbRaster[j + 2] = Math.max(0, Math.min(1, b)) * 255;\n  }\n\n  return rgbRaster;\n}","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\nvar registry = new Map();\nexport function addDecoder(cases, importFn) {\n  if (!Array.isArray(cases)) {\n    cases = [cases]; // eslint-disable-line no-param-reassign\n  }\n\n  cases.forEach(function (c) {\n    return registry.set(c, importFn);\n  });\n}\nexport function getDecoder(_x) {\n  return _getDecoder.apply(this, arguments);\n} // Add default decoders to registry (end-user may override with other implementations)\n\nfunction _getDecoder() {\n  _getDecoder = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fileDirectory) {\n    var importFn, Decoder;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            importFn = registry.get(fileDirectory.Compression);\n\n            if (importFn) {\n              _context.next = 3;\n              break;\n            }\n\n            throw new Error(\"Unknown compression method identifier: \".concat(fileDirectory.Compression));\n\n          case 3:\n            _context.next = 5;\n            return importFn();\n\n          case 5:\n            Decoder = _context.sent;\n            return _context.abrupt(\"return\", new Decoder(fileDirectory));\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getDecoder.apply(this, arguments);\n}\n\naddDecoder([undefined, 1], function () {\n  return import('./raw').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(5, function () {\n  return import('./lzw').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(6, function () {\n  throw new Error('old style JPEG compression is not supported.');\n});\naddDecoder(7, function () {\n  return import('./jpeg').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder([8, 32946], function () {\n  return import('./deflate').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(32773, function () {\n  return import('./packbits').then(function (m) {\n    return m.default;\n  });\n});\naddDecoder(34887, function () {\n  return import('./lerc').then(function (m) {\n    return m.default;\n  });\n});","/**\n * @module resample\n */\nfunction copyNewSize(array, width, height) {\n  var samplesPerPixel = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  return new (Object.getPrototypeOf(array).constructor)(width * height * samplesPerPixel);\n}\n/**\n * Resample the input arrays using nearest neighbor value selection.\n * @param {TypedArray[]} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @returns {TypedArray[]} The resampled rasters\n */\n\n\nexport function resampleNearest(valueArrays, inWidth, inHeight, outWidth, outHeight) {\n  var relX = inWidth / outWidth;\n  var relY = inHeight / outHeight;\n  return valueArrays.map(function (array) {\n    var newArray = copyNewSize(array, outWidth, outHeight);\n\n    for (var y = 0; y < outHeight; ++y) {\n      var cy = Math.min(Math.round(relY * y), inHeight - 1);\n\n      for (var x = 0; x < outWidth; ++x) {\n        var cx = Math.min(Math.round(relX * x), inWidth - 1);\n        var value = array[cy * inWidth + cx];\n        newArray[y * outWidth + x] = value;\n      }\n    }\n\n    return newArray;\n  });\n} // simple linear interpolation, code from:\n// https://en.wikipedia.org/wiki/Linear_interpolation#Programming_language_support\n\nfunction lerp(v0, v1, t) {\n  return (1 - t) * v0 + t * v1;\n}\n/**\n * Resample the input arrays using bilinear interpolation.\n * @param {TypedArray[]} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @returns {TypedArray[]} The resampled rasters\n */\n\n\nexport function resampleBilinear(valueArrays, inWidth, inHeight, outWidth, outHeight) {\n  var relX = inWidth / outWidth;\n  var relY = inHeight / outHeight;\n  return valueArrays.map(function (array) {\n    var newArray = copyNewSize(array, outWidth, outHeight);\n\n    for (var y = 0; y < outHeight; ++y) {\n      var rawY = relY * y;\n      var yl = Math.floor(rawY);\n      var yh = Math.min(Math.ceil(rawY), inHeight - 1);\n\n      for (var x = 0; x < outWidth; ++x) {\n        var rawX = relX * x;\n        var tx = rawX % 1;\n        var xl = Math.floor(rawX);\n        var xh = Math.min(Math.ceil(rawX), inWidth - 1);\n        var ll = array[yl * inWidth + xl];\n        var hl = array[yl * inWidth + xh];\n        var lh = array[yh * inWidth + xl];\n        var hh = array[yh * inWidth + xh];\n        var value = lerp(lerp(ll, hl, tx), lerp(lh, hh, tx), rawY % 1);\n        newArray[y * outWidth + x] = value;\n      }\n    }\n\n    return newArray;\n  });\n}\n/**\n * Resample the input arrays using the selected resampling method.\n * @param {TypedArray[]} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {string} [method = 'nearest'] The desired resampling method\n * @returns {TypedArray[]} The resampled rasters\n */\n\nexport function resample(valueArrays, inWidth, inHeight, outWidth, outHeight) {\n  var method = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 'nearest';\n\n  switch (method.toLowerCase()) {\n    case 'nearest':\n      return resampleNearest(valueArrays, inWidth, inHeight, outWidth, outHeight);\n\n    case 'bilinear':\n    case 'linear':\n      return resampleBilinear(valueArrays, inWidth, inHeight, outWidth, outHeight);\n\n    default:\n      throw new Error(\"Unsupported resampling method: '\".concat(method, \"'\"));\n  }\n}\n/**\n * Resample the pixel interleaved input array using nearest neighbor value selection.\n * @param {TypedArray} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {number} samples The number of samples per pixel for pixel\n *                         interleaved data\n * @returns {TypedArray} The resampled raster\n */\n\nexport function resampleNearestInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples) {\n  var relX = inWidth / outWidth;\n  var relY = inHeight / outHeight;\n  var newArray = copyNewSize(valueArray, outWidth, outHeight, samples);\n\n  for (var y = 0; y < outHeight; ++y) {\n    var cy = Math.min(Math.round(relY * y), inHeight - 1);\n\n    for (var x = 0; x < outWidth; ++x) {\n      var cx = Math.min(Math.round(relX * x), inWidth - 1);\n\n      for (var i = 0; i < samples; ++i) {\n        var value = valueArray[cy * inWidth * samples + cx * samples + i];\n        newArray[y * outWidth * samples + x * samples + i] = value;\n      }\n    }\n  }\n\n  return newArray;\n}\n/**\n * Resample the pixel interleaved input array using bilinear interpolation.\n * @param {TypedArray} valueArrays The input arrays to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {number} samples The number of samples per pixel for pixel\n *                         interleaved data\n * @returns {TypedArray} The resampled raster\n */\n\nexport function resampleBilinearInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples) {\n  var relX = inWidth / outWidth;\n  var relY = inHeight / outHeight;\n  var newArray = copyNewSize(valueArray, outWidth, outHeight, samples);\n\n  for (var y = 0; y < outHeight; ++y) {\n    var rawY = relY * y;\n    var yl = Math.floor(rawY);\n    var yh = Math.min(Math.ceil(rawY), inHeight - 1);\n\n    for (var x = 0; x < outWidth; ++x) {\n      var rawX = relX * x;\n      var tx = rawX % 1;\n      var xl = Math.floor(rawX);\n      var xh = Math.min(Math.ceil(rawX), inWidth - 1);\n\n      for (var i = 0; i < samples; ++i) {\n        var ll = valueArray[yl * inWidth * samples + xl * samples + i];\n        var hl = valueArray[yl * inWidth * samples + xh * samples + i];\n        var lh = valueArray[yh * inWidth * samples + xl * samples + i];\n        var hh = valueArray[yh * inWidth * samples + xh * samples + i];\n        var value = lerp(lerp(ll, hl, tx), lerp(lh, hh, tx), rawY % 1);\n        newArray[y * outWidth * samples + x * samples + i] = value;\n      }\n    }\n  }\n\n  return newArray;\n}\n/**\n * Resample the pixel interleaved input array using the selected resampling method.\n * @param {TypedArray} valueArray The input array to resample\n * @param {number} inWidth The width of the input rasters\n * @param {number} inHeight The height of the input rasters\n * @param {number} outWidth The desired width of the output rasters\n * @param {number} outHeight The desired height of the output rasters\n * @param {number} samples The number of samples per pixel for pixel\n *                                 interleaved data\n * @param {string} [method = 'nearest'] The desired resampling method\n * @returns {TypedArray} The resampled rasters\n */\n\nexport function resampleInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples) {\n  var method = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 'nearest';\n\n  switch (method.toLowerCase()) {\n    case 'nearest':\n      return resampleNearestInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples);\n\n    case 'bilinear':\n    case 'linear':\n      return resampleBilinearInterleaved(valueArray, inWidth, inHeight, outWidth, outHeight, samples);\n\n    default:\n      throw new Error(\"Unsupported resampling method: '\".concat(method, \"'\"));\n  }\n}","import _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\nimport { getFloat16 } from '@petamoriken/float16';\nimport getAttribute from 'xml-utils/get-attribute';\nimport findTagsByName from 'xml-utils/find-tags-by-name';\nimport { photometricInterpretations, ExtraSamplesValues } from './globals';\nimport { fromWhiteIsZero, fromBlackIsZero, fromPalette, fromCMYK, fromYCbCr, fromCIELab } from './rgb';\nimport { getDecoder } from './compression';\nimport { resample, resampleInterleaved } from './resample';\n\nfunction sum(array, start, end) {\n  var s = 0;\n\n  for (var i = start; i < end; ++i) {\n    s += array[i];\n  }\n\n  return s;\n}\n\nfunction arrayForType(format, bitsPerSample, size) {\n  switch (format) {\n    case 1:\n      // unsigned integer data\n      if (bitsPerSample <= 8) {\n        return new Uint8Array(size);\n      } else if (bitsPerSample <= 16) {\n        return new Uint16Array(size);\n      } else if (bitsPerSample <= 32) {\n        return new Uint32Array(size);\n      }\n\n      break;\n\n    case 2:\n      // twos complement signed integer data\n      if (bitsPerSample === 8) {\n        return new Int8Array(size);\n      } else if (bitsPerSample === 16) {\n        return new Int16Array(size);\n      } else if (bitsPerSample === 32) {\n        return new Int32Array(size);\n      }\n\n      break;\n\n    case 3:\n      // floating point data\n      switch (bitsPerSample) {\n        case 16:\n        case 32:\n          return new Float32Array(size);\n\n        case 64:\n          return new Float64Array(size);\n\n        default:\n          break;\n      }\n\n      break;\n\n    default:\n      break;\n  }\n\n  throw Error('Unsupported data format/bitsPerSample');\n}\n\nfunction needsNormalization(format, bitsPerSample) {\n  if ((format === 1 || format === 2) && bitsPerSample <= 32 && bitsPerSample % 8 === 0) {\n    return false;\n  } else if (format === 3 && (bitsPerSample === 16 || bitsPerSample === 32 || bitsPerSample === 64)) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction normalizeArray(inBuffer, format, planarConfiguration, samplesPerPixel, bitsPerSample, tileWidth, tileHeight) {\n  // const inByteArray = new Uint8Array(inBuffer);\n  var view = new DataView(inBuffer);\n  var outSize = planarConfiguration === 2 ? tileHeight * tileWidth : tileHeight * tileWidth * samplesPerPixel;\n  var samplesToTransfer = planarConfiguration === 2 ? 1 : samplesPerPixel;\n  var outArray = arrayForType(format, bitsPerSample, outSize); // let pixel = 0;\n\n  var bitMask = parseInt('1'.repeat(bitsPerSample), 2);\n\n  if (format === 1) {\n    // unsigned integer\n    // translation of https://github.com/OSGeo/gdal/blob/master/gdal/frmts/gtiff/geotiff.cpp#L7337\n    var pixelBitSkip; // let sampleBitOffset = 0;\n\n    if (planarConfiguration === 1) {\n      pixelBitSkip = samplesPerPixel * bitsPerSample; // sampleBitOffset = (samplesPerPixel - 1) * bitsPerSample;\n    } else {\n      pixelBitSkip = bitsPerSample;\n    } // Bits per line rounds up to next byte boundary.\n\n\n    var bitsPerLine = tileWidth * pixelBitSkip;\n\n    if ((bitsPerLine & 7) !== 0) {\n      bitsPerLine = bitsPerLine + 7 & ~7;\n    }\n\n    for (var y = 0; y < tileHeight; ++y) {\n      var lineBitOffset = y * bitsPerLine;\n\n      for (var x = 0; x < tileWidth; ++x) {\n        var pixelBitOffset = lineBitOffset + x * samplesToTransfer * bitsPerSample;\n\n        for (var i = 0; i < samplesToTransfer; ++i) {\n          var bitOffset = pixelBitOffset + i * bitsPerSample;\n          var outIndex = (y * tileWidth + x) * samplesToTransfer + i;\n          var byteOffset = Math.floor(bitOffset / 8);\n          var innerBitOffset = bitOffset % 8;\n\n          if (innerBitOffset + bitsPerSample <= 8) {\n            outArray[outIndex] = view.getUint8(byteOffset) >> 8 - bitsPerSample - innerBitOffset & bitMask;\n          } else if (innerBitOffset + bitsPerSample <= 16) {\n            outArray[outIndex] = view.getUint16(byteOffset) >> 16 - bitsPerSample - innerBitOffset & bitMask;\n          } else if (innerBitOffset + bitsPerSample <= 24) {\n            var raw = view.getUint16(byteOffset) << 8 | view.getUint8(byteOffset + 2);\n            outArray[outIndex] = raw >> 24 - bitsPerSample - innerBitOffset & bitMask;\n          } else {\n            outArray[outIndex] = view.getUint32(byteOffset) >> 32 - bitsPerSample - innerBitOffset & bitMask;\n          } // let outWord = 0;\n          // for (let bit = 0; bit < bitsPerSample; ++bit) {\n          //   if (inByteArray[bitOffset >> 3]\n          //     & (0x80 >> (bitOffset & 7))) {\n          //     outWord |= (1 << (bitsPerSample - 1 - bit));\n          //   }\n          //   ++bitOffset;\n          // }\n          // outArray[outIndex] = outWord;\n          // outArray[pixel] = outWord;\n          // pixel += 1;\n\n        } // bitOffset = bitOffset + pixelBitSkip - bitsPerSample;\n\n      }\n    }\n  } else if (format === 3) {// floating point\n    // Float16 is handled elsewhere\n    // normalize 16/24 bit floats to 32 bit floats in the array\n    // console.time();\n    // if (bitsPerSample === 16) {\n    //   for (let byte = 0, outIndex = 0; byte < inBuffer.byteLength; byte += 2, ++outIndex) {\n    //     outArray[outIndex] = getFloat16(view, byte);\n    //   }\n    // }\n    // console.timeEnd()\n  }\n\n  return outArray.buffer;\n}\n/**\n * GeoTIFF sub-file image.\n */\n\n\nvar GeoTIFFImage = /*#__PURE__*/function () {\n  /**\n   * @constructor\n   * @param {Object} fileDirectory The parsed file directory\n   * @param {Object} geoKeys The parsed geo-keys\n   * @param {DataView} dataView The DataView for the underlying file.\n   * @param {Boolean} littleEndian Whether the file is encoded in little or big endian\n   * @param {Boolean} cache Whether or not decoded tiles shall be cached\n   * @param {Source} source The datasource to read from\n   */\n  function GeoTIFFImage(fileDirectory, geoKeys, dataView, littleEndian, cache, source) {\n    _classCallCheck(this, GeoTIFFImage);\n\n    this.fileDirectory = fileDirectory;\n    this.geoKeys = geoKeys;\n    this.dataView = dataView;\n    this.littleEndian = littleEndian;\n    this.tiles = cache ? {} : null;\n    this.isTiled = !fileDirectory.StripOffsets;\n    var planarConfiguration = fileDirectory.PlanarConfiguration;\n    this.planarConfiguration = typeof planarConfiguration === 'undefined' ? 1 : planarConfiguration;\n\n    if (this.planarConfiguration !== 1 && this.planarConfiguration !== 2) {\n      throw new Error('Invalid planar configuration.');\n    }\n\n    this.source = source;\n  }\n  /**\n   * Returns the associated parsed file directory.\n   * @returns {Object} the parsed file directory\n   */\n\n\n  _createClass(GeoTIFFImage, [{\n    key: \"getFileDirectory\",\n    value: function getFileDirectory() {\n      return this.fileDirectory;\n    }\n    /**\n     * Returns the associated parsed geo keys.\n     * @returns {Object} the parsed geo keys\n     */\n\n  }, {\n    key: \"getGeoKeys\",\n    value: function getGeoKeys() {\n      return this.geoKeys;\n    }\n    /**\n     * Returns the width of the image.\n     * @returns {Number} the width of the image\n     */\n\n  }, {\n    key: \"getWidth\",\n    value: function getWidth() {\n      return this.fileDirectory.ImageWidth;\n    }\n    /**\n     * Returns the height of the image.\n     * @returns {Number} the height of the image\n     */\n\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      return this.fileDirectory.ImageLength;\n    }\n    /**\n     * Returns the number of samples per pixel.\n     * @returns {Number} the number of samples per pixel\n     */\n\n  }, {\n    key: \"getSamplesPerPixel\",\n    value: function getSamplesPerPixel() {\n      return typeof this.fileDirectory.SamplesPerPixel !== 'undefined' ? this.fileDirectory.SamplesPerPixel : 1;\n    }\n    /**\n     * Returns the width of each tile.\n     * @returns {Number} the width of each tile\n     */\n\n  }, {\n    key: \"getTileWidth\",\n    value: function getTileWidth() {\n      return this.isTiled ? this.fileDirectory.TileWidth : this.getWidth();\n    }\n    /**\n     * Returns the height of each tile.\n     * @returns {Number} the height of each tile\n     */\n\n  }, {\n    key: \"getTileHeight\",\n    value: function getTileHeight() {\n      if (this.isTiled) {\n        return this.fileDirectory.TileLength;\n      }\n\n      if (typeof this.fileDirectory.RowsPerStrip !== 'undefined') {\n        return Math.min(this.fileDirectory.RowsPerStrip, this.getHeight());\n      }\n\n      return this.getHeight();\n    }\n  }, {\n    key: \"getBlockWidth\",\n    value: function getBlockWidth() {\n      return this.getTileWidth();\n    }\n  }, {\n    key: \"getBlockHeight\",\n    value: function getBlockHeight(y) {\n      if (this.isTiled || (y + 1) * this.getTileHeight() <= this.getHeight()) {\n        return this.getTileHeight();\n      } else {\n        return this.getHeight() - y * this.getTileHeight();\n      }\n    }\n    /**\n     * Calculates the number of bytes for each pixel across all samples. Only full\n     * bytes are supported, an exception is thrown when this is not the case.\n     * @returns {Number} the bytes per pixel\n     */\n\n  }, {\n    key: \"getBytesPerPixel\",\n    value: function getBytesPerPixel() {\n      var bytes = 0;\n\n      for (var i = 0; i < this.fileDirectory.BitsPerSample.length; ++i) {\n        bytes += this.getSampleByteSize(i);\n      }\n\n      return bytes;\n    }\n  }, {\n    key: \"getSampleByteSize\",\n    value: function getSampleByteSize(i) {\n      if (i >= this.fileDirectory.BitsPerSample.length) {\n        throw new RangeError(\"Sample index \".concat(i, \" is out of range.\"));\n      }\n\n      return Math.ceil(this.fileDirectory.BitsPerSample[i] / 8);\n    }\n  }, {\n    key: \"getReaderForSample\",\n    value: function getReaderForSample(sampleIndex) {\n      var format = this.fileDirectory.SampleFormat ? this.fileDirectory.SampleFormat[sampleIndex] : 1;\n      var bitsPerSample = this.fileDirectory.BitsPerSample[sampleIndex];\n\n      switch (format) {\n        case 1:\n          // unsigned integer data\n          if (bitsPerSample <= 8) {\n            return DataView.prototype.getUint8;\n          } else if (bitsPerSample <= 16) {\n            return DataView.prototype.getUint16;\n          } else if (bitsPerSample <= 32) {\n            return DataView.prototype.getUint32;\n          }\n\n          break;\n\n        case 2:\n          // twos complement signed integer data\n          if (bitsPerSample <= 8) {\n            return DataView.prototype.getInt8;\n          } else if (bitsPerSample <= 16) {\n            return DataView.prototype.getInt16;\n          } else if (bitsPerSample <= 32) {\n            return DataView.prototype.getInt32;\n          }\n\n          break;\n\n        case 3:\n          switch (bitsPerSample) {\n            case 16:\n              return function (offset, littleEndian) {\n                return getFloat16(this, offset, littleEndian);\n              };\n\n            case 32:\n              return DataView.prototype.getFloat32;\n\n            case 64:\n              return DataView.prototype.getFloat64;\n\n            default:\n              break;\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      throw Error('Unsupported data format/bitsPerSample');\n    }\n  }, {\n    key: \"getSampleFormat\",\n    value: function getSampleFormat() {\n      var sampleIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      return this.fileDirectory.SampleFormat ? this.fileDirectory.SampleFormat[sampleIndex] : 1;\n    }\n  }, {\n    key: \"getBitsPerSample\",\n    value: function getBitsPerSample() {\n      var sampleIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      return this.fileDirectory.BitsPerSample[sampleIndex];\n    }\n  }, {\n    key: \"getArrayForSample\",\n    value: function getArrayForSample(sampleIndex, size) {\n      var format = this.getSampleFormat(sampleIndex);\n      var bitsPerSample = this.getBitsPerSample(sampleIndex);\n      return arrayForType(format, bitsPerSample, size);\n    }\n    /**\n     * Returns the decoded strip or tile.\n     * @param {Number} x the strip or tile x-offset\n     * @param {Number} y the tile y-offset (0 for stripped images)\n     * @param {Number} sample the sample to get for separated samples\n     * @param {Pool|AbstractDecoder} poolOrDecoder the decoder or decoder pool\n     * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n     *                               to be aborted\n     * @returns {Promise.<ArrayBuffer>}\n     */\n\n  }, {\n    key: \"getTileOrStrip\",\n    value: function () {\n      var _getTileOrStrip = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(x, y, sample, poolOrDecoder, signal) {\n        var _this = this;\n\n        var numTilesPerRow, numTilesPerCol, index, tiles, offset, byteCount, slice, request;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                numTilesPerRow = Math.ceil(this.getWidth() / this.getTileWidth());\n                numTilesPerCol = Math.ceil(this.getHeight() / this.getTileHeight());\n                tiles = this.tiles;\n\n                if (this.planarConfiguration === 1) {\n                  index = y * numTilesPerRow + x;\n                } else if (this.planarConfiguration === 2) {\n                  index = sample * numTilesPerRow * numTilesPerCol + y * numTilesPerRow + x;\n                }\n\n                if (this.isTiled) {\n                  offset = this.fileDirectory.TileOffsets[index];\n                  byteCount = this.fileDirectory.TileByteCounts[index];\n                } else {\n                  offset = this.fileDirectory.StripOffsets[index];\n                  byteCount = this.fileDirectory.StripByteCounts[index];\n                }\n\n                _context2.next = 7;\n                return this.source.fetch([{\n                  offset: offset,\n                  length: byteCount\n                }], signal);\n\n              case 7:\n                slice = _context2.sent[0];\n\n                if (tiles === null || !tiles[index]) {\n                  // resolve each request by potentially applying array normalization\n                  request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                    var data, sampleFormat, bitsPerSample;\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return poolOrDecoder.decode(_this.fileDirectory, slice);\n\n                          case 2:\n                            data = _context.sent;\n                            sampleFormat = _this.getSampleFormat();\n                            bitsPerSample = _this.getBitsPerSample();\n\n                            if (needsNormalization(sampleFormat, bitsPerSample)) {\n                              data = normalizeArray(data, sampleFormat, _this.planarConfiguration, _this.getSamplesPerPixel(), bitsPerSample, _this.getTileWidth(), _this.getBlockHeight(y));\n                            }\n\n                            return _context.abrupt(\"return\", data);\n\n                          case 7:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }))(); // set the cache\n\n                  if (tiles !== null) {\n                    tiles[index] = request;\n                  }\n                } else {\n                  // get from the cache\n                  request = tiles[index];\n                } // cache the tile request\n\n\n                _context2.t0 = x;\n                _context2.t1 = y;\n                _context2.t2 = sample;\n                _context2.next = 14;\n                return request;\n\n              case 14:\n                _context2.t3 = _context2.sent;\n                return _context2.abrupt(\"return\", {\n                  x: _context2.t0,\n                  y: _context2.t1,\n                  sample: _context2.t2,\n                  data: _context2.t3\n                });\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getTileOrStrip(_x, _x2, _x3, _x4, _x5) {\n        return _getTileOrStrip.apply(this, arguments);\n      }\n\n      return getTileOrStrip;\n    }()\n    /**\n     * Internal read function.\n     * @private\n     * @param {Array} imageWindow The image window in pixel coordinates\n     * @param {Array} samples The selected samples (0-based indices)\n     * @param {TypedArray[]|TypedArray} valueArrays The array(s) to write into\n     * @param {Boolean} interleave Whether or not to write in an interleaved manner\n     * @param {Pool|AbstractDecoder} poolOrDecoder the decoder or decoder pool\n     * @param {number} width the width of window to be read into\n     * @param {number} height the height of window to be read into\n     * @param {number} resampleMethod the resampling method to be used when interpolating\n     * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n     *                               to be aborted\n     * @returns {Promise<TypedArray[]>|Promise<TypedArray>}\n     */\n\n  }, {\n    key: \"_readRaster\",\n    value: function () {\n      var _readRaster2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(imageWindow, samples, valueArrays, interleave, poolOrDecoder, width, height, resampleMethod, signal) {\n        var _this2 = this;\n\n        var tileWidth, tileHeight, imageWidth, imageHeight, minXTile, maxXTile, minYTile, maxYTile, windowWidth, bytesPerPixel, srcSampleOffsets, sampleReaders, i, promises, littleEndian, yTile, xTile, _loop, sampleIndex, resampled;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                tileWidth = this.getTileWidth();\n                tileHeight = this.getTileHeight();\n                imageWidth = this.getWidth();\n                imageHeight = this.getHeight();\n                minXTile = Math.max(Math.floor(imageWindow[0] / tileWidth), 0);\n                maxXTile = Math.min(Math.ceil(imageWindow[2] / tileWidth), Math.ceil(imageWidth / tileWidth));\n                minYTile = Math.max(Math.floor(imageWindow[1] / tileHeight), 0);\n                maxYTile = Math.min(Math.ceil(imageWindow[3] / tileHeight), Math.ceil(imageHeight / tileHeight));\n                windowWidth = imageWindow[2] - imageWindow[0];\n                bytesPerPixel = this.getBytesPerPixel();\n                srcSampleOffsets = [];\n                sampleReaders = [];\n\n                for (i = 0; i < samples.length; ++i) {\n                  if (this.planarConfiguration === 1) {\n                    srcSampleOffsets.push(sum(this.fileDirectory.BitsPerSample, 0, samples[i]) / 8);\n                  } else {\n                    srcSampleOffsets.push(0);\n                  }\n\n                  sampleReaders.push(this.getReaderForSample(samples[i]));\n                }\n\n                promises = [];\n                littleEndian = this.littleEndian;\n\n                for (yTile = minYTile; yTile < maxYTile; ++yTile) {\n                  for (xTile = minXTile; xTile < maxXTile; ++xTile) {\n                    _loop = function _loop(sampleIndex) {\n                      var si = sampleIndex;\n                      var sample = samples[sampleIndex];\n\n                      if (_this2.planarConfiguration === 2) {\n                        bytesPerPixel = _this2.getSampleByteSize(sampleIndex);\n                      }\n\n                      var promise = _this2.getTileOrStrip(xTile, yTile, sample, poolOrDecoder, signal);\n\n                      promises.push(promise);\n                      promise.then(function (tile) {\n                        var buffer = tile.data;\n                        var dataView = new DataView(buffer);\n\n                        var blockHeight = _this2.getBlockHeight(tile.y);\n\n                        var firstLine = tile.y * tileHeight;\n                        var firstCol = tile.x * tileWidth;\n                        var lastLine = firstLine + blockHeight;\n                        var lastCol = (tile.x + 1) * tileWidth;\n                        var reader = sampleReaders[si];\n                        var ymax = Math.min(blockHeight, blockHeight - (lastLine - imageWindow[3]), imageHeight - firstLine);\n                        var xmax = Math.min(tileWidth, tileWidth - (lastCol - imageWindow[2]), imageWidth - firstCol);\n\n                        for (var y = Math.max(0, imageWindow[1] - firstLine); y < ymax; ++y) {\n                          for (var x = Math.max(0, imageWindow[0] - firstCol); x < xmax; ++x) {\n                            var pixelOffset = (y * tileWidth + x) * bytesPerPixel;\n                            var value = reader.call(dataView, pixelOffset + srcSampleOffsets[si], littleEndian);\n                            var windowCoordinate = void 0;\n\n                            if (interleave) {\n                              windowCoordinate = (y + firstLine - imageWindow[1]) * windowWidth * samples.length + (x + firstCol - imageWindow[0]) * samples.length + si;\n                              valueArrays[windowCoordinate] = value;\n                            } else {\n                              windowCoordinate = (y + firstLine - imageWindow[1]) * windowWidth + x + firstCol - imageWindow[0];\n                              valueArrays[si][windowCoordinate] = value;\n                            }\n                          }\n                        }\n                      });\n                    };\n\n                    for (sampleIndex = 0; sampleIndex < samples.length; ++sampleIndex) {\n                      _loop(sampleIndex);\n                    }\n                  }\n                }\n\n                _context3.next = 18;\n                return Promise.all(promises);\n\n              case 18:\n                if (!(width && imageWindow[2] - imageWindow[0] !== width || height && imageWindow[3] - imageWindow[1] !== height)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                if (interleave) {\n                  resampled = resampleInterleaved(valueArrays, imageWindow[2] - imageWindow[0], imageWindow[3] - imageWindow[1], width, height, samples.length, resampleMethod);\n                } else {\n                  resampled = resample(valueArrays, imageWindow[2] - imageWindow[0], imageWindow[3] - imageWindow[1], width, height, resampleMethod);\n                }\n\n                resampled.width = width;\n                resampled.height = height;\n                return _context3.abrupt(\"return\", resampled);\n\n              case 23:\n                valueArrays.width = width || imageWindow[2] - imageWindow[0];\n                valueArrays.height = height || imageWindow[3] - imageWindow[1];\n                return _context3.abrupt(\"return\", valueArrays);\n\n              case 26:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function _readRaster(_x6, _x7, _x8, _x9, _x10, _x11, _x12, _x13, _x14) {\n        return _readRaster2.apply(this, arguments);\n      }\n\n      return _readRaster;\n    }()\n    /**\n     * Reads raster data from the image. This function reads all selected samples\n     * into separate arrays of the correct type for that sample or into a single\n     * combined array when `interleave` is set. When provided, only a subset\n     * of the raster is read for each sample.\n     *\n     * @param {Object} [options={}] optional parameters\n     * @param {Array} [options.window=whole image] the subset to read data from.\n     * @param {Array} [options.samples=all samples] the selection of samples to read from.\n     * @param {Boolean} [options.interleave=false] whether the data shall be read\n     *                                             in one single array or separate\n     *                                             arrays.\n     * @param {Number} [options.pool=null] The optional decoder pool to use.\n     * @param {number} [options.width] The desired width of the output. When the width is\n     *                                 not the same as the images, resampling will be\n     *                                 performed.\n     * @param {number} [options.height] The desired height of the output. When the width\n     *                                  is not the same as the images, resampling will\n     *                                  be performed.\n     * @param {string} [options.resampleMethod='nearest'] The desired resampling method.\n     * @param {number|number[]} [options.fillValue] The value to use for parts of the image\n     *                                              outside of the images extent. When\n     *                                              multiple samples are requested, an\n     *                                              array of fill values can be passed.\n     * @param {AbortSignal} [options.signal] An AbortSignal that may be signalled if the request is\n     *                                       to be aborted\n     * @returns {Promise.<(TypedArray|TypedArray[])>} the decoded arrays as a promise\n     */\n\n  }, {\n    key: \"readRasters\",\n    value: function () {\n      var _readRasters = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var _ref2,\n            wnd,\n            _ref2$samples,\n            samples,\n            interleave,\n            _ref2$pool,\n            pool,\n            width,\n            height,\n            resampleMethod,\n            fillValue,\n            signal,\n            imageWindow,\n            imageWindowWidth,\n            imageWindowHeight,\n            numPixels,\n            samplesPerPixel,\n            i,\n            _i,\n            valueArrays,\n            format,\n            bitsPerSample,\n            _i2,\n            valueArray,\n            poolOrDecoder,\n            result,\n            _args4 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _ref2 = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : {}, wnd = _ref2.window, _ref2$samples = _ref2.samples, samples = _ref2$samples === void 0 ? [] : _ref2$samples, interleave = _ref2.interleave, _ref2$pool = _ref2.pool, pool = _ref2$pool === void 0 ? null : _ref2$pool, width = _ref2.width, height = _ref2.height, resampleMethod = _ref2.resampleMethod, fillValue = _ref2.fillValue, signal = _ref2.signal;\n                imageWindow = wnd || [0, 0, this.getWidth(), this.getHeight()]; // check parameters\n\n                if (!(imageWindow[0] > imageWindow[2] || imageWindow[1] > imageWindow[3])) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                throw new Error('Invalid subsets');\n\n              case 4:\n                imageWindowWidth = imageWindow[2] - imageWindow[0];\n                imageWindowHeight = imageWindow[3] - imageWindow[1];\n                numPixels = imageWindowWidth * imageWindowHeight;\n                samplesPerPixel = this.getSamplesPerPixel();\n\n                if (!(!samples || !samples.length)) {\n                  _context4.next = 12;\n                  break;\n                }\n\n                for (i = 0; i < samplesPerPixel; ++i) {\n                  samples.push(i);\n                }\n\n                _context4.next = 19;\n                break;\n\n              case 12:\n                _i = 0;\n\n              case 13:\n                if (!(_i < samples.length)) {\n                  _context4.next = 19;\n                  break;\n                }\n\n                if (!(samples[_i] >= samplesPerPixel)) {\n                  _context4.next = 16;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", Promise.reject(new RangeError(\"Invalid sample index '\".concat(samples[_i], \"'.\"))));\n\n              case 16:\n                ++_i;\n                _context4.next = 13;\n                break;\n\n              case 19:\n                if (interleave) {\n                  format = this.fileDirectory.SampleFormat ? Math.max.apply(null, this.fileDirectory.SampleFormat) : 1;\n                  bitsPerSample = Math.max.apply(null, this.fileDirectory.BitsPerSample);\n                  valueArrays = arrayForType(format, bitsPerSample, numPixels * samples.length);\n\n                  if (fillValue) {\n                    valueArrays.fill(fillValue);\n                  }\n                } else {\n                  valueArrays = [];\n\n                  for (_i2 = 0; _i2 < samples.length; ++_i2) {\n                    valueArray = this.getArrayForSample(samples[_i2], numPixels);\n\n                    if (Array.isArray(fillValue) && _i2 < fillValue.length) {\n                      valueArray.fill(fillValue[_i2]);\n                    } else if (fillValue && !Array.isArray(fillValue)) {\n                      valueArray.fill(fillValue);\n                    }\n\n                    valueArrays.push(valueArray);\n                  }\n                }\n\n                _context4.t0 = pool;\n\n                if (_context4.t0) {\n                  _context4.next = 25;\n                  break;\n                }\n\n                _context4.next = 24;\n                return getDecoder(this.fileDirectory);\n\n              case 24:\n                _context4.t0 = _context4.sent;\n\n              case 25:\n                poolOrDecoder = _context4.t0;\n                _context4.next = 28;\n                return this._readRaster(imageWindow, samples, valueArrays, interleave, poolOrDecoder, width, height, resampleMethod, signal);\n\n              case 28:\n                result = _context4.sent;\n                return _context4.abrupt(\"return\", result);\n\n              case 30:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function readRasters() {\n        return _readRasters.apply(this, arguments);\n      }\n\n      return readRasters;\n    }()\n    /**\n     * Reads raster data from the image as RGB. The result is always an\n     * interleaved typed array.\n     * Colorspaces other than RGB will be transformed to RGB, color maps expanded.\n     * When no other method is applicable, the first sample is used to produce a\n     * greayscale image.\n     * When provided, only a subset of the raster is read for each sample.\n     *\n     * @param {Object} [options] optional parameters\n     * @param {Array} [options.window=whole image] the subset to read data from.\n     * @param {Boolean} [options.interleave=true] whether the data shall be read\n     *                                             in one single array or separate\n     *                                             arrays.\n     * @param {Number} [options.pool=null] The optional decoder pool to use.\n     * @param {number} [options.width] The desired width of the output. When the width is no the\n     *                                 same as the images, resampling will be performed.\n     * @param {number} [options.height] The desired height of the output. When the width is no the\n     *                                  same as the images, resampling will be performed.\n     * @param {string} [options.resampleMethod='nearest'] The desired resampling method.\n     * @param {bool} [options.enableAlpha=false] Enable reading alpha channel if present.\n     * @param {AbortSignal} [options.signal] An AbortSignal that may be signalled if the request is\n     *                                       to be aborted\n     * @returns {Promise.<TypedArray|TypedArray[]>} the RGB array as a Promise\n     */\n\n  }, {\n    key: \"readRGB\",\n    value: function () {\n      var _readRGB = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var _ref3,\n            window,\n            _ref3$interleave,\n            interleave,\n            _ref3$pool,\n            pool,\n            width,\n            height,\n            resampleMethod,\n            _ref3$enableAlpha,\n            enableAlpha,\n            signal,\n            imageWindow,\n            pi,\n            s,\n            i,\n            samples,\n            subOptions,\n            fileDirectory,\n            raster,\n            max,\n            data,\n            red,\n            green,\n            blue,\n            _i3,\n            j,\n            _args5 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _ref3 = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {}, window = _ref3.window, _ref3$interleave = _ref3.interleave, interleave = _ref3$interleave === void 0 ? true : _ref3$interleave, _ref3$pool = _ref3.pool, pool = _ref3$pool === void 0 ? null : _ref3$pool, width = _ref3.width, height = _ref3.height, resampleMethod = _ref3.resampleMethod, _ref3$enableAlpha = _ref3.enableAlpha, enableAlpha = _ref3$enableAlpha === void 0 ? false : _ref3$enableAlpha, signal = _ref3.signal;\n                imageWindow = window || [0, 0, this.getWidth(), this.getHeight()]; // check parameters\n\n                if (!(imageWindow[0] > imageWindow[2] || imageWindow[1] > imageWindow[3])) {\n                  _context5.next = 4;\n                  break;\n                }\n\n                throw new Error('Invalid subsets');\n\n              case 4:\n                pi = this.fileDirectory.PhotometricInterpretation;\n\n                if (!(pi === photometricInterpretations.RGB)) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                s = [0, 1, 2];\n\n                if (!(this.fileDirectory.ExtraSamples === ExtraSamplesValues.Unspecified) && enableAlpha) {\n                  s = [];\n\n                  for (i = 0; i < this.fileDirectory.BitsPerSample.length; i += 1) {\n                    s.push(i);\n                  }\n                }\n\n                return _context5.abrupt(\"return\", this.readRasters({\n                  window: window,\n                  interleave: interleave,\n                  samples: s,\n                  pool: pool,\n                  width: width,\n                  height: height,\n                  resampleMethod: resampleMethod,\n                  signal: signal\n                }));\n\n              case 9:\n                _context5.t0 = pi;\n                _context5.next = _context5.t0 === photometricInterpretations.WhiteIsZero ? 12 : _context5.t0 === photometricInterpretations.BlackIsZero ? 12 : _context5.t0 === photometricInterpretations.Palette ? 12 : _context5.t0 === photometricInterpretations.CMYK ? 14 : _context5.t0 === photometricInterpretations.YCbCr ? 16 : _context5.t0 === photometricInterpretations.CIELab ? 16 : 18;\n                break;\n\n              case 12:\n                samples = [0];\n                return _context5.abrupt(\"break\", 19);\n\n              case 14:\n                samples = [0, 1, 2, 3];\n                return _context5.abrupt(\"break\", 19);\n\n              case 16:\n                samples = [0, 1, 2];\n                return _context5.abrupt(\"break\", 19);\n\n              case 18:\n                throw new Error('Invalid or unsupported photometric interpretation.');\n\n              case 19:\n                subOptions = {\n                  window: imageWindow,\n                  interleave: true,\n                  samples: samples,\n                  pool: pool,\n                  width: width,\n                  height: height,\n                  resampleMethod: resampleMethod,\n                  signal: signal\n                };\n                fileDirectory = this.fileDirectory;\n                _context5.next = 23;\n                return this.readRasters(subOptions);\n\n              case 23:\n                raster = _context5.sent;\n                max = Math.pow(2, this.fileDirectory.BitsPerSample[0]);\n                _context5.t1 = pi;\n                _context5.next = _context5.t1 === photometricInterpretations.WhiteIsZero ? 28 : _context5.t1 === photometricInterpretations.BlackIsZero ? 30 : _context5.t1 === photometricInterpretations.Palette ? 32 : _context5.t1 === photometricInterpretations.CMYK ? 34 : _context5.t1 === photometricInterpretations.YCbCr ? 36 : _context5.t1 === photometricInterpretations.CIELab ? 38 : 40;\n                break;\n\n              case 28:\n                data = fromWhiteIsZero(raster, max);\n                return _context5.abrupt(\"break\", 41);\n\n              case 30:\n                data = fromBlackIsZero(raster, max);\n                return _context5.abrupt(\"break\", 41);\n\n              case 32:\n                data = fromPalette(raster, fileDirectory.ColorMap);\n                return _context5.abrupt(\"break\", 41);\n\n              case 34:\n                data = fromCMYK(raster);\n                return _context5.abrupt(\"break\", 41);\n\n              case 36:\n                data = fromYCbCr(raster);\n                return _context5.abrupt(\"break\", 41);\n\n              case 38:\n                data = fromCIELab(raster);\n                return _context5.abrupt(\"break\", 41);\n\n              case 40:\n                throw new Error('Unsupported photometric interpretation.');\n\n              case 41:\n                // if non-interleaved data is requested, we must split the channels\n                // into their respective arrays\n                if (!interleave) {\n                  red = new Uint8Array(data.length / 3);\n                  green = new Uint8Array(data.length / 3);\n                  blue = new Uint8Array(data.length / 3);\n\n                  for (_i3 = 0, j = 0; _i3 < data.length; _i3 += 3, ++j) {\n                    red[j] = data[_i3];\n                    green[j] = data[_i3 + 1];\n                    blue[j] = data[_i3 + 2];\n                  }\n\n                  data = [red, green, blue];\n                }\n\n                data.width = raster.width;\n                data.height = raster.height;\n                return _context5.abrupt(\"return\", data);\n\n              case 45:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function readRGB() {\n        return _readRGB.apply(this, arguments);\n      }\n\n      return readRGB;\n    }()\n    /**\n     * Returns an array of tiepoints.\n     * @returns {Object[]}\n     */\n\n  }, {\n    key: \"getTiePoints\",\n    value: function getTiePoints() {\n      if (!this.fileDirectory.ModelTiepoint) {\n        return [];\n      }\n\n      var tiePoints = [];\n\n      for (var i = 0; i < this.fileDirectory.ModelTiepoint.length; i += 6) {\n        tiePoints.push({\n          i: this.fileDirectory.ModelTiepoint[i],\n          j: this.fileDirectory.ModelTiepoint[i + 1],\n          k: this.fileDirectory.ModelTiepoint[i + 2],\n          x: this.fileDirectory.ModelTiepoint[i + 3],\n          y: this.fileDirectory.ModelTiepoint[i + 4],\n          z: this.fileDirectory.ModelTiepoint[i + 5]\n        });\n      }\n\n      return tiePoints;\n    }\n    /**\n     * Returns the parsed GDAL metadata items.\n     *\n     * If sample is passed to null, dataset-level metadata will be returned.\n     * Otherwise only metadata specific to the provided sample will be returned.\n     *\n     * @param {Number} [sample=null] The sample index.\n     * @returns {Object}\n     */\n\n  }, {\n    key: \"getGDALMetadata\",\n    value: function getGDALMetadata() {\n      var sample = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var metadata = {};\n\n      if (!this.fileDirectory.GDAL_METADATA) {\n        return null;\n      }\n\n      var string = this.fileDirectory.GDAL_METADATA;\n      var items = findTagsByName(string, 'Item');\n\n      if (sample !== null) {\n        items = items.filter(function (item) {\n          return Number(getAttribute(item, 'sample')) === sample;\n        });\n      }\n\n      for (var i = 0; i < items.length; ++i) {\n        var item = items[i];\n        metadata[getAttribute(item, 'name')] = item.inner;\n      }\n\n      return metadata;\n    }\n    /**\n     * Returns the GDAL nodata value\n     * @returns {Number} or null\n     */\n\n  }, {\n    key: \"getGDALNoData\",\n    value: function getGDALNoData() {\n      if (!this.fileDirectory.GDAL_NODATA) {\n        return null;\n      }\n\n      var string = this.fileDirectory.GDAL_NODATA;\n      return Number(string.substring(0, string.length - 1));\n    }\n    /**\n     * Returns the image origin as a XYZ-vector. When the image has no affine\n     * transformation, then an exception is thrown.\n     * @returns {Array} The origin as a vector\n     */\n\n  }, {\n    key: \"getOrigin\",\n    value: function getOrigin() {\n      var tiePoints = this.fileDirectory.ModelTiepoint;\n      var modelTransformation = this.fileDirectory.ModelTransformation;\n\n      if (tiePoints && tiePoints.length === 6) {\n        return [tiePoints[3], tiePoints[4], tiePoints[5]];\n      }\n\n      if (modelTransformation) {\n        return [modelTransformation[3], modelTransformation[7], modelTransformation[11]];\n      }\n\n      throw new Error('The image does not have an affine transformation.');\n    }\n    /**\n     * Returns the image resolution as a XYZ-vector. When the image has no affine\n     * transformation, then an exception is thrown.\n     * @param {GeoTIFFImage} [referenceImage=null] A reference image to calculate the resolution from\n     *                                             in cases when the current image does not have the\n     *                                             required tags on its own.\n     * @returns {Array} The resolution as a vector\n     */\n\n  }, {\n    key: \"getResolution\",\n    value: function getResolution() {\n      var referenceImage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var modelPixelScale = this.fileDirectory.ModelPixelScale;\n      var modelTransformation = this.fileDirectory.ModelTransformation;\n\n      if (modelPixelScale) {\n        return [modelPixelScale[0], -modelPixelScale[1], modelPixelScale[2]];\n      }\n\n      if (modelTransformation) {\n        return [modelTransformation[0], modelTransformation[5], modelTransformation[10]];\n      }\n\n      if (referenceImage) {\n        var _referenceImage$getRe = referenceImage.getResolution(),\n            _referenceImage$getRe2 = _slicedToArray(_referenceImage$getRe, 3),\n            refResX = _referenceImage$getRe2[0],\n            refResY = _referenceImage$getRe2[1],\n            refResZ = _referenceImage$getRe2[2];\n\n        return [refResX * referenceImage.getWidth() / this.getWidth(), refResY * referenceImage.getHeight() / this.getHeight(), refResZ * referenceImage.getWidth() / this.getWidth()];\n      }\n\n      throw new Error('The image does not have an affine transformation.');\n    }\n    /**\n     * Returns whether or not the pixels of the image depict an area (or point).\n     * @returns {Boolean} Whether the pixels are a point\n     */\n\n  }, {\n    key: \"pixelIsArea\",\n    value: function pixelIsArea() {\n      return this.geoKeys.GTRasterTypeGeoKey === 1;\n    }\n    /**\n     * Returns the image bounding box as an array of 4 values: min-x, min-y,\n     * max-x and max-y. When the image has no affine transformation, then an\n     * exception is thrown.\n     * @returns {Array} The bounding box\n     */\n\n  }, {\n    key: \"getBoundingBox\",\n    value: function getBoundingBox() {\n      var origin = this.getOrigin();\n      var resolution = this.getResolution();\n      var x1 = origin[0];\n      var y1 = origin[1];\n      var x2 = x1 + resolution[0] * this.getWidth();\n      var y2 = y1 + resolution[1] * this.getHeight();\n      return [Math.min(x1, x2), Math.min(y1, y2), Math.max(x1, x2), Math.max(y1, y2)];\n    }\n  }]);\n\n  return GeoTIFFImage;\n}();\n\nexport default GeoTIFFImage;","import _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { getFloat16 as _getFloat } from '@petamoriken/float16';\n\nvar DataView64 = /*#__PURE__*/function () {\n  function DataView64(arrayBuffer) {\n    _classCallCheck(this, DataView64);\n\n    this._dataView = new DataView(arrayBuffer);\n  }\n\n  _createClass(DataView64, [{\n    key: \"buffer\",\n    get: function get() {\n      return this._dataView.buffer;\n    }\n  }, {\n    key: \"getUint64\",\n    value: function getUint64(offset, littleEndian) {\n      var left = this.getUint32(offset, littleEndian);\n      var right = this.getUint32(offset + 4, littleEndian);\n      var combined;\n\n      if (littleEndian) {\n        combined = left + Math.pow(2, 32) * right;\n\n        if (!Number.isSafeInteger(combined)) {\n          throw new Error(\"\".concat(combined, \" exceeds MAX_SAFE_INTEGER. \") + 'Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues');\n        }\n\n        return combined;\n      }\n\n      combined = Math.pow(2, 32) * left + right;\n\n      if (!Number.isSafeInteger(combined)) {\n        throw new Error(\"\".concat(combined, \" exceeds MAX_SAFE_INTEGER. \") + 'Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues');\n      }\n\n      return combined;\n    } // adapted from https://stackoverflow.com/a/55338384/8060591\n\n  }, {\n    key: \"getInt64\",\n    value: function getInt64(offset, littleEndian) {\n      var value = 0;\n      var isNegative = (this._dataView.getUint8(offset + (littleEndian ? 7 : 0)) & 0x80) > 0;\n      var carrying = true;\n\n      for (var i = 0; i < 8; i++) {\n        var byte = this._dataView.getUint8(offset + (littleEndian ? i : 7 - i));\n\n        if (isNegative) {\n          if (carrying) {\n            if (byte !== 0x00) {\n              byte = ~(byte - 1) & 0xff;\n              carrying = false;\n            }\n          } else {\n            byte = ~byte & 0xff;\n          }\n        }\n\n        value += byte * Math.pow(256, i);\n      }\n\n      if (isNegative) {\n        value = -value;\n      }\n\n      return value;\n    }\n  }, {\n    key: \"getUint8\",\n    value: function getUint8(offset, littleEndian) {\n      return this._dataView.getUint8(offset, littleEndian);\n    }\n  }, {\n    key: \"getInt8\",\n    value: function getInt8(offset, littleEndian) {\n      return this._dataView.getInt8(offset, littleEndian);\n    }\n  }, {\n    key: \"getUint16\",\n    value: function getUint16(offset, littleEndian) {\n      return this._dataView.getUint16(offset, littleEndian);\n    }\n  }, {\n    key: \"getInt16\",\n    value: function getInt16(offset, littleEndian) {\n      return this._dataView.getInt16(offset, littleEndian);\n    }\n  }, {\n    key: \"getUint32\",\n    value: function getUint32(offset, littleEndian) {\n      return this._dataView.getUint32(offset, littleEndian);\n    }\n  }, {\n    key: \"getInt32\",\n    value: function getInt32(offset, littleEndian) {\n      return this._dataView.getInt32(offset, littleEndian);\n    }\n  }, {\n    key: \"getFloat16\",\n    value: function getFloat16(offset, littleEndian) {\n      return _getFloat(this._dataView, offset, littleEndian);\n    }\n  }, {\n    key: \"getFloat32\",\n    value: function getFloat32(offset, littleEndian) {\n      return this._dataView.getFloat32(offset, littleEndian);\n    }\n  }, {\n    key: \"getFloat64\",\n    value: function getFloat64(offset, littleEndian) {\n      return this._dataView.getFloat64(offset, littleEndian);\n    }\n  }]);\n\n  return DataView64;\n}();\n\nexport { DataView64 as default };","import _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nvar DataSlice = /*#__PURE__*/function () {\n  function DataSlice(arrayBuffer, sliceOffset, littleEndian, bigTiff) {\n    _classCallCheck(this, DataSlice);\n\n    this._dataView = new DataView(arrayBuffer);\n    this._sliceOffset = sliceOffset;\n    this._littleEndian = littleEndian;\n    this._bigTiff = bigTiff;\n  }\n\n  _createClass(DataSlice, [{\n    key: \"sliceOffset\",\n    get: function get() {\n      return this._sliceOffset;\n    }\n  }, {\n    key: \"sliceTop\",\n    get: function get() {\n      return this._sliceOffset + this.buffer.byteLength;\n    }\n  }, {\n    key: \"littleEndian\",\n    get: function get() {\n      return this._littleEndian;\n    }\n  }, {\n    key: \"bigTiff\",\n    get: function get() {\n      return this._bigTiff;\n    }\n  }, {\n    key: \"buffer\",\n    get: function get() {\n      return this._dataView.buffer;\n    }\n  }, {\n    key: \"covers\",\n    value: function covers(offset, length) {\n      return this.sliceOffset <= offset && this.sliceTop >= offset + length;\n    }\n  }, {\n    key: \"readUint8\",\n    value: function readUint8(offset) {\n      return this._dataView.getUint8(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readInt8\",\n    value: function readInt8(offset) {\n      return this._dataView.getInt8(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readUint16\",\n    value: function readUint16(offset) {\n      return this._dataView.getUint16(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readInt16\",\n    value: function readInt16(offset) {\n      return this._dataView.getInt16(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readUint32\",\n    value: function readUint32(offset) {\n      return this._dataView.getUint32(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readInt32\",\n    value: function readInt32(offset) {\n      return this._dataView.getInt32(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readFloat32\",\n    value: function readFloat32(offset) {\n      return this._dataView.getFloat32(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readFloat64\",\n    value: function readFloat64(offset) {\n      return this._dataView.getFloat64(offset - this._sliceOffset, this._littleEndian);\n    }\n  }, {\n    key: \"readUint64\",\n    value: function readUint64(offset) {\n      var left = this.readUint32(offset);\n      var right = this.readUint32(offset + 4);\n      var combined;\n\n      if (this._littleEndian) {\n        combined = left + Math.pow(2, 32) * right;\n\n        if (!Number.isSafeInteger(combined)) {\n          throw new Error(\"\".concat(combined, \" exceeds MAX_SAFE_INTEGER. \") + 'Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues');\n        }\n\n        return combined;\n      }\n\n      combined = Math.pow(2, 32) * left + right;\n\n      if (!Number.isSafeInteger(combined)) {\n        throw new Error(\"\".concat(combined, \" exceeds MAX_SAFE_INTEGER. \") + 'Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues');\n      }\n\n      return combined;\n    } // adapted from https://stackoverflow.com/a/55338384/8060591\n\n  }, {\n    key: \"readInt64\",\n    value: function readInt64(offset) {\n      var value = 0;\n      var isNegative = (this._dataView.getUint8(offset + (this._littleEndian ? 7 : 0)) & 0x80) > 0;\n      var carrying = true;\n\n      for (var i = 0; i < 8; i++) {\n        var byte = this._dataView.getUint8(offset + (this._littleEndian ? i : 7 - i));\n\n        if (isNegative) {\n          if (carrying) {\n            if (byte !== 0x00) {\n              byte = ~(byte - 1) & 0xff;\n              carrying = false;\n            }\n          } else {\n            byte = ~byte & 0xff;\n          }\n        }\n\n        value += byte * Math.pow(256, i);\n      }\n\n      if (isNegative) {\n        value = -value;\n      }\n\n      return value;\n    }\n  }, {\n    key: \"readOffset\",\n    value: function readOffset(offset) {\n      if (this._bigTiff) {\n        return this.readUint64(offset);\n      }\n\n      return this.readUint32(offset);\n    }\n  }]);\n\n  return DataSlice;\n}();\n\nexport { DataSlice as default };","import Threads from \"./dist/index.js\";\nexport var registerSerializer = Threads.registerSerializer;\nexport var spawn = Threads.spawn;\nexport var BlobWorker = Threads.BlobWorker;\nexport var DefaultSerializer = Threads.DefaultSerializer;\nexport var Pool = Threads.Pool;\nexport var Thread = Threads.Thread;\nexport var Transfer = Threads.Transfer;\nexport var Worker = Threads.Worker;","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\nimport { Pool as tPool, spawn, Worker, Transfer } from 'threads';\nvar defaultPoolSize = typeof navigator !== 'undefined' ? navigator.hardwareConcurrency : null;\n/**\n * @module pool\n */\n\n/**\n * Pool for workers to decode chunks of the images.\n */\n\nvar Pool = /*#__PURE__*/function () {\n  /**\n   * @constructor\n   * @param {Number} size The size of the pool. Defaults to the number of CPUs\n   *                      available. When this parameter is `null` or 0, then the\n   *                      decoding will be done in the main thread.\n   * @param {Worker} worker The decoder worker, loaded and initialised. Enables\n   *                        loading the worker using worker-loader(or others) externally\n   *                        when using this library as a webpack dependency.\n   */\n  function Pool() {\n    var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultPoolSize;\n    var worker = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Worker('./decoder.worker.js');\n\n    _classCallCheck(this, Pool);\n\n    this.pool = tPool(function () {\n      return spawn(worker);\n    }, size);\n  }\n  /**\n   * Decode the given block of bytes with the set compression method.\n   * @param {ArrayBuffer} buffer the array buffer of bytes to decode.\n   * @returns {Promise.<ArrayBuffer>} the decoded result as a `Promise`\n   */\n\n\n  _createClass(Pool, [{\n    key: \"decode\",\n    value: function () {\n      var _decode = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fileDirectory, buffer) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.pool.queue( /*#__PURE__*/function () {\n                    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(decode) {\n                      var data;\n                      return _regeneratorRuntime.wrap(function _callee$(_context) {\n                        while (1) {\n                          switch (_context.prev = _context.next) {\n                            case 0:\n                              _context.prev = 0;\n                              _context.next = 3;\n                              return decode(fileDirectory, Transfer(buffer));\n\n                            case 3:\n                              data = _context.sent;\n                              resolve(data);\n                              _context.next = 10;\n                              break;\n\n                            case 7:\n                              _context.prev = 7;\n                              _context.t0 = _context[\"catch\"](0);\n                              reject(_context.t0);\n\n                            case 10:\n                            case \"end\":\n                              return _context.stop();\n                          }\n                        }\n                      }, _callee, null, [[0, 7]]);\n                    }));\n\n                    return function (_x3) {\n                      return _ref.apply(this, arguments);\n                    };\n                  }());\n                }));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function decode(_x, _x2) {\n        return _decode.apply(this, arguments);\n      }\n\n      return decode;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.pool.terminate(true);\n    }\n  }]);\n\n  return Pool;\n}();\n\nexport default Pool;","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","import _toArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/toArray.js\";\nimport _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.object.from-entries.js\";\nvar CRLFCRLF = '\\r\\n\\r\\n';\n/*\n * Shim for 'Object.fromEntries'\n */\n\nfunction itemsToObject(items) {\n  if (typeof Object.fromEntries !== 'undefined') {\n    return Object.fromEntries(items);\n  }\n\n  var obj = {};\n\n  var _iterator = _createForOfIteratorHelper(items),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _slicedToArray(_step.value, 2),\n          key = _step$value[0],\n          value = _step$value[1];\n\n      obj[key.toLowerCase()] = value;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return obj;\n}\n/**\n * Parse HTTP headers from a given string.\n * @param {String} text the text to parse the headers from\n * @returns {Object} the parsed headers with lowercase keys\n */\n\n\nfunction parseHeaders(text) {\n  var items = text.split('\\r\\n').map(function (line) {\n    var kv = line.split(':').map(function (str) {\n      return str.trim();\n    });\n    kv[0] = kv[0].toLowerCase();\n    return kv;\n  });\n  return itemsToObject(items);\n}\n/**\n * Parse a 'Content-Type' header value to the content-type and parameters\n * @param {String} rawContentType the raw string to parse from\n * @returns {Object} the parsed content type with the fields: type and params\n */\n\n\nexport function parseContentType(rawContentType) {\n  var _rawContentType$split = rawContentType.split(';').map(function (s) {\n    return s.trim();\n  }),\n      _rawContentType$split2 = _toArray(_rawContentType$split),\n      type = _rawContentType$split2[0],\n      rawParams = _rawContentType$split2.slice(1);\n\n  var paramsItems = rawParams.map(function (param) {\n    return param.split('=');\n  });\n  return {\n    type: type,\n    params: itemsToObject(paramsItems)\n  };\n}\n/**\n * Parse a 'Content-Range' header value to its start, end, and total parts\n * @param {String} rawContentRange the raw string to parse from\n * @returns {Object} the parsed parts\n */\n\nexport function parseContentRange(rawContentRange) {\n  var start;\n  var end;\n  var total;\n\n  if (rawContentRange) {\n    var _rawContentRange$matc = rawContentRange.match(/bytes (\\d+)-(\\d+)\\/(\\d+)/);\n\n    var _rawContentRange$matc2 = _slicedToArray(_rawContentRange$matc, 4);\n\n    start = _rawContentRange$matc2[1];\n    end = _rawContentRange$matc2[2];\n    total = _rawContentRange$matc2[3];\n    start = parseInt(start, 10);\n    end = parseInt(end, 10);\n    total = parseInt(total, 10);\n  }\n\n  return {\n    start: start,\n    end: end,\n    total: total\n  };\n}\n/**\n * Parses a list of byteranges from the given 'multipart/byteranges' HTTP response.\n * Each item in the list has the following properties:\n * - headers: the HTTP headers\n * - data: the sliced ArrayBuffer for that specific part\n * - offset: the offset of the byterange within its originating file\n * - length: the length of the byterange\n * @param {ArrayBuffer} responseArrayBuffer the response to be parsed and split\n * @param {String} boundary the boundary string used to split the sections\n * @returns {Object[]} the parsed byteranges\n */\n\nexport function parseByteRanges(responseArrayBuffer, boundary) {\n  var offset = null;\n  var decoder = new TextDecoder('ascii');\n  var out = [];\n  var startBoundary = \"--\".concat(boundary);\n  var endBoundary = \"\".concat(startBoundary, \"--\"); // search for the initial boundary, may be offset by some bytes\n  // TODO: more efficient to check for `--` in bytes directly\n\n  for (var i = 0; i < 10; ++i) {\n    var text = decoder.decode(new Uint8Array(responseArrayBuffer, i, startBoundary.length));\n\n    if (text === startBoundary) {\n      offset = i;\n    }\n  }\n\n  if (offset === null) {\n    throw new Error('Could not find initial boundary');\n  }\n\n  while (offset < responseArrayBuffer.byteLength) {\n    var _text = decoder.decode(new Uint8Array(responseArrayBuffer, offset, Math.min(startBoundary.length + 1024, responseArrayBuffer.byteLength - offset))); // break if we arrived at the end\n\n\n    if (_text.length === 0 || _text.startsWith(endBoundary)) {\n      break;\n    } // assert that we are actually dealing with a byterange and are at the correct offset\n\n\n    if (!_text.startsWith(startBoundary)) {\n      throw new Error('Part does not start with boundary');\n    } // get a substring from where we read the headers\n\n\n    var innerText = _text.substr(startBoundary.length + 2);\n\n    if (innerText.length === 0) {\n      break;\n    } // find the double linebreak that denotes the end of the headers\n\n\n    var endOfHeaders = innerText.indexOf(CRLFCRLF); // parse the headers to get the content range size\n\n    var headers = parseHeaders(innerText.substr(0, endOfHeaders));\n\n    var _parseContentRange = parseContentRange(headers['content-range']),\n        start = _parseContentRange.start,\n        end = _parseContentRange.end,\n        total = _parseContentRange.total; // calculate the length of the slice and the next offset\n\n\n    var startOfData = offset + startBoundary.length + endOfHeaders + CRLFCRLF.length;\n    var length = parseInt(end, 10) + 1 - parseInt(start, 10);\n    out.push({\n      headers: headers,\n      data: responseArrayBuffer.slice(startOfData, startOfData + length),\n      offset: start,\n      length: length,\n      fileSize: total\n    });\n    offset = startOfData + length + 4;\n  }\n\n  return out;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\n/**\n * @typedef Slice\n * @property {number} offset\n * @property {number} length\n */\nexport var BaseSource = /*#__PURE__*/function () {\n  function BaseSource() {\n    _classCallCheck(this, BaseSource);\n  }\n\n  _createClass(BaseSource, [{\n    key: \"fetch\",\n    value:\n    /**\n     *\n     * @param {Slice[]} slices\n     * @returns {ArrayBuffer[]}\n     */\n    function () {\n      var _fetch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(slices) {\n        var _this = this;\n\n        var signal,\n            _args = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                signal = _args.length > 1 && _args[1] !== undefined ? _args[1] : undefined;\n                return _context.abrupt(\"return\", Promise.all(slices.map(function (slice) {\n                  return _this.fetchSlice(slice, signal);\n                })));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function fetch(_x) {\n        return _fetch.apply(this, arguments);\n      }\n\n      return fetch;\n    }()\n    /**\n     *\n     * @param {Slice} slice\n     * @returns {ArrayBuffer}\n     */\n\n  }, {\n    key: \"fetchSlice\",\n    value: function () {\n      var _fetchSlice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(slice) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                throw new Error(\"fetching of slice \".concat(slice, \" not possible, not implemented\"));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function fetchSlice(_x2) {\n        return _fetchSlice.apply(this, arguments);\n      }\n\n      return fetchSlice;\n    }()\n    /**\n     * Returns the filesize if already determined and null otherwise\n     */\n\n  }, {\n    key: \"fileSize\",\n    get: function get() {\n      return null;\n    }\n  }, {\n    key: \"close\",\n    value: function () {\n      var _close = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function close() {\n        return _close.apply(this, arguments);\n      }\n\n      return close;\n    }()\n  }]);\n\n  return BaseSource;\n}();","import _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _assertThisInitialized from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _wrapNativeSuper from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nexport function assign(target, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      target[key] = source[key];\n    }\n  }\n}\nexport function chunk(iterable, length) {\n  var results = [];\n  var lengthOfIterable = iterable.length;\n\n  for (var i = 0; i < lengthOfIterable; i += length) {\n    var chunked = [];\n\n    for (var ci = i; ci < i + length; ci++) {\n      chunked.push(iterable[ci]);\n    }\n\n    results.push(chunked);\n  }\n\n  return results;\n}\nexport function endsWith(string, expectedEnding) {\n  if (string.length < expectedEnding.length) {\n    return false;\n  }\n\n  var actualEnding = string.substr(string.length - expectedEnding.length);\n  return actualEnding === expectedEnding;\n}\nexport function forEach(iterable, func) {\n  var length = iterable.length;\n\n  for (var i = 0; i < length; i++) {\n    func(iterable[i], i);\n  }\n}\nexport function invert(oldObj) {\n  var newObj = {};\n\n  for (var key in oldObj) {\n    if (oldObj.hasOwnProperty(key)) {\n      var value = oldObj[key];\n      newObj[value] = key;\n    }\n  }\n\n  return newObj;\n}\nexport function range(n) {\n  var results = [];\n\n  for (var i = 0; i < n; i++) {\n    results.push(i);\n  }\n\n  return results;\n}\nexport function times(numTimes, func) {\n  var results = [];\n\n  for (var i = 0; i < numTimes; i++) {\n    results.push(func(i));\n  }\n\n  return results;\n}\nexport function toArray(iterable) {\n  var results = [];\n  var length = iterable.length;\n\n  for (var i = 0; i < length; i++) {\n    results.push(iterable[i]);\n  }\n\n  return results;\n}\nexport function toArrayRecursively(input) {\n  if (input.length) {\n    return toArray(input).map(toArrayRecursively);\n  }\n\n  return input;\n} // copied from https://github.com/academia-de-codigo/parse-content-range-header/blob/master/index.js\n\nexport function parseContentRange(headerValue) {\n  if (!headerValue) {\n    return null;\n  }\n\n  if (typeof headerValue !== 'string') {\n    throw new Error('invalid argument');\n  }\n\n  var parseInt = function parseInt(number) {\n    return Number.parseInt(number, 10);\n  }; // Check for presence of unit\n\n\n  var matches = headerValue.match(/^(\\w*) /);\n  var unit = matches && matches[1]; // check for start-end/size header format\n\n  matches = headerValue.match(/(\\d+)-(\\d+)\\/(\\d+|\\*)/);\n\n  if (matches) {\n    return {\n      unit: unit,\n      first: parseInt(matches[1]),\n      last: parseInt(matches[2]),\n      length: matches[3] === '*' ? null : parseInt(matches[3])\n    };\n  } // check for size header format\n\n\n  matches = headerValue.match(/(\\d+|\\*)/);\n\n  if (matches) {\n    return {\n      unit: unit,\n      first: null,\n      last: null,\n      length: matches[1] === '*' ? null : parseInt(matches[1])\n    };\n  }\n\n  return null;\n}\n/*\n * Promisified wrapper around 'setTimeout' to allow 'await'\n */\n\nexport function wait(_x) {\n  return _wait.apply(this, arguments);\n}\n\nfunction _wait() {\n  _wait = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(milliseconds) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", new Promise(function (resolve) {\n              return setTimeout(resolve, milliseconds);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _wait.apply(this, arguments);\n}\n\nexport function zip(a, b) {\n  var A = Array.isArray(a) ? a : Array.from(a);\n  var B = Array.isArray(b) ? b : Array.from(b);\n  return A.map(function (k, i) {\n    return [k, B[i]];\n  });\n} // Based on https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error\n\nexport var AbortError = /*#__PURE__*/function (_Error) {\n  _inherits(AbortError, _Error);\n\n  var _super = _createSuper(AbortError);\n\n  function AbortError(params) {\n    var _this;\n\n    _classCallCheck(this, AbortError);\n\n    // Pass remaining arguments (including vendor specific ones) to parent constructor\n    _this = _super.call(this, params); // Maintains proper stack trace for where our error was thrown (only available on V8)\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(_assertThisInitialized(_this), AbortError);\n    }\n\n    _this.name = 'AbortError';\n    return _this;\n  }\n\n  return _createClass(AbortError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nexport var CustomAggregateError = /*#__PURE__*/function (_Error2) {\n  _inherits(CustomAggregateError, _Error2);\n\n  var _super2 = _createSuper(CustomAggregateError);\n\n  function CustomAggregateError(errors, message) {\n    var _this2;\n\n    _classCallCheck(this, CustomAggregateError);\n\n    _this2 = _super2.call(this, message);\n    _this2.errors = errors;\n    _this2.message = message;\n    _this2.name = 'AggregateError';\n    return _this2;\n  }\n\n  return _createClass(CustomAggregateError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nexport var AggregateError = CustomAggregateError;","import _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\nimport \"core-js/modules/esnext.promise.all-settled.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport LRUCache from 'lru-cache';\nimport { BaseSource } from './basesource';\nimport { AbortError, AggregateError, wait, zip } from '../utils';\n\nvar Block = /*#__PURE__*/function () {\n  /**\n   *\n   * @param {number} offset\n   * @param {number} length\n   * @param {ArrayBuffer} [data]\n   */\n  function Block(offset, length) {\n    var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    _classCallCheck(this, Block);\n\n    this.offset = offset;\n    this.length = length;\n    this.data = data;\n  }\n  /**\n   * @returns {number} the top byte border\n   */\n\n\n  _createClass(Block, [{\n    key: \"top\",\n    get: function get() {\n      return this.offset + this.length;\n    }\n  }]);\n\n  return Block;\n}();\n\nvar BlockGroup = /*#__PURE__*/_createClass(\n/**\n *\n * @param {number} offset\n * @param {number} length\n * @param {number[]} blockIds\n */\nfunction BlockGroup(offset, length, blockIds) {\n  _classCallCheck(this, BlockGroup);\n\n  this.offset = offset;\n  this.length = length;\n  this.blockIds = blockIds;\n});\n\nexport var BlockedSource = /*#__PURE__*/function (_BaseSource) {\n  _inherits(BlockedSource, _BaseSource);\n\n  var _super = _createSuper(BlockedSource);\n\n  /**\n   *\n   * @param {Source} source The underlying source that shall be blocked and cached\n   * @param {object} options\n   */\n  function BlockedSource(source) {\n    var _this;\n\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$blockSize = _ref.blockSize,\n        blockSize = _ref$blockSize === void 0 ? 65536 : _ref$blockSize,\n        _ref$cacheSize = _ref.cacheSize,\n        cacheSize = _ref$cacheSize === void 0 ? 100 : _ref$cacheSize;\n\n    _classCallCheck(this, BlockedSource);\n\n    _this = _super.call(this);\n    _this.source = source;\n    _this.blockSize = blockSize;\n    _this.blockCache = new LRUCache({\n      max: cacheSize\n    }); // mapping blockId -> Block instance\n\n    _this.blockRequests = new Map(); // set of blockIds missing for the current requests\n\n    _this.blockIdsToFetch = new Set();\n    return _this;\n  }\n\n  _createClass(BlockedSource, [{\n    key: \"fileSize\",\n    get: function get() {\n      return this.source.fileSize;\n    }\n    /**\n     *\n     * @param {basesource/Slice[]} slices\n     */\n\n  }, {\n    key: \"fetch\",\n    value: function () {\n      var _fetch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(slices, signal) {\n        var cachedBlocks, blockRequests, missingBlockIds, _iterator, _step, _step$value, offset, length, top, fileSize, firstBlockOffset, current, _blockId2, _iterator2, _step2, _blockId3, _block, cachedBlock, results, retriedBlockRequests, _iterator3, _step3, _step3$value, _blockId, result, rejected, reason, _iterator4, _step4, blockId, block, values, requiredBlocks, _iterator5, _step5, _step5$value, _blockId4, _block2;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                cachedBlocks = new Map();\n                blockRequests = new Map();\n                missingBlockIds = new Set();\n                _iterator = _createForOfIteratorHelper(slices);\n\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    _step$value = _step.value, offset = _step$value.offset, length = _step$value.length;\n                    top = offset + length;\n                    fileSize = this.fileSize;\n\n                    if (fileSize !== null) {\n                      top = Math.min(top, fileSize);\n                    }\n\n                    firstBlockOffset = Math.floor(offset / this.blockSize) * this.blockSize; // chunk the current slice into blocks\n\n                    for (current = firstBlockOffset; current < top; current += this.blockSize) {\n                      // check if the block is cached, being requested or still missing\n                      _blockId2 = Math.floor(current / this.blockSize);\n\n                      if (this.blockCache.has(_blockId2)) {\n                        cachedBlocks.set(_blockId2, this.blockCache.get(_blockId2));\n                      } else if (this.blockRequests.has(_blockId2)) {\n                        blockRequests.set(_blockId2, this.blockRequests.get(_blockId2));\n                      } else if (this.blockIdsToFetch.has(_blockId2)) {\n                        missingBlockIds.add(_blockId2);\n                      } else {\n                        this.blockIdsToFetch.add(_blockId2);\n                        missingBlockIds.add(_blockId2);\n                      }\n                    }\n                  } // allow additional block requests to accumulate\n\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n\n                _context.next = 7;\n                return wait();\n\n              case 7:\n                this.fetchBlocks(signal);\n                _iterator2 = _createForOfIteratorHelper(missingBlockIds);\n                _context.prev = 9;\n\n                _iterator2.s();\n\n              case 11:\n                if ((_step2 = _iterator2.n()).done) {\n                  _context.next = 26;\n                  break;\n                }\n\n                _blockId3 = _step2.value;\n                _block = this.blockRequests.get(_blockId3);\n                cachedBlock = this.blockCache.get(_blockId3);\n\n                if (!_block) {\n                  _context.next = 19;\n                  break;\n                }\n\n                blockRequests.set(_blockId3, _block);\n                _context.next = 24;\n                break;\n\n              case 19:\n                if (!cachedBlock) {\n                  _context.next = 23;\n                  break;\n                }\n\n                cachedBlocks.set(_blockId3, cachedBlock);\n                _context.next = 24;\n                break;\n\n              case 23:\n                throw new Error(\"Block \".concat(_blockId3, \" is not in the block requests\"));\n\n              case 24:\n                _context.next = 11;\n                break;\n\n              case 26:\n                _context.next = 31;\n                break;\n\n              case 28:\n                _context.prev = 28;\n                _context.t0 = _context[\"catch\"](9);\n\n                _iterator2.e(_context.t0);\n\n              case 31:\n                _context.prev = 31;\n\n                _iterator2.f();\n\n                return _context.finish(31);\n\n              case 34:\n                _context.next = 36;\n                return Promise.allSettled(Array.from(blockRequests.values()));\n\n              case 36:\n                results = _context.sent;\n\n                if (!results.some(function (result) {\n                  return result.status === 'rejected';\n                })) {\n                  _context.next = 65;\n                  break;\n                }\n\n                retriedBlockRequests = new Set();\n                _iterator3 = _createForOfIteratorHelper(zip(blockRequests.keys(), results));\n\n                try {\n                  for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                    _step3$value = _slicedToArray(_step3.value, 2), _blockId = _step3$value[0], result = _step3$value[1];\n                    rejected = result.rejected, reason = result.reason;\n\n                    if (rejected) {\n                      // push some blocks back to the to-fetch list if they were\n                      // aborted, but only when a different signal was used\n                      if (reason.name === 'AbortError' && reason.signal !== signal) {\n                        this.blockIdsToFetch.add(_blockId);\n                        retriedBlockRequests.add(_blockId);\n                      }\n                    }\n                  } // start the retry of some blocks if required\n\n                } catch (err) {\n                  _iterator3.e(err);\n                } finally {\n                  _iterator3.f();\n                }\n\n                if (!(this.blockIdsToFetch.length > 0)) {\n                  _context.next = 65;\n                  break;\n                }\n\n                this.fetchBlocks(signal);\n                _iterator4 = _createForOfIteratorHelper(retriedBlockRequests);\n                _context.prev = 44;\n\n                _iterator4.s();\n\n              case 46:\n                if ((_step4 = _iterator4.n()).done) {\n                  _context.next = 54;\n                  break;\n                }\n\n                blockId = _step4.value;\n                block = this.blockRequests.get(blockId);\n\n                if (block) {\n                  _context.next = 51;\n                  break;\n                }\n\n                throw new Error(\"Block \".concat(blockId, \" is not in the block requests\"));\n\n              case 51:\n                blockRequests.set(blockId, block);\n\n              case 52:\n                _context.next = 46;\n                break;\n\n              case 54:\n                _context.next = 59;\n                break;\n\n              case 56:\n                _context.prev = 56;\n                _context.t1 = _context[\"catch\"](44);\n\n                _iterator4.e(_context.t1);\n\n              case 59:\n                _context.prev = 59;\n\n                _iterator4.f();\n\n                return _context.finish(59);\n\n              case 62:\n                _context.next = 64;\n                return Promise.allSettled(Array.from(blockRequests.values()));\n\n              case 64:\n                results = _context.sent;\n\n              case 65:\n                if (!results.some(function (result) {\n                  return result.status === 'rejected';\n                })) {\n                  _context.next = 69;\n                  break;\n                }\n\n                if (!(signal && signal.aborted)) {\n                  _context.next = 68;\n                  break;\n                }\n\n                throw new AbortError('Request was aborted');\n\n              case 68:\n                throw new AggregateError(results.filter(function (result) {\n                  return result.status === 'rejected';\n                }).map(function (result) {\n                  return result.reason;\n                }), 'Request failed');\n\n              case 69:\n                // extract the actual block responses\n                values = results.map(function (result) {\n                  return result.value;\n                }); // create a final Map, with all required blocks for this request to satisfy\n\n                requiredBlocks = new Map(zip(Array.from(blockRequests.keys()), values));\n                _iterator5 = _createForOfIteratorHelper(cachedBlocks);\n\n                try {\n                  for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n                    _step5$value = _slicedToArray(_step5.value, 2), _blockId4 = _step5$value[0], _block2 = _step5$value[1];\n                    requiredBlocks.set(_blockId4, _block2);\n                  } // TODO: satisfy each slice\n\n                } catch (err) {\n                  _iterator5.e(err);\n                } finally {\n                  _iterator5.f();\n                }\n\n                return _context.abrupt(\"return\", this.readSliceData(slices, requiredBlocks));\n\n              case 74:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[9, 28, 31, 34], [44, 56, 59, 62]]);\n      }));\n\n      function fetch(_x, _x2) {\n        return _fetch.apply(this, arguments);\n      }\n\n      return fetch;\n    }()\n    /**\n     *\n     * @param {AbortSignal} signal\n     */\n\n  }, {\n    key: \"fetchBlocks\",\n    value: function fetchBlocks(signal) {\n      var _this2 = this;\n\n      // check if we still need to\n      if (this.blockIdsToFetch.size > 0) {\n        (function () {\n          var groups = _this2.groupBlocks(_this2.blockIdsToFetch); // start requesting slices of data\n\n\n          var groupRequests = _this2.source.fetch(groups, signal);\n\n          var _loop = function _loop(groupIndex) {\n            var group = groups[groupIndex];\n\n            var _iterator6 = _createForOfIteratorHelper(group.blockIds),\n                _step6;\n\n            try {\n              var _loop2 = function _loop2() {\n                var blockId = _step6.value;\n\n                // make an async IIFE for each block\n                var blockRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                  var response, blockOffset, o, t, data, block;\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.prev = 0;\n                          _context2.next = 3;\n                          return groupRequests;\n\n                        case 3:\n                          _context2.t0 = groupIndex;\n                          response = _context2.sent[_context2.t0];\n                          blockOffset = blockId * _this2.blockSize;\n                          o = blockOffset - response.offset;\n                          t = Math.min(o + _this2.blockSize, response.data.byteLength);\n                          data = response.data.slice(o, t);\n                          block = new Block(blockOffset, data.byteLength, data);\n\n                          _this2.blockCache.set(blockId, block);\n\n                          return _context2.abrupt(\"return\", block);\n\n                        case 14:\n                          _context2.prev = 14;\n                          _context2.t1 = _context2[\"catch\"](0);\n\n                          if (_context2.t1.name === 'AbortError') {\n                            // store the signal here, we need it to determine later if an\n                            // error was caused by this signal\n                            _context2.t1.signal = signal;\n                          }\n\n                          throw _context2.t1;\n\n                        case 18:\n                          _context2.prev = 18;\n\n                          _this2.blockRequests.delete(blockId);\n\n                          return _context2.finish(18);\n\n                        case 21:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2, null, [[0, 14, 18, 21]]);\n                }))();\n\n                _this2.blockRequests.set(blockId, blockRequest);\n              };\n\n              for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n                _loop2();\n              }\n            } catch (err) {\n              _iterator6.e(err);\n            } finally {\n              _iterator6.f();\n            }\n          };\n\n          for (var groupIndex = 0; groupIndex < groups.length; ++groupIndex) {\n            _loop(groupIndex);\n          }\n\n          _this2.blockIdsToFetch.clear();\n        })();\n      }\n    }\n    /**\n     *\n     * @param {Set} blockIds\n     * @returns {BlockGroup[]}\n     */\n\n  }, {\n    key: \"groupBlocks\",\n    value: function groupBlocks(blockIds) {\n      var sortedBlockIds = Array.from(blockIds).sort(function (a, b) {\n        return a - b;\n      });\n\n      if (sortedBlockIds.length === 0) {\n        return [];\n      }\n\n      var current = [];\n      var lastBlockId = null;\n      var groups = [];\n\n      var _iterator7 = _createForOfIteratorHelper(sortedBlockIds),\n          _step7;\n\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var blockId = _step7.value;\n\n          if (lastBlockId === null || lastBlockId + 1 === blockId) {\n            current.push(blockId);\n            lastBlockId = blockId;\n          } else {\n            groups.push(new BlockGroup(current[0] * this.blockSize, current.length * this.blockSize, current));\n            current = [blockId];\n            lastBlockId = blockId;\n          }\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n\n      groups.push(new BlockGroup(current[0] * this.blockSize, current.length * this.blockSize, current));\n      return groups;\n    }\n    /**\n     *\n     * @param {Slice[]} slices\n     * @param {Map} blocks\n     */\n\n  }, {\n    key: \"readSliceData\",\n    value: function readSliceData(slices, blocks) {\n      var _this3 = this;\n\n      return slices.map(function (slice) {\n        var top = slice.offset + slice.length;\n        var blockIdLow = Math.floor(slice.offset / _this3.blockSize);\n        var blockIdHigh = Math.floor((slice.offset + slice.length) / _this3.blockSize);\n        var sliceData = new ArrayBuffer(slice.length);\n        var sliceView = new Uint8Array(sliceData);\n\n        for (var blockId = blockIdLow; blockId <= blockIdHigh; ++blockId) {\n          var block = blocks.get(blockId);\n          var delta = block.offset - slice.offset;\n          var topDelta = block.top - top;\n          var blockInnerOffset = 0;\n          var rangeInnerOffset = 0;\n          var usedBlockLength = void 0;\n\n          if (delta < 0) {\n            blockInnerOffset = -delta;\n          } else if (delta > 0) {\n            rangeInnerOffset = delta;\n          }\n\n          if (topDelta < 0) {\n            usedBlockLength = block.length - blockInnerOffset;\n          } else {\n            usedBlockLength = top - block.offset - blockInnerOffset;\n          }\n\n          var blockView = new Uint8Array(block.data, blockInnerOffset, usedBlockLength);\n          sliceView.set(blockView, rangeInnerOffset);\n        }\n\n        return sliceData;\n      });\n    }\n  }]);\n\n  return BlockedSource;\n}(BaseSource);","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\nexport var BaseResponse = /*#__PURE__*/function () {\n  function BaseResponse() {\n    _classCallCheck(this, BaseResponse);\n  }\n\n  _createClass(BaseResponse, [{\n    key: \"ok\",\n    get:\n    /**\n     * Returns whether the response has an ok'ish status code\n     */\n    function get() {\n      return this.status >= 200 && this.status <= 299;\n    }\n    /**\n     * Returns the status code of the response\n     */\n\n  }, {\n    key: \"status\",\n    get: function get() {\n      throw new Error('not implemented');\n    }\n    /**\n     * Returns the value of the specified header\n     * @param {string} headerName the header name\n     * @returns {string} the header value\n     */\n\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(headerName) {\n      // eslint-disable-line no-unused-vars\n      throw new Error('not implemented');\n    }\n    /**\n     * @returns {ArrayBuffer} the response data of the request\n     */\n\n  }, {\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                throw new Error('not implemented');\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }()\n  }]);\n\n  return BaseResponse;\n}();\nexport var BaseClient = /*#__PURE__*/function () {\n  function BaseClient(url) {\n    _classCallCheck(this, BaseClient);\n\n    this.url = url;\n  }\n  /**\n   * Send a request with the options\n   * @param {object} [options]\n   */\n\n\n  _createClass(BaseClient, [{\n    key: \"request\",\n    value: function () {\n      var _request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _ref,\n            headers,\n            credentials,\n            signal,\n            _args2 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _ref = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {}, headers = _ref.headers, credentials = _ref.credentials, signal = _ref.signal;\n                throw new Error('request is not implemented');\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function request() {\n        return _request.apply(this, arguments);\n      }\n\n      return request;\n    }()\n  }]);\n\n  return BaseClient;\n}();","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { BaseClient, BaseResponse } from './base';\n\nvar FetchResponse = /*#__PURE__*/function (_BaseResponse) {\n  _inherits(FetchResponse, _BaseResponse);\n\n  var _super = _createSuper(FetchResponse);\n\n  /**\n   * BaseResponse facade for fetch API Response\n   * @param {Response} response\n   */\n  function FetchResponse(response) {\n    var _this;\n\n    _classCallCheck(this, FetchResponse);\n\n    _this = _super.call(this);\n    _this.response = response;\n    return _this;\n  }\n\n  _createClass(FetchResponse, [{\n    key: \"status\",\n    get: function get() {\n      return this.response.status;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(name) {\n      return this.response.headers.get(name);\n    }\n  }, {\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.response.arrayBuffer) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 3;\n                return this.response.arrayBuffer();\n\n              case 3:\n                _context.t0 = _context.sent;\n                _context.next = 9;\n                break;\n\n              case 6:\n                _context.next = 8;\n                return this.response.buffer();\n\n              case 8:\n                _context.t0 = _context.sent.buffer;\n\n              case 9:\n                data = _context.t0;\n                return _context.abrupt(\"return\", data);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }()\n  }]);\n\n  return FetchResponse;\n}(BaseResponse);\n\nexport var FetchClient = /*#__PURE__*/function (_BaseClient) {\n  _inherits(FetchClient, _BaseClient);\n\n  var _super2 = _createSuper(FetchClient);\n\n  function FetchClient(url, credentials) {\n    var _this2;\n\n    _classCallCheck(this, FetchClient);\n\n    _this2 = _super2.call(this, url);\n    _this2.credentials = credentials;\n    return _this2;\n  }\n\n  _createClass(FetchClient, [{\n    key: \"request\",\n    value: function () {\n      var _request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _ref,\n            headers,\n            credentials,\n            signal,\n            response,\n            _args2 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _ref = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {}, headers = _ref.headers, credentials = _ref.credentials, signal = _ref.signal;\n                _context2.next = 3;\n                return fetch(this.url, {\n                  headers: headers,\n                  credentials: credentials,\n                  signal: signal\n                });\n\n              case 3:\n                response = _context2.sent;\n                return _context2.abrupt(\"return\", new FetchResponse(response));\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function request() {\n        return _request.apply(this, arguments);\n      }\n\n      return request;\n    }()\n  }]);\n\n  return FetchClient;\n}(BaseClient);","import _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { BaseClient, BaseResponse } from './base';\nimport { AbortError } from '../../utils';\n\nvar XHRResponse = /*#__PURE__*/function (_BaseResponse) {\n  _inherits(XHRResponse, _BaseResponse);\n\n  var _super = _createSuper(XHRResponse);\n\n  /**\n   * BaseResponse facade for XMLHttpRequest\n   * @param {XMLHttpRequest} xhr\n   * @param {ArrayBuffer} data\n   */\n  function XHRResponse(xhr, data) {\n    var _this;\n\n    _classCallCheck(this, XHRResponse);\n\n    _this = _super.call(this);\n    _this.xhr = xhr;\n    _this.data = data;\n    return _this;\n  }\n\n  _createClass(XHRResponse, [{\n    key: \"status\",\n    get: function get() {\n      return this.xhr.status;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(name) {\n      return this.xhr.getResponseHeader(name);\n    }\n  }, {\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", this.data);\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }()\n  }]);\n\n  return XHRResponse;\n}(BaseResponse);\n\nexport var XHRClient = /*#__PURE__*/function (_BaseClient) {\n  _inherits(XHRClient, _BaseClient);\n\n  var _super2 = _createSuper(XHRClient);\n\n  function XHRClient() {\n    _classCallCheck(this, XHRClient);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(XHRClient, [{\n    key: \"constructRequest\",\n    value: function constructRequest(headers, signal) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', _this2.url);\n        xhr.responseType = 'arraybuffer';\n\n        for (var _i = 0, _Object$entries = Object.entries(headers); _i < _Object$entries.length; _i++) {\n          var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n              key = _Object$entries$_i[0],\n              value = _Object$entries$_i[1];\n\n          xhr.setRequestHeader(key, value);\n        } // hook signals\n\n\n        xhr.onload = function () {\n          var data = xhr.response;\n          resolve(new XHRResponse(xhr, data));\n        };\n\n        xhr.onerror = reject;\n\n        xhr.onabort = function () {\n          return reject(new AbortError('Request aborted'));\n        };\n\n        xhr.send();\n\n        if (signal) {\n          if (signal.aborted) {\n            xhr.abort();\n          }\n\n          signal.addEventListener('abort', function () {\n            return xhr.abort();\n          });\n        }\n      });\n    }\n  }, {\n    key: \"request\",\n    value: function () {\n      var _request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _ref,\n            headers,\n            signal,\n            response,\n            _args2 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _ref = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {}, headers = _ref.headers, signal = _ref.signal;\n                _context2.next = 3;\n                return this.constructRequest(headers, signal);\n\n              case 3:\n                response = _context2.sent;\n                return _context2.abrupt(\"return\", response);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function request() {\n        return _request.apply(this, arguments);\n      }\n\n      return request;\n    }()\n  }]);\n\n  return XHRClient;\n}(BaseClient);","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport http from 'http';\nimport https from 'https';\nimport urlMod from 'url';\nimport { BaseClient, BaseResponse } from './base';\nimport { AbortError } from '../../utils';\n\nvar HttpResponse = /*#__PURE__*/function (_BaseResponse) {\n  _inherits(HttpResponse, _BaseResponse);\n\n  var _super = _createSuper(HttpResponse);\n\n  /**\n   * BaseResponse facade for node HTTP/HTTPS API Response\n   * @param {http.ServerResponse} response\n   */\n  function HttpResponse(response, dataPromise) {\n    var _this;\n\n    _classCallCheck(this, HttpResponse);\n\n    _this = _super.call(this);\n    _this.response = response;\n    _this.dataPromise = dataPromise;\n    return _this;\n  }\n\n  _createClass(HttpResponse, [{\n    key: \"status\",\n    get: function get() {\n      return this.response.statusCode;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(name) {\n      return this.response.headers[name];\n    }\n  }, {\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.dataPromise;\n\n              case 2:\n                data = _context.sent;\n                return _context.abrupt(\"return\", data);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }()\n  }]);\n\n  return HttpResponse;\n}(BaseResponse);\n\nexport var HttpClient = /*#__PURE__*/function (_BaseClient) {\n  _inherits(HttpClient, _BaseClient);\n\n  var _super2 = _createSuper(HttpClient);\n\n  function HttpClient(url) {\n    var _this2;\n\n    _classCallCheck(this, HttpClient);\n\n    _this2 = _super2.call(this, url);\n    _this2.parsedUrl = urlMod.parse(_this2.url);\n    _this2.httpApi = _this2.parsedUrl.protocol === 'http:' ? http : https;\n    return _this2;\n  }\n\n  _createClass(HttpClient, [{\n    key: \"constructRequest\",\n    value: function constructRequest(headers, signal) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        var request = _this3.httpApi.get(_objectSpread(_objectSpread({}, _this3.parsedUrl), {}, {\n          headers: headers\n        }), function (response) {\n          var dataPromise = new Promise(function (resolveData) {\n            var chunks = []; // collect chunks\n\n            response.on('data', function (chunk) {\n              chunks.push(chunk);\n            }); // concatenate all chunks and resolve the promise with the resulting buffer\n\n            response.on('end', function () {\n              var data = Buffer.concat(chunks).buffer;\n              resolveData(data);\n            });\n            response.on('error', reject);\n          });\n          resolve(new HttpResponse(response, dataPromise));\n        });\n\n        request.on('error', reject);\n\n        if (signal) {\n          if (signal.aborted) {\n            request.destroy(new AbortError('Request aborted'));\n          }\n\n          signal.addEventListener('abort', function () {\n            return request.destroy(new AbortError('Request aborted'));\n          });\n        }\n      });\n    }\n  }, {\n    key: \"request\",\n    value: function () {\n      var _request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _ref,\n            headers,\n            signal,\n            response,\n            _args2 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _ref = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {}, headers = _ref.headers, signal = _ref.signal;\n                _context2.next = 3;\n                return this.constructRequest(headers, signal);\n\n              case 3:\n                response = _context2.sent;\n                return _context2.abrupt(\"return\", response);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function request() {\n        return _request.apply(this, arguments);\n      }\n\n      return request;\n    }()\n  }]);\n\n  return HttpClient;\n}(BaseClient);","import _objectWithoutProperties from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nvar _excluded = [\"headers\", \"credentials\", \"maxRanges\", \"allowFullFile\"],\n    _excluded2 = [\"headers\", \"maxRanges\", \"allowFullFile\"],\n    _excluded3 = [\"headers\", \"maxRanges\", \"allowFullFile\"],\n    _excluded4 = [\"forceXHR\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { parseByteRanges, parseContentRange, parseContentType } from './httputils';\nimport { BaseSource } from './basesource';\nimport { BlockedSource } from './blockedsource';\nimport { FetchClient } from './client/fetch';\nimport { XHRClient } from './client/xhr';\nimport { HttpClient } from './client/http';\n\nvar RemoteSource = /*#__PURE__*/function (_BaseSource) {\n  _inherits(RemoteSource, _BaseSource);\n\n  var _super = _createSuper(RemoteSource);\n\n  /**\n   *\n   * @param {BaseClient} client\n   * @param {object} headers\n   * @param {numbers} maxRanges\n   * @param {boolean} allowFullFile\n   */\n  function RemoteSource(client, headers, maxRanges, allowFullFile) {\n    var _this;\n\n    _classCallCheck(this, RemoteSource);\n\n    _this = _super.call(this);\n    _this.client = client;\n    _this.headers = headers;\n    _this.maxRanges = maxRanges;\n    _this.allowFullFile = allowFullFile;\n    _this._fileSize = null;\n    return _this;\n  }\n  /**\n   *\n   * @param {Slice[]} slices\n   */\n\n\n  _createClass(RemoteSource, [{\n    key: \"fetch\",\n    value: function () {\n      var _fetch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(slices, signal) {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this.maxRanges >= slices.length)) {\n                  _context.next = 4;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", this.fetchSlices(slices, signal));\n\n              case 4:\n                if (this.maxRanges > 0 && slices.length > 1) {// TODO: split into multiple multi-range requests\n                  // const subSlicesRequests = [];\n                  // for (let i = 0; i < slices.length; i += this.maxRanges) {\n                  //   subSlicesRequests.push(\n                  //     this.fetchSlices(slices.slice(i, i + this.maxRanges), signal),\n                  //   );\n                  // }\n                  // return (await Promise.all(subSlicesRequests)).flat();\n                }\n\n              case 5:\n                return _context.abrupt(\"return\", Promise.all(slices.map(function (slice) {\n                  return _this2.fetchSlice(slice, signal);\n                })));\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function fetch(_x, _x2) {\n        return _fetch.apply(this, arguments);\n      }\n\n      return fetch;\n    }()\n  }, {\n    key: \"fetchSlices\",\n    value: function () {\n      var _fetchSlices = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(slices, signal) {\n        var _this3 = this;\n\n        var response, _parseContentType, type, params, byteRanges, data, _parseContentRange, start, end, total, first, others, _data;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.client.request({\n                  headers: _objectSpread(_objectSpread({}, this.headers), {}, {\n                    Range: \"bytes=\".concat(slices.map(function (_ref) {\n                      var offset = _ref.offset,\n                          length = _ref.length;\n                      return \"\".concat(offset, \"-\").concat(offset + length);\n                    }).join(','))\n                  }),\n                  signal: signal\n                });\n\n              case 2:\n                response = _context2.sent;\n\n                if (response.ok) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw new Error('Error fetching data.');\n\n              case 7:\n                if (!(response.status === 206)) {\n                  _context2.next = 32;\n                  break;\n                }\n\n                _parseContentType = parseContentType(response.getHeader('content-type')), type = _parseContentType.type, params = _parseContentType.params;\n\n                if (!(type === 'multipart/byteranges')) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                _context2.t0 = parseByteRanges;\n                _context2.next = 13;\n                return response.getData();\n\n              case 13:\n                _context2.t1 = _context2.sent;\n                _context2.t2 = params.boundary;\n                byteRanges = (0, _context2.t0)(_context2.t1, _context2.t2);\n                this._fileSize = byteRanges[0].fileSize || null;\n                return _context2.abrupt(\"return\", byteRanges);\n\n              case 18:\n                _context2.next = 20;\n                return response.getData();\n\n              case 20:\n                data = _context2.sent;\n                _parseContentRange = parseContentRange(response.getHeader('content-range')), start = _parseContentRange.start, end = _parseContentRange.end, total = _parseContentRange.total;\n                this._fileSize = total || null;\n                first = [{\n                  data: data,\n                  offset: start,\n                  length: end - start\n                }];\n\n                if (!(slices.length > 1)) {\n                  _context2.next = 29;\n                  break;\n                }\n\n                _context2.next = 27;\n                return Promise.all(slices.slice(1).map(function (slice) {\n                  return _this3.fetchSlice(slice, signal);\n                }));\n\n              case 27:\n                others = _context2.sent;\n                return _context2.abrupt(\"return\", first.concat(others));\n\n              case 29:\n                return _context2.abrupt(\"return\", first);\n\n              case 32:\n                if (this.allowFullFile) {\n                  _context2.next = 34;\n                  break;\n                }\n\n                throw new Error('Server responded with full file');\n\n              case 34:\n                _context2.next = 36;\n                return response.getData();\n\n              case 36:\n                _data = _context2.sent;\n                this._fileSize = _data.byteLength;\n                return _context2.abrupt(\"return\", [{\n                  data: _data,\n                  offset: 0,\n                  length: _data.byteLength\n                }]);\n\n              case 39:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function fetchSlices(_x3, _x4) {\n        return _fetchSlices.apply(this, arguments);\n      }\n\n      return fetchSlices;\n    }()\n  }, {\n    key: \"fetchSlice\",\n    value: function () {\n      var _fetchSlice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(slice, signal) {\n        var offset, length, response, data, _parseContentRange2, total, _data2;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                offset = slice.offset, length = slice.length;\n                _context3.next = 3;\n                return this.client.request({\n                  headers: _objectSpread(_objectSpread({}, this.headers), {}, {\n                    Range: \"bytes=\".concat(offset, \"-\").concat(offset + length)\n                  }),\n                  signal: signal\n                });\n\n              case 3:\n                response = _context3.sent;\n\n                if (response.ok) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                throw new Error('Error fetching data.');\n\n              case 8:\n                if (!(response.status === 206)) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                _context3.next = 11;\n                return response.getData();\n\n              case 11:\n                data = _context3.sent;\n                _parseContentRange2 = parseContentRange(response.getHeader('content-range')), total = _parseContentRange2.total;\n                this._fileSize = total || null;\n                return _context3.abrupt(\"return\", {\n                  data: data,\n                  offset: offset,\n                  length: length\n                });\n\n              case 17:\n                if (this.allowFullFile) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                throw new Error('Server responded with full file');\n\n              case 19:\n                _context3.next = 21;\n                return response.getData();\n\n              case 21:\n                _data2 = _context3.sent;\n                this._fileSize = _data2.byteLength;\n                return _context3.abrupt(\"return\", {\n                  data: _data2,\n                  offset: 0,\n                  length: _data2.byteLength\n                });\n\n              case 24:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function fetchSlice(_x5, _x6) {\n        return _fetchSlice.apply(this, arguments);\n      }\n\n      return fetchSlice;\n    }()\n  }, {\n    key: \"fileSize\",\n    get: function get() {\n      return this._fileSize;\n    }\n  }]);\n\n  return RemoteSource;\n}(BaseSource);\n\nfunction maybeWrapInBlockedSource(source, _ref2) {\n  var blockSize = _ref2.blockSize,\n      cacheSize = _ref2.cacheSize;\n\n  if (blockSize === null) {\n    return source;\n  }\n\n  return new BlockedSource(source, blockSize, cacheSize);\n}\n\nexport function makeFetchSource(url) {\n  var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref3$headers = _ref3.headers,\n      headers = _ref3$headers === void 0 ? {} : _ref3$headers,\n      credentials = _ref3.credentials,\n      _ref3$maxRanges = _ref3.maxRanges,\n      maxRanges = _ref3$maxRanges === void 0 ? 0 : _ref3$maxRanges,\n      _ref3$allowFullFile = _ref3.allowFullFile,\n      allowFullFile = _ref3$allowFullFile === void 0 ? false : _ref3$allowFullFile,\n      blockOptions = _objectWithoutProperties(_ref3, _excluded);\n\n  var client = new FetchClient(url, credentials);\n  var source = new RemoteSource(client, headers, maxRanges, allowFullFile);\n  return maybeWrapInBlockedSource(source, blockOptions);\n}\nexport function makeXHRSource(url) {\n  var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref4$headers = _ref4.headers,\n      headers = _ref4$headers === void 0 ? {} : _ref4$headers,\n      _ref4$maxRanges = _ref4.maxRanges,\n      maxRanges = _ref4$maxRanges === void 0 ? 0 : _ref4$maxRanges,\n      _ref4$allowFullFile = _ref4.allowFullFile,\n      allowFullFile = _ref4$allowFullFile === void 0 ? false : _ref4$allowFullFile,\n      blockOptions = _objectWithoutProperties(_ref4, _excluded2);\n\n  var client = new XHRClient(url);\n  var source = new RemoteSource(client, headers, maxRanges, allowFullFile);\n  return maybeWrapInBlockedSource(source, blockOptions);\n}\nexport function makeHttpSource(url) {\n  var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref5$headers = _ref5.headers,\n      headers = _ref5$headers === void 0 ? {} : _ref5$headers,\n      _ref5$maxRanges = _ref5.maxRanges,\n      maxRanges = _ref5$maxRanges === void 0 ? 0 : _ref5$maxRanges,\n      _ref5$allowFullFile = _ref5.allowFullFile,\n      allowFullFile = _ref5$allowFullFile === void 0 ? false : _ref5$allowFullFile,\n      blockOptions = _objectWithoutProperties(_ref5, _excluded3);\n\n  var client = new HttpClient(url);\n  var source = new RemoteSource(client, headers, maxRanges, allowFullFile);\n  return maybeWrapInBlockedSource(source, blockOptions);\n}\n/**\n *\n * @param {string} url\n * @param {object} options\n */\n\nexport function makeRemoteSource(url) {\n  var _ref6 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref6$forceXHR = _ref6.forceXHR,\n      forceXHR = _ref6$forceXHR === void 0 ? false : _ref6$forceXHR,\n      clientOptions = _objectWithoutProperties(_ref6, _excluded4);\n\n  if (typeof fetch === 'function' && !forceXHR) {\n    return makeFetchSource(url, clientOptions);\n  }\n\n  if (typeof XMLHttpRequest !== 'undefined') {\n    return makeXHRSource(url, clientOptions);\n  }\n\n  return makeHttpSource(url, clientOptions);\n}","import _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { BaseSource } from './basesource';\nimport { AbortError } from '../utils';\n\nvar ArrayBufferSource = /*#__PURE__*/function (_BaseSource) {\n  _inherits(ArrayBufferSource, _BaseSource);\n\n  var _super = _createSuper(ArrayBufferSource);\n\n  function ArrayBufferSource(arrayBuffer) {\n    var _this;\n\n    _classCallCheck(this, ArrayBufferSource);\n\n    _this = _super.call(this);\n    _this.arrayBuffer = arrayBuffer;\n    return _this;\n  }\n\n  _createClass(ArrayBufferSource, [{\n    key: \"fetchSlice\",\n    value: function fetchSlice(slice, signal) {\n      if (signal && signal.aborted) {\n        throw new AbortError('Request aborted');\n      }\n\n      return this.arrayBuffer.slice(slice.offset, slice.offset + slice.length);\n    }\n  }]);\n\n  return ArrayBufferSource;\n}(BaseSource);\n\nexport function makeBufferSource(arrayBuffer) {\n  return new ArrayBufferSource(arrayBuffer);\n}","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { BaseSource } from './basesource';\n\nvar FileReaderSource = /*#__PURE__*/function (_BaseSource) {\n  _inherits(FileReaderSource, _BaseSource);\n\n  var _super = _createSuper(FileReaderSource);\n\n  function FileReaderSource(file) {\n    var _this;\n\n    _classCallCheck(this, FileReaderSource);\n\n    _this = _super.call(this);\n    _this.file = file;\n    return _this;\n  }\n\n  _createClass(FileReaderSource, [{\n    key: \"fetchSlice\",\n    value: function () {\n      var _fetchSlice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(slice, signal) {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  var blob = _this2.file.slice(slice.offset, slice.offset + slice.length);\n\n                  var reader = new FileReader();\n\n                  reader.onload = function (event) {\n                    return resolve(event.target.result);\n                  };\n\n                  reader.onerror = reject;\n                  reader.onabort = reject;\n                  reader.readAsArrayBuffer(blob);\n\n                  if (signal) {\n                    signal.addEventListener('abort', function () {\n                      return reader.abort();\n                    });\n                  }\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function fetchSlice(_x, _x2) {\n        return _fetchSlice.apply(this, arguments);\n      }\n\n      return fetchSlice;\n    }()\n  }]);\n\n  return FileReaderSource;\n}(BaseSource);\n/**\n * Create a new source from a given file/blob.\n * @param {Blob} file The file or blob to read from.\n * @returns The constructed source\n */\n\n\nexport function makeFileReaderSource(file) {\n  return new FileReaderSource(file);\n}","import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport fs from 'fs';\nimport { BaseSource } from './basesource';\n\nfunction closeAsync(fd) {\n  return new Promise(function (resolve, reject) {\n    fs.close(fd, function (err) {\n      if (err) {\n        reject(err);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n\nfunction openAsync(path, flags) {\n  var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n  return new Promise(function (resolve, reject) {\n    fs.open(path, flags, mode, function (err, fd) {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(fd);\n      }\n    });\n  });\n}\n\nfunction readAsync() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return new Promise(function (resolve, reject) {\n    fs.read.apply(fs, args.concat([function (err, bytesRead, buffer) {\n      if (err) {\n        reject(err);\n      } else {\n        resolve({\n          bytesRead: bytesRead,\n          buffer: buffer\n        });\n      }\n    }]));\n  });\n}\n\nvar FileSource = /*#__PURE__*/function (_BaseSource) {\n  _inherits(FileSource, _BaseSource);\n\n  var _super = _createSuper(FileSource);\n\n  function FileSource(path) {\n    var _this;\n\n    _classCallCheck(this, FileSource);\n\n    _this = _super.call(this);\n    _this.path = path;\n    _this.openRequest = openAsync(path, 'r');\n    return _this;\n  }\n\n  _createClass(FileSource, [{\n    key: \"fetchSlice\",\n    value: function () {\n      var _fetchSlice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(slice) {\n        var fd, _yield$readAsync, buffer;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.openRequest;\n\n              case 2:\n                fd = _context.sent;\n                _context.next = 5;\n                return readAsync(fd, Buffer.alloc(slice.length), 0, slice.length, slice.offset);\n\n              case 5:\n                _yield$readAsync = _context.sent;\n                buffer = _yield$readAsync.buffer;\n                return _context.abrupt(\"return\", buffer.buffer);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function fetchSlice(_x) {\n        return _fetchSlice.apply(this, arguments);\n      }\n\n      return fetchSlice;\n    }()\n  }, {\n    key: \"close\",\n    value: function () {\n      var _close = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var fd;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.openRequest;\n\n              case 2:\n                fd = _context2.sent;\n                _context2.next = 5;\n                return closeAsync(fd);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function close() {\n        return _close.apply(this, arguments);\n      }\n\n      return close;\n    }()\n  }]);\n\n  return FileSource;\n}(BaseSource);\n\nexport function makeFileSource(path) {\n  return new FileSource(path);\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/*\n  Some parts of this file are based on UTIF.js,\n  which was released under the MIT License.\n  You can view that here:\n  https://github.com/photopea/UTIF.js/blob/master/LICENSE\n*/\nimport { fieldTagNames, fieldTagTypes, fieldTypeNames, geoKeyNames } from './globals';\nimport { assign, endsWith, forEach, invert, times } from './utils';\nvar tagName2Code = invert(fieldTagNames);\nvar geoKeyName2Code = invert(geoKeyNames);\nvar name2code = {};\nassign(name2code, tagName2Code);\nassign(name2code, geoKeyName2Code);\nvar typeName2byte = invert(fieldTypeNames); // config variables\n\nvar numBytesInIfd = 1000;\nvar _binBE = {\n  nextZero: function nextZero(data, o) {\n    var oincr = o;\n\n    while (data[oincr] !== 0) {\n      oincr++;\n    }\n\n    return oincr;\n  },\n  readUshort: function readUshort(buff, p) {\n    return buff[p] << 8 | buff[p + 1];\n  },\n  readShort: function readShort(buff, p) {\n    var a = _binBE.ui8;\n    a[0] = buff[p + 1];\n    a[1] = buff[p + 0];\n    return _binBE.i16[0];\n  },\n  readInt: function readInt(buff, p) {\n    var a = _binBE.ui8;\n    a[0] = buff[p + 3];\n    a[1] = buff[p + 2];\n    a[2] = buff[p + 1];\n    a[3] = buff[p + 0];\n    return _binBE.i32[0];\n  },\n  readUint: function readUint(buff, p) {\n    var a = _binBE.ui8;\n    a[0] = buff[p + 3];\n    a[1] = buff[p + 2];\n    a[2] = buff[p + 1];\n    a[3] = buff[p + 0];\n    return _binBE.ui32[0];\n  },\n  readASCII: function readASCII(buff, p, l) {\n    return l.map(function (i) {\n      return String.fromCharCode(buff[p + i]);\n    }).join('');\n  },\n  readFloat: function readFloat(buff, p) {\n    var a = _binBE.ui8;\n    times(4, function (i) {\n      a[i] = buff[p + 3 - i];\n    });\n    return _binBE.fl32[0];\n  },\n  readDouble: function readDouble(buff, p) {\n    var a = _binBE.ui8;\n    times(8, function (i) {\n      a[i] = buff[p + 7 - i];\n    });\n    return _binBE.fl64[0];\n  },\n  writeUshort: function writeUshort(buff, p, n) {\n    buff[p] = n >> 8 & 255;\n    buff[p + 1] = n & 255;\n  },\n  writeUint: function writeUint(buff, p, n) {\n    buff[p] = n >> 24 & 255;\n    buff[p + 1] = n >> 16 & 255;\n    buff[p + 2] = n >> 8 & 255;\n    buff[p + 3] = n >> 0 & 255;\n  },\n  writeASCII: function writeASCII(buff, p, s) {\n    times(s.length, function (i) {\n      buff[p + i] = s.charCodeAt(i);\n    });\n  },\n  ui8: new Uint8Array(8)\n};\n_binBE.fl64 = new Float64Array(_binBE.ui8.buffer);\n\n_binBE.writeDouble = function (buff, p, n) {\n  _binBE.fl64[0] = n;\n  times(8, function (i) {\n    buff[p + i] = _binBE.ui8[7 - i];\n  });\n};\n\nvar _writeIFD = function _writeIFD(bin, data, _offset, ifd) {\n  var offset = _offset;\n  var keys = Object.keys(ifd).filter(function (key) {\n    return key !== undefined && key !== null && key !== 'undefined';\n  });\n  bin.writeUshort(data, offset, keys.length);\n  offset += 2;\n  var eoff = offset + 12 * keys.length + 4;\n\n  var _iterator = _createForOfIteratorHelper(keys),\n      _step;\n\n  try {\n    var _loop = function _loop() {\n      var key = _step.value;\n      var tag = null;\n\n      if (typeof key === 'number') {\n        tag = key;\n      } else if (typeof key === 'string') {\n        tag = parseInt(key, 10);\n      }\n\n      var typeName = fieldTagTypes[tag];\n      var typeNum = typeName2byte[typeName];\n\n      if (typeName == null || typeName === undefined || typeof typeName === 'undefined') {\n        throw new Error(\"unknown type of tag: \".concat(tag));\n      }\n\n      var val = ifd[key];\n\n      if (val === undefined) {\n        throw new Error(\"failed to get value for key \".concat(key));\n      } // ASCIIZ format with trailing 0 character\n      // http://www.fileformat.info/format/tiff/corion.htm\n      // https://stackoverflow.com/questions/7783044/whats-the-difference-between-asciiz-vs-ascii\n\n\n      if (typeName === 'ASCII' && typeof val === 'string' && endsWith(val, \"\\0\") === false) {\n        val += \"\\0\";\n      }\n\n      var num = val.length;\n      bin.writeUshort(data, offset, tag);\n      offset += 2;\n      bin.writeUshort(data, offset, typeNum);\n      offset += 2;\n      bin.writeUint(data, offset, num);\n      offset += 4;\n      var dlen = [-1, 1, 1, 2, 4, 8, 0, 0, 0, 0, 0, 0, 8][typeNum] * num;\n      var toff = offset;\n\n      if (dlen > 4) {\n        bin.writeUint(data, offset, eoff);\n        toff = eoff;\n      }\n\n      if (typeName === 'ASCII') {\n        bin.writeASCII(data, toff, val);\n      } else if (typeName === 'SHORT') {\n        times(num, function (i) {\n          bin.writeUshort(data, toff + 2 * i, val[i]);\n        });\n      } else if (typeName === 'LONG') {\n        times(num, function (i) {\n          bin.writeUint(data, toff + 4 * i, val[i]);\n        });\n      } else if (typeName === 'RATIONAL') {\n        times(num, function (i) {\n          bin.writeUint(data, toff + 8 * i, Math.round(val[i] * 10000));\n          bin.writeUint(data, toff + 8 * i + 4, 10000);\n        });\n      } else if (typeName === 'DOUBLE') {\n        times(num, function (i) {\n          bin.writeDouble(data, toff + 8 * i, val[i]);\n        });\n      }\n\n      if (dlen > 4) {\n        dlen += dlen & 1;\n        eoff += dlen;\n      }\n\n      offset += 4;\n    };\n\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      _loop();\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return [offset, eoff];\n};\n\nvar encodeIfds = function encodeIfds(ifds) {\n  var data = new Uint8Array(numBytesInIfd);\n  var offset = 4;\n  var bin = _binBE; // set big-endian byte-order\n  // https://en.wikipedia.org/wiki/TIFF#Byte_order\n\n  data[0] = 77;\n  data[1] = 77; // set format-version number\n  // https://en.wikipedia.org/wiki/TIFF#Byte_order\n\n  data[3] = 42;\n  var ifdo = 8;\n  bin.writeUint(data, offset, ifdo);\n  offset += 4;\n  ifds.forEach(function (ifd, i) {\n    var noffs = _writeIFD(bin, data, ifdo, ifd);\n\n    ifdo = noffs[1];\n\n    if (i < ifds.length - 1) {\n      bin.writeUint(data, noffs[0], ifdo);\n    }\n  });\n\n  if (data.slice) {\n    return data.slice(0, ifdo).buffer;\n  } // node hasn't implemented slice on Uint8Array yet\n\n\n  var result = new Uint8Array(ifdo);\n\n  for (var i = 0; i < ifdo; i++) {\n    result[i] = data[i];\n  }\n\n  return result.buffer;\n};\n\nvar encodeImage = function encodeImage(values, width, height, metadata) {\n  if (height === undefined || height === null) {\n    throw new Error(\"you passed into encodeImage a width of type \".concat(height));\n  }\n\n  if (width === undefined || width === null) {\n    throw new Error(\"you passed into encodeImage a width of type \".concat(width));\n  }\n\n  var ifd = {\n    256: [width],\n    // ImageWidth\n    257: [height],\n    // ImageLength\n    273: [numBytesInIfd],\n    // strips offset\n    278: [height],\n    // RowsPerStrip\n    305: 'geotiff.js' // no array for ASCII(Z)\n\n  };\n\n  if (metadata) {\n    for (var i in metadata) {\n      if (metadata.hasOwnProperty(i)) {\n        ifd[i] = metadata[i];\n      }\n    }\n  }\n\n  var prfx = new Uint8Array(encodeIfds([ifd]));\n  var img = new Uint8Array(values);\n  var samplesPerPixel = ifd[277];\n  var data = new Uint8Array(numBytesInIfd + width * height * samplesPerPixel);\n  times(prfx.length, function (i) {\n    data[i] = prfx[i];\n  });\n  forEach(img, function (value, i) {\n    data[numBytesInIfd + i] = value;\n  });\n  return data.buffer;\n};\n\nvar convertToTids = function convertToTids(input) {\n  var result = {};\n\n  for (var key in input) {\n    if (key !== 'StripOffsets') {\n      if (!name2code[key]) {\n        console.error(key, 'not in name2code:', Object.keys(name2code));\n      }\n\n      result[name2code[key]] = input[key];\n    }\n  }\n\n  return result;\n};\n\nvar toArray = function toArray(input) {\n  if (Array.isArray(input)) {\n    return input;\n  }\n\n  return [input];\n};\n\nvar metadataDefaults = [['Compression', 1], // no compression\n['PlanarConfiguration', 1], ['ExtraSamples', 0]];\nexport function writeGeotiff(data, metadata) {\n  var isFlattened = typeof data[0] === 'number';\n  var height;\n  var numBands;\n  var width;\n  var flattenedValues;\n\n  if (isFlattened) {\n    height = metadata.height || metadata.ImageLength;\n    width = metadata.width || metadata.ImageWidth;\n    numBands = data.length / (height * width);\n    flattenedValues = data;\n  } else {\n    numBands = data.length;\n    height = data[0].length;\n    width = data[0][0].length;\n    flattenedValues = [];\n    times(height, function (rowIndex) {\n      times(width, function (columnIndex) {\n        times(numBands, function (bandIndex) {\n          flattenedValues.push(data[bandIndex][rowIndex][columnIndex]);\n        });\n      });\n    });\n  }\n\n  metadata.ImageLength = height;\n  delete metadata.height;\n  metadata.ImageWidth = width;\n  delete metadata.width; // consult https://www.loc.gov/preservation/digital/formats/content/tiff_tags.shtml\n\n  if (!metadata.BitsPerSample) {\n    metadata.BitsPerSample = times(numBands, function () {\n      return 8;\n    });\n  }\n\n  metadataDefaults.forEach(function (tag) {\n    var key = tag[0];\n\n    if (!metadata[key]) {\n      var value = tag[1];\n      metadata[key] = value;\n    }\n  }); // The color space of the image data.\n  // 1=black is zero and 2=RGB.\n\n  if (!metadata.PhotometricInterpretation) {\n    metadata.PhotometricInterpretation = metadata.BitsPerSample.length === 3 ? 2 : 1;\n  } // The number of components per pixel.\n\n\n  if (!metadata.SamplesPerPixel) {\n    metadata.SamplesPerPixel = [numBands];\n  }\n\n  if (!metadata.StripByteCounts) {\n    // we are only writing one strip\n    metadata.StripByteCounts = [numBands * height * width];\n  }\n\n  if (!metadata.ModelPixelScale) {\n    // assumes raster takes up exactly the whole globe\n    metadata.ModelPixelScale = [360 / width, 180 / height, 0];\n  }\n\n  if (!metadata.SampleFormat) {\n    metadata.SampleFormat = times(numBands, function () {\n      return 1;\n    });\n  } // if didn't pass in projection information, assume the popular 4326 \"geographic projection\"\n\n\n  if (!metadata.hasOwnProperty('GeographicTypeGeoKey') && !metadata.hasOwnProperty('ProjectedCSTypeGeoKey')) {\n    metadata.GeographicTypeGeoKey = 4326;\n    metadata.ModelTiepoint = [0, 0, 0, -180, 90, 0]; // raster fits whole globe\n\n    metadata.GeogCitationGeoKey = 'WGS 84';\n    metadata.GTModelTypeGeoKey = 2;\n  }\n\n  var geoKeys = Object.keys(metadata).filter(function (key) {\n    return endsWith(key, 'GeoKey');\n  }).sort(function (a, b) {\n    return name2code[a] - name2code[b];\n  });\n\n  if (!metadata.GeoAsciiParams) {\n    var geoAsciiParams = '';\n    geoKeys.forEach(function (name) {\n      var code = Number(name2code[name]);\n      var tagType = fieldTagTypes[code];\n\n      if (tagType === 'ASCII') {\n        geoAsciiParams += \"\".concat(metadata[name].toString(), \"\\0\");\n      }\n    });\n\n    if (geoAsciiParams.length > 0) {\n      metadata.GeoAsciiParams = geoAsciiParams;\n    }\n  }\n\n  if (!metadata.GeoKeyDirectory) {\n    var NumberOfKeys = geoKeys.length;\n    var GeoKeyDirectory = [1, 1, 0, NumberOfKeys];\n    geoKeys.forEach(function (geoKey) {\n      var KeyID = Number(name2code[geoKey]);\n      GeoKeyDirectory.push(KeyID);\n      var Count;\n      var TIFFTagLocation;\n      var valueOffset;\n\n      if (fieldTagTypes[KeyID] === 'SHORT') {\n        Count = 1;\n        TIFFTagLocation = 0;\n        valueOffset = metadata[geoKey];\n      } else if (geoKey === 'GeogCitationGeoKey') {\n        Count = metadata.GeoAsciiParams.length;\n        TIFFTagLocation = Number(name2code.GeoAsciiParams);\n        valueOffset = 0;\n      } else {\n        console.log(\"[geotiff.js] couldn't get TIFFTagLocation for \".concat(geoKey));\n      }\n\n      GeoKeyDirectory.push(TIFFTagLocation);\n      GeoKeyDirectory.push(Count);\n      GeoKeyDirectory.push(valueOffset);\n    });\n    metadata.GeoKeyDirectory = GeoKeyDirectory;\n  } // delete GeoKeys from metadata, because stored in GeoKeyDirectory tag\n\n\n  for (var geoKey in geoKeys) {\n    if (geoKeys.hasOwnProperty(geoKey)) {\n      delete metadata[geoKey];\n    }\n  }\n\n  ['Compression', 'ExtraSamples', 'GeographicTypeGeoKey', 'GTModelTypeGeoKey', 'GTRasterTypeGeoKey', 'ImageLength', // synonym of ImageHeight\n  'ImageWidth', 'Orientation', 'PhotometricInterpretation', 'ProjectedCSTypeGeoKey', 'PlanarConfiguration', 'ResolutionUnit', 'SamplesPerPixel', 'XPosition', 'YPosition'].forEach(function (name) {\n    if (metadata[name]) {\n      metadata[name] = toArray(metadata[name]);\n    }\n  });\n  var encodedMetadata = convertToTids(metadata);\n  var outputImage = encodeImage(flattenedValues, width, height, encodedMetadata);\n  return outputImage;\n}","import _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\n/**\n * A no-op logger\n */\nvar DummyLogger = /*#__PURE__*/function () {\n  function DummyLogger() {\n    _classCallCheck(this, DummyLogger);\n  }\n\n  _createClass(DummyLogger, [{\n    key: \"log\",\n    value: function log() {}\n  }, {\n    key: \"debug\",\n    value: function debug() {}\n  }, {\n    key: \"info\",\n    value: function info() {}\n  }, {\n    key: \"warn\",\n    value: function warn() {}\n  }, {\n    key: \"error\",\n    value: function error() {}\n  }, {\n    key: \"time\",\n    value: function time() {}\n  }, {\n    key: \"timeEnd\",\n    value: function timeEnd() {}\n  }]);\n\n  return DummyLogger;\n}();\n\nvar LOGGER = new DummyLogger();\n/**\n *\n * @param {object} logger the new logger. e.g `console`\n */\n\nexport function setLogger() {\n  var logger = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new DummyLogger();\n  LOGGER = logger;\n}\nexport function debug() {\n  var _LOGGER;\n\n  return (_LOGGER = LOGGER).debug.apply(_LOGGER, arguments);\n}\nexport function log() {\n  var _LOGGER2;\n\n  return (_LOGGER2 = LOGGER).log.apply(_LOGGER2, arguments);\n}\nexport function info() {\n  var _LOGGER3;\n\n  return (_LOGGER3 = LOGGER).info.apply(_LOGGER3, arguments);\n}\nexport function warn() {\n  var _LOGGER4;\n\n  return (_LOGGER4 = LOGGER).warn.apply(_LOGGER4, arguments);\n}\nexport function error() {\n  var _LOGGER5;\n\n  return (_LOGGER5 = LOGGER).error.apply(_LOGGER5, arguments);\n}\nexport function time() {\n  var _LOGGER6;\n\n  return (_LOGGER6 = LOGGER).time.apply(_LOGGER6, arguments);\n}\nexport function timeEnd() {\n  var _LOGGER7;\n\n  return (_LOGGER7 = LOGGER).timeEnd.apply(_LOGGER7, arguments);\n}","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _asyncToGenerator from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _wrapNativeSuper from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport GeoTIFFImage from './geotiffimage';\nimport DataView64 from './dataview64';\nimport DataSlice from './dataslice';\nimport Pool from './pool';\nimport { makeRemoteSource } from './source/remote';\nimport { makeBufferSource } from './source/arraybuffer';\nimport { makeFileReaderSource } from './source/filereader';\nimport { makeFileSource } from './source/file';\nimport { fieldTypes, fieldTagNames, arrayFields, geoKeyNames } from './globals';\nimport { writeGeotiff } from './geotiffwriter';\nimport * as globals from './globals';\nimport * as rgb from './rgb';\nimport { getDecoder, addDecoder } from './compression';\nimport { setLogger } from './logging';\nexport { globals };\nexport { rgb };\nexport { getDecoder, addDecoder };\nexport { setLogger };\n\nfunction getFieldTypeLength(fieldType) {\n  switch (fieldType) {\n    case fieldTypes.BYTE:\n    case fieldTypes.ASCII:\n    case fieldTypes.SBYTE:\n    case fieldTypes.UNDEFINED:\n      return 1;\n\n    case fieldTypes.SHORT:\n    case fieldTypes.SSHORT:\n      return 2;\n\n    case fieldTypes.LONG:\n    case fieldTypes.SLONG:\n    case fieldTypes.FLOAT:\n    case fieldTypes.IFD:\n      return 4;\n\n    case fieldTypes.RATIONAL:\n    case fieldTypes.SRATIONAL:\n    case fieldTypes.DOUBLE:\n    case fieldTypes.LONG8:\n    case fieldTypes.SLONG8:\n    case fieldTypes.IFD8:\n      return 8;\n\n    default:\n      throw new RangeError(\"Invalid field type: \".concat(fieldType));\n  }\n}\n\nfunction parseGeoKeyDirectory(fileDirectory) {\n  var rawGeoKeyDirectory = fileDirectory.GeoKeyDirectory;\n\n  if (!rawGeoKeyDirectory) {\n    return null;\n  }\n\n  var geoKeyDirectory = {};\n\n  for (var i = 4; i <= rawGeoKeyDirectory[3] * 4; i += 4) {\n    var key = geoKeyNames[rawGeoKeyDirectory[i]];\n    var location = rawGeoKeyDirectory[i + 1] ? fieldTagNames[rawGeoKeyDirectory[i + 1]] : null;\n    var count = rawGeoKeyDirectory[i + 2];\n    var offset = rawGeoKeyDirectory[i + 3];\n    var value = null;\n\n    if (!location) {\n      value = offset;\n    } else {\n      value = fileDirectory[location];\n\n      if (typeof value === 'undefined' || value === null) {\n        throw new Error(\"Could not get value of geoKey '\".concat(key, \"'.\"));\n      } else if (typeof value === 'string') {\n        value = value.substring(offset, offset + count - 1);\n      } else if (value.subarray) {\n        value = value.subarray(offset, offset + count);\n\n        if (count === 1) {\n          value = value[0];\n        }\n      }\n    }\n\n    geoKeyDirectory[key] = value;\n  }\n\n  return geoKeyDirectory;\n}\n\nfunction getValues(dataSlice, fieldType, count, offset) {\n  var values = null;\n  var readMethod = null;\n  var fieldTypeLength = getFieldTypeLength(fieldType);\n\n  switch (fieldType) {\n    case fieldTypes.BYTE:\n    case fieldTypes.ASCII:\n    case fieldTypes.UNDEFINED:\n      values = new Uint8Array(count);\n      readMethod = dataSlice.readUint8;\n      break;\n\n    case fieldTypes.SBYTE:\n      values = new Int8Array(count);\n      readMethod = dataSlice.readInt8;\n      break;\n\n    case fieldTypes.SHORT:\n      values = new Uint16Array(count);\n      readMethod = dataSlice.readUint16;\n      break;\n\n    case fieldTypes.SSHORT:\n      values = new Int16Array(count);\n      readMethod = dataSlice.readInt16;\n      break;\n\n    case fieldTypes.LONG:\n    case fieldTypes.IFD:\n      values = new Uint32Array(count);\n      readMethod = dataSlice.readUint32;\n      break;\n\n    case fieldTypes.SLONG:\n      values = new Int32Array(count);\n      readMethod = dataSlice.readInt32;\n      break;\n\n    case fieldTypes.LONG8:\n    case fieldTypes.IFD8:\n      values = new Array(count);\n      readMethod = dataSlice.readUint64;\n      break;\n\n    case fieldTypes.SLONG8:\n      values = new Array(count);\n      readMethod = dataSlice.readInt64;\n      break;\n\n    case fieldTypes.RATIONAL:\n      values = new Uint32Array(count * 2);\n      readMethod = dataSlice.readUint32;\n      break;\n\n    case fieldTypes.SRATIONAL:\n      values = new Int32Array(count * 2);\n      readMethod = dataSlice.readInt32;\n      break;\n\n    case fieldTypes.FLOAT:\n      values = new Float32Array(count);\n      readMethod = dataSlice.readFloat32;\n      break;\n\n    case fieldTypes.DOUBLE:\n      values = new Float64Array(count);\n      readMethod = dataSlice.readFloat64;\n      break;\n\n    default:\n      throw new RangeError(\"Invalid field type: \".concat(fieldType));\n  } // normal fields\n\n\n  if (!(fieldType === fieldTypes.RATIONAL || fieldType === fieldTypes.SRATIONAL)) {\n    for (var i = 0; i < count; ++i) {\n      values[i] = readMethod.call(dataSlice, offset + i * fieldTypeLength);\n    }\n  } else {\n    // RATIONAL or SRATIONAL\n    for (var _i = 0; _i < count; _i += 2) {\n      values[_i] = readMethod.call(dataSlice, offset + _i * fieldTypeLength);\n      values[_i + 1] = readMethod.call(dataSlice, offset + (_i * fieldTypeLength + 4));\n    }\n  }\n\n  if (fieldType === fieldTypes.ASCII) {\n    return new TextDecoder('utf-8').decode(values);\n  }\n\n  return values;\n}\n/**\n * Data class to store the parsed file directory, geo key directory and\n * offset to the next IFD\n */\n\n\nvar ImageFileDirectory = /*#__PURE__*/_createClass(function ImageFileDirectory(fileDirectory, geoKeyDirectory, nextIFDByteOffset) {\n  _classCallCheck(this, ImageFileDirectory);\n\n  this.fileDirectory = fileDirectory;\n  this.geoKeyDirectory = geoKeyDirectory;\n  this.nextIFDByteOffset = nextIFDByteOffset;\n});\n/**\n * Error class for cases when an IFD index was requested, that does not exist\n * in the file.\n */\n\n\nvar GeoTIFFImageIndexError = /*#__PURE__*/function (_Error) {\n  _inherits(GeoTIFFImageIndexError, _Error);\n\n  var _super = _createSuper(GeoTIFFImageIndexError);\n\n  function GeoTIFFImageIndexError(index) {\n    var _this;\n\n    _classCallCheck(this, GeoTIFFImageIndexError);\n\n    _this = _super.call(this, \"No image at index \".concat(index));\n    _this.index = index;\n    return _this;\n  }\n\n  return _createClass(GeoTIFFImageIndexError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nvar GeoTIFFBase = /*#__PURE__*/function () {\n  function GeoTIFFBase() {\n    _classCallCheck(this, GeoTIFFBase);\n  }\n\n  _createClass(GeoTIFFBase, [{\n    key: \"readRasters\",\n    value:\n    /**\n     * (experimental) Reads raster data from the best fitting image. This function uses\n     * the image with the lowest resolution that is still a higher resolution than the\n     * requested resolution.\n     * When specified, the `bbox` option is translated to the `window` option and the\n     * `resX` and `resY` to `width` and `height` respectively.\n     * Then, the [readRasters]{@link GeoTIFFImage#readRasters} method of the selected\n     * image is called and the result returned.\n     * @see GeoTIFFImage.readRasters\n     * @param {Object} [options={}] optional parameters\n     * @param {Array} [options.window=whole image] the subset to read data from.\n     * @param {Array} [options.bbox=whole image] the subset to read data from in\n     *                                           geographical coordinates.\n     * @param {Array} [options.samples=all samples] the selection of samples to read from.\n     * @param {Boolean} [options.interleave=false] whether the data shall be read\n     *                                             in one single array or separate\n     *                                             arrays.\n     * @param {Number} [options.pool=null] The optional decoder pool to use.\n     * @param {Number} [options.width] The desired width of the output. When the width is not the\n     *                                 same as the images, resampling will be performed.\n     * @param {Number} [options.height] The desired height of the output. When the width is not the\n     *                                  same as the images, resampling will be performed.\n     * @param {String} [options.resampleMethod='nearest'] The desired resampling method.\n     * @param {AbortSignal} [options.signal] An AbortSignal that may be signalled if the request is\n     *                                       to be aborted\n     * @param {Number|Number[]} [options.fillValue] The value to use for parts of the image\n     *                                              outside of the images extent. When multiple\n     *                                              samples are requested, an array of fill values\n     *                                              can be passed.\n     * @returns {Promise.<(TypedArray|TypedArray[])>} the decoded arrays as a promise\n     */\n    function () {\n      var _readRasters = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var options,\n            imageWindow,\n            width,\n            height,\n            resX,\n            resY,\n            bbox,\n            firstImage,\n            usedImage,\n            imageCount,\n            imgBBox,\n            _firstImage$getOrigin,\n            _firstImage$getOrigin2,\n            oX,\n            oY,\n            _firstImage$getResolu,\n            _firstImage$getResolu2,\n            rX,\n            rY,\n            usedBBox,\n            allImages,\n            i,\n            image,\n            _image$fileDirectory,\n            subfileType,\n            newSubfileType,\n            _i2,\n            _image,\n            imgResX,\n            imgResY,\n            wnd,\n            _firstImage$getOrigin3,\n            _firstImage$getOrigin4,\n            _oX,\n            _oY,\n            _usedImage$getResolut,\n            _usedImage$getResolut2,\n            imageResX,\n            imageResY,\n            _args = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n                imageWindow = options.window, width = options.width, height = options.height;\n                resX = options.resX, resY = options.resY, bbox = options.bbox;\n                _context.next = 5;\n                return this.getImage();\n\n              case 5:\n                firstImage = _context.sent;\n                usedImage = firstImage;\n                _context.next = 9;\n                return this.getImageCount();\n\n              case 9:\n                imageCount = _context.sent;\n                imgBBox = firstImage.getBoundingBox();\n\n                if (!(imageWindow && bbox)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                throw new Error('Both \"bbox\" and \"window\" passed.');\n\n              case 13:\n                if (!(width || height)) {\n                  _context.next = 24;\n                  break;\n                }\n\n                // if we have an image window (pixel coordinates), transform it to a BBox\n                // using the origin/resolution of the first image.\n                if (imageWindow) {\n                  _firstImage$getOrigin = firstImage.getOrigin(), _firstImage$getOrigin2 = _slicedToArray(_firstImage$getOrigin, 2), oX = _firstImage$getOrigin2[0], oY = _firstImage$getOrigin2[1];\n                  _firstImage$getResolu = firstImage.getResolution(), _firstImage$getResolu2 = _slicedToArray(_firstImage$getResolu, 2), rX = _firstImage$getResolu2[0], rY = _firstImage$getResolu2[1];\n                  bbox = [oX + imageWindow[0] * rX, oY + imageWindow[1] * rY, oX + imageWindow[2] * rX, oY + imageWindow[3] * rY];\n                } // if we have a bbox (or calculated one)\n\n\n                usedBBox = bbox || imgBBox;\n\n                if (!width) {\n                  _context.next = 20;\n                  break;\n                }\n\n                if (!resX) {\n                  _context.next = 19;\n                  break;\n                }\n\n                throw new Error('Both width and resX passed');\n\n              case 19:\n                resX = (usedBBox[2] - usedBBox[0]) / width;\n\n              case 20:\n                if (!height) {\n                  _context.next = 24;\n                  break;\n                }\n\n                if (!resY) {\n                  _context.next = 23;\n                  break;\n                }\n\n                throw new Error('Both width and resY passed');\n\n              case 23:\n                resY = (usedBBox[3] - usedBBox[1]) / height;\n\n              case 24:\n                if (!(resX || resY)) {\n                  _context.next = 48;\n                  break;\n                }\n\n                allImages = [];\n                i = 0;\n\n              case 27:\n                if (!(i < imageCount)) {\n                  _context.next = 36;\n                  break;\n                }\n\n                _context.next = 30;\n                return this.getImage(i);\n\n              case 30:\n                image = _context.sent;\n                _image$fileDirectory = image.fileDirectory, subfileType = _image$fileDirectory.SubfileType, newSubfileType = _image$fileDirectory.NewSubfileType;\n\n                if (i === 0 || subfileType === 2 || newSubfileType & 1) {\n                  allImages.push(image);\n                }\n\n              case 33:\n                ++i;\n                _context.next = 27;\n                break;\n\n              case 36:\n                allImages.sort(function (a, b) {\n                  return a.getWidth() - b.getWidth();\n                });\n                _i2 = 0;\n\n              case 38:\n                if (!(_i2 < allImages.length)) {\n                  _context.next = 48;\n                  break;\n                }\n\n                _image = allImages[_i2];\n                imgResX = (imgBBox[2] - imgBBox[0]) / _image.getWidth();\n                imgResY = (imgBBox[3] - imgBBox[1]) / _image.getHeight();\n                usedImage = _image;\n\n                if (!(resX && resX > imgResX || resY && resY > imgResY)) {\n                  _context.next = 45;\n                  break;\n                }\n\n                return _context.abrupt(\"break\", 48);\n\n              case 45:\n                ++_i2;\n                _context.next = 38;\n                break;\n\n              case 48:\n                wnd = imageWindow;\n\n                if (bbox) {\n                  _firstImage$getOrigin3 = firstImage.getOrigin(), _firstImage$getOrigin4 = _slicedToArray(_firstImage$getOrigin3, 2), _oX = _firstImage$getOrigin4[0], _oY = _firstImage$getOrigin4[1];\n                  _usedImage$getResolut = usedImage.getResolution(firstImage), _usedImage$getResolut2 = _slicedToArray(_usedImage$getResolut, 2), imageResX = _usedImage$getResolut2[0], imageResY = _usedImage$getResolut2[1];\n                  wnd = [Math.round((bbox[0] - _oX) / imageResX), Math.round((bbox[1] - _oY) / imageResY), Math.round((bbox[2] - _oX) / imageResX), Math.round((bbox[3] - _oY) / imageResY)];\n                  wnd = [Math.min(wnd[0], wnd[2]), Math.min(wnd[1], wnd[3]), Math.max(wnd[0], wnd[2]), Math.max(wnd[1], wnd[3])];\n                }\n\n                return _context.abrupt(\"return\", usedImage.readRasters(_objectSpread(_objectSpread({}, options), {}, {\n                  window: wnd\n                })));\n\n              case 51:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function readRasters() {\n        return _readRasters.apply(this, arguments);\n      }\n\n      return readRasters;\n    }()\n  }]);\n\n  return GeoTIFFBase;\n}();\n/**\n * The abstraction for a whole GeoTIFF file.\n * @augments GeoTIFFBase\n */\n\n\nvar GeoTIFF = /*#__PURE__*/function (_GeoTIFFBase) {\n  _inherits(GeoTIFF, _GeoTIFFBase);\n\n  var _super2 = _createSuper(GeoTIFF);\n\n  /**\n   * @constructor\n   * @param {Source} source The datasource to read from.\n   * @param {Boolean} littleEndian Whether the image uses little endian.\n   * @param {Boolean} bigTiff Whether the image uses bigTIFF conventions.\n   * @param {Number} firstIFDOffset The numeric byte-offset from the start of the image\n   *                                to the first IFD.\n   * @param {Object} [options] further options.\n   * @param {Boolean} [options.cache=false] whether or not decoded tiles shall be cached.\n   */\n  function GeoTIFF(source, littleEndian, bigTiff, firstIFDOffset) {\n    var _this2;\n\n    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n    _classCallCheck(this, GeoTIFF);\n\n    _this2 = _super2.call(this);\n    _this2.source = source;\n    _this2.littleEndian = littleEndian;\n    _this2.bigTiff = bigTiff;\n    _this2.firstIFDOffset = firstIFDOffset;\n    _this2.cache = options.cache || false;\n    _this2.ifdRequests = [];\n    _this2.ghostValues = null;\n    return _this2;\n  }\n\n  _createClass(GeoTIFF, [{\n    key: \"getSlice\",\n    value: function () {\n      var _getSlice = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(offset, size) {\n        var fallbackSize;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                fallbackSize = this.bigTiff ? 4048 : 1024;\n                _context2.t0 = DataSlice;\n                _context2.next = 4;\n                return this.source.fetch([{\n                  offset: offset,\n                  length: typeof size !== 'undefined' ? size : fallbackSize\n                }]);\n\n              case 4:\n                _context2.t1 = _context2.sent[0];\n                _context2.t2 = offset;\n                _context2.t3 = this.littleEndian;\n                _context2.t4 = this.bigTiff;\n                return _context2.abrupt(\"return\", new _context2.t0(_context2.t1, _context2.t2, _context2.t3, _context2.t4));\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getSlice(_x, _x2) {\n        return _getSlice.apply(this, arguments);\n      }\n\n      return getSlice;\n    }()\n    /**\n     * Instructs to parse an image file directory at the given file offset.\n     * As there is no way to ensure that a location is indeed the start of an IFD,\n     * this function must be called with caution (e.g only using the IFD offsets from\n     * the headers or other IFDs).\n     * @param {number} offset the offset to parse the IFD at\n     * @returns {ImageFileDirectory} the parsed IFD\n     */\n\n  }, {\n    key: \"parseFileDirectoryAt\",\n    value: function () {\n      var _parseFileDirectoryAt = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(offset) {\n        var entrySize, offsetSize, dataSlice, numDirEntries, byteSize, fileDirectory, i, entryCount, fieldTag, fieldType, typeCount, fieldValues, value, fieldTypeLength, valueOffset, actualOffset, length, fieldDataSlice, geoKeyDirectory, nextIFDByteOffset;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                entrySize = this.bigTiff ? 20 : 12;\n                offsetSize = this.bigTiff ? 8 : 2;\n                _context3.next = 4;\n                return this.getSlice(offset);\n\n              case 4:\n                dataSlice = _context3.sent;\n                numDirEntries = this.bigTiff ? dataSlice.readUint64(offset) : dataSlice.readUint16(offset); // if the slice does not cover the whole IFD, request a bigger slice, where the\n                // whole IFD fits: num of entries + n x tag length + offset to next IFD\n\n                byteSize = numDirEntries * entrySize + (this.bigTiff ? 16 : 6);\n\n                if (dataSlice.covers(offset, byteSize)) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                _context3.next = 10;\n                return this.getSlice(offset, byteSize);\n\n              case 10:\n                dataSlice = _context3.sent;\n\n              case 11:\n                fileDirectory = {}; // loop over the IFD and create a file directory object\n\n                i = offset + (this.bigTiff ? 8 : 2);\n                entryCount = 0;\n\n              case 14:\n                if (!(entryCount < numDirEntries)) {\n                  _context3.next = 41;\n                  break;\n                }\n\n                fieldTag = dataSlice.readUint16(i);\n                fieldType = dataSlice.readUint16(i + 2);\n                typeCount = this.bigTiff ? dataSlice.readUint64(i + 4) : dataSlice.readUint32(i + 4);\n                fieldValues = void 0;\n                value = void 0;\n                fieldTypeLength = getFieldTypeLength(fieldType);\n                valueOffset = i + (this.bigTiff ? 12 : 8); // check whether the value is directly encoded in the tag or refers to a\n                // different external byte range\n\n                if (!(fieldTypeLength * typeCount <= (this.bigTiff ? 8 : 4))) {\n                  _context3.next = 26;\n                  break;\n                }\n\n                fieldValues = getValues(dataSlice, fieldType, typeCount, valueOffset);\n                _context3.next = 36;\n                break;\n\n              case 26:\n                // resolve the reference to the actual byte range\n                actualOffset = dataSlice.readOffset(valueOffset);\n                length = getFieldTypeLength(fieldType) * typeCount; // check, whether we actually cover the referenced byte range; if not,\n                // request a new slice of bytes to read from it\n\n                if (!dataSlice.covers(actualOffset, length)) {\n                  _context3.next = 32;\n                  break;\n                }\n\n                fieldValues = getValues(dataSlice, fieldType, typeCount, actualOffset);\n                _context3.next = 36;\n                break;\n\n              case 32:\n                _context3.next = 34;\n                return this.getSlice(actualOffset, length);\n\n              case 34:\n                fieldDataSlice = _context3.sent;\n                fieldValues = getValues(fieldDataSlice, fieldType, typeCount, actualOffset);\n\n              case 36:\n                // unpack single values from the array\n                if (typeCount === 1 && arrayFields.indexOf(fieldTag) === -1 && !(fieldType === fieldTypes.RATIONAL || fieldType === fieldTypes.SRATIONAL)) {\n                  value = fieldValues[0];\n                } else {\n                  value = fieldValues;\n                } // write the tags value to the file directly\n\n\n                fileDirectory[fieldTagNames[fieldTag]] = value;\n\n              case 38:\n                i += entrySize, ++entryCount;\n                _context3.next = 14;\n                break;\n\n              case 41:\n                geoKeyDirectory = parseGeoKeyDirectory(fileDirectory);\n                nextIFDByteOffset = dataSlice.readOffset(offset + offsetSize + entrySize * numDirEntries);\n                return _context3.abrupt(\"return\", new ImageFileDirectory(fileDirectory, geoKeyDirectory, nextIFDByteOffset));\n\n              case 44:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function parseFileDirectoryAt(_x3) {\n        return _parseFileDirectoryAt.apply(this, arguments);\n      }\n\n      return parseFileDirectoryAt;\n    }()\n  }, {\n    key: \"requestIFD\",\n    value: function () {\n      var _requestIFD = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(index) {\n        var _this3 = this;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (!this.ifdRequests[index]) {\n                  _context5.next = 4;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", this.ifdRequests[index]);\n\n              case 4:\n                if (!(index === 0)) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                // special case for index 0\n                this.ifdRequests[index] = this.parseFileDirectoryAt(this.firstIFDOffset);\n                return _context5.abrupt(\"return\", this.ifdRequests[index]);\n\n              case 9:\n                if (this.ifdRequests[index - 1]) {\n                  _context5.next = 19;\n                  break;\n                }\n\n                _context5.prev = 10;\n                this.ifdRequests[index - 1] = this.requestIFD(index - 1);\n                _context5.next = 19;\n                break;\n\n              case 14:\n                _context5.prev = 14;\n                _context5.t0 = _context5[\"catch\"](10);\n\n                if (!(_context5.t0 instanceof GeoTIFFImageIndexError)) {\n                  _context5.next = 18;\n                  break;\n                }\n\n                throw new GeoTIFFImageIndexError(index);\n\n              case 18:\n                throw _context5.t0;\n\n              case 19:\n                // if the previous IFD was loaded, we can finally fetch the one we are interested in.\n                // we need to wrap this in an IIFE, otherwise this.ifdRequests[index] would be delayed\n                this.ifdRequests[index] = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n                  var previousIfd;\n                  return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                    while (1) {\n                      switch (_context4.prev = _context4.next) {\n                        case 0:\n                          _context4.next = 2;\n                          return _this3.ifdRequests[index - 1];\n\n                        case 2:\n                          previousIfd = _context4.sent;\n\n                          if (!(previousIfd.nextIFDByteOffset === 0)) {\n                            _context4.next = 5;\n                            break;\n                          }\n\n                          throw new GeoTIFFImageIndexError(index);\n\n                        case 5:\n                          return _context4.abrupt(\"return\", _this3.parseFileDirectoryAt(previousIfd.nextIFDByteOffset));\n\n                        case 6:\n                        case \"end\":\n                          return _context4.stop();\n                      }\n                    }\n                  }, _callee4);\n                }))();\n                return _context5.abrupt(\"return\", this.ifdRequests[index]);\n\n              case 21:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[10, 14]]);\n      }));\n\n      function requestIFD(_x4) {\n        return _requestIFD.apply(this, arguments);\n      }\n\n      return requestIFD;\n    }()\n    /**\n     * Get the n-th internal subfile of an image. By default, the first is returned.\n     *\n     * @param {Number} [index=0] the index of the image to return.\n     * @returns {GeoTIFFImage} the image at the given index\n     */\n\n  }, {\n    key: \"getImage\",\n    value: function () {\n      var _getImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var index,\n            ifd,\n            _args6 = arguments;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                index = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : 0;\n                _context6.next = 3;\n                return this.requestIFD(index);\n\n              case 3:\n                ifd = _context6.sent;\n                return _context6.abrupt(\"return\", new GeoTIFFImage(ifd.fileDirectory, ifd.geoKeyDirectory, this.dataView, this.littleEndian, this.cache, this.source));\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function getImage() {\n        return _getImage.apply(this, arguments);\n      }\n\n      return getImage;\n    }()\n    /**\n     * Returns the count of the internal subfiles.\n     *\n     * @returns {Number} the number of internal subfile images\n     */\n\n  }, {\n    key: \"getImageCount\",\n    value: function () {\n      var _getImageCount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n        var index, hasNext;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                index = 0; // loop until we run out of IFDs\n\n                hasNext = true;\n\n              case 2:\n                if (!hasNext) {\n                  _context7.next = 18;\n                  break;\n                }\n\n                _context7.prev = 3;\n                _context7.next = 6;\n                return this.requestIFD(index);\n\n              case 6:\n                ++index;\n                _context7.next = 16;\n                break;\n\n              case 9:\n                _context7.prev = 9;\n                _context7.t0 = _context7[\"catch\"](3);\n\n                if (!(_context7.t0 instanceof GeoTIFFImageIndexError)) {\n                  _context7.next = 15;\n                  break;\n                }\n\n                hasNext = false;\n                _context7.next = 16;\n                break;\n\n              case 15:\n                throw _context7.t0;\n\n              case 16:\n                _context7.next = 2;\n                break;\n\n              case 18:\n                return _context7.abrupt(\"return\", index);\n\n              case 19:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[3, 9]]);\n      }));\n\n      function getImageCount() {\n        return _getImageCount.apply(this, arguments);\n      }\n\n      return getImageCount;\n    }()\n    /**\n     * Get the values of the COG ghost area as a parsed map.\n     * See https://gdal.org/drivers/raster/cog.html#header-ghost-area for reference\n     * @returns {Object} the parsed ghost area or null, if no such area was found\n     */\n\n  }, {\n    key: \"getGhostValues\",\n    value: function () {\n      var _getGhostValues = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n        var _this4 = this;\n\n        var offset, detectionString, heuristicAreaSize, slice, valuesString, firstLine, metadataSize, fullString;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                offset = this.bigTiff ? 16 : 8;\n\n                if (!this.ghostValues) {\n                  _context8.next = 3;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", this.ghostValues);\n\n              case 3:\n                detectionString = 'GDAL_STRUCTURAL_METADATA_SIZE=';\n                heuristicAreaSize = detectionString.length + 100;\n                _context8.next = 7;\n                return this.getSlice(offset, heuristicAreaSize);\n\n              case 7:\n                slice = _context8.sent;\n\n                if (!(detectionString === getValues(slice, fieldTypes.ASCII, detectionString.length, offset))) {\n                  _context8.next = 19;\n                  break;\n                }\n\n                valuesString = getValues(slice, fieldTypes.ASCII, heuristicAreaSize, offset);\n                firstLine = valuesString.split('\\n')[0];\n                metadataSize = Number(firstLine.split('=')[1].split(' ')[0]) + firstLine.length;\n\n                if (!(metadataSize > heuristicAreaSize)) {\n                  _context8.next = 16;\n                  break;\n                }\n\n                _context8.next = 15;\n                return this.getSlice(offset, metadataSize);\n\n              case 15:\n                slice = _context8.sent;\n\n              case 16:\n                fullString = getValues(slice, fieldTypes.ASCII, metadataSize, offset);\n                this.ghostValues = {};\n                fullString.split('\\n').filter(function (line) {\n                  return line.length > 0;\n                }).map(function (line) {\n                  return line.split('=');\n                }).forEach(function (_ref2) {\n                  var _ref3 = _slicedToArray(_ref2, 2),\n                      key = _ref3[0],\n                      value = _ref3[1];\n\n                  _this4.ghostValues[key] = value;\n                });\n\n              case 19:\n                return _context8.abrupt(\"return\", this.ghostValues);\n\n              case 20:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function getGhostValues() {\n        return _getGhostValues.apply(this, arguments);\n      }\n\n      return getGhostValues;\n    }()\n    /**\n     * Parse a (Geo)TIFF file from the given source.\n     *\n     * @param {source~Source} source The source of data to parse from.\n     * @param {object} options Additional options.\n     * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n     *                               to be aborted\n     */\n\n  }, {\n    key: \"close\",\n    value:\n    /**\n     * Closes the underlying file buffer\n     * N.B. After the GeoTIFF has been completely processed it needs\n     * to be closed but only if it has been constructed from a file.\n     */\n    function close() {\n      if (typeof this.source.close === 'function') {\n        return this.source.close();\n      }\n\n      return false;\n    }\n  }], [{\n    key: \"fromSource\",\n    value: function () {\n      var _fromSource = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(source, options, signal) {\n        var headerData, dataView, BOM, littleEndian, magicNumber, bigTiff, offsetByteSize, firstIFDOffset;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return source.fetch([{\n                  offset: 0,\n                  length: 1024\n                }], signal);\n\n              case 2:\n                headerData = _context9.sent[0];\n                dataView = new DataView64(headerData);\n                BOM = dataView.getUint16(0, 0);\n\n                if (!(BOM === 0x4949)) {\n                  _context9.next = 9;\n                  break;\n                }\n\n                littleEndian = true;\n                _context9.next = 14;\n                break;\n\n              case 9:\n                if (!(BOM === 0x4D4D)) {\n                  _context9.next = 13;\n                  break;\n                }\n\n                littleEndian = false;\n                _context9.next = 14;\n                break;\n\n              case 13:\n                throw new TypeError('Invalid byte order value.');\n\n              case 14:\n                magicNumber = dataView.getUint16(2, littleEndian);\n\n                if (!(magicNumber === 42)) {\n                  _context9.next = 19;\n                  break;\n                }\n\n                bigTiff = false;\n                _context9.next = 27;\n                break;\n\n              case 19:\n                if (!(magicNumber === 43)) {\n                  _context9.next = 26;\n                  break;\n                }\n\n                bigTiff = true;\n                offsetByteSize = dataView.getUint16(4, littleEndian);\n\n                if (!(offsetByteSize !== 8)) {\n                  _context9.next = 24;\n                  break;\n                }\n\n                throw new Error('Unsupported offset byte-size.');\n\n              case 24:\n                _context9.next = 27;\n                break;\n\n              case 26:\n                throw new TypeError('Invalid magic number.');\n\n              case 27:\n                firstIFDOffset = bigTiff ? dataView.getUint64(8, littleEndian) : dataView.getUint32(4, littleEndian);\n                return _context9.abrupt(\"return\", new GeoTIFF(source, littleEndian, bigTiff, firstIFDOffset, options));\n\n              case 29:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      function fromSource(_x5, _x6, _x7) {\n        return _fromSource.apply(this, arguments);\n      }\n\n      return fromSource;\n    }()\n  }]);\n\n  return GeoTIFF;\n}(GeoTIFFBase);\n\nexport { GeoTIFF };\nexport default GeoTIFF;\n/**\n * Wrapper for GeoTIFF files that have external overviews.\n * @augments GeoTIFFBase\n */\n\nvar MultiGeoTIFF = /*#__PURE__*/function (_GeoTIFFBase2) {\n  _inherits(MultiGeoTIFF, _GeoTIFFBase2);\n\n  var _super3 = _createSuper(MultiGeoTIFF);\n\n  /**\n   * Construct a new MultiGeoTIFF from a main and several overview files.\n   * @param {GeoTIFF} mainFile The main GeoTIFF file.\n   * @param {GeoTIFF[]} overviewFiles An array of overview files.\n   */\n  function MultiGeoTIFF(mainFile, overviewFiles) {\n    var _this5;\n\n    _classCallCheck(this, MultiGeoTIFF);\n\n    _this5 = _super3.call(this);\n    _this5.mainFile = mainFile;\n    _this5.overviewFiles = overviewFiles;\n    _this5.imageFiles = [mainFile].concat(overviewFiles);\n    _this5.fileDirectoriesPerFile = null;\n    _this5.fileDirectoriesPerFileParsing = null;\n    _this5.imageCount = null;\n    return _this5;\n  }\n\n  _createClass(MultiGeoTIFF, [{\n    key: \"parseFileDirectoriesPerFile\",\n    value: function () {\n      var _parseFileDirectoriesPerFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n        var requests;\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                requests = [this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(function (file) {\n                  return file.parseFileDirectoryAt(file.firstIFDOffset);\n                }));\n                _context10.next = 3;\n                return Promise.all(requests);\n\n              case 3:\n                this.fileDirectoriesPerFile = _context10.sent;\n                return _context10.abrupt(\"return\", this.fileDirectoriesPerFile);\n\n              case 5:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function parseFileDirectoriesPerFile() {\n        return _parseFileDirectoriesPerFile.apply(this, arguments);\n      }\n\n      return parseFileDirectoriesPerFile;\n    }()\n    /**\n     * Get the n-th internal subfile of an image. By default, the first is returned.\n     *\n     * @param {Number} [index=0] the index of the image to return.\n     * @returns {GeoTIFFImage} the image at the given index\n     */\n\n  }, {\n    key: \"getImage\",\n    value: function () {\n      var _getImage2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n        var index,\n            visited,\n            relativeIndex,\n            i,\n            imageFile,\n            ii,\n            ifd,\n            _args11 = arguments;\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                index = _args11.length > 0 && _args11[0] !== undefined ? _args11[0] : 0;\n                _context11.next = 3;\n                return this.getImageCount();\n\n              case 3:\n                _context11.next = 5;\n                return this.parseFileDirectoriesPerFile();\n\n              case 5:\n                visited = 0;\n                relativeIndex = 0;\n                i = 0;\n\n              case 8:\n                if (!(i < this.imageFiles.length)) {\n                  _context11.next = 26;\n                  break;\n                }\n\n                imageFile = this.imageFiles[i];\n                ii = 0;\n\n              case 11:\n                if (!(ii < this.imageCounts[i])) {\n                  _context11.next = 22;\n                  break;\n                }\n\n                if (!(index === visited)) {\n                  _context11.next = 17;\n                  break;\n                }\n\n                _context11.next = 15;\n                return imageFile.requestIFD(relativeIndex);\n\n              case 15:\n                ifd = _context11.sent;\n                return _context11.abrupt(\"return\", new GeoTIFFImage(ifd.fileDirectory, ifd.geoKeyDirectory, imageFile.dataView, imageFile.littleEndian, imageFile.cache, imageFile.source));\n\n              case 17:\n                visited++;\n                relativeIndex++;\n\n              case 19:\n                ii++;\n                _context11.next = 11;\n                break;\n\n              case 22:\n                relativeIndex = 0;\n\n              case 23:\n                i++;\n                _context11.next = 8;\n                break;\n\n              case 26:\n                throw new RangeError('Invalid image index');\n\n              case 27:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function getImage() {\n        return _getImage2.apply(this, arguments);\n      }\n\n      return getImage;\n    }()\n    /**\n     * Returns the count of the internal subfiles.\n     *\n     * @returns {Number} the number of internal subfile images\n     */\n\n  }, {\n    key: \"getImageCount\",\n    value: function () {\n      var _getImageCount2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n        var requests;\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                if (!(this.imageCount !== null)) {\n                  _context12.next = 2;\n                  break;\n                }\n\n                return _context12.abrupt(\"return\", this.imageCount);\n\n              case 2:\n                requests = [this.mainFile.getImageCount()].concat(this.overviewFiles.map(function (file) {\n                  return file.getImageCount();\n                }));\n                _context12.next = 5;\n                return Promise.all(requests);\n\n              case 5:\n                this.imageCounts = _context12.sent;\n                this.imageCount = this.imageCounts.reduce(function (count, ifds) {\n                  return count + ifds;\n                }, 0);\n                return _context12.abrupt(\"return\", this.imageCount);\n\n              case 8:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function getImageCount() {\n        return _getImageCount2.apply(this, arguments);\n      }\n\n      return getImageCount;\n    }()\n  }]);\n\n  return MultiGeoTIFF;\n}(GeoTIFFBase);\n\nexport { MultiGeoTIFF };\n/**\n * Creates a new GeoTIFF from a remote URL.\n * @param {string} url The URL to access the image from\n * @param {object} [options] Additional options to pass to the source.\n *                           See {@link makeRemoteSource} for details.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise.<GeoTIFF>} The resulting GeoTIFF file.\n */\n\nexport function fromUrl(_x8) {\n  return _fromUrl.apply(this, arguments);\n}\n/**\n * Construct a new GeoTIFF from an\n * [ArrayBuffer]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer}.\n * @param {ArrayBuffer} arrayBuffer The data to read the file from.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise.<GeoTIFF>} The resulting GeoTIFF file.\n */\n\nfunction _fromUrl() {\n  _fromUrl = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(url) {\n    var options,\n        signal,\n        _args13 = arguments;\n    return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            options = _args13.length > 1 && _args13[1] !== undefined ? _args13[1] : {};\n            signal = _args13.length > 2 ? _args13[2] : undefined;\n            return _context13.abrupt(\"return\", GeoTIFF.fromSource(makeRemoteSource(url, options), signal));\n\n          case 3:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, _callee13);\n  }));\n  return _fromUrl.apply(this, arguments);\n}\n\nexport function fromArrayBuffer(_x9, _x10) {\n  return _fromArrayBuffer.apply(this, arguments);\n}\n/**\n * Construct a GeoTIFF from a local file path. This uses the node\n * [filesystem API]{@link https://nodejs.org/api/fs.html} and is\n * not available on browsers.\n *\n * N.B. After the GeoTIFF has been completely processed it needs\n * to be closed but only if it has been constructed from a file.\n * @param {string} path The file path to read from.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise.<GeoTIFF>} The resulting GeoTIFF file.\n */\n\nfunction _fromArrayBuffer() {\n  _fromArrayBuffer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14(arrayBuffer, signal) {\n    return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n      while (1) {\n        switch (_context14.prev = _context14.next) {\n          case 0:\n            return _context14.abrupt(\"return\", GeoTIFF.fromSource(makeBufferSource(arrayBuffer), signal));\n\n          case 1:\n          case \"end\":\n            return _context14.stop();\n        }\n      }\n    }, _callee14);\n  }));\n  return _fromArrayBuffer.apply(this, arguments);\n}\n\nexport function fromFile(_x11, _x12) {\n  return _fromFile.apply(this, arguments);\n}\n/**\n * Construct a GeoTIFF from an HTML\n * [Blob]{@link https://developer.mozilla.org/en-US/docs/Web/API/Blob} or\n * [File]{@link https://developer.mozilla.org/en-US/docs/Web/API/File}\n * object.\n * @param {Blob|File} blob The Blob or File object to read from.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise.<GeoTIFF>} The resulting GeoTIFF file.\n */\n\nfunction _fromFile() {\n  _fromFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15(path, signal) {\n    return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            return _context15.abrupt(\"return\", GeoTIFF.fromSource(makeFileSource(path), signal));\n\n          case 1:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, _callee15);\n  }));\n  return _fromFile.apply(this, arguments);\n}\n\nexport function fromBlob(_x13, _x14) {\n  return _fromBlob.apply(this, arguments);\n}\n/**\n * Construct a MultiGeoTIFF from the given URLs.\n * @param {string} mainUrl The URL for the main file.\n * @param {string[]} overviewUrls An array of URLs for the overview images.\n * @param {object} [options] Additional options to pass to the source.\n *                           See [makeRemoteSource]{@link module:source.makeRemoteSource}\n *                           for details.\n * @param {AbortSignal} [signal] An AbortSignal that may be signalled if the request is\n *                               to be aborted\n * @returns {Promise.<MultiGeoTIFF>} The resulting MultiGeoTIFF file.\n */\n\nfunction _fromBlob() {\n  _fromBlob = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16(blob, signal) {\n    return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n      while (1) {\n        switch (_context16.prev = _context16.next) {\n          case 0:\n            return _context16.abrupt(\"return\", GeoTIFF.fromSource(makeFileReaderSource(blob), signal));\n\n          case 1:\n          case \"end\":\n            return _context16.stop();\n        }\n      }\n    }, _callee16);\n  }));\n  return _fromBlob.apply(this, arguments);\n}\n\nexport function fromUrls(_x15) {\n  return _fromUrls.apply(this, arguments);\n}\n/**\n * Main creating function for GeoTIFF files.\n * @param {(Array)} array of pixel values\n * @returns {metadata} metadata\n */\n\nfunction _fromUrls() {\n  _fromUrls = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17(mainUrl) {\n    var overviewUrls,\n        options,\n        signal,\n        mainFile,\n        overviewFiles,\n        _args17 = arguments;\n    return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n      while (1) {\n        switch (_context17.prev = _context17.next) {\n          case 0:\n            overviewUrls = _args17.length > 1 && _args17[1] !== undefined ? _args17[1] : [];\n            options = _args17.length > 2 && _args17[2] !== undefined ? _args17[2] : {};\n            signal = _args17.length > 3 ? _args17[3] : undefined;\n            _context17.next = 5;\n            return GeoTIFF.fromSource(makeRemoteSource(mainUrl, options), signal);\n\n          case 5:\n            mainFile = _context17.sent;\n            _context17.next = 8;\n            return Promise.all(overviewUrls.map(function (url) {\n              return GeoTIFF.fromSource(makeRemoteSource(url, options));\n            }));\n\n          case 8:\n            overviewFiles = _context17.sent;\n            return _context17.abrupt(\"return\", new MultiGeoTIFF(mainFile, overviewFiles));\n\n          case 10:\n          case \"end\":\n            return _context17.stop();\n        }\n      }\n    }, _callee17);\n  }));\n  return _fromUrls.apply(this, arguments);\n}\n\nexport function writeArrayBuffer(_x16, _x17) {\n  return _writeArrayBuffer.apply(this, arguments);\n}\n\nfunction _writeArrayBuffer() {\n  _writeArrayBuffer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee18(values, metadata) {\n    return _regeneratorRuntime.wrap(function _callee18$(_context18) {\n      while (1) {\n        switch (_context18.prev = _context18.next) {\n          case 0:\n            return _context18.abrupt(\"return\", writeGeotiff(values, metadata));\n\n          case 1:\n          case \"end\":\n            return _context18.stop();\n        }\n      }\n    }, _callee18);\n  }));\n  return _writeArrayBuffer.apply(this, arguments);\n}\n\nexport { Pool };","export var fieldTagNames = {\n  // TIFF Baseline\n  0x013B: 'Artist',\n  0x0102: 'BitsPerSample',\n  0x0109: 'CellLength',\n  0x0108: 'CellWidth',\n  0x0140: 'ColorMap',\n  0x0103: 'Compression',\n  0x8298: 'Copyright',\n  0x0132: 'DateTime',\n  0x0152: 'ExtraSamples',\n  0x010A: 'FillOrder',\n  0x0121: 'FreeByteCounts',\n  0x0120: 'FreeOffsets',\n  0x0123: 'GrayResponseCurve',\n  0x0122: 'GrayResponseUnit',\n  0x013C: 'HostComputer',\n  0x010E: 'ImageDescription',\n  0x0101: 'ImageLength',\n  0x0100: 'ImageWidth',\n  0x010F: 'Make',\n  0x0119: 'MaxSampleValue',\n  0x0118: 'MinSampleValue',\n  0x0110: 'Model',\n  0x00FE: 'NewSubfileType',\n  0x0112: 'Orientation',\n  0x0106: 'PhotometricInterpretation',\n  0x011C: 'PlanarConfiguration',\n  0x0128: 'ResolutionUnit',\n  0x0116: 'RowsPerStrip',\n  0x0115: 'SamplesPerPixel',\n  0x0131: 'Software',\n  0x0117: 'StripByteCounts',\n  0x0111: 'StripOffsets',\n  0x00FF: 'SubfileType',\n  0x0107: 'Threshholding',\n  0x011A: 'XResolution',\n  0x011B: 'YResolution',\n  // TIFF Extended\n  0x0146: 'BadFaxLines',\n  0x0147: 'CleanFaxData',\n  0x0157: 'ClipPath',\n  0x0148: 'ConsecutiveBadFaxLines',\n  0x01B1: 'Decode',\n  0x01B2: 'DefaultImageColor',\n  0x010D: 'DocumentName',\n  0x0150: 'DotRange',\n  0x0141: 'HalftoneHints',\n  0x015A: 'Indexed',\n  0x015B: 'JPEGTables',\n  0x011D: 'PageName',\n  0x0129: 'PageNumber',\n  0x013D: 'Predictor',\n  0x013F: 'PrimaryChromaticities',\n  0x0214: 'ReferenceBlackWhite',\n  0x0153: 'SampleFormat',\n  0x0154: 'SMinSampleValue',\n  0x0155: 'SMaxSampleValue',\n  0x022F: 'StripRowCounts',\n  0x014A: 'SubIFDs',\n  0x0124: 'T4Options',\n  0x0125: 'T6Options',\n  0x0145: 'TileByteCounts',\n  0x0143: 'TileLength',\n  0x0144: 'TileOffsets',\n  0x0142: 'TileWidth',\n  0x012D: 'TransferFunction',\n  0x013E: 'WhitePoint',\n  0x0158: 'XClipPathUnits',\n  0x011E: 'XPosition',\n  0x0211: 'YCbCrCoefficients',\n  0x0213: 'YCbCrPositioning',\n  0x0212: 'YCbCrSubSampling',\n  0x0159: 'YClipPathUnits',\n  0x011F: 'YPosition',\n  // EXIF\n  0x9202: 'ApertureValue',\n  0xA001: 'ColorSpace',\n  0x9004: 'DateTimeDigitized',\n  0x9003: 'DateTimeOriginal',\n  0x8769: 'Exif IFD',\n  0x9000: 'ExifVersion',\n  0x829A: 'ExposureTime',\n  0xA300: 'FileSource',\n  0x9209: 'Flash',\n  0xA000: 'FlashpixVersion',\n  0x829D: 'FNumber',\n  0xA420: 'ImageUniqueID',\n  0x9208: 'LightSource',\n  0x927C: 'MakerNote',\n  0x9201: 'ShutterSpeedValue',\n  0x9286: 'UserComment',\n  // IPTC\n  0x83BB: 'IPTC',\n  // ICC\n  0x8773: 'ICC Profile',\n  // XMP\n  0x02BC: 'XMP',\n  // GDAL\n  0xA480: 'GDAL_METADATA',\n  0xA481: 'GDAL_NODATA',\n  // Photoshop\n  0x8649: 'Photoshop',\n  // GeoTiff\n  0x830E: 'ModelPixelScale',\n  0x8482: 'ModelTiepoint',\n  0x85D8: 'ModelTransformation',\n  0x87AF: 'GeoKeyDirectory',\n  0x87B0: 'GeoDoubleParams',\n  0x87B1: 'GeoAsciiParams',\n  // LERC\n  0xC5F2: 'LercParameters'\n};\nexport var fieldTags = {};\n\nfor (var key in fieldTagNames) {\n  if (fieldTagNames.hasOwnProperty(key)) {\n    fieldTags[fieldTagNames[key]] = parseInt(key, 10);\n  }\n}\n\nexport var fieldTagTypes = {\n  256: 'SHORT',\n  257: 'SHORT',\n  258: 'SHORT',\n  259: 'SHORT',\n  262: 'SHORT',\n  273: 'LONG',\n  274: 'SHORT',\n  277: 'SHORT',\n  278: 'LONG',\n  279: 'LONG',\n  282: 'RATIONAL',\n  283: 'RATIONAL',\n  284: 'SHORT',\n  286: 'SHORT',\n  287: 'RATIONAL',\n  296: 'SHORT',\n  297: 'SHORT',\n  305: 'ASCII',\n  306: 'ASCII',\n  338: 'SHORT',\n  339: 'SHORT',\n  513: 'LONG',\n  514: 'LONG',\n  1024: 'SHORT',\n  1025: 'SHORT',\n  2048: 'SHORT',\n  2049: 'ASCII',\n  3072: 'SHORT',\n  3073: 'ASCII',\n  33550: 'DOUBLE',\n  33922: 'DOUBLE',\n  34665: 'LONG',\n  34735: 'SHORT',\n  34737: 'ASCII',\n  42113: 'ASCII'\n};\nexport var arrayFields = [fieldTags.BitsPerSample, fieldTags.ExtraSamples, fieldTags.SampleFormat, fieldTags.StripByteCounts, fieldTags.StripOffsets, fieldTags.StripRowCounts, fieldTags.TileByteCounts, fieldTags.TileOffsets, fieldTags.SubIFDs];\nexport var fieldTypeNames = {\n  0x0001: 'BYTE',\n  0x0002: 'ASCII',\n  0x0003: 'SHORT',\n  0x0004: 'LONG',\n  0x0005: 'RATIONAL',\n  0x0006: 'SBYTE',\n  0x0007: 'UNDEFINED',\n  0x0008: 'SSHORT',\n  0x0009: 'SLONG',\n  0x000A: 'SRATIONAL',\n  0x000B: 'FLOAT',\n  0x000C: 'DOUBLE',\n  // IFD offset, suggested by https://owl.phy.queensu.ca/~phil/exiftool/standards.html\n  0x000D: 'IFD',\n  // introduced by BigTIFF\n  0x0010: 'LONG8',\n  0x0011: 'SLONG8',\n  0x0012: 'IFD8'\n};\nexport var fieldTypes = {};\n\nfor (var _key in fieldTypeNames) {\n  if (fieldTypeNames.hasOwnProperty(_key)) {\n    fieldTypes[fieldTypeNames[_key]] = parseInt(_key, 10);\n  }\n}\n\nexport var photometricInterpretations = {\n  WhiteIsZero: 0,\n  BlackIsZero: 1,\n  RGB: 2,\n  Palette: 3,\n  TransparencyMask: 4,\n  CMYK: 5,\n  YCbCr: 6,\n  CIELab: 8,\n  ICCLab: 9\n};\nexport var ExtraSamplesValues = {\n  Unspecified: 0,\n  Assocalpha: 1,\n  Unassalpha: 2\n};\nexport var LercParameters = {\n  Version: 0,\n  AddCompression: 1\n};\nexport var LercAddCompression = {\n  None: 0,\n  Deflate: 1\n};\nexport var geoKeyNames = {\n  1024: 'GTModelTypeGeoKey',\n  1025: 'GTRasterTypeGeoKey',\n  1026: 'GTCitationGeoKey',\n  2048: 'GeographicTypeGeoKey',\n  2049: 'GeogCitationGeoKey',\n  2050: 'GeogGeodeticDatumGeoKey',\n  2051: 'GeogPrimeMeridianGeoKey',\n  2052: 'GeogLinearUnitsGeoKey',\n  2053: 'GeogLinearUnitSizeGeoKey',\n  2054: 'GeogAngularUnitsGeoKey',\n  2055: 'GeogAngularUnitSizeGeoKey',\n  2056: 'GeogEllipsoidGeoKey',\n  2057: 'GeogSemiMajorAxisGeoKey',\n  2058: 'GeogSemiMinorAxisGeoKey',\n  2059: 'GeogInvFlatteningGeoKey',\n  2060: 'GeogAzimuthUnitsGeoKey',\n  2061: 'GeogPrimeMeridianLongGeoKey',\n  2062: 'GeogTOWGS84GeoKey',\n  3072: 'ProjectedCSTypeGeoKey',\n  3073: 'PCSCitationGeoKey',\n  3074: 'ProjectionGeoKey',\n  3075: 'ProjCoordTransGeoKey',\n  3076: 'ProjLinearUnitsGeoKey',\n  3077: 'ProjLinearUnitSizeGeoKey',\n  3078: 'ProjStdParallel1GeoKey',\n  3079: 'ProjStdParallel2GeoKey',\n  3080: 'ProjNatOriginLongGeoKey',\n  3081: 'ProjNatOriginLatGeoKey',\n  3082: 'ProjFalseEastingGeoKey',\n  3083: 'ProjFalseNorthingGeoKey',\n  3084: 'ProjFalseOriginLongGeoKey',\n  3085: 'ProjFalseOriginLatGeoKey',\n  3086: 'ProjFalseOriginEastingGeoKey',\n  3087: 'ProjFalseOriginNorthingGeoKey',\n  3088: 'ProjCenterLongGeoKey',\n  3089: 'ProjCenterLatGeoKey',\n  3090: 'ProjCenterEastingGeoKey',\n  3091: 'ProjCenterNorthingGeoKey',\n  3092: 'ProjScaleAtNatOriginGeoKey',\n  3093: 'ProjScaleAtCenterGeoKey',\n  3094: 'ProjAzimuthAngleGeoKey',\n  3095: 'ProjStraightVertPoleLongGeoKey',\n  3096: 'ProjRectifiedGridAngleGeoKey',\n  4096: 'VerticalCSTypeGeoKey',\n  4097: 'VerticalCitationGeoKey',\n  4098: 'VerticalDatumGeoKey',\n  4099: 'VerticalUnitsGeoKey'\n};\nexport var geoKeys = {};\n\nfor (var _key2 in geoKeyNames) {\n  if (geoKeyNames.hasOwnProperty(_key2)) {\n    geoKeys[geoKeyNames[_key2]] = parseInt(_key2, 10);\n  }\n}","'use strict';\n\nmodule.exports = function (value) {\n  if (!value) {\n    return false;\n  } // eslint-disable-next-line no-use-extend-native/no-use-extend-native\n\n\n  if (typeof Symbol.observable === 'symbol' && typeof value[Symbol.observable] === 'function') {\n    // eslint-disable-next-line no-use-extend-native/no-use-extend-native\n    return value === value[Symbol.observable]();\n  }\n\n  if (typeof value['@@observable'] === 'function') {\n    return value === value['@@observable']();\n  }\n\n  return false;\n};","'use strict'; // A linked list to keep track of recently-used-ness\n\nvar _classCallCheck = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/classCallCheck.js\");\n\nvar _createClass = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/createClass.js\");\n\nvar Yallist = require('yallist');\n\nvar MAX = Symbol('max');\nvar LENGTH = Symbol('length');\nvar LENGTH_CALCULATOR = Symbol('lengthCalculator');\nvar ALLOW_STALE = Symbol('allowStale');\nvar MAX_AGE = Symbol('maxAge');\nvar DISPOSE = Symbol('dispose');\nvar NO_DISPOSE_ON_SET = Symbol('noDisposeOnSet');\nvar LRU_LIST = Symbol('lruList');\nvar CACHE = Symbol('cache');\nvar UPDATE_AGE_ON_GET = Symbol('updateAgeOnGet');\n\nvar naiveLength = function naiveLength() {\n  return 1;\n}; // lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\n\n\nvar LRUCache = /*#__PURE__*/function () {\n  function LRUCache(options) {\n    _classCallCheck(this, LRUCache);\n\n    if (typeof options === 'number') options = {\n      max: options\n    };\n    if (!options) options = {};\n    if (options.max && (typeof options.max !== 'number' || options.max < 0)) throw new TypeError('max must be a non-negative number'); // Kind of weird to have a default max of Infinity, but oh well.\n\n    var max = this[MAX] = options.max || Infinity;\n    var lc = options.length || naiveLength;\n    this[LENGTH_CALCULATOR] = typeof lc !== 'function' ? naiveLength : lc;\n    this[ALLOW_STALE] = options.stale || false;\n    if (options.maxAge && typeof options.maxAge !== 'number') throw new TypeError('maxAge must be a number');\n    this[MAX_AGE] = options.maxAge || 0;\n    this[DISPOSE] = options.dispose;\n    this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false;\n    this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false;\n    this.reset();\n  } // resize the cache when the max changes.\n\n\n  _createClass(LRUCache, [{\n    key: \"max\",\n    get: function get() {\n      return this[MAX];\n    },\n    set: function set(mL) {\n      if (typeof mL !== 'number' || mL < 0) throw new TypeError('max must be a non-negative number');\n      this[MAX] = mL || Infinity;\n      trim(this);\n    }\n  }, {\n    key: \"allowStale\",\n    get: function get() {\n      return this[ALLOW_STALE];\n    },\n    set: function set(allowStale) {\n      this[ALLOW_STALE] = !!allowStale;\n    }\n  }, {\n    key: \"maxAge\",\n    get: function get() {\n      return this[MAX_AGE];\n    } // resize the cache when the lengthCalculator changes.\n    ,\n    set: function set(mA) {\n      if (typeof mA !== 'number') throw new TypeError('maxAge must be a non-negative number');\n      this[MAX_AGE] = mA;\n      trim(this);\n    }\n  }, {\n    key: \"lengthCalculator\",\n    get: function get() {\n      return this[LENGTH_CALCULATOR];\n    },\n    set: function set(lC) {\n      var _this = this;\n\n      if (typeof lC !== 'function') lC = naiveLength;\n\n      if (lC !== this[LENGTH_CALCULATOR]) {\n        this[LENGTH_CALCULATOR] = lC;\n        this[LENGTH] = 0;\n        this[LRU_LIST].forEach(function (hit) {\n          hit.length = _this[LENGTH_CALCULATOR](hit.value, hit.key);\n          _this[LENGTH] += hit.length;\n        });\n      }\n\n      trim(this);\n    }\n  }, {\n    key: \"length\",\n    get: function get() {\n      return this[LENGTH];\n    }\n  }, {\n    key: \"itemCount\",\n    get: function get() {\n      return this[LRU_LIST].length;\n    }\n  }, {\n    key: \"rforEach\",\n    value: function rforEach(fn, thisp) {\n      thisp = thisp || this;\n\n      for (var walker = this[LRU_LIST].tail; walker !== null;) {\n        var prev = walker.prev;\n        forEachStep(this, fn, walker, thisp);\n        walker = prev;\n      }\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(fn, thisp) {\n      thisp = thisp || this;\n\n      for (var walker = this[LRU_LIST].head; walker !== null;) {\n        var next = walker.next;\n        forEachStep(this, fn, walker, thisp);\n        walker = next;\n      }\n    }\n  }, {\n    key: \"keys\",\n    value: function keys() {\n      return this[LRU_LIST].toArray().map(function (k) {\n        return k.key;\n      });\n    }\n  }, {\n    key: \"values\",\n    value: function values() {\n      return this[LRU_LIST].toArray().map(function (k) {\n        return k.value;\n      });\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      var _this2 = this;\n\n      if (this[DISPOSE] && this[LRU_LIST] && this[LRU_LIST].length) {\n        this[LRU_LIST].forEach(function (hit) {\n          return _this2[DISPOSE](hit.key, hit.value);\n        });\n      }\n\n      this[CACHE] = new Map(); // hash of items by key\n\n      this[LRU_LIST] = new Yallist(); // list of items in order of use recency\n\n      this[LENGTH] = 0; // length of items in the list\n    }\n  }, {\n    key: \"dump\",\n    value: function dump() {\n      var _this3 = this;\n\n      return this[LRU_LIST].map(function (hit) {\n        return isStale(_this3, hit) ? false : {\n          k: hit.key,\n          v: hit.value,\n          e: hit.now + (hit.maxAge || 0)\n        };\n      }).toArray().filter(function (h) {\n        return h;\n      });\n    }\n  }, {\n    key: \"dumpLru\",\n    value: function dumpLru() {\n      return this[LRU_LIST];\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value, maxAge) {\n      maxAge = maxAge || this[MAX_AGE];\n      if (maxAge && typeof maxAge !== 'number') throw new TypeError('maxAge must be a number');\n      var now = maxAge ? Date.now() : 0;\n      var len = this[LENGTH_CALCULATOR](value, key);\n\n      if (this[CACHE].has(key)) {\n        if (len > this[MAX]) {\n          _del(this, this[CACHE].get(key));\n\n          return false;\n        }\n\n        var node = this[CACHE].get(key);\n        var item = node.value; // dispose of the old one before overwriting\n        // split out into 2 ifs for better coverage tracking\n\n        if (this[DISPOSE]) {\n          if (!this[NO_DISPOSE_ON_SET]) this[DISPOSE](key, item.value);\n        }\n\n        item.now = now;\n        item.maxAge = maxAge;\n        item.value = value;\n        this[LENGTH] += len - item.length;\n        item.length = len;\n        this.get(key);\n        trim(this);\n        return true;\n      }\n\n      var hit = new Entry(key, value, len, now, maxAge); // oversized objects fall out of cache automatically.\n\n      if (hit.length > this[MAX]) {\n        if (this[DISPOSE]) this[DISPOSE](key, value);\n        return false;\n      }\n\n      this[LENGTH] += hit.length;\n      this[LRU_LIST].unshift(hit);\n      this[CACHE].set(key, this[LRU_LIST].head);\n      trim(this);\n      return true;\n    }\n  }, {\n    key: \"has\",\n    value: function has(key) {\n      if (!this[CACHE].has(key)) return false;\n      var hit = this[CACHE].get(key).value;\n      return !isStale(this, hit);\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      return _get(this, key, true);\n    }\n  }, {\n    key: \"peek\",\n    value: function peek(key) {\n      return _get(this, key, false);\n    }\n  }, {\n    key: \"pop\",\n    value: function pop() {\n      var node = this[LRU_LIST].tail;\n      if (!node) return null;\n\n      _del(this, node);\n\n      return node.value;\n    }\n  }, {\n    key: \"del\",\n    value: function del(key) {\n      _del(this, this[CACHE].get(key));\n    }\n  }, {\n    key: \"load\",\n    value: function load(arr) {\n      // reset the cache\n      this.reset();\n      var now = Date.now(); // A previous serialized cache has the most recent items first\n\n      for (var l = arr.length - 1; l >= 0; l--) {\n        var hit = arr[l];\n        var expiresAt = hit.e || 0;\n        if (expiresAt === 0) // the item was created without expiration in a non aged cache\n          this.set(hit.k, hit.v);else {\n          var maxAge = expiresAt - now; // dont add already expired items\n\n          if (maxAge > 0) {\n            this.set(hit.k, hit.v, maxAge);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"prune\",\n    value: function prune() {\n      var _this4 = this;\n\n      this[CACHE].forEach(function (value, key) {\n        return _get(_this4, key, false);\n      });\n    }\n  }]);\n\n  return LRUCache;\n}();\n\nvar _get = function _get(self, key, doUse) {\n  var node = self[CACHE].get(key);\n\n  if (node) {\n    var hit = node.value;\n\n    if (isStale(self, hit)) {\n      _del(self, node);\n\n      if (!self[ALLOW_STALE]) return undefined;\n    } else {\n      if (doUse) {\n        if (self[UPDATE_AGE_ON_GET]) node.value.now = Date.now();\n        self[LRU_LIST].unshiftNode(node);\n      }\n    }\n\n    return hit.value;\n  }\n};\n\nvar isStale = function isStale(self, hit) {\n  if (!hit || !hit.maxAge && !self[MAX_AGE]) return false;\n  var diff = Date.now() - hit.now;\n  return hit.maxAge ? diff > hit.maxAge : self[MAX_AGE] && diff > self[MAX_AGE];\n};\n\nvar trim = function trim(self) {\n  if (self[LENGTH] > self[MAX]) {\n    for (var walker = self[LRU_LIST].tail; self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      var prev = walker.prev;\n\n      _del(self, walker);\n\n      walker = prev;\n    }\n  }\n};\n\nvar _del = function _del(self, node) {\n  if (node) {\n    var hit = node.value;\n    if (self[DISPOSE]) self[DISPOSE](hit.key, hit.value);\n    self[LENGTH] -= hit.length;\n    self[CACHE].delete(hit.key);\n    self[LRU_LIST].removeNode(node);\n  }\n};\n\nvar Entry = /*#__PURE__*/_createClass(function Entry(key, value, length, now, maxAge) {\n  _classCallCheck(this, Entry);\n\n  this.key = key;\n  this.value = value;\n  this.length = length;\n  this.now = now;\n  this.maxAge = maxAge || 0;\n});\n\nvar forEachStep = function forEachStep(self, fn, node, thisp) {\n  var hit = node.value;\n\n  if (isStale(self, hit)) {\n    _del(self, node);\n\n    if (!self[ALLOW_STALE]) hit = undefined;\n  }\n\n  if (hit) fn.call(thisp, hit.value, hit.key, self);\n};\n\nmodule.exports = LRUCache;","'use strict';\n\nvar _regeneratorRuntime = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\");\n\nmodule.exports = function (Yallist) {\n  Yallist.prototype[Symbol.iterator] = /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var walker;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            walker = this.head;\n\n          case 1:\n            if (!walker) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 4;\n            return walker.value;\n\n          case 4:\n            walker = walker.next;\n            _context.next = 1;\n            break;\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  });\n};","'use strict';\n\nmodule.exports = Yallist;\nYallist.Node = Node;\nYallist.create = Yallist;\n\nfunction Yallist(list) {\n  var self = this;\n\n  if (!(self instanceof Yallist)) {\n    self = new Yallist();\n  }\n\n  self.tail = null;\n  self.head = null;\n  self.length = 0;\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item);\n    });\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i]);\n    }\n  }\n\n  return self;\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list');\n  }\n\n  var next = node.next;\n  var prev = node.prev;\n\n  if (next) {\n    next.prev = prev;\n  }\n\n  if (prev) {\n    prev.next = next;\n  }\n\n  if (node === this.head) {\n    this.head = next;\n  }\n\n  if (node === this.tail) {\n    this.tail = prev;\n  }\n\n  node.list.length--;\n  node.next = null;\n  node.prev = null;\n  node.list = null;\n  return next;\n};\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return;\n  }\n\n  if (node.list) {\n    node.list.removeNode(node);\n  }\n\n  var head = this.head;\n  node.list = this;\n  node.next = head;\n\n  if (head) {\n    head.prev = node;\n  }\n\n  this.head = node;\n\n  if (!this.tail) {\n    this.tail = node;\n  }\n\n  this.length++;\n};\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return;\n  }\n\n  if (node.list) {\n    node.list.removeNode(node);\n  }\n\n  var tail = this.tail;\n  node.list = this;\n  node.prev = tail;\n\n  if (tail) {\n    tail.next = node;\n  }\n\n  this.tail = node;\n\n  if (!this.head) {\n    this.head = node;\n  }\n\n  this.length++;\n};\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i]);\n  }\n\n  return this.length;\n};\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i]);\n  }\n\n  return this.length;\n};\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined;\n  }\n\n  var res = this.tail.value;\n  this.tail = this.tail.prev;\n\n  if (this.tail) {\n    this.tail.next = null;\n  } else {\n    this.head = null;\n  }\n\n  this.length--;\n  return res;\n};\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined;\n  }\n\n  var res = this.head.value;\n  this.head = this.head.next;\n\n  if (this.head) {\n    this.head.prev = null;\n  } else {\n    this.tail = null;\n  }\n\n  this.length--;\n  return res;\n};\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this;\n\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this);\n    walker = walker.next;\n  }\n};\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this;\n\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this);\n    walker = walker.prev;\n  }\n};\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next;\n  }\n\n  if (i === n && walker !== null) {\n    return walker.value;\n  }\n};\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev;\n  }\n\n  if (i === n && walker !== null) {\n    return walker.value;\n  }\n};\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this;\n  var res = new Yallist();\n\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this));\n    walker = walker.next;\n  }\n\n  return res;\n};\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this;\n  var res = new Yallist();\n\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this));\n    walker = walker.prev;\n  }\n\n  return res;\n};\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc;\n  var walker = this.head;\n\n  if (arguments.length > 1) {\n    acc = initial;\n  } else if (this.head) {\n    walker = this.head.next;\n    acc = this.head.value;\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value');\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i);\n    walker = walker.next;\n  }\n\n  return acc;\n};\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc;\n  var walker = this.tail;\n\n  if (arguments.length > 1) {\n    acc = initial;\n  } else if (this.tail) {\n    walker = this.tail.prev;\n    acc = this.tail.value;\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value');\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i);\n    walker = walker.prev;\n  }\n\n  return acc;\n};\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length);\n\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value;\n    walker = walker.next;\n  }\n\n  return arr;\n};\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length);\n\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value;\n    walker = walker.prev;\n  }\n\n  return arr;\n};\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length;\n\n  if (to < 0) {\n    to += this.length;\n  }\n\n  from = from || 0;\n\n  if (from < 0) {\n    from += this.length;\n  }\n\n  var ret = new Yallist();\n\n  if (to < from || to < 0) {\n    return ret;\n  }\n\n  if (from < 0) {\n    from = 0;\n  }\n\n  if (to > this.length) {\n    to = this.length;\n  }\n\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next;\n  }\n\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value);\n  }\n\n  return ret;\n};\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length;\n\n  if (to < 0) {\n    to += this.length;\n  }\n\n  from = from || 0;\n\n  if (from < 0) {\n    from += this.length;\n  }\n\n  var ret = new Yallist();\n\n  if (to < from || to < 0) {\n    return ret;\n  }\n\n  if (from < 0) {\n    from = 0;\n  }\n\n  if (to > this.length) {\n    to = this.length;\n  }\n\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev;\n  }\n\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value);\n  }\n\n  return ret;\n};\n\nYallist.prototype.splice = function (start, deleteCount) {\n  if (start > this.length) {\n    start = this.length - 1;\n  }\n\n  if (start < 0) {\n    start = this.length + start;\n  }\n\n  for (var i = 0, walker = this.head; walker !== null && i < start; i++) {\n    walker = walker.next;\n  }\n\n  var ret = [];\n\n  for (var i = 0; walker && i < deleteCount; i++) {\n    ret.push(walker.value);\n    walker = this.removeNode(walker);\n  }\n\n  if (walker === null) {\n    walker = this.tail;\n  }\n\n  if (walker !== this.head && walker !== this.tail) {\n    walker = walker.prev;\n  }\n\n  for (var i = 0; i < (arguments.length <= 2 ? 0 : arguments.length - 2); i++) {\n    walker = insert(this, walker, i + 2 < 2 || arguments.length <= i + 2 ? undefined : arguments[i + 2]);\n  }\n\n  return ret;\n};\n\nYallist.prototype.reverse = function () {\n  var head = this.head;\n  var tail = this.tail;\n\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev;\n    walker.prev = walker.next;\n    walker.next = p;\n  }\n\n  this.head = tail;\n  this.tail = head;\n  return this;\n};\n\nfunction insert(self, node, value) {\n  var inserted = node === self.head ? new Node(value, null, node, self) : new Node(value, node, node.next, self);\n\n  if (inserted.next === null) {\n    self.tail = inserted;\n  }\n\n  if (inserted.prev === null) {\n    self.head = inserted;\n  }\n\n  self.length++;\n  return inserted;\n}\n\nfunction push(self, item) {\n  self.tail = new Node(item, self.tail, null, self);\n\n  if (!self.head) {\n    self.head = self.tail;\n  }\n\n  self.length++;\n}\n\nfunction unshift(self, item) {\n  self.head = new Node(item, null, self.head, self);\n\n  if (!self.tail) {\n    self.tail = self.head;\n  }\n\n  self.length++;\n}\n\nfunction Node(value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list);\n  }\n\n  this.list = list;\n  this.value = value;\n\n  if (prev) {\n    prev.next = this;\n    this.prev = prev;\n  } else {\n    this.prev = null;\n  }\n\n  if (next) {\n    next.prev = this;\n    this.next = next;\n  } else {\n    this.next = null;\n  }\n}\n\ntry {\n  // add if support for Symbol.iterator is present\n  require('./iterator.js')(Yallist);\n} catch (er) {}","import _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nexport var AsyncSerialScheduler = /*#__PURE__*/function () {\n  function AsyncSerialScheduler(observer) {\n    _classCallCheck(this, AsyncSerialScheduler);\n\n    this._baseObserver = observer;\n    this._pendingPromises = new Set();\n  }\n\n  _createClass(AsyncSerialScheduler, [{\n    key: \"complete\",\n    value: function complete() {\n      var _this = this;\n\n      Promise.all(this._pendingPromises).then(function () {\n        return _this._baseObserver.complete();\n      }).catch(function (error) {\n        return _this._baseObserver.error(error);\n      });\n    }\n  }, {\n    key: \"error\",\n    value: function error(_error) {\n      this._baseObserver.error(_error);\n    }\n  }, {\n    key: \"schedule\",\n    value: function schedule(task) {\n      var _this2 = this;\n\n      var prevPromisesCompletion = Promise.all(this._pendingPromises);\n      var values = [];\n\n      var next = function next(value) {\n        return values.push(value);\n      };\n\n      var promise = Promise.resolve().then(function () {\n        return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var _iterator, _step, value;\n\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return prevPromisesCompletion;\n\n                case 2:\n                  _context.next = 4;\n                  return task(next);\n\n                case 4:\n                  this._pendingPromises.delete(promise);\n\n                  _iterator = _createForOfIteratorHelper(values);\n\n                  try {\n                    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                      value = _step.value;\n\n                      this._baseObserver.next(value);\n                    }\n                  } catch (err) {\n                    _iterator.e(err);\n                  } finally {\n                    _iterator.f();\n                  }\n\n                case 7:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n      }).catch(function (error) {\n        _this2._pendingPromises.delete(promise);\n\n        _this2._baseObserver.error(error);\n      });\n\n      this._pendingPromises.add(promise);\n    }\n  }]);\n\n  return AsyncSerialScheduler;\n}();","export var hasSymbols = function hasSymbols() {\n  return typeof Symbol === \"function\";\n};\nexport var hasSymbol = function hasSymbol(name) {\n  return hasSymbols() && Boolean(Symbol[name]);\n};\nexport var getSymbol = function getSymbol(name) {\n  return hasSymbol(name) ? Symbol[name] : \"@@\" + name;\n};\nexport function registerObservableSymbol() {\n  if (hasSymbols() && !hasSymbol(\"observable\")) {\n    Symbol.observable = Symbol(\"observable\");\n  }\n}\n\nif (!hasSymbol(\"asyncIterator\")) {\n  Symbol.asyncIterator = Symbol.asyncIterator || Symbol.for(\"Symbol.asyncIterator\");\n}","import _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/**\n * Based on <https://raw.githubusercontent.com/zenparsing/zen-observable/master/src/Observable.js>\n * At commit: f63849a8c60af5d514efc8e9d6138d8273c49ad6\n */\nimport \"./symbols\";\nimport { getSymbol, hasSymbol, hasSymbols } from \"./_symbols\";\nvar SymbolIterator = getSymbol(\"iterator\");\nvar SymbolObservable = getSymbol(\"observable\");\nvar SymbolSpecies = getSymbol(\"species\"); // === Abstract Operations ===\n\nfunction getMethod(obj, key) {\n  var value = obj[key];\n\n  if (value == null) {\n    return undefined;\n  }\n\n  if (typeof value !== \"function\") {\n    throw new TypeError(value + \" is not a function\");\n  }\n\n  return value;\n}\n\nfunction getSpecies(obj) {\n  var ctor = obj.constructor;\n\n  if (ctor !== undefined) {\n    ctor = ctor[SymbolSpecies];\n\n    if (ctor === null) {\n      ctor = undefined;\n    }\n  }\n\n  return ctor !== undefined ? ctor : Observable;\n}\n\nfunction isObservable(x) {\n  return x instanceof Observable; // SPEC: Brand check\n}\n\nfunction hostReportError(error) {\n  if (hostReportError.log) {\n    hostReportError.log(error);\n  } else {\n    setTimeout(function () {\n      throw error;\n    }, 0);\n  }\n}\n\nfunction enqueue(fn) {\n  Promise.resolve().then(function () {\n    try {\n      fn();\n    } catch (e) {\n      hostReportError(e);\n    }\n  });\n}\n\nfunction cleanupSubscription(subscription) {\n  var cleanup = subscription._cleanup;\n\n  if (cleanup === undefined) {\n    return;\n  }\n\n  subscription._cleanup = undefined;\n\n  if (!cleanup) {\n    return;\n  }\n\n  try {\n    if (typeof cleanup === \"function\") {\n      cleanup();\n    } else {\n      var unsubscribe = getMethod(cleanup, \"unsubscribe\");\n\n      if (unsubscribe) {\n        unsubscribe.call(cleanup);\n      }\n    }\n  } catch (e) {\n    hostReportError(e);\n  }\n}\n\nfunction closeSubscription(subscription) {\n  subscription._observer = undefined;\n  subscription._queue = undefined;\n  subscription._state = \"closed\";\n}\n\nfunction flushSubscription(subscription) {\n  var queue = subscription._queue;\n\n  if (!queue) {\n    return;\n  }\n\n  subscription._queue = undefined;\n  subscription._state = \"ready\";\n\n  var _iterator = _createForOfIteratorHelper(queue),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var item = _step.value;\n      notifySubscription(subscription, item.type, item.value);\n\n      if (subscription._state === \"closed\") {\n        break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nfunction notifySubscription(subscription, type, value) {\n  subscription._state = \"running\";\n  var observer = subscription._observer;\n\n  try {\n    var m = observer ? getMethod(observer, type) : undefined;\n\n    switch (type) {\n      case \"next\":\n        if (m) m.call(observer, value);\n        break;\n\n      case \"error\":\n        closeSubscription(subscription);\n        if (m) m.call(observer, value);else throw value;\n        break;\n\n      case \"complete\":\n        closeSubscription(subscription);\n        if (m) m.call(observer);\n        break;\n    }\n  } catch (e) {\n    hostReportError(e);\n  }\n\n  if (subscription._state === \"closed\") {\n    cleanupSubscription(subscription);\n  } else if (subscription._state === \"running\") {\n    subscription._state = \"ready\";\n  }\n}\n\nfunction onNotify(subscription, type, value) {\n  if (subscription._state === \"closed\") {\n    return;\n  }\n\n  if (subscription._state === \"buffering\") {\n    subscription._queue = subscription._queue || [];\n\n    subscription._queue.push({\n      type: type,\n      value: value\n    });\n\n    return;\n  }\n\n  if (subscription._state !== \"ready\") {\n    subscription._state = \"buffering\";\n    subscription._queue = [{\n      type: type,\n      value: value\n    }];\n    enqueue(function () {\n      return flushSubscription(subscription);\n    });\n    return;\n  }\n\n  notifySubscription(subscription, type, value);\n}\n\nexport var Subscription = /*#__PURE__*/function () {\n  function Subscription(observer, subscriber) {\n    _classCallCheck(this, Subscription);\n\n    // ASSERT: observer is an object\n    // ASSERT: subscriber is callable\n    this._cleanup = undefined;\n    this._observer = observer;\n    this._queue = undefined;\n    this._state = \"initializing\";\n    var subscriptionObserver = new SubscriptionObserver(this);\n\n    try {\n      this._cleanup = subscriber.call(undefined, subscriptionObserver);\n    } catch (e) {\n      subscriptionObserver.error(e);\n    }\n\n    if (this._state === \"initializing\") {\n      this._state = \"ready\";\n    }\n  }\n\n  _createClass(Subscription, [{\n    key: \"closed\",\n    get: function get() {\n      return this._state === \"closed\";\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe() {\n      if (this._state !== \"closed\") {\n        closeSubscription(this);\n        cleanupSubscription(this);\n      }\n    }\n  }]);\n\n  return Subscription;\n}();\nexport var SubscriptionObserver = /*#__PURE__*/function () {\n  function SubscriptionObserver(subscription) {\n    _classCallCheck(this, SubscriptionObserver);\n\n    this._subscription = subscription;\n  }\n\n  _createClass(SubscriptionObserver, [{\n    key: \"closed\",\n    get: function get() {\n      return this._subscription._state === \"closed\";\n    }\n  }, {\n    key: \"next\",\n    value: function next(value) {\n      onNotify(this._subscription, \"next\", value);\n    }\n  }, {\n    key: \"error\",\n    value: function error(value) {\n      onNotify(this._subscription, \"error\", value);\n    }\n  }, {\n    key: \"complete\",\n    value: function complete() {\n      onNotify(this._subscription, \"complete\");\n    }\n  }]);\n\n  return SubscriptionObserver;\n}();\n/**\n * The basic Observable class. This primitive is used to wrap asynchronous\n * data streams in a common standardized data type that is interoperable\n * between libraries and can be composed to represent more complex processes.\n */\n\nexport var Observable = /*#__PURE__*/function (_ref) {\n  function Observable(subscriber) {\n    _classCallCheck(this, Observable);\n\n    if (!(this instanceof Observable)) {\n      throw new TypeError(\"Observable cannot be called as a function\");\n    }\n\n    if (typeof subscriber !== \"function\") {\n      throw new TypeError(\"Observable initializer must be a function\");\n    }\n\n    this._subscriber = subscriber;\n  }\n\n  _createClass(Observable, [{\n    key: \"subscribe\",\n    value: function subscribe(nextOrObserver, onError, onComplete) {\n      if (typeof nextOrObserver !== \"object\" || nextOrObserver === null) {\n        nextOrObserver = {\n          next: nextOrObserver,\n          error: onError,\n          complete: onComplete\n        };\n      }\n\n      return new Subscription(nextOrObserver, this._subscriber);\n    }\n  }, {\n    key: \"pipe\",\n    value: function pipe(first) {\n      // tslint:disable-next-line no-this-assignment\n      var intermediate = this;\n\n      for (var _len = arguments.length, mappers = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        mappers[_key - 1] = arguments[_key];\n      }\n\n      for (var _i = 0, _arr = [first].concat(mappers); _i < _arr.length; _i++) {\n        var mapper = _arr[_i];\n        intermediate = mapper(intermediate);\n      }\n\n      return intermediate;\n    }\n  }, {\n    key: \"tap\",\n    value: function tap(nextOrObserver, onError, onComplete) {\n      var _this = this;\n\n      var tapObserver = typeof nextOrObserver !== \"object\" || nextOrObserver === null ? {\n        next: nextOrObserver,\n        error: onError,\n        complete: onComplete\n      } : nextOrObserver;\n      return new Observable(function (observer) {\n        return _this.subscribe({\n          next: function next(value) {\n            tapObserver.next && tapObserver.next(value);\n            observer.next(value);\n          },\n          error: function error(_error) {\n            tapObserver.error && tapObserver.error(_error);\n            observer.error(_error);\n          },\n          complete: function complete() {\n            tapObserver.complete && tapObserver.complete();\n            observer.complete();\n          },\n          start: function start(subscription) {\n            tapObserver.start && tapObserver.start(subscription);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(fn) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        if (typeof fn !== \"function\") {\n          reject(new TypeError(fn + \" is not a function\"));\n          return;\n        }\n\n        function done() {\n          subscription.unsubscribe();\n          resolve(undefined);\n        }\n\n        var subscription = _this2.subscribe({\n          next: function next(value) {\n            try {\n              fn(value, done);\n            } catch (e) {\n              reject(e);\n              subscription.unsubscribe();\n            }\n          },\n          error: function error(_error2) {\n            reject(_error2);\n          },\n          complete: function complete() {\n            resolve(undefined);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"map\",\n    value: function map(fn) {\n      var _this3 = this;\n\n      if (typeof fn !== \"function\") {\n        throw new TypeError(fn + \" is not a function\");\n      }\n\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        return _this3.subscribe({\n          next: function next(value) {\n            var propagatedValue = value;\n\n            try {\n              propagatedValue = fn(value);\n            } catch (e) {\n              return observer.error(e);\n            }\n\n            observer.next(propagatedValue);\n          },\n          error: function error(e) {\n            observer.error(e);\n          },\n          complete: function complete() {\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(fn) {\n      var _this4 = this;\n\n      if (typeof fn !== \"function\") {\n        throw new TypeError(fn + \" is not a function\");\n      }\n\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        return _this4.subscribe({\n          next: function next(value) {\n            try {\n              if (!fn(value)) return;\n            } catch (e) {\n              return observer.error(e);\n            }\n\n            observer.next(value);\n          },\n          error: function error(e) {\n            observer.error(e);\n          },\n          complete: function complete() {\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"reduce\",\n    value: function reduce(fn, seed) {\n      var _this5 = this;\n\n      if (typeof fn !== \"function\") {\n        throw new TypeError(fn + \" is not a function\");\n      }\n\n      var C = getSpecies(this);\n      var hasSeed = arguments.length > 1;\n      var hasValue = false;\n      var acc = seed;\n      return new C(function (observer) {\n        return _this5.subscribe({\n          next: function next(value) {\n            var first = !hasValue;\n            hasValue = true;\n\n            if (!first || hasSeed) {\n              try {\n                acc = fn(acc, value);\n              } catch (e) {\n                return observer.error(e);\n              }\n            } else {\n              acc = value;\n            }\n          },\n          error: function error(e) {\n            observer.error(e);\n          },\n          complete: function complete() {\n            if (!hasValue && !hasSeed) {\n              return observer.error(new TypeError(\"Cannot reduce an empty sequence\"));\n            }\n\n            observer.next(acc);\n            observer.complete();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"concat\",\n    value: function concat() {\n      var _this6 = this;\n\n      for (var _len2 = arguments.length, sources = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        sources[_key2] = arguments[_key2];\n      }\n\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        var subscription;\n        var index = 0;\n\n        function startNext(next) {\n          subscription = next.subscribe({\n            next: function next(v) {\n              observer.next(v);\n            },\n            error: function error(e) {\n              observer.error(e);\n            },\n            complete: function complete() {\n              if (index === sources.length) {\n                subscription = undefined;\n                observer.complete();\n              } else {\n                startNext(C.from(sources[index++]));\n              }\n            }\n          });\n        }\n\n        startNext(_this6);\n        return function () {\n          if (subscription) {\n            subscription.unsubscribe();\n            subscription = undefined;\n          }\n        };\n      });\n    }\n  }, {\n    key: \"flatMap\",\n    value: function flatMap(fn) {\n      var _this7 = this;\n\n      if (typeof fn !== \"function\") {\n        throw new TypeError(fn + \" is not a function\");\n      }\n\n      var C = getSpecies(this);\n      return new C(function (observer) {\n        var subscriptions = [];\n\n        var outer = _this7.subscribe({\n          next: function next(value) {\n            var normalizedValue;\n\n            if (fn) {\n              try {\n                normalizedValue = fn(value);\n              } catch (e) {\n                return observer.error(e);\n              }\n            } else {\n              normalizedValue = value;\n            }\n\n            var inner = C.from(normalizedValue).subscribe({\n              next: function next(innerValue) {\n                observer.next(innerValue);\n              },\n              error: function error(e) {\n                observer.error(e);\n              },\n              complete: function complete() {\n                var i = subscriptions.indexOf(inner);\n                if (i >= 0) subscriptions.splice(i, 1);\n                completeIfDone();\n              }\n            });\n            subscriptions.push(inner);\n          },\n          error: function error(e) {\n            observer.error(e);\n          },\n          complete: function complete() {\n            completeIfDone();\n          }\n        });\n\n        function completeIfDone() {\n          if (outer.closed && subscriptions.length === 0) {\n            observer.complete();\n          }\n        }\n\n        return function () {\n          subscriptions.forEach(function (s) {\n            return s.unsubscribe();\n          });\n          outer.unsubscribe();\n        };\n      });\n    }\n  }, {\n    key: _ref,\n    value: function value() {\n      return this;\n    }\n  }], [{\n    key: \"from\",\n    value: function from(x) {\n      var C = typeof this === \"function\" ? this : Observable;\n\n      if (x == null) {\n        throw new TypeError(x + \" is not an object\");\n      }\n\n      var observableMethod = getMethod(x, SymbolObservable);\n\n      if (observableMethod) {\n        var observable = observableMethod.call(x);\n\n        if (Object(observable) !== observable) {\n          throw new TypeError(observable + \" is not an object\");\n        }\n\n        if (isObservable(observable) && observable.constructor === C) {\n          return observable;\n        }\n\n        return new C(function (observer) {\n          return observable.subscribe(observer);\n        });\n      }\n\n      if (hasSymbol(\"iterator\")) {\n        var iteratorMethod = getMethod(x, SymbolIterator);\n\n        if (iteratorMethod) {\n          return new C(function (observer) {\n            enqueue(function () {\n              if (observer.closed) return;\n\n              var _iterator2 = _createForOfIteratorHelper(iteratorMethod.call(x)),\n                  _step2;\n\n              try {\n                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                  var item = _step2.value;\n                  observer.next(item);\n                  if (observer.closed) return;\n                }\n              } catch (err) {\n                _iterator2.e(err);\n              } finally {\n                _iterator2.f();\n              }\n\n              observer.complete();\n            });\n          });\n        }\n      }\n\n      if (Array.isArray(x)) {\n        return new C(function (observer) {\n          enqueue(function () {\n            if (observer.closed) return;\n\n            var _iterator3 = _createForOfIteratorHelper(x),\n                _step3;\n\n            try {\n              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                var item = _step3.value;\n                observer.next(item);\n                if (observer.closed) return;\n              }\n            } catch (err) {\n              _iterator3.e(err);\n            } finally {\n              _iterator3.f();\n            }\n\n            observer.complete();\n          });\n        });\n      }\n\n      throw new TypeError(x + \" is not observable\");\n    }\n  }, {\n    key: \"of\",\n    value: function of() {\n      for (var _len3 = arguments.length, items = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        items[_key3] = arguments[_key3];\n      }\n\n      var C = typeof this === \"function\" ? this : Observable;\n      return new C(function (observer) {\n        enqueue(function () {\n          if (observer.closed) return;\n\n          var _iterator4 = _createForOfIteratorHelper(items),\n              _step4;\n\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var item = _step4.value;\n              observer.next(item);\n              if (observer.closed) return;\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n\n          observer.complete();\n        });\n      });\n    }\n  }, {\n    key: SymbolSpecies,\n    get: function get() {\n      return this;\n    }\n  }]);\n\n  return Observable;\n}((Symbol.observable, SymbolObservable));\n\nif (hasSymbols()) {\n  Object.defineProperty(Observable, Symbol(\"extensions\"), {\n    value: {\n      symbol: SymbolObservable,\n      hostReportError: hostReportError\n    },\n    configurable: true\n  });\n}\n\nexport default Observable;","/**\n * Unsubscribe from a subscription returned by something that looks like an observable,\n * but is not necessarily our observable implementation.\n */\nfunction unsubscribe(subscription) {\n  if (typeof subscription === \"function\") {\n    subscription();\n  } else if (subscription && typeof subscription.unsubscribe === \"function\") {\n    subscription.unsubscribe();\n  }\n}\n\nexport default unsubscribe;","import _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n/**\n * Filters the values emitted by another observable.\n * To be applied to an input observable using `pipe()`.\n */\n\nfunction filter(test) {\n  return function (observable) {\n    return new Observable(function (observer) {\n      var scheduler = new AsyncSerialScheduler(observer);\n      var subscription = observable.subscribe({\n        complete: function complete() {\n          scheduler.complete();\n        },\n        error: function error(_error) {\n          scheduler.error(_error);\n        },\n        next: function next(input) {\n          var _this = this;\n\n          scheduler.schedule(function (next) {\n            return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return test(input);\n\n                    case 2:\n                      if (!_context.sent) {\n                        _context.next = 4;\n                        break;\n                      }\n\n                      next(input);\n\n                    case 4:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n          });\n        }\n      });\n      return function () {\n        return unsubscribe(subscription);\n      };\n    });\n  };\n}\n\nexport default filter;","/// <reference lib=\"es2018\" />\nimport { hasSymbol } from \"./_symbols\";\nexport function isAsyncIterator(thing) {\n  return thing && hasSymbol(\"asyncIterator\") && thing[Symbol.asyncIterator];\n}\nexport function isIterator(thing) {\n  return thing && hasSymbol(\"iterator\") && thing[Symbol.iterator];\n}","import _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __asyncValues = this && this.__asyncValues || function (o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator],\n      i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i);\n\n  function verb(n) {\n    i[n] = o[n] && function (v) {\n      return new Promise(function (resolve, reject) {\n        v = o[n](v), settle(resolve, reject, v.done, v.value);\n      });\n    };\n  }\n\n  function settle(resolve, reject, d, v) {\n    Promise.resolve(v).then(function (v) {\n      resolve({\n        value: v,\n        done: d\n      });\n    }, reject);\n  }\n};\n\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport { isAsyncIterator, isIterator } from \"./_util\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n/**\n * Maps the values emitted by another observable. In contrast to `map()`\n * the `mapper` function returns an array of values that will be emitted\n * separately.\n * Use `flatMap()` to map input values to zero, one or multiple output\n * values. To be applied to an input observable using `pipe()`.\n */\n\nfunction flatMap(mapper) {\n  return function (observable) {\n    return new Observable(function (observer) {\n      var scheduler = new AsyncSerialScheduler(observer);\n      var subscription = observable.subscribe({\n        complete: function complete() {\n          scheduler.complete();\n        },\n        error: function error(_error) {\n          scheduler.error(_error);\n        },\n        next: function next(input) {\n          var _this = this;\n\n          scheduler.schedule(function (next) {\n            return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n              var e_1, _a, mapped, mapped_1, mapped_1_1, element;\n\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return mapper(input);\n\n                    case 2:\n                      mapped = _context.sent;\n\n                      if (!(isIterator(mapped) || isAsyncIterator(mapped))) {\n                        _context.next = 31;\n                        break;\n                      }\n\n                      _context.prev = 4;\n                      mapped_1 = __asyncValues(mapped);\n\n                    case 6:\n                      _context.next = 8;\n                      return mapped_1.next();\n\n                    case 8:\n                      mapped_1_1 = _context.sent;\n\n                      if (mapped_1_1.done) {\n                        _context.next = 14;\n                        break;\n                      }\n\n                      element = mapped_1_1.value;\n                      next(element);\n\n                    case 12:\n                      _context.next = 6;\n                      break;\n\n                    case 14:\n                      _context.next = 19;\n                      break;\n\n                    case 16:\n                      _context.prev = 16;\n                      _context.t0 = _context[\"catch\"](4);\n                      e_1 = {\n                        error: _context.t0\n                      };\n\n                    case 19:\n                      _context.prev = 19;\n                      _context.prev = 20;\n\n                      if (!(mapped_1_1 && !mapped_1_1.done && (_a = mapped_1.return))) {\n                        _context.next = 24;\n                        break;\n                      }\n\n                      _context.next = 24;\n                      return _a.call(mapped_1);\n\n                    case 24:\n                      _context.prev = 24;\n\n                      if (!e_1) {\n                        _context.next = 27;\n                        break;\n                      }\n\n                      throw e_1.error;\n\n                    case 27:\n                      return _context.finish(24);\n\n                    case 28:\n                      return _context.finish(19);\n\n                    case 29:\n                      _context.next = 32;\n                      break;\n\n                    case 31:\n                      mapped.map(function (output) {\n                        return next(output);\n                      });\n\n                    case 32:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee, null, [[4, 16, 19, 29], [20,, 24, 28]]);\n            }));\n          });\n        }\n      });\n      return function () {\n        return unsubscribe(subscription);\n      };\n    });\n  };\n}\n\nexport default flatMap;","import { Observable } from \"./observable\";\n/**\n * Creates an observable that yields a new value every `period` milliseconds.\n * The first value emitted is 0, then 1, 2, etc. The first value is not emitted\n * immediately, but after the first interval.\n */\n\nexport default function interval(period) {\n  return new Observable(function (observer) {\n    var counter = 0;\n    var handle = setInterval(function () {\n      observer.next(counter++);\n    }, period);\n    return function () {\n      return clearInterval(handle);\n    };\n  });\n}","import _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n/**\n * Maps the values emitted by another observable to different values.\n * To be applied to an input observable using `pipe()`.\n */\n\nfunction map(mapper) {\n  return function (observable) {\n    return new Observable(function (observer) {\n      var scheduler = new AsyncSerialScheduler(observer);\n      var subscription = observable.subscribe({\n        complete: function complete() {\n          scheduler.complete();\n        },\n        error: function error(_error) {\n          scheduler.error(_error);\n        },\n        next: function next(input) {\n          var _this = this;\n\n          scheduler.schedule(function (next) {\n            return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n              var mapped;\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return mapper(input);\n\n                    case 2:\n                      mapped = _context.sent;\n                      next(mapped);\n\n                    case 4:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n          });\n        }\n      });\n      return function () {\n        return unsubscribe(subscription);\n      };\n    });\n  };\n}\n\nexport default map;","import { Observable } from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n\nfunction merge() {\n  for (var _len = arguments.length, observables = new Array(_len), _key = 0; _key < _len; _key++) {\n    observables[_key] = arguments[_key];\n  }\n\n  if (observables.length === 0) {\n    return Observable.from([]);\n  }\n\n  return new Observable(function (observer) {\n    var completed = 0;\n    var subscriptions = observables.map(function (input) {\n      return input.subscribe({\n        error: function error(_error) {\n          observer.error(_error);\n          unsubscribeAll();\n        },\n        next: function next(value) {\n          observer.next(value);\n        },\n        complete: function complete() {\n          if (++completed === observables.length) {\n            observer.complete();\n            unsubscribeAll();\n          }\n        }\n      });\n    });\n\n    var unsubscribeAll = function unsubscribeAll() {\n      subscriptions.forEach(function (subscription) {\n        return unsubscribe(subscription);\n      });\n    };\n\n    return unsubscribeAll;\n  });\n}\n\nexport default merge;","import _classCallCheck from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport Observable from \"./observable\"; // TODO: This observer iteration approach looks inelegant and expensive\n// Idea: Come up with super class for Subscription that contains the\n//       notify*, ... methods and use it here\n\n/**\n * A subject is a \"hot\" observable (see `multicast`) that has its observer\n * methods (`.next(value)`, `.error(error)`, `.complete()`) exposed.\n *\n * Be careful, though! With great power comes great responsibility. Only use\n * the `Subject` when you really need to trigger updates \"from the outside\" and\n * try to keep the code that can access it to a minimum. Return\n * `Observable.from(mySubject)` to not allow other code to mutate.\n */\n\nvar MulticastSubject = /*#__PURE__*/function (_Observable) {\n  _inherits(MulticastSubject, _Observable);\n\n  var _super = _createSuper(MulticastSubject);\n\n  function MulticastSubject() {\n    var _this;\n\n    _classCallCheck(this, MulticastSubject);\n\n    _this = _super.call(this, function (observer) {\n      _this._observers.add(observer);\n\n      return function () {\n        return _this._observers.delete(observer);\n      };\n    });\n    _this._observers = new Set();\n    return _this;\n  }\n\n  _createClass(MulticastSubject, [{\n    key: \"next\",\n    value: function next(value) {\n      var _iterator = _createForOfIteratorHelper(this._observers),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var observer = _step.value;\n          observer.next(value);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"error\",\n    value: function error(_error) {\n      var _iterator2 = _createForOfIteratorHelper(this._observers),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var observer = _step2.value;\n          observer.error(_error);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"complete\",\n    value: function complete() {\n      var _iterator3 = _createForOfIteratorHelper(this._observers),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var observer = _step3.value;\n          observer.complete();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }]);\n\n  return MulticastSubject;\n}(Observable);\n\nexport default MulticastSubject;","import Observable from \"./observable\";\nimport Subject from \"./subject\";\nimport unsubscribe from \"./unsubscribe\"; // TODO: Subject already creates additional observables \"under the hood\",\n//       now we introduce even more. A true native MulticastObservable\n//       would be preferable.\n\n/**\n * Takes a \"cold\" observable and returns a wrapping \"hot\" observable that\n * proxies the input observable's values and errors.\n *\n * An observable is called \"cold\" when its initialization function is run\n * for each new subscriber. This is how observable-fns's `Observable`\n * implementation works.\n *\n * A hot observable is an observable where new subscribers subscribe to\n * the upcoming values of an already-initialiazed observable.\n *\n * The multicast observable will lazily subscribe to the source observable\n * once it has its first own subscriber and will unsubscribe from the\n * source observable when its last own subscriber unsubscribed.\n */\n\nfunction multicast(coldObservable) {\n  var subject = new Subject();\n  var sourceSubscription;\n  var subscriberCount = 0;\n  return new Observable(function (observer) {\n    // Init source subscription lazily\n    if (!sourceSubscription) {\n      sourceSubscription = coldObservable.subscribe(subject);\n    } // Pipe all events from `subject` into this observable\n\n\n    var subscription = subject.subscribe(observer);\n    subscriberCount++;\n    return function () {\n      subscriberCount--;\n      subscription.unsubscribe(); // Close source subscription once last subscriber has unsubscribed\n\n      if (subscriberCount === 0) {\n        unsubscribe(sourceSubscription);\n        sourceSubscription = undefined;\n      }\n    };\n  });\n}\n\nexport default multicast;","import _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n\nfunction scan(accumulator, seed) {\n  return function (observable) {\n    return new Observable(function (observer) {\n      var accumulated;\n      var index = 0;\n      var scheduler = new AsyncSerialScheduler(observer);\n      var subscription = observable.subscribe({\n        complete: function complete() {\n          scheduler.complete();\n        },\n        error: function error(_error) {\n          scheduler.error(_error);\n        },\n        next: function next(value) {\n          var _this = this;\n\n          scheduler.schedule(function (next) {\n            return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n              var prevAcc;\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      prevAcc = index === 0 ? typeof seed === \"undefined\" ? value : seed : accumulated;\n                      _context.next = 3;\n                      return accumulator(prevAcc, value, index++);\n\n                    case 3:\n                      accumulated = _context.sent;\n                      next(accumulated);\n\n                    case 5:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n          });\n        }\n      });\n      return function () {\n        return unsubscribe(subscription);\n      };\n    });\n  };\n}\n\nexport default scan;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.serialize = exports.deserialize = exports.registerSerializer = void 0;\n\nvar serializers_1 = require(\"./serializers\");\n\nvar registeredSerializer = serializers_1.DefaultSerializer;\n\nfunction registerSerializer(serializer) {\n  registeredSerializer = serializers_1.extendSerializer(registeredSerializer, serializer);\n}\n\nexports.registerSerializer = registerSerializer;\n\nfunction deserialize(message) {\n  return registeredSerializer.deserialize(message);\n}\n\nexports.deserialize = deserialize;\n\nfunction serialize(input) {\n  return registeredSerializer.serialize(input);\n}\n\nexports.serialize = serialize;","\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __exportStar = this && this.__exportStar || function (m, exports) {\n  for (var p in m) {\n    if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n  }\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Transfer = exports.DefaultSerializer = exports.expose = exports.registerSerializer = void 0;\n\nvar common_1 = require(\"./common\");\n\nObject.defineProperty(exports, \"registerSerializer\", {\n  enumerable: true,\n  get: function get() {\n    return common_1.registerSerializer;\n  }\n});\n\n__exportStar(require(\"./master/index\"), exports);\n\nvar index_1 = require(\"./worker/index\");\n\nObject.defineProperty(exports, \"expose\", {\n  enumerable: true,\n  get: function get() {\n    return index_1.expose;\n  }\n});\n\nvar serializers_1 = require(\"./serializers\");\n\nObject.defineProperty(exports, \"DefaultSerializer\", {\n  enumerable: true,\n  get: function get() {\n    return serializers_1.DefaultSerializer;\n  }\n});\n\nvar transferable_1 = require(\"./transferable\");\n\nObject.defineProperty(exports, \"Transfer\", {\n  enumerable: true,\n  get: function get() {\n    return transferable_1.Transfer;\n  }\n});","\"use strict\"; // Source: <https://github.com/parcel-bundler/parcel/blob/master/packages/core/parcel-bundler/src/builtins/bundle-url.js>\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getBundleURL = exports.getBaseURL = void 0;\nvar bundleURL;\n\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nexports.getBundleURL = getBundleURLCached;\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = (\"\" + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return \"/\";\n}\n\nfunction getBaseURL(url) {\n  return (\"\" + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBaseURL = getBaseURL;","\"use strict\"; // tslint:disable max-classes-per-file\n\nvar _inherits = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/inherits.js\");\n\nvar _possibleConstructorReturn = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n\nvar _getPrototypeOf = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n\nvar _wrapNativeSuper = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/wrapNativeSuper.js\");\n\nvar _createClass = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/createClass.js\");\n\nvar _classCallCheck = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/classCallCheck.js\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isWorkerRuntime = exports.getWorkerImplementation = exports.defaultPoolSize = void 0;\n\nvar get_bundle_url_browser_1 = require(\"./get-bundle-url.browser\");\n\nexports.defaultPoolSize = typeof navigator !== \"undefined\" && navigator.hardwareConcurrency ? navigator.hardwareConcurrency : 4;\n\nvar isAbsoluteURL = function isAbsoluteURL(value) {\n  return /^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.test(value);\n};\n\nfunction createSourceBlobURL(code) {\n  var blob = new Blob([code], {\n    type: \"application/javascript\"\n  });\n  return URL.createObjectURL(blob);\n}\n\nfunction selectWorkerImplementation() {\n  if (typeof Worker === \"undefined\") {\n    // Might happen on Safari, for instance\n    // The idea is to only fail if the constructor is actually used\n    return /*#__PURE__*/_createClass(function NoWebWorker() {\n      _classCallCheck(this, NoWebWorker);\n\n      throw Error(\"No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.\");\n    });\n  }\n\n  var WebWorker = /*#__PURE__*/function (_Worker) {\n    _inherits(WebWorker, _Worker);\n\n    var _super = _createSuper(WebWorker);\n\n    function WebWorker(url, options) {\n      _classCallCheck(this, WebWorker);\n\n      var _a, _b;\n\n      if (typeof url === \"string\" && options && options._baseURL) {\n        url = new URL(url, options._baseURL);\n      } else if (typeof url === \"string\" && !isAbsoluteURL(url) && get_bundle_url_browser_1.getBundleURL().match(/^file:\\/\\//i)) {\n        url = new URL(url, get_bundle_url_browser_1.getBundleURL().replace(/\\/[^\\/]+$/, \"/\"));\n\n        if ((_a = options === null || options === void 0 ? void 0 : options.CORSWorkaround) !== null && _a !== void 0 ? _a : true) {\n          url = createSourceBlobURL(\"importScripts(\".concat(JSON.stringify(url), \");\"));\n        }\n      }\n\n      if (typeof url === \"string\" && isAbsoluteURL(url)) {\n        // Create source code blob loading JS file via `importScripts()`\n        // to circumvent worker CORS restrictions\n        if ((_b = options === null || options === void 0 ? void 0 : options.CORSWorkaround) !== null && _b !== void 0 ? _b : true) {\n          url = createSourceBlobURL(\"importScripts(\".concat(JSON.stringify(url), \");\"));\n        }\n      }\n\n      return _super.call(this, url, options);\n    }\n\n    return _createClass(WebWorker);\n  }( /*#__PURE__*/_wrapNativeSuper(Worker));\n\n  var BlobWorker = /*#__PURE__*/function (_WebWorker) {\n    _inherits(BlobWorker, _WebWorker);\n\n    var _super2 = _createSuper(BlobWorker);\n\n    function BlobWorker(blob, options) {\n      _classCallCheck(this, BlobWorker);\n\n      var url = window.URL.createObjectURL(blob);\n      return _super2.call(this, url, options);\n    }\n\n    _createClass(BlobWorker, null, [{\n      key: \"fromText\",\n      value: function fromText(source, options) {\n        var blob = new window.Blob([source], {\n          type: \"text/javascript\"\n        });\n        return new BlobWorker(blob, options);\n      }\n    }]);\n\n    return BlobWorker;\n  }(WebWorker);\n\n  return {\n    blob: BlobWorker,\n    default: WebWorker\n  };\n}\n\nvar implementation;\n\nfunction getWorkerImplementation() {\n  if (!implementation) {\n    implementation = selectWorkerImplementation();\n  }\n\n  return implementation;\n}\n\nexports.getWorkerImplementation = getWorkerImplementation;\n\nfunction isWorkerRuntime() {\n  var isWindowContext = typeof self !== \"undefined\" && typeof Window !== \"undefined\" && self instanceof Window;\n  return typeof self !== \"undefined\" && self.postMessage && !isWindowContext ? true : false;\n}\n\nexports.isWorkerRuntime = isWorkerRuntime;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Worker = exports.BlobWorker = exports.isWorkerRuntime = exports.Thread = exports.spawn = exports.Pool = void 0;\n\nvar implementation_1 = require(\"./implementation\");\n\nObject.defineProperty(exports, \"isWorkerRuntime\", {\n  enumerable: true,\n  get: function get() {\n    return implementation_1.isWorkerRuntime;\n  }\n});\n\nvar pool_1 = require(\"./pool\");\n\nObject.defineProperty(exports, \"Pool\", {\n  enumerable: true,\n  get: function get() {\n    return pool_1.Pool;\n  }\n});\n\nvar spawn_1 = require(\"./spawn\");\n\nObject.defineProperty(exports, \"spawn\", {\n  enumerable: true,\n  get: function get() {\n    return spawn_1.spawn;\n  }\n});\n\nvar thread_1 = require(\"./thread\");\n\nObject.defineProperty(exports, \"Thread\", {\n  enumerable: true,\n  get: function get() {\n    return thread_1.Thread;\n  }\n});\n/** Separate class to spawn workers from source code blobs or strings. */\n\nexports.BlobWorker = implementation_1.getWorkerImplementation().blob;\n/** Worker implementation. Either web worker or a node.js Worker class. */\n\nexports.Worker = implementation_1.getWorkerImplementation().default;","\"use strict\";\n/*\n * This source file contains the code for proxying calls in the master thread to calls in the workers\n * by `.postMessage()`-ing.\n *\n * Keep in mind that this code can make or break the program's performance! Need to optimize more\n */\n\nvar _toConsumableArray = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createProxyModule = exports.createProxyFunction = void 0;\n\nvar debug_1 = __importDefault(require(\"debug\"));\n\nvar observable_fns_1 = require(\"observable-fns\");\n\nvar common_1 = require(\"../common\");\n\nvar observable_promise_1 = require(\"../observable-promise\");\n\nvar transferable_1 = require(\"../transferable\");\n\nvar messages_1 = require(\"../types/messages\");\n\nvar debugMessages = debug_1.default(\"threads:master:messages\");\nvar nextJobUID = 1;\n\nvar dedupe = function dedupe(array) {\n  return Array.from(new Set(array));\n};\n\nvar isJobErrorMessage = function isJobErrorMessage(data) {\n  return data && data.type === messages_1.WorkerMessageType.error;\n};\n\nvar isJobResultMessage = function isJobResultMessage(data) {\n  return data && data.type === messages_1.WorkerMessageType.result;\n};\n\nvar isJobStartMessage = function isJobStartMessage(data) {\n  return data && data.type === messages_1.WorkerMessageType.running;\n};\n\nfunction createObservableForJob(worker, jobUID) {\n  return new observable_fns_1.Observable(function (observer) {\n    var asyncType;\n\n    var messageHandler = function messageHandler(event) {\n      debugMessages(\"Message from worker:\", event.data);\n      if (!event.data || event.data.uid !== jobUID) return;\n\n      if (isJobStartMessage(event.data)) {\n        asyncType = event.data.resultType;\n      } else if (isJobResultMessage(event.data)) {\n        if (asyncType === \"promise\") {\n          if (typeof event.data.payload !== \"undefined\") {\n            observer.next(common_1.deserialize(event.data.payload));\n          }\n\n          observer.complete();\n          worker.removeEventListener(\"message\", messageHandler);\n        } else {\n          if (event.data.payload) {\n            observer.next(common_1.deserialize(event.data.payload));\n          }\n\n          if (event.data.complete) {\n            observer.complete();\n            worker.removeEventListener(\"message\", messageHandler);\n          }\n        }\n      } else if (isJobErrorMessage(event.data)) {\n        var error = common_1.deserialize(event.data.error);\n\n        if (asyncType === \"promise\" || !asyncType) {\n          observer.error(error);\n        } else {\n          observer.error(error);\n        }\n\n        worker.removeEventListener(\"message\", messageHandler);\n      }\n    };\n\n    worker.addEventListener(\"message\", messageHandler);\n    return function () {\n      if (asyncType === \"observable\" || !asyncType) {\n        var cancelMessage = {\n          type: messages_1.MasterMessageType.cancel,\n          uid: jobUID\n        };\n        worker.postMessage(cancelMessage);\n      }\n\n      worker.removeEventListener(\"message\", messageHandler);\n    };\n  });\n}\n\nfunction prepareArguments(rawArgs) {\n  if (rawArgs.length === 0) {\n    // Exit early if possible\n    return {\n      args: [],\n      transferables: []\n    };\n  }\n\n  var args = [];\n  var transferables = [];\n\n  var _iterator = _createForOfIteratorHelper(rawArgs),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var arg = _step.value;\n\n      if (transferable_1.isTransferDescriptor(arg)) {\n        args.push(common_1.serialize(arg.send));\n        transferables.push.apply(transferables, _toConsumableArray(arg.transferables));\n      } else {\n        args.push(common_1.serialize(arg));\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return {\n    args: args,\n    transferables: transferables.length === 0 ? transferables : dedupe(transferables)\n  };\n}\n\nfunction createProxyFunction(worker, method) {\n  return function () {\n    var uid = nextJobUID++;\n\n    for (var _len = arguments.length, rawArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n      rawArgs[_key] = arguments[_key];\n    }\n\n    var _prepareArguments = prepareArguments(rawArgs),\n        args = _prepareArguments.args,\n        transferables = _prepareArguments.transferables;\n\n    var runMessage = {\n      type: messages_1.MasterMessageType.run,\n      uid: uid,\n      method: method,\n      args: args\n    };\n    debugMessages(\"Sending command to run function to worker:\", runMessage);\n\n    try {\n      worker.postMessage(runMessage, transferables);\n    } catch (error) {\n      return observable_promise_1.ObservablePromise.from(Promise.reject(error));\n    }\n\n    return observable_promise_1.ObservablePromise.from(observable_fns_1.multicast(createObservableForJob(worker, uid)));\n  };\n}\n\nexports.createProxyFunction = createProxyFunction;\n\nfunction createProxyModule(worker, methodNames) {\n  var proxy = {};\n\n  var _iterator2 = _createForOfIteratorHelper(methodNames),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var methodName = _step2.value;\n      proxy[methodName] = createProxyFunction(worker, methodName);\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  return proxy;\n}\n\nexports.createProxyModule = createProxyModule;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PoolEventType = void 0;\n/** Pool event type. Specifies the type of each `PoolEvent`. */\n\nvar PoolEventType;\n\n(function (PoolEventType) {\n  PoolEventType[\"initialized\"] = \"initialized\";\n  PoolEventType[\"taskCanceled\"] = \"taskCanceled\";\n  PoolEventType[\"taskCompleted\"] = \"taskCompleted\";\n  PoolEventType[\"taskFailed\"] = \"taskFailed\";\n  PoolEventType[\"taskQueued\"] = \"taskQueued\";\n  PoolEventType[\"taskQueueDrained\"] = \"taskQueueDrained\";\n  PoolEventType[\"taskStart\"] = \"taskStart\";\n  PoolEventType[\"terminated\"] = \"terminated\";\n})(PoolEventType = exports.PoolEventType || (exports.PoolEventType = {}));","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\");\n\nvar _classCallCheck = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/classCallCheck.js\");\n\nvar _createClass = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/createClass.js\");\n\nvar _toConsumableArray = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Pool = exports.Thread = exports.PoolEventType = void 0;\n\nvar debug_1 = __importDefault(require(\"debug\"));\n\nvar observable_fns_1 = require(\"observable-fns\");\n\nvar ponyfills_1 = require(\"../ponyfills\");\n\nvar implementation_1 = require(\"./implementation\");\n\nvar pool_types_1 = require(\"./pool-types\");\n\nObject.defineProperty(exports, \"PoolEventType\", {\n  enumerable: true,\n  get: function get() {\n    return pool_types_1.PoolEventType;\n  }\n});\n\nvar thread_1 = require(\"./thread\");\n\nObject.defineProperty(exports, \"Thread\", {\n  enumerable: true,\n  get: function get() {\n    return thread_1.Thread;\n  }\n});\nvar nextPoolID = 1;\n\nfunction createArray(size) {\n  var array = [];\n\n  for (var index = 0; index < size; index++) {\n    array.push(index);\n  }\n\n  return array;\n}\n\nfunction delay(ms) {\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, ms);\n  });\n}\n\nfunction flatMap(array, mapper) {\n  return array.reduce(function (flattened, element) {\n    return [].concat(_toConsumableArray(flattened), _toConsumableArray(mapper(element)));\n  }, []);\n}\n\nfunction slugify(text) {\n  return text.replace(/\\W/g, \" \").trim().replace(/\\s+/g, \"-\");\n}\n\nfunction spawnWorkers(spawnWorker, count) {\n  return createArray(count).map(function () {\n    return {\n      init: spawnWorker(),\n      runningTasks: []\n    };\n  });\n}\n\nvar WorkerPool = /*#__PURE__*/function () {\n  function WorkerPool(spawnWorker, optionsOrSize) {\n    var _this = this;\n\n    _classCallCheck(this, WorkerPool);\n\n    this.eventSubject = new observable_fns_1.Subject();\n    this.initErrors = [];\n    this.isClosing = false;\n    this.nextTaskID = 1;\n    this.taskQueue = [];\n    var options = typeof optionsOrSize === \"number\" ? {\n      size: optionsOrSize\n    } : optionsOrSize || {};\n    var _options$size = options.size,\n        size = _options$size === void 0 ? implementation_1.defaultPoolSize : _options$size;\n    this.debug = debug_1.default(\"threads:pool:\".concat(slugify(options.name || String(nextPoolID++))));\n    this.options = options;\n    this.workers = spawnWorkers(spawnWorker, size);\n    this.eventObservable = observable_fns_1.multicast(observable_fns_1.Observable.from(this.eventSubject));\n    Promise.all(this.workers.map(function (worker) {\n      return worker.init;\n    })).then(function () {\n      return _this.eventSubject.next({\n        type: pool_types_1.PoolEventType.initialized,\n        size: _this.workers.length\n      });\n    }, function (error) {\n      _this.debug(\"Error while initializing pool worker:\", error);\n\n      _this.eventSubject.error(error);\n\n      _this.initErrors.push(error);\n    });\n  }\n\n  _createClass(WorkerPool, [{\n    key: \"findIdlingWorker\",\n    value: function findIdlingWorker() {\n      var _this$options$concurr = this.options.concurrency,\n          concurrency = _this$options$concurr === void 0 ? 1 : _this$options$concurr;\n      return this.workers.find(function (worker) {\n        return worker.runningTasks.length < concurrency;\n      });\n    }\n  }, {\n    key: \"runPoolTask\",\n    value: function runPoolTask(worker, task) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var workerID, returnValue;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                workerID = this.workers.indexOf(worker) + 1;\n                this.debug(\"Running task #\".concat(task.id, \" on worker #\").concat(workerID, \"...\"));\n                this.eventSubject.next({\n                  type: pool_types_1.PoolEventType.taskStart,\n                  taskID: task.id,\n                  workerID: workerID\n                });\n                _context.prev = 3;\n                _context.t0 = task;\n                _context.next = 7;\n                return worker.init;\n\n              case 7:\n                _context.t1 = _context.sent;\n                _context.next = 10;\n                return _context.t0.run.call(_context.t0, _context.t1);\n\n              case 10:\n                returnValue = _context.sent;\n                this.debug(\"Task #\".concat(task.id, \" completed successfully\"));\n                this.eventSubject.next({\n                  type: pool_types_1.PoolEventType.taskCompleted,\n                  returnValue: returnValue,\n                  taskID: task.id,\n                  workerID: workerID\n                });\n                _context.next = 19;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t2 = _context[\"catch\"](3);\n                this.debug(\"Task #\".concat(task.id, \" failed\"));\n                this.eventSubject.next({\n                  type: pool_types_1.PoolEventType.taskFailed,\n                  taskID: task.id,\n                  error: _context.t2,\n                  workerID: workerID\n                });\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[3, 15]]);\n      }));\n    }\n  }, {\n    key: \"run\",\n    value: function run(worker, task) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var _this2 = this;\n\n        var runPromise;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                runPromise = function () {\n                  return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                    var removeTaskFromWorkersRunningTasks;\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            removeTaskFromWorkersRunningTasks = function removeTaskFromWorkersRunningTasks() {\n                              worker.runningTasks = worker.runningTasks.filter(function (someRunPromise) {\n                                return someRunPromise !== runPromise;\n                              });\n                            }; // Defer task execution by one tick to give handlers time to subscribe\n\n\n                            _context2.next = 3;\n                            return delay(0);\n\n                          case 3:\n                            _context2.prev = 3;\n                            _context2.next = 6;\n                            return this.runPoolTask(worker, task);\n\n                          case 6:\n                            _context2.prev = 6;\n                            removeTaskFromWorkersRunningTasks();\n\n                            if (!this.isClosing) {\n                              this.scheduleWork();\n                            }\n\n                            return _context2.finish(6);\n\n                          case 10:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2, this, [[3,, 6, 10]]);\n                  }));\n                }();\n\n                worker.runningTasks.push(runPromise);\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n    }\n  }, {\n    key: \"scheduleWork\",\n    value: function scheduleWork() {\n      this.debug(\"Attempt de-queueing a task in order to run it...\");\n      var availableWorker = this.findIdlingWorker();\n      if (!availableWorker) return;\n      var nextTask = this.taskQueue.shift();\n\n      if (!nextTask) {\n        this.debug(\"Task queue is empty\");\n        this.eventSubject.next({\n          type: pool_types_1.PoolEventType.taskQueueDrained\n        });\n        return;\n      }\n\n      this.run(availableWorker, nextTask);\n    }\n  }, {\n    key: \"taskCompletion\",\n    value: function taskCompletion(taskID) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        var eventSubscription = _this3.events().subscribe(function (event) {\n          if (event.type === pool_types_1.PoolEventType.taskCompleted && event.taskID === taskID) {\n            eventSubscription.unsubscribe();\n            resolve(event.returnValue);\n          } else if (event.type === pool_types_1.PoolEventType.taskFailed && event.taskID === taskID) {\n            eventSubscription.unsubscribe();\n            reject(event.error);\n          } else if (event.type === pool_types_1.PoolEventType.terminated) {\n            eventSubscription.unsubscribe();\n            reject(Error(\"Pool has been terminated before task was run.\"));\n          }\n        });\n      });\n    }\n  }, {\n    key: \"settled\",\n    value: function settled() {\n      var allowResolvingImmediately = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var _this4 = this;\n\n        var getCurrentlyRunningTasks, taskFailures, failureSubscription;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                getCurrentlyRunningTasks = function getCurrentlyRunningTasks() {\n                  return flatMap(_this4.workers, function (worker) {\n                    return worker.runningTasks;\n                  });\n                };\n\n                taskFailures = [];\n                failureSubscription = this.eventObservable.subscribe(function (event) {\n                  if (event.type === pool_types_1.PoolEventType.taskFailed) {\n                    taskFailures.push(event.error);\n                  }\n                });\n\n                if (!(this.initErrors.length > 0)) {\n                  _context4.next = 5;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", Promise.reject(this.initErrors[0]));\n\n              case 5:\n                if (!(allowResolvingImmediately && this.taskQueue.length === 0)) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                _context4.next = 8;\n                return ponyfills_1.allSettled(getCurrentlyRunningTasks());\n\n              case 8:\n                return _context4.abrupt(\"return\", taskFailures);\n\n              case 9:\n                _context4.next = 11;\n                return new Promise(function (resolve, reject) {\n                  var subscription = _this4.eventObservable.subscribe({\n                    next: function next(event) {\n                      if (event.type === pool_types_1.PoolEventType.taskQueueDrained) {\n                        subscription.unsubscribe();\n                        resolve(void 0);\n                      }\n                    },\n                    error: reject // make a pool-wide error reject the completed() result promise\n\n                  });\n                });\n\n              case 11:\n                _context4.next = 13;\n                return ponyfills_1.allSettled(getCurrentlyRunningTasks());\n\n              case 13:\n                failureSubscription.unsubscribe();\n                return _context4.abrupt(\"return\", taskFailures);\n\n              case 15:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n    }\n  }, {\n    key: \"completed\",\n    value: function completed() {\n      var allowResolvingImmediately = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var _this5 = this;\n\n        var settlementPromise, earlyExitPromise, errors;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                settlementPromise = this.settled(allowResolvingImmediately);\n                earlyExitPromise = new Promise(function (resolve, reject) {\n                  var subscription = _this5.eventObservable.subscribe({\n                    next: function next(event) {\n                      if (event.type === pool_types_1.PoolEventType.taskQueueDrained) {\n                        subscription.unsubscribe();\n                        resolve(settlementPromise);\n                      } else if (event.type === pool_types_1.PoolEventType.taskFailed) {\n                        subscription.unsubscribe();\n                        reject(event.error);\n                      }\n                    },\n                    error: reject // make a pool-wide error reject the completed() result promise\n\n                  });\n                });\n                _context5.next = 4;\n                return Promise.race([settlementPromise, earlyExitPromise]);\n\n              case 4:\n                errors = _context5.sent;\n\n                if (!(errors.length > 0)) {\n                  _context5.next = 7;\n                  break;\n                }\n\n                throw errors[0];\n\n              case 7:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n    }\n  }, {\n    key: \"events\",\n    value: function events() {\n      return this.eventObservable;\n    }\n  }, {\n    key: \"queue\",\n    value: function queue(taskFunction) {\n      var _this6 = this;\n\n      var _this$options$maxQueu = this.options.maxQueuedJobs,\n          maxQueuedJobs = _this$options$maxQueu === void 0 ? Infinity : _this$options$maxQueu;\n\n      if (this.isClosing) {\n        throw Error(\"Cannot schedule pool tasks after terminate() has been called.\");\n      }\n\n      if (this.initErrors.length > 0) {\n        throw this.initErrors[0];\n      }\n\n      var taskID = this.nextTaskID++;\n      var taskCompletion = this.taskCompletion(taskID);\n      taskCompletion.catch(function (error) {\n        // Prevent unhandled rejections here as we assume the user will use\n        // `pool.completed()`, `pool.settled()` or `task.catch()` to handle errors\n        _this6.debug(\"Task #\".concat(taskID, \" errored:\"), error);\n      });\n      var task = {\n        id: taskID,\n        run: taskFunction,\n        cancel: function cancel() {\n          if (_this6.taskQueue.indexOf(task) === -1) return;\n          _this6.taskQueue = _this6.taskQueue.filter(function (someTask) {\n            return someTask !== task;\n          });\n\n          _this6.eventSubject.next({\n            type: pool_types_1.PoolEventType.taskCanceled,\n            taskID: task.id\n          });\n        },\n        then: taskCompletion.then.bind(taskCompletion)\n      };\n\n      if (this.taskQueue.length >= maxQueuedJobs) {\n        throw Error(\"Maximum number of pool tasks queued. Refusing to queue another one.\\n\" + \"This usually happens for one of two reasons: We are either at peak \" + \"workload right now or some tasks just won't finish, thus blocking the pool.\");\n      }\n\n      this.debug(\"Queueing task #\".concat(task.id, \"...\"));\n      this.taskQueue.push(task);\n      this.eventSubject.next({\n        type: pool_types_1.PoolEventType.taskQueued,\n        taskID: task.id\n      });\n      this.scheduleWork();\n      return task;\n    }\n  }, {\n    key: \"terminate\",\n    value: function terminate(force) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n        var _this7 = this;\n\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                this.isClosing = true;\n\n                if (force) {\n                  _context7.next = 4;\n                  break;\n                }\n\n                _context7.next = 4;\n                return this.completed(true);\n\n              case 4:\n                this.eventSubject.next({\n                  type: pool_types_1.PoolEventType.terminated,\n                  remainingQueue: _toConsumableArray(this.taskQueue)\n                });\n                this.eventSubject.complete();\n                _context7.next = 8;\n                return Promise.all(this.workers.map(function (worker) {\n                  return __awaiter(_this7, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n                    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n                      while (1) {\n                        switch (_context6.prev = _context6.next) {\n                          case 0:\n                            _context6.t0 = thread_1.Thread;\n                            _context6.next = 3;\n                            return worker.init;\n\n                          case 3:\n                            _context6.t1 = _context6.sent;\n                            return _context6.abrupt(\"return\", _context6.t0.terminate.call(_context6.t0, _context6.t1));\n\n                          case 5:\n                          case \"end\":\n                            return _context6.stop();\n                        }\n                      }\n                    }, _callee6);\n                  }));\n                }));\n\n              case 8:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n    }\n  }]);\n\n  return WorkerPool;\n}();\n\nWorkerPool.EventType = pool_types_1.PoolEventType;\n/**\n * Thread pool constructor. Creates a new pool and spawns its worker threads.\n */\n\nfunction PoolConstructor(spawnWorker, optionsOrSize) {\n  // The function exists only so we don't need to use `new` to create a pool (we still can, though).\n  // If the Pool is a class or not is an implementation detail that should not concern the user.\n  return new WorkerPool(spawnWorker, optionsOrSize);\n}\n\nPoolConstructor.EventType = pool_types_1.PoolEventType;\n/**\n * Thread pool constructor. Creates a new pool and spawns its worker threads.\n */\n\nexports.Pool = PoolConstructor;","\"use strict\";\n\nvar _defineProperty = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/defineProperty.js\");\n\nvar _slicedToArray = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/slicedToArray.js\");\n\nvar _regeneratorRuntime = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.spawn = void 0;\n\nvar debug_1 = __importDefault(require(\"debug\"));\n\nvar observable_fns_1 = require(\"observable-fns\");\n\nvar common_1 = require(\"../common\");\n\nvar promise_1 = require(\"../promise\");\n\nvar symbols_1 = require(\"../symbols\");\n\nvar master_1 = require(\"../types/master\");\n\nvar invocation_proxy_1 = require(\"./invocation-proxy\");\n\nvar debugMessages = debug_1.default(\"threads:master:messages\");\nvar debugSpawn = debug_1.default(\"threads:master:spawn\");\nvar debugThreadUtils = debug_1.default(\"threads:master:thread-utils\");\n\nvar isInitMessage = function isInitMessage(data) {\n  return data && data.type === \"init\";\n};\n\nvar isUncaughtErrorMessage = function isUncaughtErrorMessage(data) {\n  return data && data.type === \"uncaughtError\";\n};\n\nvar initMessageTimeout = typeof process !== \"undefined\" && process.env.THREADS_WORKER_INIT_TIMEOUT ? Number.parseInt(process.env.THREADS_WORKER_INIT_TIMEOUT, 10) : 10000;\n\nfunction withTimeout(promise, timeoutInMs, errorMessage) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var timeoutHandle, timeout, result;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            timeout = new Promise(function (resolve, reject) {\n              timeoutHandle = setTimeout(function () {\n                return reject(Error(errorMessage));\n              }, timeoutInMs);\n            });\n            _context.next = 3;\n            return Promise.race([promise, timeout]);\n\n          case 3:\n            result = _context.sent;\n            clearTimeout(timeoutHandle);\n            return _context.abrupt(\"return\", result);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\n\nfunction receiveInitMessage(worker) {\n  return new Promise(function (resolve, reject) {\n    var messageHandler = function messageHandler(event) {\n      debugMessages(\"Message from worker before finishing initialization:\", event.data);\n\n      if (isInitMessage(event.data)) {\n        worker.removeEventListener(\"message\", messageHandler);\n        resolve(event.data);\n      } else if (isUncaughtErrorMessage(event.data)) {\n        worker.removeEventListener(\"message\", messageHandler);\n        reject(common_1.deserialize(event.data.error));\n      }\n    };\n\n    worker.addEventListener(\"message\", messageHandler);\n  });\n}\n\nfunction createEventObservable(worker, workerTermination) {\n  return new observable_fns_1.Observable(function (observer) {\n    var messageHandler = function messageHandler(messageEvent) {\n      var workerEvent = {\n        type: master_1.WorkerEventType.message,\n        data: messageEvent.data\n      };\n      observer.next(workerEvent);\n    };\n\n    var rejectionHandler = function rejectionHandler(errorEvent) {\n      debugThreadUtils(\"Unhandled promise rejection event in thread:\", errorEvent);\n      var workerEvent = {\n        type: master_1.WorkerEventType.internalError,\n        error: Error(errorEvent.reason)\n      };\n      observer.next(workerEvent);\n    };\n\n    worker.addEventListener(\"message\", messageHandler);\n    worker.addEventListener(\"unhandledrejection\", rejectionHandler);\n    workerTermination.then(function () {\n      var terminationEvent = {\n        type: master_1.WorkerEventType.termination\n      };\n      worker.removeEventListener(\"message\", messageHandler);\n      worker.removeEventListener(\"unhandledrejection\", rejectionHandler);\n      observer.next(terminationEvent);\n      observer.complete();\n    });\n  });\n}\n\nfunction createTerminator(worker) {\n  var _this = this;\n\n  var _promise_1$createProm = promise_1.createPromiseWithResolver(),\n      _promise_1$createProm2 = _slicedToArray(_promise_1$createProm, 2),\n      termination = _promise_1$createProm2[0],\n      resolver = _promise_1$createProm2[1];\n\n  var terminate = function terminate() {\n    return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              debugThreadUtils(\"Terminating worker\"); // Newer versions of worker_threads workers return a promise\n\n              _context2.next = 3;\n              return worker.terminate();\n\n            case 3:\n              resolver();\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n  };\n\n  return {\n    terminate: terminate,\n    termination: termination\n  };\n}\n\nfunction setPrivateThreadProps(raw, worker, workerEvents, terminate) {\n  var _Object$assign;\n\n  var workerErrors = workerEvents.filter(function (event) {\n    return event.type === master_1.WorkerEventType.internalError;\n  }).map(function (errorEvent) {\n    return errorEvent.error;\n  }); // tslint:disable-next-line prefer-object-spread\n\n  return Object.assign(raw, (_Object$assign = {}, _defineProperty(_Object$assign, symbols_1.$errors, workerErrors), _defineProperty(_Object$assign, symbols_1.$events, workerEvents), _defineProperty(_Object$assign, symbols_1.$terminate, terminate), _defineProperty(_Object$assign, symbols_1.$worker, worker), _Object$assign));\n}\n/**\n * Spawn a new thread. Takes a fresh worker instance, wraps it in a thin\n * abstraction layer to provide the transparent API and verifies that\n * the worker has initialized successfully.\n *\n * @param worker Instance of `Worker`. Either a web worker, `worker_threads` worker or `tiny-worker` worker.\n * @param [options]\n * @param [options.timeout] Init message timeout. Default: 10000 or set by environment variable.\n */\n\n\nfunction spawn(worker, options) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var timeout, initMessage, exposed, _createTerminator, termination, terminate, events, proxy, _proxy, type;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            debugSpawn(\"Initializing new thread\");\n            timeout = options && options.timeout ? options.timeout : initMessageTimeout;\n            _context3.next = 4;\n            return withTimeout(receiveInitMessage(worker), timeout, \"Timeout: Did not receive an init message from worker after \".concat(timeout, \"ms. Make sure the worker calls expose().\"));\n\n          case 4:\n            initMessage = _context3.sent;\n            exposed = initMessage.exposed;\n            _createTerminator = createTerminator(worker), termination = _createTerminator.termination, terminate = _createTerminator.terminate;\n            events = createEventObservable(worker, termination);\n\n            if (!(exposed.type === \"function\")) {\n              _context3.next = 13;\n              break;\n            }\n\n            proxy = invocation_proxy_1.createProxyFunction(worker);\n            return _context3.abrupt(\"return\", setPrivateThreadProps(proxy, worker, events, terminate));\n\n          case 13:\n            if (!(exposed.type === \"module\")) {\n              _context3.next = 18;\n              break;\n            }\n\n            _proxy = invocation_proxy_1.createProxyModule(worker, exposed.methods);\n            return _context3.abrupt(\"return\", setPrivateThreadProps(_proxy, worker, events, terminate));\n\n          case 18:\n            type = exposed.type;\n            throw Error(\"Worker init message states unexpected type of expose(): \".concat(type));\n\n          case 20:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n}\n\nexports.spawn = spawn;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Thread = void 0;\n\nvar symbols_1 = require(\"../symbols\");\n\nfunction fail(message) {\n  throw Error(message);\n}\n/** Thread utility functions. Use them to manage or inspect a `spawn()`-ed thread. */\n\n\nexports.Thread = {\n  /** Return an observable that can be used to subscribe to all errors happening in the thread. */\n  errors: function errors(thread) {\n    return thread[symbols_1.$errors] || fail(\"Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.\");\n  },\n\n  /** Return an observable that can be used to subscribe to internal events happening in the thread. Useful for debugging. */\n  events: function events(thread) {\n    return thread[symbols_1.$events] || fail(\"Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.\");\n  },\n\n  /** Terminate a thread. Remember to terminate every thread when you are done using it. */\n  terminate: function terminate(thread) {\n    return thread[symbols_1.$terminate]();\n  }\n};","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/classCallCheck.js\");\n\nvar _createClass = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/createClass.js\");\n\nvar _assertThisInitialized = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n\nvar _get = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/get.js\");\n\nvar _inherits = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/inherits.js\");\n\nvar _possibleConstructorReturn = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n\nvar _getPrototypeOf = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ObservablePromise = void 0;\n\nvar observable_fns_1 = require(\"observable-fns\");\n\nvar doNothing = function doNothing() {\n  return undefined;\n};\n\nvar returnInput = function returnInput(input) {\n  return input;\n};\n\nvar runDeferred = function runDeferred(fn) {\n  return Promise.resolve().then(fn);\n};\n\nfunction fail(error) {\n  throw error;\n}\n\nfunction isThenable(thing) {\n  return thing && typeof thing.then === \"function\";\n}\n/**\n * Creates a hybrid, combining the APIs of an Observable and a Promise.\n *\n * It is used to proxy async process states when we are initially not sure\n * if that async process will yield values once (-> Promise) or multiple\n * times (-> Observable).\n *\n * Note that the observable promise inherits some of the observable's characteristics:\n * The `init` function will be called *once for every time anyone subscribes to it*.\n *\n * If this is undesired, derive a hot observable from it using `makeHot()` and\n * subscribe to that.\n */\n\n\nvar ObservablePromise = /*#__PURE__*/function (_observable_fns_1$Obs) {\n  _inherits(ObservablePromise, _observable_fns_1$Obs);\n\n  var _super = _createSuper(ObservablePromise);\n\n  function ObservablePromise(init) {\n    var _this;\n\n    _classCallCheck(this, ObservablePromise);\n\n    _this = _super.call(this, function (originalObserver) {\n      // tslint:disable-next-line no-this-assignment\n      var self = _assertThisInitialized(_this);\n\n      var observer = Object.assign(Object.assign({}, originalObserver), {\n        complete: function complete() {\n          originalObserver.complete();\n          self.onCompletion();\n        },\n        error: function error(_error) {\n          originalObserver.error(_error);\n          self.onError(_error);\n        },\n        next: function next(value) {\n          originalObserver.next(value);\n          self.onNext(value);\n        }\n      });\n\n      try {\n        _this.initHasRun = true;\n        return init(observer);\n      } catch (error) {\n        observer.error(error);\n      }\n    });\n    _this.initHasRun = false;\n    _this.fulfillmentCallbacks = [];\n    _this.rejectionCallbacks = [];\n    _this.firstValueSet = false;\n    _this.state = \"pending\";\n    return _this;\n  }\n\n  _createClass(ObservablePromise, [{\n    key: \"onNext\",\n    value: function onNext(value) {\n      if (!this.firstValueSet) {\n        this.firstValue = value;\n        this.firstValueSet = true;\n      }\n    }\n  }, {\n    key: \"onError\",\n    value: function onError(error) {\n      this.state = \"rejected\";\n      this.rejection = error;\n\n      var _iterator = _createForOfIteratorHelper(this.rejectionCallbacks),\n          _step;\n\n      try {\n        var _loop = function _loop() {\n          var onRejected = _step.value;\n          // Promisifying the call to turn errors into unhandled promise rejections\n          // instead of them failing sync and cancelling the iteration\n          runDeferred(function () {\n            return onRejected(error);\n          });\n        };\n\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"onCompletion\",\n    value: function onCompletion() {\n      var _this2 = this;\n\n      this.state = \"fulfilled\";\n\n      var _iterator2 = _createForOfIteratorHelper(this.fulfillmentCallbacks),\n          _step2;\n\n      try {\n        var _loop2 = function _loop2() {\n          var onFulfilled = _step2.value;\n          // Promisifying the call to turn errors into unhandled promise rejections\n          // instead of them failing sync and cancelling the iteration\n          runDeferred(function () {\n            return onFulfilled(_this2.firstValue);\n          });\n        };\n\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          _loop2();\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"then\",\n    value: function then(onFulfilledRaw, onRejectedRaw) {\n      var _this3 = this;\n\n      var onFulfilled = onFulfilledRaw || returnInput;\n      var onRejected = onRejectedRaw || fail;\n      var onRejectedCalled = false;\n      return new Promise(function (resolve, reject) {\n        var rejectionCallback = function rejectionCallback(error) {\n          if (onRejectedCalled) return;\n          onRejectedCalled = true;\n\n          try {\n            resolve(onRejected(error));\n          } catch (anotherError) {\n            reject(anotherError);\n          }\n        };\n\n        var fulfillmentCallback = function fulfillmentCallback(value) {\n          try {\n            resolve(onFulfilled(value));\n          } catch (error) {\n            rejectionCallback(error);\n          }\n        };\n\n        if (!_this3.initHasRun) {\n          _this3.subscribe({\n            error: rejectionCallback\n          });\n        }\n\n        if (_this3.state === \"fulfilled\") {\n          return resolve(onFulfilled(_this3.firstValue));\n        }\n\n        if (_this3.state === \"rejected\") {\n          onRejectedCalled = true;\n          return resolve(onRejected(_this3.rejection));\n        }\n\n        _this3.fulfillmentCallbacks.push(fulfillmentCallback);\n\n        _this3.rejectionCallbacks.push(rejectionCallback);\n      });\n    }\n  }, {\n    key: \"catch\",\n    value: function _catch(onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  }, {\n    key: \"finally\",\n    value: function _finally(onCompleted) {\n      var handler = onCompleted || doNothing;\n      return this.then(function (value) {\n        handler();\n        return value;\n      }, function () {\n        return handler();\n      });\n    }\n  }], [{\n    key: \"from\",\n    value: function from(thing) {\n      if (isThenable(thing)) {\n        return new ObservablePromise(function (observer) {\n          var onFulfilled = function onFulfilled(value) {\n            observer.next(value);\n            observer.complete();\n          };\n\n          var onRejected = function onRejected(error) {\n            observer.error(error);\n          };\n\n          thing.then(onFulfilled, onRejected);\n        });\n      } else {\n        return _get(_getPrototypeOf(ObservablePromise), \"from\", this).call(this, thing);\n      }\n    }\n  }]);\n\n  return ObservablePromise;\n}(observable_fns_1.Observable);\n\nexports.ObservablePromise = ObservablePromise;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.allSettled = void 0; // Based on <https://github.com/es-shims/Promise.allSettled/blob/master/implementation.js>\n\nfunction allSettled(values) {\n  return Promise.all(values.map(function (item) {\n    var onFulfill = function onFulfill(value) {\n      return {\n        status: 'fulfilled',\n        value: value\n      };\n    };\n\n    var onReject = function onReject(reason) {\n      return {\n        status: 'rejected',\n        reason: reason\n      };\n    };\n\n    var itemPromise = Promise.resolve(item);\n\n    try {\n      return itemPromise.then(onFulfill, onReject);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n  }));\n}\n\nexports.allSettled = allSettled;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createPromiseWithResolver = void 0;\n\nvar doNothing = function doNothing() {\n  return undefined;\n};\n/**\n * Creates a new promise and exposes its resolver function.\n * Use with care!\n */\n\n\nfunction createPromiseWithResolver() {\n  var alreadyResolved = false;\n  var resolvedTo;\n  var resolver = doNothing;\n  var promise = new Promise(function (resolve) {\n    if (alreadyResolved) {\n      resolve(resolvedTo);\n    } else {\n      resolver = resolve;\n    }\n  });\n\n  var exposedResolver = function exposedResolver(value) {\n    alreadyResolved = true;\n    resolvedTo = value;\n    resolver(resolvedTo);\n  };\n\n  return [promise, exposedResolver];\n}\n\nexports.createPromiseWithResolver = createPromiseWithResolver;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DefaultSerializer = exports.extendSerializer = void 0;\n\nfunction extendSerializer(extend, implementation) {\n  var fallbackDeserializer = extend.deserialize.bind(extend);\n  var fallbackSerializer = extend.serialize.bind(extend);\n  return {\n    deserialize: function deserialize(message) {\n      return implementation.deserialize(message, fallbackDeserializer);\n    },\n    serialize: function serialize(input) {\n      return implementation.serialize(input, fallbackSerializer);\n    }\n  };\n}\n\nexports.extendSerializer = extendSerializer;\nvar DefaultErrorSerializer = {\n  deserialize: function deserialize(message) {\n    return Object.assign(Error(message.message), {\n      name: message.name,\n      stack: message.stack\n    });\n  },\n  serialize: function serialize(error) {\n    return {\n      __error_marker: \"$$error\",\n      message: error.message,\n      name: error.name,\n      stack: error.stack\n    };\n  }\n};\n\nvar isSerializedError = function isSerializedError(thing) {\n  return thing && typeof thing === \"object\" && \"__error_marker\" in thing && thing.__error_marker === \"$$error\";\n};\n\nexports.DefaultSerializer = {\n  deserialize: function deserialize(message) {\n    if (isSerializedError(message)) {\n      return DefaultErrorSerializer.deserialize(message);\n    } else {\n      return message;\n    }\n  },\n  serialize: function serialize(input) {\n    if (input instanceof Error) {\n      return DefaultErrorSerializer.serialize(input);\n    } else {\n      return input;\n    }\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.$worker = exports.$transferable = exports.$terminate = exports.$events = exports.$errors = void 0;\nexports.$errors = Symbol(\"thread.errors\");\nexports.$events = Symbol(\"thread.events\");\nexports.$terminate = Symbol(\"thread.terminate\");\nexports.$transferable = Symbol(\"thread.transferable\");\nexports.$worker = Symbol(\"thread.worker\");","\"use strict\";\n\nvar _defineProperty = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/defineProperty.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Transfer = exports.isTransferDescriptor = void 0;\n\nvar symbols_1 = require(\"./symbols\");\n\nfunction isTransferable(thing) {\n  if (!thing || typeof thing !== \"object\") return false; // Don't check too thoroughly, since the list of transferable things in JS might grow over time\n\n  return true;\n}\n\nfunction isTransferDescriptor(thing) {\n  return thing && typeof thing === \"object\" && thing[symbols_1.$transferable];\n}\n\nexports.isTransferDescriptor = isTransferDescriptor;\n\nfunction Transfer(payload, transferables) {\n  var _ref;\n\n  if (!transferables) {\n    if (!isTransferable(payload)) throw Error();\n    transferables = [payload];\n  }\n\n  return _ref = {}, _defineProperty(_ref, symbols_1.$transferable, true), _defineProperty(_ref, \"send\", payload), _defineProperty(_ref, \"transferables\", transferables), _ref;\n}\n\nexports.Transfer = Transfer;","\"use strict\"; /// <reference lib=\"dom\" />\n// tslint:disable max-classes-per-file\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WorkerEventType = void 0;\n\nvar symbols_1 = require(\"../symbols\");\n/** Event as emitted by worker thread. Subscribe to using `Thread.events(thread)`. */\n\n\nvar WorkerEventType;\n\n(function (WorkerEventType) {\n  WorkerEventType[\"internalError\"] = \"internalError\";\n  WorkerEventType[\"message\"] = \"message\";\n  WorkerEventType[\"termination\"] = \"termination\";\n})(WorkerEventType = exports.WorkerEventType || (exports.WorkerEventType = {}));","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WorkerMessageType = exports.MasterMessageType = void 0; /////////////////////////////\n// Messages sent by master:\n\nvar MasterMessageType;\n\n(function (MasterMessageType) {\n  MasterMessageType[\"cancel\"] = \"cancel\";\n  MasterMessageType[\"run\"] = \"run\";\n})(MasterMessageType = exports.MasterMessageType || (exports.MasterMessageType = {})); ////////////////////////////\n// Messages sent by worker:\n\n\nvar WorkerMessageType;\n\n(function (WorkerMessageType) {\n  WorkerMessageType[\"error\"] = \"error\";\n  WorkerMessageType[\"init\"] = \"init\";\n  WorkerMessageType[\"result\"] = \"result\";\n  WorkerMessageType[\"running\"] = \"running\";\n  WorkerMessageType[\"uncaughtError\"] = \"uncaughtError\";\n})(WorkerMessageType = exports.WorkerMessageType || (exports.WorkerMessageType = {}));","\"use strict\"; /// <reference lib=\"dom\" />\n// tslint:disable no-shadowed-variable\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar isWorkerRuntime = function isWorkerRuntime() {\n  var isWindowContext = typeof self !== \"undefined\" && typeof Window !== \"undefined\" && self instanceof Window;\n  return typeof self !== \"undefined\" && self.postMessage && !isWindowContext ? true : false;\n};\n\nvar postMessageToMaster = function postMessageToMaster(data, transferList) {\n  self.postMessage(data, transferList);\n};\n\nvar subscribeToMasterMessages = function subscribeToMasterMessages(onMessage) {\n  var messageHandler = function messageHandler(messageEvent) {\n    onMessage(messageEvent.data);\n  };\n\n  var unsubscribe = function unsubscribe() {\n    self.removeEventListener(\"message\", messageHandler);\n  };\n\n  self.addEventListener(\"message\", messageHandler);\n  return unsubscribe;\n};\n\nexports.default = {\n  isWorkerRuntime: isWorkerRuntime,\n  postMessageToMaster: postMessageToMaster,\n  subscribeToMasterMessages: subscribeToMasterMessages\n};","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/regenerator/index.js\");\n\nvar _toConsumableArray = require(\"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.expose = exports.isWorkerRuntime = exports.Transfer = exports.registerSerializer = void 0;\n\nvar is_observable_1 = __importDefault(require(\"is-observable\"));\n\nvar common_1 = require(\"../common\");\n\nvar transferable_1 = require(\"../transferable\");\n\nvar messages_1 = require(\"../types/messages\");\n\nvar implementation_1 = __importDefault(require(\"./implementation\"));\n\nvar common_2 = require(\"../common\");\n\nObject.defineProperty(exports, \"registerSerializer\", {\n  enumerable: true,\n  get: function get() {\n    return common_2.registerSerializer;\n  }\n});\n\nvar transferable_2 = require(\"../transferable\");\n\nObject.defineProperty(exports, \"Transfer\", {\n  enumerable: true,\n  get: function get() {\n    return transferable_2.Transfer;\n  }\n});\n/** Returns `true` if this code is currently running in a worker. */\n\nexports.isWorkerRuntime = implementation_1.default.isWorkerRuntime;\nvar exposeCalled = false;\nvar activeSubscriptions = new Map();\n\nvar isMasterJobCancelMessage = function isMasterJobCancelMessage(thing) {\n  return thing && thing.type === messages_1.MasterMessageType.cancel;\n};\n\nvar isMasterJobRunMessage = function isMasterJobRunMessage(thing) {\n  return thing && thing.type === messages_1.MasterMessageType.run;\n};\n/**\n * There are issues with `is-observable` not recognizing zen-observable's instances.\n * We are using `observable-fns`, but it's based on zen-observable, too.\n */\n\n\nvar isObservable = function isObservable(thing) {\n  return is_observable_1.default(thing) || isZenObservable(thing);\n};\n\nfunction isZenObservable(thing) {\n  return thing && typeof thing === \"object\" && typeof thing.subscribe === \"function\";\n}\n\nfunction deconstructTransfer(thing) {\n  return transferable_1.isTransferDescriptor(thing) ? {\n    payload: thing.send,\n    transferables: thing.transferables\n  } : {\n    payload: thing,\n    transferables: undefined\n  };\n}\n\nfunction postFunctionInitMessage() {\n  var initMessage = {\n    type: messages_1.WorkerMessageType.init,\n    exposed: {\n      type: \"function\"\n    }\n  };\n  implementation_1.default.postMessageToMaster(initMessage);\n}\n\nfunction postModuleInitMessage(methodNames) {\n  var initMessage = {\n    type: messages_1.WorkerMessageType.init,\n    exposed: {\n      type: \"module\",\n      methods: methodNames\n    }\n  };\n  implementation_1.default.postMessageToMaster(initMessage);\n}\n\nfunction postJobErrorMessage(uid, rawError) {\n  var _deconstructTransfer = deconstructTransfer(rawError),\n      error = _deconstructTransfer.payload,\n      transferables = _deconstructTransfer.transferables;\n\n  var errorMessage = {\n    type: messages_1.WorkerMessageType.error,\n    uid: uid,\n    error: common_1.serialize(error)\n  };\n  implementation_1.default.postMessageToMaster(errorMessage, transferables);\n}\n\nfunction postJobResultMessage(uid, completed, resultValue) {\n  var _deconstructTransfer2 = deconstructTransfer(resultValue),\n      payload = _deconstructTransfer2.payload,\n      transferables = _deconstructTransfer2.transferables;\n\n  var resultMessage = {\n    type: messages_1.WorkerMessageType.result,\n    uid: uid,\n    complete: completed ? true : undefined,\n    payload: payload\n  };\n  implementation_1.default.postMessageToMaster(resultMessage, transferables);\n}\n\nfunction postJobStartMessage(uid, resultType) {\n  var startMessage = {\n    type: messages_1.WorkerMessageType.running,\n    uid: uid,\n    resultType: resultType\n  };\n  implementation_1.default.postMessageToMaster(startMessage);\n}\n\nfunction postUncaughtErrorMessage(error) {\n  try {\n    var errorMessage = {\n      type: messages_1.WorkerMessageType.uncaughtError,\n      error: common_1.serialize(error)\n    };\n    implementation_1.default.postMessageToMaster(errorMessage);\n  } catch (subError) {\n    // tslint:disable-next-line no-console\n    console.error(\"Not reporting uncaught error back to master thread as it \" + \"occured while reporting an uncaught error already.\" + \"\\nLatest error:\", subError, \"\\nOriginal error:\", error);\n  }\n}\n\nfunction runFunction(jobUID, fn, args) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var syncResult, resultType, subscription, result;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            syncResult = fn.apply(void 0, _toConsumableArray(args));\n            _context.next = 7;\n            break;\n\n          case 4:\n            _context.prev = 4;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", postJobErrorMessage(jobUID, _context.t0));\n\n          case 7:\n            resultType = isObservable(syncResult) ? \"observable\" : \"promise\";\n            postJobStartMessage(jobUID, resultType);\n\n            if (!isObservable(syncResult)) {\n              _context.next = 14;\n              break;\n            }\n\n            subscription = syncResult.subscribe(function (value) {\n              return postJobResultMessage(jobUID, false, common_1.serialize(value));\n            }, function (error) {\n              postJobErrorMessage(jobUID, common_1.serialize(error));\n              activeSubscriptions.delete(jobUID);\n            }, function () {\n              postJobResultMessage(jobUID, true);\n              activeSubscriptions.delete(jobUID);\n            });\n            activeSubscriptions.set(jobUID, subscription);\n            _context.next = 24;\n            break;\n\n          case 14:\n            _context.prev = 14;\n            _context.next = 17;\n            return syncResult;\n\n          case 17:\n            result = _context.sent;\n            postJobResultMessage(jobUID, true, common_1.serialize(result));\n            _context.next = 24;\n            break;\n\n          case 21:\n            _context.prev = 21;\n            _context.t1 = _context[\"catch\"](14);\n            postJobErrorMessage(jobUID, common_1.serialize(_context.t1));\n\n          case 24:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 4], [14, 21]]);\n  }));\n}\n/**\n * Expose a function or a module (an object whose values are functions)\n * to the main thread. Must be called exactly once in every worker thread\n * to signal its API to the main thread.\n *\n * @param exposed Function or object whose values are functions\n */\n\n\nfunction expose(exposed) {\n  if (!implementation_1.default.isWorkerRuntime()) {\n    throw Error(\"expose() called in the master thread.\");\n  }\n\n  if (exposeCalled) {\n    throw Error(\"expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.\");\n  }\n\n  exposeCalled = true;\n\n  if (typeof exposed === \"function\") {\n    implementation_1.default.subscribeToMasterMessages(function (messageData) {\n      if (isMasterJobRunMessage(messageData) && !messageData.method) {\n        runFunction(messageData.uid, exposed, messageData.args.map(common_1.deserialize));\n      }\n    });\n    postFunctionInitMessage();\n  } else if (typeof exposed === \"object\" && exposed) {\n    implementation_1.default.subscribeToMasterMessages(function (messageData) {\n      if (isMasterJobRunMessage(messageData) && messageData.method) {\n        runFunction(messageData.uid, exposed[messageData.method], messageData.args.map(common_1.deserialize));\n      }\n    });\n    var methodNames = Object.keys(exposed).filter(function (key) {\n      return typeof exposed[key] === \"function\";\n    });\n    postModuleInitMessage(methodNames);\n  } else {\n    throw Error(\"Invalid argument passed to expose(). Expected a function or an object, got: \".concat(exposed));\n  }\n\n  implementation_1.default.subscribeToMasterMessages(function (messageData) {\n    if (isMasterJobCancelMessage(messageData)) {\n      var jobUID = messageData.uid;\n      var subscription = activeSubscriptions.get(jobUID);\n\n      if (subscription) {\n        subscription.unsubscribe();\n        activeSubscriptions.delete(jobUID);\n      }\n    }\n  });\n}\n\nexports.expose = expose;\n\nif (typeof self !== \"undefined\" && typeof self.addEventListener === \"function\" && implementation_1.default.isWorkerRuntime()) {\n  self.addEventListener(\"error\", function (event) {\n    // Post with some delay, so the master had some time to subscribe to messages\n    setTimeout(function () {\n      return postUncaughtErrorMessage(event.error || event);\n    }, 250);\n  });\n  self.addEventListener(\"unhandledrejection\", function (event) {\n    var error = event.reason;\n\n    if (error && typeof error.message === \"string\") {\n      // Post with some delay, so the master had some time to subscribe to messages\n      setTimeout(function () {\n        return postUncaughtErrorMessage(error);\n      }, 250);\n    }\n  });\n}\n\nif (typeof process !== \"undefined\" && typeof process.on === \"function\" && implementation_1.default.isWorkerRuntime()) {\n  process.on(\"uncaughtException\", function (error) {\n    // Post with some delay, so the master had some time to subscribe to messages\n    setTimeout(function () {\n      return postUncaughtErrorMessage(error);\n    }, 250);\n  });\n  process.on(\"unhandledRejection\", function (error) {\n    if (error && typeof error.message === \"string\") {\n      // Post with some delay, so the master had some time to subscribe to messages\n      setTimeout(function () {\n        return postUncaughtErrorMessage(error);\n      }, 250);\n    }\n  });\n}","var indexOfMatch = require(\"./index-of-match.js\");\n\nfunction findTagByName(xml, tagName, options) {\n  var debug = options && options.debug || false;\n  var startIndex = options && options.startIndex || 0;\n  if (debug) console.log(\"starting findTagByName with\", tagName, \" and \", options);\n  var start = indexOfMatch(xml, \"<\".concat(tagName, \"[ >]\"), startIndex);\n  if (debug) console.log(\"start:\", start);\n  if (start === -1) return undefined;\n  var afterStart = xml.slice(start + tagName.length);\n  var relativeEnd = indexOfMatch(afterStart, \"[ /]\" + tagName + \">\", 0);\n  var selfClosing = relativeEnd === -1;\n\n  if (selfClosing) {\n    relativeEnd = indexOfMatch(afterStart, \"[ /]>\", 0);\n  }\n\n  var end = start + tagName.length + relativeEnd + 1 + (selfClosing ? 0 : tagName.length) + 1;\n  if (debug) console.log(\"end:\", end);\n  if (end === -1) return undefined;\n  var outer = xml.slice(start, end); // tag is like <gml:identifier codeSpace=\"OGP\">urn:ogc:def:crs:EPSG::32617</gml:identifier>\n\n  var inner;\n\n  if (selfClosing) {\n    inner = null;\n  } else {\n    inner = outer.slice(outer.indexOf(\">\") + 1, outer.lastIndexOf(\"<\"));\n  }\n\n  return {\n    inner: inner,\n    outer: outer,\n    start: start,\n    end: end\n  };\n}\n\nmodule.exports = findTagByName;","var findTagByName = require(\"./find-tag-by-name.js\");\n\nfunction findTagsByName(xml, tagName, options) {\n  var tags = [];\n  var debug = options && options.debug || false;\n  var startIndex = options && options.startIndex || 0;\n  var tag;\n\n  while (tag = findTagByName(xml, tagName, {\n    debug: debug,\n    startIndex: startIndex\n  })) {\n    startIndex = tag.end;\n    tags.push(tag);\n  }\n\n  if (debug) console.log(\"findTagsByName found\", tags.length, \"tags\");\n  return tags;\n}\n\nmodule.exports = findTagsByName;","function getAttribute(tag, attributeName, options) {\n  var debug = options && options.debug || false;\n  if (debug) console.log(\"getting \" + attributeName + \" in \" + tag);\n  var xml = typeof tag === \"object\" ? tag.outer : tag;\n  var pattern = \"\".concat(attributeName, \"\\\\=\\\"([^\\\"]*)\\\"\");\n  if (debug) console.log(\"pattern:\", pattern);\n  var re = new RegExp(pattern);\n  var match = re.exec(xml);\n  if (debug) console.log(\"match:\", match);\n  if (match) return match[1];\n}\n\nmodule.exports = getAttribute;","function indexOfMatch(xml, pattern, startIndex) {\n  var re = new RegExp(pattern);\n  var match = re.exec(xml.slice(startIndex));\n  if (match) return startIndex + match.index;else return -1;\n}\n\nmodule.exports = indexOfMatch;","var global = require('../internals/global');\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar Object = global.Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","'use strict';\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var classof = require('../internals/classof');\nvar getMethod = require('../internals/get-method');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar TypeError = global.TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw TypeError(tryToString(argument) + ' is not iterable');\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","var global = require('../internals/global');\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar TypeError = global.TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal', condition);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n","var call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getMethod = require('../internals/get-method');\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n","module.exports = {};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aCallable(resolve);\n  this.reject = aCallable(reject);\n};\n\n// `NewPromiseCapability` abstract operation\n// https://tc39.es/ecma262/#sec-newpromisecapability\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","module.exports = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar createProperty = require('../internals/create-property');\n\n// `Object.fromEntries` method\n// https://github.com/tc39/proposal-object-from-entries\n$({ target: 'Object', stat: true }, {\n  fromEntries: function fromEntries(iterable) {\n    var obj = {};\n    iterate(iterable, function (k, v) {\n      createProperty(obj, k, v);\n    }, { AS_ENTRIES: true });\n    return obj;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar iterate = require('../internals/iterate');\n\n// `Promise.allSettled` method\n// https://tc39.es/ecma262/#sec-promise.allsettled\n$({ target: 'Promise', stat: true }, {\n  allSettled: function allSettled(iterable) {\n    var C = this;\n    var capability = newPromiseCapabilityModule.f(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var promiseResolve = aCallable(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        remaining++;\n        call(promiseResolve, C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = { status: 'fulfilled', value: value };\n          --remaining || resolve(values);\n        }, function (error) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = { status: 'rejected', reason: error };\n          --remaining || resolve(values);\n        });\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","// TODO: Remove from `core-js@4`\nrequire('../modules/es.promise.all-settled.js');\n","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getIconButtonUtilityClass(slot) {\n  return generateUtilityClass('MuiIconButton', slot);\n}\nvar iconButtonClasses = generateUtilityClasses('MuiIconButton', ['root', 'disabled', 'colorInherit', 'colorPrimary', 'colorSecondary', 'edgeStart', 'edgeEnd', 'sizeSmall', 'sizeMedium', 'sizeLarge']);\nexport default iconButtonClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"edge\", \"children\", \"className\", \"color\", \"disabled\", \"disableFocusRipple\", \"size\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@mui/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport { alpha } from '@mui/system';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport ButtonBase from '../ButtonBase';\nimport capitalize from '../utils/capitalize';\nimport iconButtonClasses, { getIconButtonUtilityClass } from './iconButtonClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      disabled = ownerState.disabled,\n      color = ownerState.color,\n      edge = ownerState.edge,\n      size = ownerState.size;\n  var slots = {\n    root: ['root', disabled && 'disabled', color !== 'default' && \"color\".concat(capitalize(color)), edge && \"edge\".concat(capitalize(edge)), \"size\".concat(capitalize(size))]\n  };\n  return composeClasses(slots, getIconButtonUtilityClass, classes);\n};\n\nvar IconButtonRoot = styled(ButtonBase, {\n  name: 'MuiIconButton',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, ownerState.color !== 'default' && styles[\"color\".concat(capitalize(ownerState.color))], ownerState.edge && styles[\"edge\".concat(capitalize(ownerState.edge))], styles[\"size\".concat(capitalize(ownerState.size))]];\n  }\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    textAlign: 'center',\n    flex: '0 0 auto',\n    fontSize: theme.typography.pxToRem(24),\n    padding: 8,\n    borderRadius: '50%',\n    overflow: 'visible',\n    // Explicitly set the default value to solve a bug on IE11.\n    color: theme.palette.action.active,\n    transition: theme.transitions.create('background-color', {\n      duration: theme.transitions.duration.shortest\n    })\n  }, !ownerState.disableRipple && {\n    '&:hover': {\n      backgroundColor: alpha(theme.palette.action.active, theme.palette.action.hoverOpacity),\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    }\n  }, ownerState.edge === 'start' && {\n    marginLeft: ownerState.size === 'small' ? -3 : -12\n  }, ownerState.edge === 'end' && {\n    marginRight: ownerState.size === 'small' ? -3 : -12\n  });\n}, function (_ref2) {\n  var theme = _ref2.theme,\n      ownerState = _ref2.ownerState;\n  return _extends({}, ownerState.color === 'inherit' && {\n    color: 'inherit'\n  }, ownerState.color !== 'inherit' && ownerState.color !== 'default' && _extends({\n    color: theme.palette[ownerState.color].main\n  }, !ownerState.disableRipple && {\n    '&:hover': {\n      backgroundColor: alpha(theme.palette[ownerState.color].main, theme.palette.action.hoverOpacity),\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    }\n  }), ownerState.size === 'small' && {\n    padding: 5,\n    fontSize: theme.typography.pxToRem(18)\n  }, ownerState.size === 'large' && {\n    padding: 12,\n    fontSize: theme.typography.pxToRem(28)\n  }, _defineProperty({}, \"&.\".concat(iconButtonClasses.disabled), {\n    backgroundColor: 'transparent',\n    color: theme.palette.action.disabled\n  }));\n});\n/**\n * Refer to the [Icons](/components/icons/) section of the documentation\n * regarding the available icon options.\n */\n\nvar IconButton = /*#__PURE__*/React.forwardRef(function IconButton(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiIconButton'\n  });\n\n  var _props$edge = props.edge,\n      edge = _props$edge === void 0 ? false : _props$edge,\n      children = props.children,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'default' : _props$color,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$disableFocusRi = props.disableFocusRipple,\n      disableFocusRipple = _props$disableFocusRi === void 0 ? false : _props$disableFocusRi,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    edge: edge,\n    color: color,\n    disabled: disabled,\n    disableFocusRipple: disableFocusRipple,\n    size: size\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(IconButtonRoot, _extends({\n    className: clsx(classes.root, className),\n    centerRipple: true,\n    focusRipple: !disableFocusRipple,\n    disabled: disabled,\n    ref: ref,\n    ownerState: ownerState\n  }, other, {\n    children: children\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default IconButton;","/**\n * @module ol/webgl\n */\nimport { assign } from './obj.js';\n/**\n * Constants taken from goog.webgl\n */\n\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing vertices data, such as\n * position, color, texture coordinate, etc. These vertices are then referenced by an index buffer\n * to be drawn on screen (see {@link module:ol/webgl.ELEMENT_ARRAY_BUFFER}).\n * @const\n * @type {number}\n * @api\n */\n\nexport var ARRAY_BUFFER = 0x8892;\n/**\n * Used by {@link module:ol/webgl/Helper~WebGLHelper} for buffers containing indices data.\n * Index buffers are essentially lists of references to vertices defined in a vertex buffer\n * (see {@link module:ol/webgl.ARRAY_BUFFER}), and define the primitives (triangles) to be drawn.\n * @const\n * @type {number}\n * @api\n */\n\nexport var ELEMENT_ARRAY_BUFFER = 0x8893;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\n\nexport var STREAM_DRAW = 0x88e0;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\n\nexport var STATIC_DRAW = 0x88e4;\n/**\n * Used by {link module:ol/webgl/Buffer~WebGLArrayBuffer}.\n * @const\n * @type {number}\n * @api\n */\n\nexport var DYNAMIC_DRAW = 0x88e8;\n/**\n * @const\n * @type {number}\n */\n\nexport var UNSIGNED_BYTE = 0x1401;\n/**\n * @const\n * @type {number}\n */\n\nexport var UNSIGNED_SHORT = 0x1403;\n/**\n * @const\n * @type {number}\n */\n\nexport var UNSIGNED_INT = 0x1405;\n/**\n * @const\n * @type {number}\n */\n\nexport var FLOAT = 0x1406;\n/** end of goog.webgl constants\n */\n\n/**\n * @const\n * @type {Array<string>}\n */\n\nvar CONTEXT_IDS = ['experimental-webgl', 'webgl', 'webkit-3d', 'moz-webgl'];\n/**\n * @param {HTMLCanvasElement} canvas Canvas.\n * @param {Object} [opt_attributes] Attributes.\n * @return {WebGLRenderingContext} WebGL rendering context.\n */\n\nexport function getContext(canvas, opt_attributes) {\n  var attributes = assign({\n    preserveDrawingBuffer: true\n  }, opt_attributes);\n  var ii = CONTEXT_IDS.length;\n\n  for (var i = 0; i < ii; ++i) {\n    try {\n      var context = canvas.getContext(CONTEXT_IDS[i], attributes);\n\n      if (context) {\n        return (\n          /** @type {!WebGLRenderingContext} */\n          context\n        );\n      }\n    } catch (e) {// pass\n    }\n  }\n\n  return null;\n}\n/**\n * @type {Array<string>}\n */\n\nvar supportedExtensions;\n/**\n * @return {Array<string>} List of supported WebGL extensions.\n */\n\nexport function getSupportedExtensions() {\n  if (!supportedExtensions) {\n    var canvas = document.createElement('canvas');\n    var gl = getContext(canvas);\n\n    if (gl) {\n      supportedExtensions = gl.getSupportedExtensions();\n    }\n  }\n\n  return supportedExtensions;\n}","/**\n * @module ol/webgl/Buffer\n */\nimport { ARRAY_BUFFER, ELEMENT_ARRAY_BUFFER } from '../webgl.js';\nimport { DYNAMIC_DRAW, STATIC_DRAW, STREAM_DRAW } from '../webgl.js';\nimport { assert } from '../asserts.js';\n/**\n * Used to describe the intended usage for the data: `STATIC_DRAW`, `STREAM_DRAW`\n * or `DYNAMIC_DRAW`.\n * @enum {number}\n */\n\nexport var BufferUsage = {\n  STATIC_DRAW: STATIC_DRAW,\n  STREAM_DRAW: STREAM_DRAW,\n  DYNAMIC_DRAW: DYNAMIC_DRAW\n};\n/**\n * @classdesc\n * Object used to store an array of data as well as usage information for that data.\n * Stores typed arrays internally, either Float32Array or Uint16/32Array depending on\n * the buffer type (ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER) and available extensions.\n *\n * To populate the array, you can either use:\n * * A size using `#ofSize(buffer)`\n * * An `ArrayBuffer` object using `#fromArrayBuffer(buffer)`\n * * A plain array using `#fromArray(array)`\n *\n * Note:\n * See the documentation of [WebGLRenderingContext.bufferData](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/bufferData)\n * for more info on buffer usage.\n * @api\n */\n\nvar WebGLArrayBuffer =\n/** @class */\nfunction () {\n  /**\n   * @param {number} type Buffer type, either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER.\n   * @param {number} [opt_usage] Intended usage, either `STATIC_DRAW`, `STREAM_DRAW` or `DYNAMIC_DRAW`.\n   * Default is `DYNAMIC_DRAW`.\n   */\n  function WebGLArrayBuffer(type, opt_usage) {\n    /**\n     * @private\n     * @type {Float32Array|Uint32Array}\n     */\n    this.array = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.type = type;\n    assert(type === ARRAY_BUFFER || type === ELEMENT_ARRAY_BUFFER, 62);\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.usage = opt_usage !== undefined ? opt_usage : BufferUsage.STATIC_DRAW;\n  }\n  /**\n   * Populates the buffer with an array of the given size (all values will be zeroes).\n   * @param {number} size Array size\n   */\n\n\n  WebGLArrayBuffer.prototype.ofSize = function (size) {\n    this.array = new (getArrayClassForType(this.type))(size);\n  };\n  /**\n   * Populates the buffer with an array of the given size (all values will be zeroes).\n   * @param {Array<number>} array Numerical array\n   */\n\n\n  WebGLArrayBuffer.prototype.fromArray = function (array) {\n    var arrayClass = getArrayClassForType(this.type);\n    this.array = arrayClass.from ? arrayClass.from(array) : new arrayClass(array);\n  };\n  /**\n   * Populates the buffer with a raw binary array buffer.\n   * @param {ArrayBuffer} buffer Raw binary buffer to populate the array with. Note that this buffer must have been\n   * initialized for the same typed array class.\n   */\n\n\n  WebGLArrayBuffer.prototype.fromArrayBuffer = function (buffer) {\n    this.array = new (getArrayClassForType(this.type))(buffer);\n  };\n  /**\n   * @return {number} Buffer type.\n   */\n\n\n  WebGLArrayBuffer.prototype.getType = function () {\n    return this.type;\n  };\n  /**\n   * Will return null if the buffer was not initialized\n   * @return {Float32Array|Uint32Array} Array.\n   */\n\n\n  WebGLArrayBuffer.prototype.getArray = function () {\n    return this.array;\n  };\n  /**\n   * @return {number} Usage.\n   */\n\n\n  WebGLArrayBuffer.prototype.getUsage = function () {\n    return this.usage;\n  };\n  /**\n   * Will return 0 if the buffer is not initialized\n   * @return {number} Array size\n   */\n\n\n  WebGLArrayBuffer.prototype.getSize = function () {\n    return this.array ? this.array.length : 0;\n  };\n\n  return WebGLArrayBuffer;\n}();\n/**\n * Returns a typed array constructor based on the given buffer type\n * @param {number} type Buffer type, either ARRAY_BUFFER or ELEMENT_ARRAY_BUFFER.\n * @return {Float32ArrayConstructor|Uint32ArrayConstructor} The typed array class to use for this buffer.\n */\n\n\nexport function getArrayClassForType(type) {\n  switch (type) {\n    case ARRAY_BUFFER:\n      return Float32Array;\n\n    case ELEMENT_ARRAY_BUFFER:\n      return Uint32Array;\n\n    default:\n      return Float32Array;\n  }\n}\nexport default WebGLArrayBuffer;","/**\n * @module ol/webgl/TileTexture\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageTile from '../ImageTile.js';\nimport ReprojTile from '../reproj/Tile.js';\nimport TileState from '../TileState.js';\nimport WebGLArrayBuffer from './Buffer.js';\nimport { ARRAY_BUFFER, STATIC_DRAW } from '../webgl.js';\nimport { toSize } from '../size.js';\n/**\n * @param {WebGLRenderingContext} gl The WebGL context.\n * @param {WebGLTexture} texture The texture.\n * @param {boolean} interpolate Interpolate when resampling.\n */\n\nfunction bindAndConfigure(gl, texture, interpolate) {\n  var resampleFilter = interpolate ? gl.LINEAR : gl.NEAREST;\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, resampleFilter);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, resampleFilter);\n}\n/**\n * @param {WebGLRenderingContext} gl The WebGL context.\n * @param {WebGLTexture} texture The texture.\n * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image The image.\n * @param {boolean} interpolate Interpolate when resampling.\n */\n\n\nfunction uploadImageTexture(gl, texture, image, interpolate) {\n  bindAndConfigure(gl, texture, interpolate);\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n}\n/**\n * @param {import(\"./Helper.js\").default} helper The WebGL helper.\n * @param {WebGLTexture} texture The texture.\n * @param {import(\"../DataTile.js\").Data} data The pixel data.\n * @param {import(\"../size.js\").Size} size The pixel size.\n * @param {number} bandCount The band count.\n * @param {boolean} interpolate Interpolate when resampling.\n */\n\n\nfunction uploadDataTexture(helper, texture, data, size, bandCount, interpolate) {\n  var gl = helper.getGL();\n  bindAndConfigure(gl, texture, interpolate);\n  var bytesPerRow = data.byteLength / size[1];\n  var unpackAlignment = 1;\n\n  if (bytesPerRow % 8 === 0) {\n    unpackAlignment = 8;\n  } else if (bytesPerRow % 4 === 0) {\n    unpackAlignment = 4;\n  } else if (bytesPerRow % 2 === 0) {\n    unpackAlignment = 2;\n  }\n\n  var format;\n\n  switch (bandCount) {\n    case 1:\n      {\n        format = gl.LUMINANCE;\n        break;\n      }\n\n    case 2:\n      {\n        format = gl.LUMINANCE_ALPHA;\n        break;\n      }\n\n    case 3:\n      {\n        format = gl.RGB;\n        break;\n      }\n\n    case 4:\n      {\n        format = gl.RGBA;\n        break;\n      }\n\n    default:\n      {\n        throw new Error(\"Unsupported number of bands: \" + bandCount);\n      }\n  }\n\n  var textureType;\n\n  if (data instanceof Float32Array) {\n    textureType = gl.FLOAT;\n    helper.getExtension('OES_texture_float');\n    helper.getExtension('OES_texture_float_linear');\n  } else {\n    textureType = gl.UNSIGNED_BYTE;\n  }\n\n  var oldUnpackAlignment = gl.getParameter(gl.UNPACK_ALIGNMENT);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, unpackAlignment);\n  gl.texImage2D(gl.TEXTURE_2D, 0, format, size[0], size[1], 0, format, textureType, data);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, oldUnpackAlignment);\n}\n/**\n * @typedef {import(\"../DataTile.js\").default|ImageTile|ReprojTile} TileType\n */\n\n\nvar TileTexture =\n/** @class */\nfunction (_super) {\n  __extends(TileTexture, _super);\n  /**\n   * @param {TileType} tile The tile.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} grid Tile grid.\n   * @param {import(\"../webgl/Helper.js\").default} helper WebGL helper.\n   */\n\n\n  function TileTexture(tile, grid, helper) {\n    var _this = _super.call(this) || this;\n    /**\n     * @type {TileType}\n     */\n\n\n    _this.tile;\n    /**\n     * @type {Array<WebGLTexture>}\n     */\n\n    _this.textures = [];\n    _this.handleTileChange_ = _this.handleTileChange_.bind(_this);\n    _this.size = toSize(grid.getTileSize(tile.tileCoord[0]));\n    _this.bandCount = NaN;\n    _this.helper_ = helper;\n    var coords = new WebGLArrayBuffer(ARRAY_BUFFER, STATIC_DRAW);\n    coords.fromArray([0, 1, 1, 1, 1, 0, 0, 0]);\n    helper.flushBufferData(coords);\n    _this.coords = coords;\n\n    _this.setTile(tile);\n\n    return _this;\n  }\n  /**\n   * @param {TileType} tile Tile.\n   */\n\n\n  TileTexture.prototype.setTile = function (tile) {\n    if (tile !== this.tile) {\n      if (this.tile) {\n        this.tile.removeEventListener(EventType.CHANGE, this.handleTileChange_);\n      }\n\n      this.tile = tile;\n      this.textures.length = 0;\n      this.loaded = tile.getState() === TileState.LOADED;\n\n      if (this.loaded) {\n        this.uploadTile_();\n      } else {\n        if (tile instanceof ImageTile) {\n          var image = tile.getImage();\n\n          if (image instanceof Image && !image.crossOrigin) {\n            image.crossOrigin = 'anonymous';\n          }\n        }\n\n        tile.addEventListener(EventType.CHANGE, this.handleTileChange_);\n      }\n    }\n  };\n\n  TileTexture.prototype.uploadTile_ = function () {\n    var helper = this.helper_;\n    var gl = helper.getGL();\n    var tile = this.tile;\n\n    if (tile instanceof ImageTile || tile instanceof ReprojTile) {\n      var texture = gl.createTexture();\n      this.textures.push(texture);\n      this.bandCount = 4;\n      uploadImageTexture(gl, texture, tile.getImage(), tile.interpolate);\n      return;\n    }\n\n    var data = tile.getData();\n    var isFloat = data instanceof Float32Array;\n    var pixelCount = this.size[0] * this.size[1];\n    var DataType = isFloat ? Float32Array : Uint8Array;\n    var bytesPerElement = DataType.BYTES_PER_ELEMENT;\n    var bytesPerRow = data.byteLength / this.size[1];\n    this.bandCount = Math.floor(bytesPerRow / bytesPerElement / this.size[0]);\n    var textureCount = Math.ceil(this.bandCount / 4);\n\n    if (textureCount === 1) {\n      var texture = gl.createTexture();\n      this.textures.push(texture);\n      uploadDataTexture(helper, texture, data, this.size, this.bandCount, tile.interpolate);\n      return;\n    }\n\n    var textureDataArrays = new Array(textureCount);\n\n    for (var textureIndex = 0; textureIndex < textureCount; ++textureIndex) {\n      var texture = gl.createTexture();\n      this.textures.push(texture);\n      var bandCount = textureIndex < textureCount - 1 ? 4 : this.bandCount % 4;\n      textureDataArrays[textureIndex] = new DataType(pixelCount * bandCount);\n    }\n\n    var dataIndex = 0;\n    var rowOffset = 0;\n    var colCount = this.size[0] * this.bandCount;\n\n    for (var rowIndex = 0; rowIndex < this.size[1]; ++rowIndex) {\n      for (var colIndex = 0; colIndex < colCount; ++colIndex) {\n        var dataValue = data[rowOffset + colIndex];\n        var pixelIndex = Math.floor(dataIndex / this.bandCount);\n        var bandIndex = colIndex % this.bandCount;\n        var textureIndex = Math.floor(bandIndex / 4);\n        var textureData = textureDataArrays[textureIndex];\n        var bandCount = textureData.length / pixelCount;\n        var textureBandIndex = bandIndex % 4;\n        textureData[pixelIndex * bandCount + textureBandIndex] = dataValue;\n        ++dataIndex;\n      }\n\n      rowOffset += bytesPerRow / bytesPerElement;\n    }\n\n    for (var textureIndex = 0; textureIndex < textureCount; ++textureIndex) {\n      var texture = this.textures[textureIndex];\n      var textureData = textureDataArrays[textureIndex];\n      var bandCount = textureData.length / pixelCount;\n      uploadDataTexture(helper, texture, textureData, this.size, bandCount, tile.interpolate);\n    }\n  };\n\n  TileTexture.prototype.handleTileChange_ = function () {\n    if (this.tile.getState() === TileState.LOADED) {\n      this.loaded = true;\n      this.uploadTile_();\n      this.dispatchEvent(EventType.CHANGE);\n    }\n  };\n\n  TileTexture.prototype.disposeInternal = function () {\n    var gl = this.helper_.getGL();\n    this.helper_.deleteBuffer(this.coords);\n\n    for (var i = 0; i < this.textures.length; ++i) {\n      gl.deleteTexture(this.textures[i]);\n    }\n\n    this.tile.removeEventListener(EventType.CHANGE, this.handleTileChange_);\n  };\n\n  return TileTexture;\n}(EventTarget);\n\nexport default TileTexture;","/**\n * @module ol/webgl/ContextEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LOST: 'webglcontextlost',\n  RESTORED: 'webglcontextrestored'\n};","/**\n * @module ol/webgl/PostProcessingPass\n */\nimport { getUid } from '../util.js';\nvar DEFAULT_VERTEX_SHADER = \"\\n  precision mediump float;\\n  \\n  attribute vec2 a_position;\\n  varying vec2 v_texCoord;\\n  varying vec2 v_screenCoord;\\n  \\n  uniform vec2 u_screenSize;\\n   \\n  void main() {\\n    v_texCoord = a_position * 0.5 + 0.5;\\n    v_screenCoord = v_texCoord * u_screenSize;\\n    gl_Position = vec4(a_position, 0.0, 1.0);\\n  }\\n\";\nvar DEFAULT_FRAGMENT_SHADER = \"\\n  precision mediump float;\\n   \\n  uniform sampler2D u_image;\\n  uniform float u_opacity;\\n   \\n  varying vec2 v_texCoord;\\n   \\n  void main() {\\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\\n  }\\n\";\n/**\n * @typedef {Object} Options\n * @property {WebGLRenderingContext} webGlContext WebGL context; mandatory.\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas that will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object<string,import(\"./Helper\").UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n\n/**\n * @typedef {Object} UniformInternalDescription\n * @property {import(\"./Helper\").UniformValue} value Value\n * @property {number} location Location\n * @property {WebGLTexture} [texture] Texture\n * @private\n */\n\n/**\n * @classdesc\n * This class is used to define Post Processing passes with custom shaders and uniforms.\n * This is used internally by {@link module:ol/webgl/Helper~WebGLHelper}.\n *\n * Please note that the final output on the DOM canvas is expected to have premultiplied alpha, which means that\n * a pixel which is 100% red with an opacity of 50% must have a color of (r=0.5, g=0, b=0, a=0.5).\n * Failing to provide pixel colors with premultiplied alpha will result in render anomalies.\n *\n * The default post-processing pass does *not* multiply color values with alpha value, it expects color values to be\n * premultiplied.\n *\n * Default shaders are shown hereafter:\n *\n * * Vertex shader:\n *\n *   ```\n *   precision mediump float;\n *\n *   attribute vec2 a_position;\n *   varying vec2 v_texCoord;\n *   varying vec2 v_screenCoord;\n *\n *   uniform vec2 u_screenSize;\n *\n *   void main() {\n *     v_texCoord = a_position * 0.5 + 0.5;\n *     v_screenCoord = v_texCoord * u_screenSize;\n *     gl_Position = vec4(a_position, 0.0, 1.0);\n *   }\n *   ```\n *\n * * Fragment shader:\n *\n *   ```\n *   precision mediump float;\n *\n *   uniform sampler2D u_image;\n *   uniform float u_opacity;\n *\n *   varying vec2 v_texCoord;\n *\n *   void main() {\n *     gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n *   }\n *   ```\n *\n * @api\n */\n\nvar WebGLPostProcessingPass =\n/** @class */\nfunction () {\n  /**\n   * @param {Options} options Options.\n   */\n  function WebGLPostProcessingPass(options) {\n    this.gl_ = options.webGlContext;\n    var gl = this.gl_;\n    this.scaleRatio_ = options.scaleRatio || 1;\n    this.renderTargetTexture_ = gl.createTexture();\n    this.renderTargetTextureSize_ = null;\n    this.frameBuffer_ = gl.createFramebuffer(); // compile the program for the frame buffer\n    // TODO: make compilation errors show up\n\n    var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, options.vertexShader || DEFAULT_VERTEX_SHADER);\n    gl.compileShader(vertexShader);\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, options.fragmentShader || DEFAULT_FRAGMENT_SHADER);\n    gl.compileShader(fragmentShader);\n    this.renderTargetProgram_ = gl.createProgram();\n    gl.attachShader(this.renderTargetProgram_, vertexShader);\n    gl.attachShader(this.renderTargetProgram_, fragmentShader);\n    gl.linkProgram(this.renderTargetProgram_); // bind the vertices buffer for the frame buffer\n\n    this.renderTargetVerticesBuffer_ = gl.createBuffer();\n    var verticesArray = [-1, -1, 1, -1, -1, 1, 1, -1, 1, 1, -1, 1];\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.renderTargetVerticesBuffer_);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesArray), gl.STATIC_DRAW);\n    this.renderTargetAttribLocation_ = gl.getAttribLocation(this.renderTargetProgram_, 'a_position');\n    this.renderTargetUniformLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_screenSize');\n    this.renderTargetOpacityLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_opacity');\n    this.renderTargetTextureLocation_ = gl.getUniformLocation(this.renderTargetProgram_, 'u_image');\n    /**\n     * Holds info about custom uniforms used in the post processing pass\n     * @type {Array<UniformInternalDescription>}\n     * @private\n     */\n\n    this.uniforms_ = [];\n    options.uniforms && Object.keys(options.uniforms).forEach(function (name) {\n      this.uniforms_.push({\n        value: options.uniforms[name],\n        location: gl.getUniformLocation(this.renderTargetProgram_, name)\n      });\n    }.bind(this));\n  }\n  /**\n   * Get the WebGL rendering context\n   * @return {WebGLRenderingContext} The rendering context.\n   * @api\n   */\n\n\n  WebGLPostProcessingPass.prototype.getGL = function () {\n    return this.gl_;\n  };\n  /**\n   * Initialize the render target texture of the post process, make sure it is at the\n   * right size and bind it as a render target for the next draw calls.\n   * The last step to be initialized will be the one where the primitives are rendered.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @api\n   */\n\n\n  WebGLPostProcessingPass.prototype.init = function (frameState) {\n    var gl = this.getGL();\n    var textureSize = [gl.drawingBufferWidth * this.scaleRatio_, gl.drawingBufferHeight * this.scaleRatio_]; // rendering goes to my buffer\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.getFrameBuffer());\n    gl.viewport(0, 0, textureSize[0], textureSize[1]); // if size has changed: adjust canvas & render target texture\n\n    if (!this.renderTargetTextureSize_ || this.renderTargetTextureSize_[0] !== textureSize[0] || this.renderTargetTextureSize_[1] !== textureSize[1]) {\n      this.renderTargetTextureSize_ = textureSize; // create a new texture\n\n      var level = 0;\n      var internalFormat = gl.RGBA;\n      var border = 0;\n      var format = gl.RGBA;\n      var type = gl.UNSIGNED_BYTE;\n      var data = null;\n      gl.bindTexture(gl.TEXTURE_2D, this.renderTargetTexture_);\n      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, textureSize[0], textureSize[1], border, format, type, data);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE); // bind the texture to the framebuffer\n\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.renderTargetTexture_, 0);\n    }\n  };\n  /**\n   * Render to the next postprocessing pass (or to the canvas if final pass).\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @param {WebGLPostProcessingPass} [nextPass] Next pass, optional\n   * @param {function(WebGLRenderingContext, import(\"../PluggableMap.js\").FrameState):void} [preCompose] Called before composing.\n   * @param {function(WebGLRenderingContext, import(\"../PluggableMap.js\").FrameState):void} [postCompose] Called before composing.\n   * @api\n   */\n\n\n  WebGLPostProcessingPass.prototype.apply = function (frameState, nextPass, preCompose, postCompose) {\n    var gl = this.getGL();\n    var size = frameState.size;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, nextPass ? nextPass.getFrameBuffer() : null);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D, this.renderTargetTexture_);\n\n    if (!nextPass) {\n      // clear the canvas if we are the first to render to it\n      // and preserveDrawingBuffer is true\n      var canvasId = getUid(gl.canvas);\n\n      if (!frameState.renderTargets[canvasId]) {\n        var attributes = gl.getContextAttributes();\n\n        if (attributes && attributes.preserveDrawingBuffer) {\n          gl.clearColor(0.0, 0.0, 0.0, 0.0);\n          gl.clear(gl.COLOR_BUFFER_BIT);\n        }\n\n        frameState.renderTargets[canvasId] = true;\n      }\n    }\n\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.renderTargetVerticesBuffer_);\n    gl.useProgram(this.renderTargetProgram_);\n    gl.enableVertexAttribArray(this.renderTargetAttribLocation_);\n    gl.vertexAttribPointer(this.renderTargetAttribLocation_, 2, gl.FLOAT, false, 0, 0);\n    gl.uniform2f(this.renderTargetUniformLocation_, size[0], size[1]);\n    gl.uniform1i(this.renderTargetTextureLocation_, 0);\n    var opacity = frameState.layerStatesArray[frameState.layerIndex].opacity;\n    gl.uniform1f(this.renderTargetOpacityLocation_, opacity);\n    this.applyUniforms(frameState);\n\n    if (preCompose) {\n      preCompose(gl, frameState);\n    }\n\n    gl.drawArrays(gl.TRIANGLES, 0, 6);\n\n    if (postCompose) {\n      postCompose(gl, frameState);\n    }\n  };\n  /**\n   * @return {WebGLFramebuffer} Frame buffer\n   * @api\n   */\n\n\n  WebGLPostProcessingPass.prototype.getFrameBuffer = function () {\n    return this.frameBuffer_;\n  };\n  /**\n   * Sets the custom uniforms based on what was given in the constructor.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n\n\n  WebGLPostProcessingPass.prototype.applyUniforms = function (frameState) {\n    var gl = this.getGL();\n    var value;\n    var textureSlot = 1;\n    this.uniforms_.forEach(function (uniform) {\n      value = typeof uniform.value === 'function' ? uniform.value(frameState) : uniform.value; // apply value based on type\n\n      if (value instanceof HTMLCanvasElement || value instanceof ImageData) {\n        // create a texture & put data\n        if (!uniform.texture) {\n          uniform.texture = gl.createTexture();\n        }\n\n        gl.activeTexture(gl[\"TEXTURE\" + textureSlot]);\n        gl.bindTexture(gl.TEXTURE_2D, uniform.texture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n        if (value instanceof ImageData) {\n          gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, value.width, value.height, 0, gl.UNSIGNED_BYTE, new Uint8Array(value.data));\n        } else {\n          gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, value);\n        } // fill texture slots\n\n\n        gl.uniform1i(uniform.location, textureSlot++);\n      } else if (Array.isArray(value)) {\n        switch (value.length) {\n          case 2:\n            gl.uniform2f(uniform.location, value[0], value[1]);\n            return;\n\n          case 3:\n            gl.uniform3f(uniform.location, value[0], value[1], value[2]);\n            return;\n\n          case 4:\n            gl.uniform4f(uniform.location, value[0], value[1], value[2], value[3]);\n            return;\n\n          default:\n            return;\n        }\n      } else if (typeof value === 'number') {\n        gl.uniform1f(uniform.location, value);\n      }\n    });\n  };\n\n  return WebGLPostProcessingPass;\n}();\n\nexport default WebGLPostProcessingPass;","/**\n * @module ol/vec/mat4\n */\n\n/**\n * @return {Array<number>} \"4x4 matrix representing a 3D identity transform.\"\n */\nexport function create() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\n/**\n * @param {Array<number>} mat4 Flattened 4x4 matrix receiving the result.\n * @param {import(\"../transform.js\").Transform} transform Transformation matrix.\n * @return {Array<number>} \"2D transformation matrix as flattened 4x4 matrix.\"\n */\n\nexport function fromTransform(mat4, transform) {\n  mat4[0] = transform[0];\n  mat4[1] = transform[1];\n  mat4[4] = transform[2];\n  mat4[5] = transform[3];\n  mat4[12] = transform[4];\n  mat4[13] = transform[5];\n  return mat4;\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/webgl/Helper\n */\n\n\nimport ContextEventType from '../webgl/ContextEventType.js';\nimport Disposable from '../Disposable.js';\nimport WebGLPostProcessingPass from './PostProcessingPass.js';\nimport { FLOAT, UNSIGNED_BYTE, UNSIGNED_INT, UNSIGNED_SHORT, getContext } from '../webgl.js';\nimport { clear } from '../obj.js';\nimport { compose as composeTransform, create as createTransform, reset as resetTransform, rotate as rotateTransform, scale as scaleTransform } from '../transform.js';\nimport { create, fromTransform } from '../vec/mat4.js';\nimport { getUid } from '../util.js';\n/**\n * @typedef {Object} BufferCacheEntry\n * @property {import(\"./Buffer.js\").default} buffer Buffer.\n * @property {WebGLBuffer} webGlBuffer WebGlBuffer.\n */\n\n/**\n * Shader types, either `FRAGMENT_SHADER` or `VERTEX_SHADER`.\n * @enum {number}\n */\n\nexport var ShaderType = {\n  FRAGMENT_SHADER: 0x8b30,\n  VERTEX_SHADER: 0x8b31\n};\n/**\n * Uniform names used in the default shaders: `PROJECTION_MATRIX`, `OFFSET_SCALE_MATRIX`.\n * and `OFFSET_ROTATION_MATRIX`.\n * @enum {string}\n */\n\nexport var DefaultUniform = {\n  PROJECTION_MATRIX: 'u_projectionMatrix',\n  OFFSET_SCALE_MATRIX: 'u_offsetScaleMatrix',\n  OFFSET_ROTATION_MATRIX: 'u_offsetRotateMatrix',\n  TIME: 'u_time',\n  ZOOM: 'u_zoom',\n  RESOLUTION: 'u_resolution'\n};\n/**\n * Attribute types, either `UNSIGNED_BYTE`, `UNSIGNED_SHORT`, `UNSIGNED_INT` or `FLOAT`\n * Note: an attribute stored in a `Float32Array` should be of type `FLOAT`.\n * @enum {number}\n */\n\nexport var AttributeType = {\n  UNSIGNED_BYTE: UNSIGNED_BYTE,\n  UNSIGNED_SHORT: UNSIGNED_SHORT,\n  UNSIGNED_INT: UNSIGNED_INT,\n  FLOAT: FLOAT\n};\n/**\n * Description of an attribute in a buffer\n * @typedef {Object} AttributeDescription\n * @property {string} name Attribute name to use in shaders\n * @property {number} size Number of components per attributes\n * @property {AttributeType} [type] Attribute type, i.e. number of bytes used to store the value. This is\n * determined by the class of typed array which the buffer uses (eg. `Float32Array` for a `FLOAT` attribute).\n * Default is `FLOAT`.\n */\n\n/**\n * @typedef {number|Array<number>|HTMLCanvasElement|HTMLImageElement|ImageData|import(\"../transform\").Transform} UniformLiteralValue\n */\n\n/**\n * Uniform value can be a number, array of numbers (2 to 4), canvas element or a callback returning\n * one of the previous types.\n * @typedef {UniformLiteralValue|function(import(\"../PluggableMap.js\").FrameState):UniformLiteralValue} UniformValue\n */\n\n/**\n * @typedef {Object} PostProcessesOptions\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas which will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object<string,UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n\n/**\n * @typedef {Object} Options\n * @property {Object<string,UniformValue>} [uniforms] Uniform definitions; property names must match the uniform\n * names in the provided or default shaders.\n * @property {Array<PostProcessesOptions>} [postProcesses] Post-processes definitions\n * @property {string} [canvasCacheKey] The cache key for the canvas.\n */\n\n/**\n * @typedef {Object} UniformInternalDescription\n * @property {string} name Name\n * @property {UniformValue} [value] Value\n * @property {WebGLTexture} [texture] Texture\n * @private\n */\n\n/**\n * @typedef {Object} CanvasCacheItem\n * @property {HTMLCanvasElement} canvas Canvas element.\n * @property {number} users The count of users of this canvas.\n */\n\n/**\n * @type {Object<string,CanvasCacheItem>}\n */\n\nvar canvasCache = {};\n/**\n * @param {string} key The cache key for the canvas.\n * @return {string} The shared cache key.\n */\n\nfunction getSharedCanvasCacheKey(key) {\n  return 'shared/' + key;\n}\n\nvar uniqueCanvasCacheKeyCount = 0;\n/**\n * @return {string} The unique cache key.\n */\n\nfunction getUniqueCanvasCacheKey() {\n  var key = 'unique/' + uniqueCanvasCacheKeyCount;\n  uniqueCanvasCacheKeyCount += 1;\n  return key;\n}\n/**\n * @param {string} key The cache key for the canvas.\n * @return {HTMLCanvasElement} The canvas.\n */\n\n\nfunction getCanvas(key) {\n  var cacheItem = canvasCache[key];\n\n  if (!cacheItem) {\n    var canvas = document.createElement('canvas');\n    canvas.style.position = 'absolute';\n    canvas.style.left = '0';\n    cacheItem = {\n      users: 0,\n      canvas: canvas\n    };\n    canvasCache[key] = cacheItem;\n  }\n\n  cacheItem.users += 1;\n  return cacheItem.canvas;\n}\n/**\n * @param {string} key The cache key for the canvas.\n */\n\n\nfunction releaseCanvas(key) {\n  var cacheItem = canvasCache[key];\n\n  if (!cacheItem) {\n    return;\n  }\n\n  cacheItem.users -= 1;\n\n  if (cacheItem.users > 0) {\n    return;\n  }\n\n  var canvas = cacheItem.canvas;\n  var gl = getContext(canvas);\n  var extension = gl.getExtension('WEBGL_lose_context');\n\n  if (extension) {\n    extension.loseContext();\n  }\n\n  delete canvasCache[key];\n}\n/**\n * @classdesc\n * This class is intended to provide low-level functions related to WebGL rendering, so that accessing\n * directly the WebGL API should not be required anymore.\n *\n * Several operations are handled by the `WebGLHelper` class:\n *\n * ### Define custom shaders and uniforms\n *\n *   *Shaders* are low-level programs executed on the GPU and written in GLSL. There are two types of shaders:\n *\n *   Vertex shaders are used to manipulate the position and attribute of *vertices* of rendered primitives (ie. corners of a square).\n *   Outputs are:\n *\n *   * `gl_Position`: position of the vertex in screen space\n *\n *   * Varyings usually prefixed with `v_` are passed on to the fragment shader\n *\n *   Fragment shaders are used to control the actual color of the pixels drawn on screen. Their only output is `gl_FragColor`.\n *\n *   Both shaders can take *uniforms* or *attributes* as input. Attributes are explained later. Uniforms are common, read-only values that\n *   can be changed at every frame and can be of type float, arrays of float or images.\n *\n *   Shaders must be compiled and assembled into a program like so:\n *   ```js\n *   // here we simply create two shaders and assemble them in a program which is then used\n *   // for subsequent rendering calls\n *   const vertexShader = new WebGLVertex(VERTEX_SHADER);\n *   const fragmentShader = new WebGLFragment(FRAGMENT_SHADER);\n *   const program = this.context.getProgram(fragmentShader, vertexShader);\n *   helper.useProgram(this.program);\n *   ```\n *\n *   Uniforms are defined using the `uniforms` option and can either be explicit values or callbacks taking the frame state as argument.\n *   You can also change their value along the way like so:\n *   ```js\n *   helper.setUniformFloatValue('u_value', valueAsNumber);\n *   ```\n *\n * ### Defining post processing passes\n *\n *   *Post processing* describes the act of rendering primitives to a texture, and then rendering this texture to the final canvas\n *   while applying special effects in screen space.\n *   Typical uses are: blurring, color manipulation, depth of field, filtering...\n *\n *   The `WebGLHelper` class offers the possibility to define post processes at creation time using the `postProcesses` option.\n *   A post process step accepts the following options:\n *\n *   * `fragmentShader` and `vertexShader`: text literals in GLSL language that will be compiled and used in the post processing step.\n *   * `uniforms`: uniforms can be defined for the post processing steps just like for the main render.\n *   * `scaleRatio`: allows using an intermediate texture smaller or higher than the final canvas in the post processing step.\n *     This is typically used in blur steps to reduce the performance overhead by using an already downsampled texture as input.\n *\n *   The {@link module:ol/webgl/PostProcessingPass~WebGLPostProcessingPass} class is used internally, refer to its documentation for more info.\n *\n * ### Binding WebGL buffers and flushing data into them\n *\n *   Data that must be passed to the GPU has to be transferred using {@link module:ol/webgl/Buffer~WebGLArrayBuffer} objects.\n *   A buffer has to be created only once, but must be bound every time the buffer content will be used for rendering.\n *   This is done using {@link bindBuffer}.\n *   When the buffer's array content has changed, the new data has to be flushed to the GPU memory; this is done using\n *   {@link flushBufferData}. Note: this operation is expensive and should be done as infrequently as possible.\n *\n *   When binding an array buffer, a `target` parameter must be given: it should be either {@link module:ol/webgl.ARRAY_BUFFER}\n *   (if the buffer contains vertices data) or {@link module:ol/webgl.ELEMENT_ARRAY_BUFFER} (if the buffer contains indices data).\n *\n *   Examples below:\n *   ```js\n *   // at initialization phase\n *   const verticesBuffer = new WebGLArrayBuffer([], DYNAMIC_DRAW);\n *   const indicesBuffer = new WebGLArrayBuffer([], DYNAMIC_DRAW);\n *\n *   // when array values have changed\n *   helper.flushBufferData(ARRAY_BUFFER, this.verticesBuffer);\n *   helper.flushBufferData(ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n *\n *   // at rendering phase\n *   helper.bindBuffer(ARRAY_BUFFER, this.verticesBuffer);\n *   helper.bindBuffer(ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n *   ```\n *\n * ### Specifying attributes\n *\n *   The GPU only receives the data as arrays of numbers. These numbers must be handled differently depending on what it describes (position, texture coordinate...).\n *   Attributes are used to specify these uses. Use {@link enableAttributeArray_} and either\n *   the default attribute names in {@link module:ol/webgl/Helper.DefaultAttrib} or custom ones.\n *\n *   Please note that you will have to specify the type and offset of the attributes in the data array. You can refer to the documentation of [WebGLRenderingContext.vertexAttribPointer](https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer) for more explanation.\n *   ```js\n *   // here we indicate that the data array has the following structure:\n *   // [posX, posY, offsetX, offsetY, texCoordU, texCoordV, posX, posY, ...]\n *   helper.enableAttributes([\n *     {\n *        name: 'a_position',\n *        size: 2\n *     },\n *     {\n *       name: 'a_offset',\n *       size: 2\n *     },\n *     {\n *       name: 'a_texCoord',\n *       size: 2\n *     }\n *   ])\n *   ```\n *\n * ### Rendering primitives\n *\n *   Once all the steps above have been achieved, rendering primitives to the screen is done using {@link prepareDraw}, {@link drawElements} and {@link finalizeDraw}.\n *   ```js\n *   // frame preparation step\n *   helper.prepareDraw(frameState);\n *\n *   // call this for every data array that has to be rendered on screen\n *   helper.drawElements(0, this.indicesBuffer.getArray().length);\n *\n *   // finalize the rendering by applying post processes\n *   helper.finalizeDraw(frameState);\n *   ```\n *\n * For an example usage of this class, refer to {@link module:ol/renderer/webgl/PointsLayer~WebGLPointsLayerRenderer}.\n *\n *\n * @api\n */\n\n\nvar WebGLHelper =\n/** @class */\nfunction (_super) {\n  __extends(WebGLHelper, _super);\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n\n\n  function WebGLHelper(opt_options) {\n    var _this = _super.call(this) || this;\n\n    var options = opt_options || {};\n    /** @private */\n\n    _this.boundHandleWebGLContextLost_ = _this.handleWebGLContextLost.bind(_this);\n    /** @private */\n\n    _this.boundHandleWebGLContextRestored_ = _this.handleWebGLContextRestored.bind(_this);\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.canvasCacheKey_ = options.canvasCacheKey ? getSharedCanvasCacheKey(options.canvasCacheKey) : getUniqueCanvasCacheKey();\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n\n    _this.canvas_ = getCanvas(_this.canvasCacheKey_);\n    /**\n     * @private\n     * @type {WebGLRenderingContext}\n     */\n\n    _this.gl_ = getContext(_this.canvas_);\n    /**\n     * @private\n     * @type {!Object<string, BufferCacheEntry>}\n     */\n\n    _this.bufferCache_ = {};\n    /**\n     * @private\n     * @type {Object<string, Object>}\n     */\n\n    _this.extensionCache_ = {};\n    /**\n     * @private\n     * @type {WebGLProgram}\n     */\n\n    _this.currentProgram_ = null;\n\n    _this.canvas_.addEventListener(ContextEventType.LOST, _this.boundHandleWebGLContextLost_);\n\n    _this.canvas_.addEventListener(ContextEventType.RESTORED, _this.boundHandleWebGLContextRestored_);\n    /**\n     * @private\n     * @type {import(\"../transform.js\").Transform}\n     */\n\n\n    _this.offsetRotateMatrix_ = createTransform();\n    /**\n     * @private\n     * @type {import(\"../transform.js\").Transform}\n     */\n\n    _this.offsetScaleMatrix_ = createTransform();\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.tmpMat4_ = create();\n    /**\n     * @private\n     * @type {Object<string, WebGLUniformLocation>}\n     */\n\n    _this.uniformLocations_ = {};\n    /**\n     * @private\n     * @type {Object<string, number>}\n     */\n\n    _this.attribLocations_ = {};\n    /**\n     * Holds info about custom uniforms used in the post processing pass.\n     * If the uniform is a texture, the WebGL Texture object will be stored here.\n     * @type {Array<UniformInternalDescription>}\n     * @private\n     */\n\n    _this.uniforms_ = [];\n\n    if (options.uniforms) {\n      _this.setUniforms(options.uniforms);\n    }\n\n    var gl = _this.getGL();\n    /**\n     * An array of PostProcessingPass objects is kept in this variable, built from the steps provided in the\n     * options. If no post process was given, a default one is used (so as not to have to make an exception to\n     * the frame buffer logic).\n     * @type {Array<WebGLPostProcessingPass>}\n     * @private\n     */\n\n\n    _this.postProcessPasses_ = options.postProcesses ? options.postProcesses.map(function (options) {\n      return new WebGLPostProcessingPass({\n        webGlContext: gl,\n        scaleRatio: options.scaleRatio,\n        vertexShader: options.vertexShader,\n        fragmentShader: options.fragmentShader,\n        uniforms: options.uniforms\n      });\n    }) : [new WebGLPostProcessingPass({\n      webGlContext: gl\n    })];\n    /**\n     * @type {string|null}\n     * @private\n     */\n\n    _this.shaderCompileErrors_ = null;\n    /**\n     * @type {number}\n     * @private\n     */\n\n    _this.startTime_ = Date.now();\n    return _this;\n  }\n  /**\n   * @param {Object<string, UniformValue>} uniforms Uniform definitions.\n   */\n\n\n  WebGLHelper.prototype.setUniforms = function (uniforms) {\n    this.uniforms_ = [];\n\n    for (var name_1 in uniforms) {\n      this.uniforms_.push({\n        name: name_1,\n        value: uniforms[name_1]\n      });\n    }\n\n    this.uniformLocations_ = {};\n  };\n  /**\n   * @param {string} canvasCacheKey The canvas cache key.\n   * @return {boolean} The provided key matches the one this helper was constructed with.\n   */\n\n\n  WebGLHelper.prototype.canvasCacheKeyMatches = function (canvasCacheKey) {\n    return this.canvasCacheKey_ === getSharedCanvasCacheKey(canvasCacheKey);\n  };\n  /**\n   * Get a WebGL extension.  If the extension is not supported, null is returned.\n   * Extensions are cached after they are enabled for the first time.\n   * @param {string} name The extension name.\n   * @return {Object} The extension or null if not supported.\n   */\n\n\n  WebGLHelper.prototype.getExtension = function (name) {\n    if (name in this.extensionCache_) {\n      return this.extensionCache_[name];\n    }\n\n    var extension = this.gl_.getExtension(name);\n    this.extensionCache_[name] = extension;\n    return extension;\n  };\n  /**\n   * Just bind the buffer if it's in the cache. Otherwise create\n   * the WebGL buffer, bind it, populate it, and add an entry to\n   * the cache.\n   * @param {import(\"./Buffer\").default} buffer Buffer.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.bindBuffer = function (buffer) {\n    var gl = this.getGL();\n    var bufferKey = getUid(buffer);\n    var bufferCache = this.bufferCache_[bufferKey];\n\n    if (!bufferCache) {\n      var webGlBuffer = gl.createBuffer();\n      bufferCache = {\n        buffer: buffer,\n        webGlBuffer: webGlBuffer\n      };\n      this.bufferCache_[bufferKey] = bufferCache;\n    }\n\n    gl.bindBuffer(buffer.getType(), bufferCache.webGlBuffer);\n  };\n  /**\n   * Update the data contained in the buffer array; this is required for the\n   * new data to be rendered\n   * @param {import(\"./Buffer\").default} buffer Buffer.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.flushBufferData = function (buffer) {\n    var gl = this.getGL();\n    this.bindBuffer(buffer);\n    gl.bufferData(buffer.getType(), buffer.getArray(), buffer.getUsage());\n  };\n  /**\n   * @param {import(\"./Buffer.js\").default} buf Buffer.\n   */\n\n\n  WebGLHelper.prototype.deleteBuffer = function (buf) {\n    var gl = this.getGL();\n    var bufferKey = getUid(buf);\n    var bufferCacheEntry = this.bufferCache_[bufferKey];\n\n    if (bufferCacheEntry && !gl.isContextLost()) {\n      gl.deleteBuffer(bufferCacheEntry.webGlBuffer);\n    }\n\n    delete this.bufferCache_[bufferKey];\n  };\n  /**\n   * Clean up.\n   */\n\n\n  WebGLHelper.prototype.disposeInternal = function () {\n    this.canvas_.removeEventListener(ContextEventType.LOST, this.boundHandleWebGLContextLost_);\n    this.canvas_.removeEventListener(ContextEventType.RESTORED, this.boundHandleWebGLContextRestored_);\n    releaseCanvas(this.canvasCacheKey_);\n    delete this.gl_;\n    delete this.canvas_;\n  };\n  /**\n   * Clear the buffer & set the viewport to draw.\n   * Post process passes will be initialized here, the first one being bound as a render target for\n   * subsequent draw calls.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @param {boolean} [opt_disableAlphaBlend] If true, no alpha blending will happen.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.prepareDraw = function (frameState, opt_disableAlphaBlend) {\n    var gl = this.getGL();\n    var canvas = this.getCanvas();\n    var size = frameState.size;\n    var pixelRatio = frameState.pixelRatio;\n    canvas.width = size[0] * pixelRatio;\n    canvas.height = size[1] * pixelRatio;\n    canvas.style.width = size[0] + 'px';\n    canvas.style.height = size[1] + 'px';\n    gl.useProgram(this.currentProgram_); // loop backwards in post processes list\n\n    for (var i = this.postProcessPasses_.length - 1; i >= 0; i--) {\n      this.postProcessPasses_[i].init(frameState);\n    }\n\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    gl.clearColor(0.0, 0.0, 0.0, 0.0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.ONE, opt_disableAlphaBlend ? gl.ZERO : gl.ONE_MINUS_SRC_ALPHA);\n    gl.useProgram(this.currentProgram_);\n    this.applyFrameState(frameState);\n    this.applyUniforms(frameState);\n  };\n  /**\n   * Clear the render target & bind it for future draw operations.\n   * This is similar to `prepareDraw`, only post processes will not be applied.\n   * Note: the whole viewport will be drawn to the render target, regardless of its size.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @param {import(\"./RenderTarget.js\").default} renderTarget Render target to draw to\n   * @param {boolean} [opt_disableAlphaBlend] If true, no alpha blending will happen.\n   */\n\n\n  WebGLHelper.prototype.prepareDrawToRenderTarget = function (frameState, renderTarget, opt_disableAlphaBlend) {\n    var gl = this.getGL();\n    var size = renderTarget.getSize();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, renderTarget.getFramebuffer());\n    gl.viewport(0, 0, size[0], size[1]);\n    gl.bindTexture(gl.TEXTURE_2D, renderTarget.getTexture());\n    gl.clearColor(0.0, 0.0, 0.0, 0.0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.ONE, opt_disableAlphaBlend ? gl.ZERO : gl.ONE_MINUS_SRC_ALPHA);\n    gl.useProgram(this.currentProgram_);\n    this.applyFrameState(frameState);\n    this.applyUniforms(frameState);\n  };\n  /**\n   * Execute a draw call based on the currently bound program, texture, buffers, attributes.\n   * @param {number} start Start index.\n   * @param {number} end End index.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.drawElements = function (start, end) {\n    var gl = this.getGL();\n    this.getExtension('OES_element_index_uint');\n    var elementType = gl.UNSIGNED_INT;\n    var elementSize = 4;\n    var numItems = end - start;\n    var offsetInBytes = start * elementSize;\n    gl.drawElements(gl.TRIANGLES, numItems, elementType, offsetInBytes);\n  };\n  /**\n   * Apply the successive post process passes which will eventually render to the actual canvas.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState current frame state\n   * @param {function(WebGLRenderingContext, import(\"../PluggableMap.js\").FrameState):void} [preCompose] Called before composing.\n   * @param {function(WebGLRenderingContext, import(\"../PluggableMap.js\").FrameState):void} [postCompose] Called before composing.\n   */\n\n\n  WebGLHelper.prototype.finalizeDraw = function (frameState, preCompose, postCompose) {\n    // apply post processes using the next one as target\n    for (var i = 0, ii = this.postProcessPasses_.length; i < ii; i++) {\n      if (i === ii - 1) {\n        this.postProcessPasses_[i].apply(frameState, null, preCompose, postCompose);\n      } else {\n        this.postProcessPasses_[i].apply(frameState, this.postProcessPasses_[i + 1]);\n      }\n    }\n  };\n  /**\n   * @return {HTMLCanvasElement} Canvas.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.getCanvas = function () {\n    return this.canvas_;\n  };\n  /**\n   * Get the WebGL rendering context\n   * @return {WebGLRenderingContext} The rendering context.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.getGL = function () {\n    return this.gl_;\n  };\n  /**\n   * Sets the default matrix uniforms for a given frame state. This is called internally in `prepareDraw`.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n\n\n  WebGLHelper.prototype.applyFrameState = function (frameState) {\n    var size = frameState.size;\n    var rotation = frameState.viewState.rotation;\n    var offsetScaleMatrix = resetTransform(this.offsetScaleMatrix_);\n    scaleTransform(offsetScaleMatrix, 2 / size[0], 2 / size[1]);\n    var offsetRotateMatrix = resetTransform(this.offsetRotateMatrix_);\n\n    if (rotation !== 0) {\n      rotateTransform(offsetRotateMatrix, -rotation);\n    }\n\n    this.setUniformMatrixValue(DefaultUniform.OFFSET_SCALE_MATRIX, fromTransform(this.tmpMat4_, offsetScaleMatrix));\n    this.setUniformMatrixValue(DefaultUniform.OFFSET_ROTATION_MATRIX, fromTransform(this.tmpMat4_, offsetRotateMatrix));\n    this.setUniformFloatValue(DefaultUniform.TIME, (Date.now() - this.startTime_) * 0.001);\n    this.setUniformFloatValue(DefaultUniform.ZOOM, frameState.viewState.zoom);\n    this.setUniformFloatValue(DefaultUniform.RESOLUTION, frameState.viewState.resolution);\n  };\n  /**\n   * Sets the custom uniforms based on what was given in the constructor. This is called internally in `prepareDraw`.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n\n\n  WebGLHelper.prototype.applyUniforms = function (frameState) {\n    var gl = this.getGL();\n    var value;\n    var textureSlot = 0;\n    this.uniforms_.forEach(function (uniform) {\n      value = typeof uniform.value === 'function' ? uniform.value(frameState) : uniform.value; // apply value based on type\n\n      if (value instanceof HTMLCanvasElement || value instanceof HTMLImageElement || value instanceof ImageData) {\n        // create a texture & put data\n        if (!uniform.texture) {\n          uniform.prevValue = undefined;\n          uniform.texture = gl.createTexture();\n        }\n\n        gl.activeTexture(gl[\"TEXTURE\" + textureSlot]);\n        gl.bindTexture(gl.TEXTURE_2D, uniform.texture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        var imageReady = !(value instanceof HTMLImageElement) ||\n        /** @type {HTMLImageElement} */\n        value.complete;\n\n        if (imageReady && uniform.prevValue !== value) {\n          uniform.prevValue = value;\n          gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, value);\n        } // fill texture slots by increasing index\n\n\n        gl.uniform1i(this.getUniformLocation(uniform.name), textureSlot++);\n      } else if (Array.isArray(value) && value.length === 6) {\n        this.setUniformMatrixValue(uniform.name, fromTransform(this.tmpMat4_, value));\n      } else if (Array.isArray(value) && value.length <= 4) {\n        switch (value.length) {\n          case 2:\n            gl.uniform2f(this.getUniformLocation(uniform.name), value[0], value[1]);\n            return;\n\n          case 3:\n            gl.uniform3f(this.getUniformLocation(uniform.name), value[0], value[1], value[2]);\n            return;\n\n          case 4:\n            gl.uniform4f(this.getUniformLocation(uniform.name), value[0], value[1], value[2], value[3]);\n            return;\n\n          default:\n            return;\n        }\n      } else if (typeof value === 'number') {\n        gl.uniform1f(this.getUniformLocation(uniform.name), value);\n      }\n    }.bind(this));\n  };\n  /**\n   * Use a program.  If the program is already in use, this will return `false`.\n   * @param {WebGLProgram} program Program.\n   * @return {boolean} Changed.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.useProgram = function (program) {\n    if (program == this.currentProgram_) {\n      return false;\n    } else {\n      var gl = this.getGL();\n      gl.useProgram(program);\n      this.currentProgram_ = program;\n      this.uniformLocations_ = {};\n      this.attribLocations_ = {};\n      return true;\n    }\n  };\n  /**\n   * Will attempt to compile a vertex or fragment shader based on source\n   * On error, the shader will be returned but\n   * `gl.getShaderParameter(shader, gl.COMPILE_STATUS)` will return `true`\n   * Use `gl.getShaderInfoLog(shader)` to have details\n   * @param {string} source Shader source\n   * @param {ShaderType} type VERTEX_SHADER or FRAGMENT_SHADER\n   * @return {WebGLShader} Shader object\n   */\n\n\n  WebGLHelper.prototype.compileShader = function (source, type) {\n    var gl = this.getGL();\n    var shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    return shader;\n  };\n  /**\n   * Create a program for a vertex and fragment shader.  Throws if shader compilation fails.\n   * @param {string} fragmentShaderSource Fragment shader source.\n   * @param {string} vertexShaderSource Vertex shader source.\n   * @return {WebGLProgram} Program\n   * @api\n   */\n\n\n  WebGLHelper.prototype.getProgram = function (fragmentShaderSource, vertexShaderSource) {\n    var gl = this.getGL();\n    var fragmentShader = this.compileShader(fragmentShaderSource, gl.FRAGMENT_SHADER);\n    var vertexShader = this.compileShader(vertexShaderSource, gl.VERTEX_SHADER);\n    var program = gl.createProgram();\n    gl.attachShader(program, fragmentShader);\n    gl.attachShader(program, vertexShader);\n    gl.linkProgram(program);\n\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      var message = \"Fragment shader compliation failed: \" + gl.getShaderInfoLog(fragmentShader);\n      throw new Error(message);\n    }\n\n    gl.deleteShader(fragmentShader);\n\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      var message = \"Vertex shader compilation failed: \" + gl.getShaderInfoLog(vertexShader);\n      throw new Error(message);\n    }\n\n    gl.deleteShader(vertexShader);\n\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      var message = \"GL program linking failed: \" + gl.getShaderInfoLog(vertexShader);\n      throw new Error(message);\n    }\n\n    return program;\n  };\n  /**\n   * Will get the location from the shader or the cache\n   * @param {string} name Uniform name\n   * @return {WebGLUniformLocation} uniformLocation\n   * @api\n   */\n\n\n  WebGLHelper.prototype.getUniformLocation = function (name) {\n    if (this.uniformLocations_[name] === undefined) {\n      this.uniformLocations_[name] = this.getGL().getUniformLocation(this.currentProgram_, name);\n    }\n\n    return this.uniformLocations_[name];\n  };\n  /**\n   * Will get the location from the shader or the cache\n   * @param {string} name Attribute name\n   * @return {number} attribLocation\n   * @api\n   */\n\n\n  WebGLHelper.prototype.getAttributeLocation = function (name) {\n    if (this.attribLocations_[name] === undefined) {\n      this.attribLocations_[name] = this.getGL().getAttribLocation(this.currentProgram_, name);\n    }\n\n    return this.attribLocations_[name];\n  };\n  /**\n   * Modifies the given transform to apply the rotation/translation/scaling of the given frame state.\n   * The resulting transform can be used to convert world space coordinates to view coordinates.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../transform\").Transform} transform Transform to update.\n   * @return {import(\"../transform\").Transform} The updated transform object.\n   * @api\n   */\n\n\n  WebGLHelper.prototype.makeProjectionTransform = function (frameState, transform) {\n    var size = frameState.size;\n    var rotation = frameState.viewState.rotation;\n    var resolution = frameState.viewState.resolution;\n    var center = frameState.viewState.center;\n    resetTransform(transform);\n    composeTransform(transform, 0, 0, 2 / (resolution * size[0]), 2 / (resolution * size[1]), -rotation, -center[0], -center[1]);\n    return transform;\n  };\n  /**\n   * Give a value for a standard float uniform\n   * @param {string} uniform Uniform name\n   * @param {number} value Value\n   * @api\n   */\n\n\n  WebGLHelper.prototype.setUniformFloatValue = function (uniform, value) {\n    this.getGL().uniform1f(this.getUniformLocation(uniform), value);\n  };\n  /**\n   * Give a value for a standard matrix4 uniform\n   * @param {string} uniform Uniform name\n   * @param {Array<number>} value Matrix value\n   * @api\n   */\n\n\n  WebGLHelper.prototype.setUniformMatrixValue = function (uniform, value) {\n    this.getGL().uniformMatrix4fv(this.getUniformLocation(uniform), false, value);\n  };\n  /**\n   * Will set the currently bound buffer to an attribute of the shader program. Used by `#enableAttributes`\n   * internally.\n   * @param {string} attribName Attribute name\n   * @param {number} size Number of components per attributes\n   * @param {number} type UNSIGNED_INT, UNSIGNED_BYTE, UNSIGNED_SHORT or FLOAT\n   * @param {number} stride Stride in bytes (0 means attribs are packed)\n   * @param {number} offset Offset in bytes\n   * @private\n   */\n\n\n  WebGLHelper.prototype.enableAttributeArray_ = function (attribName, size, type, stride, offset) {\n    var location = this.getAttributeLocation(attribName); // the attribute has not been found in the shaders; do not enable it\n\n    if (location < 0) {\n      return;\n    }\n\n    this.getGL().enableVertexAttribArray(location);\n    this.getGL().vertexAttribPointer(location, size, type, false, stride, offset);\n  };\n  /**\n   * Will enable the following attributes to be read from the currently bound buffer,\n   * i.e. tell the GPU where to read the different attributes in the buffer. An error in the\n   * size/type/order of attributes will most likely break the rendering and throw a WebGL exception.\n   * @param {Array<AttributeDescription>} attributes Ordered list of attributes to read from the buffer\n   * @api\n   */\n\n\n  WebGLHelper.prototype.enableAttributes = function (attributes) {\n    var stride = computeAttributesStride(attributes);\n    var offset = 0;\n\n    for (var i = 0; i < attributes.length; i++) {\n      var attr = attributes[i];\n      this.enableAttributeArray_(attr.name, attr.size, attr.type || FLOAT, stride, offset);\n      offset += attr.size * getByteSizeFromType(attr.type);\n    }\n  };\n  /**\n   * WebGL context was lost\n   * @private\n   */\n\n\n  WebGLHelper.prototype.handleWebGLContextLost = function () {\n    clear(this.bufferCache_);\n    this.currentProgram_ = null;\n  };\n  /**\n   * WebGL context was restored\n   * @private\n   */\n\n\n  WebGLHelper.prototype.handleWebGLContextRestored = function () {};\n  /**\n   * Will create or reuse a given webgl texture and apply the given size. If no image data\n   * specified, the texture will be empty, otherwise image data will be used and the `size`\n   * parameter will be ignored.\n   * Note: wrap parameters are set to clamp to edge, min filter is set to linear.\n   * @param {Array<number>} size Expected size of the texture\n   * @param {ImageData|HTMLImageElement|HTMLCanvasElement} [opt_data] Image data/object to bind to the texture\n   * @param {WebGLTexture} [opt_texture] Existing texture to reuse\n   * @return {WebGLTexture} The generated texture\n   * @api\n   */\n\n\n  WebGLHelper.prototype.createTexture = function (size, opt_data, opt_texture) {\n    var gl = this.getGL();\n    var texture = opt_texture || gl.createTexture(); // set params & size\n\n    var level = 0;\n    var internalFormat = gl.RGBA;\n    var border = 0;\n    var format = gl.RGBA;\n    var type = gl.UNSIGNED_BYTE;\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n\n    if (opt_data) {\n      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, format, type, opt_data);\n    } else {\n      gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, size[0], size[1], border, format, type, null);\n    }\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    return texture;\n  };\n\n  return WebGLHelper;\n}(Disposable);\n/**\n * Compute a stride in bytes based on a list of attributes\n * @param {Array<AttributeDescription>} attributes Ordered list of attributes\n * @return {number} Stride, ie amount of values for each vertex in the vertex buffer\n * @api\n */\n\n\nexport function computeAttributesStride(attributes) {\n  var stride = 0;\n\n  for (var i = 0; i < attributes.length; i++) {\n    var attr = attributes[i];\n    stride += attr.size * getByteSizeFromType(attr.type);\n  }\n\n  return stride;\n}\n/**\n * Computes the size in byte of an attribute type.\n * @param {AttributeType} type Attribute type\n * @return {number} The size in bytes\n */\n\nfunction getByteSizeFromType(type) {\n  switch (type) {\n    case AttributeType.UNSIGNED_BYTE:\n      return Uint8Array.BYTES_PER_ELEMENT;\n\n    case AttributeType.UNSIGNED_SHORT:\n      return Uint16Array.BYTES_PER_ELEMENT;\n\n    case AttributeType.UNSIGNED_INT:\n      return Uint32Array.BYTES_PER_ELEMENT;\n\n    case AttributeType.FLOAT:\n    default:\n      return Float32Array.BYTES_PER_ELEMENT;\n  }\n}\n\nexport default WebGLHelper;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/renderer/webgl/Layer\n */\n\n\nimport LayerProperty from '../../layer/Property.js';\nimport LayerRenderer from '../Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport WebGLHelper from '../../webgl/Helper.js';\nimport { apply as applyTransform, compose as composeTransform, create as createTransform } from '../../transform.js';\nimport { containsCoordinate } from '../../extent.js';\n/**\n * @enum {string}\n */\n\nexport var WebGLWorkerMessageType = {\n  GENERATE_BUFFERS: 'GENERATE_BUFFERS'\n};\n/**\n * @typedef {Object} WebGLWorkerGenerateBuffersMessage\n * This message will trigger the generation of a vertex and an index buffer based on the given render instructions.\n * When the buffers are generated, the worked will send a message of the same type to the main thread, with\n * the generated buffers in it.\n * Note that any addition properties present in the message *will* be sent back to the main thread.\n * @property {WebGLWorkerMessageType} type Message type\n * @property {ArrayBuffer} renderInstructions Render instructions raw binary buffer.\n * @property {ArrayBuffer} [vertexBuffer] Vertices array raw binary buffer (sent by the worker).\n * @property {ArrayBuffer} [indexBuffer] Indices array raw binary buffer (sent by the worker).\n * @property {number} [customAttributesCount] Amount of custom attributes count in the render instructions.\n */\n\n/**\n * @typedef {Object} PostProcessesOptions\n * @property {number} [scaleRatio] Scale ratio; if < 1, the post process will render to a texture smaller than\n * the main canvas that will then be sampled up (useful for saving resource on blur steps).\n * @property {string} [vertexShader] Vertex shader source\n * @property {string} [fragmentShader] Fragment shader source\n * @property {Object<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process step\n */\n\n/**\n * @typedef {Object} Options\n * @property {Object<string,import(\"../../webgl/Helper\").UniformValue>} [uniforms] Uniform definitions for the post process steps\n * @property {Array<PostProcessesOptions>} [postProcesses] Post-processes definitions\n */\n\n/**\n * @classdesc\n * Base WebGL renderer class.\n * Holds all logic related to data manipulation & some common rendering logic\n * @template {import(\"../../layer/Layer.js\").default} LayerType\n * @extends {LayerRenderer<LayerType>}\n */\n\nvar WebGLLayerRenderer =\n/** @class */\nfunction (_super) {\n  __extends(WebGLLayerRenderer, _super);\n  /**\n   * @param {LayerType} layer Layer.\n   * @param {Options} [opt_options] Options.\n   */\n\n\n  function WebGLLayerRenderer(layer, opt_options) {\n    var _this = _super.call(this, layer) || this;\n\n    var options = opt_options || {};\n    /**\n     * The transform for viewport CSS pixels to rendered pixels.  This transform is only\n     * set before dispatching rendering events.\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n\n    _this.inversePixelTransform_ = createTransform();\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n\n    _this.pixelContext_ = null;\n    /**\n     * @private\n     */\n\n    _this.postProcesses_ = options.postProcesses;\n    /**\n     * @private\n     */\n\n    _this.uniforms_ = options.uniforms;\n    /**\n     * @type {WebGLHelper}\n     * @protected\n     */\n\n    _this.helper;\n    layer.addChangeListener(LayerProperty.MAP, _this.removeHelper_.bind(_this));\n    _this.dispatchPreComposeEvent = _this.dispatchPreComposeEvent.bind(_this);\n    _this.dispatchPostComposeEvent = _this.dispatchPostComposeEvent.bind(_this);\n    return _this;\n  }\n  /**\n   * @param {WebGLRenderingContext} context The WebGL rendering context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n\n\n  WebGLLayerRenderer.prototype.dispatchPreComposeEvent = function (context, frameState) {\n    var layer = this.getLayer();\n\n    if (layer.hasListener(RenderEventType.PRECOMPOSE)) {\n      var event_1 = new RenderEvent(RenderEventType.PRECOMPOSE, undefined, frameState, context);\n      layer.dispatchEvent(event_1);\n    }\n  };\n  /**\n   * @param {WebGLRenderingContext} context The WebGL rendering context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n\n\n  WebGLLayerRenderer.prototype.dispatchPostComposeEvent = function (context, frameState) {\n    var layer = this.getLayer();\n\n    if (layer.hasListener(RenderEventType.POSTCOMPOSE)) {\n      var event_2 = new RenderEvent(RenderEventType.POSTCOMPOSE, undefined, frameState, context);\n      layer.dispatchEvent(event_2);\n    }\n  };\n  /**\n   * Reset options (only handles uniforms).\n   * @param {Options} options Options.\n   */\n\n\n  WebGLLayerRenderer.prototype.reset = function (options) {\n    this.uniforms_ = options.uniforms;\n\n    if (this.helper) {\n      this.helper.setUniforms(this.uniforms_);\n    }\n  };\n\n  WebGLLayerRenderer.prototype.removeHelper_ = function () {\n    if (this.helper) {\n      this.helper.dispose();\n      delete this.helper;\n    }\n  };\n  /**\n   * Determine whether renderFrame should be called.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n\n\n  WebGLLayerRenderer.prototype.prepareFrame = function (frameState) {\n    if (this.getLayer().getSource()) {\n      var incrementGroup = true;\n      var groupNumber = -1;\n      var className = void 0;\n\n      for (var i = 0, ii = frameState.layerStatesArray.length; i < ii; i++) {\n        var layer = frameState.layerStatesArray[i].layer;\n        var renderer = layer.getRenderer();\n\n        if (!(renderer instanceof WebGLLayerRenderer)) {\n          incrementGroup = true;\n          continue;\n        }\n\n        var layerClassName = layer.getClassName();\n\n        if (incrementGroup || layerClassName !== className) {\n          groupNumber += 1;\n          incrementGroup = false;\n        }\n\n        className = layerClassName;\n\n        if (renderer === this) {\n          break;\n        }\n      }\n\n      var canvasCacheKey = 'map/' + frameState.mapId + '/group/' + groupNumber;\n\n      if (!this.helper || !this.helper.canvasCacheKeyMatches(canvasCacheKey)) {\n        if (this.helper) {\n          this.helper.dispose();\n        }\n\n        this.helper = new WebGLHelper({\n          postProcesses: this.postProcesses_,\n          uniforms: this.uniforms_,\n          canvasCacheKey: canvasCacheKey\n        });\n\n        if (className) {\n          this.helper.getCanvas().className = className;\n        }\n\n        this.afterHelperCreated();\n      }\n    }\n\n    return this.prepareFrameInternal(frameState);\n  };\n  /**\n   * @protected\n   */\n\n\n  WebGLLayerRenderer.prototype.afterHelperCreated = function () {};\n  /**\n   * Determine whether renderFrame should be called.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   * @protected\n   */\n\n\n  WebGLLayerRenderer.prototype.prepareFrameInternal = function (frameState) {\n    return true;\n  };\n  /**\n   * Clean up.\n   */\n\n\n  WebGLLayerRenderer.prototype.disposeInternal = function () {\n    this.removeHelper_();\n\n    _super.prototype.disposeInternal.call(this);\n  };\n  /**\n   * @param {import(\"../../render/EventType.js\").default} type Event type.\n   * @param {WebGLRenderingContext} context The rendering context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n\n\n  WebGLLayerRenderer.prototype.dispatchRenderEvent_ = function (type, context, frameState) {\n    var layer = this.getLayer();\n\n    if (layer.hasListener(type)) {\n      composeTransform(this.inversePixelTransform_, 0, 0, frameState.pixelRatio, -frameState.pixelRatio, 0, 0, -frameState.size[1]);\n      var event_3 = new RenderEvent(type, this.inversePixelTransform_, frameState, context);\n      layer.dispatchEvent(event_3);\n    }\n  };\n  /**\n   * @param {WebGLRenderingContext} context The rendering context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n\n\n  WebGLLayerRenderer.prototype.preRender = function (context, frameState) {\n    this.dispatchRenderEvent_(RenderEventType.PRERENDER, context, frameState);\n  };\n  /**\n   * @param {WebGLRenderingContext} context The rendering context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n\n\n  WebGLLayerRenderer.prototype.postRender = function (context, frameState) {\n    this.dispatchRenderEvent_(RenderEventType.POSTRENDER, context, frameState);\n  };\n  /**\n   * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @return {Uint8ClampedArray|Uint8Array} The result.  If there is no data at the pixel\n   *    location, null will be returned.  If there is data, but pixel values cannot be\n   *    returned, and empty array will be returned.\n   */\n\n\n  WebGLLayerRenderer.prototype.getDataAtPixel = function (pixel, frameState, hitTolerance) {\n    var renderPixel = applyTransform([frameState.pixelRatio, 0, 0, frameState.pixelRatio, 0, 0], pixel.slice());\n    var gl = this.helper.getGL();\n\n    if (!gl) {\n      return null;\n    }\n\n    var layer = this.getLayer();\n    var layerExtent = layer.getExtent();\n\n    if (layerExtent) {\n      var renderCoordinate = applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n      /** get only data inside of the layer extent */\n\n      if (!containsCoordinate(layerExtent, renderCoordinate)) {\n        return null;\n      }\n    }\n\n    var attributes = gl.getContextAttributes();\n\n    if (!attributes || !attributes.preserveDrawingBuffer) {\n      // we assume there is data at the given pixel (although there might not be)\n      return new Uint8Array();\n    }\n\n    var x = Math.round(renderPixel[0]);\n    var y = Math.round(renderPixel[1]);\n    var pixelContext = this.pixelContext_;\n\n    if (!pixelContext) {\n      var pixelCanvas = document.createElement('canvas');\n      pixelCanvas.width = 1;\n      pixelCanvas.height = 1;\n      pixelContext = pixelCanvas.getContext('2d');\n      this.pixelContext_ = pixelContext;\n    }\n\n    pixelContext.clearRect(0, 0, 1, 1);\n    var data;\n\n    try {\n      pixelContext.drawImage(gl.canvas, x, y, 1, 1, 0, 0, 1, 1);\n      data = pixelContext.getImageData(0, 0, 1, 1).data;\n    } catch (err) {\n      return data;\n    }\n\n    if (data[3] === 0) {\n      return null;\n    }\n\n    return data;\n  };\n\n  return WebGLLayerRenderer;\n}(LayerRenderer);\n\nvar tmpArray_ = [];\nvar bufferPositions_ = {\n  vertexPosition: 0,\n  indexPosition: 0\n};\n\nfunction writePointVertex(buffer, pos, x, y, index) {\n  buffer[pos + 0] = x;\n  buffer[pos + 1] = y;\n  buffer[pos + 2] = index;\n}\n/**\n * An object holding positions both in an index and a vertex buffer.\n * @typedef {Object} BufferPositions\n * @property {number} vertexPosition Position in the vertex buffer\n * @property {number} indexPosition Position in the index buffer\n */\n\n/**\n * Pushes a quad (two triangles) based on a point geometry\n * @param {Float32Array} instructions Array of render instructions for points.\n * @param {number} elementIndex Index from which render instructions will be read.\n * @param {Float32Array} vertexBuffer Buffer in the form of a typed array.\n * @param {Uint32Array} indexBuffer Buffer in the form of a typed array.\n * @param {number} customAttributesCount Amount of custom attributes for each element.\n * @param {BufferPositions} [bufferPositions] Buffer write positions; if not specified, positions will be set at 0.\n * @return {BufferPositions} New buffer positions where to write next\n * @property {number} vertexPosition New position in the vertex buffer where future writes should start.\n * @property {number} indexPosition New position in the index buffer where future writes should start.\n * @private\n */\n\n\nexport function writePointFeatureToBuffers(instructions, elementIndex, vertexBuffer, indexBuffer, customAttributesCount, bufferPositions) {\n  // This is for x, y and index\n  var baseVertexAttrsCount = 3;\n  var baseInstructionsCount = 2;\n  var stride = baseVertexAttrsCount + customAttributesCount;\n  var x = instructions[elementIndex + 0];\n  var y = instructions[elementIndex + 1]; // read custom numerical attributes on the feature\n\n  var customAttrs = tmpArray_;\n  customAttrs.length = customAttributesCount;\n\n  for (var i = 0; i < customAttrs.length; i++) {\n    customAttrs[i] = instructions[elementIndex + baseInstructionsCount + i];\n  }\n\n  var vPos = bufferPositions ? bufferPositions.vertexPosition : 0;\n  var iPos = bufferPositions ? bufferPositions.indexPosition : 0;\n  var baseIndex = vPos / stride; // push vertices for each of the four quad corners (first standard then custom attributes)\n\n  writePointVertex(vertexBuffer, vPos, x, y, 0);\n  customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n  vPos += stride;\n  writePointVertex(vertexBuffer, vPos, x, y, 1);\n  customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n  vPos += stride;\n  writePointVertex(vertexBuffer, vPos, x, y, 2);\n  customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n  vPos += stride;\n  writePointVertex(vertexBuffer, vPos, x, y, 3);\n  customAttrs.length && vertexBuffer.set(customAttrs, vPos + baseVertexAttrsCount);\n  vPos += stride;\n  indexBuffer[iPos++] = baseIndex;\n  indexBuffer[iPos++] = baseIndex + 1;\n  indexBuffer[iPos++] = baseIndex + 3;\n  indexBuffer[iPos++] = baseIndex + 1;\n  indexBuffer[iPos++] = baseIndex + 2;\n  indexBuffer[iPos++] = baseIndex + 3;\n  bufferPositions_.vertexPosition = vPos;\n  bufferPositions_.indexPosition = iPos;\n  return bufferPositions_;\n}\n/**\n * Returns a texture of 1x1 pixel, white\n * @private\n * @return {ImageData} Image data.\n */\n\nexport function getBlankImageData() {\n  var canvas = document.createElement('canvas');\n  var image = canvas.getContext('2d').createImageData(1, 1);\n  image.data[0] = 255;\n  image.data[1] = 255;\n  image.data[2] = 255;\n  image.data[3] = 255;\n  return image;\n}\n/**\n * Generates a color array based on a numerical id\n * Note: the range for each component is 0 to 1 with 256 steps\n * @param {number} id Id\n * @param {Array<number>} [opt_array] Reusable array\n * @return {Array<number>} Color array containing the encoded id\n */\n\nexport function colorEncodeId(id, opt_array) {\n  var array = opt_array || [];\n  var radix = 256;\n  var divide = radix - 1;\n  array[0] = Math.floor(id / radix / radix / radix) / divide;\n  array[1] = Math.floor(id / radix / radix) % radix / divide;\n  array[2] = Math.floor(id / radix) % radix / divide;\n  array[3] = id % radix / divide;\n  return array;\n}\n/**\n * Reads an id from a color-encoded array\n * Note: the expected range for each component is 0 to 1 with 256 steps.\n * @param {Array<number>} color Color array containing the encoded id\n * @return {number} Decoded id\n */\n\nexport function colorDecodeId(color) {\n  var id = 0;\n  var radix = 256;\n  var mult = radix - 1;\n  id += Math.round(color[0] * radix * radix * radix * mult);\n  id += Math.round(color[1] * radix * radix * mult);\n  id += Math.round(color[2] * radix * mult);\n  id += Math.round(color[3] * mult);\n  return id;\n}\nexport default WebGLLayerRenderer;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/renderer/webgl/TileLayer\n */\n\n\nimport LRUCache from '../../structs/LRUCache.js';\nimport State from '../../source/State.js';\nimport TileRange from '../../TileRange.js';\nimport TileState from '../../TileState.js';\nimport TileTexture from '../../webgl/TileTexture.js';\nimport WebGLArrayBuffer from '../../webgl/Buffer.js';\nimport WebGLLayerRenderer from './Layer.js';\nimport { AttributeType } from '../../webgl/Helper.js';\nimport { ELEMENT_ARRAY_BUFFER, STATIC_DRAW } from '../../webgl.js';\nimport { compose as composeTransform, create as createTransform } from '../../transform.js';\nimport { create as createMat4, fromTransform as mat4FromTransform } from '../../vec/mat4.js';\nimport { createOrUpdate as createTileCoord, getKeyZXY, getKey as getTileCoordKey } from '../../tilecoord.js';\nimport { fromUserExtent } from '../../proj.js';\nimport { getIntersection } from '../../extent.js';\nimport { getUid } from '../../util.js';\nimport { isEmpty } from '../../extent.js';\nimport { numberSafeCompareFunction } from '../../array.js';\nimport { toSize } from '../../size.js';\nexport var Uniforms = {\n  TILE_TEXTURE_ARRAY: 'u_tileTextures',\n  TILE_TRANSFORM: 'u_tileTransform',\n  TRANSITION_ALPHA: 'u_transitionAlpha',\n  DEPTH: 'u_depth',\n  TEXTURE_PIXEL_WIDTH: 'u_texturePixelWidth',\n  TEXTURE_PIXEL_HEIGHT: 'u_texturePixelHeight',\n  RESOLUTION: 'u_resolution',\n  ZOOM: 'u_zoom'\n};\nexport var Attributes = {\n  TEXTURE_COORD: 'a_textureCoord'\n};\n/**\n * @type {Array<import('../../webgl/Helper.js').AttributeDescription>}\n */\n\nvar attributeDescriptions = [{\n  name: Attributes.TEXTURE_COORD,\n  size: 2,\n  type: AttributeType.FLOAT\n}];\n/**\n * @type {Object<string, boolean>}\n */\n\nvar empty = {};\n/**\n * Transform a zoom level into a depth value ranging from -1 to 1.\n * @param {number} z A zoom level.\n * @return {number} A depth value.\n */\n\nfunction depthForZ(z) {\n  return 2 * (1 - 1 / (z + 1)) - 1;\n}\n/**\n * Add a tile texture to the lookup.\n * @param {Object<number, Array<import(\"../../webgl/TileTexture.js\").default>>} tileTexturesByZ Lookup of\n * tile textures by zoom level.\n * @param {import(\"../../webgl/TileTexture.js\").default} tileTexture A tile texture.\n * @param {number} z The zoom level.\n */\n\n\nfunction addTileTextureToLookup(tileTexturesByZ, tileTexture, z) {\n  if (!(z in tileTexturesByZ)) {\n    tileTexturesByZ[z] = [];\n  }\n\n  tileTexturesByZ[z].push(tileTexture);\n}\n/**\n * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n * @param {import(\"../../extent.js\").Extent} extent The frame extent.\n * @return {import(\"../../extent.js\").Extent} Frame extent intersected with layer extents.\n */\n\n\nfunction getRenderExtent(frameState, extent) {\n  var layerState = frameState.layerStatesArray[frameState.layerIndex];\n\n  if (layerState.extent) {\n    extent = getIntersection(extent, fromUserExtent(layerState.extent, frameState.viewState.projection));\n  }\n\n  var source =\n  /** {import(\"../../source/Tile.js\").default} */\n  layerState.layer.getSource();\n\n  if (!source.getWrapX()) {\n    var gridExtent = source.getTileGridForProjection(frameState.viewState.projection).getExtent();\n\n    if (gridExtent) {\n      extent = getIntersection(extent, gridExtent);\n    }\n  }\n\n  return extent;\n}\n/**\n * @typedef {Object} Options\n * @property {string} vertexShader Vertex shader source.\n * @property {string} fragmentShader Fragment shader source.\n * @property {Object<string, import(\"../../webgl/Helper\").UniformValue>} [uniforms] Additional uniforms\n * made available to shaders.\n * @property {Array<import(\"../../webgl/PaletteTexture.js\").default>} [paletteTextures] Palette textures.\n * @property {number} [cacheSize=512] The texture cache size.\n */\n\n/**\n * @typedef {import(\"../../layer/WebGLTile.js\").default} LayerType\n */\n\n/**\n * @classdesc\n * WebGL renderer for tile layers.\n * @extends {WebGLLayerRenderer<LayerType>}\n * @api\n */\n\n\nvar WebGLTileLayerRenderer =\n/** @class */\nfunction (_super) {\n  __extends(WebGLTileLayerRenderer, _super);\n  /**\n   * @param {LayerType} tileLayer Tile layer.\n   * @param {Options} options Options.\n   */\n\n\n  function WebGLTileLayerRenderer(tileLayer, options) {\n    var _this = _super.call(this, tileLayer, {\n      uniforms: options.uniforms\n    }) || this;\n    /**\n     * This transform converts tile i, j coordinates to screen coordinates.\n     * @type {import(\"../../transform.js\").Transform}\n     * @private\n     */\n\n\n    _this.tileTransform_ = createTransform();\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n\n    _this.tempMat4_ = createMat4();\n    /**\n     * @type {import(\"../../TileRange.js\").default}\n     * @private\n     */\n\n    _this.tempTileRange_ = new TileRange(0, 0, 0, 0);\n    /**\n     * @type {import(\"../../tilecoord.js\").TileCoord}\n     * @private\n     */\n\n    _this.tempTileCoord_ = createTileCoord(0, 0, 0);\n    /**\n     * @type {import(\"../../size.js\").Size}\n     * @private\n     */\n\n    _this.tempSize_ = [0, 0];\n    /**\n     * @type {WebGLProgram}\n     * @private\n     */\n\n    _this.program_;\n    /**\n     * @private\n     */\n\n    _this.vertexShader_ = options.vertexShader;\n    /**\n     * @private\n     */\n\n    _this.fragmentShader_ = options.fragmentShader;\n    /**\n     * Tiles are rendered as a quad with the following structure:\n     *\n     *  [P3]---------[P2]\n     *   |`           |\n     *   |  `     B   |\n     *   |    `       |\n     *   |      `     |\n     *   |   A    `   |\n     *   |          ` |\n     *  [P0]---------[P1]\n     *\n     * Triangle A: P0, P1, P3\n     * Triangle B: P1, P2, P3\n     *\n     * @private\n     */\n\n    _this.indices_ = new WebGLArrayBuffer(ELEMENT_ARRAY_BUFFER, STATIC_DRAW);\n\n    _this.indices_.fromArray([0, 1, 3, 1, 2, 3]);\n\n    var cacheSize = options.cacheSize !== undefined ? options.cacheSize : 512;\n    /**\n     * @type {import(\"../../structs/LRUCache.js\").default<import(\"../../webgl/TileTexture.js\").default>}\n     * @private\n     */\n\n    _this.tileTextureCache_ = new LRUCache(cacheSize);\n    /**\n     * @type {Array<import(\"../../webgl/PaletteTexture.js\").default>}\n     * @private\n     */\n\n    _this.paletteTextures_ = options.paletteTextures || [];\n    return _this;\n  }\n  /**\n   * @param {Options} options Options.\n   */\n\n\n  WebGLTileLayerRenderer.prototype.reset = function (options) {\n    _super.prototype.reset.call(this, {\n      uniforms: options.uniforms\n    });\n\n    this.vertexShader_ = options.vertexShader;\n    this.fragmentShader_ = options.fragmentShader;\n    this.paletteTextures_ = options.paletteTextures || [];\n\n    if (this.helper) {\n      this.program_ = this.helper.getProgram(this.fragmentShader_, this.vertexShader_);\n    }\n  };\n\n  WebGLTileLayerRenderer.prototype.afterHelperCreated = function () {\n    this.program_ = this.helper.getProgram(this.fragmentShader_, this.vertexShader_);\n    this.helper.flushBufferData(this.indices_);\n  };\n  /**\n   * @param {import(\"../../webgl/TileTexture\").TileType} tile Tile.\n   * @return {boolean} Tile is drawable.\n   * @private\n   */\n\n\n  WebGLTileLayerRenderer.prototype.isDrawableTile_ = function (tile) {\n    var tileLayer = this.getLayer();\n    var tileState = tile.getState();\n    var useInterimTilesOnError = tileLayer.getUseInterimTilesOnError();\n    return tileState == TileState.LOADED || tileState == TileState.EMPTY || tileState == TileState.ERROR && !useInterimTilesOnError;\n  };\n  /**\n   * Determine whether renderFrame should be called.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n\n\n  WebGLTileLayerRenderer.prototype.prepareFrameInternal = function (frameState) {\n    var layer = this.getLayer();\n    var source = layer.getSource();\n\n    if (!source) {\n      return false;\n    }\n\n    if (isEmpty(getRenderExtent(frameState, frameState.extent))) {\n      return false;\n    }\n\n    return source.getState() === State.READY;\n  };\n  /**\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../extent.js\").Extent} extent The extent to be rendered.\n   * @param {number} z The zoom level.\n   * @param {Object<number, Array<TileTexture>>} tileTexturesByZ The zoom level.\n   */\n\n\n  WebGLTileLayerRenderer.prototype.enqueueTiles = function (frameState, extent, z, tileTexturesByZ) {\n    var viewState = frameState.viewState;\n    var tileLayer = this.getLayer();\n    var tileSource = tileLayer.getSource();\n    var tileGrid = tileSource.getTileGridForProjection(viewState.projection);\n    var tileTextureCache = this.tileTextureCache_;\n    var tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z, this.tempTileRange_);\n    var tileSourceKey = getUid(tileSource);\n\n    if (!(tileSourceKey in frameState.wantedTiles)) {\n      frameState.wantedTiles[tileSourceKey] = {};\n    }\n\n    var wantedTiles = frameState.wantedTiles[tileSourceKey];\n    var tileResolution = tileGrid.getResolution(z);\n\n    for (var x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (var y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        var tileCoord = createTileCoord(z, x, y, this.tempTileCoord_);\n        var tileCoordKey = getTileCoordKey(tileCoord);\n        /**\n         * @type {TileTexture}\n         */\n\n        var tileTexture = void 0;\n        /**\n         * @type {import(\"../../webgl/TileTexture\").TileType}\n         */\n\n        var tile = void 0;\n\n        if (tileTextureCache.containsKey(tileCoordKey)) {\n          tileTexture = tileTextureCache.get(tileCoordKey);\n          tile = tileTexture.tile;\n        }\n\n        if (!tileTexture || tileTexture.tile.key !== tileSource.getKey()) {\n          tile = tileSource.getTile(z, x, y, frameState.pixelRatio, viewState.projection);\n\n          if (!tileTexture) {\n            tileTexture = new TileTexture(tile, tileGrid, this.helper);\n            tileTextureCache.set(tileCoordKey, tileTexture);\n          } else {\n            if (this.isDrawableTile_(tile)) {\n              tileTexture.setTile(tile);\n            } else {\n              var interimTile =\n              /** @type {import(\"../../webgl/TileTexture\").TileType} */\n              tile.getInterimTile();\n              tileTexture.setTile(interimTile);\n            }\n          }\n        }\n\n        addTileTextureToLookup(tileTexturesByZ, tileTexture, z);\n        var tileQueueKey = tile.getKey();\n        wantedTiles[tileQueueKey] = true;\n\n        if (tile.getState() === TileState.IDLE) {\n          if (!frameState.tileQueue.isKeyQueued(tileQueueKey)) {\n            frameState.tileQueue.enqueue([tile, tileSourceKey, tileGrid.getTileCoordCenter(tileCoord), tileResolution]);\n          }\n        }\n      }\n    }\n  };\n  /**\n   * Render the layer.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {HTMLElement} The rendered element.\n   */\n\n\n  WebGLTileLayerRenderer.prototype.renderFrame = function (frameState) {\n    var gl = this.helper.getGL();\n    this.preRender(gl, frameState);\n    var viewState = frameState.viewState;\n    var tileLayer = this.getLayer();\n    var tileSource = tileLayer.getSource();\n    var tileGrid = tileSource.getTileGridForProjection(viewState.projection);\n    var extent = getRenderExtent(frameState, frameState.extent);\n    var z = tileGrid.getZForResolution(viewState.resolution, tileSource.zDirection);\n    /**\n     * @type {Object<number, Array<import(\"../../webgl/TileTexture.js\").default>>}\n     */\n\n    var tileTexturesByZ = {};\n\n    if (frameState.nextExtent) {\n      var targetZ = tileGrid.getZForResolution(viewState.nextResolution, tileSource.zDirection);\n      var nextExtent = getRenderExtent(frameState, frameState.nextExtent);\n      this.enqueueTiles(frameState, nextExtent, targetZ, tileTexturesByZ);\n    }\n\n    this.enqueueTiles(frameState, extent, z, tileTexturesByZ);\n    /**\n     * A lookup of alpha values for tiles at the target rendering resolution\n     * for tiles that are in transition.  If a tile coord key is absent from\n     * this lookup, the tile should be rendered at alpha 1.\n     * @type {Object<string, number>}\n     */\n\n    var alphaLookup = {};\n    var uid = getUid(this);\n    var time = frameState.time;\n    var blend = false; // look for cached tiles to use if a target tile is not ready\n\n    var tileTextures = tileTexturesByZ[z];\n\n    for (var i = 0, ii = tileTextures.length; i < ii; ++i) {\n      var tileTexture = tileTextures[i];\n      var tile = tileTexture.tile;\n      var tileCoord = tile.tileCoord;\n\n      if (tileTexture.loaded) {\n        var alpha = tile.getAlpha(uid, time);\n\n        if (alpha === 1) {\n          // no need to look for alt tiles\n          tile.endTransition(uid);\n          continue;\n        }\n\n        blend = true;\n        var tileCoordKey = getTileCoordKey(tileCoord);\n        alphaLookup[tileCoordKey] = alpha;\n      } // first look for child tiles (at z + 1)\n\n\n      var coveredByChildren = this.findAltTiles_(tileGrid, tileCoord, z + 1, tileTexturesByZ);\n\n      if (coveredByChildren) {\n        continue;\n      } // next look for parent tiles\n\n\n      var minZoom = tileGrid.getMinZoom();\n\n      for (var parentZ = z - 1; parentZ >= minZoom; --parentZ) {\n        var coveredByParent = this.findAltTiles_(tileGrid, tileCoord, parentZ, tileTexturesByZ);\n\n        if (coveredByParent) {\n          break;\n        }\n      }\n    }\n\n    this.helper.useProgram(this.program_);\n    this.helper.prepareDraw(frameState, !blend);\n    var zs = Object.keys(tileTexturesByZ).map(Number).sort(numberSafeCompareFunction);\n    var centerX = viewState.center[0];\n    var centerY = viewState.center[1];\n\n    for (var j = 0, jj = zs.length; j < jj; ++j) {\n      var tileZ = zs[j];\n      var tileResolution = tileGrid.getResolution(tileZ);\n      var tileSize = toSize(tileGrid.getTileSize(tileZ), this.tempSize_);\n      var tileOrigin = tileGrid.getOrigin(tileZ);\n      var centerI = (centerX - tileOrigin[0]) / (tileSize[0] * tileResolution);\n      var centerJ = (tileOrigin[1] - centerY) / (tileSize[1] * tileResolution);\n      var tileScale = viewState.resolution / tileResolution;\n      var depth = depthForZ(tileZ);\n      var tileTextures_1 = tileTexturesByZ[tileZ];\n\n      for (var i = 0, ii = tileTextures_1.length; i < ii; ++i) {\n        var tileTexture = tileTextures_1[i];\n\n        if (!tileTexture.loaded) {\n          continue;\n        }\n\n        var tile = tileTexture.tile;\n        var tileCoord = tile.tileCoord;\n        var tileCoordKey = getTileCoordKey(tileCoord);\n        var tileCenterI = tileCoord[1];\n        var tileCenterJ = tileCoord[2];\n        composeTransform(this.tileTransform_, 0, 0, 2 / (frameState.size[0] * tileScale / tileSize[0]), -2 / (frameState.size[1] * tileScale / tileSize[1]), viewState.rotation, -(centerI - tileCenterI), -(centerJ - tileCenterJ));\n        this.helper.setUniformMatrixValue(Uniforms.TILE_TRANSFORM, mat4FromTransform(this.tempMat4_, this.tileTransform_));\n        this.helper.bindBuffer(tileTexture.coords);\n        this.helper.bindBuffer(this.indices_);\n        this.helper.enableAttributes(attributeDescriptions);\n        var textureSlot = 0;\n\n        while (textureSlot < tileTexture.textures.length) {\n          var textureProperty = 'TEXTURE' + textureSlot;\n          var uniformName = Uniforms.TILE_TEXTURE_ARRAY + \"[\" + textureSlot + \"]\";\n          gl.activeTexture(gl[textureProperty]);\n          gl.bindTexture(gl.TEXTURE_2D, tileTexture.textures[textureSlot]);\n          gl.uniform1i(this.helper.getUniformLocation(uniformName), textureSlot);\n          ++textureSlot;\n        }\n\n        for (var paletteIndex = 0; paletteIndex < this.paletteTextures_.length; ++paletteIndex) {\n          var paletteTexture = this.paletteTextures_[paletteIndex];\n          gl.activeTexture(gl['TEXTURE' + textureSlot]);\n          var texture = paletteTexture.getTexture(gl);\n          gl.bindTexture(gl.TEXTURE_2D, texture);\n          gl.uniform1i(this.helper.getUniformLocation(paletteTexture.name), textureSlot);\n          ++textureSlot;\n        }\n\n        var alpha = tileCoordKey in alphaLookup ? alphaLookup[tileCoordKey] : 1;\n\n        if (alpha < 1) {\n          frameState.animate = true;\n        }\n\n        this.helper.setUniformFloatValue(Uniforms.TRANSITION_ALPHA, alpha);\n        this.helper.setUniformFloatValue(Uniforms.DEPTH, depth);\n        this.helper.setUniformFloatValue(Uniforms.TEXTURE_PIXEL_WIDTH, tileSize[0]);\n        this.helper.setUniformFloatValue(Uniforms.TEXTURE_PIXEL_HEIGHT, tileSize[1]);\n        this.helper.setUniformFloatValue(Uniforms.RESOLUTION, viewState.resolution);\n        this.helper.setUniformFloatValue(Uniforms.ZOOM, viewState.zoom);\n        this.helper.drawElements(0, this.indices_.getSize());\n      }\n    }\n\n    this.helper.finalizeDraw(frameState, this.dispatchPreComposeEvent, this.dispatchPostComposeEvent);\n    var canvas = this.helper.getCanvas();\n    var tileTextureCache = this.tileTextureCache_;\n\n    while (tileTextureCache.canExpireCache()) {\n      var tileTexture = tileTextureCache.pop();\n      tileTexture.dispose();\n    } // TODO: let the renderers manage their own cache instead of managing the source cache\n\n    /**\n     * Here we unconditionally expire the source cache since the renderer maintains\n     * its own cache.\n     * @param {import(\"../../PluggableMap.js\").default} map Map.\n     * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n     */\n\n\n    var postRenderFunction = function postRenderFunction(map, frameState) {\n      tileSource.expireCache(frameState.viewState.projection, empty);\n    };\n\n    frameState.postRenderFunctions.push(postRenderFunction);\n    this.postRender(gl, frameState);\n    return canvas;\n  };\n  /**\n   * Look for tiles covering the provided tile coordinate at an alternate\n   * zoom level.  Loaded tiles will be added to the provided tile texture lookup.\n   * @param {import(\"../../tilegrid/TileGrid.js\").default} tileGrid The tile grid.\n   * @param {import(\"../../tilecoord.js\").TileCoord} tileCoord The target tile coordinate.\n   * @param {number} altZ The alternate zoom level.\n   * @param {Object<number, Array<import(\"../../webgl/TileTexture.js\").default>>} tileTexturesByZ Lookup of\n   * tile textures by zoom level.\n   * @return {boolean} The tile coordinate is covered by loaded tiles at the alternate zoom level.\n   * @private\n   */\n\n\n  WebGLTileLayerRenderer.prototype.findAltTiles_ = function (tileGrid, tileCoord, altZ, tileTexturesByZ) {\n    var tileRange = tileGrid.getTileRangeForTileCoordAndZ(tileCoord, altZ, this.tempTileRange_);\n\n    if (!tileRange) {\n      return false;\n    }\n\n    var covered = true;\n    var tileTextureCache = this.tileTextureCache_;\n\n    for (var x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (var y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        var cacheKey = getKeyZXY(altZ, x, y);\n        var loaded = false;\n\n        if (tileTextureCache.containsKey(cacheKey)) {\n          var tileTexture = tileTextureCache.get(cacheKey);\n\n          if (tileTexture.loaded) {\n            addTileTextureToLookup(tileTexturesByZ, tileTexture, altZ);\n            loaded = true;\n          }\n        }\n\n        if (!loaded) {\n          covered = false;\n        }\n      }\n    }\n\n    return covered;\n  };\n  /**\n   * Clean up.\n   */\n\n\n  WebGLTileLayerRenderer.prototype.disposeInternal = function () {\n    var helper = this.helper;\n    var gl = helper.getGL();\n    helper.deleteBuffer(this.indices_);\n    delete this.indices_;\n    gl.deleteProgram(this.program_);\n    delete this.program_;\n    var tileTextureCache = this.tileTextureCache_;\n    tileTextureCache.forEach(function (tileTexture) {\n      tileTexture.dispose();\n    });\n    tileTextureCache.clear();\n    delete this.tileTextureCache_;\n\n    _super.prototype.disposeInternal.call(this);\n  };\n\n  return WebGLTileLayerRenderer;\n}(WebGLLayerRenderer);\n/**\n * @function\n * @return {import(\"../../layer/WebGLTile.js\").default}\n */\n\n\nWebGLTileLayerRenderer.prototype.getLayer;\nexport default WebGLTileLayerRenderer;","/**\n * @module ol/webgl/PaletteTexture\n */\nvar PaletteTexture =\n/** @class */\nfunction () {\n  /**\n   * @param {string} name The name of the texture.\n   * @param {Uint8Array} data The texture data.\n   */\n  function PaletteTexture(name, data) {\n    this.name = name;\n    this.data = data;\n    /**\n     * @type {WebGLTexture}\n     * @private\n     */\n\n    this.texture_ = null;\n  }\n  /**\n   * @param {WebGLRenderingContext} gl Rendering context.\n   * @return {WebGLTexture} The texture.\n   */\n\n\n  PaletteTexture.prototype.getTexture = function (gl) {\n    if (!this.texture_) {\n      var texture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.data.length / 4, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, this.data);\n      this.texture_ = texture;\n    }\n\n    return this.texture_;\n  };\n\n  return PaletteTexture;\n}();\n\nexport default PaletteTexture;","/**\n * Operators and utilities used for style expressions\n * @module ol/style/expressions\n */\nimport PaletteTexture from '../webgl/PaletteTexture.js';\nimport { Uniforms } from '../renderer/webgl/TileLayer.js';\nimport { asArray, fromString, isStringColor } from '../color.js';\nimport { log2 } from '../math.js';\n/**\n * Base type used for literal style parameters; can be a number literal or the output of an operator,\n * which in turns takes {@link import(\"./expressions.js\").ExpressionValue} arguments.\n *\n * The following operators can be used:\n *\n * * Reading operators:\n *   * `['band', bandIndex, xOffset, yOffset]` For tile layers only. Fetches pixel values from band\n *     `bandIndex` of the source's data. The first `bandIndex` of the source data is `1`. Fetched values\n *     are in the 0..1 range. {@link import(\"../source/TileImage.js\").default} sources have 4 bands: red,\n *     green, blue and alpha. {@link import(\"../source/DataTile.js\").default} sources can have any number\n *     of bands, depending on the underlying data source and\n *     {@link import(\"../source/GeoTIFF.js\").Options configuration}. `xOffset` and `yOffset` are optional\n *     and allow specifying pixel offsets for x and y. This is used for sampling data from neighboring pixels.\n *   * `['get', 'attributeName']` fetches a feature attribute (it will be prefixed by `a_` in the shader)\n *     Note: those will be taken from the attributes provided to the renderer\n *   * `['resolution']` returns the current resolution\n *   * `['time']` returns the time in seconds since the creation of the layer\n *   * `['var', 'varName']` fetches a value from the style variables, or 0 if undefined\n *   * `['zoom']` returns the current zoom level\n *\n * * Math operators:\n *   * `['*', value1, value2]` multiplies `value1` by `value2`\n *   * `['/', value1, value2]` divides `value1` by `value2`\n *   * `['+', value1, value2]` adds `value1` and `value2`\n *   * `['-', value1, value2]` subtracts `value2` from `value1`\n *   * `['clamp', value, low, high]` clamps `value` between `low` and `high`\n *   * `['%', value1, value2]` returns the result of `value1 % value2` (modulo)\n *   * `['^', value1, value2]` returns the value of `value1` raised to the `value2` power\n *   * `['abs', value1]` returns the absolute value of `value1`\n *   * `['sin', value1]` returns the sine of `value1`\n *   * `['cos', value1]` returns the cosine of `value1`\n *   * `['atan', value1, value2]` returns `atan2(value1, value2)`. If `value2` is not provided, returns `atan(value1)`\n *\n * * Transform operators:\n *   * `['case', condition1, output1, ...conditionN, outputN, fallback]` selects the first output whose corresponding\n *     condition evaluates to `true`. If no match is found, returns the `fallback` value.\n *     All conditions should be `boolean`, output and fallback can be any kind.\n *   * `['match', input, match1, output1, ...matchN, outputN, fallback]` compares the `input` value against all\n *     provided `matchX` values, returning the output associated with the first valid match. If no match is found,\n *     returns the `fallback` value.\n *     `input` and `matchX` values must all be of the same type, and can be `number` or `string`. `outputX` and\n *     `fallback` values must be of the same type, and can be of any kind.\n *   * `['interpolate', interpolation, input, stop1, output1, ...stopN, outputN]` returns a value by interpolating between\n *     pairs of inputs and outputs; `interpolation` can either be `['linear']` or `['exponential', base]` where `base` is\n *     the rate of increase from stop A to stop B (i.e. power to which the interpolation ratio is raised); a value\n *     of 1 is equivalent to `['linear']`.\n *     `input` and `stopX` values must all be of type `number`. `outputX` values can be `number` or `color` values.\n *     Note: `input` will be clamped between `stop1` and `stopN`, meaning that all output values will be comprised\n *     between `output1` and `outputN`.\n *\n * * Logical operators:\n *   * `['<', value1, value2]` returns `true` if `value1` is strictly lower than `value2`, or `false` otherwise.\n *   * `['<=', value1, value2]` returns `true` if `value1` is lower than or equals `value2`, or `false` otherwise.\n *   * `['>', value1, value2]` returns `true` if `value1` is strictly greater than `value2`, or `false` otherwise.\n *   * `['>=', value1, value2]` returns `true` if `value1` is greater than or equals `value2`, or `false` otherwise.\n *   * `['==', value1, value2]` returns `true` if `value1` equals `value2`, or `false` otherwise.\n *   * `['!=', value1, value2]` returns `true` if `value1` does not equal `value2`, or `false` otherwise.\n *   * `['!', value1]` returns `false` if `value1` is `true` or greater than `0`, or `true` otherwise.\n *   * `['all', value1, value2, ...]` returns `true` if all the inputs are `true`, `false` otherwise.\n *   * `['any', value1, value2, ...]` returns `true` if any of the inputs are `true`, `false` otherwise.\n *   * `['between', value1, value2, value3]` returns `true` if `value1` is contained between `value2` and `value3`\n *     (inclusively), or `false` otherwise.\n *\n * * Conversion operators:\n *   * `['array', value1, ...valueN]` creates a numerical array from `number` values; please note that the amount of\n *     values can currently only be 2, 3 or 4.\n *   * `['color', red, green, blue, alpha]` creates a `color` value from `number` values; the `alpha` parameter is\n *     optional; if not specified, it will be set to 1.\n *     Note: `red`, `green` and `blue` components must be values between 0 and 255; `alpha` between 0 and 1.\n *   * `['palette', index, colors]` picks a `color` value from an array of colors using the given index; the `index`\n *     expression must evaluate to a number; the items in the `colors` array must be strings with hex colors\n *     (e.g. `'#86A136'`), colors using the rgba[a] functional notation (e.g. `'rgb(134, 161, 54)'` or `'rgba(134, 161, 54, 1)'`),\n *     named colors (e.g. `'red'`), or array literals with 3 ([r, g, b]) or 4 ([r, g, b, a]) values (with r, g, and b\n *     in the 0-255 range and a in the 0-1 range).\n *\n * Values can either be literals or another operator, as they will be evaluated recursively.\n * Literal values can be of the following types:\n * * `boolean`\n * * `number`\n * * `string`\n * * {@link module:ol/color~Color}\n *\n * @typedef {Array<*>|import(\"../color.js\").Color|string|number|boolean} ExpressionValue\n * @api\n */\n\n/**\n * Possible inferred types from a given value or expression.\n * Note: these are binary flags.\n * @enum {number}\n */\n\nexport var ValueTypes = {\n  NUMBER: 1,\n  STRING: 2,\n  COLOR: 4,\n  BOOLEAN: 8,\n  NUMBER_ARRAY: 16,\n  ANY: 31,\n  NONE: 0\n};\n/**\n * An operator declaration must contain two methods: `getReturnType` which returns a type based on\n * the operator arguments, and `toGlsl` which returns a GLSL-compatible string.\n * Note: both methods can process arguments recursively.\n * @typedef {Object} Operator\n * @property {function(Array<ExpressionValue>): ValueTypes|number} getReturnType Returns one or several types\n * @property {function(ParsingContext, Array<ExpressionValue>, ValueTypes=): string} toGlsl Returns a GLSL-compatible string\n * Note: takes in an optional type hint as 3rd parameter\n */\n\n/**\n * Operator declarations\n * @type {Object<string, Operator>}\n */\n\nexport var Operators = {};\n/**\n * Returns the possible types for a given value (each type being a binary flag)\n * To test a value use e.g. `getValueType(v) & ValueTypes.BOOLEAN`\n * @param {ExpressionValue} value Value\n * @return {ValueTypes|number} Type or types inferred from the value\n */\n\nexport function getValueType(value) {\n  if (typeof value === 'number') {\n    return ValueTypes.NUMBER;\n  }\n\n  if (typeof value === 'boolean') {\n    return ValueTypes.BOOLEAN;\n  }\n\n  if (typeof value === 'string') {\n    if (isStringColor(value)) {\n      return ValueTypes.COLOR | ValueTypes.STRING;\n    }\n\n    return ValueTypes.STRING;\n  }\n\n  if (!Array.isArray(value)) {\n    throw new Error(\"Unhandled value type: \" + JSON.stringify(value));\n  }\n\n  var valueArr =\n  /** @type {Array<*>} */\n  value;\n  var onlyNumbers = valueArr.every(function (v) {\n    return typeof v === 'number';\n  });\n\n  if (onlyNumbers) {\n    if (valueArr.length === 3 || valueArr.length === 4) {\n      return ValueTypes.COLOR | ValueTypes.NUMBER_ARRAY;\n    }\n\n    return ValueTypes.NUMBER_ARRAY;\n  }\n\n  if (typeof valueArr[0] !== 'string') {\n    throw new Error(\"Expected an expression operator but received: \" + JSON.stringify(valueArr));\n  }\n\n  var operator = Operators[valueArr[0]];\n\n  if (operator === undefined) {\n    throw new Error(\"Unrecognized expression operator: \" + JSON.stringify(valueArr));\n  }\n\n  return operator.getReturnType(valueArr.slice(1));\n}\n/**\n * Checks if only one value type is enabled in the input number.\n * @param {ValueTypes|number} valueType Number containing value type binary flags\n * @return {boolean} True if only one type flag is enabled, false if zero or multiple\n */\n\nexport function isTypeUnique(valueType) {\n  return log2(valueType) % 1 === 0;\n}\n/**\n * Context available during the parsing of an expression.\n * @typedef {Object} ParsingContext\n * @property {boolean} [inFragmentShader] If false, means the expression output should be made for a vertex shader\n * @property {Array<string>} variables List of variables used in the expression; contains **unprefixed names**\n * @property {Array<string>} attributes List of attributes used in the expression; contains **unprefixed names**\n * @property {Object<string, number>} stringLiteralsMap This object maps all encountered string values to a number\n * @property {Object<string, string>} functions Lookup of functions used by the style.\n * @property {number} [bandCount] Number of bands per pixel.\n * @property {Array<PaletteTexture>} [paletteTextures] List of palettes used by the style.\n */\n\n/**\n * Will return the number as a float with a dot separator, which is required by GLSL.\n * @param {number} v Numerical value.\n * @return {string} The value as string.\n */\n\nexport function numberToGlsl(v) {\n  var s = v.toString();\n  return s.indexOf('.') === -1 ? s + '.0' : s;\n}\n/**\n * Will return the number array as a float with a dot separator, concatenated with ', '.\n * @param {Array<number>} array Numerical values array.\n * @return {string} The array as a vector, e. g.: `vec3(1.0, 2.0, 3.0)`.\n */\n\nexport function arrayToGlsl(array) {\n  if (array.length < 2 || array.length > 4) {\n    throw new Error('`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.');\n  }\n\n  return \"vec\" + array.length + \"(\" + array.map(numberToGlsl).join(', ') + \")\";\n}\n/**\n * Will normalize and converts to string a `vec4` color array compatible with GLSL.\n * @param {string|import(\"../color.js\").Color} color Color either in string format or [r, g, b, a] array format,\n * with RGB components in the 0..255 range and the alpha component in the 0..1 range.\n * Note that the final array will always have 4 components.\n * @return {string} The color expressed in the `vec4(1.0, 1.0, 1.0, 1.0)` form.\n */\n\nexport function colorToGlsl(color) {\n  var array = asArray(color).slice();\n\n  if (array.length < 4) {\n    array.push(1);\n  }\n\n  return arrayToGlsl(array.map(function (c, i) {\n    return i < 3 ? c / 255 : c;\n  }));\n}\n/**\n * Returns a stable equivalent number for the string literal.\n * @param {ParsingContext} context Parsing context\n * @param {string} string String literal value\n * @return {number} Number equivalent\n */\n\nexport function getStringNumberEquivalent(context, string) {\n  if (context.stringLiteralsMap[string] === undefined) {\n    context.stringLiteralsMap[string] = Object.keys(context.stringLiteralsMap).length;\n  }\n\n  return context.stringLiteralsMap[string];\n}\n/**\n * Returns a stable equivalent number for the string literal, for use in shaders. This number is then\n * converted to be a GLSL-compatible string.\n * @param {ParsingContext} context Parsing context\n * @param {string} string String literal value\n * @return {string} GLSL-compatible string containing a number\n */\n\nexport function stringToGlsl(context, string) {\n  return numberToGlsl(getStringNumberEquivalent(context, string));\n}\n/**\n * Recursively parses a style expression and outputs a GLSL-compatible string. Takes in a parsing context that\n * will be read and modified during the parsing operation.\n * @param {ParsingContext} context Parsing context\n * @param {ExpressionValue} value Value\n * @param {ValueTypes|number} [typeHint] Hint for the expected final type (can be several types combined)\n * @return {string} GLSL-compatible output\n */\n\nexport function expressionToGlsl(context, value, typeHint) {\n  // operator\n  if (Array.isArray(value) && typeof value[0] === 'string') {\n    var operator = Operators[value[0]];\n\n    if (operator === undefined) {\n      throw new Error(\"Unrecognized expression operator: \" + JSON.stringify(value));\n    }\n\n    return operator.toGlsl(context, value.slice(1), typeHint);\n  }\n\n  var valueType = getValueType(value);\n\n  if ((valueType & ValueTypes.NUMBER) > 0) {\n    return numberToGlsl(\n    /** @type {number} */\n    value);\n  }\n\n  if ((valueType & ValueTypes.BOOLEAN) > 0) {\n    return value.toString();\n  }\n\n  if ((valueType & ValueTypes.STRING) > 0 && (typeHint === undefined || typeHint == ValueTypes.STRING)) {\n    return stringToGlsl(context, value.toString());\n  }\n\n  if ((valueType & ValueTypes.COLOR) > 0 && (typeHint === undefined || typeHint == ValueTypes.COLOR)) {\n    return colorToGlsl(\n    /** @type {Array<number> | string} */\n    value);\n  }\n\n  if ((valueType & ValueTypes.NUMBER_ARRAY) > 0) {\n    return arrayToGlsl(\n    /** @type {Array<number>} */\n    value);\n  }\n\n  throw new Error(\"Unexpected expression \" + value + \" (expected type \" + typeHint + \")\");\n}\n\nfunction assertNumber(value) {\n  if (!(getValueType(value) & ValueTypes.NUMBER)) {\n    throw new Error(\"A numeric value was expected, got \" + JSON.stringify(value) + \" instead\");\n  }\n}\n\nfunction assertNumbers(values) {\n  for (var i = 0; i < values.length; i++) {\n    assertNumber(values[i]);\n  }\n}\n\nfunction assertString(value) {\n  if (!(getValueType(value) & ValueTypes.STRING)) {\n    throw new Error(\"A string value was expected, got \" + JSON.stringify(value) + \" instead\");\n  }\n}\n\nfunction assertBoolean(value) {\n  if (!(getValueType(value) & ValueTypes.BOOLEAN)) {\n    throw new Error(\"A boolean value was expected, got \" + JSON.stringify(value) + \" instead\");\n  }\n}\n\nfunction assertArgsCount(args, count) {\n  if (args.length !== count) {\n    throw new Error(\"Exactly \" + count + \" arguments were expected, got \" + args.length + \" instead\");\n  }\n}\n\nfunction assertArgsMinCount(args, count) {\n  if (args.length < count) {\n    throw new Error(\"At least \" + count + \" arguments were expected, got \" + args.length + \" instead\");\n  }\n}\n\nfunction assertArgsMaxCount(args, count) {\n  if (args.length > count) {\n    throw new Error(\"At most \" + count + \" arguments were expected, got \" + args.length + \" instead\");\n  }\n}\n\nfunction assertArgsEven(args) {\n  if (args.length % 2 !== 0) {\n    throw new Error(\"An even amount of arguments was expected, got \" + args + \" instead\");\n  }\n}\n\nfunction assertArgsOdd(args) {\n  if (args.length % 2 === 0) {\n    throw new Error(\"An odd amount of arguments was expected, got \" + args + \" instead\");\n  }\n}\n\nfunction assertUniqueInferredType(args, types) {\n  if (!isTypeUnique(types)) {\n    throw new Error(\"Could not infer only one type from the following expression: \" + JSON.stringify(args));\n  }\n}\n\nOperators['get'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.ANY;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 1);\n    assertString(args[0]);\n    var value = args[0].toString();\n\n    if (context.attributes.indexOf(value) === -1) {\n      context.attributes.push(value);\n    }\n\n    var prefix = context.inFragmentShader ? 'v_' : 'a_';\n    return prefix + value;\n  }\n};\n/**\n * Get the uniform name given a variable name.\n * @param {string} variableName The variable name.\n * @return {string} The uniform name.\n */\n\nexport function uniformNameForVariable(variableName) {\n  return 'u_var_' + variableName;\n}\nOperators['var'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.ANY;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 1);\n    assertString(args[0]);\n    var value = args[0].toString();\n\n    if (context.variables.indexOf(value) === -1) {\n      context.variables.push(value);\n    }\n\n    return uniformNameForVariable(value);\n  }\n};\nexport var PALETTE_TEXTURE_ARRAY = 'u_paletteTextures'; // ['palette', index, colors]\n\nOperators['palette'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.COLOR;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumber(args[0]);\n    var index = expressionToGlsl(context, args[0]);\n    var colors = args[1];\n\n    if (!Array.isArray(colors)) {\n      throw new Error('The second argument of palette must be an array');\n    }\n\n    var numColors = colors.length;\n    var palette = new Uint8Array(numColors * 4);\n\n    for (var i = 0; i < numColors; i++) {\n      var candidate = colors[i];\n      /**\n       * @type {import('../color.js').Color}\n       */\n\n      var color = void 0;\n\n      if (typeof candidate === 'string') {\n        color = fromString(candidate);\n      } else {\n        if (!Array.isArray(candidate)) {\n          throw new Error('The second argument of palette must be an array of strings or colors');\n        }\n\n        var length_1 = candidate.length;\n\n        if (length_1 === 4) {\n          color = candidate;\n        } else {\n          if (length_1 !== 3) {\n            throw new Error(\"Expected palette color to have 3 or 4 values, got \" + length_1);\n          }\n\n          color = [candidate[0], candidate[1], candidate[2], 1];\n        }\n      }\n\n      var offset = i * 4;\n      palette[offset] = color[0];\n      palette[offset + 1] = color[1];\n      palette[offset + 2] = color[2];\n      palette[offset + 3] = color[3] * 255;\n    }\n\n    if (!context.paletteTextures) {\n      context.paletteTextures = [];\n    }\n\n    var paletteName = PALETTE_TEXTURE_ARRAY + \"[\" + context.paletteTextures.length + \"]\";\n    var paletteTexture = new PaletteTexture(paletteName, palette);\n    context.paletteTextures.push(paletteTexture);\n    return \"texture2D(\" + paletteName + \", vec2((\" + index + \" + 0.5) / \" + numColors + \".0, 0.5))\";\n  }\n};\nvar GET_BAND_VALUE_FUNC = 'getBandValue';\nOperators['band'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsMinCount(args, 1);\n    assertArgsMaxCount(args, 3);\n    var band = args[0];\n\n    if (!(GET_BAND_VALUE_FUNC in context.functions)) {\n      var ifBlocks = '';\n      var bandCount = context.bandCount || 1;\n\n      for (var i = 0; i < bandCount; i++) {\n        var colorIndex = Math.floor(i / 4);\n        var bandIndex = i % 4;\n\n        if (bandIndex === bandCount - 1 && bandIndex === 1) {\n          // LUMINANCE_ALPHA - band 1 assigned to rgb and band 2 assigned to alpha\n          bandIndex = 3;\n        }\n\n        var textureName = Uniforms.TILE_TEXTURE_ARRAY + \"[\" + colorIndex + \"]\";\n        ifBlocks += \"\\n          if (band == \" + (i + 1) + \".0) {\\n            return texture2D(\" + textureName + \", v_textureCoord + vec2(dx, dy))[\" + bandIndex + \"];\\n          }\\n        \";\n      }\n\n      context.functions[GET_BAND_VALUE_FUNC] = \"\\n        float getBandValue(float band, float xOffset, float yOffset) {\\n          float dx = xOffset / \" + Uniforms.TEXTURE_PIXEL_WIDTH + \";\\n          float dy = yOffset / \" + Uniforms.TEXTURE_PIXEL_HEIGHT + \";\\n          \" + ifBlocks + \"\\n        }\\n      \";\n    }\n\n    var bandExpression = expressionToGlsl(context, band);\n    var xOffsetExpression = expressionToGlsl(context, args[1] || 0);\n    var yOffsetExpression = expressionToGlsl(context, args[2] || 0);\n    return GET_BAND_VALUE_FUNC + \"(\" + bandExpression + \", \" + xOffsetExpression + \", \" + yOffsetExpression + \")\";\n  }\n};\nOperators['time'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 0);\n    return 'u_time';\n  }\n};\nOperators['zoom'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 0);\n    return 'u_zoom';\n  }\n};\nOperators['resolution'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 0);\n    return 'u_resolution';\n  }\n};\nOperators['*'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" * \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['/'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" / \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['+'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" + \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['-'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" - \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['clamp'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 3);\n    assertNumbers(args);\n    var min = expressionToGlsl(context, args[1]);\n    var max = expressionToGlsl(context, args[2]);\n    return \"clamp(\" + expressionToGlsl(context, args[0]) + \", \" + min + \", \" + max + \")\";\n  }\n};\nOperators['%'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"mod(\" + expressionToGlsl(context, args[0]) + \", \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['^'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"pow(\" + expressionToGlsl(context, args[0]) + \", \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['abs'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 1);\n    assertNumbers(args);\n    return \"abs(\" + expressionToGlsl(context, args[0]) + \")\";\n  }\n};\nOperators['sin'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 1);\n    assertNumbers(args);\n    return \"sin(\" + expressionToGlsl(context, args[0]) + \")\";\n  }\n};\nOperators['cos'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 1);\n    assertNumbers(args);\n    return \"cos(\" + expressionToGlsl(context, args[0]) + \")\";\n  }\n};\nOperators['atan'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsMinCount(args, 1);\n    assertArgsMaxCount(args, 2);\n    assertNumbers(args);\n    return args.length === 2 ? \"atan(\" + expressionToGlsl(context, args[0]) + \", \" + expressionToGlsl(context, args[1]) + \")\" : \"atan(\" + expressionToGlsl(context, args[0]) + \")\";\n  }\n};\nOperators['>'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.BOOLEAN;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" > \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['>='] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.BOOLEAN;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" >= \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['<'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.BOOLEAN;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" < \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\nOperators['<='] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.BOOLEAN;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 2);\n    assertNumbers(args);\n    return \"(\" + expressionToGlsl(context, args[0]) + \" <= \" + expressionToGlsl(context, args[1]) + \")\";\n  }\n};\n\nfunction getEqualOperator(operator) {\n  return {\n    getReturnType: function getReturnType(args) {\n      return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function toGlsl(context, args) {\n      assertArgsCount(args, 2); // find common type\n\n      var type = ValueTypes.ANY;\n\n      for (var i = 0; i < args.length; i++) {\n        type &= getValueType(args[i]);\n      }\n\n      if (type === ValueTypes.NONE) {\n        throw new Error(\"All arguments should be of compatible type, got \" + JSON.stringify(args) + \" instead\");\n      } // Since it's not possible to have color types here, we can leave it out\n      // This fixes issues in case the value type is ambiguously detected as a color (e.g. the string 'red')\n\n\n      type &= ~ValueTypes.COLOR;\n      return \"(\" + expressionToGlsl(context, args[0], type) + \" \" + operator + \" \" + expressionToGlsl(context, args[1], type) + \")\";\n    }\n  };\n}\n\nOperators['=='] = getEqualOperator('==');\nOperators['!='] = getEqualOperator('!=');\nOperators['!'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.BOOLEAN;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 1);\n    assertBoolean(args[0]);\n    return \"(!\" + expressionToGlsl(context, args[0]) + \")\";\n  }\n};\n\nfunction getDecisionOperator(operator) {\n  return {\n    getReturnType: function getReturnType(args) {\n      return ValueTypes.BOOLEAN;\n    },\n    toGlsl: function toGlsl(context, args) {\n      assertArgsMinCount(args, 2);\n\n      for (var i = 0; i < args.length; i++) {\n        assertBoolean(args[i]);\n      }\n\n      var result = '';\n      result = args.map(function (arg) {\n        return expressionToGlsl(context, arg);\n      }).join(\" \" + operator + \" \");\n      result = \"(\" + result + \")\";\n      return result;\n    }\n  };\n}\n\nOperators['all'] = getDecisionOperator('&&');\nOperators['any'] = getDecisionOperator('||');\nOperators['between'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.BOOLEAN;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsCount(args, 3);\n    assertNumbers(args);\n    var min = expressionToGlsl(context, args[1]);\n    var max = expressionToGlsl(context, args[2]);\n    var value = expressionToGlsl(context, args[0]);\n    return \"(\" + value + \" >= \" + min + \" && \" + value + \" <= \" + max + \")\";\n  }\n};\nOperators['array'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.NUMBER_ARRAY;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsMinCount(args, 2);\n    assertArgsMaxCount(args, 4);\n    assertNumbers(args);\n    var parsedArgs = args.map(function (val) {\n      return expressionToGlsl(context, val, ValueTypes.NUMBER);\n    });\n    return \"vec\" + args.length + \"(\" + parsedArgs.join(', ') + \")\";\n  }\n};\nOperators['color'] = {\n  getReturnType: function getReturnType(args) {\n    return ValueTypes.COLOR;\n  },\n  toGlsl: function toGlsl(context, args) {\n    assertArgsMinCount(args, 3);\n    assertArgsMaxCount(args, 4);\n    assertNumbers(args);\n    var array =\n    /** @type {Array<number>} */\n    args;\n\n    if (args.length === 3) {\n      array.push(1);\n    }\n\n    var parsedArgs = args.map(function (val, i) {\n      return expressionToGlsl(context, val, ValueTypes.NUMBER) + (i < 3 ? ' / 255.0' : '');\n    });\n    return \"vec\" + args.length + \"(\" + parsedArgs.join(', ') + \")\";\n  }\n};\nOperators['interpolate'] = {\n  getReturnType: function getReturnType(args) {\n    var type = ValueTypes.COLOR | ValueTypes.NUMBER;\n\n    for (var i = 3; i < args.length; i += 2) {\n      type = type & getValueType(args[i]);\n    }\n\n    return type;\n  },\n  toGlsl: function toGlsl(context, args, opt_typeHint) {\n    assertArgsEven(args);\n    assertArgsMinCount(args, 6); // validate interpolation type\n\n    var type = args[0];\n    var interpolation;\n\n    switch (type[0]) {\n      case 'linear':\n        interpolation = 1;\n        break;\n\n      case 'exponential':\n        interpolation = type[1];\n        break;\n\n      default:\n        interpolation = null;\n    }\n\n    if (!interpolation) {\n      throw new Error(\"Invalid interpolation type for \\\"interpolate\\\" operator, received: \" + JSON.stringify(type));\n    } // compute input/output types\n\n\n    var typeHint = opt_typeHint !== undefined ? opt_typeHint : ValueTypes.ANY;\n    var outputType = Operators['interpolate'].getReturnType(args) & typeHint;\n    assertUniqueInferredType(args, outputType);\n    var input = expressionToGlsl(context, args[1]);\n    var exponent = numberToGlsl(interpolation);\n    var result = '';\n\n    for (var i = 2; i < args.length - 2; i += 2) {\n      var stop1 = expressionToGlsl(context, args[i]);\n      var output1 = result || expressionToGlsl(context, args[i + 1], outputType);\n      var stop2 = expressionToGlsl(context, args[i + 2]);\n      var output2 = expressionToGlsl(context, args[i + 3], outputType);\n      result = \"mix(\" + output1 + \", \" + output2 + \", pow(clamp((\" + input + \" - \" + stop1 + \") / (\" + stop2 + \" - \" + stop1 + \"), 0.0, 1.0), \" + exponent + \"))\";\n    }\n\n    return result;\n  }\n};\nOperators['match'] = {\n  getReturnType: function getReturnType(args) {\n    var type = ValueTypes.ANY;\n\n    for (var i = 2; i < args.length; i += 2) {\n      type = type & getValueType(args[i]);\n    }\n\n    type = type & getValueType(args[args.length - 1]);\n    return type;\n  },\n  toGlsl: function toGlsl(context, args, opt_typeHint) {\n    assertArgsEven(args);\n    assertArgsMinCount(args, 4);\n    var typeHint = opt_typeHint !== undefined ? opt_typeHint : ValueTypes.ANY;\n    var outputType = Operators['match'].getReturnType(args) & typeHint;\n    assertUniqueInferredType(args, outputType);\n    var input = expressionToGlsl(context, args[0]);\n    var fallback = expressionToGlsl(context, args[args.length - 1], outputType);\n    var result = null;\n\n    for (var i = args.length - 3; i >= 1; i -= 2) {\n      var match = expressionToGlsl(context, args[i]);\n      var output = expressionToGlsl(context, args[i + 1], outputType);\n      result = \"(\" + input + \" == \" + match + \" ? \" + output + \" : \" + (result || fallback) + \")\";\n    }\n\n    return result;\n  }\n};\nOperators['case'] = {\n  getReturnType: function getReturnType(args) {\n    var type = ValueTypes.ANY;\n\n    for (var i = 1; i < args.length; i += 2) {\n      type = type & getValueType(args[i]);\n    }\n\n    type = type & getValueType(args[args.length - 1]);\n    return type;\n  },\n  toGlsl: function toGlsl(context, args, opt_typeHint) {\n    assertArgsOdd(args);\n    assertArgsMinCount(args, 3);\n    var typeHint = opt_typeHint !== undefined ? opt_typeHint : ValueTypes.ANY;\n    var outputType = Operators['case'].getReturnType(args) & typeHint;\n    assertUniqueInferredType(args, outputType);\n\n    for (var i = 0; i < args.length - 1; i += 2) {\n      assertBoolean(args[i]);\n    }\n\n    var fallback = expressionToGlsl(context, args[args.length - 1], outputType);\n    var result = null;\n\n    for (var i = args.length - 3; i >= 0; i -= 2) {\n      var condition = expressionToGlsl(context, args[i]);\n      var output = expressionToGlsl(context, args[i + 1], outputType);\n      result = \"(\" + condition + \" ? \" + output + \" : \" + (result || fallback) + \")\";\n    }\n\n    return result;\n  }\n};","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/layer/WebGLTile\n */\n\n\nimport BaseTileLayer from './BaseTile.js';\nimport LayerProperty from '../layer/Property.js';\nimport WebGLTileLayerRenderer, { Attributes, Uniforms } from '../renderer/webgl/TileLayer.js';\nimport { PALETTE_TEXTURE_ARRAY, ValueTypes, expressionToGlsl, getStringNumberEquivalent, uniformNameForVariable } from '../style/expressions.js';\nimport { assign } from '../obj.js';\n/**\n * @typedef {import(\"../source/DataTile.js\").default|import(\"../source/TileImage.js\").default} SourceType\n */\n\n/**\n * @typedef {Object} Style\n * Translates tile data to rendered pixels.\n *\n * @property {Object<string, (string|number)>} [variables] Style variables.  Each variable must hold a number or string.  These\n * variables can be used in the `color`, `brightness`, `contrast`, `exposure`, `saturation` and `gamma`\n * {@link import(\"../style/expressions.js\").ExpressionValue expressions}, using the `['var', 'varName']` operator.\n * To update style variables, use the {@link import(\"./WebGLTile.js\").default#updateStyleVariables} method.\n * @property {import(\"../style/expressions.js\").ExpressionValue} [color] An expression applied to color values.\n * @property {import(\"../style/expressions.js\").ExpressionValue} [brightness=0] Value used to decrease or increase\n * the layer brightness.  Values range from -1 to 1.\n * @property {import(\"../style/expressions.js\").ExpressionValue} [contrast=0] Value used to decrease or increase\n * the layer contrast.  Values range from -1 to 1.\n * @property {import(\"../style/expressions.js\").ExpressionValue} [exposure=0] Value used to decrease or increase\n * the layer exposure.  Values range from -1 to 1.\n * @property {import(\"../style/expressions.js\").ExpressionValue} [saturation=0] Value used to decrease or increase\n * the layer saturation.  Values range from -1 to 1.\n * @property {import(\"../style/expressions.js\").ExpressionValue} [gamma=1] Apply a gamma correction to the layer.\n * Values range from 0 to infinity.\n */\n\n/**\n * @typedef {Object} Options\n * @property {Style} [style] Style to apply to the layer.\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {SourceType} [source] Source for this layer.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n * @property {number} [cacheSize=512] The internal texture cache size.  This needs to be large enough to render\n * two zoom levels worth of tiles.\n */\n\n/**\n * @typedef {Object} ParsedStyle\n * @property {string} vertexShader The vertex shader.\n * @property {string} fragmentShader The fragment shader.\n * @property {Object<string,import(\"../webgl/Helper.js\").UniformValue>} uniforms Uniform definitions.\n * @property {Array<import(\"../webgl/PaletteTexture.js\").default>} paletteTextures Palette textures.\n */\n\n/**\n * @param {Style} style The layer style.\n * @param {number} [bandCount] The number of bands.\n * @return {ParsedStyle} Shaders and uniforms generated from the style.\n */\n\nfunction parseStyle(style, bandCount) {\n  var vertexShader = \"\\n    attribute vec2 \" + Attributes.TEXTURE_COORD + \";\\n    uniform mat4 \" + Uniforms.TILE_TRANSFORM + \";\\n    uniform float \" + Uniforms.DEPTH + \";\\n\\n    varying vec2 v_textureCoord;\\n\\n    void main() {\\n      v_textureCoord = \" + Attributes.TEXTURE_COORD + \";\\n      gl_Position = \" + Uniforms.TILE_TRANSFORM + \" * vec4(\" + Attributes.TEXTURE_COORD + \", \" + Uniforms.DEPTH + \", 1.0);\\n    }\\n  \";\n  /**\n   * @type {import(\"../style/expressions.js\").ParsingContext}\n   */\n\n  var context = {\n    inFragmentShader: true,\n    variables: [],\n    attributes: [],\n    stringLiteralsMap: {},\n    functions: {},\n    bandCount: bandCount\n  };\n  var pipeline = [];\n\n  if (style.color !== undefined) {\n    var color = expressionToGlsl(context, style.color, ValueTypes.COLOR);\n    pipeline.push(\"color = \" + color + \";\");\n  }\n\n  if (style.contrast !== undefined) {\n    var contrast = expressionToGlsl(context, style.contrast, ValueTypes.NUMBER);\n    pipeline.push(\"color.rgb = clamp((\" + contrast + \" + 1.0) * color.rgb - (\" + contrast + \" / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\");\n  }\n\n  if (style.exposure !== undefined) {\n    var exposure = expressionToGlsl(context, style.exposure, ValueTypes.NUMBER);\n    pipeline.push(\"color.rgb = clamp((\" + exposure + \" + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\");\n  }\n\n  if (style.saturation !== undefined) {\n    var saturation = expressionToGlsl(context, style.saturation, ValueTypes.NUMBER);\n    pipeline.push(\"\\n      float saturation = \" + saturation + \" + 1.0;\\n      float sr = (1.0 - saturation) * 0.2126;\\n      float sg = (1.0 - saturation) * 0.7152;\\n      float sb = (1.0 - saturation) * 0.0722;\\n      mat3 saturationMatrix = mat3(\\n        sr + saturation, sr, sr,\\n        sg, sg + saturation, sg,\\n        sb, sb, sb + saturation\\n      );\\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\\n    \");\n  }\n\n  if (style.gamma !== undefined) {\n    var gamma = expressionToGlsl(context, style.gamma, ValueTypes.NUMBER);\n    pipeline.push(\"color.rgb = pow(color.rgb, vec3(1.0 / \" + gamma + \"));\");\n  }\n\n  if (style.brightness !== undefined) {\n    var brightness = expressionToGlsl(context, style.brightness, ValueTypes.NUMBER);\n    pipeline.push(\"color.rgb = clamp(color.rgb + \" + brightness + \", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\");\n  }\n  /** @type {Object<string,import(\"../webgl/Helper\").UniformValue>} */\n\n\n  var uniforms = {};\n  var numVariables = context.variables.length;\n\n  if (numVariables > 1 && !style.variables) {\n    throw new Error(\"Missing variables in style (expected \" + context.variables + \")\");\n  }\n\n  var _loop_1 = function _loop_1(i) {\n    var variableName = context.variables[i];\n\n    if (!(variableName in style.variables)) {\n      throw new Error(\"Missing '\" + variableName + \"' in style variables\");\n    }\n\n    var uniformName = uniformNameForVariable(variableName);\n\n    uniforms[uniformName] = function () {\n      var value = style.variables[variableName];\n\n      if (typeof value === 'string') {\n        value = getStringNumberEquivalent(context, value);\n      }\n\n      return value !== undefined ? value : -9999999; // to avoid matching with the first string literal\n    };\n  };\n\n  for (var i = 0; i < numVariables; ++i) {\n    _loop_1(i);\n  }\n\n  var uniformDeclarations = Object.keys(uniforms).map(function (name) {\n    return \"uniform float \" + name + \";\";\n  });\n  var textureCount = Math.ceil(bandCount / 4);\n  uniformDeclarations.push(\"uniform sampler2D \" + Uniforms.TILE_TEXTURE_ARRAY + \"[\" + textureCount + \"];\");\n\n  if (context.paletteTextures) {\n    uniformDeclarations.push(\"uniform sampler2D \" + PALETTE_TEXTURE_ARRAY + \"[\" + context.paletteTextures.length + \"];\");\n  }\n\n  var functionDefintions = Object.keys(context.functions).map(function (name) {\n    return context.functions[name];\n  });\n  var fragmentShader = \"\\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\\n    precision highp float;\\n    #else\\n    precision mediump float;\\n    #endif\\n\\n    varying vec2 v_textureCoord;\\n    uniform float \" + Uniforms.TRANSITION_ALPHA + \";\\n    uniform float \" + Uniforms.TEXTURE_PIXEL_WIDTH + \";\\n    uniform float \" + Uniforms.TEXTURE_PIXEL_HEIGHT + \";\\n    uniform float \" + Uniforms.RESOLUTION + \";\\n    uniform float \" + Uniforms.ZOOM + \";\\n\\n    \" + uniformDeclarations.join('\\n') + \"\\n\\n    \" + functionDefintions.join('\\n') + \"\\n\\n    void main() {\\n      vec4 color = texture2D(\" + Uniforms.TILE_TEXTURE_ARRAY + \"[0],  v_textureCoord);\\n\\n      \" + pipeline.join('\\n') + \"\\n\\n      if (color.a == 0.0) {\\n        discard;\\n      }\\n\\n      gl_FragColor = color;\\n      gl_FragColor.rgb *= gl_FragColor.a;\\n      gl_FragColor *= \" + Uniforms.TRANSITION_ALPHA + \";\\n    }\";\n  return {\n    vertexShader: vertexShader,\n    fragmentShader: fragmentShader,\n    uniforms: uniforms,\n    paletteTextures: context.paletteTextures\n  };\n}\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @extends BaseTileLayer<SourceType, WebGLTileLayerRenderer>\n * @api\n */\n\n\nvar WebGLTileLayer =\n/** @class */\nfunction (_super) {\n  __extends(WebGLTileLayer, _super);\n  /**\n   * @param {Options} opt_options Tile layer options.\n   */\n\n\n  function WebGLTileLayer(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? assign({}, opt_options) : {};\n    var style = options.style || {};\n    delete options.style;\n    var cacheSize = options.cacheSize;\n    delete options.cacheSize;\n    _this = _super.call(this, options) || this;\n    /**\n     * @type {Style}\n     * @private\n     */\n\n    _this.style_ = style;\n    /**\n     * @type {number}\n     * @private\n     */\n\n    _this.cacheSize_ = cacheSize;\n    /**\n     * @type {Object<string, (string|number)>}\n     * @private\n     */\n\n    _this.styleVariables_ = _this.style_.variables || {};\n\n    _this.addChangeListener(LayerProperty.SOURCE, _this.handleSourceUpdate_);\n\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  WebGLTileLayer.prototype.handleSourceUpdate_ = function () {\n    this.setStyle(this.style_);\n  };\n  /**\n   * @private\n   * @return {number} The number of source bands.\n   */\n\n\n  WebGLTileLayer.prototype.getSourceBandCount_ = function () {\n    var source = this.getSource();\n    return source && 'bandCount' in source ? source.bandCount : 4;\n  };\n\n  WebGLTileLayer.prototype.createRenderer = function () {\n    var parsedStyle = parseStyle(this.style_, this.getSourceBandCount_());\n    return new WebGLTileLayerRenderer(this, {\n      vertexShader: parsedStyle.vertexShader,\n      fragmentShader: parsedStyle.fragmentShader,\n      uniforms: parsedStyle.uniforms,\n      cacheSize: this.cacheSize_,\n      paletteTextures: parsedStyle.paletteTextures\n    });\n  };\n  /**\n   * Update the layer style.  The `updateStyleVariables` function is a more efficient\n   * way to update layer rendering.  In cases where the whole style needs to be updated,\n   * this method may be called instead.\n   * @param {Style} style The new style.\n   */\n\n\n  WebGLTileLayer.prototype.setStyle = function (style) {\n    this.style_ = style;\n    var parsedStyle = parseStyle(this.style_, this.getSourceBandCount_());\n    var renderer = this.getRenderer();\n    renderer.reset({\n      vertexShader: parsedStyle.vertexShader,\n      fragmentShader: parsedStyle.fragmentShader,\n      uniforms: parsedStyle.uniforms,\n      paletteTextures: parsedStyle.paletteTextures\n    });\n    this.changed();\n  };\n  /**\n   * Update any variables used by the layer style and trigger a re-render.\n   * @param {Object<string, number>} variables Variables to update.\n   * @api\n   */\n\n\n  WebGLTileLayer.prototype.updateStyleVariables = function (variables) {\n    assign(this.styleVariables_, variables);\n    this.changed();\n  };\n\n  return WebGLTileLayer;\n}(BaseTileLayer);\n/**\n * Clean up underlying WebGL resources.\n * @function\n * @api\n */\n\n\nWebGLTileLayer.prototype.dispose;\nexport default WebGLTileLayer;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/DataTile\n */\n\n\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\n/**\n * Data that can be used with a DataTile.  For increased browser compatibility, use\n * Uint8Array instead of Uint8ClampedArray where possible.\n * @typedef {Uint8Array|Uint8ClampedArray|Float32Array|DataView} Data\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @property {function(): Promise<Data>} loader Data loader.\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n * @api\n */\n\nvar DataTile =\n/** @class */\nfunction (_super) {\n  __extends(DataTile, _super);\n  /**\n   * @param {Options} options Tile options.\n   */\n\n\n  function DataTile(options) {\n    var _this = this;\n\n    var state = TileState.IDLE;\n    _this = _super.call(this, options.tileCoord, state, {\n      transition: options.transition,\n      interpolate: options.interpolate\n    }) || this;\n    /**\n     * @type {function(): Promise<Data>}\n     * @private\n     */\n\n    _this.loader_ = options.loader;\n    /**\n     * @type {Data}\n     * @private\n     */\n\n    _this.data_ = null;\n    /**\n     * @type {Error}\n     * @private\n     */\n\n    _this.error_ = null;\n    return _this;\n  }\n  /**\n   * Get the data for the tile.\n   * @return {Data} Tile data.\n   * @api\n   */\n\n\n  DataTile.prototype.getData = function () {\n    return this.data_;\n  };\n  /**\n   * Get any loading error.\n   * @return {Error} Loading error.\n   * @api\n   */\n\n\n  DataTile.prototype.getError = function () {\n    return this.error_;\n  };\n  /**\n   * Load not yet loaded URI.\n   * @api\n   */\n\n\n  DataTile.prototype.load = function () {\n    this.state = TileState.LOADING;\n    this.changed();\n    var self = this;\n    this.loader_().then(function (data) {\n      self.data_ = data;\n      self.state = TileState.LOADED;\n      self.changed();\n    }).catch(function (error) {\n      self.error_ = error;\n      self.state = TileState.ERROR;\n      self.changed();\n    });\n  };\n\n  return DataTile;\n}(Tile);\n\nexport default DataTile;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/source/DataTile\n */\n\n\nimport DataTile from '../DataTile.js';\nimport EventType from '../events/EventType.js';\nimport TileEventType from './TileEventType.js';\nimport TileSource, { TileSourceEvent } from './Tile.js';\nimport TileState from '../TileState.js';\nimport { assign } from '../obj.js';\nimport { createXYZ, extentFromProjection } from '../tilegrid.js';\nimport { getKeyZXY } from '../tilecoord.js';\nimport { getUid } from '../util.js';\nimport { toPromise } from '../functions.js';\n/**\n * Data tile loading function.  The function is called with z, x, and y tile coordinates and\n * returns {@link import(\"../DataTile.js\").Data data} for a tile or a promise for the same.\n * @typedef {function(number, number, number) : (import(\"../DataTile.js\").Data|Promise<import(\"../DataTile.js\").Data>)} Loader\n */\n\n/**\n * @typedef {Object} Options\n * @property {Loader} [loader] Data loader.  Called with z, x, and y tile coordinates.\n * Returns {@link import(\"../DataTile.js\").Data data} for a tile or a promise for the same.\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [maxZoom=42] Optional max zoom level. Not used if `tileGrid` is provided.\n * @property {number} [minZoom=0] Optional min zoom level. Not used if `tileGrid` is provided.\n * @property {number|import(\"../size.js\").Size} [tileSize=[256, 256]] The pixel width and height of the tiles.\n * @property {number} [maxResolution] Optional tile grid resolution at level zero. Not used if `tileGrid` is provided.\n * @property {import(\"../proj.js\").ProjectionLike} [projection='EPSG:3857'] Tile projection.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {boolean} [opaque=false] Whether the layer is opaque.\n * @property {import(\"./State.js\").default} [state] The source state.\n * @property {number} [tilePixelRatio] Tile pixel ratio.\n * @property {boolean} [wrapX=false] Render tiles beyond the antimeridian.\n * @property {number} [transition] Transition time when fading in new tiles (in miliseconds).\n * @property {number} [bandCount=4] Number of bands represented in the data.\n * @property {boolean} [interpolate=false] Use interpolated values when resampling.  By default,\n * the nearest neighbor is used when resampling.\n */\n\n/**\n * @classdesc\n * A source for typed array data tiles.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n * @api\n */\n\nvar DataTileSource =\n/** @class */\nfunction (_super) {\n  __extends(DataTileSource, _super);\n  /**\n   * @param {Options} options Image tile options.\n   */\n\n\n  function DataTileSource(options) {\n    var _this = this;\n\n    var projection = options.projection === undefined ? 'EPSG:3857' : options.projection;\n    var tileGrid = options.tileGrid;\n\n    if (tileGrid === undefined && projection) {\n      tileGrid = createXYZ({\n        extent: extentFromProjection(projection),\n        maxResolution: options.maxResolution,\n        maxZoom: options.maxZoom,\n        minZoom: options.minZoom,\n        tileSize: options.tileSize\n      });\n    }\n\n    _this = _super.call(this, {\n      cacheSize: 0.1,\n      attributions: options.attributions,\n      attributionsCollapsible: options.attributionsCollapsible,\n      projection: projection,\n      tileGrid: tileGrid,\n      opaque: options.opaque,\n      state: options.state,\n      tilePixelRatio: options.tilePixelRatio,\n      wrapX: options.wrapX,\n      transition: options.transition,\n      interpolate: options.interpolate\n    }) || this;\n    /**\n     * @private\n     * @type {!Object<string, boolean>}\n     */\n\n    _this.tileLoadingKeys_ = {};\n    /**\n     * @private\n     */\n\n    _this.loader_ = options.loader;\n    _this.handleTileChange_ = _this.handleTileChange_.bind(_this);\n    /**\n     * @type {number}\n     */\n\n    _this.bandCount = options.bandCount === undefined ? 4 : options.bandCount; // assume RGBA if undefined\n\n    return _this;\n  }\n  /**\n   * @param {Loader} loader The data loader.\n   * @protected\n   */\n\n\n  DataTileSource.prototype.setLoader = function (loader) {\n    this.loader_ = loader;\n  };\n  /**\n   * @abstract\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!DataTile} Tile.\n   */\n\n\n  DataTileSource.prototype.getTile = function (z, x, y, pixelRatio, projection) {\n    var tileCoordKey = getKeyZXY(z, x, y);\n\n    if (this.tileCache.containsKey(tileCoordKey)) {\n      return this.tileCache.get(tileCoordKey);\n    }\n\n    var sourceLoader = this.loader_;\n\n    function loader() {\n      return toPromise(function () {\n        return sourceLoader(z, x, y);\n      });\n    }\n\n    var tile = new DataTile(assign({\n      tileCoord: [z, x, y],\n      loader: loader\n    }, this.tileOptions));\n    tile.key = this.getKey();\n    tile.addEventListener(EventType.CHANGE, this.handleTileChange_);\n    this.tileCache.set(tileCoordKey, tile);\n    return tile;\n  };\n  /**\n   * Handle tile change events.\n   * @param {import(\"../events/Event.js\").default} event Event.\n   */\n\n\n  DataTileSource.prototype.handleTileChange_ = function (event) {\n    var tile =\n    /** @type {import(\"../Tile.js\").default} */\n    event.target;\n    var uid = getUid(tile);\n    var tileState = tile.getState();\n    var type;\n\n    if (tileState == TileState.LOADING) {\n      this.tileLoadingKeys_[uid] = true;\n      type = TileEventType.TILELOADSTART;\n    } else if (uid in this.tileLoadingKeys_) {\n      delete this.tileLoadingKeys_[uid];\n      type = tileState == TileState.ERROR ? TileEventType.TILELOADERROR : tileState == TileState.LOADED ? TileEventType.TILELOADEND : undefined;\n    }\n\n    if (type) {\n      this.dispatchEvent(new TileSourceEvent(type, tile));\n    }\n  };\n\n  return DataTileSource;\n}(TileSource);\n\nexport default DataTileSource;","/**\n * https://github.com/openlayers/openlayers/blob/d6e9f8bea4c03c2cea0229ab1a2e06d25349f26c/src/ol/source/GeoTIFF.js\n * \n **/\n\n/**\n * @module ol/source/GeoTIFF\n */\nimport DataTile from \"ol/source/DataTile.js\";\nimport State from \"ol/source/State.js\";\nimport TileGrid from \"ol/tilegrid/TileGrid.js\";\n// import {\n//   Pool,\n//   fromUrl as tiffFromUrl,\n//   fromBlob as tiffFromBlob,\n// } from \"geotiff/dist-browser/geotiff.js\";\n// // : https://github.com/openlayers/openlayers/issues/13046\n// //  geotiff/src/geotiff.js \nconst geotiff = require(\"geotiff\");\nimport {\n  Projection,\n  get as getCachedProjection,\n  toUserCoordinate,\n  toUserExtent,\n} from \"ol/proj.js\";\nimport {\n  clamp\n} from \"ol/math.js\";\nimport {\n  create as createDecoderWorker\n} from \"ol/worker/geotiff-decoder.js\";\nimport {\n  getCenter,\n  getIntersection\n} from \"ol/extent.js\";\nimport {\n  toSize\n} from \"ol/size.js\";\nimport {\n  fromCode as unitsFromCode\n} from \"ol/proj/Units.js\";\n\n/**\n * @typedef {Object} SourceInfo\n * @property {string} url URL for the source GeoTIFF.\n * @property {Blob} blob Blob containing the source GeoTIFF. `blob` and `url` are mutually exclusive.\n * @property {number} [min=0] The minimum source data value.  Rendered values are scaled from 0 to 1 based on\n * the configured min and max.  If not provided and raster statistics are available, those will be used instead.\n * If neither are available, the minimum for the data type will be used.  To disable this behavior, set\n * the `normalize` option to `false` in the constructor.\n * @property {number} [max] The maximum source data value.  Rendered values are scaled from 0 to 1 based on\n * the configured min and max.  If not provided and raster statistics are available, those will be used instead.\n * If neither are available, the maximum for the data type will be used.  To disable this behavior, set\n * the `normalize` option to `false` in the constructor.\n * @property {number} [nodata] Values to discard (overriding any nodata values in the metadata).\n * When provided, an additional alpha band will be added to the data.  Often the GeoTIFF metadata\n * will include information about nodata values, so you should only need to set this property if\n * you find that it is not already extracted from the metadata.\n * @property {Array<number>} [bands] Band numbers to be read from (where the first band is `1`). If not provided, all bands will\n * be read. For example, if a GeoTIFF has blue (1), green (2), red (3), and near-infrared (4) bands, and you only need the\n * near-infrared band, configure `bands: [4]`.\n */\n\n/**\n * @typedef {Object} GeoKeys\n * @property {number} GTModelTypeGeoKey Model type.\n * @property {number} GTRasterTypeGeoKey Raster type.\n * @property {number} GeogAngularUnitsGeoKey Angular units.\n * @property {number} GeogInvFlatteningGeoKey Inverse flattening.\n * @property {number} GeogSemiMajorAxisGeoKey Semi-major axis.\n * @property {number} GeographicTypeGeoKey Geographic coordinate system code.\n * @property {number} ProjLinearUnitsGeoKey Projected linear unit code.\n * @property {number} ProjectedCSTypeGeoKey Projected coordinate system code.\n */\n\n/**\n * @typedef {Object} GeoTIFF\n * @property {function():Promise<number>} getImageCount Get the number of internal subfile images.\n * @property {function(number):Promise<GeoTIFFImage>} getImage Get the image at the specified index.\n */\n\n/**\n * @typedef {Object} MultiGeoTIFF\n * @property {function():Promise<number>} getImageCount Get the number of internal subfile images.\n * @property {function(number):Promise<GeoTIFFImage>} getImage Get the image at the specified index.\n */\n\n/**\n * @typedef {Object} GDALMetadata\n * @property {string} STATISTICS_MINIMUM The minimum value (as a string).\n * @property {string} STATISTICS_MAXIMUM The maximum value (as a string).\n */\n\nconst STATISTICS_MAXIMUM = \"STATISTICS_MAXIMUM\";\nconst STATISTICS_MINIMUM = \"STATISTICS_MINIMUM\";\n\n/**\n * @typedef {Object} GeoTIFFImage\n * @property {Object} fileDirectory The file directory.\n * @property {GeoKeys} geoKeys The parsed geo-keys.\n * @property {boolean} littleEndian Uses little endian byte order.\n * @property {Object} tiles The tile cache.\n * @property {boolean} isTiled The image is tiled.\n * @property {function():Array<number>} getBoundingBox Get the image bounding box.\n * @property {function():Array<number>} getOrigin Get the image origin.\n * @property {function(GeoTIFFImage):Array<number>} getResolution Get the image resolution.\n * @property {function():number} getWidth Get the pixel width of the image.\n * @property {function():number} getHeight Get the pixel height of the image.\n * @property {function():number} getTileWidth Get the pixel width of image tiles.\n * @property {function():number} getTileHeight Get the pixel height of image tiles.\n * @property {function():number|null} getGDALNoData Get the nodata value (or null if none).\n * @property {function():GDALMetadata|null} getGDALMetadata Get the raster stats (or null if none).\n * @property {function():number} getSamplesPerPixel Get the number of samples per pixel.\n */\n\nlet workerPool;\n\nfunction getWorkerPool() {\n  if (!workerPool) {\n    workerPool = new geotiff.Pool(undefined, createDecoderWorker());\n  }\n  return workerPool;\n}\n\n/**\n * Get the bounding box of an image.  If the image does not have an affine transform,\n * the pixel bounds are returned.\n * @param {GeoTIFFImage} image The image.\n * @return {Array<number>} The image bounding box.\n */\nfunction getBoundingBox(image) {\n  try {\n    return image.getBoundingBox();\n  } catch (_) {\n    const fileDirectory = image.fileDirectory;\n    return [0, 0, fileDirectory.ImageWidth, fileDirectory.ImageLength];\n  }\n}\n\n/**\n * Get the origin of an image.  If the image does not have an affine transform,\n * the top-left corner of the pixel bounds is returned.\n * @param {GeoTIFFImage} image The image.\n * @return {Array<number>} The image origin.\n */\nfunction getOrigin(image) {\n  try {\n    return image.getOrigin().slice(0, 2);\n  } catch (_) {\n    return [0, image.fileDirectory.ImageLength];\n  }\n}\n\n/**\n * Get the resolution of an image.  If the image does not have an affine transform,\n * the width of the image is compared with the reference image.\n * @param {GeoTIFFImage} image The image.\n * @param {GeoTIFFImage} referenceImage The reference image.\n * @return {number} The image resolution.\n */\nfunction getResolution(image, referenceImage) {\n  try {\n    return image.getResolution(referenceImage)[0];\n  } catch (_) {\n    return (\n      referenceImage.fileDirectory.ImageWidth / image.fileDirectory.ImageWidth\n    );\n  }\n}\n\n/**\n * @param {GeoTIFFImage} image A GeoTIFF.\n * @return {import(\"../proj/Projection.js\").default} The image projection.\n */\nfunction getProjection(image) {\n  const geoKeys = image.geoKeys;\n  if (!geoKeys) {\n    return null;\n  }\n\n  if (geoKeys.ProjectedCSTypeGeoKey) {\n    const code = \"EPSG:\" + geoKeys.ProjectedCSTypeGeoKey;\n    let projection = getCachedProjection(code);\n    if (!projection) {\n      const units = unitsFromCode(geoKeys.ProjLinearUnitsGeoKey);\n      if (units) {\n        projection = new Projection({\n          code: code,\n          units: units,\n        });\n      }\n    }\n    return projection;\n  }\n\n  if (geoKeys.GeographicTypeGeoKey) {\n    const code = \"EPSG:\" + geoKeys.GeographicTypeGeoKey;\n    let projection = getCachedProjection(code);\n    if (!projection) {\n      const units = unitsFromCode(geoKeys.GeogAngularUnitsGeoKey);\n      if (units) {\n        projection = new Projection({\n          code: code,\n          units: units,\n        });\n      }\n    }\n    return projection;\n  }\n\n  return null;\n}\n\n/**\n * @param {GeoTIFF|MultiGeoTIFF} tiff A GeoTIFF.\n * @return {Promise<Array<GeoTIFFImage>>} Resolves to a list of images.\n */\nfunction getImagesForTIFF(tiff) {\n  return tiff.getImageCount().then(function (count) {\n    const requests = new Array(count);\n    for (let i = 0; i < count; ++i) {\n      requests[i] = tiff.getImage(i);\n    }\n    return Promise.all(requests);\n  });\n}\n\n/**\n * @param {SourceInfo} source The GeoTIFF source.\n * @return {Promise<Array<GeoTIFFImage>>} Resolves to a list of images.\n */\nfunction getImagesForSource(source) {\n  let request;\n  if (source.blob) {\n    request = geotiff.fromBlob(source.blob);\n  } else {\n    request = geotiff.fromUrl(source.url);\n  }\n  return request.then(getImagesForTIFF);\n}\n\n/**\n * @param {number|Array<number>|Array<Array<number>>} expected Expected value.\n * @param {number|Array<number>|Array<Array<number>>} got Actual value.\n * @param {number} tolerance Accepted tolerance in fraction of expected between expected and got.\n * @param {string} message The error message.\n * @param {function(Error):void} rejector A function to be called with any error.\n */\nfunction assertEqual(expected, got, tolerance, message, rejector) {\n  if (Array.isArray(expected)) {\n    const length = expected.length;\n    if (!Array.isArray(got) || length != got.length) {\n      const error = new Error(message);\n      rejector(error);\n      throw error;\n    }\n    for (let i = 0; i < length; ++i) {\n      assertEqual(expected[i], got[i], tolerance, message, rejector);\n    }\n    return;\n  }\n\n  got = /** @type {number} */ (got);\n  if (Math.abs(expected - got) > tolerance * expected) {\n    throw new Error(message);\n  }\n}\n\n/**\n * @param {Array} array The data array.\n * @return {number} The minimum value.\n */\nfunction getMinForDataType(array) {\n  if (array instanceof Int8Array) {\n    return -128;\n  }\n  if (array instanceof Int16Array) {\n    return -32768;\n  }\n  if (array instanceof Int32Array) {\n    return -2147483648;\n  }\n  if (array instanceof Float32Array) {\n    return 1.2e-38;\n  }\n  return 0;\n}\n\n/**\n * @param {Array} array The data array.\n * @return {number} The maximum value.\n */\nfunction getMaxForDataType(array) {\n  if (array instanceof Int8Array) {\n    return 127;\n  }\n  if (array instanceof Uint8Array) {\n    return 255;\n  }\n  if (array instanceof Uint8ClampedArray) {\n    return 255;\n  }\n  if (array instanceof Int16Array) {\n    return 32767;\n  }\n  if (array instanceof Uint16Array) {\n    return 65535;\n  }\n  if (array instanceof Int32Array) {\n    return 2147483647;\n  }\n  if (array instanceof Uint32Array) {\n    return 4294967295;\n  }\n  if (array instanceof Float32Array) {\n    return 3.4e38;\n  }\n  return 255;\n}\n\n/**\n * @typedef {Object} Options\n * @property {Array<SourceInfo>} sources List of information about GeoTIFF sources.\n * Multiple sources can be combined when their resolution sets are equal after applying a scale.\n * The list of sources defines a mapping between input bands as they are read from each GeoTIFF and\n * the output bands that are provided by data tiles. To control which bands to read from each GeoTIFF,\n * use the {@link import(\"./GeoTIFF.js\").SourceInfo bands} property. If, for example, you specify two\n * sources, one with 3 bands and {@link import(\"./GeoTIFF.js\").SourceInfo nodata} configured, and\n * another with 1 band, the resulting data tiles will have 5 bands: 3 from the first source, 1 alpha\n * band from the first source, and 1 band from the second source.\n * @property {boolean} [convertToRGB = false] By default, bands from the sources are read as-is. When\n * reading GeoTIFFs with the purpose of displaying them as RGB images, setting this to `true` will\n * convert other color spaces (YCbCr, CMYK) to RGB.\n * @property {boolean} [normalize=true] By default, the source data is normalized to values between\n * 0 and 1 with scaling factors based on the raster statistics or `min` and `max` properties of each source.\n * If instead you want to work with the raw values in a style expression, set this to `false`.  Setting this option\n * to `false` will make it so any `min` and `max` properties on sources are ignored.\n * @property {boolean} [opaque=false] Whether the layer is opaque.\n * @property {number} [transition=250] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {boolean} [wrapX=false] Render tiles beyond the tile grid extent.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * the linear interpolation is used to resample the data.  If false, nearest neighbor is used.\n */\n\n/**\n * @classdesc\n * A source for working with GeoTIFF data.\n * @api\n */\nclass GeoTIFFSource extends DataTile {\n  /**\n   * @param {Options} options Data tile options.\n   */\n  constructor(options) {\n    super({\n      state: State.LOADING,\n      tileGrid: null,\n      projection: null,\n      opaque: options.opaque,\n      transition: options.transition,\n      interpolate: options.interpolate !== false,\n      wrapX: options.wrapX,\n    });\n\n    /**\n     * @type {Array<SourceInfo>}\n     * @private\n     */\n    this.sourceInfo_ = options.sources;\n\n    const numSources = this.sourceInfo_.length;\n\n    /**\n     * @type {Array<Array<GeoTIFFImage>>}\n     * @private\n     */\n    this.sourceImagery_ = new Array(numSources);\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.resolutionFactors_ = new Array(numSources);\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.samplesPerPixel_;\n\n    /**\n     * @type {Array<Array<number>>}\n     * @private\n     */\n    this.nodataValues_;\n\n    /**\n     * @type {Array<Array<GDALMetadata>>}\n     * @private\n     */\n    this.metadata_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.normalize_ = options.normalize !== false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.addAlpha_ = false;\n\n    /**\n     * @type {Error}\n     * @private\n     */\n    this.error_ = null;\n\n    /**\n     * @type {\"readRasters\" | \"readRGB\"}\n     */\n    this.readMethod_ = options.convertToRGB ? \"readRGB\" : \"readRasters\";\n\n    this.setKey(this.sourceInfo_.map(source => source.url).join(\",\"));\n\n    const self = this;\n    const requests = new Array(numSources);\n    for (let i = 0; i < numSources; ++i) {\n      requests[i] = getImagesForSource(this.sourceInfo_[i]);\n    }\n    Promise.all(requests)\n      .then(function (sources) {\n        self.configure_(sources);\n      })\n      .catch(function (error) {\n        console.error(error); // eslint-disable-line no-console\n        self.error_ = error;\n        self.setState(State.ERROR);\n      });\n  }\n\n  /**\n   * @return {Error} A source loading error. When the source state is `error`, use this function\n   * to get more information about the error. To debug a faulty configuration, you may want to use\n   * a listener like\n   * ```js\n   * geotiffSource.on(\"change\", () => {\n   *   if (geotiffSource.getState() === \"error\") {\n   *     console.error(geotiffSource.getError());\n   *   }\n   * });\n   * ```\n   */\n  getError() {\n    return this.error_;\n  }\n\n  /**\n   * Configure the tile grid based on images within the source GeoTIFFs.  Each GeoTIFF\n   * must have the same internal tiled structure.\n   * @param {Array<Array<GeoTIFFImage>>} sources Each source is a list of images\n   * from a single GeoTIFF.\n   * @private\n   */\n  configure_(sources) {\n    let extent;\n    let origin;\n    let tileSizes;\n    let resolutions;\n    const samplesPerPixel = new Array(sources.length);\n    const nodataValues = new Array(sources.length);\n    const metadata = new Array(sources.length);\n    let minZoom = 0;\n\n    const sourceCount = sources.length;\n    for (let sourceIndex = 0; sourceIndex < sourceCount; ++sourceIndex) {\n      const images = sources[sourceIndex];\n      const imageCount = images.length;\n\n      let sourceExtent;\n      let sourceOrigin;\n      const sourceTileSizes = new Array(imageCount);\n      const sourceResolutions = new Array(imageCount);\n\n      nodataValues[sourceIndex] = new Array(imageCount);\n      metadata[sourceIndex] = new Array(imageCount);\n\n      for (let imageIndex = 0; imageIndex < imageCount; ++imageIndex) {\n        const image = images[imageIndex];\n        const nodataValue = image.getGDALNoData();\n        metadata[sourceIndex][imageIndex] = image.getGDALMetadata();\n        nodataValues[sourceIndex][imageIndex] =\n          nodataValue === null ? NaN : nodataValue;\n\n        const wantedSamples = this.sourceInfo_[sourceIndex].bands;\n        samplesPerPixel[sourceIndex] = wantedSamples ?\n          wantedSamples.length :\n          image.getSamplesPerPixel();\n        const level = imageCount - (imageIndex + 1);\n\n        if (!sourceExtent) {\n          sourceExtent = getBoundingBox(image);\n        }\n\n        if (!sourceOrigin) {\n          sourceOrigin = getOrigin(image);\n        }\n\n        sourceResolutions[level] = getResolution(image, images[0]);\n        sourceTileSizes[level] = [image.getTileWidth(), image.getTileHeight()];\n      }\n\n      if (!extent) {\n        extent = sourceExtent;\n      } else {\n        getIntersection(extent, sourceExtent, extent);\n      }\n\n      if (!origin) {\n        origin = sourceOrigin;\n      } else {\n        const message = `Origin mismatch for source ${sourceIndex}, got [${sourceOrigin}] but expected [${origin}]`;\n        assertEqual(origin, sourceOrigin, 0, message, this.viewRejector);\n      }\n\n      if (!resolutions) {\n        resolutions = sourceResolutions;\n        this.resolutionFactors_[sourceIndex] = 1;\n      } else {\n        if (resolutions.length - minZoom > sourceResolutions.length) {\n          minZoom = resolutions.length - sourceResolutions.length;\n        }\n        const resolutionFactor =\n          resolutions[resolutions.length - 1] /\n          sourceResolutions[sourceResolutions.length - 1];\n        this.resolutionFactors_[sourceIndex] = resolutionFactor;\n        const scaledSourceResolutions = sourceResolutions.map(\n          resolution => (resolution *= resolutionFactor)\n        );\n        const message = `Resolution mismatch for source ${sourceIndex}, got [${scaledSourceResolutions}] but expected [${resolutions}]`;\n        assertEqual(\n          resolutions.slice(minZoom, resolutions.length),\n          scaledSourceResolutions,\n          0.005,\n          message,\n          this.viewRejector\n        );\n      }\n\n      if (!tileSizes) {\n        tileSizes = sourceTileSizes;\n      } else {\n        assertEqual(\n          tileSizes.slice(minZoom, tileSizes.length),\n          sourceTileSizes,\n          0,\n          `Tile size mismatch for source ${sourceIndex}`,\n          this.viewRejector\n        );\n      }\n\n      this.sourceImagery_[sourceIndex] = images.reverse();\n    }\n\n    for (let i = 0, ii = this.sourceImagery_.length; i < ii; ++i) {\n      const sourceImagery = this.sourceImagery_[i];\n      while (sourceImagery.length < resolutions.length) {\n        sourceImagery.unshift(undefined);\n      }\n    }\n\n    if (!this.getProjection()) {\n      const firstSource = sources[0];\n      for (let i = firstSource.length - 1; i >= 0; --i) {\n        const image = firstSource[i];\n        const projection = getProjection(image);\n        if (projection) {\n          this.projection = projection;\n          break;\n        }\n      }\n    }\n\n    this.samplesPerPixel_ = samplesPerPixel;\n    this.nodataValues_ = nodataValues;\n    this.metadata_ = metadata;\n\n    // decide if we need to add an alpha band to handle nodata\n    outer: for (let sourceIndex = 0; sourceIndex < sourceCount; ++sourceIndex) {\n      // option 1: source is configured with a nodata value\n      if (this.sourceInfo_[sourceIndex].nodata !== undefined) {\n        this.addAlpha_ = true;\n        break;\n      }\n\n      const values = nodataValues[sourceIndex];\n\n      // option 2: check image metadata for limited bands\n      const bands = this.sourceInfo_[sourceIndex].bands;\n      if (bands) {\n        for (let i = 0; i < bands.length; ++i) {\n          if (!isNaN(values[bands[i] - 1])) {\n            this.addAlpha_ = true;\n            break outer;\n          }\n        }\n        continue;\n      }\n\n      // option 3: check image metadata for all bands\n      for (let imageIndex = 0; imageIndex < values.length; ++imageIndex) {\n        if (!isNaN(values[imageIndex])) {\n          this.addAlpha_ = true;\n          break outer;\n        }\n      }\n    }\n\n    const additionalBands = this.addAlpha_ ? 1 : 0;\n    this.bandCount =\n      samplesPerPixel.reduce((accumulator, value) => {\n        accumulator += value;\n        return accumulator;\n      }, 0) + additionalBands;\n\n    const tileGrid = new TileGrid({\n      extent: extent,\n      minZoom: minZoom,\n      origin: origin,\n      resolutions: resolutions,\n      tileSizes: tileSizes,\n    });\n\n    this.tileGrid = tileGrid;\n\n    this.setLoader(this.loadTile_.bind(this));\n    this.setState(State.READY);\n    this.viewResolver({\n      projection: this.projection,\n      resolutions: resolutions,\n      center: toUserCoordinate(getCenter(extent), this.projection),\n      extent: toUserExtent(extent, this.projection),\n      zoom: 0,\n    });\n  }\n\n  loadTile_(z, x, y) {\n    const size = toSize(this.tileGrid.getTileSize(z));\n\n    const sourceCount = this.sourceImagery_.length;\n    const requests = new Array(sourceCount);\n    const addAlpha = this.addAlpha_;\n    const bandCount = this.bandCount;\n    const samplesPerPixel = this.samplesPerPixel_;\n    const nodataValues = this.nodataValues_;\n    const sourceInfo = this.sourceInfo_;\n    for (let sourceIndex = 0; sourceIndex < sourceCount; ++sourceIndex) {\n      const source = sourceInfo[sourceIndex];\n      const resolutionFactor = this.resolutionFactors_[sourceIndex];\n      const pixelBounds = [\n        Math.round(x * (size[0] * resolutionFactor)),\n        Math.round(y * (size[1] * resolutionFactor)),\n        Math.round((x + 1) * (size[0] * resolutionFactor)),\n        Math.round((y + 1) * (size[1] * resolutionFactor)),\n      ];\n      const image = this.sourceImagery_[sourceIndex][z];\n      let samples;\n      if (source.bands) {\n        samples = source.bands.map(function (bandNumber) {\n          return bandNumber - 1;\n        });\n      }\n\n      /** @type {number|Array<number>} */\n      let fillValue;\n      if (!isNaN(source.nodata)) {\n        fillValue = source.nodata;\n      } else {\n        if (!samples) {\n          fillValue = nodataValues[sourceIndex];\n        } else {\n          fillValue = samples.map(function (sampleIndex) {\n            return nodataValues[sourceIndex][sampleIndex];\n          });\n        }\n      }\n\n      requests[sourceIndex] = image[this.readMethod_]({\n        window: pixelBounds,\n        width: size[0],\n        height: size[1],\n        samples: samples,\n        fillValue: fillValue,\n        pool: getWorkerPool(),\n        interleave: false,\n      });\n    }\n\n    const pixelCount = size[0] * size[1];\n    const dataLength = pixelCount * bandCount;\n    const normalize = this.normalize_;\n    const metadata = this.metadata_;\n\n    return Promise.all(requests).then(function (sourceSamples) {\n      /** @type {Uint8Array|Float32Array} */\n      let data;\n      if (normalize) {\n        data = new Uint8Array(dataLength);\n      } else {\n        data = new Float32Array(dataLength);\n      }\n\n      let dataIndex = 0;\n      for (let pixelIndex = 0; pixelIndex < pixelCount; ++pixelIndex) {\n        let transparent = addAlpha;\n        for (let sourceIndex = 0; sourceIndex < sourceCount; ++sourceIndex) {\n          const source = sourceInfo[sourceIndex];\n\n          let min = source.min;\n          let max = source.max;\n          let gain, bias;\n          if (normalize) {\n            const stats = metadata[sourceIndex][0];\n            if (min === undefined) {\n              if (stats && STATISTICS_MINIMUM in stats) {\n                min = parseFloat(stats[STATISTICS_MINIMUM]);\n              } else {\n                min = getMinForDataType(sourceSamples[sourceIndex][0]);\n              }\n            }\n            if (max === undefined) {\n              if (stats && STATISTICS_MAXIMUM in stats) {\n                max = parseFloat(stats[STATISTICS_MAXIMUM]);\n              } else {\n                max = getMaxForDataType(sourceSamples[sourceIndex][0]);\n              }\n            }\n\n            gain = 255 / (max - min);\n            bias = -min * gain;\n          }\n\n          for (\n            let sampleIndex = 0; sampleIndex < samplesPerPixel[sourceIndex];\n            ++sampleIndex\n          ) {\n            const sourceValue =\n              sourceSamples[sourceIndex][sampleIndex][pixelIndex];\n\n            let value;\n            if (normalize) {\n              value = clamp(gain * sourceValue + bias, 0, 255);\n            } else {\n              value = sourceValue;\n            }\n\n            if (!addAlpha) {\n              data[dataIndex] = value;\n            } else {\n              let nodata = source.nodata;\n              if (nodata === undefined) {\n                let bandIndex;\n                if (source.bands) {\n                  bandIndex = source.bands[sampleIndex] - 1;\n                } else {\n                  bandIndex = sampleIndex;\n                }\n                nodata = nodataValues[sourceIndex][bandIndex];\n              }\n\n              if (sourceValue !== nodata) {\n                transparent = false;\n                data[dataIndex] = value;\n              }\n            }\n            dataIndex++;\n          }\n        }\n        if (addAlpha) {\n          if (!transparent) {\n            data[dataIndex] = 255;\n          }\n          dataIndex++;\n        }\n      }\n\n      return data;\n    });\n  }\n}\n\n/**\n * Get a promise for view properties based on the source.  Use the result of this function\n * as the `view` option in a map constructor.\n *\n *     const source = new GeoTIFF(options);\n *\n *     const map = new Map({\n *       target: \"map\",\n *       layers: [\n *         new TileLayer({\n *           source: source,\n *         }),\n *       ],\n *       view: source.getView(),\n *     });\n *\n * @function\n * @return {Promise<import(\"../View.js\").ViewOptions>} A promise for view-related properties.\n * @api\n *\n */\nGeoTIFFSource.prototype.getView;\n\nexport default GeoTIFFSource;","export function create() {\n  var source = \"function _typeof(e){return(_typeof=\\\"function\\\"==typeof Symbol&&\\\"symbol\\\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\\\"function\\\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\\\"symbol\\\":typeof e})(e)}function asyncGeneratorStep(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){asyncGeneratorStep(i,n,a,o,s,\\\"next\\\",e)}function s(e){asyncGeneratorStep(i,n,a,o,s,\\\"throw\\\",e)}o(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\\\"value\\\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,\\\"prototype\\\",{writable:!1}),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _inherits(e,t){if(\\\"function\\\"!=typeof t&&null!==t)throw new TypeError(\\\"Super expression must either be null or a function\\\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\\\"prototype\\\",{writable:!1}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct(){if(\\\"undefined\\\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\\\"function\\\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\");return e}function _possibleConstructorReturn(e,t){if(t&&(\\\"object\\\"==typeof t||\\\"function\\\"==typeof t))return t;if(void 0!==t)throw new TypeError(\\\"Derived constructors may only return object or undefined\\\");return _assertThisInitialized(e)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if(\\\"undefined\\\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\\\"@@iterator\\\"])return Array.from(e)}function _unsupportedIterableToArray(e,t){if(e){if(\\\"string\\\"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\\\"Object\\\"===r&&e.constructor&&(r=e.constructor.name),\\\"Map\\\"===r||\\\"Set\\\"===r?Array.from(e):\\\"Arguments\\\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _nonIterableSpread(){throw new TypeError(\\\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\\\")}var commonjsGlobal=\\\"undefined\\\"!=typeof globalThis?globalThis:\\\"undefined\\\"!=typeof window?window:\\\"undefined\\\"!=typeof global?global:\\\"undefined\\\"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\\\"default\\\")?e.default:e}var runtime={exports:{}};!function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,a=\\\"function\\\"==typeof Symbol?Symbol:{},i=a.iterator||\\\"@@iterator\\\",o=a.asyncIterator||\\\"@@asyncIterator\\\",s=a.toStringTag||\\\"@@toStringTag\\\";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},\\\"\\\")}catch(e){l=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),o=new A(n||[]);return i._invoke=function(e,t,r){var n=u;return function(a,i){if(n===h)throw new Error(\\\"Generator is already running\\\");if(n===p){if(\\\"throw\\\"===a)throw i;return I()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=x(o,r);if(s){if(s===m)continue;return s}}if(\\\"next\\\"===r.method)r.sent=r._sent=r.arg;else if(\\\"throw\\\"===r.method){if(n===u)throw n=p,r.arg;r.dispatchException(r.arg)}else\\\"return\\\"===r.method&&r.abrupt(\\\"return\\\",r.arg);n=h;var l=c(e,t,r);if(\\\"normal\\\"===l.type){if(n=r.done?p:d,l.arg===m)continue;return{value:l.arg,done:r.done}}\\\"throw\\\"===l.type&&(n=p,r.method=\\\"throw\\\",r.arg=l.arg)}}}(e,r,o),i}function c(e,t,r){try{return{type:\\\"normal\\\",arg:e.call(t,r)}}catch(e){return{type:\\\"throw\\\",arg:e}}}e.wrap=f;var u=\\\"suspendedStart\\\",d=\\\"suspendedYield\\\",h=\\\"executing\\\",p=\\\"completed\\\",m={};function g(){}function y(){}function _(){}var b={};l(b,i,(function(){return this}));var v=Object.getPrototypeOf,w=v&&v(v(M([])));w&&w!==r&&n.call(w,i)&&(b=w);var k=_.prototype=g.prototype=Object.create(b);function T(e){[\\\"next\\\",\\\"throw\\\",\\\"return\\\"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(a,i,o,s){var l=c(e[a],e,i);if(\\\"throw\\\"!==l.type){var f=l.arg,u=f.value;return u&&\\\"object\\\"===_typeof(u)&&n.call(u,\\\"__await\\\")?t.resolve(u.__await).then((function(e){r(\\\"next\\\",e,o,s)}),(function(e){r(\\\"throw\\\",e,o,s)})):t.resolve(u).then((function(e){f.value=e,o(f)}),(function(e){return r(\\\"throw\\\",e,o,s)}))}s(l.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}}function x(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,\\\"throw\\\"===r.method){if(e.iterator.return&&(r.method=\\\"return\\\",r.arg=t,x(e,r),\\\"throw\\\"===r.method))return m;r.method=\\\"throw\\\",r.arg=new TypeError(\\\"The iterator does not provide a 'throw' method\\\")}return m}var a=c(n,e.iterator,r.arg);if(\\\"throw\\\"===a.type)return r.method=\\\"throw\\\",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,\\\"return\\\"!==r.method&&(r.method=\\\"next\\\",r.arg=t),r.delegate=null,m):i:(r.method=\\\"throw\\\",r.arg=new TypeError(\\\"iterator result is not an object\\\"),r.delegate=null,m)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type=\\\"normal\\\",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:\\\"root\\\"}],e.forEach(S,this),this.reset(!0)}function M(e){if(e){var r=e[i];if(r)return r.call(e);if(\\\"function\\\"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:I}}function I(){return{value:t,done:!0}}return y.prototype=_,l(k,\\\"constructor\\\",_),l(_,\\\"constructor\\\",y),y.displayName=l(_,s,\\\"GeneratorFunction\\\"),e.isGeneratorFunction=function(e){var t=\\\"function\\\"==typeof e&&e.constructor;return!!t&&(t===y||\\\"GeneratorFunction\\\"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,s,\\\"GeneratorFunction\\\")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},T(E.prototype),l(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new E(f(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(k),l(k,s,\\\"Generator\\\"),l(k,i,(function(){return this})),l(k,\\\"toString\\\",(function(){return\\\"[object Generator]\\\"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method=\\\"next\\\",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)\\\"t\\\"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(\\\"throw\\\"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type=\\\"throw\\\",s.arg=e,r.next=n,a&&(r.method=\\\"next\\\",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if(\\\"root\\\"===o.tryLoc)return a(\\\"end\\\");if(o.tryLoc<=this.prev){var l=n.call(o,\\\"catchLoc\\\"),f=n.call(o,\\\"finallyLoc\\\");if(l&&f){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!f)throw new Error(\\\"try statement without catch or finally\\\");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,\\\"finallyLoc\\\")&&this.prev<a.finallyLoc){var i=a;break}}i&&(\\\"break\\\"===e||\\\"continue\\\"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method=\\\"next\\\",this.next=i.finallyLoc,m):this.complete(o)},complete:function(e,t){if(\\\"throw\\\"===e.type)throw e.arg;return\\\"break\\\"===e.type||\\\"continue\\\"===e.type?this.next=e.arg:\\\"return\\\"===e.type?(this.rval=this.arg=e.arg,this.method=\\\"return\\\",this.next=\\\"end\\\"):\\\"normal\\\"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if(\\\"throw\\\"===n.type){var a=n.arg;D(r)}return a}}throw new Error(\\\"illegal catch attempt\\\")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},\\\"next\\\"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){\\\"object\\\"===(\\\"undefined\\\"==typeof globalThis?\\\"undefined\\\":_typeof(globalThis))?globalThis.regeneratorRuntime=t:Function(\\\"r\\\",\\\"regeneratorRuntime = r\\\")(t)}}(runtime);var worker={},isObservable=function(e){return!!e&&(\\\"symbol\\\"===_typeof(Symbol.observable)&&\\\"function\\\"==typeof e[Symbol.observable]?e===e[Symbol.observable]():\\\"function\\\"==typeof e[\\\"@@observable\\\"]&&e===e[\\\"@@observable\\\"]())},common$1={},serializers={};function extendSerializer(e,t){var r=e.deserialize.bind(e),n=e.serialize.bind(e);return{deserialize:function(e){return t.deserialize(e,r)},serialize:function(e){return t.serialize(e,n)}}}Object.defineProperty(serializers,\\\"__esModule\\\",{value:!0}),serializers.DefaultSerializer=serializers.extendSerializer=void 0,serializers.extendSerializer=extendSerializer;var DefaultErrorSerializer={deserialize:function(e){return Object.assign(Error(e.message),{name:e.name,stack:e.stack})},serialize:function(e){return{__error_marker:\\\"$$error\\\",message:e.message,name:e.name,stack:e.stack}}},isSerializedError=function(e){return e&&\\\"object\\\"===_typeof(e)&&\\\"__error_marker\\\"in e&&\\\"$$error\\\"===e.__error_marker};serializers.DefaultSerializer={deserialize:function(e){return isSerializedError(e)?DefaultErrorSerializer.deserialize(e):e},serialize:function(e){return e instanceof Error?DefaultErrorSerializer.serialize(e):e}},Object.defineProperty(common$1,\\\"__esModule\\\",{value:!0}),common$1.serialize=common$1.deserialize=common$1.registerSerializer=void 0;var serializers_1=serializers,registeredSerializer=serializers_1.DefaultSerializer;function registerSerializer(e){registeredSerializer=serializers_1.extendSerializer(registeredSerializer,e)}function deserialize(e){return registeredSerializer.deserialize(e)}function serialize(e){return registeredSerializer.serialize(e)}common$1.registerSerializer=registerSerializer,common$1.deserialize=deserialize,common$1.serialize=serialize;var transferable={},symbols={};Object.defineProperty(symbols,\\\"__esModule\\\",{value:!0}),symbols.$worker=symbols.$transferable=symbols.$terminate=symbols.$events=symbols.$errors=void 0,symbols.$errors=Symbol(\\\"thread.errors\\\"),symbols.$events=Symbol(\\\"thread.events\\\"),symbols.$terminate=Symbol(\\\"thread.terminate\\\"),symbols.$transferable=Symbol(\\\"thread.transferable\\\"),symbols.$worker=Symbol(\\\"thread.worker\\\"),Object.defineProperty(transferable,\\\"__esModule\\\",{value:!0}),transferable.Transfer=transferable.isTransferDescriptor=void 0;var symbols_1=symbols;function isTransferable(e){return!(!e||\\\"object\\\"!==_typeof(e))}function isTransferDescriptor(e){return e&&\\\"object\\\"===_typeof(e)&&e[symbols_1.$transferable]}function Transfer$1(e,t){var r;if(!t){if(!isTransferable(e))throw Error();t=[e]}return _defineProperty(r={},symbols_1.$transferable,!0),_defineProperty(r,\\\"send\\\",e),_defineProperty(r,\\\"transferables\\\",t),r}transferable.isTransferDescriptor=isTransferDescriptor,transferable.Transfer=Transfer$1;var messages$1={},exports,MasterMessageType,WorkerMessageType;exports=messages$1,Object.defineProperty(exports,\\\"__esModule\\\",{value:!0}),exports.WorkerMessageType=exports.MasterMessageType=void 0,(MasterMessageType=exports.MasterMessageType||(exports.MasterMessageType={})).cancel=\\\"cancel\\\",MasterMessageType.run=\\\"run\\\",(WorkerMessageType=exports.WorkerMessageType||(exports.WorkerMessageType={})).error=\\\"error\\\",WorkerMessageType.init=\\\"init\\\",WorkerMessageType.result=\\\"result\\\",WorkerMessageType.running=\\\"running\\\",WorkerMessageType.uncaughtError=\\\"uncaughtError\\\";var implementation$1={},implementation_browser={};Object.defineProperty(implementation_browser,\\\"__esModule\\\",{value:!0});var isWorkerRuntime$2=function(){var e=\\\"undefined\\\"!=typeof self&&\\\"undefined\\\"!=typeof Window&&self instanceof Window;return!(\\\"undefined\\\"==typeof self||!self.postMessage||e)},postMessageToMaster$2=function(e,t){self.postMessage(e,t)},subscribeToMasterMessages$2=function(e){var t=function(t){e(t.data)};return self.addEventListener(\\\"message\\\",t),function(){self.removeEventListener(\\\"message\\\",t)}};implementation_browser.default={isWorkerRuntime:isWorkerRuntime$2,postMessageToMaster:postMessageToMaster$2,subscribeToMasterMessages:subscribeToMasterMessages$2};var implementation_tinyWorker={};Object.defineProperty(implementation_tinyWorker,\\\"__esModule\\\",{value:!0}),\\\"undefined\\\"==typeof self&&(commonjsGlobal.self=commonjsGlobal);var isWorkerRuntime$1=function(){return!(\\\"undefined\\\"==typeof self||!self.postMessage)},postMessageToMaster$1=function(e){self.postMessage(e)},muxingHandlerSetUp=!1,messageHandlers=new Set,subscribeToMasterMessages$1=function(e){muxingHandlerSetUp||(self.addEventListener(\\\"message\\\",(function(e){messageHandlers.forEach((function(t){return t(e.data)}))})),muxingHandlerSetUp=!0),messageHandlers.add(e);return function(){return messageHandlers.delete(e)}};implementation_tinyWorker.default={isWorkerRuntime:isWorkerRuntime$1,postMessageToMaster:postMessageToMaster$1,subscribeToMasterMessages:subscribeToMasterMessages$1};var implementation_worker_threads={},worker_threads={},implementation;function selectImplementation(){return\\\"function\\\"==typeof __non_webpack_require__?__non_webpack_require__(\\\"worker_threads\\\"):eval(\\\"require\\\")(\\\"worker_threads\\\")}function getImplementation(){return implementation||(implementation=selectImplementation()),implementation}Object.defineProperty(worker_threads,\\\"__esModule\\\",{value:!0}),worker_threads.default=getImplementation;var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(implementation_worker_threads,\\\"__esModule\\\",{value:!0});var worker_threads_1=__importDefault$1(worker_threads);function assertMessagePort(e){if(!e)throw Error(\\\"Invariant violation: MessagePort to parent is not available.\\\");return e}var isWorkerRuntime=function(){return!worker_threads_1.default().isMainThread},postMessageToMaster=function(e,t){assertMessagePort(worker_threads_1.default().parentPort).postMessage(e,t)},subscribeToMasterMessages=function(e){var t=worker_threads_1.default().parentPort;if(!t)throw Error(\\\"Invariant violation: MessagePort to parent is not available.\\\");var r=function(t){e(t)};return assertMessagePort(t).on(\\\"message\\\",r),function(){assertMessagePort(t).off(\\\"message\\\",r)}};function testImplementation(){worker_threads_1.default()}implementation_worker_threads.default={isWorkerRuntime:isWorkerRuntime,postMessageToMaster:postMessageToMaster,subscribeToMasterMessages:subscribeToMasterMessages,testImplementation:testImplementation};var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(implementation$1,\\\"__esModule\\\",{value:!0});var implementation_browser_1=__importDefault(implementation_browser),implementation_tiny_worker_1=__importDefault(implementation_tinyWorker),implementation_worker_threads_1=__importDefault(implementation_worker_threads),runningInNode=\\\"undefined\\\"!=typeof process&&\\\"browser\\\"!==process.arch&&\\\"pid\\\"in process;function selectNodeImplementation(){try{return implementation_worker_threads_1.default.testImplementation(),implementation_worker_threads_1.default}catch(e){return implementation_tiny_worker_1.default}}implementation$1.default=runningInNode?selectNodeImplementation():implementation_browser_1.default,function(e){var t=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},r=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,\\\"__esModule\\\",{value:!0}),e.expose=e.isWorkerRuntime=e.Transfer=e.registerSerializer=void 0;var n=r(isObservable),a=common$1,i=transferable,o=messages$1,s=r(implementation$1),l=common$1;Object.defineProperty(e,\\\"registerSerializer\\\",{enumerable:!0,get:function(){return l.registerSerializer}});var f=transferable;Object.defineProperty(e,\\\"Transfer\\\",{enumerable:!0,get:function(){return f.Transfer}}),e.isWorkerRuntime=s.default.isWorkerRuntime;var c=!1,u=new Map,d=function(e){return e&&e.type===o.MasterMessageType.run},h=function(e){return n.default(e)||function(e){return e&&\\\"object\\\"===_typeof(e)&&\\\"function\\\"==typeof e.subscribe}(e)};function p(e){return i.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function m(e,t){var r=p(t),n=r.payload,i=r.transferables,l={type:o.WorkerMessageType.error,uid:e,error:a.serialize(n)};s.default.postMessageToMaster(l,i)}function g(e,t,r){var n=p(r),a=n.payload,i=n.transferables,l={type:o.WorkerMessageType.result,uid:e,complete:!!t||void 0,payload:a};s.default.postMessageToMaster(l,i)}function y(e,t){var r={type:o.WorkerMessageType.running,uid:e,resultType:t};s.default.postMessageToMaster(r)}function _(e){try{var t={type:o.WorkerMessageType.uncaughtError,error:a.serialize(e)};s.default.postMessageToMaster(t)}catch(t){console.error(\\\"Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\\\\nLatest error:\\\",t,\\\"\\\\nOriginal error:\\\",e)}}function b(e,r,n){return t(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,i=r.apply(void 0,_toConsumableArray(n)),t.next=7;break;case 4:return t.prev=4,t.t0=t.catch(0),t.abrupt(\\\"return\\\",m(e,t.t0));case 7:if(o=h(i)?\\\"observable\\\":\\\"promise\\\",y(e,o),!h(i)){t.next=14;break}s=i.subscribe((function(t){return g(e,!1,a.serialize(t))}),(function(t){m(e,a.serialize(t)),u.delete(e)}),(function(){g(e,!0),u.delete(e)})),u.set(e,s),t.next=24;break;case 14:return t.prev=14,t.next=17,i;case 17:l=t.sent,g(e,!0,a.serialize(l)),t.next=24;break;case 21:t.prev=21,t.t1=t.catch(14),m(e,a.serialize(t.t1));case 24:case\\\"end\\\":return t.stop()}}),t,null,[[0,4],[14,21]])})))}e.expose=function(e){if(!s.default.isWorkerRuntime())throw Error(\\\"expose() called in the master thread.\\\");if(c)throw Error(\\\"expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.\\\");if(c=!0,\\\"function\\\"==typeof e)s.default.subscribeToMasterMessages((function(t){d(t)&&!t.method&&b(t.uid,e,t.args.map(a.deserialize))})),t={type:o.WorkerMessageType.init,exposed:{type:\\\"function\\\"}},s.default.postMessageToMaster(t);else{if(\\\"object\\\"!==_typeof(e)||!e)throw Error(\\\"Invalid argument passed to expose(). Expected a function or an object, got: \\\".concat(e));s.default.subscribeToMasterMessages((function(t){d(t)&&t.method&&b(t.uid,e[t.method],t.args.map(a.deserialize))})),function(e){var t={type:o.WorkerMessageType.init,exposed:{type:\\\"module\\\",methods:e}};s.default.postMessageToMaster(t)}(Object.keys(e).filter((function(t){return\\\"function\\\"==typeof e[t]})))}var t;s.default.subscribeToMasterMessages((function(e){if((n=e)&&n.type===o.MasterMessageType.cancel){var t=e.uid,r=u.get(t);r&&(r.unsubscribe(),u.delete(t))}var n}))},\\\"undefined\\\"!=typeof self&&\\\"function\\\"==typeof self.addEventListener&&s.default.isWorkerRuntime()&&(self.addEventListener(\\\"error\\\",(function(e){setTimeout((function(){return _(e.error||e)}),250)})),self.addEventListener(\\\"unhandledrejection\\\",(function(e){var t=e.reason;t&&\\\"string\\\"==typeof t.message&&setTimeout((function(){return _(t)}),250)}))),\\\"undefined\\\"!=typeof process&&\\\"function\\\"==typeof process.on&&s.default.isWorkerRuntime()&&(process.on(\\\"uncaughtException\\\",(function(e){setTimeout((function(){return _(e)}),250)})),process.on(\\\"unhandledRejection\\\",(function(e){e&&\\\"string\\\"==typeof e.message&&setTimeout((function(){return _(e)}),250)})))}(worker);var WorkerContext=getDefaultExportFromCjs(worker),expose=WorkerContext.expose;WorkerContext.registerSerializer;var Transfer=WorkerContext.Transfer,registry=new Map;function addDecoder(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){return registry.set(e,t)}))}function getDecoder(e){return _getDecoder.apply(this,arguments)}function _getDecoder(){return(_getDecoder=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=registry.get(t.Compression)){e.next=3;break}throw new Error(\\\"Unknown compression method identifier: \\\".concat(t.Compression));case 3:return e.next=5,r();case 5:return n=e.sent,e.abrupt(\\\"return\\\",new n(t));case 7:case\\\"end\\\":return e.stop()}}),e)})))).apply(this,arguments)}function decode(e,t){return _decode.apply(this,arguments)}function _decode(){return(_decode=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,getDecoder(t);case 2:return n=e.sent,e.next=5,n.decode(t,r);case 5:return a=e.sent,e.abrupt(\\\"return\\\",Transfer(a));case 7:case\\\"end\\\":return e.stop()}}),e)})))).apply(this,arguments)}function decodeRowAcc(e,t){var r=e.length-t,n=0;do{for(var a=t;a>0;a--)e[n+t]+=e[n],n++;r-=t}while(r>0)}function decodeRowFloatingPoint(e,t,r){for(var n=0,a=e.length,i=a/r;a>t;){for(var o=t;o>0;--o)e[n+t]+=e[n],++n;a-=t}for(var s=e.slice(),l=0;l<i;++l)for(var f=0;f<r;++f)e[r*l+f]=s[(r-f-1)*i+l]}function applyPredictor(e,t,r,n,a,i){if(!t||1===t)return e;for(var o=0;o<a.length;++o){if(a[o]%8!=0)throw new Error(\\\"When decoding with predictor, only multiple of 8 bits are supported.\\\");if(a[o]!==a[0])throw new Error(\\\"When decoding with predictor, all samples must have the same size.\\\")}for(var s=a[0]/8,l=2===i?1:a.length,f=0;f<n&&!(f*l*r*s>=e.byteLength);++f){var c=void 0;if(2===t){switch(a[0]){case 8:c=new Uint8Array(e,f*l*r*s,l*r*s);break;case 16:c=new Uint16Array(e,f*l*r*s,l*r*s/2);break;case 32:c=new Uint32Array(e,f*l*r*s,l*r*s/4);break;default:throw new Error(\\\"Predictor 2 not allowed with \\\".concat(a[0],\\\" bits per sample.\\\"))}decodeRowAcc(c,l)}else 3===t&&decodeRowFloatingPoint(c=new Uint8Array(e,f*l*r*s,l*r*s),l,s)}return e}addDecoder([void 0,1],(function(){return Promise.resolve().then((function(){return raw})).then((function(e){return e.default}))})),addDecoder(5,(function(){return Promise.resolve().then((function(){return lzw})).then((function(e){return e.default}))})),addDecoder(6,(function(){throw new Error(\\\"old style JPEG compression is not supported.\\\")})),addDecoder(7,(function(){return Promise.resolve().then((function(){return jpeg})).then((function(e){return e.default}))})),addDecoder([8,32946],(function(){return Promise.resolve().then((function(){return deflate})).then((function(e){return e.default}))})),addDecoder(32773,(function(){return Promise.resolve().then((function(){return packbits})).then((function(e){return e.default}))})),addDecoder(34887,(function(){return Promise.resolve().then((function(){return lerc})).then((function(e){return e.default}))})),expose(decode);var BaseDecoder=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:\\\"decode\\\",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decodeBlock(r);case 2:if(n=e.sent,1===(a=t.Predictor||1)){e.next=9;break}return i=!t.StripOffsets,o=i?t.TileWidth:t.ImageWidth,s=i?t.TileLength:t.RowsPerStrip||t.ImageLength,e.abrupt(\\\"return\\\",applyPredictor(n,a,o,s,t.BitsPerSample,t.PlanarConfiguration));case 9:return e.abrupt(\\\"return\\\",n);case 10:case\\\"end\\\":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),RawDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:\\\"decodeBlock\\\",value:function(e){return e}}]),r}(),raw=Object.freeze({__proto__:null,default:RawDecoder}),MIN_BITS=9,CLEAR_CODE=256,EOI_CODE=257,MAX_BYTELENGTH=12;function getByte(e,t,r){var n=t%8,a=Math.floor(t/8),i=8-n,o=t+r-8*(a+1),s=8*(a+2)-(t+r),l=8*(a+2)-t;if(s=Math.max(0,s),a>=e.length)return console.warn(\\\"ran off the end of the buffer before finding EOI_CODE (end on input code)\\\"),EOI_CODE;var f=e[a]&Math.pow(2,8-n)-1,c=f<<=r-i;if(a+1<e.length){var u=e[a+1]>>>s;c+=u<<=Math.max(0,r-l)}if(o>8&&a+2<e.length){var d=8*(a+3)-(t+r);c+=e[a+2]>>>d}return c}function appendReversed(e,t){for(var r=t.length-1;r>=0;r--)e.push(t[r]);return e}function decompress(e){for(var t=new Uint16Array(4093),r=new Uint8Array(4093),n=0;n<=257;n++)t[n]=4096,r[n]=n;var a=258,i=MIN_BITS,o=0;function s(){a=258,i=MIN_BITS}function l(e){var t=getByte(e,o,i);return o+=i,t}function f(e,n){return r[a]=n,t[a]=e,++a-1}function c(e){for(var n=[],a=e;4096!==a;a=t[a])n.push(r[a]);return n}var u=[];s();for(var d,h=new Uint8Array(e),p=l(h);p!==EOI_CODE;){if(p===CLEAR_CODE){for(s(),p=l(h);p===CLEAR_CODE;)p=l(h);if(p===EOI_CODE)break;if(p>CLEAR_CODE)throw new Error(\\\"corrupted code at scanline \\\".concat(p));appendReversed(u,c(p)),d=p}else if(p<a){var m=c(p);appendReversed(u,m),f(d,m[m.length-1]),d=p}else{var g=c(d);if(!g)throw new Error(\\\"Bogus entry. Not in dictionary, \\\".concat(d,\\\" / \\\").concat(a,\\\", position: \\\").concat(o));appendReversed(u,g),u.push(g[g.length-1]),f(d,g[g.length-1]),d=p}a+1>=Math.pow(2,i)&&(i===MAX_BYTELENGTH?d=void 0:i++),p=l(h)}return new Uint8Array(u)}var LZWDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:\\\"decodeBlock\\\",value:function(e){return decompress(e).buffer}}]),r}(),lzw=Object.freeze({__proto__:null,default:LZWDecoder}),dctZigZag=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),dctCos1=4017,dctSin1=799,dctCos3=3406,dctSin3=2276,dctCos6=1567,dctSin6=3784,dctSqrt2=5793,dctSqrt1d2=2896;function buildHuffmanTable(e,t){for(var r=0,n=[],a=16;a>0&&!e[a-1];)--a;n.push({children:[],index:0});for(var i,o=n[0],s=0;s<a;s++){for(var l=0;l<e[s];l++){for((o=n.pop()).children[o.index]=t[r];o.index>0;)o=n.pop();for(o.index++,n.push(o);n.length<=s;)n.push(i={children:[],index:0}),o.children[o.index]=i.children,o=i;r++}s+1<a&&(n.push(i={children:[],index:0}),o.children[o.index]=i.children,o=i)}return n[0].children}function decodeScan(e,t,r,n,a,i,o,s,l){var f=r.mcusPerLine,c=r.progressive,u=t,d=t,h=0,p=0;function m(){if(p>0)return p--,h>>p&1;if(255===(h=e[d++])){var t=e[d++];if(t)throw new Error(\\\"unexpected marker: \\\".concat((h<<8|t).toString(16)))}return p=7,h>>>7}function g(e){for(var t,r=e;null!==(t=m());){if(\\\"number\\\"==typeof(r=r[t]))return r;if(\\\"object\\\"!==_typeof(r))throw new Error(\\\"invalid huffman sequence\\\")}return null}function y(e){for(var t=e,r=0;t>0;){var n=m();if(null===n)return;r=r<<1|n,--t}return r}function _(e){var t=y(e);return t>=1<<e-1?t:t+(-1<<e)+1}var b=0;var v,w=0;function k(e,t,r,n,a){var i=r%f,o=(r/f|0)*e.v+n,s=i*e.h+a;t(e,e.blocks[o][s])}function T(e,t,r){var n=r/e.blocksPerLine|0,a=r%e.blocksPerLine;t(e,e.blocks[n][a])}var E,x,S,D,A,M,I=n.length;M=c?0===i?0===s?function(e,t){var r=g(e.huffmanTableDC),n=0===r?0:_(r)<<l;e.pred+=n,t[0]=e.pred}:function(e,t){t[0]|=m()<<l}:0===s?function(e,t){if(b>0)b--;else for(var r=i,n=o;r<=n;){var a=g(e.huffmanTableAC),s=15&a,f=a>>4;if(0===s){if(f<15){b=y(f)+(1<<f)-1;break}r+=16}else t[dctZigZag[r+=f]]=_(s)*(1<<l),r++}}:function(e,t){for(var r=i,n=o,a=0;r<=n;){var s=dctZigZag[r],f=t[s]<0?-1:1;switch(w){case 0:var c=g(e.huffmanTableAC),u=15&c;if(a=c>>4,0===u)a<15?(b=y(a)+(1<<a),w=4):(a=16,w=1);else{if(1!==u)throw new Error(\\\"invalid ACn encoding\\\");v=_(u),w=a?2:3}continue;case 1:case 2:t[s]?t[s]+=(m()<<l)*f:0==--a&&(w=2===w?3:0);break;case 3:t[s]?t[s]+=(m()<<l)*f:(t[s]=v<<l,w=0);break;case 4:t[s]&&(t[s]+=(m()<<l)*f)}r++}4===w&&0==--b&&(w=0)}:function(e,t){var r=g(e.huffmanTableDC),n=0===r?0:_(r);e.pred+=n,t[0]=e.pred;for(var a=1;a<64;){var i=g(e.huffmanTableAC),o=15&i,s=i>>4;if(0===o){if(s<15)break;a+=16}else t[dctZigZag[a+=s]]=_(o),a++}};var R,O,C=0;O=1===I?n[0].blocksPerLine*n[0].blocksPerColumn:f*r.mcusPerColumn;for(var P=a||O;C<O;){for(x=0;x<I;x++)n[x].pred=0;if(b=0,1===I)for(E=n[0],A=0;A<P;A++)T(E,M,C),C++;else for(A=0;A<P;A++){for(x=0;x<I;x++){var L=E=n[x],U=L.h,B=L.v;for(S=0;S<B;S++)for(D=0;D<U;D++)k(E,M,C,S,D)}if(++C===O)break}if(p=0,(R=e[d]<<8|e[d+1])<65280)throw new Error(\\\"marker was not found\\\");if(!(R>=65488&&R<=65495))break;d+=2}return d-u}function buildComponentData(e,t){var r=[],n=t.blocksPerLine,a=t.blocksPerColumn,i=n<<3,o=new Int32Array(64),s=new Uint8Array(64);function l(e,r,n){var a,i,o,s,l,f,c,u,d,h,p=t.quantizationTable,m=n;for(h=0;h<64;h++)m[h]=e[h]*p[h];for(h=0;h<8;++h){var g=8*h;0!==m[1+g]||0!==m[2+g]||0!==m[3+g]||0!==m[4+g]||0!==m[5+g]||0!==m[6+g]||0!==m[7+g]?(a=dctSqrt2*m[0+g]+128>>8,i=dctSqrt2*m[4+g]+128>>8,o=m[2+g],s=m[6+g],l=dctSqrt1d2*(m[1+g]-m[7+g])+128>>8,u=dctSqrt1d2*(m[1+g]+m[7+g])+128>>8,f=m[3+g]<<4,c=m[5+g]<<4,d=a-i+1>>1,a=a+i+1>>1,i=d,d=o*dctSin6+s*dctCos6+128>>8,o=o*dctCos6-s*dctSin6+128>>8,s=d,d=l-c+1>>1,l=l+c+1>>1,c=d,d=u+f+1>>1,f=u-f+1>>1,u=d,d=a-s+1>>1,a=a+s+1>>1,s=d,d=i-o+1>>1,i=i+o+1>>1,o=d,d=l*dctSin3+u*dctCos3+2048>>12,l=l*dctCos3-u*dctSin3+2048>>12,u=d,d=f*dctSin1+c*dctCos1+2048>>12,f=f*dctCos1-c*dctSin1+2048>>12,c=d,m[0+g]=a+u,m[7+g]=a-u,m[1+g]=i+c,m[6+g]=i-c,m[2+g]=o+f,m[5+g]=o-f,m[3+g]=s+l,m[4+g]=s-l):(d=dctSqrt2*m[0+g]+512>>10,m[0+g]=d,m[1+g]=d,m[2+g]=d,m[3+g]=d,m[4+g]=d,m[5+g]=d,m[6+g]=d,m[7+g]=d)}for(h=0;h<8;++h){var y=h;0!==m[8+y]||0!==m[16+y]||0!==m[24+y]||0!==m[32+y]||0!==m[40+y]||0!==m[48+y]||0!==m[56+y]?(a=dctSqrt2*m[0+y]+2048>>12,i=dctSqrt2*m[32+y]+2048>>12,o=m[16+y],s=m[48+y],l=dctSqrt1d2*(m[8+y]-m[56+y])+2048>>12,u=dctSqrt1d2*(m[8+y]+m[56+y])+2048>>12,f=m[24+y],c=m[40+y],d=a-i+1>>1,a=a+i+1>>1,i=d,d=o*dctSin6+s*dctCos6+2048>>12,o=o*dctCos6-s*dctSin6+2048>>12,s=d,d=l-c+1>>1,l=l+c+1>>1,c=d,d=u+f+1>>1,f=u-f+1>>1,u=d,d=a-s+1>>1,a=a+s+1>>1,s=d,d=i-o+1>>1,i=i+o+1>>1,o=d,d=l*dctSin3+u*dctCos3+2048>>12,l=l*dctCos3-u*dctSin3+2048>>12,u=d,d=f*dctSin1+c*dctCos1+2048>>12,f=f*dctCos1-c*dctSin1+2048>>12,c=d,m[0+y]=a+u,m[56+y]=a-u,m[8+y]=i+c,m[48+y]=i-c,m[16+y]=o+f,m[40+y]=o-f,m[24+y]=s+l,m[32+y]=s-l):(d=dctSqrt2*n[h+0]+8192>>14,m[0+y]=d,m[8+y]=d,m[16+y]=d,m[24+y]=d,m[32+y]=d,m[40+y]=d,m[48+y]=d,m[56+y]=d)}for(h=0;h<64;++h){var _=128+(m[h]+8>>4);r[h]=_<0?0:_>255?255:_}}for(var f=0;f<a;f++){for(var c=f<<3,u=0;u<8;u++)r.push(new Uint8Array(i));for(var d=0;d<n;d++){l(t.blocks[f][d],s,o);for(var h=0,p=d<<3,m=0;m<8;m++)for(var g=r[c+m],y=0;y<8;y++)g[p+y]=s[h++]}}return r}var JpegStreamReader=function(){function e(){_classCallCheck(this,e),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return _createClass(e,[{key:\\\"resetFrames\\\",value:function(){this.frames=[]}},{key:\\\"parse\\\",value:function(e){var t=0;function r(){var r=e[t]<<8|e[t+1];return t+=2,r}function n(e){var t,r,n=0,a=0;for(r in e.components)e.components.hasOwnProperty(r)&&(n<(t=e.components[r]).h&&(n=t.h),a<t.v&&(a=t.v));var i=Math.ceil(e.samplesPerLine/8/n),o=Math.ceil(e.scanLines/8/a);for(r in e.components)if(e.components.hasOwnProperty(r)){t=e.components[r];for(var s=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/n),l=Math.ceil(Math.ceil(e.scanLines/8)*t.v/a),f=i*t.h,c=o*t.v,u=[],d=0;d<c;d++){for(var h=[],p=0;p<f;p++)h.push(new Int32Array(64));u.push(h)}t.blocksPerLine=s,t.blocksPerColumn=l,t.blocks=u}e.maxH=n,e.maxV=a,e.mcusPerLine=i,e.mcusPerColumn=o}var a,i,o=r();if(65496!==o)throw new Error(\\\"SOI not found\\\");for(o=r();65497!==o;){switch(o){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var s=(a=void 0,i=void 0,a=r(),i=e.subarray(t,t+a-2),t+=i.length,i);65504===o&&74===s[0]&&70===s[1]&&73===s[2]&&70===s[3]&&0===s[4]&&(this.jfif={version:{major:s[5],minor:s[6]},densityUnits:s[7],xDensity:s[8]<<8|s[9],yDensity:s[10]<<8|s[11],thumbWidth:s[12],thumbHeight:s[13],thumbData:s.subarray(14,14+3*s[12]*s[13])}),65518===o&&65===s[0]&&100===s[1]&&111===s[2]&&98===s[3]&&101===s[4]&&0===s[5]&&(this.adobe={version:s[6],flags0:s[7]<<8|s[8],flags1:s[9]<<8|s[10],transformCode:s[11]});break;case 65499:for(var l=r()+t-2;t<l;){var f=e[t++],c=new Int32Array(64);if(f>>4==0)for(var u=0;u<64;u++){c[dctZigZag[u]]=e[t++]}else{if(f>>4!=1)throw new Error(\\\"DQT: invalid table spec\\\");for(var d=0;d<64;d++){c[dctZigZag[d]]=r()}}this.quantizationTables[15&f]=c}break;case 65472:case 65473:case 65474:r();for(var h={extended:65473===o,progressive:65474===o,precision:e[t++],scanLines:r(),samplesPerLine:r(),components:{},componentsOrder:[]},p=e[t++],m=void 0,g=0;g<p;g++){m=e[t];var y=e[t+1]>>4,_=15&e[t+1],b=e[t+2];h.componentsOrder.push(m),h.components[m]={h:y,v:_,quantizationIdx:b},t+=3}n(h),this.frames.push(h);break;case 65476:for(var v=r(),w=2;w<v;){for(var k=e[t++],T=new Uint8Array(16),E=0,x=0;x<16;x++,t++)T[x]=e[t],E+=T[x];for(var S=new Uint8Array(E),D=0;D<E;D++,t++)S[D]=e[t];w+=17+E,k>>4==0?this.huffmanTablesDC[15&k]=buildHuffmanTable(T,S):this.huffmanTablesAC[15&k]=buildHuffmanTable(T,S)}break;case 65501:r(),this.resetInterval=r();break;case 65498:r();for(var A=e[t++],M=[],I=this.frames[0],R=0;R<A;R++){var O=I.components[e[t++]],C=e[t++];O.huffmanTableDC=this.huffmanTablesDC[C>>4],O.huffmanTableAC=this.huffmanTablesAC[15&C],M.push(O)}var P=e[t++],L=e[t++],U=e[t++],B=decodeScan(e,t,I,M,this.resetInterval,P,L,U>>4,15&U);t+=B;break;case 65535:255!==e[t]&&t--;break;default:if(255===e[t-3]&&e[t-2]>=192&&e[t-2]<=254){t-=3;break}throw new Error(\\\"unknown JPEG marker \\\".concat(o.toString(16)))}o=r()}}},{key:\\\"getResult\\\",value:function(){var e=this.frames;if(0===this.frames.length)throw new Error(\\\"no frames were decoded\\\");this.frames.length>1&&console.warn(\\\"more than one frame is not supported\\\");for(var t=0;t<this.frames.length;t++)for(var r=this.frames[t].components,n=0,a=Object.keys(r);n<a.length;n++){var i=a[n];r[i].quantizationTable=this.quantizationTables[r[i].quantizationIdx],delete r[i].quantizationIdx}for(var o=e[0],s=o.components,l=o.componentsOrder,f=[],c=o.samplesPerLine,u=o.scanLines,d=0;d<l.length;d++){var h=s[l[d]];f.push({lines:buildComponentData(o,h),scaleX:h.h/o.maxH,scaleY:h.v/o.maxV})}for(var p=new Uint8Array(c*u*f.length),m=0,g=0;g<u;++g)for(var y=0;y<c;++y)for(var _=0;_<f.length;++_){var b=f[_];p[m]=b.lines[0|g*b.scaleY][0|y*b.scaleX],++m}return p}}]),e}(),JpegDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).reader=new JpegStreamReader,e.JPEGTables&&n.reader.parse(e.JPEGTables),n}return _createClass(r,[{key:\\\"decodeBlock\\\",value:function(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}]),r}(),jpeg=Object.freeze({__proto__:null,default:JpegDecoder});function zero$1(e){for(var t=e.length;--t>=0;)e[t]=0}var MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,DIST_CODE_LEN=512,static_ltree=new Array(2*(L_CODES$1+2));zero$1(static_ltree);var static_dtree=new Array(2*D_CODES$1);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES$1);zero$1(base_length);var base_dist=new Array(D_CODES$1);zero$1(base_dist);var adler32=function(e,t,r,n){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{i=i+(a=a+t[n++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0},adler32_1=adler32,makeTable=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t},crcTable=new Uint32Array(makeTable()),crc32=function(e,t,r,n){var a=crcTable,i=n+r;e^=-1;for(var o=n;o<i;o++)e=e>>>8^a[255&(e^t[o])];return-1^e},crc32_1=crc32,messages={2:\\\"need dictionary\\\",1:\\\"stream end\\\",0:\\\"\\\",\\\"-1\\\":\\\"file error\\\",\\\"-2\\\":\\\"stream error\\\",\\\"-3\\\":\\\"data error\\\",\\\"-4\\\":\\\"insufficient memory\\\",\\\"-5\\\":\\\"buffer error\\\",\\\"-6\\\":\\\"incompatible version\\\"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},_has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if(\\\"object\\\"!==_typeof(r))throw new TypeError(r+\\\"must be non-object\\\");for(var n in r)_has(r,n)&&(e[n]=r[n])}}return e},flattenChunks=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var a=new Uint8Array(t),i=0,o=0,s=e.length;i<s;i++){var l=e[i];a.set(l,o),o+=l.length}return a},common={assign:assign,flattenChunks:flattenChunks},STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){STR_APPLY_UIA_OK=!1}for(var _utf8len=new Uint8Array(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=function(e){if(\\\"function\\\"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,r,n,a,i,o=e.length,s=0;for(a=0;a<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),i=0,a=0;i<s;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|63&r):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|63&r):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|63&r);return t},buf2binstring=function(e,t){if(t<65534&&e.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var r=\\\"\\\",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r},buf2string=function(e,t){var r,n,a=t||e.length;if(\\\"function\\\"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var i=new Array(2*a);for(n=0,r=0;r<a;){var o=e[r++];if(o<128)i[n++]=o;else{var s=_utf8len[o];if(s>4)i[n++]=65533,r+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&r<a;)o=o<<6|63&e[r++],s--;s>1?i[n++]=65533:o<65536?i[n++]=o:(o-=65536,i[n++]=55296|o>>10&1023,i[n++]=56320|1023&o)}}}return buf2binstring(i,n)},utf8border=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+_utf8len[e[r]]>t?r:t},strings={string2buf:string2buf,buf2string:buf2string,utf8border:utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\\\"\\\",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream,BAD$1=30,TYPE$1=12,inffast=function(e,t){var r,n,a,i,o,s,l,f,c,u,d,h,p,m,g,y,_,b,v,w,k,T,E,x,S=e.state;r=e.next_in,E=e.input,n=r+(e.avail_in-5),a=e.next_out,x=e.output,i=a-(t-e.avail_out),o=a+(e.avail_out-257),s=S.dmax,l=S.wsize,f=S.whave,c=S.wnext,u=S.window,d=S.hold,h=S.bits,p=S.lencode,m=S.distcode,g=(1<<S.lenbits)-1,y=(1<<S.distbits)-1;e:do{h<15&&(d+=E[r++]<<h,h+=8,d+=E[r++]<<h,h+=8),_=p[d&g];t:for(;;){if(d>>>=b=_>>>24,h-=b,0===(b=_>>>16&255))x[a++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=p[(65535&_)+(d&(1<<b)-1)];continue t}if(32&b){S.mode=TYPE$1;break e}e.msg=\\\"invalid literal/length code\\\",S.mode=BAD$1;break e}v=65535&_,(b&=15)&&(h<b&&(d+=E[r++]<<h,h+=8),v+=d&(1<<b)-1,d>>>=b,h-=b),h<15&&(d+=E[r++]<<h,h+=8,d+=E[r++]<<h,h+=8),_=m[d&y];r:for(;;){if(d>>>=b=_>>>24,h-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=m[(65535&_)+(d&(1<<b)-1)];continue r}e.msg=\\\"invalid distance code\\\",S.mode=BAD$1;break e}if(w=65535&_,h<(b&=15)&&(d+=E[r++]<<h,(h+=8)<b&&(d+=E[r++]<<h,h+=8)),(w+=d&(1<<b)-1)>s){e.msg=\\\"invalid distance too far back\\\",S.mode=BAD$1;break e}if(d>>>=b,h-=b,w>(b=a-i)){if((b=w-b)>f&&S.sane){e.msg=\\\"invalid distance too far back\\\",S.mode=BAD$1;break e}if(k=0,T=u,0===c){if(k+=l-b,b<v){v-=b;do{x[a++]=u[k++]}while(--b);k=a-w,T=x}}else if(c<b){if(k+=l+c-b,(b-=c)<v){v-=b;do{x[a++]=u[k++]}while(--b);if(k=0,c<v){v-=b=c;do{x[a++]=u[k++]}while(--b);k=a-w,T=x}}}else if(k+=c-b,b<v){v-=b;do{x[a++]=u[k++]}while(--b);k=a-w,T=x}for(;v>2;)x[a++]=T[k++],x[a++]=T[k++],x[a++]=T[k++],v-=3;v&&(x[a++]=T[k++],v>1&&(x[a++]=T[k++]))}else{k=a-w;do{x[a++]=x[k++],x[a++]=x[k++],x[a++]=x[k++],v-=3}while(v>2);v&&(x[a++]=x[k++],v>1&&(x[a++]=x[k++]))}break}}break}}while(r<n&&a<o);r-=v=h>>3,d&=(1<<(h-=v<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=a<o?o-a+257:257-(a-o),S.hold=d,S.bits=h},MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=function(e,t,r,n,a,i,o,s){var l,f,c,u,d,h,p,m,g,y=s.bits,_=0,b=0,v=0,w=0,k=0,T=0,E=0,x=0,S=0,D=0,A=null,M=0,I=new Uint16Array(MAXBITS+1),R=new Uint16Array(MAXBITS+1),O=null,C=0;for(_=0;_<=MAXBITS;_++)I[_]=0;for(b=0;b<n;b++)I[t[r+b]]++;for(k=y,w=MAXBITS;w>=1&&0===I[w];w--);if(k>w&&(k=w),0===w)return a[i++]=20971520,a[i++]=20971520,s.bits=1,0;for(v=1;v<w&&0===I[v];v++);for(k<v&&(k=v),x=1,_=1;_<=MAXBITS;_++)if(x<<=1,(x-=I[_])<0)return-1;if(x>0&&(e===CODES$1||1!==w))return-1;for(R[1]=0,_=1;_<MAXBITS;_++)R[_+1]=R[_]+I[_];for(b=0;b<n;b++)0!==t[r+b]&&(o[R[t[r+b]]++]=b);if(e===CODES$1?(A=O=o,h=19):e===LENS$1?(A=lbase,M-=257,O=lext,C-=257,h=256):(A=dbase,O=dext,h=-1),D=0,b=0,_=v,d=i,T=k,E=0,c=-1,u=(S=1<<k)-1,e===LENS$1&&S>ENOUGH_LENS$1||e===DISTS$1&&S>ENOUGH_DISTS$1)return 1;for(;;){p=_-E,o[b]<h?(m=0,g=o[b]):o[b]>h?(m=O[C+o[b]],g=A[M+o[b]]):(m=96,g=0),l=1<<_-E,v=f=1<<T;do{a[d+(D>>E)+(f-=l)]=p<<24|m<<16|g|0}while(0!==f);for(l=1<<_-1;D&l;)l>>=1;if(0!==l?(D&=l-1,D+=l):D=0,b++,0==--I[_]){if(_===w)break;_=t[r+o[b]]}if(_>k&&(D&u)!==c){for(0===E&&(E=k),d+=v,x=1<<(T=_-E);T+E<w&&!((x-=I[T+E])<=0);)T++,x<<=1;if(S+=1<<T,e===LENS$1&&S>ENOUGH_LENS$1||e===DISTS$1&&S>ENOUGH_DISTS$1)return 1;a[c=D&u]=k<<24|T<<16|d-i|0}}return 0!==D&&(a[d+D]=_-E<<24|64<<16|0),s.bits=k,0},inftrees=inflate_table,CODES=0,LENS=1,DISTS=2,Z_FINISH$1=constants$2.Z_FINISH,Z_BLOCK=constants$2.Z_BLOCK,Z_TREES=constants$2.Z_TREES,Z_OK$1=constants$2.Z_OK,Z_STREAM_END$1=constants$2.Z_STREAM_END,Z_NEED_DICT$1=constants$2.Z_NEED_DICT,Z_STREAM_ERROR$1=constants$2.Z_STREAM_ERROR,Z_DATA_ERROR$1=constants$2.Z_DATA_ERROR,Z_MEM_ERROR$1=constants$2.Z_MEM_ERROR,Z_BUF_ERROR=constants$2.Z_BUF_ERROR,Z_DEFLATED=constants$2.Z_DEFLATED,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var inflateResetKeep=function(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg=\\\"\\\",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ENOUGH_LENS),t.distcode=t.distdyn=new Int32Array(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1},inflateReset=function(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)},inflateReset2=function(e,t){var r;if(!e||!e.state)return Z_STREAM_ERROR$1;var n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR$1:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,inflateReset(e))},inflateInit2=function(e,t){if(!e)return Z_STREAM_ERROR$1;var r=new InflateState;e.state=r,r.window=null;var n=inflateReset2(e,t);return n!==Z_OK$1&&(e.state=null),n},inflateInit=function(e){return inflateInit2(e,DEF_WBITS)},virgin=!0,lenfix,distfix,fixedtables=function(e){if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inftrees(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inftrees(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5},updatewindow=function(e,t,r,n){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),(n-=a)?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},inflate$2=function(e,t){var r,n,a,i,o,s,l,f,c,u,d,h,p,m,g,y,_,b,v,w,k,T,E,x,S=0,D=new Uint8Array(4),A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR$1;(r=e.state).mode===TYPE&&(r.mode=TYPEDO),o=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,f=r.hold,c=r.bits,u=s,d=l,T=Z_OK$1;e:for(;;)switch(r.mode){case HEAD:if(0===r.wrap){r.mode=TYPEDO;break}for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(2&r.wrap&&35615===f){r.check=0,D[0]=255&f,D[1]=f>>>8&255,r.check=crc32_1(r.check,D,2,0),f=0,c=0,r.mode=FLAGS;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg=\\\"incorrect header check\\\",r.mode=BAD;break}if((15&f)!==Z_DEFLATED){e.msg=\\\"unknown compression method\\\",r.mode=BAD;break}if(c-=4,k=8+(15&(f>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){e.msg=\\\"invalid window size\\\",r.mode=BAD;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&f?DICTID:TYPE,f=0,c=0;break;case FLAGS:for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(r.flags=f,(255&r.flags)!==Z_DEFLATED){e.msg=\\\"unknown compression method\\\",r.mode=BAD;break}if(57344&r.flags){e.msg=\\\"unknown header flags set\\\",r.mode=BAD;break}r.head&&(r.head.text=f>>8&1),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,r.check=crc32_1(r.check,D,2,0)),f=0,c=0,r.mode=TIME;case TIME:for(;c<32;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.head&&(r.head.time=f),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,D[2]=f>>>16&255,D[3]=f>>>24&255,r.check=crc32_1(r.check,D,4,0)),f=0,c=0,r.mode=OS;case OS:for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.head&&(r.head.xflags=255&f,r.head.os=f>>8),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,r.check=crc32_1(r.check,D,2,0)),f=0,c=0,r.mode=EXLEN;case EXLEN:if(1024&r.flags){for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.length=f,r.head&&(r.head.extra_len=f),512&r.flags&&(D[0]=255&f,D[1]=f>>>8&255,r.check=crc32_1(r.check,D,2,0)),f=0,c=0}else r.head&&(r.head.extra=null);r.mode=EXTRA;case EXTRA:if(1024&r.flags&&((h=r.length)>s&&(h=s),h&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+h),k)),512&r.flags&&(r.check=crc32_1(r.check,n,h,i)),s-=h,i+=h,r.length-=h),r.length))break e;r.length=0,r.mode=NAME;case NAME:if(2048&r.flags){if(0===s)break e;h=0;do{k=n[i+h++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k))}while(k&&h<s);if(512&r.flags&&(r.check=crc32_1(r.check,n,h,i)),s-=h,i+=h,k)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=COMMENT;case COMMENT:if(4096&r.flags){if(0===s)break e;h=0;do{k=n[i+h++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k))}while(k&&h<s);if(512&r.flags&&(r.check=crc32_1(r.check,n,h,i)),s-=h,i+=h,k)break e}else r.head&&(r.head.comment=null);r.mode=HCRC;case HCRC:if(512&r.flags){for(;c<16;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(f!==(65535&r.check)){e.msg=\\\"header crc mismatch\\\",r.mode=BAD;break}f=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=TYPE;break;case DICTID:for(;c<32;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}e.adler=r.check=zswap32(f),f=0,c=0,r.mode=DICT;case DICT:if(0===r.havedict)return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,r.hold=f,r.bits=c,Z_NEED_DICT$1;e.adler=r.check=1,r.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(r.last){f>>>=7&c,c-=7&c,r.mode=CHECK;break}for(;c<3;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}switch(r.last=1&f,c-=1,3&(f>>>=1)){case 0:r.mode=STORED;break;case 1:if(fixedtables(r),r.mode=LEN_,t===Z_TREES){f>>>=2,c-=2;break e}break;case 2:r.mode=TABLE;break;case 3:e.msg=\\\"invalid block type\\\",r.mode=BAD}f>>>=2,c-=2;break;case STORED:for(f>>>=7&c,c-=7&c;c<32;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if((65535&f)!=(f>>>16^65535)){e.msg=\\\"invalid stored block lengths\\\",r.mode=BAD;break}if(r.length=65535&f,f=0,c=0,r.mode=COPY_,t===Z_TREES)break e;case COPY_:r.mode=COPY;case COPY:if(h=r.length){if(h>s&&(h=s),h>l&&(h=l),0===h)break e;a.set(n.subarray(i,i+h),o),s-=h,i+=h,l-=h,o+=h,r.length-=h;break}r.mode=TYPE;break;case TABLE:for(;c<14;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(r.nlen=257+(31&f),f>>>=5,c-=5,r.ndist=1+(31&f),f>>>=5,c-=5,r.ncode=4+(15&f),f>>>=4,c-=4,r.nlen>286||r.ndist>30){e.msg=\\\"too many length or distance symbols\\\",r.mode=BAD;break}r.have=0,r.mode=LENLENS;case LENLENS:for(;r.have<r.ncode;){for(;c<3;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.lens[A[r.have++]]=7&f,f>>>=3,c-=3}for(;r.have<19;)r.lens[A[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E={bits:r.lenbits},T=inftrees(CODES,r.lens,0,19,r.lencode,0,r.work,E),r.lenbits=E.bits,T){e.msg=\\\"invalid code lengths set\\\",r.mode=BAD;break}r.have=0,r.mode=CODELENS;case CODELENS:for(;r.have<r.nlen+r.ndist;){for(;y=(S=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,_=65535&S,!((g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(_<16)f>>>=g,c-=g,r.lens[r.have++]=_;else{if(16===_){for(x=g+2;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(f>>>=g,c-=g,0===r.have){e.msg=\\\"invalid bit length repeat\\\",r.mode=BAD;break}k=r.lens[r.have-1],h=3+(3&f),f>>>=2,c-=2}else if(17===_){for(x=g+3;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}c-=g,k=0,h=3+(7&(f>>>=g)),f>>>=3,c-=3}else{for(x=g+7;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}c-=g,k=0,h=11+(127&(f>>>=g)),f>>>=7,c-=7}if(r.have+h>r.nlen+r.ndist){e.msg=\\\"invalid bit length repeat\\\",r.mode=BAD;break}for(;h--;)r.lens[r.have++]=k}}if(r.mode===BAD)break;if(0===r.lens[256]){e.msg=\\\"invalid code -- missing end-of-block\\\",r.mode=BAD;break}if(r.lenbits=9,E={bits:r.lenbits},T=inftrees(LENS,r.lens,0,r.nlen,r.lencode,0,r.work,E),r.lenbits=E.bits,T){e.msg=\\\"invalid literal/lengths set\\\",r.mode=BAD;break}if(r.distbits=6,r.distcode=r.distdyn,E={bits:r.distbits},T=inftrees(DISTS,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,E),r.distbits=E.bits,T){e.msg=\\\"invalid distances set\\\",r.mode=BAD;break}if(r.mode=LEN_,t===Z_TREES)break e;case LEN_:r.mode=LEN;case LEN:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,r.hold=f,r.bits=c,inffast(e,d),o=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,s=e.avail_in,f=r.hold,c=r.bits,r.mode===TYPE&&(r.back=-1);break}for(r.back=0;y=(S=r.lencode[f&(1<<r.lenbits)-1])>>>16&255,_=65535&S,!((g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(y&&0==(240&y)){for(b=g,v=y,w=_;y=(S=r.lencode[w+((f&(1<<b+v)-1)>>b)])>>>16&255,_=65535&S,!(b+(g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}f>>>=b,c-=b,r.back+=b}if(f>>>=g,c-=g,r.back+=g,r.length=_,0===y){r.mode=LIT;break}if(32&y){r.back=-1,r.mode=TYPE;break}if(64&y){e.msg=\\\"invalid literal/length code\\\",r.mode=BAD;break}r.extra=15&y,r.mode=LENEXT;case LENEXT:if(r.extra){for(x=r.extra;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=DIST;case DIST:for(;y=(S=r.distcode[f&(1<<r.distbits)-1])>>>16&255,_=65535&S,!((g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(0==(240&y)){for(b=g,v=y,w=_;y=(S=r.distcode[w+((f&(1<<b+v)-1)>>b)])>>>16&255,_=65535&S,!(b+(g=S>>>24)<=c);){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}f>>>=b,c-=b,r.back+=b}if(f>>>=g,c-=g,r.back+=g,64&y){e.msg=\\\"invalid distance code\\\",r.mode=BAD;break}r.offset=_,r.extra=15&y,r.mode=DISTEXT;case DISTEXT:if(r.extra){for(x=r.extra;c<x;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg=\\\"invalid distance too far back\\\",r.mode=BAD;break}r.mode=MATCH;case MATCH:if(0===l)break e;if(h=d-l,r.offset>h){if((h=r.offset-h)>r.whave&&r.sane){e.msg=\\\"invalid distance too far back\\\",r.mode=BAD;break}h>r.wnext?(h-=r.wnext,p=r.wsize-h):p=r.wnext-h,h>r.length&&(h=r.length),m=r.window}else m=a,p=o-r.offset,h=r.length;h>l&&(h=l),l-=h,r.length-=h;do{a[o++]=m[p++]}while(--h);0===r.length&&(r.mode=LEN);break;case LIT:if(0===l)break e;a[o++]=r.length,l--,r.mode=LEN;break;case CHECK:if(r.wrap){for(;c<32;){if(0===s)break e;s--,f|=n[i++]<<c,c+=8}if(d-=l,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?crc32_1(r.check,a,d,o-d):adler32_1(r.check,a,d,o-d)),d=l,(r.flags?f:zswap32(f))!==r.check){e.msg=\\\"incorrect data check\\\",r.mode=BAD;break}f=0,c=0}r.mode=LENGTH;case LENGTH:if(r.wrap&&r.flags){for(;c<32;){if(0===s)break e;s--,f+=n[i++]<<c,c+=8}if(f!==(4294967295&r.total)){e.msg=\\\"incorrect length check\\\",r.mode=BAD;break}f=0,c=0}r.mode=DONE;case DONE:T=Z_STREAM_END$1;break e;case BAD:T=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,r.hold=f,r.bits=c,(r.wsize||d!==e.avail_out&&r.mode<BAD&&(r.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,d-e.avail_out),u-=e.avail_in,d-=e.avail_out,e.total_in+=u,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?crc32_1(r.check,a,d,e.next_out-d):adler32_1(r.check,a,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===TYPE?128:0)+(r.mode===LEN_||r.mode===COPY_?256:0),(0===u&&0===d||t===Z_FINISH$1)&&T===Z_OK$1&&(T=Z_BUF_ERROR),T},inflateEnd=function(e){if(!e||!e.state)return Z_STREAM_ERROR$1;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1},inflateGetHeader=function(e,t){if(!e||!e.state)return Z_STREAM_ERROR$1;var r=e.state;return 0==(2&r.wrap)?Z_STREAM_ERROR$1:(r.head=t,t.done=!1,Z_OK$1)},inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==DICT?Z_STREAM_ERROR$1:r.mode===DICT&&adler32_1(1,t,n,0)!==r.check?Z_DATA_ERROR$1:updatewindow(e,t,n,n)?(r.mode=MEM,Z_MEM_ERROR$1):(r.havedict=1,Z_OK$1):Z_STREAM_ERROR$1},inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo=\\\"pako inflate (from Nodeca project)\\\",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo:inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\\\"\\\",this.comment=\\\"\\\",this.hcrc=0,this.done=!1}var gzheader=GZheader,toString=Object.prototype.toString,Z_NO_FLUSH=constants$2.Z_NO_FLUSH,Z_FINISH=constants$2.Z_FINISH,Z_OK=constants$2.Z_OK,Z_STREAM_END=constants$2.Z_STREAM_END,Z_NEED_DICT=constants$2.Z_NEED_DICT,Z_STREAM_ERROR=constants$2.Z_STREAM_ERROR,Z_DATA_ERROR=constants$2.Z_DATA_ERROR,Z_MEM_ERROR=constants$2.Z_MEM_ERROR;function Inflate$1(e){this.options=common.assign({chunkSize:65536,windowBits:15,to:\\\"\\\"},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\\\"\\\",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;var r=inflate_1$2.inflateInit2(this.strm,t.windowBits);if(r!==Z_OK)throw new Error(messages[r]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),t.dictionary&&(\\\"string\\\"==typeof t.dictionary?t.dictionary=strings.string2buf(t.dictionary):\\\"[object ArrayBuffer]\\\"===toString.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=inflate_1$2.inflateSetDictionary(this.strm,t.dictionary))!==Z_OK))throw new Error(messages[r])}function inflate$1(e,t){var r=new Inflate$1(t);if(r.push(e),r.err)throw r.msg||messages[r.err];return r.result}function inflateRaw$1(e,t){return(t=t||{}).raw=!0,inflate$1(e,t)}Inflate$1.prototype.push=function(e,t){var r,n,a,i=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?Z_FINISH:Z_NO_FLUSH,\\\"[object ArrayBuffer]\\\"===toString.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(r=inflate_1$2.inflate(i,n))===Z_NEED_DICT&&s&&((r=inflate_1$2.inflateSetDictionary(i,s))===Z_OK?r=inflate_1$2.inflate(i,n):r===Z_DATA_ERROR&&(r=Z_NEED_DICT));i.avail_in>0&&r===Z_STREAM_END&&i.state.wrap>0&&0!==e[i.next_in];)inflate_1$2.inflateReset(i),r=inflate_1$2.inflate(i,n);switch(r){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(r),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||r===Z_STREAM_END))if(\\\"string\\\"===this.options.to){var l=strings.utf8border(i.output,i.next_out),f=i.next_out-l,c=strings.buf2string(i.output,l);i.next_out=f,i.avail_out=o-f,f&&i.output.set(i.output.subarray(l,l+f),0),this.onData(c)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==Z_OK||0!==a){if(r===Z_STREAM_END)return r=inflate_1$2.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},Inflate$1.prototype.onData=function(e){this.chunks.push(e)},Inflate$1.prototype.onEnd=function(e){e===Z_OK&&(\\\"string\\\"===this.options.to?this.result=this.chunks.join(\\\"\\\"):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants:constants},inflate=inflate_1$1.inflate,inflate_1=inflate,DeflateDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:\\\"decodeBlock\\\",value:function(e){return inflate_1(new Uint8Array(e)).buffer}}]),r}(),deflate=Object.freeze({__proto__:null,default:DeflateDecoder}),PackbitsDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:\\\"decodeBlock\\\",value:function(e){for(var t=new DataView(e),r=[],n=0;n<e.byteLength;++n){var a=t.getInt8(n);if(a<0){var i=t.getUint8(n+1);a=-a;for(var o=0;o<=a;++o)r.push(i);n+=1}else{for(var s=0;s<=a;++s)r.push(t.getUint8(n+s+1));n+=a+1}}return new Uint8Array(r).buffer}}]),r}(),packbits=Object.freeze({__proto__:null,default:PackbitsDecoder}),LercDecode={exports:{}},module;module=LercDecode,\\n/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the \\\"License\\\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */\\nfunction(){var e,t,r,n,a,i,o,s,l,f,c,u,d,h,p,m,g=(e={defaultNoDataValue:-34027999387901484e22,decode:function(i,o){var s=(o=o||{}).encodedMaskData||null===o.encodedMaskData,l=a(i,o.inputOffset||0,s),f=null!==o.noDataValue?o.noDataValue:e.defaultNoDataValue,c=t(l,o.pixelType||Float32Array,o.encodedMaskData,f,o.returnMask),u={width:l.width,height:l.height,pixelData:c.resultPixels,minValue:c.minValue,maxValue:l.pixels.maxValue,noDataValue:f};return c.resultMask&&(u.maskData=c.resultMask),o.returnEncodedMask&&l.mask&&(u.encodedMaskData=l.mask.bitset?l.mask.bitset:null),o.returnFileInfo&&(u.fileInfo=r(l),o.computeUsedBitDepths&&(u.fileInfo.bitDepths=n(l))),u}},t=function(e,t,r,n,a){var o,s,l,f=0,c=e.pixels.numBlocksX,u=e.pixels.numBlocksY,d=Math.floor(e.width/c),h=Math.floor(e.height/u),p=2*e.maxZError,m=Number.MAX_VALUE;r=r||(e.mask?e.mask.bitset:null),s=new t(e.width*e.height),a&&r&&(l=new Uint8Array(e.width*e.height));for(var g,y,_=new Float32Array(d*h),b=0;b<=u;b++){var v=b!==u?h:e.height%u;if(0!==v)for(var w=0;w<=c;w++){var k=w!==c?d:e.width%c;if(0!==k){var T,E,x,S,D=b*e.width*h+w*d,A=e.width-k,M=e.pixels.blocks[f];if(M.encoding<2?(0===M.encoding?T=M.rawData:(i(M.stuffedData,M.bitsPerPixel,M.numValidPixels,M.offset,p,_,e.pixels.maxValue),T=_),E=0):x=2===M.encoding?0:M.offset,r)for(y=0;y<v;y++){for(7&D&&(S=r[D>>3],S<<=7&D),g=0;g<k;g++)7&D||(S=r[D>>3]),128&S?(l&&(l[D]=1),m=m>(o=M.encoding<2?T[E++]:x)?o:m,s[D++]=o):(l&&(l[D]=0),s[D++]=n),S<<=1;D+=A}else if(M.encoding<2)for(y=0;y<v;y++){for(g=0;g<k;g++)m=m>(o=T[E++])?o:m,s[D++]=o;D+=A}else for(m=m>x?x:m,y=0;y<v;y++){for(g=0;g<k;g++)s[D++]=x;D+=A}if(1===M.encoding&&E!==M.numValidPixels)throw\\\"Block and Mask do not match\\\";f++}}}return{resultPixels:s,resultMask:l,minValue:m}},r=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,noDataValue:e.noDataValue}}},n=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},n=0;n<t;n++){var a=e.pixels.blocks[n];0===a.encoding?r.float32=!0:1===a.encoding?r[a.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},a=function(e,t,r){var n={},a=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,a),\\\"CntZImage\\\"!==n.fileIdentifierString.trim())throw\\\"Unexpected file identifier string: \\\"+n.fileIdentifierString;t+=10;var i=new DataView(e,t,24);if(n.fileVersion=i.getInt32(0,!0),n.imageType=i.getInt32(4,!0),n.height=i.getUint32(8,!0),n.width=i.getUint32(12,!0),n.maxZError=i.getFloat64(16,!0),t+=24,!r)if(i=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=i.getUint32(0,!0),n.mask.numBlocksX=i.getUint32(4,!0),n.mask.numBytes=i.getUint32(8,!0),n.mask.maxValue=i.getFloat32(12,!0),t+=16,n.mask.numBytes>0){var o=new Uint8Array(Math.ceil(n.width*n.height/8)),s=(i=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),l=2,f=0;do{if(s>0)for(;s--;)o[f++]=i.getUint8(l++);else{var c=i.getUint8(l++);for(s=-s;s--;)o[f++]=c}s=i.getInt16(l,!0),l+=2}while(l<n.mask.numBytes);if(-32768!==s||f<o.length)throw\\\"Unexpected end of mask RLE encoding\\\";n.mask.bitset=o,t+=n.mask.numBytes}else 0==(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)&&(n.mask.bitset=new Uint8Array(Math.ceil(n.width*n.height/8)));i=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=i.getUint32(0,!0),n.pixels.numBlocksX=i.getUint32(4,!0),n.pixels.numBytes=i.getUint32(8,!0),n.pixels.maxValue=i.getFloat32(12,!0),t+=16;var u=n.pixels.numBlocksX,d=n.pixels.numBlocksY,h=u+(n.width%u>0?1:0),p=d+(n.height%d>0?1:0);n.pixels.blocks=new Array(h*p);for(var m=0,g=0;g<p;g++)for(var y=0;y<h;y++){var _=0,b=e.byteLength-t;i=new DataView(e,t,Math.min(10,b));var v={};n.pixels.blocks[m++]=v;var w=i.getUint8(0);if(_++,v.encoding=63&w,v.encoding>3)throw\\\"Invalid block encoding (\\\"+v.encoding+\\\")\\\";if(2!==v.encoding){if(0!==w&&2!==w){if(w>>=6,v.offsetType=w,2===w)v.offset=i.getInt8(1),_++;else if(1===w)v.offset=i.getInt16(1,!0),_+=2;else{if(0!==w)throw\\\"Invalid block offset type\\\";v.offset=i.getFloat32(1,!0),_+=4}if(1===v.encoding)if(w=i.getUint8(_),_++,v.bitsPerPixel=63&w,w>>=6,v.numValidPixelsType=w,2===w)v.numValidPixels=i.getUint8(_),_++;else if(1===w)v.numValidPixels=i.getUint16(_,!0),_+=2;else{if(0!==w)throw\\\"Invalid valid pixel count type\\\";v.numValidPixels=i.getUint32(_,!0),_+=4}}var k;if(t+=_,3!==v.encoding)if(0===v.encoding){var T=(n.pixels.numBytes-1)/4;if(T!==Math.floor(T))throw\\\"uncompressed block has invalid length\\\";k=new ArrayBuffer(4*T),new Uint8Array(k).set(new Uint8Array(e,t,4*T));var E=new Float32Array(k);v.rawData=E,t+=4*T}else if(1===v.encoding){var x=Math.ceil(v.numValidPixels*v.bitsPerPixel/8),S=Math.ceil(x/4);k=new ArrayBuffer(4*S),new Uint8Array(k).set(new Uint8Array(e,t,x)),v.stuffedData=new Uint32Array(k),t+=x}}else t++}return n.eofOffset=t,n},i=function(e,t,r,n,a,i,o){var s,l,f,c=(1<<t)-1,u=0,d=0,h=Math.ceil((o-n)/a),p=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*p,s=0;s<r;s++){if(0===d&&(f=e[u++],d=32),d>=t)l=f>>>d-t&c,d-=t;else{var m=t-d;l=(f&c)<<m&c,l+=(f=e[u++])>>>(d=32-m)}i[s]=l<h?n+l*a:o}return i},e),y=(o=function(e,t,r,n,a,i,o,s){var l,f,c,u,d,h=(1<<r)-1,p=0,m=0,g=4*e.length-Math.ceil(r*n/8);if(e[e.length-1]<<=8*g,a)for(l=0;l<n;l++)0===m&&(c=e[p++],m=32),m>=r?(f=c>>>m-r&h,m-=r):(f=(c&h)<<(u=r-m)&h,f+=(c=e[p++])>>>(m=32-u)),t[l]=a[f];else for(d=Math.ceil((s-i)/o),l=0;l<n;l++)0===m&&(c=e[p++],m=32),m>=r?(f=c>>>m-r&h,m-=r):(f=(c&h)<<(u=r-m)&h,f+=(c=e[p++])>>>(m=32-u)),t[l]=f<d?i+f*o:s},s=function(e,t,r,n,a,i){var o,s=(1<<t)-1,l=0,f=0,c=0,u=0,d=0,h=[],p=4*e.length-Math.ceil(t*r/8);e[e.length-1]<<=8*p;var m=Math.ceil((i-n)/a);for(f=0;f<r;f++)0===u&&(o=e[l++],u=32),u>=t?(d=o>>>u-t&s,u-=t):(d=(o&s)<<(c=t-u)&s,d+=(o=e[l++])>>>(u=32-c)),h[f]=d<m?n+d*a:i;return h.unshift(n),h},l=function(e,t,r,n,a,i,o,s){var l,f,c,u,d=(1<<r)-1,h=0,p=0,m=0;if(a)for(l=0;l<n;l++)0===p&&(c=e[h++],p=32,m=0),p>=r?(f=c>>>m&d,p-=r,m+=r):(f=c>>>m&d,p=32-(u=r-p),f|=((c=e[h++])&(1<<u)-1)<<r-u,m=u),t[l]=a[f];else{var g=Math.ceil((s-i)/o);for(l=0;l<n;l++)0===p&&(c=e[h++],p=32,m=0),p>=r?(f=c>>>m&d,p-=r,m+=r):(f=c>>>m&d,p=32-(u=r-p),f|=((c=e[h++])&(1<<u)-1)<<r-u,m=u),t[l]=f<g?i+f*o:s}return t},f=function(e,t,r,n,a,i){var o,s=(1<<t)-1,l=0,f=0,c=0,u=0,d=0,h=0,p=[],m=Math.ceil((i-n)/a);for(f=0;f<r;f++)0===u&&(o=e[l++],u=32,h=0),u>=t?(d=o>>>h&s,u-=t,h+=t):(d=o>>>h&s,u=32-(c=t-u),d|=((o=e[l++])&(1<<c)-1)<<t-c,h=c),p[f]=d<m?n+d*a:i;return p.unshift(n),p},c=function(e,t,r,n){var a,i,o,s,l=(1<<r)-1,f=0,c=0,u=4*e.length-Math.ceil(r*n/8);for(e[e.length-1]<<=8*u,a=0;a<n;a++)0===c&&(o=e[f++],c=32),c>=r?(i=o>>>c-r&l,c-=r):(i=(o&l)<<(s=r-c)&l,i+=(o=e[f++])>>>(c=32-s)),t[a]=i;return t},u=function(e,t,r,n){var a,i,o,s,l=(1<<r)-1,f=0,c=0,u=0;for(a=0;a<n;a++)0===c&&(o=e[f++],c=32,u=0),c>=r?(i=o>>>u&l,c-=r,u+=r):(i=o>>>u&l,c=32-(s=r-c),i|=((o=e[f++])&(1<<s)-1)<<r-s,u=s),t[a]=i;return t},d={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,n=e.length,a=Math.floor(n/2),i=0;a;){var o=a>=359?359:a;a-=o;do{t+=e[i++]<<8,r+=t+=e[i++]}while(--o);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16)}return 1&n&&(r+=t+=e[i]<<8),((r=(65535&r)+(r>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,n=new Uint8Array(e,r,6),a={};if(a.fileIdentifierString=String.fromCharCode.apply(null,n),0!==a.fileIdentifierString.lastIndexOf(\\\"Lerc2\\\",0))throw\\\"Unexpected file identifier string (expect Lerc2 ): \\\"+a.fileIdentifierString;r+=6;var i,o=new DataView(e,r,8),s=o.getInt32(0,!0);if(a.fileVersion=s,r+=4,s>=3&&(a.checksum=o.getUint32(4,!0),r+=4),o=new DataView(e,r,12),a.height=o.getUint32(0,!0),a.width=o.getUint32(4,!0),r+=8,s>=4?(a.numDims=o.getUint32(8,!0),r+=4):a.numDims=1,o=new DataView(e,r,40),a.numValidPixel=o.getUint32(0,!0),a.microBlockSize=o.getInt32(4,!0),a.blobSize=o.getInt32(8,!0),a.imageType=o.getInt32(12,!0),a.maxZError=o.getFloat64(16,!0),a.zMin=o.getFloat64(24,!0),a.zMax=o.getFloat64(32,!0),r+=40,t.headerInfo=a,t.ptr=r,s>=3&&(i=s>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(e,r-i,a.blobSize-14))!==a.checksum))throw\\\"Checksum failed.\\\";return!0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,n=this.getDataTypeArray(r.imageType),a=r.numDims*this.getDataTypeSize(r.imageType),i=this.readSubArray(e,t.ptr,n,a),o=this.readSubArray(e,t.ptr+a,n,a);t.ptr+=2*a;var s,l=!0;for(s=0;s<r.numDims;s++)if(i[s]!==o[s]){l=!1;break}return r.minValues=i,r.maxValues=o,l},readSubArray:function(e,t,r,n){var a;if(r===Uint8Array)a=new Uint8Array(e,t,n);else{var i=new ArrayBuffer(n);new Uint8Array(i).set(new Uint8Array(e,t,n)),a=new r(i)}return a},readMask:function(e,t){var r,n,a=t.ptr,i=t.headerInfo,o=i.width*i.height,s=i.numValidPixel,l=new DataView(e,a,4),f={};if(f.numBytes=l.getUint32(0,!0),a+=4,(0===s||o===s)&&0!==f.numBytes)throw\\\"invalid mask\\\";if(0===s)r=new Uint8Array(Math.ceil(o/8)),f.bitset=r,n=new Uint8Array(o),t.pixels.resultMask=n,a+=f.numBytes;else if(f.numBytes>0){r=new Uint8Array(Math.ceil(o/8));var c=(l=new DataView(e,a,f.numBytes)).getInt16(0,!0),u=2,d=0,h=0;do{if(c>0)for(;c--;)r[d++]=l.getUint8(u++);else for(h=l.getUint8(u++),c=-c;c--;)r[d++]=h;c=l.getInt16(u,!0),u+=2}while(u<f.numBytes);if(-32768!==c||d<r.length)throw\\\"Unexpected end of mask RLE encoding\\\";n=new Uint8Array(o);var p=0,m=0;for(m=0;m<o;m++)7&m?(p=r[m>>3],p<<=7&m):p=r[m>>3],128&p&&(n[m]=1);t.pixels.resultMask=n,f.bitset=r,a+=f.numBytes}return t.ptr=a,t.mask=f,!0},readDataOneSweep:function(e,t,r,n){var a,i=t.ptr,o=t.headerInfo,s=o.numDims,l=o.width*o.height,f=o.imageType,c=o.numValidPixel*d.getDataTypeSize(f)*s,u=t.pixels.resultMask;if(r===Uint8Array)a=new Uint8Array(e,i,c);else{var h=new ArrayBuffer(c);new Uint8Array(h).set(new Uint8Array(e,i,c)),a=new r(h)}if(a.length===l*s)t.pixels.resultPixels=n?d.swapDimensionOrder(a,l,s,r,!0):a;else{t.pixels.resultPixels=new r(l*s);var p=0,m=0,g=0,y=0;if(s>1){if(n){for(m=0;m<l;m++)if(u[m])for(y=m,g=0;g<s;g++,y+=l)t.pixels.resultPixels[y]=a[p++]}else for(m=0;m<l;m++)if(u[m])for(y=m*s,g=0;g<s;g++)t.pixels.resultPixels[y+g]=a[p++]}else for(m=0;m<l;m++)u[m]&&(t.pixels.resultPixels[m]=a[p++])}return i+=c,t.ptr=i,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(e,t.ptr,16);if(t.ptr+=16,n.getInt32(0,!0)<2)throw\\\"unsupported Huffman version\\\";var a=n.getInt32(4,!0),i=n.getInt32(8,!0),o=n.getInt32(12,!0);if(i>=o)return!1;var s=new Uint32Array(o-i);d.decodeBits(e,t,s);var l,f,c,u,p=[];for(l=i;l<o;l++)p[f=l-(l<a?0:a)]={first:s[l-i],second:null};var m=e.byteLength-t.ptr,g=Math.ceil(m/4),y=new ArrayBuffer(4*g);new Uint8Array(y).set(new Uint8Array(e,t.ptr,m));var _,b=new Uint32Array(y),v=0,w=0;for(_=b[0],l=i;l<o;l++)(u=p[f=l-(l<a?0:a)].first)>0&&(p[f].second=_<<v>>>32-u,32-v>=u?32===(v+=u)&&(v=0,_=b[++w]):(v+=u-32,_=b[++w],p[f].second|=_>>>32-v));var k=0,T=0,E=new h;for(l=0;l<p.length;l++)void 0!==p[l]&&(k=Math.max(k,p[l].first));T=k>=r?r:k;var x,S,D,A,M,I=[];for(l=i;l<o;l++)if((u=p[f=l-(l<a?0:a)].first)>0)if(x=[u,f],u<=T)for(S=p[f].second<<T-u,D=1<<T-u,c=0;c<D;c++)I[S|c]=x;else for(S=p[f].second,M=E,A=u-1;A>=0;A--)S>>>A&1?(M.right||(M.right=new h),M=M.right):(M.left||(M.left=new h),M=M.left),0!==A||M.val||(M.val=x[1]);return{decodeLut:I,numBitsLUTQick:T,numBitsLUT:k,tree:E,stuffedData:b,srcPtr:w,bitPos:v}},readHuffman:function(e,t,r,n){var a,i,o,s,l,f,c,u,h,p=t.headerInfo.numDims,m=t.headerInfo.height,g=t.headerInfo.width,y=g*m,_=this.readHuffmanTree(e,t),b=_.decodeLut,v=_.tree,w=_.stuffedData,k=_.srcPtr,T=_.bitPos,E=_.numBitsLUTQick,x=_.numBitsLUT,S=0===t.headerInfo.imageType?128:0,D=t.pixels.resultMask,A=0;T>0&&(k++,T=0);var M,I=w[k],R=1===t.encodeMode,O=new r(y*p),C=O;if(p<2||R){for(M=0;M<p;M++)if(p>1&&(C=new r(O.buffer,y*M,y),A=0),t.headerInfo.numValidPixel===g*m)for(u=0,f=0;f<m;f++)for(c=0;c<g;c++,u++){if(i=0,l=s=I<<T>>>32-E,32-T<E&&(l=s|=w[k+1]>>>64-T-E),b[l])i=b[l][1],T+=b[l][0];else for(l=s=I<<T>>>32-x,32-T<x&&(l=s|=w[k+1]>>>64-T-x),a=v,h=0;h<x;h++)if(!(a=s>>>x-h-1&1?a.right:a.left).left&&!a.right){i=a.val,T=T+h+1;break}T>=32&&(T-=32,I=w[++k]),o=i-S,R?(o+=c>0?A:f>0?C[u-g]:A,o&=255,C[u]=o,A=o):C[u]=o}else for(u=0,f=0;f<m;f++)for(c=0;c<g;c++,u++)if(D[u]){if(i=0,l=s=I<<T>>>32-E,32-T<E&&(l=s|=w[k+1]>>>64-T-E),b[l])i=b[l][1],T+=b[l][0];else for(l=s=I<<T>>>32-x,32-T<x&&(l=s|=w[k+1]>>>64-T-x),a=v,h=0;h<x;h++)if(!(a=s>>>x-h-1&1?a.right:a.left).left&&!a.right){i=a.val,T=T+h+1;break}T>=32&&(T-=32,I=w[++k]),o=i-S,R?(c>0&&D[u-1]?o+=A:f>0&&D[u-g]?o+=C[u-g]:o+=A,o&=255,C[u]=o,A=o):C[u]=o}}else for(u=0,f=0;f<m;f++)for(c=0;c<g;c++)if(u=f*g+c,!D||D[u])for(M=0;M<p;M++,u+=y){if(i=0,l=s=I<<T>>>32-E,32-T<E&&(l=s|=w[k+1]>>>64-T-E),b[l])i=b[l][1],T+=b[l][0];else for(l=s=I<<T>>>32-x,32-T<x&&(l=s|=w[k+1]>>>64-T-x),a=v,h=0;h<x;h++)if(!(a=s>>>x-h-1&1?a.right:a.left).left&&!a.right){i=a.val,T=T+h+1;break}T>=32&&(T-=32,I=w[++k]),o=i-S,C[u]=o}t.ptr=t.ptr+4*(k+1)+(T>0?4:0),t.pixels.resultPixels=O,p>1&&!n&&(t.pixels.resultPixels=d.swapDimensionOrder(O,y,p,r))},decodeBits:function(e,t,r,n,a){var i=t.headerInfo,d=i.fileVersion,h=0,p=e.byteLength-t.ptr>=5?5:e.byteLength-t.ptr,m=new DataView(e,t.ptr,p),g=m.getUint8(0);h++;var y=g>>6,_=0===y?4:3-y,b=(32&g)>0,v=31&g,w=0;if(1===_)w=m.getUint8(h),h++;else if(2===_)w=m.getUint16(h,!0),h+=2;else{if(4!==_)throw\\\"Invalid valid pixel count type\\\";w=m.getUint32(h,!0),h+=4}var k,T,E,x,S,D,A,M,I,R=2*i.maxZError,O=i.numDims>1?i.maxValues[a]:i.zMax;if(b){for(t.counter.lut++,M=m.getUint8(h),h++,x=Math.ceil((M-1)*v/8),S=Math.ceil(x/4),T=new ArrayBuffer(4*S),E=new Uint8Array(T),t.ptr+=h,E.set(new Uint8Array(e,t.ptr,x)),A=new Uint32Array(T),t.ptr+=x,I=0;M-1>>>I;)I++;x=Math.ceil(w*I/8),S=Math.ceil(x/4),T=new ArrayBuffer(4*S),(E=new Uint8Array(T)).set(new Uint8Array(e,t.ptr,x)),k=new Uint32Array(T),t.ptr+=x,D=d>=3?f(A,v,M-1,n,R,O):s(A,v,M-1,n,R,O),d>=3?l(k,r,I,w,D):o(k,r,I,w,D)}else t.counter.bitstuffer++,I=v,t.ptr+=h,I>0&&(x=Math.ceil(w*I/8),S=Math.ceil(x/4),T=new ArrayBuffer(4*S),(E=new Uint8Array(T)).set(new Uint8Array(e,t.ptr,x)),k=new Uint32Array(T),t.ptr+=x,d>=3?null==n?u(k,r,I,w):l(k,r,I,w,!1,n,R,O):null==n?c(k,r,I,w):o(k,r,I,w,!1,n,R,O))},readTiles:function(e,t,r,n){var a=t.headerInfo,i=a.width,o=a.height,s=i*o,l=a.microBlockSize,f=a.imageType,c=d.getDataTypeSize(f),u=Math.ceil(i/l),h=Math.ceil(o/l);t.pixels.numBlocksY=h,t.pixels.numBlocksX=u,t.pixels.ptr=0;var p,m,g,y,_,b,v,w,k,T,E=0,x=0,S=0,D=0,A=0,M=0,I=0,R=0,O=0,C=0,P=0,L=0,U=0,B=0,$=0,N=new r(l*l),z=o%l||l,Z=i%l||l,G=a.numDims,j=t.pixels.resultMask,V=t.pixels.resultPixels,F=a.fileVersion>=5?14:15,K=a.zMax;for(S=0;S<h;S++)for(A=S!==h-1?l:z,D=0;D<u;D++)for(C=S*i*l+D*l,P=i-(M=D!==u-1?l:Z),w=0;w<G;w++){if(G>1?(T=V,C=S*i*l+D*l,V=new r(t.pixels.resultPixels.buffer,s*w*c,s),K=a.maxValues[w]):T=null,I=e.byteLength-t.ptr,m={},$=0,R=(p=new DataView(e,t.ptr,Math.min(10,I))).getUint8(0),$++,k=a.fileVersion>=5?4&R:0,O=R>>6&255,(R>>2&F)!=(D*l>>3&F))throw\\\"integrity issue\\\";if(k&&0===w)throw\\\"integrity issue\\\";if((_=3&R)>3)throw t.ptr+=$,\\\"Invalid block encoding (\\\"+_+\\\")\\\";if(2!==_)if(0===_){if(k)throw\\\"integrity issue\\\";if(t.counter.uncompressed++,t.ptr+=$,L=(L=A*M*c)<(U=e.byteLength-t.ptr)?L:U,g=new ArrayBuffer(L%c==0?L:L+c-L%c),new Uint8Array(g).set(new Uint8Array(e,t.ptr,L)),y=new r(g),B=0,j)for(E=0;E<A;E++){for(x=0;x<M;x++)j[C]&&(V[C]=y[B++]),C++;C+=P}else for(E=0;E<A;E++){for(x=0;x<M;x++)V[C++]=y[B++];C+=P}t.ptr+=B*c}else if(b=d.getDataTypeUsed(k&&f<6?4:f,O),v=d.getOnePixel(m,$,b,p),$+=d.getDataTypeSize(b),3===_)if(t.ptr+=$,t.counter.constantoffset++,j)for(E=0;E<A;E++){for(x=0;x<M;x++)j[C]&&(V[C]=k?Math.min(K,T[C]+v):v),C++;C+=P}else for(E=0;E<A;E++){for(x=0;x<M;x++)V[C]=k?Math.min(K,T[C]+v):v,C++;C+=P}else if(t.ptr+=$,d.decodeBits(e,t,N,v,w),$=0,k)if(j)for(E=0;E<A;E++){for(x=0;x<M;x++)j[C]&&(V[C]=N[$++]+T[C]),C++;C+=P}else for(E=0;E<A;E++){for(x=0;x<M;x++)V[C]=N[$++]+T[C],C++;C+=P}else if(j)for(E=0;E<A;E++){for(x=0;x<M;x++)j[C]&&(V[C]=N[$++]),C++;C+=P}else for(E=0;E<A;E++){for(x=0;x<M;x++)V[C++]=N[$++];C+=P}else{if(k)if(j)for(E=0;E<A;E++)for(x=0;x<M;x++)j[C]&&(V[C]=T[C]),C++;else for(E=0;E<A;E++)for(x=0;x<M;x++)V[C]=T[C],C++;t.counter.constant++,t.ptr+=$}}G>1&&!n&&(t.pixels.resultPixels=d.swapDimensionOrder(t.pixels.resultPixels,s,G,r))},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:d.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e,t){var r=e.headerInfo.zMax,n=e.headerInfo.zMin,a=e.headerInfo.maxValues,i=e.headerInfo.numDims,o=e.headerInfo.height*e.headerInfo.width,s=0,l=0,f=0,c=e.pixels.resultMask,u=e.pixels.resultPixels;if(c)if(i>1){if(t)for(s=0;s<i;s++)for(f=s*o,r=a[s],l=0;l<o;l++)c[l]&&(u[f+l]=r);else for(l=0;l<o;l++)if(c[l])for(f=l*i,s=0;s<i;s++)u[f+i]=a[s]}else for(l=0;l<o;l++)c[l]&&(u[l]=r);else if(i>1&&n!==r)if(t)for(s=0;s<i;s++)for(f=s*o,r=a[s],l=0;l<o;l++)u[f+l]=r;else for(l=0;l<o;l++)for(f=l*i,s=0;s<i;s++)u[f+s]=a[s];else for(l=0;l<o*i;l++)u[l]=r},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:t=Float32Array;break;case 7:t=Float64Array;break;default:t=Float32Array}return t},getPixelType:function(e){var t;switch(e){case 0:t=\\\"S8\\\";break;case 1:t=\\\"U8\\\";break;case 2:t=\\\"S16\\\";break;case 3:t=\\\"U16\\\";break;case 4:t=\\\"S32\\\";break;case 5:t=\\\"U32\\\";break;case 6:t=\\\"F32\\\";break;case 7:t=\\\"F64\\\";break;default:t=\\\"F32\\\"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var r;switch(e){case 0:r=t>=-128&&t<=127;break;case 1:r=t>=0&&t<=255;break;case 2:r=t>=-32768&&t<=32767;break;case 3:r=t>=0&&t<=65536;break;case 4:r=t>=-2147483648&&t<=2147483647;break;case 5:r=t>=0&&t<=4294967296;break;case 6:r=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:r=t>=-17976931348623157e292&&t<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=0===t?e:1===t?2:1;break;case 7:r=0===t?e:e-2*t+1;break;default:r=e}return r},getOnePixel:function(e,t,r,n){var a=0;switch(r){case 0:a=n.getInt8(t);break;case 1:a=n.getUint8(t);break;case 2:a=n.getInt16(t,!0);break;case 3:a=n.getUint16(t,!0);break;case 4:a=n.getInt32(t,!0);break;case 5:a=n.getUInt32(t,!0);break;case 6:a=n.getFloat32(t,!0);break;case 7:a=n.getFloat64(t,!0);break;default:throw\\\"the decoder does not understand this pixel type\\\"}return a},swapDimensionOrder:function(e,t,r,n,a){var i=0,o=0,s=0,l=0,f=e;if(r>1)if(f=new n(t*r),a)for(i=0;i<t;i++)for(l=i,s=0;s<r;s++,l+=t)f[l]=e[o++];else for(i=0;i<t;i++)for(l=i,s=0;s<r;s++,l+=t)f[o++]=e[l];return f}},h=function(e,t,r){this.val=e,this.left=t,this.right=r},{decode:function(e,t){var r=(t=t||{}).noDataValue,n=0,a={};a.ptr=t.inputOffset||0,a.pixels={},d.readHeaderInfo(e,a);var i=a.headerInfo,o=i.fileVersion,s=d.getDataTypeArray(i.imageType);if(o>5)throw\\\"unsupported lerc version 2.\\\"+o;d.readMask(e,a),i.numValidPixel===i.width*i.height||a.pixels.resultMask||(a.pixels.resultMask=t.maskData);var l=i.width*i.height;a.pixels.resultPixels=new s(l*i.numDims),a.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var f,c=!t.returnPixelInterleavedDims;if(0!==i.numValidPixel)if(i.zMax===i.zMin)d.constructConstantSurface(a,c);else if(o>=4&&d.checkMinMaxRanges(e,a))d.constructConstantSurface(a,c);else{var u=new DataView(e,a.ptr,2),h=u.getUint8(0);if(a.ptr++,h)d.readDataOneSweep(e,a,s,c);else if(o>1&&i.imageType<=1&&Math.abs(i.maxZError-.5)<1e-5){var p=u.getUint8(1);if(a.ptr++,a.encodeMode=p,p>2||o<4&&p>1)throw\\\"Invalid Huffman flag \\\"+p;p?d.readHuffman(e,a,s,c):d.readTiles(e,a,s,c)}else d.readTiles(e,a,s,c)}a.eofOffset=a.ptr,t.inputOffset?(f=a.headerInfo.blobSize+t.inputOffset-a.ptr,Math.abs(f)>=1&&(a.eofOffset=t.inputOffset+a.headerInfo.blobSize)):(f=a.headerInfo.blobSize-a.ptr,Math.abs(f)>=1&&(a.eofOffset=a.headerInfo.blobSize));var m={width:i.width,height:i.height,pixelData:a.pixels.resultPixels,minValue:i.zMin,maxValue:i.zMax,validPixelCount:i.numValidPixel,dimCount:i.numDims,dimStats:{minValues:i.minValues,maxValues:i.maxValues},maskData:a.pixels.resultMask};if(a.pixels.resultMask&&d.isValidPixelValue(i.imageType,r)){var g=a.pixels.resultMask;for(n=0;n<l;n++)g[n]||(m.pixelData[n]=r);m.noDataValue=r}return a.noDataValue=r,t.returnFileInfo&&(m.fileInfo=d.formatFileInfo(a)),m},getBandCount:function(e){for(var t=0,r=0,n={ptr:0,pixels:{}};r<e.byteLength-58;)d.readHeaderInfo(e,n),r+=n.headerInfo.blobSize,t++,n.ptr=r;return t}}),_=(p=new ArrayBuffer(4),m=new Uint8Array(p),new Uint32Array(p)[0]=1,1===m[0]),b={decode:function(e,t){if(!_)throw\\\"Big endian system is not supported.\\\";var r,n,a=(t=t||{}).inputOffset||0,i=new Uint8Array(e,a,10),o=String.fromCharCode.apply(null,i);if(\\\"CntZImage\\\"===o.trim())r=g,n=1;else{if(\\\"Lerc2\\\"!==o.substring(0,5))throw\\\"Unexpected file identifier string: \\\"+o;r=y,n=2}for(var s,l,f,c,u,d,h=0,p=e.byteLength-10,m=[],b={width:0,height:0,pixels:[],pixelType:t.pixelType,mask:null,statistics:[]},v=0;a<p;){var w=r.decode(e,{inputOffset:a,encodedMaskData:s,maskData:f,returnMask:0===h,returnEncodedMask:0===h,returnFileInfo:!0,returnPixelInterleavedDims:t.returnPixelInterleavedDims,pixelType:t.pixelType||null,noDataValue:t.noDataValue||null});a=w.fileInfo.eofOffset,f=w.maskData,0===h&&(s=w.encodedMaskData,b.width=w.width,b.height=w.height,b.dimCount=w.dimCount||1,b.pixelType=w.pixelType||w.fileInfo.pixelType,b.mask=f),n>1&&(f&&m.push(f),w.fileInfo.mask&&w.fileInfo.mask.numBytes>0&&v++),h++,b.pixels.push(w.pixelData),b.statistics.push({minValue:w.minValue,maxValue:w.maxValue,noDataValue:w.noDataValue,dimStats:w.dimStats})}if(n>1&&v>1){for(d=b.width*b.height,b.bandMasks=m,(f=new Uint8Array(d)).set(m[0]),c=1;c<m.length;c++)for(l=m[c],u=0;u<d;u++)f[u]=f[u]&l[u];b.maskData=f}return b}};module.exports?module.exports=b:this.Lerc=b}();var Lerc=LercDecode.exports,fieldTagNames={315:\\\"Artist\\\",258:\\\"BitsPerSample\\\",265:\\\"CellLength\\\",264:\\\"CellWidth\\\",320:\\\"ColorMap\\\",259:\\\"Compression\\\",33432:\\\"Copyright\\\",306:\\\"DateTime\\\",338:\\\"ExtraSamples\\\",266:\\\"FillOrder\\\",289:\\\"FreeByteCounts\\\",288:\\\"FreeOffsets\\\",291:\\\"GrayResponseCurve\\\",290:\\\"GrayResponseUnit\\\",316:\\\"HostComputer\\\",270:\\\"ImageDescription\\\",257:\\\"ImageLength\\\",256:\\\"ImageWidth\\\",271:\\\"Make\\\",281:\\\"MaxSampleValue\\\",280:\\\"MinSampleValue\\\",272:\\\"Model\\\",254:\\\"NewSubfileType\\\",274:\\\"Orientation\\\",262:\\\"PhotometricInterpretation\\\",284:\\\"PlanarConfiguration\\\",296:\\\"ResolutionUnit\\\",278:\\\"RowsPerStrip\\\",277:\\\"SamplesPerPixel\\\",305:\\\"Software\\\",279:\\\"StripByteCounts\\\",273:\\\"StripOffsets\\\",255:\\\"SubfileType\\\",263:\\\"Threshholding\\\",282:\\\"XResolution\\\",283:\\\"YResolution\\\",326:\\\"BadFaxLines\\\",327:\\\"CleanFaxData\\\",343:\\\"ClipPath\\\",328:\\\"ConsecutiveBadFaxLines\\\",433:\\\"Decode\\\",434:\\\"DefaultImageColor\\\",269:\\\"DocumentName\\\",336:\\\"DotRange\\\",321:\\\"HalftoneHints\\\",346:\\\"Indexed\\\",347:\\\"JPEGTables\\\",285:\\\"PageName\\\",297:\\\"PageNumber\\\",317:\\\"Predictor\\\",319:\\\"PrimaryChromaticities\\\",532:\\\"ReferenceBlackWhite\\\",339:\\\"SampleFormat\\\",340:\\\"SMinSampleValue\\\",341:\\\"SMaxSampleValue\\\",559:\\\"StripRowCounts\\\",330:\\\"SubIFDs\\\",292:\\\"T4Options\\\",293:\\\"T6Options\\\",325:\\\"TileByteCounts\\\",323:\\\"TileLength\\\",324:\\\"TileOffsets\\\",322:\\\"TileWidth\\\",301:\\\"TransferFunction\\\",318:\\\"WhitePoint\\\",344:\\\"XClipPathUnits\\\",286:\\\"XPosition\\\",529:\\\"YCbCrCoefficients\\\",531:\\\"YCbCrPositioning\\\",530:\\\"YCbCrSubSampling\\\",345:\\\"YClipPathUnits\\\",287:\\\"YPosition\\\",37378:\\\"ApertureValue\\\",40961:\\\"ColorSpace\\\",36868:\\\"DateTimeDigitized\\\",36867:\\\"DateTimeOriginal\\\",34665:\\\"Exif IFD\\\",36864:\\\"ExifVersion\\\",33434:\\\"ExposureTime\\\",41728:\\\"FileSource\\\",37385:\\\"Flash\\\",40960:\\\"FlashpixVersion\\\",33437:\\\"FNumber\\\",42016:\\\"ImageUniqueID\\\",37384:\\\"LightSource\\\",37500:\\\"MakerNote\\\",37377:\\\"ShutterSpeedValue\\\",37510:\\\"UserComment\\\",33723:\\\"IPTC\\\",34675:\\\"ICC Profile\\\",700:\\\"XMP\\\",42112:\\\"GDAL_METADATA\\\",42113:\\\"GDAL_NODATA\\\",34377:\\\"Photoshop\\\",33550:\\\"ModelPixelScale\\\",33922:\\\"ModelTiepoint\\\",34264:\\\"ModelTransformation\\\",34735:\\\"GeoKeyDirectory\\\",34736:\\\"GeoDoubleParams\\\",34737:\\\"GeoAsciiParams\\\",50674:\\\"LercParameters\\\"},fieldTags={};for(var key in fieldTagNames)fieldTagNames.hasOwnProperty(key)&&(fieldTags[fieldTagNames[key]]=parseInt(key,10));fieldTags.BitsPerSample,fieldTags.ExtraSamples,fieldTags.SampleFormat,fieldTags.StripByteCounts,fieldTags.StripOffsets,fieldTags.StripRowCounts,fieldTags.TileByteCounts,fieldTags.TileOffsets,fieldTags.SubIFDs;var fieldTypeNames={1:\\\"BYTE\\\",2:\\\"ASCII\\\",3:\\\"SHORT\\\",4:\\\"LONG\\\",5:\\\"RATIONAL\\\",6:\\\"SBYTE\\\",7:\\\"UNDEFINED\\\",8:\\\"SSHORT\\\",9:\\\"SLONG\\\",10:\\\"SRATIONAL\\\",11:\\\"FLOAT\\\",12:\\\"DOUBLE\\\",13:\\\"IFD\\\",16:\\\"LONG8\\\",17:\\\"SLONG8\\\",18:\\\"IFD8\\\"},fieldTypes={};for(var _key in fieldTypeNames)fieldTypeNames.hasOwnProperty(_key)&&(fieldTypes[fieldTypeNames[_key]]=parseInt(_key,10));var LercParameters={Version:0,AddCompression:1},LercAddCompression={None:0,Deflate:1},geoKeyNames={1024:\\\"GTModelTypeGeoKey\\\",1025:\\\"GTRasterTypeGeoKey\\\",1026:\\\"GTCitationGeoKey\\\",2048:\\\"GeographicTypeGeoKey\\\",2049:\\\"GeogCitationGeoKey\\\",2050:\\\"GeogGeodeticDatumGeoKey\\\",2051:\\\"GeogPrimeMeridianGeoKey\\\",2052:\\\"GeogLinearUnitsGeoKey\\\",2053:\\\"GeogLinearUnitSizeGeoKey\\\",2054:\\\"GeogAngularUnitsGeoKey\\\",2055:\\\"GeogAngularUnitSizeGeoKey\\\",2056:\\\"GeogEllipsoidGeoKey\\\",2057:\\\"GeogSemiMajorAxisGeoKey\\\",2058:\\\"GeogSemiMinorAxisGeoKey\\\",2059:\\\"GeogInvFlatteningGeoKey\\\",2060:\\\"GeogAzimuthUnitsGeoKey\\\",2061:\\\"GeogPrimeMeridianLongGeoKey\\\",2062:\\\"GeogTOWGS84GeoKey\\\",3072:\\\"ProjectedCSTypeGeoKey\\\",3073:\\\"PCSCitationGeoKey\\\",3074:\\\"ProjectionGeoKey\\\",3075:\\\"ProjCoordTransGeoKey\\\",3076:\\\"ProjLinearUnitsGeoKey\\\",3077:\\\"ProjLinearUnitSizeGeoKey\\\",3078:\\\"ProjStdParallel1GeoKey\\\",3079:\\\"ProjStdParallel2GeoKey\\\",3080:\\\"ProjNatOriginLongGeoKey\\\",3081:\\\"ProjNatOriginLatGeoKey\\\",3082:\\\"ProjFalseEastingGeoKey\\\",3083:\\\"ProjFalseNorthingGeoKey\\\",3084:\\\"ProjFalseOriginLongGeoKey\\\",3085:\\\"ProjFalseOriginLatGeoKey\\\",3086:\\\"ProjFalseOriginEastingGeoKey\\\",3087:\\\"ProjFalseOriginNorthingGeoKey\\\",3088:\\\"ProjCenterLongGeoKey\\\",3089:\\\"ProjCenterLatGeoKey\\\",3090:\\\"ProjCenterEastingGeoKey\\\",3091:\\\"ProjCenterNorthingGeoKey\\\",3092:\\\"ProjScaleAtNatOriginGeoKey\\\",3093:\\\"ProjScaleAtCenterGeoKey\\\",3094:\\\"ProjAzimuthAngleGeoKey\\\",3095:\\\"ProjStraightVertPoleLongGeoKey\\\",3096:\\\"ProjRectifiedGridAngleGeoKey\\\",4096:\\\"VerticalCSTypeGeoKey\\\",4097:\\\"VerticalCitationGeoKey\\\",4098:\\\"VerticalDatumGeoKey\\\",4099:\\\"VerticalUnitsGeoKey\\\"},geoKeys={};for(var _key2 in geoKeyNames)geoKeyNames.hasOwnProperty(_key2)&&(geoKeys[geoKeyNames[_key2]]=parseInt(_key2,10));var LercDecoder=function(e){_inherits(r,BaseDecoder);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).planarConfiguration=void 0!==e.PlanarConfiguration?e.PlanarConfiguration:1,n.samplesPerPixel=void 0!==e.SamplesPerPixel?e.SamplesPerPixel:1,n.addCompression=e.LercParameters[LercParameters.AddCompression],n}return _createClass(r,[{key:\\\"decodeBlock\\\",value:function(e){switch(this.addCompression){case LercAddCompression.None:break;case LercAddCompression.Deflate:e=inflate_1(new Uint8Array(e)).buffer;break;default:throw new Error(\\\"Unsupported LERC additional compression method identifier: \\\".concat(this.addCompression))}return Lerc.decode(e,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}]),r}(),lerc=Object.freeze({__proto__:null,default:LercDecoder});\";\n  return new Worker(typeof Blob === 'undefined' ? 'data:application/javascript;base64,' + Buffer.from(source, 'binary').toString('base64') : URL.createObjectURL(new Blob([source], {\n    type: 'application/javascript'\n  })));\n}","import * as React from \"react\";\nimport { Helmet } from \"react-helmet-async\";\nimport {\n  useForm,\n  useFieldArray,\n  SubmitHandler,\n  Controller,\n} from \"react-hook-form\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport {\n  Container,\n  Typography,\n  Stack,\n  Grid,\n  TextField,\n  Button,\n  IconButton,\n  RadioGroup,\n  Radio,\n  Tooltip,\n  FormControl,\n  FormControlLabel,\n  FormHelperText,\n} from \"@mui/material\";\nimport { styled } from \"@mui/system\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\n\nimport { Map } from \"ol\";\nimport { toSize } from \"ol/size\";\nimport ImageTile from \"ol/ImageTile\";\nimport Tile from \"ol/Tile\";\nimport { WebGLTile } from \"ol/layer\";\nimport { XYZ } from \"ol/source\";\nimport TileState from \"ol/TileState\";\nimport SourceState from \"ol/source/State\";\nimport { get as getProjection, Projection, transformExtent } from \"ol/proj\";\nimport { register as olRegister } from \"ol/proj/proj4\";\nimport proj4 from \"proj4\";\nimport { utils } from \"geo4326\";\nimport { useOl } from \"~/hooks/useOl\";\nimport * as CustomGeoTIFFSource from \"~/scripts/CustomGeoTIFFSource\";\n\nconst EllipsisWrapper = styled(\"div\")({\n  overflow: \"hidden\",\n});\n\nconst EllipsisTypography = styled(Typography)({\n  overflow: \"hidden\",\n  whiteSpace: \"nowrap\",\n  textOverflow: \"ellipsis\",\n});\n\nconst LayerName = styled(EllipsisWrapper)({\n  flex: \"1 1 auto\",\n});\n\nconst LayerButton = styled(\"div\")({\n  flex: \"0 0 auto\",\n});\n\nconst StyledUl = styled(\"ul\")({\n  listStyle: \"none\",\n  margin: 0,\n  padding: 0,\n  \"& > li\": {\n    marginTop: \"5px\",\n    \"&:firstChild\": {\n      marginTop: 0,\n    },\n  },\n});\n\ntype Input = {\n  sources: {\n    type: string;\n    url: string;\n    geotiff: FileList | string;\n    bands: string;\n    nodata: string;\n    min: string;\n    max: string;\n  }[];\n};\n\ntype SourceConfBase = {\n  nodata: number;\n  bands: number[];\n  min: number;\n  max: number;\n};\n\ntype SourceConf = {\n  blob?: File;\n  url?: string;\n} & SourceConfBase;\n\ntype SubmitProps = {\n  id: string;\n  sources: SourceConf[];\n};\n\ntype FormError =\n  | \"FailedLoadSource\"\n  | \"Duplicate\"\n  | \"UnmatchBands\"\n  | \"NotFoundCrs\"\n  | \"UnsupportedCrs\";\ntype LayerError = \"FailedLoadTile\";\ntype LayerConf = {\n  layer: WebGLTile;\n  error: LayerError | null;\n} & SubmitProps;\n\nconst defaultSourcesValue = {\n  type: \"file\",\n  url: \"\",\n  geotiff: \"\",\n  bands: \"1,2,3\",\n  nodata: \"0\",\n  min: \"0\",\n  max: \"255\",\n};\n\nconst Viewer = (): React.ReactElement => {\n  const ol = useOl();\n  const [layerConfs, setLayerConfs] = React.useState<LayerConf[]>([]);\n  const [error, setError] = React.useState<FormError | null>(null);\n  const [loading, setLoading] = React.useState<boolean>();\n\n  const {\n    control,\n    handleSubmit,\n    register,\n    watch,\n    reset,\n    setValue,\n    formState: { errors },\n  } = useForm<Input>({\n    mode: \"onSubmit\",\n    criteriaMode: \"all\",\n    defaultValues: {\n      sources: [defaultSourcesValue],\n    },\n  });\n\n  const { fields, append, remove } = useFieldArray({\n    name: \"sources\",\n    control,\n  });\n  const watcher = watch(\"sources\");\n\n  const removeLayer = React.useCallback(\n    (id: string) => {\n      setLayerConfs(layerConfs => {\n        const newLayerConfs = [...layerConfs];\n        const index = newLayerConfs.findIndex(layerConf => {\n          return id === layerConf.id;\n        });\n        const target = newLayerConfs[index];\n        if (ol.map && target) {\n          ol.map.removeLayer(target.layer);\n\n          newLayerConfs.splice(index, 1);\n          return newLayerConfs;\n        }\n        return layerConfs;\n      });\n    },\n    [ol.map]\n  );\n  const setLayerError = React.useCallback(\n    (id: string, errorType: LayerError) => {\n      setLayerConfs(layerConfs => {\n        const newLayerConfs = [...layerConfs];\n        const index = newLayerConfs.findIndex(layerConf => {\n          return id === layerConf.id;\n        });\n        const target = newLayerConfs[index];\n        if (target && target.error !== errorType) {\n          target.error = errorType;\n          return newLayerConfs;\n        }\n        return layerConfs;\n      });\n    },\n    []\n  );\n\n  const setLayer = React.useCallback(\n    async (\n      map: Map,\n      source: CustomGeoTIFFSource.default,\n      id: string,\n      sources: SourceConf[]\n    ) => {\n      /*\n        refer to https://github.com/openlayers/openlayers/issues/13197\n      */\n      const sourceView = await source.getView();\n      const sourceProjection = sourceView?.projection;\n      if (!(sourceProjection instanceof Projection)) {\n        setError(\"NotFoundCrs\");\n        return;\n      }\n      const code = sourceProjection.getCode();\n\n      if (!getProjection(code)) {\n        try {\n          const crs = utils.getCrs(code);\n          proj4.defs(code, crs);\n        } catch {\n          setError(\"UnsupportedCrs\");\n          return;\n        }\n        olRegister(proj4);\n      }\n      const tileGrid = source.getTileGrid();\n      const imageSource = new XYZ({\n        tileGrid: tileGrid,\n        url: \"{z},{x},{y}\",\n        interpolate: false,\n        tileLoadFunction: function (imageTile: Tile, coordString: string) {\n          const coord = coordString.split(\",\").map(Number);\n          const tile = source.getTile(\n            coord[0],\n            coord[1],\n            coord[2],\n            1,\n            sourceProjection\n          );\n\n          const setImage = function () {\n            const tilesize = toSize(tileGrid.getTileSize(coord[0]));\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = tilesize[0];\n            canvas.height = tilesize[1];\n            const context = canvas.getContext(\"2d\");\n            if (!context) return;\n            const imgData = context.getImageData(\n              0,\n              0,\n              canvas.width,\n              canvas.height\n            );\n\n            const pixels = imgData.data;\n            const data = tile.getData();\n            if (data instanceof DataView) return;\n            const l = data.length;\n            for (let i = 0; i < l; i++) {\n              pixels[i] = data[i];\n            }\n            context.putImageData(imgData, 0, 0);\n            ((imageTile as ImageTile).getImage() as HTMLImageElement).src =\n              canvas.toDataURL();\n          };\n\n          const tileState = tile.getState();\n          if (tileState === TileState.LOADED) {\n            setImage();\n          } else {\n            const tileListener = () => {\n              const tileState = tile.getState();\n              if (tileState !== TileState.LOADING) {\n                tile.removeEventListener(\"change\", tileListener);\n\n                if (tileState === TileState.LOADED) {\n                  setImage();\n                }\n                if (tileState === TileState.ERROR) {\n                  setLayerError(id, \"FailedLoadTile\");\n                }\n              }\n            };\n            tile.addEventListener(\"change\", tileListener);\n            tile.load();\n          }\n        },\n        projection: sourceProjection,\n      });\n\n      const layer = new WebGLTile({\n        source: imageSource,\n      });\n      map.addLayer(layer);\n      setLayerConfs(layerConfs => {\n        return [\n          ...layerConfs,\n          {\n            id,\n            layer,\n            sources,\n            error: null,\n          },\n        ];\n      });\n\n      const originExtent = sourceView.extent;\n      if (originExtent) {\n        const transformed = transformExtent(originExtent, code, \"EPSG:3857\");\n\n        if (transformed[0] > transformed[2])\n          transformed[2] += proj4(\"EPSG:4326\", \"EPSG:3857\", [180, 0])[0] * 2;\n\n        map.getView().fit(transformed, {\n          padding: [40, 20, 40, 20],\n          maxZoom: 20,\n        });\n      }\n    },\n    [setLayerError]\n  );\n\n  const load = React.useCallback(\n    ({ sources, id }: SubmitProps) => {\n      setLoading(true);\n      const source = new CustomGeoTIFFSource.default({\n        sources: sources as CustomGeoTIFFSource.SourceInfo[],\n      });\n\n      const sourceState = source.getState();\n      if (sourceState === SourceState.READY) {\n        if (ol.map) setLayer(ol.map, source, id, sources);\n        setLoading(false);\n      } else {\n        const sourceListener = () => {\n          const sourceState = source.getState();\n          if (sourceState === SourceState.ERROR) {\n            source.removeEventListener(\"change\", sourceListener);\n            setError(\"FailedLoadSource\");\n            setLoading(false);\n          }\n          if (sourceState === SourceState.READY) {\n            source.removeEventListener(\"change\", sourceListener);\n            if (ol.map) setLayer(ol.map, source, id, sources);\n            setLoading(false);\n          }\n        };\n        source.addEventListener(\"change\", sourceListener);\n      }\n    },\n    [ol.map, setLayer]\n  );\n\n  const onSubmit: SubmitHandler<Input> = React.useCallback(\n    data => {\n      let id = \"\";\n      let bandLength = 0;\n      const sources: SourceConf[] = [];\n      for (let i = 0; i < data.sources.length; i++) {\n        const source = data.sources[i];\n        const bands = source.bands.split(\",\").map(v => {\n          return parseInt(v, 10);\n        });\n        bandLength += bands.length;\n\n        const min = parseFloat(source.min);\n        const max = parseFloat(source.max);\n        const nodata = parseFloat(source.nodata);\n\n        let addedId = \"\";\n        switch (source.type) {\n          case \"file\": {\n            if (!(source.geotiff instanceof FileList)) break;\n\n            const file = source.geotiff[0];\n            addedId += file.name;\n            sources.push({\n              blob: file,\n              bands,\n              min,\n              max,\n              nodata,\n            });\n            break;\n          }\n          case \"url\": {\n            const url = source.url;\n            addedId += url;\n            sources.push({\n              url,\n              bands,\n              min,\n              max,\n              nodata,\n            });\n            break;\n          }\n        }\n        if (addedId.length > 0) {\n          id +=\n            addedId +\n            \"_\" +\n            bands.join(\"\") +\n            \"_\" +\n            source.min +\n            \"_\" +\n            source.max +\n            \"_\" +\n            source.nodata;\n        }\n      }\n\n      if (sources.length === 1 && bandLength === 1) {\n        const band = sources[0].bands[0];\n        sources[0].bands = [band, band, band];\n      } else if (bandLength !== 3) {\n        setError(\"UnmatchBands\");\n        return;\n      }\n      const index = layerConfs.findIndex(layerConf => {\n        return id === layerConf.id;\n      });\n      if (index >= 0) {\n        setError(\"Duplicate\");\n        return;\n      }\n      load({\n        id,\n        sources,\n      });\n    },\n    [load, layerConfs]\n  );\n\n  React.useEffect(() => {\n    if (loading === false) {\n      reset();\n    }\n  }, [loading, reset]);\n\n  const sample1 = React.useCallback(() => {\n    setValue(\"sources\", [\n      {\n        type: \"url\",\n        geotiff: \"\",\n        url: \"https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/2020/S2A_36QWD_20200701_0_L2A/TCI.tif\",\n        bands: \"1,2,3\",\n        nodata: \"0\",\n        min: \"0\",\n        max: \"255\",\n      },\n    ]);\n    setError(null);\n  }, [setValue, setError]);\n\n  const sample2 = React.useCallback(() => {\n    setValue(\"sources\", [\n      {\n        type: \"url\",\n        geotiff: \"\",\n        url: \"https://landsat-pds.s3.amazonaws.com/c1/L8/139/045/LC08_L1TP_139045_20170304_20170316_01_T1/LC08_L1TP_139045_20170304_20170316_01_T1_B4.TIF\",\n        bands: \"1\",\n        nodata: \"0\",\n        min: \"1\",\n        max: \"15978\",\n      },\n      {\n        type: \"url\",\n        geotiff: \"\",\n        url: \"https://landsat-pds.s3.amazonaws.com/c1/L8/139/045/LC08_L1TP_139045_20170304_20170316_01_T1/LC08_L1TP_139045_20170304_20170316_01_T1_B3.TIF\",\n        bands: \"1\",\n        nodata: \"0\",\n        min: \"1\",\n        max: \"15239\",\n      },\n      {\n        type: \"url\",\n        geotiff: \"\",\n        url: \"https://landsat-pds.s3.amazonaws.com/c1/L8/139/045/LC08_L1TP_139045_20170304_20170316_01_T1/LC08_L1TP_139045_20170304_20170316_01_T1_B2.TIF\",\n        bands: \"1\",\n        nodata: \"0\",\n        min: \"1\",\n        max: \"14947\",\n      },\n    ]);\n    setError(null);\n  }, [setValue, setError]);\n\n  return (\n    <>\n      <CssBaseline />\n      <Helmet>\n        <title>Display GeoTIFF</title>\n        <meta name=\"description\" content=\"Display GeoTIFF on map.\" />\n        <link\n          rel=\"canonical\"\n          href=\"https://yonda-yonda.github.io/exmap/geotiff\"\n        />\n        <link\n          rel=\"icon\"\n          type=\"image/x-icon\"\n          href=\"https://github.githubassets.com/favicon.ico\"\n        />\n        <link\n          rel=\"stylesheet\"\n          href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap\"\n        />\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:title\" content=\"Display GeoTIFF\" />\n        <meta name=\"twitter:description\" content=\"GeoTIFF\" />\n        <meta\n          property=\"og:url\"\n          content=\"https://yonda-yonda.github.io/exmap/geotiff\"\n        />\n        <meta\n          name=\"twitter:image\"\n          content=\"https://yonda-yonda.github.io/exmap/image/twitter_geotiff.png\"\n        />\n      </Helmet>\n      <Container>\n        <Typography variant=\"h2\" component=\"h1\">\n          Display GeoTIFF\n        </Typography>\n        <Stack my={4} spacing={4}>\n          <div>\n            <Grid container spacing={2}>\n              <Grid item xs={9}>\n                <div\n                  ref={ol.ref}\n                  style={{\n                    width: \"100%\",\n                    height: \"340px\",\n                  }}\n                />\n              </Grid>\n              <Grid item xs={3}>\n                {layerConfs.length > 0 ? (\n                  <StyledUl>\n                    {layerConfs.map(layerConf => {\n                      return (\n                        <li key={layerConf.id}>\n                          <Stack\n                            direction=\"row\"\n                            spacing={1}\n                            justifyContent=\"space-between\"\n                            alignItems=\"center\"\n                          >\n                            <LayerName>\n                              {layerConf.sources.map((source, i) => {\n                                let name = \"\";\n                                if (source.blob) name += source.blob.name;\n                                if (source.url)\n                                  name += source.url.split(\"/\").pop();\n\n                                return (\n                                  <Tooltip\n                                    key={i}\n                                    title={\n                                      <Typography\n                                        variant=\"caption\"\n                                        display=\"block\"\n                                      >\n                                        {name}\n                                        <br />\n                                        bands: {source.bands.join(\",\")}\n                                        <br />\n                                        range:{\" \"}\n                                        {`${source.min} to ${source.max}`}\n                                        <br />\n                                        nodata: {source.nodata}\n                                      </Typography>\n                                    }\n                                    arrow\n                                    placement=\"left\"\n                                  >\n                                    <EllipsisTypography variant=\"body2\">\n                                      {name}\n                                    </EllipsisTypography>\n                                  </Tooltip>\n                                );\n                              })}\n                              {layerConf.error === \"FailedLoadTile\" && (\n                                <Typography variant=\"caption\" display=\"block\">\n                                  Failed to load tiles. <br />\n                                  \n                                </Typography>\n                              )}\n                            </LayerName>\n                            <LayerButton>\n                              <Button\n                                size=\"small\"\n                                variant=\"outlined\"\n                                onClick={() => {\n                                  removeLayer(layerConf.id);\n                                }}\n                              >\n                                REMOVE\n                              </Button>\n                            </LayerButton>\n                          </Stack>\n                        </li>\n                      );\n                    })}\n                  </StyledUl>\n                ) : (\n                  <Typography>Nothing to display.</Typography>\n                )}\n              </Grid>\n            </Grid>\n          </div>\n          <div>\n            <form onSubmit={handleSubmit(onSubmit)}>\n              <Stack spacing={2}>\n                <div>\n                  <Button\n                    variant=\"outlined\"\n                    onClick={sample1}\n                    size=\"small\"\n                    sx={{ mr: 1 }}\n                  >\n                    sample 1\n                  </Button>\n                  <Button variant=\"outlined\" onClick={sample2} size=\"small\">\n                    sample 2\n                  </Button>\n                </div>\n                {fields.map((field, index) => {\n                  return (\n                    <div key={field.id}>\n                      <Controller\n                        control={control}\n                        name={`sources.${index}.type`}\n                        render={({ field }) => (\n                          <FormControl fullWidth>\n                            <RadioGroup row {...field}>\n                              <FormControlLabel\n                                value=\"file\"\n                                control={<Radio size=\"small\" />}\n                                label=\"Local File\"\n                              />\n                              <FormControlLabel\n                                value=\"url\"\n                                control={<Radio size=\"small\" />}\n                                label=\"URL\"\n                              />\n                            </RadioGroup>\n                          </FormControl>\n                        )}\n                      />\n                      {watcher[index].type === \"file\" && (\n                        <FormControl\n                          component=\"fieldset\"\n                          error={!!errors?.sources?.[index]?.geotiff}\n                          fullWidth\n                        >\n                          <input\n                            {...register(`sources.${index}.geotiff`, {\n                              required: true,\n                              validate: {\n                                length: f =>\n                                  f instanceof FileList && f.length === 1,\n                              },\n                            })}\n                            type=\"file\"\n                          />\n\n                          {errors?.sources?.[index]?.geotiff?.type ===\n                            \"required\" && (\n                            <FormHelperText>\n                              Required. <br />\n                              \n                            </FormHelperText>\n                          )}\n                          {errors?.sources?.[index]?.geotiff?.type ===\n                            \"length\" && (\n                            <FormHelperText>\n                              Required. <br />\n                              1\n                            </FormHelperText>\n                          )}\n                        </FormControl>\n                      )}\n                      {watcher[index].type === \"url\" && (\n                        <Controller\n                          control={control}\n                          name={`sources.${index}.url`}\n                          render={({\n                            field,\n                            fieldState: { invalid, error },\n                          }) => (\n                            <FormControl\n                              component=\"fieldset\"\n                              error={invalid}\n                              fullWidth\n                            >\n                              <TextField\n                                {...field}\n                                label=\"url\"\n                                size=\"small\"\n                                error={invalid}\n                                placeholder=\"https://\"\n                              />\n                              {error?.type === \"required\" && (\n                                <FormHelperText>\n                                  Required. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                              {error?.type === \"pattern\" && (\n                                <FormHelperText>\n                                  Not matched URL pattern.\n                                  <br />\n                                  URL\n                                </FormHelperText>\n                              )}\n                            </FormControl>\n                          )}\n                          rules={{\n                            required: true,\n                            pattern: /^(https?):\\/\\/[^ \"]+$/,\n                          }}\n                        />\n                      )}\n                      <Stack direction=\"row\" spacing={2} sx={{ mt: 2, mb: 1 }}>\n                        <Controller\n                          control={control}\n                          name={`sources.${index}.bands`}\n                          render={({\n                            field,\n                            fieldState: { invalid, error },\n                          }) => (\n                            <FormControl\n                              component=\"fieldset\"\n                              error={invalid}\n                              fullWidth\n                            >\n                              <TextField\n                                {...field}\n                                label=\"bands\"\n                                size=\"small\"\n                                error={invalid}\n                                placeholder=\"1,2,3\"\n                              />\n                              {error?.type === \"required\" && (\n                                <FormHelperText>\n                                  Required. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                              {error?.type === \"pattern\" && (\n                                <FormHelperText>\n                                  Must be positive numbers(maximum of three)\n                                  separated by commas.\n                                  <br />\n                                  3\n                                </FormHelperText>\n                              )}\n                            </FormControl>\n                          )}\n                          rules={{\n                            required: true,\n                            pattern:\n                              /^\\s*([1-9]\\d*){1,}(\\s*,\\s*([1-9]\\d*)){0,2}\\s*$/,\n                          }}\n                        />\n                        <Controller\n                          control={control}\n                          name={`sources.${index}.nodata`}\n                          render={({\n                            field,\n                            fieldState: { invalid, error },\n                          }) => (\n                            <FormControl\n                              component=\"fieldset\"\n                              error={invalid}\n                              fullWidth\n                            >\n                              <TextField\n                                {...field}\n                                label=\"nodata\"\n                                size=\"small\"\n                                error={invalid}\n                              />\n                              {error?.type === \"required\" && (\n                                <FormHelperText>\n                                  Required. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                              {error?.type === \"pattern\" && (\n                                <FormHelperText>\n                                  must be a number. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                            </FormControl>\n                          )}\n                          rules={{\n                            required: true,\n                            pattern: /^((\\+|-){0,1}[1-9]\\d*|0)(\\.\\d+)?$/,\n                          }}\n                        />\n                        <Controller\n                          control={control}\n                          name={`sources.${index}.min`}\n                          render={({\n                            field,\n                            fieldState: { invalid, error },\n                          }) => (\n                            <FormControl\n                              component=\"fieldset\"\n                              error={invalid}\n                              fullWidth\n                            >\n                              <TextField\n                                {...field}\n                                label=\"min\"\n                                size=\"small\"\n                                error={invalid}\n                              />\n                              {error?.type === \"required\" && (\n                                <FormHelperText>\n                                  Required. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                              {error?.type === \"pattern\" && (\n                                <FormHelperText>\n                                  must be a number. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                            </FormControl>\n                          )}\n                          rules={{\n                            required: true,\n                            pattern: /^((\\+|-){0,1}[1-9]\\d*|0)(\\.\\d+)?$/,\n                          }}\n                        />\n                        <Controller\n                          control={control}\n                          name={`sources.${index}.max`}\n                          render={({\n                            field,\n                            fieldState: { invalid, error },\n                          }) => (\n                            <FormControl\n                              component=\"fieldset\"\n                              error={invalid}\n                              fullWidth\n                            >\n                              <TextField\n                                {...field}\n                                label=\"max\"\n                                size=\"small\"\n                                error={invalid}\n                              />\n                              {error?.type === \"required\" && (\n                                <FormHelperText>\n                                  Required. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                              {error?.type === \"pattern\" && (\n                                <FormHelperText>\n                                  must be a number. <br />\n                                  \n                                </FormHelperText>\n                              )}\n                            </FormControl>\n                          )}\n                          rules={{\n                            required: true,\n                            pattern: /^((\\+|-){0,1}[1-9]\\d*|0)(\\.\\d+)?$/,\n                          }}\n                        />\n                      </Stack>\n\n                      <div>\n                        {index > 0 && (\n                          <IconButton\n                            color=\"primary\"\n                            size=\"small\"\n                            aria-label=\"Delete\"\n                            component=\"span\"\n                            onClick={() => {\n                              remove(index);\n                            }}\n                          >\n                            <DeleteIcon />\n                          </IconButton>\n                        )}\n                        {index === fields.length - 1 && index < 2 && (\n                          <IconButton\n                            color=\"primary\"\n                            size=\"small\"\n                            aria-label=\"Add\"\n                            component=\"span\"\n                            onClick={() => {\n                              append(defaultSourcesValue);\n                            }}\n                          >\n                            <AddIcon />\n                          </IconButton>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n              </Stack>\n\n              <FormControl error={!!error} sx={{ mt: 3 }}>\n                <div>\n                  <Button\n                    variant=\"contained\"\n                    type=\"submit\"\n                    onClick={() => {\n                      setError(null);\n                    }}\n                  >\n                    Add Layer\n                  </Button>\n                </div>\n                {error === \"FailedLoadSource\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Failed to load source. <br />\n                    \n                  </FormHelperText>\n                )}\n                {error === \"Duplicate\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Duplicate Layer. <br />\n                    \n                  </FormHelperText>\n                )}\n                {error === \"UnmatchBands\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Number of Bands must be 3. <br />\n                    3\n                  </FormHelperText>\n                )}\n                {error === \"NotFoundCrs\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Not found CRS. <br />\n                    \n                  </FormHelperText>\n                )}\n                {error === \"UnsupportedCrs\" && (\n                  <FormHelperText sx={{ ml: 0 }}>\n                    Unsupported CRS. <br />\n                    \n                  </FormHelperText>\n                )}\n              </FormControl>\n            </form>\n          </div>\n        </Stack>\n      </Container>\n    </>\n  );\n};\nexport default Viewer;\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}"],"names":["module","exports","arr","len","length","i","arr2","Array","__esModule","isArray","arrayLikeToArray","instance","Constructor","TypeError","setPrototypeOf","isNativeReflectConstruct","_construct","Parent","args","Class","Reflect","construct","a","push","apply","Function","bind","prototype","arguments","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","obj","value","superPropBase","_get","get","property","receiver","base","desc","getOwnPropertyDescriptor","call","this","_getPrototypeOf","o","getPrototypeOf","__proto__","subClass","superClass","create","constructor","fn","toString","indexOf","sham","Proxy","Boolean","valueOf","e","iter","Symbol","iterator","from","_i","_s","_e","_arr","_n","_d","next","done","err","_typeof","assertThisInitialized","self","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","object","hasOwnProperty","arrayWithoutHoles","iterableToArray","nonIterableSpread","minLen","n","slice","name","test","isNativeFunction","_wrapNativeSuper","_cache","Map","undefined","has","set","Wrapper","_interopRequireDefault","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","createSvgIcon","RadioButtonIconRoot","styled","position","display","RadioButtonIconBackground","RadioButtonUnchecked","skipSx","transform","RadioButtonIconDot","RadioButtonChecked","_ref","theme","ownerState","left","transition","transitions","easing","easeIn","duration","shortest","checked","easeOut","_props$checked","_props$classes","classes","fontSize","className","root","children","background","dot","getRadioUtilityClass","slot","generateUtilityClass","_excluded","RadioRoot","SwitchBase","shouldForwardProp","prop","overridesResolver","styles","concat","capitalize","color","palette","text","secondary","backgroundColor","action","active","main","hoverOpacity","disabled","defaultCheckedIcon","defaultIcon","inProps","ref","_defaultIcon$props$fo","_defaultCheckedIcon$p","b","useThemeProps","checkedProp","_props$checkedIcon","checkedIcon","_props$color","_props$icon","icon","nameProp","onChangeProp","onChange","_props$size","size","other","slots","composeClasses","useUtilityClasses","radioGroup","RadioGroupContext","createChainedFunction","String","type","getFormGroupUtilityClass","FormGroupRoot","row","flexDirection","flexWrap","_props$row","actions","defaultValue","valueProp","rootRef","_useControlled","useControlled","controlled","_useControlled2","setValueState","focus","input","current","querySelector","handleRef","useForkRef","useId","event","role","s","m","h","w","y","plural","ms","msAbs","isPlural","Math","round","val","options","str","match","exec","parseFloat","toLowerCase","parse","isFinite","long","abs","fmtLong","fmtShort","Error","JSON","stringify","warned","formatArgs","useColors","namespace","humanize","diff","c","splice","index","lastC","replace","save","namespaces","storage","setItem","removeItem","error","load","r","getItem","process","DEBUG","window","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","console","firebug","exception","table","parseInt","RegExp","$1","localStorage","localstorage","destroy","warn","colors","log","debug","formatters","j","v","message","_toConsumableArray","env","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","_len","_key","enabled","curr","Number","Date","prev","coerce","unshift","format","formatter","logFn","selectColor","extend","init","delimiter","newDebug","toNamespace","regexp","substring","stack","disable","names","map","skips","join","enable","split","substr","keys","forEach","hash","charCodeAt","_isNativeReflectConstruct","uncurryThis","thisArg","ReflectApply","uncurryThisGetter","ReflectGetOwnPropertyDescriptor","ReflectGetPrototypeOf","ReflectOwnKeys","ownKeys","NativeNumber","SymbolIterator","isNaN","SymbolToStringTag","species","toStringTag","NativeObject","for","ObjectDefineProperty","ObjectPrototype","freeze","is","NativeArray","isPrototypeOf","hasOwn","ArrayPrototype","NativeArrayPrototypeSymbolIterator","toLocaleString","ArrayPrototypeSymbolIterator","NativeArrayBuffer","trunc","ArrayBuffer","NativeSharedArrayBuffer","isView","SharedArrayBuffer","TypedArray","Uint8Array","TypedArrayPrototype","NativeUint32Array","values","entries","reverse","fill","copyWithin","sort","subarray","Uint16Array","Uint32Array","NativeFloat32Array","Float32Array","ArrayIteratorPrototype","ArrayIteratorPrototypeNext","GeneratorPrototypeNext","_callee","_context","stop","IteratorPrototype","DataViewPrototype","DataView","DataViewPrototypeGetUint16","getUint16","SetPrototype","setUint16","RangeError","Set","NativeWeakMap","add","WeakMap","WeakMapPrototype","WeakMapPrototypeGet","_arrayLikeToArray","arrayIterators","SafeIteratorPrototype","arrayIterator","array","safe","_step","generators","DummyArrayIteratorPrototype","generator","_iterator","allowArrayLike","it","_unsupportedIterableToArray","F","f","normalCompletion","didErr","step","_e2","return","_createForOfIteratorHelper","buffer","floatView","uint32View","baseTable","shiftTable","mantissaTable","exponentTable","offsetTable","_i2","_i3","_i4","_i5","convertToNumber","float16bits","dataView","byteOffset","opts","fromWhiteIsZero","raster","max","width","height","rgbRaster","fromBlackIsZero","fromPalette","colorMap","greenOffset","blueOffset","mapIndex","fromCMYK","cmykRaster","k","fromYCbCr","yCbCrRaster","Uint8ClampedArray","cb","cr","fromCIELab","cieLabRaster","x","z","g","pow","min","registry","addDecoder","cases","importFn","getDecoder","_x","_getDecoder","fileDirectory","Decoder","Compression","sent","abrupt","copyNewSize","samplesPerPixel","resampleNearest","valueArrays","inWidth","inHeight","outWidth","outHeight","relX","relY","newArray","cy","cx","lerp","v0","v1","t","resampleBilinear","rawY","yl","floor","yh","ceil","rawX","tx","xl","xh","ll","hl","lh","hh","resample","method","resampleNearestInterleaved","valueArray","samples","resampleBilinearInterleaved","resampleInterleaved","sum","start","end","arrayForType","bitsPerSample","Int8Array","Int16Array","Int32Array","Float64Array","needsNormalization","normalizeArray","inBuffer","planarConfiguration","tileWidth","tileHeight","view","samplesToTransfer","outArray","bitMask","repeat","bitsPerLine","lineBitOffset","pixelBitOffset","bitOffset","outIndex","innerBitOffset","getUint8","raw","getUint32","then","GeoTIFFImage","geoKeys","littleEndian","cache","source","tiles","isTiled","StripOffsets","PlanarConfiguration","_readRGB","_readRasters","_readRaster2","_getTileOrStrip","ImageWidth","ImageLength","SamplesPerPixel","TileWidth","getWidth","TileLength","RowsPerStrip","getHeight","getTileWidth","getTileHeight","bytes","BitsPerSample","getSampleByteSize","sampleIndex","SampleFormat","getInt8","getInt16","getInt32","offset","getFloat32","getFloat64","getSampleFormat","getBitsPerSample","_callee2","sample","poolOrDecoder","signal","numTilesPerRow","numTilesPerCol","byteCount","request","_this","_context2","TileOffsets","TileByteCounts","StripByteCounts","fetch","data","sampleFormat","decode","getSamplesPerPixel","getBlockHeight","t0","t1","t2","t3","_x2","_x3","_x4","_x5","_callee3","imageWindow","interleave","resampleMethod","imageWidth","imageHeight","minXTile","maxXTile","minYTile","maxYTile","windowWidth","bytesPerPixel","srcSampleOffsets","sampleReaders","promises","yTile","xTile","_loop","resampled","_this2","_context3","getBytesPerPixel","getReaderForSample","si","promise","getTileOrStrip","tile","blockHeight","firstLine","firstCol","lastLine","lastCol","reader","ymax","xmax","pixelOffset","windowCoordinate","Promise","all","_x6","_x7","_x8","_x9","_x10","_x11","_x12","_x13","_x14","_callee4","_ref2","wnd","_ref2$samples","_ref2$pool","pool","fillValue","imageWindowWidth","imageWindowHeight","numPixels","result","_args4","_context4","reject","getArrayForSample","_readRaster","_callee5","_ref3","_ref3$interleave","_ref3$pool","_ref3$enableAlpha","enableAlpha","pi","subOptions","red","green","blue","_args5","_context5","PhotometricInterpretation","photometricInterpretations","ExtraSamples","ExtraSamplesValues","readRasters","ColorMap","ModelTiepoint","tiePoints","metadata","GDAL_METADATA","string","items","filter","item","inner","GDAL_NODATA","modelTransformation","ModelTransformation","referenceImage","modelPixelScale","ModelPixelScale","_referenceImage$getRe","getResolution","_referenceImage$getRe2","refResX","refResY","refResZ","GTRasterTypeGeoKey","origin","getOrigin","resolution","x1","y1","x2","y2","DataView64","arrayBuffer","_dataView","combined","right","isSafeInteger","isNegative","carrying","byte","DataSlice","sliceOffset","bigTiff","_sliceOffset","_littleEndian","_bigTiff","byteLength","sliceTop","readUint32","readUint64","spawn","Transfer","Thread","Worker","defaultPoolSize","hardwareConcurrency","Pool","worker","_decode","resolve","queue","terminate","_objectWithoutProperties","excluded","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","CRLFCRLF","itemsToObject","fromEntries","_step$value","parseHeaders","line","kv","trim","parseContentType","rawContentType","_rawContentType$split","_rawContentType$split2","params","param","parseContentRange","rawContentRange","total","_rawContentRange$matc","_rawContentRange$matc2","parseByteRanges","responseArrayBuffer","boundary","decoder","TextDecoder","out","startBoundary","endBoundary","_text","startsWith","innerText","endOfHeaders","headers","_parseContentRange","startOfData","fileSize","BaseSource","_close","_fetchSlice","_fetch","slices","_args","fetchSlice","_createSuper","Derived","hasNativeReflectConstruct","Super","NewTarget","endsWith","expectedEnding","invert","oldObj","newObj","times","numTimes","func","results","wait","_wait","milliseconds","setTimeout","zip","A","B","AbortError","_Error","_super","captureStackTrace","AggregateError","_Error2","CustomAggregateError","_super2","errors","Block","BlockGroup","blockIds","BlockedSource","_BaseSource","_ref$blockSize","blockSize","_ref$cacheSize","cacheSize","blockCache","blockRequests","blockIdsToFetch","cachedBlocks","missingBlockIds","top","firstBlockOffset","_blockId2","_iterator2","_step2","_blockId3","_block","cachedBlock","retriedBlockRequests","_iterator3","_step3","_step3$value","_blockId","rejected","reason","_iterator4","_step4","blockId","block","requiredBlocks","_iterator5","_step5","_step5$value","_blockId4","_block2","fetchBlocks","finish","allSettled","some","status","aborted","readSliceData","groups","groupBlocks","groupRequests","groupIndex","_step6","_iterator6","_loop2","blockRequest","response","blockOffset","delete","clear","sortedBlockIds","_step7","lastBlockId","_iterator7","blocks","_this3","blockIdLow","blockIdHigh","sliceData","sliceView","delta","blockInnerOffset","rangeInnerOffset","usedBlockLength","blockView","BaseResponse","_getData","headerName","BaseClient","url","_request","_args2","credentials","FetchResponse","_BaseResponse","FetchClient","_BaseClient","XHRResponse","xhr","getResponseHeader","XHRClient","XMLHttpRequest","open","responseType","_Object$entries","_Object$entries$_i","setRequestHeader","onload","onerror","onabort","send","abort","addEventListener","constructRequest","enumerableOnly","symbols","sym","_objectSpread","getOwnPropertyDescriptors","defineProperties","HttpResponse","dataPromise","statusCode","HttpClient","parsedUrl","httpApi","protocol","resolveData","chunks","on","chunk","Buffer","_excluded2","_excluded3","_excluded4","RemoteSource","_fetchSlices","client","maxRanges","allowFullFile","_fileSize","fetchSlices","_parseContentType","byteRanges","first","others","_data","Range","ok","getHeader","getData","_parseContentRange2","_data2","maybeWrapInBlockedSource","makeFetchSource","_ref3$headers","_ref3$maxRanges","_ref3$allowFullFile","blockOptions","makeXHRSource","_ref4","_ref4$headers","_ref4$maxRanges","_ref4$allowFullFile","makeHttpSource","_ref5","_ref5$headers","_ref5$maxRanges","_ref5$allowFullFile","makeRemoteSource","_ref6","_ref6$forceXHR","forceXHR","clientOptions","ArrayBufferSource","makeBufferSource","FileReaderSource","file","blob","FileReader","readAsArrayBuffer","makeFileReaderSource","closeAsync","fd","readAsync","bytesRead","FileSource","path","openRequest","flags","mode","openAsync","_yield$readAsync","alloc","makeFileSource","tagName2Code","fieldTagNames","geoKeyName2Code","geoKeyNames","name2code","typeName2byte","fieldTypeNames","numBytesInIfd","_binBE","nextZero","oincr","readUshort","buff","p","readShort","ui8","i16","readInt","i32","readUint","ui32","readASCII","l","fromCharCode","readFloat","fl32","readDouble","fl64","writeUshort","writeUint","writeASCII","writeDouble","encodeIfds","ifds","bin","ifdo","ifd","noffs","_offset","eoff","tag","typeName","fieldTagTypes","typeNum","num","dlen","toff","_writeIFD","metadataDefaults","writeGeotiff","numBands","flattenedValues","rowIndex","columnIndex","bandIndex","GeographicTypeGeoKey","GeogCitationGeoKey","GTModelTypeGeoKey","GeoAsciiParams","geoAsciiParams","code","GeoKeyDirectory","geoKey","Count","TIFFTagLocation","valueOffset","KeyID","encodedMetadata","convertToTids","outputImage","prfx","img","iterable","encodeImage","DummyLogger","setLogger","logger","getFieldTypeLength","fieldType","fieldTypes","parseGeoKeyDirectory","rawGeoKeyDirectory","geoKeyDirectory","location","count","getValues","dataSlice","readMethod","fieldTypeLength","readUint8","readInt8","readUint16","readInt16","readInt32","readInt64","readFloat32","readFloat64","ImageFileDirectory","nextIFDByteOffset","GeoTIFFImageIndexError","GeoTIFFBase","resX","resY","bbox","firstImage","usedImage","imageCount","imgBBox","_firstImage$getOrigin","_firstImage$getOrigin2","oX","oY","_firstImage$getResolu","_firstImage$getResolu2","rX","rY","usedBBox","allImages","image","_image$fileDirectory","subfileType","newSubfileType","_image","imgResX","imgResY","_firstImage$getOrigin3","_firstImage$getOrigin4","_oX","_oY","_usedImage$getResolut","_usedImage$getResolut2","imageResX","imageResY","getImage","getImageCount","getBoundingBox","SubfileType","NewSubfileType","GeoTIFF","_GeoTIFFBase","_fromSource","_getGhostValues","_getImageCount","_getImage","_requestIFD","_parseFileDirectoryAt","_getSlice","firstIFDOffset","ifdRequests","ghostValues","fallbackSize","t4","entrySize","offsetSize","numDirEntries","byteSize","entryCount","fieldTag","typeCount","fieldValues","actualOffset","fieldDataSlice","getSlice","covers","readOffset","arrayFields","parseFileDirectoryAt","requestIFD","previousIfd","_callee6","_args6","_context6","_callee7","hasNext","_context7","_callee8","detectionString","heuristicAreaSize","valuesString","metadataSize","fullString","_this4","_context8","close","_callee9","headerData","BOM","magicNumber","_context9","getUint64","MultiGeoTIFF","_GeoTIFFBase2","_getImageCount2","_getImage2","_parseFileDirectoriesPerFile","_super3","mainFile","overviewFiles","_this5","imageFiles","fileDirectoriesPerFile","fileDirectoriesPerFileParsing","_callee10","requests","_context10","_callee11","visited","relativeIndex","imageFile","ii","_args11","_context11","parseFileDirectoriesPerFile","imageCounts","_callee12","_context12","reduce","fromUrl","_fromUrl","_callee13","_args13","_context13","fromSource","fromArrayBuffer","_fromArrayBuffer","_callee14","_context14","fromFile","_fromFile","_callee15","_context15","fromBlob","_fromBlob","_callee16","_context16","fromUrls","_x15","_fromUrls","_callee17","mainUrl","overviewUrls","_args17","_context17","writeArrayBuffer","_x16","_x17","_writeArrayBuffer","_callee18","_context18","fieldTags","StripRowCounts","SubIFDs","WhiteIsZero","BlackIsZero","RGB","Palette","TransparencyMask","CMYK","YCbCr","CIELab","ICCLab","Unspecified","Assocalpha","Unassalpha","LercParameters","Version","AddCompression","LercAddCompression","None","Deflate","_key2","observable","_classCallCheck","_createClass","Yallist","MAX","LENGTH","LENGTH_CALCULATOR","ALLOW_STALE","MAX_AGE","DISPOSE","NO_DISPOSE_ON_SET","LRU_LIST","CACHE","UPDATE_AGE_ON_GET","naiveLength","LRUCache","Infinity","lc","stale","maxAge","dispose","noDisposeOnSet","updateAgeOnGet","reset","mL","allowStale","mA","lC","hit","thisp","walker","tail","forEachStep","head","toArray","isStale","now","_del","Entry","node","expiresAt","doUse","unshiftNode","removeNode","_regeneratorRuntime","mark","wrap","list","insert","inserted","Node","pushNode","pop","res","shift","forEachReverse","getReverse","mapReverse","initial","acc","reduceReverse","toArrayReverse","to","ret","sliceReverse","deleteCount","er","__awaiter","_arguments","P","fulfilled","AsyncSerialScheduler","observer","_baseObserver","_pendingPromises","complete","catch","_error","task","prevPromisesCompletion","hasSymbols","hasSymbol","getSymbol","asyncIterator","SymbolObservable","SymbolSpecies","getMethod","getSpecies","ctor","Observable","isObservable","hostReportError","enqueue","cleanupSubscription","subscription","cleanup","_cleanup","unsubscribe","closeSubscription","_observer","_queue","_state","notifySubscription","onNotify","flushSubscription","Subscription","subscriber","subscriptionObserver","SubscriptionObserver","_subscription","_subscriber","nextOrObserver","onError","onComplete","intermediate","mappers","mapper","tapObserver","subscribe","_error2","propagatedValue","seed","C","hasSeed","hasValue","_this6","_len2","sources","startNext","_this7","subscriptions","outer","normalizedValue","innerValue","completeIfDone","closed","observableMethod","iteratorMethod","_len3","_key3","symbol","scheduler","schedule","isAsyncIterator","thing","__asyncValues","__values","verb","settle","e_1","_a","mapped","mapped_1","mapped_1_1","element","output","interval","period","counter","handle","setInterval","clearInterval","observables","completed","unsubscribeAll","_Observable","MulticastSubject","_observers","coldObservable","sourceSubscription","subject","subscriberCount","accumulator","accumulated","prevAcc","serialize","deserialize","registerSerializer","serializers_1","registeredSerializer","DefaultSerializer","serializer","extendSerializer","__createBinding","k2","__exportStar","expose","common_1","index_1","transferable_1","bundleURL","getBaseURL","getBundleURL","matches","_inherits","_possibleConstructorReturn","isWorkerRuntime","getWorkerImplementation","get_bundle_url_browser_1","implementation","isAbsoluteURL","createSourceBlobURL","Blob","URL","createObjectURL","NoWebWorker","WebWorker","_Worker","_b","_baseURL","CORSWorkaround","_WebWorker","BlobWorker","selectWorkerImplementation","isWindowContext","Window","postMessage","implementation_1","pool_1","spawn_1","thread_1","__importDefault","mod","createProxyModule","createProxyFunction","debug_1","observable_fns_1","observable_promise_1","messages_1","debugMessages","nextJobUID","createObservableForJob","jobUID","asyncType","messageHandler","uid","WorkerMessageType","running","resultType","isJobResultMessage","payload","removeEventListener","isJobErrorMessage","cancelMessage","MasterMessageType","cancel","prepareArguments","rawArgs","transferables","arg","isTransferDescriptor","_prepareArguments","runMessage","run","ObservablePromise","multicast","methodNames","proxy","methodName","PoolEventType","ponyfills_1","pool_types_1","nextPoolID","delay","flatMap","flattened","WorkerPool","spawnWorker","optionsOrSize","eventSubject","Subject","initErrors","isClosing","nextTaskID","taskQueue","_options$size","workers","createArray","runningTasks","spawnWorkers","eventObservable","initialized","_this$options$concurr","concurrency","find","workerID","returnValue","id","taskStart","taskID","taskCompleted","taskFailed","runPromise","removeTaskFromWorkersRunningTasks","someRunPromise","runPoolTask","scheduleWork","availableWorker","findIdlingWorker","nextTask","taskQueueDrained","eventSubscription","events","terminated","allowResolvingImmediately","getCurrentlyRunningTasks","taskFailures","failureSubscription","settlementPromise","earlyExitPromise","settled","race","taskFunction","_this$options$maxQueu","maxQueuedJobs","taskCompletion","someTask","taskCanceled","taskQueued","force","remainingQueue","PoolConstructor","EventType","_defineProperty","_slicedToArray","promise_1","symbols_1","master_1","invocation_proxy_1","debugSpawn","debugThreadUtils","initMessageTimeout","THREADS_WORKER_INIT_TIMEOUT","withTimeout","timeoutInMs","errorMessage","timeoutHandle","timeout","clearTimeout","receiveInitMessage","isUncaughtErrorMessage","createEventObservable","workerTermination","messageEvent","workerEvent","WorkerEventType","rejectionHandler","errorEvent","internalError","terminationEvent","termination","createTerminator","_promise_1$createProm","createPromiseWithResolver","_promise_1$createProm2","resolver","setPrivateThreadProps","workerEvents","_Object$assign","workerErrors","assign","$errors","$events","$terminate","$worker","initMessage","exposed","_createTerminator","_proxy","methods","fail","thread","_assertThisInitialized","doNothing","returnInput","runDeferred","_observable_fns_1$Obs","originalObserver","onCompletion","onNext","initHasRun","fulfillmentCallbacks","rejectionCallbacks","firstValueSet","state","firstValue","rejection","onRejected","onFulfilled","onFulfilledRaw","onRejectedRaw","onRejectedCalled","rejectionCallback","anotherError","onCompleted","handler","isThenable","itemPromise","resolvedTo","alreadyResolved","fallbackDeserializer","fallbackSerializer","DefaultErrorSerializer","__error_marker","$transferable","postMessageToMaster","transferList","subscribeToMasterMessages","onMessage","is_observable_1","common_2","transferable_2","exposeCalled","activeSubscriptions","isMasterJobRunMessage","isZenObservable","deconstructTransfer","postJobErrorMessage","rawError","_deconstructTransfer","postJobResultMessage","resultValue","_deconstructTransfer2","resultMessage","postJobStartMessage","startMessage","postUncaughtErrorMessage","uncaughtError","subError","runFunction","syncResult","messageData","postModuleInitMessage","indexOfMatch","xml","tagName","startIndex","afterStart","relativeEnd","selfClosing","lastIndexOf","findTagByName","tags","attributeName","pattern","global","TO_STRING_TAG_SUPPORT","isCallable","classofRaw","TO_STRING_TAG","wellKnownSymbol","CORRECT_ARGUMENTS","O","tryGet","callee","toPropertyKey","definePropertyModule","createPropertyDescriptor","propertyKey","aCallable","NATIVE_BIND","that","classof","Iterators","ITERATOR","anObject","tryToString","getIteratorMethod","argument","usingIterator","isArrayIteratorMethod","lengthOfArrayLike","getIterator","iteratorClose","Result","stopped","ResultPrototype","unboundFunction","iterFn","AS_ENTRIES","IS_ITERATOR","INTERRUPTED","condition","callFn","kind","innerResult","innerError","PromiseCapability","$$resolve","$$reject","$","iterate","createProperty","stat","newPromiseCapabilityModule","perform","capability","promiseResolve","remaining","alreadyCalled","getIconButtonUtilityClass","IconButtonRoot","ButtonBase","edge","textAlign","flex","typography","pxToRem","padding","borderRadius","overflow","disableRipple","marginLeft","marginRight","_props$edge","_props$disabled","_props$disableFocusRi","disableFocusRipple","centerRipple","focusRipple","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","STATIC_DRAW","CONTEXT_IDS","getContext","canvas","opt_attributes","attributes","preserveDrawingBuffer","context","BufferUsage","WebGLArrayBuffer","opt_usage","usage","ofSize","getArrayClassForType","fromArray","arrayClass","getType","getArray","getUsage","getSize","_extendStatics","__extends","__","bindAndConfigure","gl","texture","interpolate","resampleFilter","LINEAR","NEAREST","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","uploadDataTexture","helper","bandCount","getGL","textureType","bytesPerRow","unpackAlignment","LUMINANCE","LUMINANCE_ALPHA","RGBA","FLOAT","getExtension","UNSIGNED_BYTE","oldUnpackAlignment","getParameter","UNPACK_ALIGNMENT","pixelStorei","texImage2D","TileTexture","grid","textures","handleTileChange_","getTileSize","tileCoord","NaN","helper_","coords","flushBufferData","setTile","loaded","getState","TileState","uploadTile_","ImageTile","Image","crossOrigin","createTexture","uploadImageTexture","isFloat","pixelCount","DataType","bytesPerElement","BYTES_PER_ELEMENT","textureCount","textureDataArrays","textureIndex","dataIndex","rowOffset","colCount","colIndex","dataValue","pixelIndex","textureData","dispatchEvent","disposeInternal","deleteBuffer","deleteTexture","WebGLPostProcessingPass","gl_","webGlContext","scaleRatio_","scaleRatio","renderTargetTexture_","renderTargetTextureSize_","frameBuffer_","createFramebuffer","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","renderTargetProgram_","createProgram","attachShader","linkProgram","renderTargetVerticesBuffer_","createBuffer","bindBuffer","bufferData","renderTargetAttribLocation_","getAttribLocation","renderTargetUniformLocation_","getUniformLocation","renderTargetOpacityLocation_","renderTargetTextureLocation_","uniforms_","uniforms","frameState","textureSize","drawingBufferWidth","drawingBufferHeight","bindFramebuffer","FRAMEBUFFER","getFrameBuffer","viewport","internalFormat","framebufferTexture2D","COLOR_ATTACHMENT0","nextPass","preCompose","postCompose","activeTexture","TEXTURE0","canvasId","renderTargets","getContextAttributes","clearColor","COLOR_BUFFER_BIT","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","useProgram","enableVertexAttribArray","vertexAttribPointer","uniform2f","uniform1i","opacity","layerStatesArray","layerIndex","uniform1f","applyUniforms","drawArrays","TRIANGLES","textureSlot","uniform","HTMLCanvasElement","ImageData","uniform3f","uniform4f","fromTransform","mat4","DefaultUniform","AttributeType","canvasCache","getSharedCanvasCacheKey","uniqueCanvasCacheKeyCount","getByteSizeFromType","WebGLHelper","opt_options","boundHandleWebGLContextLost_","handleWebGLContextLost","boundHandleWebGLContextRestored_","handleWebGLContextRestored","canvasCacheKey_","canvasCacheKey","canvas_","cacheItem","createElement","users","getCanvas","bufferCache_","extensionCache_","currentProgram_","ContextEventType","offsetRotateMatrix_","offsetScaleMatrix_","tmpMat4_","uniformLocations_","attribLocations_","setUniforms","postProcessPasses_","postProcesses","shaderCompileErrors_","startTime_","name_1","canvasCacheKeyMatches","extension","bufferKey","bufferCache","webGlBuffer","buf","bufferCacheEntry","isContextLost","loseContext","releaseCanvas","prepareDraw","opt_disableAlphaBlend","pixelRatio","ZERO","applyFrameState","prepareDrawToRenderTarget","renderTarget","getFramebuffer","getTexture","drawElements","elementType","UNSIGNED_INT","numItems","offsetInBytes","finalizeDraw","rotation","viewState","offsetScaleMatrix","offsetRotateMatrix","setUniformMatrixValue","setUniformFloatValue","zoom","HTMLImageElement","prevValue","program","shader","getProgram","fragmentShaderSource","vertexShaderSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","getProgramParameter","LINK_STATUS","getAttributeLocation","makeProjectionTransform","center","uniformMatrix4fv","enableAttributeArray_","attribName","stride","enableAttributes","attr","computeAttributesStride","opt_data","opt_texture","Disposable","WebGLLayerRenderer","layer","inversePixelTransform_","pixelContext_","postProcesses_","addChangeListener","removeHelper_","dispatchPreComposeEvent","dispatchPostComposeEvent","getLayer","hasListener","event_1","event_2","prepareFrame","getSource","incrementGroup","groupNumber","renderer","getRenderer","layerClassName","getClassName","mapId","afterHelperCreated","prepareFrameInternal","dispatchRenderEvent_","event_3","preRender","postRender","getDataAtPixel","pixel","hitTolerance","renderPixel","layerExtent","getExtent","renderCoordinate","pixelToCoordinateTransform","pixelContext","pixelCanvas","clearRect","drawImage","getImageData","Layer","Uniforms","Attributes","attributeDescriptions","empty","depthForZ","addTileTextureToLookup","tileTexturesByZ","tileTexture","getRenderExtent","extent","layerState","projection","getWrapX","gridExtent","getTileGridForProjection","WebGLTileLayerRenderer","tileLayer","tileTransform_","tempMat4_","tempTileRange_","TileRange","tempTileCoord_","tempSize_","program_","vertexShader_","fragmentShader_","indices_","tileTextureCache_","paletteTextures_","paletteTextures","isDrawableTile_","tileState","useInterimTilesOnError","getUseInterimTilesOnError","State","enqueueTiles","tileSource","tileGrid","tileTextureCache","tileRange","getTileRangeForExtentAndZ","tileSourceKey","wantedTiles","tileResolution","minX","maxX","minY","maxY","tileCoordKey","containsKey","getKey","getTile","interimTile","getInterimTile","tileQueueKey","tileQueue","isKeyQueued","getTileCoordCenter","renderFrame","getZForResolution","zDirection","nextExtent","targetZ","nextResolution","alphaLookup","time","blend","tileTextures","alpha","getAlpha","endTransition","findAltTiles_","minZoom","getMinZoom","parentZ","zs","centerX","centerY","jj","tileZ","tileSize","tileOrigin","centerI","centerJ","tileScale","depth","tileTextures_1","tileCenterI","tileCenterJ","textureProperty","uniformName","paletteIndex","paletteTexture","animate","canExpireCache","postRenderFunctions","expireCache","altZ","getTileRangeForTileCoordAndZ","covered","cacheKey","deleteProgram","PaletteTexture","texture_","ValueTypes","Operators","getValueType","valueArr","every","operator","getReturnType","numberToGlsl","arrayToGlsl","getStringNumberEquivalent","stringLiteralsMap","expressionToGlsl","typeHint","toGlsl","valueType","stringToGlsl","colorToGlsl","assertNumber","assertNumbers","assertString","assertBoolean","assertArgsCount","assertArgsMinCount","assertArgsMaxCount","assertArgsEven","assertUniqueInferredType","types","uniformNameForVariable","variableName","inFragmentShader","variables","numColors","candidate","length_1","paletteName","PALETTE_TEXTURE_ARRAY","GET_BAND_VALUE_FUNC","getEqualOperator","getDecisionOperator","band","functions","ifBlocks","colorIndex","parsedArgs","opt_typeHint","interpolation","outputType","exponent","stop1","output1","stop2","fallback","assertArgsOdd","parseStyle","pipeline","contrast","exposure","saturation","gamma","brightness","numVariables","_loop_1","uniformDeclarations","functionDefintions","WebGLTileLayer","style_","cacheSize_","styleVariables_","handleSourceUpdate_","setStyle","getSourceBandCount_","createRenderer","parsedStyle","changed","updateStyleVariables","BaseTile","DataTile","loader_","loader","data_","error_","getError","DataTileSource","maxResolution","maxZoom","attributions","attributionsCollapsible","opaque","tilePixelRatio","wrapX","tileLoadingKeys_","setLoader","tileCache","sourceLoader","tileOptions","TileEventType","workerPool","geotiff","require","STATISTICS_MAXIMUM","STATISTICS_MINIMUM","getWorkerPool","_","getProjection","ProjectedCSTypeGeoKey","getCachedProjection","units","unitsFromCode","ProjLinearUnitsGeoKey","Projection","GeogAngularUnitsGeoKey","getImagesForTIFF","tiff","assertEqual","expected","got","tolerance","rejector","getMinForDataType","getMaxForDataType","GeoTIFFSource","sourceInfo_","numSources","sourceImagery_","resolutionFactors_","samplesPerPixel_","nodataValues_","metadata_","normalize_","normalize","addAlpha_","readMethod_","convertToRGB","setKey","configure_","setState","tileSizes","resolutions","nodataValues","sourceCount","sourceIndex","images","sourceExtent","sourceOrigin","sourceTileSizes","sourceResolutions","imageIndex","nodataValue","getGDALNoData","getGDALMetadata","wantedSamples","bands","level","getIntersection","viewRejector","resolutionFactor","scaledSourceResolutions","sourceImagery","firstSource","nodata","additionalBands","TileGrid","loadTile_","viewResolver","toUserCoordinate","getCenter","toUserExtent","toSize","addAlpha","sourceInfo","pixelBounds","bandNumber","dataLength","sourceSamples","transparent","gain","bias","stats","sourceValue","clamp","getView","EllipsisWrapper","EllipsisTypography","Typography","whiteSpace","textOverflow","LayerName","LayerButton","StyledUl","listStyle","margin","marginTop","defaultSourcesValue","ol","useOl","React","layerConfs","setLayerConfs","setError","loading","setLoading","useForm","criteriaMode","defaultValues","control","handleSubmit","register","watch","setValue","formState","useFieldArray","fields","append","remove","watcher","removeLayer","newLayerConfs","findIndex","layerConf","setLayerError","errorType","setLayer","sourceView","sourceProjection","getCode","crs","utils","proj4","olRegister","getTileGrid","imageSource","XYZ","tileLoadFunction","imageTile","coordString","coord","setImage","tilesize","imgData","pixels","putImageData","src","toDataURL","tileListener","WebGLTile","addLayer","originExtent","transformed","transformExtent","fit","CustomGeoTIFFSource","SourceState","sourceListener","sourceState","onSubmit","bandLength","addedId","FileList","sample1","sample2","CssBaseline","Helmet","content","rel","href","Container","variant","component","Stack","my","spacing","Grid","container","xs","direction","justifyContent","alignItems","Tooltip","title","arrow","placement","Button","onClick","sx","mr","field","render","FormControl","fullWidth","RadioGroup","FormControlLabel","Radio","label","required","validate","FormHelperText","fieldState","invalid","TextField","placeholder","rules","mt","mb","Delete","Add","ml"],"sourceRoot":""}