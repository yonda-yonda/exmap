{"version":3,"file":"0867b073d2738e486cd7c9de86f5f2e7f21d6998-998d083e121cbe86c5af.js","mappings":"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","sources":["webpack://exmap/./node_modules/@mui/icons-material/FileDownload.js","webpack://exmap/./node_modules/@mui/icons-material/utils/createSvgIcon.js","webpack://exmap/./node_modules/@mui/material/FormControlLabel/formControlLabelClasses.js","webpack://exmap/./node_modules/@mui/material/FormControlLabel/FormControlLabel.js","webpack://exmap/./node_modules/@mui/material/InputAdornment/inputAdornmentClasses.js","webpack://exmap/./node_modules/@mui/material/InputAdornment/InputAdornment.js","webpack://exmap/./node_modules/@mui/material/Switch/switchClasses.js","webpack://exmap/./node_modules/@mui/material/Switch/Switch.js","webpack://exmap/./node_modules/@mui/material/internal/switchBaseClasses.js","webpack://exmap/./node_modules/@mui/material/internal/SwitchBase.js","webpack://exmap/./node_modules/@mui/material/useMediaQuery/useMediaQuery.js","webpack://exmap/./node_modules/@mui/material/utils/deprecatedPropType.js","webpack://exmap/./node_modules/@mui/utils/esm/deprecatedPropType.js","webpack://exmap/./node_modules/@mui/material/utils/requirePropFactory.js","webpack://exmap/./node_modules/@mui/utils/esm/requirePropFactory.js","webpack://exmap/./node_modules/@mui/material/utils/setRef.js","webpack://exmap/./node_modules/@mui/material/utils/unsupportedProp.js","webpack://exmap/./node_modules/@mui/utils/esm/unsupportedProp.js","webpack://exmap/./node_modules/lodash.throttle/index.js","webpack://exmap/./node_modules/ol/format/FormatType.js","webpack://exmap/./node_modules/ol/Feature.js","webpack://exmap/./node_modules/ol/geom/GeometryCollection.js","webpack://exmap/./node_modules/ol/format/Feature.js","webpack://exmap/./node_modules/ol/format/JSONFeature.js","webpack://exmap/./node_modules/ol/geom/flat/interpolate.js","webpack://exmap/./node_modules/ol/geom/LineString.js","webpack://exmap/./node_modules/ol/geom/MultiLineString.js","webpack://exmap/./node_modules/ol/geom/MultiPoint.js","webpack://exmap/./node_modules/ol/geom/MultiPolygon.js","webpack://exmap/./node_modules/ol/geom/flat/center.js","webpack://exmap/./node_modules/ol/format/GeoJSON.js","webpack://exmap/./node_modules/ol/geom/flat/length.js","webpack://exmap/./node_modules/ol/style/Image.js","webpack://exmap/./node_modules/ol/colorlike.js","webpack://exmap/./node_modules/ol/style/RegularShape.js","webpack://exmap/./node_modules/ol/style/Circle.js","webpack://exmap/./node_modules/ol/style/Fill.js","webpack://exmap/./node_modules/ol/style/Stroke.js","webpack://exmap/./node_modules/ol/style/Style.js","webpack://exmap/./node_modules/ol/layer/BaseVector.js","webpack://exmap/./node_modules/ol/render/canvas/Instruction.js","webpack://exmap/./node_modules/ol/render/VectorContext.js","webpack://exmap/./node_modules/ol/render/canvas/Builder.js","webpack://exmap/./node_modules/ol/render/canvas/ImageBuilder.js","webpack://exmap/./node_modules/ol/render/canvas/LineStringBuilder.js","webpack://exmap/./node_modules/ol/render/canvas/PolygonBuilder.js","webpack://exmap/./node_modules/ol/style/TextPlacement.js","webpack://exmap/./node_modules/ol/geom/flat/straightchunk.js","webpack://exmap/./node_modules/ol/render/canvas/TextBuilder.js","webpack://exmap/./node_modules/ol/render/canvas/BuilderGroup.js","webpack://exmap/./node_modules/ol/render/canvas/BuilderType.js","webpack://exmap/./node_modules/ol/geom/flat/textpath.js","webpack://exmap/./node_modules/ol/render/canvas/Executor.js","webpack://exmap/./node_modules/ol/render/canvas/ExecutorGroup.js","webpack://exmap/./node_modules/ol/render/canvas/Immediate.js","webpack://exmap/./node_modules/ol/style/IconAnchorUnits.js","webpack://exmap/./node_modules/ol/style/IconOrigin.js","webpack://exmap/./node_modules/ol/style/IconImage.js","webpack://exmap/./node_modules/ol/style/Icon.js","webpack://exmap/./node_modules/ol/render/canvas/hitdetect.js","webpack://exmap/./node_modules/ol/renderer/vector.js","webpack://exmap/./node_modules/ol/renderer/canvas/VectorLayer.js","webpack://exmap/./node_modules/ol/layer/Vector.js","webpack://exmap/./node_modules/ol/structs/RBush.js","webpack://exmap/./node_modules/ol/source/VectorEventType.js","webpack://exmap/./node_modules/ol/loadingstrategy.js","webpack://exmap/./node_modules/ol/featureloader.js","webpack://exmap/./node_modules/ol/source/Vector.js","webpack://exmap/./node_modules/rbush/rbush.min.js","webpack://exmap/./node_modules/react-scroll/modules/components/Button.js","webpack://exmap/./node_modules/react-scroll/modules/components/Element.js","webpack://exmap/./node_modules/react-scroll/modules/components/Link.js","webpack://exmap/./node_modules/react-scroll/modules/index.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/Helpers.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/animate-scroll.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/cancel-events.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/passive-event-listeners.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/scroll-element.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/scroll-events.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/scroll-hash.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/scroll-link.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/scroll-spy.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/scroller.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/smooth.js","webpack://exmap/./node_modules/react-scroll/modules/mixins/utils.js","webpack://exmap/./src/scripts/file.ts","webpack://exmap/./src/scripts/geojson.ts"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n}), 'FileDownload');\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _utils.createSvgIcon;\n  }\n});\n\nvar _utils = require(\"@mui/material/utils\");","import { generateUtilityClasses, generateUtilityClass } from '@mui/base';\nexport function getFormControlLabelUtilityClasses(slot) {\n  return generateUtilityClass('MuiFormControlLabel', slot);\n}\nvar formControlLabelClasses = generateUtilityClasses('MuiFormControlLabel', ['root', 'labelPlacementStart', 'labelPlacementTop', 'labelPlacementBottom', 'disabled', 'label']);\nexport default formControlLabelClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"checked\", \"className\", \"componentsProps\", \"control\", \"disabled\", \"disableTypography\", \"inputRef\", \"label\", \"labelPlacement\", \"name\", \"onChange\", \"value\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@mui/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport { useFormControl } from '../FormControl';\nimport Typography from '../Typography';\nimport capitalize from '../utils/capitalize';\nimport styled from '../styles/styled';\nimport useThemeProps from '../styles/useThemeProps';\nimport formControlLabelClasses, { getFormControlLabelUtilityClasses } from './formControlLabelClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      disabled = ownerState.disabled,\n      labelPlacement = ownerState.labelPlacement;\n  var slots = {\n    root: ['root', disabled && 'disabled', \"labelPlacement\".concat(capitalize(labelPlacement))],\n    label: ['label', disabled && 'disabled']\n  };\n  return composeClasses(slots, getFormControlLabelUtilityClasses, classes);\n};\n\nexport var FormControlLabelRoot = styled('label', {\n  name: 'MuiFormControlLabel',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [_defineProperty({}, \"& .\".concat(formControlLabelClasses.label), styles.label), styles.root, styles[\"labelPlacement\".concat(capitalize(ownerState.labelPlacement))]];\n  }\n})(function (_ref2) {\n  var theme = _ref2.theme,\n      ownerState = _ref2.ownerState;\n  return _extends(_defineProperty({\n    display: 'inline-flex',\n    alignItems: 'center',\n    cursor: 'pointer',\n    // For correct alignment with the text.\n    verticalAlign: 'middle',\n    WebkitTapHighlightColor: 'transparent',\n    marginLeft: -11,\n    marginRight: 16\n  }, \"&.\".concat(formControlLabelClasses.disabled), {\n    cursor: 'default'\n  }), ownerState.labelPlacement === 'start' && {\n    flexDirection: 'row-reverse',\n    marginLeft: 16,\n    // used for row presentation of radio/checkbox\n    marginRight: -11\n  }, ownerState.labelPlacement === 'top' && {\n    flexDirection: 'column-reverse',\n    marginLeft: 16\n  }, ownerState.labelPlacement === 'bottom' && {\n    flexDirection: 'column',\n    marginLeft: 16\n  }, _defineProperty({}, \"& .\".concat(formControlLabelClasses.label), _defineProperty({}, \"&.\".concat(formControlLabelClasses.disabled), {\n    color: theme.palette.text.disabled\n  })));\n});\n/**\n * Drop-in replacement of the `Radio`, `Switch` and `Checkbox` component.\n * Use this component if you want to display an extra label.\n */\n\nvar FormControlLabel = /*#__PURE__*/React.forwardRef(function FormControlLabel(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiFormControlLabel'\n  });\n\n  var className = props.className,\n      _props$componentsProp = props.componentsProps,\n      componentsProps = _props$componentsProp === void 0 ? {} : _props$componentsProp,\n      control = props.control,\n      disabledProp = props.disabled,\n      disableTypography = props.disableTypography,\n      label = props.label,\n      _props$labelPlacement = props.labelPlacement,\n      labelPlacement = _props$labelPlacement === void 0 ? 'end' : _props$labelPlacement,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var muiFormControl = useFormControl();\n  var disabled = disabledProp;\n\n  if (typeof disabled === 'undefined' && typeof control.props.disabled !== 'undefined') {\n    disabled = control.props.disabled;\n  }\n\n  if (typeof disabled === 'undefined' && muiFormControl) {\n    disabled = muiFormControl.disabled;\n  }\n\n  var controlProps = {\n    disabled: disabled\n  };\n  ['checked', 'name', 'onChange', 'value', 'inputRef'].forEach(function (key) {\n    if (typeof control.props[key] === 'undefined' && typeof props[key] !== 'undefined') {\n      controlProps[key] = props[key];\n    }\n  });\n\n  var ownerState = _extends({}, props, {\n    disabled: disabled,\n    label: label,\n    labelPlacement: labelPlacement\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsxs(FormControlLabelRoot, _extends({\n    className: clsx(classes.root, className),\n    ownerState: ownerState,\n    ref: ref\n  }, other, {\n    children: [/*#__PURE__*/React.cloneElement(control, controlProps), label.type === Typography || disableTypography ? label : /*#__PURE__*/_jsx(Typography, _extends({\n      component: \"span\",\n      className: classes.label\n    }, componentsProps.typography, {\n      children: label\n    }))]\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default FormControlLabel;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getInputAdornmentUtilityClass(slot) {\n  return generateUtilityClass('MuiInputAdornment', slot);\n}\nvar inputAdornmentClasses = generateUtilityClasses('MuiInputAdornment', ['root', 'filled', 'standard', 'outlined', 'positionStart', 'positionEnd', 'disablePointerEvents', 'hiddenLabel', 'sizeSmall']);\nexport default inputAdornmentClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"children\", \"className\", \"component\", \"disablePointerEvents\", \"disableTypography\", \"position\", \"variant\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport capitalize from '../utils/capitalize';\nimport Typography from '../Typography';\nimport FormControlContext from '../FormControl/FormControlContext';\nimport useFormControl from '../FormControl/useFormControl';\nimport styled from '../styles/styled';\nimport inputAdornmentClasses, { getInputAdornmentUtilityClass } from './inputAdornmentClasses';\nimport useThemeProps from '../styles/useThemeProps';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar overridesResolver = function overridesResolver(props, styles) {\n  var ownerState = props.ownerState;\n  return [styles.root, styles[\"position\".concat(capitalize(ownerState.position))], ownerState.disablePointerEvents === true && styles.disablePointerEvents, styles[ownerState.variant]];\n};\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      disablePointerEvents = ownerState.disablePointerEvents,\n      hiddenLabel = ownerState.hiddenLabel,\n      position = ownerState.position,\n      size = ownerState.size,\n      variant = ownerState.variant;\n  var slots = {\n    root: ['root', disablePointerEvents && 'disablePointerEvents', position && \"position\".concat(capitalize(position)), variant, hiddenLabel && 'hiddenLabel', size && \"size\".concat(capitalize(size))]\n  };\n  return composeClasses(slots, getInputAdornmentUtilityClass, classes);\n};\n\nvar InputAdornmentRoot = styled('div', {\n  name: 'MuiInputAdornment',\n  slot: 'Root',\n  overridesResolver: overridesResolver\n})(function (_ref) {\n  var theme = _ref.theme,\n      ownerState = _ref.ownerState;\n  return _extends({\n    display: 'flex',\n    height: '0.01em',\n    // Fix IE11 flexbox alignment. To remove at some point.\n    maxHeight: '2em',\n    alignItems: 'center',\n    whiteSpace: 'nowrap',\n    color: theme.palette.action.active\n  }, ownerState.variant === 'filled' && _defineProperty({}, \"&.\".concat(inputAdornmentClasses.positionStart, \"&:not(.\").concat(inputAdornmentClasses.hiddenLabel, \")\"), {\n    marginTop: 16\n  }), ownerState.position === 'start' && {\n    // Styles applied to the root element if `position=\"start\"`.\n    marginRight: 8\n  }, ownerState.position === 'end' && {\n    // Styles applied to the root element if `position=\"end\"`.\n    marginLeft: 8\n  }, ownerState.disablePointerEvents === true && {\n    // Styles applied to the root element if `disablePointerEvents={true}`.\n    pointerEvents: 'none'\n  });\n});\nvar InputAdornment = /*#__PURE__*/React.forwardRef(function InputAdornment(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiInputAdornment'\n  });\n\n  var children = props.children,\n      className = props.className,\n      _props$component = props.component,\n      component = _props$component === void 0 ? 'div' : _props$component,\n      _props$disablePointer = props.disablePointerEvents,\n      disablePointerEvents = _props$disablePointer === void 0 ? false : _props$disablePointer,\n      _props$disableTypogra = props.disableTypography,\n      disableTypography = _props$disableTypogra === void 0 ? false : _props$disableTypogra,\n      position = props.position,\n      variantProp = props.variant,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var muiFormControl = useFormControl() || {};\n  var variant = variantProp;\n\n  if (variantProp && muiFormControl.variant) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (variantProp === muiFormControl.variant) {\n        console.error('MUI: The `InputAdornment` variant infers the variant prop ' + 'you do not have to provide one.');\n      }\n    }\n  }\n\n  if (muiFormControl && !variant) {\n    variant = muiFormControl.variant;\n  }\n\n  var ownerState = _extends({}, props, {\n    hiddenLabel: muiFormControl.hiddenLabel,\n    size: muiFormControl.size,\n    disablePointerEvents: disablePointerEvents,\n    position: position,\n    variant: variant\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(FormControlContext.Provider, {\n    value: null,\n    children: /*#__PURE__*/_jsx(InputAdornmentRoot, _extends({\n      as: component,\n      ownerState: ownerState,\n      className: clsx(classes.root, className),\n      ref: ref\n    }, other, {\n      children: typeof children === 'string' && !disableTypography ? /*#__PURE__*/_jsx(Typography, {\n        color: \"text.secondary\",\n        children: children\n      }) : /*#__PURE__*/_jsxs(React.Fragment, {\n        children: [position === 'start' ?\n        /*#__PURE__*/\n\n        /* notranslate needed while Google Translate will not fix zero-width space issue */\n\n        /* eslint-disable-next-line react/no-danger */\n        _jsx(\"span\", {\n          className: \"notranslate\",\n          dangerouslySetInnerHTML: {\n            __html: '&#8203;'\n          }\n        }) : null, children]\n      })\n    }))\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default InputAdornment;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getSwitchUtilityClass(slot) {\n  return generateUtilityClass('MuiSwitch', slot);\n}\nvar switchClasses = generateUtilityClasses('MuiSwitch', ['root', 'edgeStart', 'edgeEnd', 'switchBase', 'colorPrimary', 'colorSecondary', 'sizeSmall', 'sizeMedium', 'checked', 'disabled', 'input', 'thumb', 'track']);\nexport default switchClasses;","import _defineProperty from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"className\", \"color\", \"edge\", \"size\", \"sx\"]; // @inheritedComponent IconButton\n\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { refType } from '@mui/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport { alpha, darken, lighten } from '@mui/system';\nimport capitalize from '../utils/capitalize';\nimport SwitchBase from '../internal/SwitchBase';\nimport useThemeProps from '../styles/useThemeProps';\nimport styled from '../styles/styled';\nimport switchClasses, { getSwitchUtilityClass } from './switchClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      edge = ownerState.edge,\n      size = ownerState.size,\n      color = ownerState.color,\n      checked = ownerState.checked,\n      disabled = ownerState.disabled;\n  var slots = {\n    root: ['root', edge && \"edge\".concat(capitalize(edge)), \"size\".concat(capitalize(size))],\n    switchBase: ['switchBase', \"color\".concat(capitalize(color)), checked && 'checked', disabled && 'disabled'],\n    thumb: ['thumb'],\n    track: ['track'],\n    input: ['input']\n  };\n  var composedClasses = composeClasses(slots, getSwitchUtilityClass, classes);\n  return _extends({}, classes, composedClasses);\n};\n\nvar SwitchRoot = styled('span', {\n  name: 'MuiSwitch',\n  slot: 'Root',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.root, ownerState.edge && styles[\"edge\".concat(capitalize(ownerState.edge))], styles[\"size\".concat(capitalize(ownerState.size))]];\n  }\n})(function (_ref) {\n  var _ref2;\n\n  var ownerState = _ref.ownerState;\n  return _extends({\n    display: 'inline-flex',\n    width: 34 + 12 * 2,\n    height: 14 + 12 * 2,\n    overflow: 'hidden',\n    padding: 12,\n    boxSizing: 'border-box',\n    position: 'relative',\n    flexShrink: 0,\n    zIndex: 0,\n    // Reset the stacking context.\n    verticalAlign: 'middle',\n    // For correct alignment with the text.\n    '@media print': {\n      colorAdjust: 'exact'\n    }\n  }, ownerState.edge === 'start' && {\n    marginLeft: -8\n  }, ownerState.edge === 'end' && {\n    marginRight: -8\n  }, ownerState.size === 'small' && (_ref2 = {\n    width: 40,\n    height: 24,\n    padding: 7\n  }, _defineProperty(_ref2, \"& .\".concat(switchClasses.thumb), {\n    width: 16,\n    height: 16\n  }), _defineProperty(_ref2, \"& .\".concat(switchClasses.switchBase), _defineProperty({\n    padding: 4\n  }, \"&.\".concat(switchClasses.checked), {\n    transform: 'translateX(16px)'\n  })), _ref2));\n});\nvar SwitchSwitchBase = styled(SwitchBase, {\n  name: 'MuiSwitch',\n  slot: 'SwitchBase',\n  overridesResolver: function overridesResolver(props, styles) {\n    var ownerState = props.ownerState;\n    return [styles.switchBase, _defineProperty({}, \"& .\".concat(switchClasses.input), styles.input), ownerState.color !== 'default' && styles[\"color\".concat(capitalize(ownerState.color))]];\n  }\n})(function (_ref4) {\n  var _ref5;\n\n  var theme = _ref4.theme;\n  return _ref5 = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    zIndex: 1,\n    // Render above the focus ripple.\n    color: theme.palette.mode === 'light' ? theme.palette.common.white : theme.palette.grey[300],\n    transition: theme.transitions.create(['left', 'transform'], {\n      duration: theme.transitions.duration.shortest\n    })\n  }, _defineProperty(_ref5, \"&.\".concat(switchClasses.checked), {\n    transform: 'translateX(20px)'\n  }), _defineProperty(_ref5, \"&.\".concat(switchClasses.disabled), {\n    color: theme.palette.mode === 'light' ? theme.palette.grey[100] : theme.palette.grey[600]\n  }), _defineProperty(_ref5, \"&.\".concat(switchClasses.checked, \" + .\").concat(switchClasses.track), {\n    opacity: 0.5\n  }), _defineProperty(_ref5, \"&.\".concat(switchClasses.disabled, \" + .\").concat(switchClasses.track), {\n    opacity: theme.palette.mode === 'light' ? 0.12 : 0.2\n  }), _defineProperty(_ref5, \"& .\".concat(switchClasses.input), {\n    left: '-100%',\n    width: '300%'\n  }), _ref5;\n}, function (_ref6) {\n  var _ref7;\n\n  var theme = _ref6.theme,\n      ownerState = _ref6.ownerState;\n  return _extends({\n    '&:hover': {\n      backgroundColor: alpha(theme.palette.action.active, theme.palette.action.hoverOpacity),\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    }\n  }, ownerState.color !== 'default' && (_ref7 = {}, _defineProperty(_ref7, \"&.\".concat(switchClasses.checked), _defineProperty({\n    color: theme.palette[ownerState.color].main,\n    '&:hover': {\n      backgroundColor: alpha(theme.palette[ownerState.color].main, theme.palette.action.hoverOpacity),\n      '@media (hover: none)': {\n        backgroundColor: 'transparent'\n      }\n    }\n  }, \"&.\".concat(switchClasses.disabled), {\n    color: theme.palette.mode === 'light' ? lighten(theme.palette[ownerState.color].main, 0.62) : darken(theme.palette[ownerState.color].main, 0.55)\n  })), _defineProperty(_ref7, \"&.\".concat(switchClasses.checked, \" + .\").concat(switchClasses.track), {\n    backgroundColor: theme.palette[ownerState.color].main\n  }), _ref7));\n});\nvar SwitchTrack = styled('span', {\n  name: 'MuiSwitch',\n  slot: 'Track',\n  overridesResolver: function overridesResolver(props, styles) {\n    return styles.track;\n  }\n})(function (_ref8) {\n  var theme = _ref8.theme;\n  return {\n    height: '100%',\n    width: '100%',\n    borderRadius: 14 / 2,\n    zIndex: -1,\n    transition: theme.transitions.create(['opacity', 'background-color'], {\n      duration: theme.transitions.duration.shortest\n    }),\n    backgroundColor: theme.palette.mode === 'light' ? theme.palette.common.black : theme.palette.common.white,\n    opacity: theme.palette.mode === 'light' ? 0.38 : 0.3\n  };\n});\nvar SwitchThumb = styled('span', {\n  name: 'MuiSwitch',\n  slot: 'Thumb',\n  overridesResolver: function overridesResolver(props, styles) {\n    return styles.thumb;\n  }\n})(function (_ref9) {\n  var theme = _ref9.theme;\n  return {\n    boxShadow: theme.shadows[1],\n    backgroundColor: 'currentColor',\n    width: 20,\n    height: 20,\n    borderRadius: '50%'\n  };\n});\nvar Switch = /*#__PURE__*/React.forwardRef(function Switch(inProps, ref) {\n  var props = useThemeProps({\n    props: inProps,\n    name: 'MuiSwitch'\n  });\n\n  var className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'primary' : _props$color,\n      _props$edge = props.edge,\n      edge = _props$edge === void 0 ? false : _props$edge,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      sx = props.sx,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var ownerState = _extends({}, props, {\n    color: color,\n    edge: edge,\n    size: size\n  });\n\n  var classes = useUtilityClasses(ownerState);\n\n  var icon = /*#__PURE__*/_jsx(SwitchThumb, {\n    className: classes.thumb,\n    ownerState: ownerState\n  });\n\n  return /*#__PURE__*/_jsxs(SwitchRoot, {\n    className: clsx(classes.root, className),\n    sx: sx,\n    ownerState: ownerState,\n    children: [/*#__PURE__*/_jsx(SwitchSwitchBase, _extends({\n      type: \"checkbox\",\n      icon: icon,\n      checkedIcon: icon,\n      ref: ref,\n      ownerState: ownerState\n    }, other, {\n      classes: _extends({}, classes, {\n        root: classes.switchBase\n      })\n    })), /*#__PURE__*/_jsx(SwitchTrack, {\n      className: classes.track,\n      ownerState: ownerState\n    })]\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default Switch;","import { generateUtilityClass, generateUtilityClasses } from '@mui/base';\nexport function getSwitchBaseUtilityClass(slot) {\n  return generateUtilityClass('PrivateSwitchBase', slot);\n}\nvar switchBaseClasses = generateUtilityClasses('PrivateSwitchBase', ['root', 'checked', 'disabled', 'input', 'edgeStart', 'edgeEnd']);\nexport default switchBaseClasses;","import _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"autoFocus\", \"checked\", \"checkedIcon\", \"className\", \"defaultChecked\", \"disabled\", \"disableFocusRipple\", \"edge\", \"icon\", \"id\", \"inputProps\", \"inputRef\", \"name\", \"onBlur\", \"onChange\", \"onFocus\", \"readOnly\", \"required\", \"tabIndex\", \"type\", \"value\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { refType } from '@mui/utils';\nimport { unstable_composeClasses as composeClasses } from '@mui/base';\nimport capitalize from '../utils/capitalize';\nimport styled from '../styles/styled';\nimport useControlled from '../utils/useControlled';\nimport useFormControl from '../FormControl/useFormControl';\nimport ButtonBase from '../ButtonBase';\nimport { getSwitchBaseUtilityClass } from './switchBaseClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar useUtilityClasses = function useUtilityClasses(ownerState) {\n  var classes = ownerState.classes,\n      checked = ownerState.checked,\n      disabled = ownerState.disabled,\n      edge = ownerState.edge;\n  var slots = {\n    root: ['root', checked && 'checked', disabled && 'disabled', edge && \"edge\".concat(capitalize(edge))],\n    input: ['input']\n  };\n  return composeClasses(slots, getSwitchBaseUtilityClass, classes);\n};\n\nvar SwitchBaseRoot = styled(ButtonBase, {\n  skipSx: true\n})(function (_ref) {\n  var ownerState = _ref.ownerState;\n  return _extends({\n    padding: 9,\n    borderRadius: '50%'\n  }, ownerState.edge === 'start' && {\n    marginLeft: ownerState.size === 'small' ? -3 : -12\n  }, ownerState.edge === 'end' && {\n    marginRight: ownerState.size === 'small' ? -3 : -12\n  });\n});\nvar SwitchBaseInput = styled('input', {\n  skipSx: true\n})({\n  cursor: 'inherit',\n  position: 'absolute',\n  opacity: 0,\n  width: '100%',\n  height: '100%',\n  top: 0,\n  left: 0,\n  margin: 0,\n  padding: 0,\n  zIndex: 1\n});\n/**\n * @ignore - internal component.\n */\n\nvar SwitchBase = /*#__PURE__*/React.forwardRef(function SwitchBase(props, ref) {\n  var autoFocus = props.autoFocus,\n      checkedProp = props.checked,\n      checkedIcon = props.checkedIcon,\n      className = props.className,\n      defaultChecked = props.defaultChecked,\n      disabledProp = props.disabled,\n      _props$disableFocusRi = props.disableFocusRipple,\n      disableFocusRipple = _props$disableFocusRi === void 0 ? false : _props$disableFocusRi,\n      _props$edge = props.edge,\n      edge = _props$edge === void 0 ? false : _props$edge,\n      icon = props.icon,\n      id = props.id,\n      inputProps = props.inputProps,\n      inputRef = props.inputRef,\n      name = props.name,\n      onBlur = props.onBlur,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      readOnly = props.readOnly,\n      required = props.required,\n      tabIndex = props.tabIndex,\n      type = props.type,\n      value = props.value,\n      other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  var _useControlled = useControlled({\n    controlled: checkedProp,\n    default: Boolean(defaultChecked),\n    name: 'SwitchBase',\n    state: 'checked'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      checked = _useControlled2[0],\n      setCheckedState = _useControlled2[1];\n\n  var muiFormControl = useFormControl();\n\n  var handleFocus = function handleFocus(event) {\n    if (onFocus) {\n      onFocus(event);\n    }\n\n    if (muiFormControl && muiFormControl.onFocus) {\n      muiFormControl.onFocus(event);\n    }\n  };\n\n  var handleBlur = function handleBlur(event) {\n    if (onBlur) {\n      onBlur(event);\n    }\n\n    if (muiFormControl && muiFormControl.onBlur) {\n      muiFormControl.onBlur(event);\n    }\n  };\n\n  var handleInputChange = function handleInputChange(event) {\n    // Workaround for https://github.com/facebook/react/issues/9023\n    if (event.nativeEvent.defaultPrevented) {\n      return;\n    }\n\n    var newChecked = event.target.checked;\n    setCheckedState(newChecked);\n\n    if (onChange) {\n      // TODO v6: remove the second argument.\n      onChange(event, newChecked);\n    }\n  };\n\n  var disabled = disabledProp;\n\n  if (muiFormControl) {\n    if (typeof disabled === 'undefined') {\n      disabled = muiFormControl.disabled;\n    }\n  }\n\n  var hasLabelFor = type === 'checkbox' || type === 'radio';\n\n  var ownerState = _extends({}, props, {\n    checked: checked,\n    disabled: disabled,\n    disableFocusRipple: disableFocusRipple,\n    edge: edge\n  });\n\n  var classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsxs(SwitchBaseRoot, _extends({\n    component: \"span\",\n    className: clsx(classes.root, className),\n    centerRipple: true,\n    focusRipple: !disableFocusRipple,\n    disabled: disabled,\n    tabIndex: null,\n    role: undefined,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    ownerState: ownerState,\n    ref: ref\n  }, other, {\n    children: [/*#__PURE__*/_jsx(SwitchBaseInput, _extends({\n      autoFocus: autoFocus,\n      checked: checkedProp,\n      defaultChecked: defaultChecked,\n      className: classes.input,\n      disabled: disabled,\n      id: hasLabelFor && id,\n      name: name,\n      onChange: handleInputChange,\n      readOnly: readOnly,\n      ref: inputRef,\n      required: required,\n      ownerState: ownerState,\n      tabIndex: tabIndex,\n      type: type\n    }, type === 'checkbox' && value === undefined ? {} : {\n      value: value\n    }, inputProps)), checked ? checkedIcon : icon]\n  }));\n}); // NB: If changed, please update Checkbox, Switch and Radio\n// so that the API documentation is updated.\n\nprocess.env.NODE_ENV !== \"production\" ? SwitchBase.propTypes = {\n  /**\n   * If `true`, the `input` element is focused during the first mount.\n   */\n  autoFocus: PropTypes.bool,\n\n  /**\n   * If `true`, the component is checked.\n   */\n  checked: PropTypes.bool,\n\n  /**\n   * The icon to display when the component is checked.\n   */\n  checkedIcon: PropTypes.node.isRequired,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * @ignore\n   */\n  defaultChecked: PropTypes.bool,\n\n  /**\n   * If `true`, the component is disabled.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * If `true`, the  keyboard focus ripple is disabled.\n   * @default false\n   */\n  disableFocusRipple: PropTypes.bool,\n\n  /**\n   * If given, uses a negative margin to counteract the padding on one\n   * side (this is often helpful for aligning the left or right\n   * side of the icon with content above or below, without ruining the border\n   * size and shape).\n   * @default false\n   */\n  edge: PropTypes.oneOf(['end', 'start', false]),\n\n  /**\n   * The icon to display when the component is unchecked.\n   */\n  icon: PropTypes.node.isRequired,\n\n  /**\n   * The id of the `input` element.\n   */\n  id: PropTypes.string,\n\n  /**\n   * [Attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#Attributes) applied to the `input` element.\n   */\n  inputProps: PropTypes.object,\n\n  /**\n   * Pass a ref to the `input` element.\n   */\n  inputRef: refType,\n\n  /*\n   * @ignore\n   */\n  name: PropTypes.string,\n\n  /**\n   * @ignore\n   */\n  onBlur: PropTypes.func,\n\n  /**\n   * Callback fired when the state is changed.\n   *\n   * @param {object} event The event source of the callback.\n   * You can pull out the new checked state by accessing `event.target.checked` (boolean).\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onFocus: PropTypes.func,\n\n  /**\n   * It prevents the user from changing the value of the field\n   * (not from interacting with the field).\n   */\n  readOnly: PropTypes.bool,\n\n  /**\n   * If `true`, the `input` element is required.\n   */\n  required: PropTypes.bool,\n\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  tabIndex: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /**\n   * The input component prop `type`.\n   */\n  type: PropTypes.string.isRequired,\n\n  /**\n   * The value of the component.\n   */\n  value: PropTypes.any\n} : void 0;\nexport default SwitchBase;","import _slicedToArray from \"/Users/k-yoda/work/sandbox/exmap/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport * as React from 'react';\nimport { getThemeProps, useThemeWithoutDefault as useTheme } from '@mui/system';\nimport useEnhancedEffect from '../utils/useEnhancedEffect';\n/**\n * @deprecated Not used internally. Use `MediaQueryListEvent` from lib.dom.d.ts instead.\n */\n\nexport default function useMediaQuery(queryInput) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var theme = useTheme(); // Wait for jsdom to support the match media feature.\n  // All the browsers MUI support have this built-in.\n  // This defensive check is here for simplicity.\n  // Most of the time, the match media logic isn't central to people tests.\n\n  var supportMatchMedia = typeof window !== 'undefined' && typeof window.matchMedia !== 'undefined';\n\n  var _getThemeProps = getThemeProps({\n    name: 'MuiUseMediaQuery',\n    props: options,\n    theme: theme\n  }),\n      _getThemeProps$defaul = _getThemeProps.defaultMatches,\n      defaultMatches = _getThemeProps$defaul === void 0 ? false : _getThemeProps$defaul,\n      _getThemeProps$matchM = _getThemeProps.matchMedia,\n      matchMedia = _getThemeProps$matchM === void 0 ? supportMatchMedia ? window.matchMedia : null : _getThemeProps$matchM,\n      _getThemeProps$noSsr = _getThemeProps.noSsr,\n      noSsr = _getThemeProps$noSsr === void 0 ? false : _getThemeProps$noSsr,\n      _getThemeProps$ssrMat = _getThemeProps.ssrMatchMedia,\n      ssrMatchMedia = _getThemeProps$ssrMat === void 0 ? null : _getThemeProps$ssrMat;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof queryInput === 'function' && theme === null) {\n      console.error(['MUI: The `query` argument provided is invalid.', 'You are providing a function without a theme in the context.', 'One of the parent elements needs to use a ThemeProvider.'].join('\\n'));\n    }\n  }\n\n  var query = typeof queryInput === 'function' ? queryInput(theme) : queryInput;\n  query = query.replace(/^@media( ?)/m, '');\n\n  var _React$useState = React.useState(function () {\n    if (noSsr && supportMatchMedia) {\n      return matchMedia(query).matches;\n    }\n\n    if (ssrMatchMedia) {\n      return ssrMatchMedia(query).matches;\n    } // Once the component is mounted, we rely on the\n    // event listeners to return the correct matches value.\n\n\n    // Once the component is mounted, we rely on the\n    // event listeners to return the correct matches value.\n    return defaultMatches;\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      match = _React$useState2[0],\n      setMatch = _React$useState2[1];\n\n  useEnhancedEffect(function () {\n    var active = true;\n\n    if (!supportMatchMedia) {\n      return undefined;\n    }\n\n    var queryList = matchMedia(query);\n\n    var updateMatch = function updateMatch() {\n      // Workaround Safari wrong implementation of matchMedia\n      // TODO can we remove it?\n      // https://github.com/mui-org/material-ui/pull/17315#issuecomment-528286677\n      if (active) {\n        setMatch(queryList.matches);\n      }\n    };\n\n    updateMatch();\n    queryList.addListener(updateMatch);\n    return function () {\n      active = false;\n      queryList.removeListener(updateMatch);\n    };\n  }, [query, matchMedia, supportMatchMedia]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useDebugValue({\n      query: query,\n      match: match\n    });\n  }\n\n  return match;\n}","import { unstable_deprecatedPropType as deprecatedPropType } from '@mui/utils';\nexport default deprecatedPropType;","export default function deprecatedPropType(validator, reason) {\n  if (process.env.NODE_ENV === 'production') {\n    return function () {\n      return null;\n    };\n  }\n\n  return function (props, propName, componentName, location, propFullName) {\n    var componentNameSafe = componentName || '<<anonymous>>';\n    var propFullNameSafe = propFullName || propName;\n\n    if (typeof props[propName] !== 'undefined') {\n      return new Error(\"The \".concat(location, \" `\").concat(propFullNameSafe, \"` of \") + \"`\".concat(componentNameSafe, \"` is deprecated. \").concat(reason));\n    }\n\n    return null;\n  };\n}","import { unstable_requirePropFactory as requirePropFactory } from '@mui/utils';\nexport default requirePropFactory;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nexport default function requirePropFactory(componentNameInError, Component) {\n  if (process.env.NODE_ENV === 'production') {\n    return function () {\n      return null;\n    };\n  } // eslint-disable-next-line react/forbid-foreign-prop-types\n\n\n  var prevPropTypes = Component ? _extends({}, Component.propTypes) : null;\n\n  var requireProp = function requireProp(requiredProp) {\n    return function (props, propName, componentName, location, propFullName) {\n      var propFullNameSafe = propFullName || propName;\n      var defaultTypeChecker = prevPropTypes == null ? void 0 : prevPropTypes[propFullNameSafe];\n\n      if (defaultTypeChecker) {\n        for (var _len = arguments.length, args = new Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n          args[_key - 5] = arguments[_key];\n        }\n\n        var typeCheckerResult = defaultTypeChecker.apply(void 0, [props, propName, componentName, location, propFullName].concat(args));\n\n        if (typeCheckerResult) {\n          return typeCheckerResult;\n        }\n      }\n\n      if (typeof props[propName] !== 'undefined' && !props[requiredProp]) {\n        return new Error(\"The prop `\".concat(propFullNameSafe, \"` of \") + \"`\".concat(componentNameInError, \"` can only be used together with the `\").concat(requiredProp, \"` prop.\"));\n      }\n\n      return null;\n    };\n  };\n\n  return requireProp;\n}","import { unstable_setRef as setRef } from '@mui/utils';\nexport default setRef;","import { unstable_unsupportedProp as unsupportedProp } from '@mui/utils';\nexport default unsupportedProp;","export default function unsupportedProp(props, propName, componentName, location, propFullName) {\n  if (process.env.NODE_ENV === 'production') {\n    return null;\n  }\n\n  var propFullNameSafe = propFullName || propName;\n\n  if (typeof props[propName] !== 'undefined') {\n    return new Error(\"The prop `\".concat(propFullNameSafe, \"` is not supported. Please remove it.\"));\n  }\n\n  return null;\n}","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n/** Used as references for various `Number` constants. */\n\nvar NAN = 0 / 0;\n/** `Object#toString` result references. */\n\nvar symbolTag = '[object Symbol]';\n/** Used to match leading and trailing whitespace. */\n\nvar reTrim = /^\\s+|\\s+$/g;\n/** Used to detect bad signed hexadecimal string values. */\n\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n/** Used to detect binary string values. */\n\nvar reIsBinary = /^0b[01]+$/i;\n/** Used to detect octal string values. */\n\nvar reIsOctal = /^0o[0-7]+$/i;\n/** Built-in method references without a dependency on `root`. */\n\nvar freeParseInt = parseInt;\n/** Detect free variable `global` from Node.js. */\n\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n/** Detect free variable `self`. */\n\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n/** Used as a reference to the global object. */\n\nvar root = freeGlobal || freeSelf || Function('return this')();\n/** Used for built-in method references. */\n\nvar objectProto = Object.prototype;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar objectToString = objectProto.toString;\n/* Built-in method references for those with the same name as other `lodash` methods. */\n\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\n\nvar now = function now() {\n  return root.Date.now();\n};\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\n\n\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  wait = toNumber(wait) || 0;\n\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time; // Start the timer for the trailing edge.\n\n    timerId = setTimeout(timerExpired, wait); // Invoke the leading edge.\n\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime; // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n\n    return lastCallTime === undefined || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n  }\n\n  function timerExpired() {\n    var time = now();\n\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    } // Restart the timer.\n\n\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined; // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n\n    return result;\n  }\n\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\n\n\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\n\n\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\n\n\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\n\n\nfunction isSymbol(value) {\n  return typeof value == 'symbol' || isObjectLike(value) && objectToString.call(value) == symbolTag;\n}\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\n\n\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n\n  if (isSymbol(value)) {\n    return NAN;\n  }\n\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? other + '' : other;\n  }\n\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n}\n\nmodule.exports = throttle;","/**\n * @module ol/format/FormatType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ARRAY_BUFFER: 'arraybuffer',\n  JSON: 'json',\n  TEXT: 'text',\n  XML: 'xml'\n};","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/Feature\n */\n\n\nimport BaseObject from './Object.js';\nimport EventType from './events/EventType.js';\nimport { assert } from './asserts.js';\nimport { listen, unlistenByKey } from './events.js';\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<import(\"./ObjectEventType\").Types|'change:geometry', import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|import(\"./ObjectEventType\").Types\n *     |'change:geometry', Return>} FeatureOnSignature\n */\n\n/***\n * @template Geometry\n * @typedef {Object<string, *> & { geometry?: Geometry }} ObjectWithGeometry\n */\n\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object~BaseObject} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n * @template {import(\"./geom/Geometry.js\").default} [Geometry=import(\"./geom/Geometry.js\").default]\n */\n\nvar Feature =\n/** @class */\nfunction (_super) {\n  __extends(Feature, _super);\n  /**\n   * @param {Geometry|ObjectWithGeometry<Geometry>} [opt_geometryOrProperties]\n   *     You may pass a Geometry object directly, or an object literal containing\n   *     properties. If you pass an object literal, you may include a Geometry\n   *     associated with a `geometry` key.\n   */\n\n\n  function Feature(opt_geometryOrProperties) {\n    var _this = _super.call(this) || this;\n    /***\n     * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n     */\n\n\n    _this.on;\n    /***\n     * @type {FeatureOnSignature<import(\"./events\").EventsKey>}\n     */\n\n    _this.once;\n    /***\n     * @type {FeatureOnSignature<void>}\n     */\n\n    _this.un;\n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n\n    _this.id_ = undefined;\n    /**\n     * @type {string}\n     * @private\n     */\n\n    _this.geometryName_ = 'geometry';\n    /**\n     * User provided style.\n     * @private\n     * @type {import(\"./style/Style.js\").StyleLike}\n     */\n\n    _this.style_ = null;\n    /**\n     * @private\n     * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n     */\n\n    _this.styleFunction_ = undefined;\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n\n    _this.geometryChangeKey_ = null;\n\n    _this.addChangeListener(_this.geometryName_, _this.handleGeometryChanged_);\n\n    if (opt_geometryOrProperties) {\n      if (typeof\n      /** @type {?} */\n      opt_geometryOrProperties.getSimplifiedGeometry === 'function') {\n        var geometry =\n        /** @type {Geometry} */\n        opt_geometryOrProperties;\n\n        _this.setGeometry(geometry);\n      } else {\n        /** @type {Object<string, *>} */\n        var properties = opt_geometryOrProperties;\n\n        _this.setProperties(properties);\n      }\n    }\n\n    return _this;\n  }\n  /**\n   * Clone this feature. If the original feature has a geometry it\n   * is also cloned. The feature id is not set in the clone.\n   * @return {Feature<Geometry>} The clone.\n   * @api\n   */\n\n\n  Feature.prototype.clone = function () {\n    var clone =\n    /** @type {Feature<Geometry>} */\n    new Feature(this.hasProperties() ? this.getProperties() : null);\n    clone.setGeometryName(this.getGeometryName());\n    var geometry = this.getGeometry();\n\n    if (geometry) {\n      clone.setGeometry(\n      /** @type {Geometry} */\n      geometry.clone());\n    }\n\n    var style = this.getStyle();\n\n    if (style) {\n      clone.setStyle(style);\n    }\n\n    return clone;\n  };\n  /**\n   * Get the feature's default geometry.  A feature may have any number of named\n   * geometries.  The \"default\" geometry (the one that is rendered by default) is\n   * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n   * @return {Geometry|undefined} The default geometry for the feature.\n   * @api\n   * @observable\n   */\n\n\n  Feature.prototype.getGeometry = function () {\n    return (\n      /** @type {Geometry|undefined} */\n      this.get(this.geometryName_)\n    );\n  };\n  /**\n   * Get the feature identifier.  This is a stable identifier for the feature and\n   * is either set when reading data from a remote source or set explicitly by\n   * calling {@link module:ol/Feature~Feature#setId}.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n\n\n  Feature.prototype.getId = function () {\n    return this.id_;\n  };\n  /**\n   * Get the name of the feature's default geometry.  By default, the default\n   * geometry is named `geometry`.\n   * @return {string} Get the property name associated with the default geometry\n   *     for this feature.\n   * @api\n   */\n\n\n  Feature.prototype.getGeometryName = function () {\n    return this.geometryName_;\n  };\n  /**\n   * Get the feature's style. Will return what was provided to the\n   * {@link module:ol/Feature~Feature#setStyle} method.\n   * @return {import(\"./style/Style.js\").StyleLike|undefined} The feature style.\n   * @api\n   */\n\n\n  Feature.prototype.getStyle = function () {\n    return this.style_;\n  };\n  /**\n   * Get the feature's style function.\n   * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n   * representing the current style of this feature.\n   * @api\n   */\n\n\n  Feature.prototype.getStyleFunction = function () {\n    return this.styleFunction_;\n  };\n  /**\n   * @private\n   */\n\n\n  Feature.prototype.handleGeometryChange_ = function () {\n    this.changed();\n  };\n  /**\n   * @private\n   */\n\n\n  Feature.prototype.handleGeometryChanged_ = function () {\n    if (this.geometryChangeKey_) {\n      unlistenByKey(this.geometryChangeKey_);\n      this.geometryChangeKey_ = null;\n    }\n\n    var geometry = this.getGeometry();\n\n    if (geometry) {\n      this.geometryChangeKey_ = listen(geometry, EventType.CHANGE, this.handleGeometryChange_, this);\n    }\n\n    this.changed();\n  };\n  /**\n   * Set the default geometry for the feature.  This will update the property\n   * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n   * @param {Geometry|undefined} geometry The new geometry.\n   * @api\n   * @observable\n   */\n\n\n  Feature.prototype.setGeometry = function (geometry) {\n    this.set(this.geometryName_, geometry);\n  };\n  /**\n   * Set the style for the feature to override the layer style.  This can be a\n   * single style object, an array of styles, or a function that takes a\n   * resolution and returns an array of styles. To unset the feature style, call\n   * `setStyle()` without arguments or a falsey value.\n   * @param {import(\"./style/Style.js\").StyleLike} [opt_style] Style for this feature.\n   * @api\n   * @fires module:ol/events/Event~BaseEvent#event:change\n   */\n\n\n  Feature.prototype.setStyle = function (opt_style) {\n    this.style_ = opt_style;\n    this.styleFunction_ = !opt_style ? undefined : createStyleFunction(opt_style);\n    this.changed();\n  };\n  /**\n   * Set the feature id.  The feature id is considered stable and may be used when\n   * requesting features or comparing identifiers returned from a remote source.\n   * The feature id can be used with the\n   * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n   * @param {number|string|undefined} id The feature id.\n   * @api\n   * @fires module:ol/events/Event~BaseEvent#event:change\n   */\n\n\n  Feature.prototype.setId = function (id) {\n    this.id_ = id;\n    this.changed();\n  };\n  /**\n   * Set the property name to be used when getting the feature's default geometry.\n   * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n   * this name will be returned.\n   * @param {string} name The property name of the default geometry.\n   * @api\n   */\n\n\n  Feature.prototype.setGeometryName = function (name) {\n    this.removeChangeListener(this.geometryName_, this.handleGeometryChanged_);\n    this.geometryName_ = name;\n    this.addChangeListener(this.geometryName_, this.handleGeometryChanged_);\n    this.handleGeometryChanged_();\n  };\n\n  return Feature;\n}(BaseObject);\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\n\n\nexport function createStyleFunction(obj) {\n  if (typeof obj === 'function') {\n    return obj;\n  } else {\n    /**\n     * @type {Array<import(\"./style/Style.js\").default>}\n     */\n    var styles_1;\n\n    if (Array.isArray(obj)) {\n      styles_1 = obj;\n    } else {\n      assert(typeof\n      /** @type {?} */\n      obj.getZIndex === 'function', 41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n\n      var style =\n      /** @type {import(\"./style/Style.js\").default} */\n      obj;\n      styles_1 = [style];\n    }\n\n    return function () {\n      return styles_1;\n    };\n  }\n}\nexport default Feature;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/geom/GeometryCollection\n */\n\n\nimport EventType from '../events/EventType.js';\nimport Geometry from './Geometry.js';\nimport GeometryType from './GeometryType.js';\nimport { closestSquaredDistanceXY, createOrUpdateEmpty, extend, getCenter } from '../extent.js';\nimport { listen, unlistenByKey } from '../events.js';\n/**\n * @classdesc\n * An array of {@link module:ol/geom/Geometry~Geometry} objects.\n *\n * @api\n */\n\nvar GeometryCollection =\n/** @class */\nfunction (_super) {\n  __extends(GeometryCollection, _super);\n  /**\n   * @param {Array<Geometry>} [opt_geometries] Geometries.\n   */\n\n\n  function GeometryCollection(opt_geometries) {\n    var _this = _super.call(this) || this;\n    /**\n     * @private\n     * @type {Array<Geometry>}\n     */\n\n\n    _this.geometries_ = opt_geometries ? opt_geometries : null;\n    /**\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n\n    _this.changeEventsKeys_ = [];\n\n    _this.listenGeometriesChange_();\n\n    return _this;\n  }\n  /**\n   * @private\n   */\n\n\n  GeometryCollection.prototype.unlistenGeometriesChange_ = function () {\n    this.changeEventsKeys_.forEach(unlistenByKey);\n    this.changeEventsKeys_.length = 0;\n  };\n  /**\n   * @private\n   */\n\n\n  GeometryCollection.prototype.listenGeometriesChange_ = function () {\n    if (!this.geometries_) {\n      return;\n    }\n\n    for (var i = 0, ii = this.geometries_.length; i < ii; ++i) {\n      this.changeEventsKeys_.push(listen(this.geometries_[i], EventType.CHANGE, this.changed, this));\n    }\n  };\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!GeometryCollection} Clone.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.clone = function () {\n    var geometryCollection = new GeometryCollection(null);\n    geometryCollection.setGeometries(this.geometries_);\n    geometryCollection.applyProperties(this);\n    return geometryCollection;\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n\n\n  GeometryCollection.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      minSquaredDistance = geometries[i].closestPointXY(x, y, closestPoint, minSquaredDistance);\n    }\n\n    return minSquaredDistance;\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @return {boolean} Contains (x, y).\n   */\n\n\n  GeometryCollection.prototype.containsXY = function (x, y) {\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].containsXY(x, y)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @protected\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   */\n\n\n  GeometryCollection.prototype.computeExtent = function (extent) {\n    createOrUpdateEmpty(extent);\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      extend(extent, geometries[i].getExtent());\n    }\n\n    return extent;\n  };\n  /**\n   * Return the geometries that make up this geometry collection.\n   * @return {Array<Geometry>} Geometries.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.getGeometries = function () {\n    return cloneGeometries(this.geometries_);\n  };\n  /**\n   * @return {Array<Geometry>} Geometries.\n   */\n\n\n  GeometryCollection.prototype.getGeometriesArray = function () {\n    return this.geometries_;\n  };\n  /**\n   * @return {Array<Geometry>} Geometries.\n   */\n\n\n  GeometryCollection.prototype.getGeometriesArrayRecursive = function () {\n    /** @type {Array<Geometry>} */\n    var geometriesArray = [];\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].getType() === this.getType()) {\n        geometriesArray = geometriesArray.concat(\n        /** @type {GeometryCollection} */\n        geometries[i].getGeometriesArrayRecursive());\n      } else {\n        geometriesArray.push(geometries[i]);\n      }\n    }\n\n    return geometriesArray;\n  };\n  /**\n   * Create a simplified version of this geometry using the Douglas Peucker algorithm.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {GeometryCollection} Simplified GeometryCollection.\n   */\n\n\n  GeometryCollection.prototype.getSimplifiedGeometry = function (squaredTolerance) {\n    if (this.simplifiedGeometryRevision !== this.getRevision()) {\n      this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n      this.simplifiedGeometryRevision = this.getRevision();\n    }\n\n    if (squaredTolerance < 0 || this.simplifiedGeometryMaxMinSquaredTolerance !== 0 && squaredTolerance < this.simplifiedGeometryMaxMinSquaredTolerance) {\n      return this;\n    }\n\n    var simplifiedGeometries = [];\n    var geometries = this.geometries_;\n    var simplified = false;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      var geometry = geometries[i];\n      var simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n      simplifiedGeometries.push(simplifiedGeometry);\n\n      if (simplifiedGeometry !== geometry) {\n        simplified = true;\n      }\n    }\n\n    if (simplified) {\n      var simplifiedGeometryCollection = new GeometryCollection(null);\n      simplifiedGeometryCollection.setGeometriesArray(simplifiedGeometries);\n      return simplifiedGeometryCollection;\n    } else {\n      this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n      return this;\n    }\n  };\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./GeometryType.js\").default} Geometry type.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.getType = function () {\n    return GeometryType.GEOMETRY_COLLECTION;\n  };\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.intersectsExtent = function (extent) {\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].intersectsExtent(extent)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n  /**\n   * @return {boolean} Is empty.\n   */\n\n\n  GeometryCollection.prototype.isEmpty = function () {\n    return this.geometries_.length === 0;\n  };\n  /**\n   * Rotate the geometry around a given coordinate. This modifies the geometry\n   * coordinates in place.\n   * @param {number} angle Rotation angle in radians.\n   * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.rotate = function (angle, anchor) {\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].rotate(angle, anchor);\n    }\n\n    this.changed();\n  };\n  /**\n   * Scale the geometry (with an optional origin).  This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} sx The scaling factor in the x-direction.\n   * @param {number} [opt_sy] The scaling factor in the y-direction (defaults to sx).\n   * @param {import(\"../coordinate.js\").Coordinate} [opt_anchor] The scale origin (defaults to the center\n   *     of the geometry extent).\n   * @api\n   */\n\n\n  GeometryCollection.prototype.scale = function (sx, opt_sy, opt_anchor) {\n    var anchor = opt_anchor;\n\n    if (!anchor) {\n      anchor = getCenter(this.getExtent());\n    }\n\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].scale(sx, opt_sy, anchor);\n    }\n\n    this.changed();\n  };\n  /**\n   * Set the geometries that make up this geometry collection.\n   * @param {Array<Geometry>} geometries Geometries.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.setGeometries = function (geometries) {\n    this.setGeometriesArray(cloneGeometries(geometries));\n  };\n  /**\n   * @param {Array<Geometry>} geometries Geometries.\n   */\n\n\n  GeometryCollection.prototype.setGeometriesArray = function (geometries) {\n    this.unlistenGeometriesChange_();\n    this.geometries_ = geometries;\n    this.listenGeometriesChange_();\n    this.changed();\n  };\n  /**\n   * Apply a transform function to the coordinates of the geometry.\n   * The geometry is modified in place.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   * @param {import(\"../proj.js\").TransformFunction} transformFn Transform function.\n   * Called with a flat array of geometry coordinates.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.applyTransform = function (transformFn) {\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].applyTransform(transformFn);\n    }\n\n    this.changed();\n  };\n  /**\n   * Translate the geometry.  This modifies the geometry coordinates in place.  If\n   * instead you want a new geometry, first `clone()` this geometry.\n   * @param {number} deltaX Delta X.\n   * @param {number} deltaY Delta Y.\n   * @api\n   */\n\n\n  GeometryCollection.prototype.translate = function (deltaX, deltaY) {\n    var geometries = this.geometries_;\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].translate(deltaX, deltaY);\n    }\n\n    this.changed();\n  };\n  /**\n   * Clean up.\n   */\n\n\n  GeometryCollection.prototype.disposeInternal = function () {\n    this.unlistenGeometriesChange_();\n\n    _super.prototype.disposeInternal.call(this);\n  };\n\n  return GeometryCollection;\n}(Geometry);\n/**\n * @param {Array<Geometry>} geometries Geometries.\n * @return {Array<Geometry>} Cloned geometries.\n */\n\n\nfunction cloneGeometries(geometries) {\n  var clonedGeometries = [];\n\n  for (var i = 0, ii = geometries.length; i < ii; ++i) {\n    clonedGeometries.push(geometries[i].clone());\n  }\n\n  return clonedGeometries;\n}\n\nexport default GeometryCollection;","/**\n * @module ol/format/Feature\n */\nimport Units from '../proj/Units.js';\nimport { abstract } from '../util.js';\nimport { assign } from '../obj.js';\nimport { equivalent as equivalentProjection, get as getProjection, transformExtent } from '../proj.js';\n/**\n * @typedef {Object} ReadOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are reading.\n * If not provided, the projection will be derived from the data (where possible) or\n * the `dataProjection` of the format is assigned (where set). If the projection\n * can not be derived from the data and if no `dataProjection` is set for a format,\n * the features will not be reprojected.\n * @property {import(\"../extent.js\").Extent} [extent] Tile extent in map units of the tile being read.\n * This is only required when reading data with tile pixels as geometry units. When configured,\n * a `dataProjection` with `TILE_PIXELS` as `units` and the tile's pixel extent as `extent` needs to be\n * provided.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * created by the format reader. If not provided, features will be returned in the\n * `dataProjection`.\n */\n\n/**\n * @typedef {Object} WriteOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are writing.\n * If not provided, the `dataProjection` of the format is assigned (where set).\n * If no `dataProjection` is set for a format, the features will be returned\n * in the `featureProjection`.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * that will be serialized by the format writer. If not provided, geometries are assumed\n * to be in the `dataProjection` if that is set; in other words, they are not transformed.\n * @property {boolean} [rightHanded] When writing geometries, follow the right-hand\n * rule for linear ring orientation.  This means that polygons will have counter-clockwise\n * exterior rings and clockwise interior rings.  By default, coordinates are serialized\n * as they are provided at construction.  If `true`, the right-hand rule will\n * be applied.  If `false`, the left-hand rule will be applied (clockwise for\n * exterior and counter-clockwise for interior rings).  Note that not all\n * formats support this.  The GeoJSON format does use this property when writing\n * geometries.\n * @property {number} [decimals] Maximum number of decimal places for coordinates.\n * Coordinates are stored internally as floats, but floating-point arithmetic can create\n * coordinates with a large number of decimal places, not generally wanted on output.\n * Set a number here to round coordinates. Can also be used to ensure that\n * coordinates read in can be written back out with the same number of decimals.\n * Default is no rounding.\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for feature formats.\n * {@link module:ol/format/Feature~FeatureFormat} subclasses provide the ability to decode and encode\n * {@link module:ol/Feature~Feature} objects from a variety of commonly used geospatial\n * file formats.  See the documentation for each format for more details.\n *\n * @abstract\n * @api\n */\n\nvar FeatureFormat =\n/** @class */\nfunction () {\n  function FeatureFormat() {\n    /**\n     * @protected\n     * @type {import(\"../proj/Projection.js\").default|undefined}\n     */\n    this.dataProjection = undefined;\n    /**\n     * @protected\n     * @type {import(\"../proj/Projection.js\").default|undefined}\n     */\n\n    this.defaultFeatureProjection = undefined;\n    /**\n     * A list media types supported by the format in descending order of preference.\n     * @type {Array<string>}\n     */\n\n    this.supportedMediaTypes = null;\n  }\n  /**\n   * Adds the data projection to the read options.\n   * @param {Document|Element|Object|string} source Source.\n   * @param {ReadOptions} [opt_options] Options.\n   * @return {ReadOptions|undefined} Options.\n   * @protected\n   */\n\n\n  FeatureFormat.prototype.getReadOptions = function (source, opt_options) {\n    var options;\n\n    if (opt_options) {\n      var dataProjection = opt_options.dataProjection ? getProjection(opt_options.dataProjection) : this.readProjection(source);\n\n      if (opt_options.extent && dataProjection && dataProjection.getUnits() === Units.TILE_PIXELS) {\n        dataProjection = getProjection(dataProjection);\n        dataProjection.setWorldExtent(opt_options.extent);\n      }\n\n      options = {\n        dataProjection: dataProjection,\n        featureProjection: opt_options.featureProjection\n      };\n    }\n\n    return this.adaptOptions(options);\n  };\n  /**\n   * Sets the `dataProjection` on the options, if no `dataProjection`\n   * is set.\n   * @param {WriteOptions|ReadOptions|undefined} options\n   *     Options.\n   * @protected\n   * @return {WriteOptions|ReadOptions|undefined}\n   *     Updated options.\n   */\n\n\n  FeatureFormat.prototype.adaptOptions = function (options) {\n    return assign({\n      dataProjection: this.dataProjection,\n      featureProjection: this.defaultFeatureProjection\n    }, options);\n  };\n  /**\n   * @abstract\n   * @return {import(\"./FormatType.js\").default} Format.\n   */\n\n\n  FeatureFormat.prototype.getType = function () {\n    return abstract();\n  };\n  /**\n   * Read a single feature from a source.\n   *\n   * @abstract\n   * @param {Document|Element|Object|string} source Source.\n   * @param {ReadOptions} [opt_options] Read options.\n   * @return {import(\"../Feature.js\").FeatureLike} Feature.\n   */\n\n\n  FeatureFormat.prototype.readFeature = function (source, opt_options) {\n    return abstract();\n  };\n  /**\n   * Read all features from a source.\n   *\n   * @abstract\n   * @param {Document|Element|ArrayBuffer|Object|string} source Source.\n   * @param {ReadOptions} [opt_options] Read options.\n   * @return {Array<import(\"../Feature.js\").FeatureLike>} Features.\n   */\n\n\n  FeatureFormat.prototype.readFeatures = function (source, opt_options) {\n    return abstract();\n  };\n  /**\n   * Read a single geometry from a source.\n   *\n   * @abstract\n   * @param {Document|Element|Object|string} source Source.\n   * @param {ReadOptions} [opt_options] Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n\n\n  FeatureFormat.prototype.readGeometry = function (source, opt_options) {\n    return abstract();\n  };\n  /**\n   * Read the projection from a source.\n   *\n   * @abstract\n   * @param {Document|Element|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default|undefined} Projection.\n   */\n\n\n  FeatureFormat.prototype.readProjection = function (source) {\n    return abstract();\n  };\n  /**\n   * Encode a feature in this format.\n   *\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {WriteOptions} [opt_options] Write options.\n   * @return {string|ArrayBuffer} Result.\n   */\n\n\n  FeatureFormat.prototype.writeFeature = function (feature, opt_options) {\n    return abstract();\n  };\n  /**\n   * Encode an array of features in this format.\n   *\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {WriteOptions} [opt_options] Write options.\n   * @return {string|ArrayBuffer} Result.\n   */\n\n\n  FeatureFormat.prototype.writeFeatures = function (features, opt_options) {\n    return abstract();\n  };\n  /**\n   * Write a single geometry in this format.\n   *\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {WriteOptions} [opt_options] Write options.\n   * @return {string|ArrayBuffer} Result.\n   */\n\n\n  FeatureFormat.prototype.writeGeometry = function (geometry, opt_options) {\n    return abstract();\n  };\n\n  return FeatureFormat;\n}();\n\nexport default FeatureFormat;\n/**\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {boolean} write Set to true for writing, false for reading.\n * @param {WriteOptions|ReadOptions} [opt_options] Options.\n * @return {import(\"../geom/Geometry.js\").default} Transformed geometry.\n */\n\nexport function transformGeometryWithOptions(geometry, write, opt_options) {\n  var featureProjection = opt_options ? getProjection(opt_options.featureProjection) : null;\n  var dataProjection = opt_options ? getProjection(opt_options.dataProjection) : null;\n  var transformed;\n\n  if (featureProjection && dataProjection && !equivalentProjection(featureProjection, dataProjection)) {\n    transformed = (write ? geometry.clone() : geometry).transform(write ? featureProjection : dataProjection, write ? dataProjection : featureProjection);\n  } else {\n    transformed = geometry;\n  }\n\n  if (write && opt_options &&\n  /** @type {WriteOptions} */\n  opt_options.decimals !== undefined) {\n    var power_1 = Math.pow(10,\n    /** @type {WriteOptions} */\n    opt_options.decimals); // if decimals option on write, round each coordinate appropriately\n\n    /**\n     * @param {Array<number>} coordinates Coordinates.\n     * @return {Array<number>} Transformed coordinates.\n     */\n\n    var transform = function transform(coordinates) {\n      for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = Math.round(coordinates[i] * power_1) / power_1;\n      }\n\n      return coordinates;\n    };\n\n    if (transformed === geometry) {\n      transformed = geometry.clone();\n    }\n\n    transformed.applyTransform(transform);\n  }\n\n  return transformed;\n}\n/**\n * @param {import(\"../extent.js\").Extent} extent Extent.\n * @param {ReadOptions} [opt_options] Read options.\n * @return {import(\"../extent.js\").Extent} Transformed extent.\n */\n\nexport function transformExtentWithOptions(extent, opt_options) {\n  var featureProjection = opt_options ? getProjection(opt_options.featureProjection) : null;\n  var dataProjection = opt_options ? getProjection(opt_options.dataProjection) : null;\n\n  if (featureProjection && dataProjection && !equivalentProjection(featureProjection, dataProjection)) {\n    return transformExtent(extent, dataProjection, featureProjection);\n  } else {\n    return extent;\n  }\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/format/JSONFeature\n */\n\n\nimport FeatureFormat from './Feature.js';\nimport FormatType from './FormatType.js';\nimport { abstract } from '../util.js';\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for JSON feature formats.\n *\n * @abstract\n */\n\nvar JSONFeature =\n/** @class */\nfunction (_super) {\n  __extends(JSONFeature, _super);\n\n  function JSONFeature() {\n    return _super.call(this) || this;\n  }\n  /**\n   * @return {import(\"./FormatType.js\").default} Format.\n   */\n\n\n  JSONFeature.prototype.getType = function () {\n    return FormatType.JSON;\n  };\n  /**\n   * Read a feature.  Only works for a single feature. Use `readFeatures` to\n   * read a feature collection.\n   *\n   * @param {ArrayBuffer|Document|Element|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   * @api\n   */\n\n\n  JSONFeature.prototype.readFeature = function (source, opt_options) {\n    return this.readFeatureFromObject(getObject(source), this.getReadOptions(source, opt_options));\n  };\n  /**\n   * Read all features.  Works with both a single feature and a feature\n   * collection.\n   *\n   * @param {ArrayBuffer|Document|Element|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n\n\n  JSONFeature.prototype.readFeatures = function (source, opt_options) {\n    return this.readFeaturesFromObject(getObject(source), this.getReadOptions(source, opt_options));\n  };\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @protected\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n\n\n  JSONFeature.prototype.readFeatureFromObject = function (object, opt_options) {\n    return abstract();\n  };\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n\n\n  JSONFeature.prototype.readFeaturesFromObject = function (object, opt_options) {\n    return abstract();\n  };\n  /**\n   * Read a geometry.\n   *\n   * @param {ArrayBuffer|Document|Element|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   * @api\n   */\n\n\n  JSONFeature.prototype.readGeometry = function (source, opt_options) {\n    return this.readGeometryFromObject(getObject(source), this.getReadOptions(source, opt_options));\n  };\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n\n\n  JSONFeature.prototype.readGeometryFromObject = function (object, opt_options) {\n    return abstract();\n  };\n  /**\n   * Read the projection.\n   *\n   * @param {ArrayBuffer|Document|Element|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n\n\n  JSONFeature.prototype.readProjection = function (source) {\n    return this.readProjectionFromObject(getObject(source));\n  };\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n\n\n  JSONFeature.prototype.readProjectionFromObject = function (object) {\n    return abstract();\n  };\n  /**\n   * Encode a feature as string.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {string} Encoded feature.\n   * @api\n   */\n\n\n  JSONFeature.prototype.writeFeature = function (feature, opt_options) {\n    return JSON.stringify(this.writeFeatureObject(feature, opt_options));\n  };\n  /**\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {Object} Object.\n   */\n\n\n  JSONFeature.prototype.writeFeatureObject = function (feature, opt_options) {\n    return abstract();\n  };\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {string} Encoded features.\n   * @api\n   */\n\n\n  JSONFeature.prototype.writeFeatures = function (features, opt_options) {\n    return JSON.stringify(this.writeFeaturesObject(features, opt_options));\n  };\n  /**\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {Object} Object.\n   */\n\n\n  JSONFeature.prototype.writeFeaturesObject = function (features, opt_options) {\n    return abstract();\n  };\n  /**\n   * Encode a geometry as string.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {string} Encoded geometry.\n   * @api\n   */\n\n\n  JSONFeature.prototype.writeGeometry = function (geometry, opt_options) {\n    return JSON.stringify(this.writeGeometryObject(geometry, opt_options));\n  };\n  /**\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {Object} Object.\n   */\n\n\n  JSONFeature.prototype.writeGeometryObject = function (geometry, opt_options) {\n    return abstract();\n  };\n\n  return JSONFeature;\n}(FeatureFormat);\n/**\n * @param {Document|Element|Object|string} source Source.\n * @return {Object} Object.\n */\n\n\nfunction getObject(source) {\n  if (typeof source === 'string') {\n    var object = JSON.parse(source);\n    return object ?\n    /** @type {Object} */\n    object : null;\n  } else if (source !== null) {\n    return source;\n  } else {\n    return null;\n  }\n}\n\nexport default JSONFeature;","/**\n * @module ol/geom/flat/interpolate\n */\nimport { binarySearch } from '../../array.js';\nimport { lerp } from '../../math.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} fraction Fraction.\n * @param {Array<number>} [opt_dest] Destination.\n * @param {number} [opt_dimension] Destination dimension (default is `2`)\n * @return {Array<number>} Destination.\n */\n\nexport function interpolatePoint(flatCoordinates, offset, end, stride, fraction, opt_dest, opt_dimension) {\n  var o, t;\n  var n = (end - offset) / stride;\n\n  if (n === 1) {\n    o = offset;\n  } else if (n === 2) {\n    o = offset;\n    t = fraction;\n  } else if (n !== 0) {\n    var x1 = flatCoordinates[offset];\n    var y1 = flatCoordinates[offset + 1];\n    var length_1 = 0;\n    var cumulativeLengths = [0];\n\n    for (var i = offset + stride; i < end; i += stride) {\n      var x2 = flatCoordinates[i];\n      var y2 = flatCoordinates[i + 1];\n      length_1 += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n      cumulativeLengths.push(length_1);\n      x1 = x2;\n      y1 = y2;\n    }\n\n    var target = fraction * length_1;\n    var index = binarySearch(cumulativeLengths, target);\n\n    if (index < 0) {\n      t = (target - cumulativeLengths[-index - 2]) / (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n      o = offset + (-index - 2) * stride;\n    } else {\n      o = offset + index * stride;\n    }\n  }\n\n  var dimension = opt_dimension > 1 ? opt_dimension : 2;\n  var dest = opt_dest ? opt_dest : new Array(dimension);\n\n  for (var i = 0; i < dimension; ++i) {\n    dest[i] = o === undefined ? NaN : t === undefined ? flatCoordinates[o + i] : lerp(flatCoordinates[o + i], flatCoordinates[o + stride + i], t);\n  }\n\n  return dest;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @return {import(\"../../coordinate.js\").Coordinate|null} Coordinate.\n */\n\nexport function lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, extrapolate) {\n  if (end == offset) {\n    return null;\n  }\n\n  var coordinate;\n\n  if (m < flatCoordinates[offset + stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(offset, offset + stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  } else if (flatCoordinates[end - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(end - stride, end);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  } // FIXME use O(1) search\n\n\n  if (m == flatCoordinates[offset + stride - 1]) {\n    return flatCoordinates.slice(offset, offset + stride);\n  }\n\n  var lo = offset / stride;\n  var hi = end / stride;\n\n  while (lo < hi) {\n    var mid = lo + hi >> 1;\n\n    if (m < flatCoordinates[(mid + 1) * stride - 1]) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n\n  var m0 = flatCoordinates[lo * stride - 1];\n\n  if (m == m0) {\n    return flatCoordinates.slice((lo - 1) * stride, (lo - 1) * stride + stride);\n  }\n\n  var m1 = flatCoordinates[(lo + 1) * stride - 1];\n  var t = (m - m0) / (m1 - m0);\n  coordinate = [];\n\n  for (var i = 0; i < stride - 1; ++i) {\n    coordinate.push(lerp(flatCoordinates[(lo - 1) * stride + i], flatCoordinates[lo * stride + i], t));\n  }\n\n  coordinate.push(m);\n  return coordinate;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @param {boolean} interpolate Interpolate.\n * @return {import(\"../../coordinate.js\").Coordinate|null} Coordinate.\n */\n\nexport function lineStringsCoordinateAtM(flatCoordinates, offset, ends, stride, m, extrapolate, interpolate) {\n  if (interpolate) {\n    return lineStringCoordinateAtM(flatCoordinates, offset, ends[ends.length - 1], stride, m, extrapolate);\n  }\n\n  var coordinate;\n\n  if (m < flatCoordinates[stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(0, stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n\n  if (flatCoordinates[flatCoordinates.length - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(flatCoordinates.length - stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n\n  for (var i = 0, ii = ends.length; i < ii; ++i) {\n    var end = ends[i];\n\n    if (offset == end) {\n      continue;\n    }\n\n    if (m < flatCoordinates[offset + stride - 1]) {\n      return null;\n    } else if (m <= flatCoordinates[end - 1]) {\n      return lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, false);\n    }\n\n    offset = end;\n  }\n\n  return null;\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/geom/LineString\n */\n\n\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { assignClosestPoint, maxSquaredDelta } from './flat/closest.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { douglasPeucker } from './flat/simplify.js';\nimport { extend } from '../array.js';\nimport { forEach as forEachSegment } from './flat/segments.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { interpolatePoint, lineStringCoordinateAtM } from './flat/interpolate.js';\nimport { intersectsLineString } from './flat/intersectsextent.js';\nimport { lineStringLength } from './flat/length.js';\n/**\n * @classdesc\n * Linestring geometry.\n *\n * @api\n */\n\nvar LineString =\n/** @class */\nfunction (_super) {\n  __extends(LineString, _super);\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   */\n\n\n  function LineString(coordinates, opt_layout) {\n    var _this = _super.call(this) || this;\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n\n\n    _this.flatMidpoint_ = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.flatMidpointRevision_ = -1;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.maxDelta_ = -1;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.maxDeltaRevision_ = -1;\n\n    if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n      _this.setFlatCoordinates(opt_layout,\n      /** @type {Array<number>} */\n      coordinates);\n    } else {\n      _this.setCoordinates(\n      /** @type {Array<import(\"../coordinate.js\").Coordinate>} */\n      coordinates, opt_layout);\n    }\n\n    return _this;\n  }\n  /**\n   * Append the passed coordinate to the coordinates of the linestring.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @api\n   */\n\n\n  LineString.prototype.appendCoordinate = function (coordinate) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = coordinate.slice();\n    } else {\n      extend(this.flatCoordinates, coordinate);\n    }\n\n    this.changed();\n  };\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!LineString} Clone.\n   * @api\n   */\n\n\n  LineString.prototype.clone = function () {\n    var lineString = new LineString(this.flatCoordinates.slice(), this.layout);\n    lineString.applyProperties(this);\n    return lineString;\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n\n\n  LineString.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(maxSquaredDelta(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n\n    return assignClosestPoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n  };\n  /**\n   * Iterate over each segment, calling the provided callback.\n   * If the callback returns a truthy value the function returns that\n   * value immediately. Otherwise the function returns `false`.\n   *\n   * @param {function(this: S, import(\"../coordinate.js\").Coordinate, import(\"../coordinate.js\").Coordinate): T} callback Function\n   *     called for each segment. The function will receive two arguments, the start and end coordinates of the segment.\n   * @return {T|boolean} Value.\n   * @template T,S\n   * @api\n   */\n\n\n  LineString.prototype.forEachSegment = function (callback) {\n    return forEachSegment(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, callback);\n  };\n  /**\n   * Returns the coordinate at `m` using linear interpolation, or `null` if no\n   * such coordinate exists.\n   *\n   * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n   * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n   * M will return the first coordinate and Ms greater than the last M will\n   * return the last coordinate.\n   *\n   * @param {number} m M.\n   * @param {boolean} [opt_extrapolate] Extrapolate. Default is `false`.\n   * @return {import(\"../coordinate.js\").Coordinate|null} Coordinate.\n   * @api\n   */\n\n\n  LineString.prototype.getCoordinateAtM = function (m, opt_extrapolate) {\n    if (this.layout != GeometryLayout.XYM && this.layout != GeometryLayout.XYZM) {\n      return null;\n    }\n\n    var extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n    return lineStringCoordinateAtM(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, m, extrapolate);\n  };\n  /**\n   * Return the coordinates of the linestring.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @api\n   */\n\n\n  LineString.prototype.getCoordinates = function () {\n    return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  };\n  /**\n   * Return the coordinate at the provided fraction along the linestring.\n   * The `fraction` is a number between 0 and 1, where 0 is the start of the\n   * linestring and 1 is the end.\n   * @param {number} fraction Fraction.\n   * @param {import(\"../coordinate.js\").Coordinate} [opt_dest] Optional coordinate whose values will\n   *     be modified. If not provided, a new coordinate will be returned.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinate of the interpolated point.\n   * @api\n   */\n\n\n  LineString.prototype.getCoordinateAt = function (fraction, opt_dest) {\n    return interpolatePoint(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, fraction, opt_dest, this.stride);\n  };\n  /**\n   * Return the length of the linestring on projected plane.\n   * @return {number} Length (on projected plane).\n   * @api\n   */\n\n\n  LineString.prototype.getLength = function () {\n    return lineStringLength(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  };\n  /**\n   * @return {Array<number>} Flat midpoint.\n   */\n\n\n  LineString.prototype.getFlatMidpoint = function () {\n    if (this.flatMidpointRevision_ != this.getRevision()) {\n      this.flatMidpoint_ = this.getCoordinateAt(0.5, this.flatMidpoint_);\n      this.flatMidpointRevision_ = this.getRevision();\n    }\n\n    return this.flatMidpoint_;\n  };\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {LineString} Simplified LineString.\n   * @protected\n   */\n\n\n  LineString.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n    var simplifiedFlatCoordinates = [];\n    simplifiedFlatCoordinates.length = douglasPeucker(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0);\n    return new LineString(simplifiedFlatCoordinates, GeometryLayout.XY);\n  };\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./GeometryType.js\").default} Geometry type.\n   * @api\n   */\n\n\n  LineString.prototype.getType = function () {\n    return GeometryType.LINE_STRING;\n  };\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n\n\n  LineString.prototype.intersectsExtent = function (extent) {\n    return intersectsLineString(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, extent);\n  };\n  /**\n   * Set the coordinates of the linestring.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   * @api\n   */\n\n\n  LineString.prototype.setCoordinates = function (coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n\n    this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  };\n\n  return LineString;\n}(SimpleGeometry);\n\nexport default LineString;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/geom/MultiLineString\n */\n\n\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport LineString from './LineString.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { arrayMaxSquaredDelta, assignClosestArrayPoint } from './flat/closest.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport { deflateCoordinatesArray } from './flat/deflate.js';\nimport { douglasPeuckerArray } from './flat/simplify.js';\nimport { extend } from '../array.js';\nimport { inflateCoordinatesArray } from './flat/inflate.js';\nimport { interpolatePoint, lineStringsCoordinateAtM } from './flat/interpolate.js';\nimport { intersectsLineStringArray } from './flat/intersectsextent.js';\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @api\n */\n\nvar MultiLineString =\n/** @class */\nfunction (_super) {\n  __extends(MultiLineString, _super);\n  /**\n   * @param {Array<Array<import(\"../coordinate.js\").Coordinate>|LineString>|Array<number>} coordinates\n   *     Coordinates or LineString geometries. (For internal use, flat coordinates in\n   *     combination with `opt_layout` and `opt_ends` are also accepted.)\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   * @param {Array<number>} [opt_ends] Flat coordinate ends for internal use.\n   */\n\n\n  function MultiLineString(coordinates, opt_layout, opt_ends) {\n    var _this = _super.call(this) || this;\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n\n\n    _this.ends_ = [];\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.maxDelta_ = -1;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.maxDeltaRevision_ = -1;\n\n    if (Array.isArray(coordinates[0])) {\n      _this.setCoordinates(\n      /** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */\n      coordinates, opt_layout);\n    } else if (opt_layout !== undefined && opt_ends) {\n      _this.setFlatCoordinates(opt_layout,\n      /** @type {Array<number>} */\n      coordinates);\n\n      _this.ends_ = opt_ends;\n    } else {\n      var layout = _this.getLayout();\n\n      var lineStrings =\n      /** @type {Array<LineString>} */\n      coordinates;\n      var flatCoordinates = [];\n      var ends = [];\n\n      for (var i = 0, ii = lineStrings.length; i < ii; ++i) {\n        var lineString = lineStrings[i];\n\n        if (i === 0) {\n          layout = lineString.getLayout();\n        }\n\n        extend(flatCoordinates, lineString.getFlatCoordinates());\n        ends.push(flatCoordinates.length);\n      }\n\n      _this.setFlatCoordinates(layout, flatCoordinates);\n\n      _this.ends_ = ends;\n    }\n\n    return _this;\n  }\n  /**\n   * Append the passed linestring to the multilinestring.\n   * @param {LineString} lineString LineString.\n   * @api\n   */\n\n\n  MultiLineString.prototype.appendLineString = function (lineString) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = lineString.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, lineString.getFlatCoordinates().slice());\n    }\n\n    this.ends_.push(this.flatCoordinates.length);\n    this.changed();\n  };\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiLineString} Clone.\n   * @api\n   */\n\n\n  MultiLineString.prototype.clone = function () {\n    var multiLineString = new MultiLineString(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n    multiLineString.applyProperties(this);\n    return multiLineString;\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n\n\n  MultiLineString.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates, 0, this.ends_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n\n    return assignClosestArrayPoint(this.flatCoordinates, 0, this.ends_, this.stride, this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n  };\n  /**\n   * Returns the coordinate at `m` using linear interpolation, or `null` if no\n   * such coordinate exists.\n   *\n   * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n   * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n   * M will return the first coordinate and Ms greater than the last M will\n   * return the last coordinate.\n   *\n   * `opt_interpolate` controls interpolation between consecutive LineStrings\n   * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n   * will be linearly interpolated between the last coordinate of one LineString\n   * and the first coordinate of the next LineString.  If `opt_interpolate` is\n   * `false` then the function will return `null` for Ms falling between\n   * LineStrings.\n   *\n   * @param {number} m M.\n   * @param {boolean} [opt_extrapolate] Extrapolate. Default is `false`.\n   * @param {boolean} [opt_interpolate] Interpolate. Default is `false`.\n   * @return {import(\"../coordinate.js\").Coordinate|null} Coordinate.\n   * @api\n   */\n\n\n  MultiLineString.prototype.getCoordinateAtM = function (m, opt_extrapolate, opt_interpolate) {\n    if (this.layout != GeometryLayout.XYM && this.layout != GeometryLayout.XYZM || this.flatCoordinates.length === 0) {\n      return null;\n    }\n\n    var extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n    var interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n    return lineStringsCoordinateAtM(this.flatCoordinates, 0, this.ends_, this.stride, m, extrapolate, interpolate);\n  };\n  /**\n   * Return the coordinates of the multilinestring.\n   * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n   * @api\n   */\n\n\n  MultiLineString.prototype.getCoordinates = function () {\n    return inflateCoordinatesArray(this.flatCoordinates, 0, this.ends_, this.stride);\n  };\n  /**\n   * @return {Array<number>} Ends.\n   */\n\n\n  MultiLineString.prototype.getEnds = function () {\n    return this.ends_;\n  };\n  /**\n   * Return the linestring at the specified index.\n   * @param {number} index Index.\n   * @return {LineString} LineString.\n   * @api\n   */\n\n\n  MultiLineString.prototype.getLineString = function (index) {\n    if (index < 0 || this.ends_.length <= index) {\n      return null;\n    }\n\n    return new LineString(this.flatCoordinates.slice(index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n  };\n  /**\n   * Return the linestrings of this multilinestring.\n   * @return {Array<LineString>} LineStrings.\n   * @api\n   */\n\n\n  MultiLineString.prototype.getLineStrings = function () {\n    var flatCoordinates = this.flatCoordinates;\n    var ends = this.ends_;\n    var layout = this.layout;\n    /** @type {Array<LineString>} */\n\n    var lineStrings = [];\n    var offset = 0;\n\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n      var end = ends[i];\n      var lineString = new LineString(flatCoordinates.slice(offset, end), layout);\n      lineStrings.push(lineString);\n      offset = end;\n    }\n\n    return lineStrings;\n  };\n  /**\n   * @return {Array<number>} Flat midpoints.\n   */\n\n\n  MultiLineString.prototype.getFlatMidpoints = function () {\n    var midpoints = [];\n    var flatCoordinates = this.flatCoordinates;\n    var offset = 0;\n    var ends = this.ends_;\n    var stride = this.stride;\n\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n      var end = ends[i];\n      var midpoint = interpolatePoint(flatCoordinates, offset, end, stride, 0.5);\n      extend(midpoints, midpoint);\n      offset = end;\n    }\n\n    return midpoints;\n  };\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {MultiLineString} Simplified MultiLineString.\n   * @protected\n   */\n\n\n  MultiLineString.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n    var simplifiedFlatCoordinates = [];\n    var simplifiedEnds = [];\n    simplifiedFlatCoordinates.length = douglasPeuckerArray(this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance, simplifiedFlatCoordinates, 0, simplifiedEnds);\n    return new MultiLineString(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n  };\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./GeometryType.js\").default} Geometry type.\n   * @api\n   */\n\n\n  MultiLineString.prototype.getType = function () {\n    return GeometryType.MULTI_LINE_STRING;\n  };\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n\n\n  MultiLineString.prototype.intersectsExtent = function (extent) {\n    return intersectsLineStringArray(this.flatCoordinates, 0, this.ends_, this.stride, extent);\n  };\n  /**\n   * Set the coordinates of the multilinestring.\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n   * @param {GeometryLayout} [opt_layout] Layout.\n   * @api\n   */\n\n\n  MultiLineString.prototype.setCoordinates = function (coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 2);\n\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n\n    var ends = deflateCoordinatesArray(this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  };\n\n  return MultiLineString;\n}(SimpleGeometry);\n\nexport default MultiLineString;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/geom/MultiPoint\n */\n\n\nimport GeometryType from './GeometryType.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { closestSquaredDistanceXY, containsXY } from '../extent.js';\nimport { deflateCoordinates } from './flat/deflate.js';\nimport { extend } from '../array.js';\nimport { inflateCoordinates } from './flat/inflate.js';\nimport { squaredDistance as squaredDx } from '../math.js';\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @api\n */\n\nvar MultiPoint =\n/** @class */\nfunction (_super) {\n  __extends(MultiPoint, _super);\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   */\n\n\n  function MultiPoint(coordinates, opt_layout) {\n    var _this = _super.call(this) || this;\n\n    if (opt_layout && !Array.isArray(coordinates[0])) {\n      _this.setFlatCoordinates(opt_layout,\n      /** @type {Array<number>} */\n      coordinates);\n    } else {\n      _this.setCoordinates(\n      /** @type {Array<import(\"../coordinate.js\").Coordinate>} */\n      coordinates, opt_layout);\n    }\n\n    return _this;\n  }\n  /**\n   * Append the passed point to this multipoint.\n   * @param {Point} point Point.\n   * @api\n   */\n\n\n  MultiPoint.prototype.appendPoint = function (point) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = point.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, point.getFlatCoordinates());\n    }\n\n    this.changed();\n  };\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiPoint} Clone.\n   * @api\n   */\n\n\n  MultiPoint.prototype.clone = function () {\n    var multiPoint = new MultiPoint(this.flatCoordinates.slice(), this.layout);\n    multiPoint.applyProperties(this);\n    return multiPoint;\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n\n\n  MultiPoint.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n\n    var flatCoordinates = this.flatCoordinates;\n    var stride = this.stride;\n\n    for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      var squaredDistance = squaredDx(x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n\n      if (squaredDistance < minSquaredDistance) {\n        minSquaredDistance = squaredDistance;\n\n        for (var j = 0; j < stride; ++j) {\n          closestPoint[j] = flatCoordinates[i + j];\n        }\n\n        closestPoint.length = stride;\n      }\n    }\n\n    return minSquaredDistance;\n  };\n  /**\n   * Return the coordinates of the multipoint.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @api\n   */\n\n\n  MultiPoint.prototype.getCoordinates = function () {\n    return inflateCoordinates(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  };\n  /**\n   * Return the point at the specified index.\n   * @param {number} index Index.\n   * @return {Point} Point.\n   * @api\n   */\n\n\n  MultiPoint.prototype.getPoint = function (index) {\n    var n = !this.flatCoordinates ? 0 : this.flatCoordinates.length / this.stride;\n\n    if (index < 0 || n <= index) {\n      return null;\n    }\n\n    return new Point(this.flatCoordinates.slice(index * this.stride, (index + 1) * this.stride), this.layout);\n  };\n  /**\n   * Return the points of this multipoint.\n   * @return {Array<Point>} Points.\n   * @api\n   */\n\n\n  MultiPoint.prototype.getPoints = function () {\n    var flatCoordinates = this.flatCoordinates;\n    var layout = this.layout;\n    var stride = this.stride;\n    /** @type {Array<Point>} */\n\n    var points = [];\n\n    for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      var point = new Point(flatCoordinates.slice(i, i + stride), layout);\n      points.push(point);\n    }\n\n    return points;\n  };\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./GeometryType.js\").default} Geometry type.\n   * @api\n   */\n\n\n  MultiPoint.prototype.getType = function () {\n    return GeometryType.MULTI_POINT;\n  };\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n\n\n  MultiPoint.prototype.intersectsExtent = function (extent) {\n    var flatCoordinates = this.flatCoordinates;\n    var stride = this.stride;\n\n    for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      var x = flatCoordinates[i];\n      var y = flatCoordinates[i + 1];\n\n      if (containsXY(extent, x, y)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n  /**\n   * Set the coordinates of the multipoint.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   * @api\n   */\n\n\n  MultiPoint.prototype.setCoordinates = function (coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n\n    this.flatCoordinates.length = deflateCoordinates(this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  };\n\n  return MultiPoint;\n}(SimpleGeometry);\n\nexport default MultiPoint;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/geom/MultiPolygon\n */\n\n\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport MultiPoint from './MultiPoint.js';\nimport Polygon from './Polygon.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport { assignClosestMultiArrayPoint, multiArrayMaxSquaredDelta } from './flat/closest.js';\nimport { closestSquaredDistanceXY } from '../extent.js';\nimport { deflateMultiCoordinatesArray } from './flat/deflate.js';\nimport { extend } from '../array.js';\nimport { getInteriorPointsOfMultiArray } from './flat/interiorpoint.js';\nimport { inflateMultiCoordinatesArray } from './flat/inflate.js';\nimport { intersectsLinearRingMultiArray } from './flat/intersectsextent.js';\nimport { linearRingssAreOriented, orientLinearRingsArray } from './flat/orient.js';\nimport { linearRingss as linearRingssArea } from './flat/area.js';\nimport { linearRingss as linearRingssCenter } from './flat/center.js';\nimport { linearRingssContainsXY } from './flat/contains.js';\nimport { quantizeMultiArray } from './flat/simplify.js';\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @api\n */\n\nvar MultiPolygon =\n/** @class */\nfunction (_super) {\n  __extends(MultiPolygon, _super);\n  /**\n   * @param {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>|Polygon>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` and `opt_endss` are also accepted.\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   * @param {Array<Array<number>>} [opt_endss] Array of ends for internal use with flat coordinates.\n   */\n\n\n  function MultiPolygon(coordinates, opt_layout, opt_endss) {\n    var _this = _super.call(this) || this;\n    /**\n     * @type {Array<Array<number>>}\n     * @private\n     */\n\n\n    _this.endss_ = [];\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.flatInteriorPointsRevision_ = -1;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.flatInteriorPoints_ = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.maxDelta_ = -1;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.maxDeltaRevision_ = -1;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.orientedRevision_ = -1;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.orientedFlatCoordinates_ = null;\n\n    if (!opt_endss && !Array.isArray(coordinates[0])) {\n      var layout = _this.getLayout();\n\n      var polygons =\n      /** @type {Array<Polygon>} */\n      coordinates;\n      var flatCoordinates = [];\n      var endss = [];\n\n      for (var i = 0, ii = polygons.length; i < ii; ++i) {\n        var polygon = polygons[i];\n\n        if (i === 0) {\n          layout = polygon.getLayout();\n        }\n\n        var offset = flatCoordinates.length;\n        var ends = polygon.getEnds();\n\n        for (var j = 0, jj = ends.length; j < jj; ++j) {\n          ends[j] += offset;\n        }\n\n        extend(flatCoordinates, polygon.getFlatCoordinates());\n        endss.push(ends);\n      }\n\n      opt_layout = layout;\n      coordinates = flatCoordinates;\n      opt_endss = endss;\n    }\n\n    if (opt_layout !== undefined && opt_endss) {\n      _this.setFlatCoordinates(opt_layout,\n      /** @type {Array<number>} */\n      coordinates);\n\n      _this.endss_ = opt_endss;\n    } else {\n      _this.setCoordinates(\n      /** @type {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} */\n      coordinates, opt_layout);\n    }\n\n    return _this;\n  }\n  /**\n   * Append the passed polygon to this multipolygon.\n   * @param {Polygon} polygon Polygon.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.appendPolygon = function (polygon) {\n    /** @type {Array<number>} */\n    var ends;\n\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = polygon.getFlatCoordinates().slice();\n      ends = polygon.getEnds().slice();\n      this.endss_.push();\n    } else {\n      var offset = this.flatCoordinates.length;\n      extend(this.flatCoordinates, polygon.getFlatCoordinates());\n      ends = polygon.getEnds().slice();\n\n      for (var i = 0, ii = ends.length; i < ii; ++i) {\n        ends[i] += offset;\n      }\n    }\n\n    this.endss_.push(ends);\n    this.changed();\n  };\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiPolygon} Clone.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.clone = function () {\n    var len = this.endss_.length;\n    var newEndss = new Array(len);\n\n    for (var i = 0; i < len; ++i) {\n      newEndss[i] = this.endss_[i].slice();\n    }\n\n    var multiPolygon = new MultiPolygon(this.flatCoordinates.slice(), this.layout, newEndss);\n    multiPolygon.applyProperties(this);\n    return multiPolygon;\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n\n\n  MultiPolygon.prototype.closestPointXY = function (x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates, 0, this.endss_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n\n    return assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  };\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @return {boolean} Contains (x, y).\n   */\n\n\n  MultiPolygon.prototype.containsXY = function (x, y) {\n    return linearRingssContainsXY(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n  };\n  /**\n   * Return the area of the multipolygon on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n\n\n  MultiPolygon.prototype.getArea = function () {\n    return linearRingssArea(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n  };\n  /**\n   * Get the coordinate array for this geometry.  This array has the structure\n   * of a GeoJSON coordinate array for multi-polygons.\n   *\n   * @param {boolean} [opt_right] Orient coordinates according to the right-hand\n   *     rule (counter-clockwise for exterior and clockwise for interior rings).\n   *     If `false`, coordinates will be oriented according to the left-hand rule\n   *     (clockwise for exterior and counter-clockwise for interior rings).\n   *     By default, coordinate orientation will depend on how the geometry was\n   *     constructed.\n   * @return {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} Coordinates.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.getCoordinates = function (opt_right) {\n    var flatCoordinates;\n\n    if (opt_right !== undefined) {\n      flatCoordinates = this.getOrientedFlatCoordinates().slice();\n      orientLinearRingsArray(flatCoordinates, 0, this.endss_, this.stride, opt_right);\n    } else {\n      flatCoordinates = this.flatCoordinates;\n    }\n\n    return inflateMultiCoordinatesArray(flatCoordinates, 0, this.endss_, this.stride);\n  };\n  /**\n   * @return {Array<Array<number>>} Endss.\n   */\n\n\n  MultiPolygon.prototype.getEndss = function () {\n    return this.endss_;\n  };\n  /**\n   * @return {Array<number>} Flat interior points.\n   */\n\n\n  MultiPolygon.prototype.getFlatInteriorPoints = function () {\n    if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n      var flatCenters = linearRingssCenter(this.flatCoordinates, 0, this.endss_, this.stride);\n      this.flatInteriorPoints_ = getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, flatCenters);\n      this.flatInteriorPointsRevision_ = this.getRevision();\n    }\n\n    return this.flatInteriorPoints_;\n  };\n  /**\n   * Return the interior points as {@link module:ol/geom/MultiPoint~MultiPoint multipoint}.\n   * @return {MultiPoint} Interior points as XYM coordinates, where M is\n   * the length of the horizontal intersection that the point belongs to.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.getInteriorPoints = function () {\n    return new MultiPoint(this.getFlatInteriorPoints().slice(), GeometryLayout.XYM);\n  };\n  /**\n   * @return {Array<number>} Oriented flat coordinates.\n   */\n\n\n  MultiPolygon.prototype.getOrientedFlatCoordinates = function () {\n    if (this.orientedRevision_ != this.getRevision()) {\n      var flatCoordinates = this.flatCoordinates;\n\n      if (linearRingssAreOriented(flatCoordinates, 0, this.endss_, this.stride)) {\n        this.orientedFlatCoordinates_ = flatCoordinates;\n      } else {\n        this.orientedFlatCoordinates_ = flatCoordinates.slice();\n        this.orientedFlatCoordinates_.length = orientLinearRingsArray(this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n      }\n\n      this.orientedRevision_ = this.getRevision();\n    }\n\n    return this.orientedFlatCoordinates_;\n  };\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {MultiPolygon} Simplified MultiPolygon.\n   * @protected\n   */\n\n\n  MultiPolygon.prototype.getSimplifiedGeometryInternal = function (squaredTolerance) {\n    var simplifiedFlatCoordinates = [];\n    var simplifiedEndss = [];\n    simplifiedFlatCoordinates.length = quantizeMultiArray(this.flatCoordinates, 0, this.endss_, this.stride, Math.sqrt(squaredTolerance), simplifiedFlatCoordinates, 0, simplifiedEndss);\n    return new MultiPolygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEndss);\n  };\n  /**\n   * Return the polygon at the specified index.\n   * @param {number} index Index.\n   * @return {Polygon} Polygon.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.getPolygon = function (index) {\n    if (index < 0 || this.endss_.length <= index) {\n      return null;\n    }\n\n    var offset;\n\n    if (index === 0) {\n      offset = 0;\n    } else {\n      var prevEnds = this.endss_[index - 1];\n      offset = prevEnds[prevEnds.length - 1];\n    }\n\n    var ends = this.endss_[index].slice();\n    var end = ends[ends.length - 1];\n\n    if (offset !== 0) {\n      for (var i = 0, ii = ends.length; i < ii; ++i) {\n        ends[i] -= offset;\n      }\n    }\n\n    return new Polygon(this.flatCoordinates.slice(offset, end), this.layout, ends);\n  };\n  /**\n   * Return the polygons of this multipolygon.\n   * @return {Array<Polygon>} Polygons.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.getPolygons = function () {\n    var layout = this.layout;\n    var flatCoordinates = this.flatCoordinates;\n    var endss = this.endss_;\n    var polygons = [];\n    var offset = 0;\n\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n      var ends = endss[i].slice();\n      var end = ends[ends.length - 1];\n\n      if (offset !== 0) {\n        for (var j = 0, jj = ends.length; j < jj; ++j) {\n          ends[j] -= offset;\n        }\n      }\n\n      var polygon = new Polygon(flatCoordinates.slice(offset, end), layout, ends);\n      polygons.push(polygon);\n      offset = end;\n    }\n\n    return polygons;\n  };\n  /**\n   * Get the type of this geometry.\n   * @return {import(\"./GeometryType.js\").default} Geometry type.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.getType = function () {\n    return GeometryType.MULTI_POLYGON;\n  };\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.intersectsExtent = function (extent) {\n    return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n  };\n  /**\n   * Set the coordinates of the multipolygon.\n   * @param {!Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} coordinates Coordinates.\n   * @param {import(\"./GeometryLayout.js\").default} [opt_layout] Layout.\n   * @api\n   */\n\n\n  MultiPolygon.prototype.setCoordinates = function (coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 3);\n\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n\n    var endss = deflateMultiCoordinatesArray(this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n\n    if (endss.length === 0) {\n      this.flatCoordinates.length = 0;\n    } else {\n      var lastEnds = endss[endss.length - 1];\n      this.flatCoordinates.length = lastEnds.length === 0 ? 0 : lastEnds[lastEnds.length - 1];\n    }\n\n    this.changed();\n  };\n\n  return MultiPolygon;\n}(SimpleGeometry);\n\nexport default MultiPolygon;","/**\n * @module ol/geom/flat/center\n */\nimport { createEmpty, createOrUpdateFromFlatCoordinates } from '../../extent.js';\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {Array<number>} Flat centers.\n */\n\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  var flatCenters = [];\n  var extent = createEmpty();\n\n  for (var i = 0, ii = endss.length; i < ii; ++i) {\n    var ends = endss[i];\n    extent = createOrUpdateFromFlatCoordinates(flatCoordinates, offset, ends[0], stride);\n    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n    offset = ends[ends.length - 1];\n  }\n\n  return flatCenters;\n}","/**\n * @module ol/format/GeoJSON\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport Feature from '../Feature.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport JSONFeature from './JSONFeature.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport { assert } from '../asserts.js';\nimport { assign, isEmpty } from '../obj.js';\nimport { get as getProjection } from '../proj.js';\nimport { transformGeometryWithOptions } from './Feature.js';\n/**\n * @typedef {import(\"geojson\").GeoJSON} GeoJSONObject\n * @typedef {import(\"geojson\").Feature} GeoJSONFeature\n * @typedef {import(\"geojson\").FeatureCollection} GeoJSONFeatureCollection\n * @typedef {import(\"geojson\").Geometry} GeoJSONGeometry\n * @typedef {import(\"geojson\").Point} GeoJSONPoint\n * @typedef {import(\"geojson\").LineString} GeoJSONLineString\n * @typedef {import(\"geojson\").Polygon} GeoJSONPolygon\n * @typedef {import(\"geojson\").MultiPoint} GeoJSONMultiPoint\n * @typedef {import(\"geojson\").MultiLineString} GeoJSONMultiLineString\n * @typedef {import(\"geojson\").MultiPolygon} GeoJSONMultiPolygon\n * @typedef {import(\"geojson\").GeometryCollection} GeoJSONGeometryCollection\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection for features read or\n * written by the format.  Options passed to read or write methods will take precedence.\n * @property {string} [geometryName] Geometry name to use when creating features.\n * @property {boolean} [extractGeometryName=false] Certain GeoJSON providers include\n * the geometry_name field in the feature GeoJSON. If set to `true` the GeoJSON reader\n * will look for that field to set the geometry name. If both this field is set to `true`\n * and a `geometryName` is provided, the `geometryName` will take precedence.\n */\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GeoJSON format.\n *\n * @api\n */\n\nvar GeoJSON =\n/** @class */\nfunction (_super) {\n  __extends(GeoJSON, _super);\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n\n\n  function GeoJSON(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    _this = _super.call(this) || this;\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n\n    _this.dataProjection = getProjection(options.dataProjection ? options.dataProjection : 'EPSG:4326');\n\n    if (options.featureProjection) {\n      /**\n       * @type {import(\"../proj/Projection.js\").default}\n       */\n      _this.defaultFeatureProjection = getProjection(options.featureProjection);\n    }\n    /**\n     * Name of the geometry attribute for features.\n     * @type {string|undefined}\n     * @private\n     */\n\n\n    _this.geometryName_ = options.geometryName;\n    /**\n     * Look for the geometry name in the feature GeoJSON\n     * @type {boolean|undefined}\n     * @private\n     */\n\n    _this.extractGeometryName_ = options.extractGeometryName;\n    _this.supportedMediaTypes = ['application/geo+json', 'application/vnd.geo+json'];\n    return _this;\n  }\n  /**\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @protected\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n\n\n  GeoJSON.prototype.readFeatureFromObject = function (object, opt_options) {\n    /**\n     * @type {GeoJSONFeature}\n     */\n    var geoJSONFeature = null;\n\n    if (object['type'] === 'Feature') {\n      geoJSONFeature =\n      /** @type {GeoJSONFeature} */\n      object;\n    } else {\n      geoJSONFeature = {\n        'type': 'Feature',\n        'geometry':\n        /** @type {GeoJSONGeometry} */\n        object,\n        'properties': null\n      };\n    }\n\n    var geometry = readGeometry(geoJSONFeature['geometry'], opt_options);\n    var feature = new Feature();\n\n    if (this.geometryName_) {\n      feature.setGeometryName(this.geometryName_);\n    } else if (this.extractGeometryName_ && 'geometry_name' in geoJSONFeature !== undefined) {\n      feature.setGeometryName(geoJSONFeature['geometry_name']);\n    }\n\n    feature.setGeometry(geometry);\n\n    if ('id' in geoJSONFeature) {\n      feature.setId(geoJSONFeature['id']);\n    }\n\n    if (geoJSONFeature['properties']) {\n      feature.setProperties(geoJSONFeature['properties'], true);\n    }\n\n    return feature;\n  };\n  /**\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @protected\n   * @return {Array<Feature>} Features.\n   */\n\n\n  GeoJSON.prototype.readFeaturesFromObject = function (object, opt_options) {\n    var geoJSONObject =\n    /** @type {GeoJSONObject} */\n    object;\n    /** @type {Array<import(\"../Feature.js\").default>} */\n\n    var features = null;\n\n    if (geoJSONObject['type'] === 'FeatureCollection') {\n      var geoJSONFeatureCollection =\n      /** @type {GeoJSONFeatureCollection} */\n      object;\n      features = [];\n      var geoJSONFeatures = geoJSONFeatureCollection['features'];\n\n      for (var i = 0, ii = geoJSONFeatures.length; i < ii; ++i) {\n        features.push(this.readFeatureFromObject(geoJSONFeatures[i], opt_options));\n      }\n    } else {\n      features = [this.readFeatureFromObject(object, opt_options)];\n    }\n\n    return features;\n  };\n  /**\n   * @param {GeoJSONGeometry} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n\n\n  GeoJSON.prototype.readGeometryFromObject = function (object, opt_options) {\n    return readGeometry(object, opt_options);\n  };\n  /**\n   * @param {Object} object Object.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n\n\n  GeoJSON.prototype.readProjectionFromObject = function (object) {\n    var crs = object['crs'];\n    var projection;\n\n    if (crs) {\n      if (crs['type'] == 'name') {\n        projection = getProjection(crs['properties']['name']);\n      } else if (crs['type'] === 'EPSG') {\n        projection = getProjection('EPSG:' + crs['properties']['code']);\n      } else {\n        assert(false, 36); // Unknown SRS type\n      }\n    } else {\n      projection = this.dataProjection;\n    }\n\n    return (\n      /** @type {import(\"../proj/Projection.js\").default} */\n      projection\n    );\n  };\n  /**\n   * Encode a feature as a GeoJSON Feature object.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {GeoJSONFeature} Object.\n   * @api\n   */\n\n\n  GeoJSON.prototype.writeFeatureObject = function (feature, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    /** @type {GeoJSONFeature} */\n\n    var object = {\n      'type': 'Feature',\n      geometry: null,\n      properties: null\n    };\n    var id = feature.getId();\n\n    if (id !== undefined) {\n      object.id = id;\n    }\n\n    if (!feature.hasProperties()) {\n      return object;\n    }\n\n    var properties = feature.getProperties();\n    var geometry = feature.getGeometry();\n\n    if (geometry) {\n      object.geometry = writeGeometry(geometry, opt_options);\n      delete properties[feature.getGeometryName()];\n    }\n\n    if (!isEmpty(properties)) {\n      object.properties = properties;\n    }\n\n    return object;\n  };\n  /**\n   * Encode an array of features as a GeoJSON object.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {GeoJSONFeatureCollection} GeoJSON Object.\n   * @api\n   */\n\n\n  GeoJSON.prototype.writeFeaturesObject = function (features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    var objects = [];\n\n    for (var i = 0, ii = features.length; i < ii; ++i) {\n      objects.push(this.writeFeatureObject(features[i], opt_options));\n    }\n\n    return {\n      type: 'FeatureCollection',\n      features: objects\n    };\n  };\n  /**\n   * Encode a geometry as a GeoJSON object.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n   * @return {GeoJSONGeometry|GeoJSONGeometryCollection} Object.\n   * @api\n   */\n\n\n  GeoJSON.prototype.writeGeometryObject = function (geometry, opt_options) {\n    return writeGeometry(geometry, this.adaptOptions(opt_options));\n  };\n\n  return GeoJSON;\n}(JSONFeature);\n/**\n * @param {GeoJSONGeometry|GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\n\n\nfunction readGeometry(object, opt_options) {\n  if (!object) {\n    return null;\n  }\n  /**\n   * @type {import(\"../geom/Geometry.js\").default}\n   */\n\n\n  var geometry;\n\n  switch (object['type']) {\n    case GeometryType.POINT:\n      {\n        geometry = readPointGeometry(\n        /** @type {GeoJSONPoint} */\n        object);\n        break;\n      }\n\n    case GeometryType.LINE_STRING:\n      {\n        geometry = readLineStringGeometry(\n        /** @type {GeoJSONLineString} */\n        object);\n        break;\n      }\n\n    case GeometryType.POLYGON:\n      {\n        geometry = readPolygonGeometry(\n        /** @type {GeoJSONPolygon} */\n        object);\n        break;\n      }\n\n    case GeometryType.MULTI_POINT:\n      {\n        geometry = readMultiPointGeometry(\n        /** @type {GeoJSONMultiPoint} */\n        object);\n        break;\n      }\n\n    case GeometryType.MULTI_LINE_STRING:\n      {\n        geometry = readMultiLineStringGeometry(\n        /** @type {GeoJSONMultiLineString} */\n        object);\n        break;\n      }\n\n    case GeometryType.MULTI_POLYGON:\n      {\n        geometry = readMultiPolygonGeometry(\n        /** @type {GeoJSONMultiPolygon} */\n        object);\n        break;\n      }\n\n    case GeometryType.GEOMETRY_COLLECTION:\n      {\n        geometry = readGeometryCollectionGeometry(\n        /** @type {GeoJSONGeometryCollection} */\n        object);\n        break;\n      }\n\n    default:\n      {\n        throw new Error('Unsupported GeoJSON type: ' + object.type);\n      }\n  }\n\n  return transformGeometryWithOptions(geometry, false, opt_options);\n}\n/**\n * @param {GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions} [opt_options] Read options.\n * @return {GeometryCollection} Geometry collection.\n */\n\n\nfunction readGeometryCollectionGeometry(object, opt_options) {\n  var geometries = object['geometries'].map(\n  /**\n   * @param {GeoJSONGeometry} geometry Geometry.\n   * @return {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   */\n  function (geometry) {\n    return readGeometry(geometry, opt_options);\n  });\n  return new GeometryCollection(geometries);\n}\n/**\n * @param {GeoJSONPoint} object Object.\n * @return {Point} Point.\n */\n\n\nfunction readPointGeometry(object) {\n  return new Point(object['coordinates']);\n}\n/**\n * @param {GeoJSONLineString} object Object.\n * @return {LineString} LineString.\n */\n\n\nfunction readLineStringGeometry(object) {\n  return new LineString(object['coordinates']);\n}\n/**\n * @param {GeoJSONMultiLineString} object Object.\n * @return {MultiLineString} MultiLineString.\n */\n\n\nfunction readMultiLineStringGeometry(object) {\n  return new MultiLineString(object['coordinates']);\n}\n/**\n * @param {GeoJSONMultiPoint} object Object.\n * @return {MultiPoint} MultiPoint.\n */\n\n\nfunction readMultiPointGeometry(object) {\n  return new MultiPoint(object['coordinates']);\n}\n/**\n * @param {GeoJSONMultiPolygon} object Object.\n * @return {MultiPolygon} MultiPolygon.\n */\n\n\nfunction readMultiPolygonGeometry(object) {\n  return new MultiPolygon(object['coordinates']);\n}\n/**\n * @param {GeoJSONPolygon} object Object.\n * @return {Polygon} Polygon.\n */\n\n\nfunction readPolygonGeometry(object) {\n  return new Polygon(object['coordinates']);\n}\n/**\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writeGeometry(geometry, opt_options) {\n  geometry = transformGeometryWithOptions(geometry, true, opt_options);\n  var type = geometry.getType();\n  /** @type {GeoJSONGeometry} */\n\n  var geoJSON;\n\n  switch (type) {\n    case GeometryType.POINT:\n      {\n        geoJSON = writePointGeometry(\n        /** @type {Point} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.LINE_STRING:\n      {\n        geoJSON = writeLineStringGeometry(\n        /** @type {LineString} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.POLYGON:\n      {\n        geoJSON = writePolygonGeometry(\n        /** @type {Polygon} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.MULTI_POINT:\n      {\n        geoJSON = writeMultiPointGeometry(\n        /** @type {MultiPoint} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.MULTI_LINE_STRING:\n      {\n        geoJSON = writeMultiLineStringGeometry(\n        /** @type {MultiLineString} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.MULTI_POLYGON:\n      {\n        geoJSON = writeMultiPolygonGeometry(\n        /** @type {MultiPolygon} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.GEOMETRY_COLLECTION:\n      {\n        geoJSON = writeGeometryCollectionGeometry(\n        /** @type {GeometryCollection} */\n        geometry, opt_options);\n        break;\n      }\n\n    case GeometryType.CIRCLE:\n      {\n        geoJSON = {\n          type: 'GeometryCollection',\n          geometries: []\n        };\n        break;\n      }\n\n    default:\n      {\n        throw new Error('Unsupported geometry type: ' + type);\n      }\n  }\n\n  return geoJSON;\n}\n/**\n * @param {GeometryCollection} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometryCollection} GeoJSON geometry collection.\n */\n\n\nfunction writeGeometryCollectionGeometry(geometry, opt_options) {\n  var geometries = geometry.getGeometriesArray().map(function (geometry) {\n    var options = assign({}, opt_options);\n    delete options.featureProjection;\n    return writeGeometry(geometry, options);\n  });\n  return {\n    type: 'GeometryCollection',\n    geometries: geometries\n  };\n}\n/**\n * @param {LineString} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writeLineStringGeometry(geometry, opt_options) {\n  return {\n    type: 'LineString',\n    coordinates: geometry.getCoordinates()\n  };\n}\n/**\n * @param {MultiLineString} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writeMultiLineStringGeometry(geometry, opt_options) {\n  return {\n    type: 'MultiLineString',\n    coordinates: geometry.getCoordinates()\n  };\n}\n/**\n * @param {MultiPoint} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writeMultiPointGeometry(geometry, opt_options) {\n  return {\n    type: 'MultiPoint',\n    coordinates: geometry.getCoordinates()\n  };\n}\n/**\n * @param {MultiPolygon} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writeMultiPolygonGeometry(geometry, opt_options) {\n  var right;\n\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n\n  return {\n    type: 'MultiPolygon',\n    coordinates: geometry.getCoordinates(right)\n  };\n}\n/**\n * @param {Point} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writePointGeometry(geometry, opt_options) {\n  return {\n    type: 'Point',\n    coordinates: geometry.getCoordinates()\n  };\n}\n/**\n * @param {Polygon} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions} [opt_options] Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\n\n\nfunction writePolygonGeometry(geometry, opt_options) {\n  var right;\n\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n\n  return {\n    type: 'Polygon',\n    coordinates: geometry.getCoordinates(right)\n  };\n}\n\nexport default GeoJSON;","/**\n * @module ol/geom/flat/length\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Length.\n */\nexport function lineStringLength(flatCoordinates, offset, end, stride) {\n  var x1 = flatCoordinates[offset];\n  var y1 = flatCoordinates[offset + 1];\n  var length = 0;\n\n  for (var i = offset + stride; i < end; i += stride) {\n    var x2 = flatCoordinates[i];\n    var y2 = flatCoordinates[i + 1];\n    length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    x1 = x2;\n    y1 = y2;\n  }\n\n  return length;\n}\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Perimeter.\n */\n\nexport function linearRingLength(flatCoordinates, offset, end, stride) {\n  var perimeter = lineStringLength(flatCoordinates, offset, end, stride);\n  var dx = flatCoordinates[end - stride] - flatCoordinates[offset];\n  var dy = flatCoordinates[end - stride + 1] - flatCoordinates[offset + 1];\n  perimeter += Math.sqrt(dx * dx + dy * dy);\n  return perimeter;\n}","/**\n * @module ol/style/Image\n */\nimport { abstract } from '../util.js';\nimport { toSize } from '../size.js';\n/**\n * @typedef {Object} Options\n * @property {number} opacity Opacity.\n * @property {boolean} rotateWithView If the image should get rotated with the view.\n * @property {number} rotation Rotation.\n * @property {number|import(\"../size.js\").Size} scale Scale.\n * @property {Array<number>} displacement Displacement.\n */\n\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\n\nvar ImageStyle =\n/** @class */\nfunction () {\n  /**\n   * @param {Options} options Options.\n   */\n  function ImageStyle(options) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.opacity_ = options.opacity;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this.rotateWithView_ = options.rotateWithView;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.rotation_ = options.rotation;\n    /**\n     * @private\n     * @type {number|import(\"../size.js\").Size}\n     */\n\n    this.scale_ = options.scale;\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n\n    this.scaleArray_ = toSize(options.scale);\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    this.displacement_ = options.displacement;\n  }\n  /**\n   * Clones the style.\n   * @return {ImageStyle} The cloned style.\n   * @api\n   */\n\n\n  ImageStyle.prototype.clone = function () {\n    var scale = this.getScale();\n    return new ImageStyle({\n      opacity: this.getOpacity(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      displacement: this.getDisplacement().slice()\n    });\n  };\n  /**\n   * Get the symbolizer opacity.\n   * @return {number} Opacity.\n   * @api\n   */\n\n\n  ImageStyle.prototype.getOpacity = function () {\n    return this.opacity_;\n  };\n  /**\n   * Determine whether the symbolizer rotates with the map.\n   * @return {boolean} Rotate with map.\n   * @api\n   */\n\n\n  ImageStyle.prototype.getRotateWithView = function () {\n    return this.rotateWithView_;\n  };\n  /**\n   * Get the symoblizer rotation.\n   * @return {number} Rotation.\n   * @api\n   */\n\n\n  ImageStyle.prototype.getRotation = function () {\n    return this.rotation_;\n  };\n  /**\n   * Get the symbolizer scale.\n   * @return {number|import(\"../size.js\").Size} Scale.\n   * @api\n   */\n\n\n  ImageStyle.prototype.getScale = function () {\n    return this.scale_;\n  };\n  /**\n   * Get the symbolizer scale array.\n   * @return {import(\"../size.js\").Size} Scale array.\n   */\n\n\n  ImageStyle.prototype.getScaleArray = function () {\n    return this.scaleArray_;\n  };\n  /**\n   * Get the displacement of the shape\n   * @return {Array<number>} Shape's center displacement\n   * @api\n   */\n\n\n  ImageStyle.prototype.getDisplacement = function () {\n    return this.displacement_;\n  };\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @abstract\n   * @return {Array<number>} Anchor.\n   */\n\n\n  ImageStyle.prototype.getAnchor = function () {\n    return abstract();\n  };\n  /**\n   * Get the image element for the symbolizer.\n   * @abstract\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n\n\n  ImageStyle.prototype.getImage = function (pixelRatio) {\n    return abstract();\n  };\n  /**\n   * @abstract\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n\n\n  ImageStyle.prototype.getHitDetectionImage = function () {\n    return abstract();\n  };\n  /**\n   * Get the image pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Pixel ratio.\n   */\n\n\n  ImageStyle.prototype.getPixelRatio = function (pixelRatio) {\n    return 1;\n  };\n  /**\n   * @abstract\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n\n\n  ImageStyle.prototype.getImageState = function () {\n    return abstract();\n  };\n  /**\n   * @abstract\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n\n\n  ImageStyle.prototype.getImageSize = function () {\n    return abstract();\n  };\n  /**\n   * Get the origin of the symbolizer.\n   * @abstract\n   * @return {Array<number>} Origin.\n   */\n\n\n  ImageStyle.prototype.getOrigin = function () {\n    return abstract();\n  };\n  /**\n   * Get the size of the symbolizer (in pixels).\n   * @abstract\n   * @return {import(\"../size.js\").Size} Size.\n   */\n\n\n  ImageStyle.prototype.getSize = function () {\n    return abstract();\n  };\n  /**\n   * Set the displacement.\n   *\n   * @param {Array<number>} displacement Displacement.\n   * @api\n   */\n\n\n  ImageStyle.prototype.setDisplacement = function (displacement) {\n    this.displacement_ = displacement;\n  };\n  /**\n   * Set the opacity.\n   *\n   * @param {number} opacity Opacity.\n   * @api\n   */\n\n\n  ImageStyle.prototype.setOpacity = function (opacity) {\n    this.opacity_ = opacity;\n  };\n  /**\n   * Set whether to rotate the style with the view.\n   *\n   * @param {boolean} rotateWithView Rotate with map.\n   * @api\n   */\n\n\n  ImageStyle.prototype.setRotateWithView = function (rotateWithView) {\n    this.rotateWithView_ = rotateWithView;\n  };\n  /**\n   * Set the rotation.\n   *\n   * @param {number} rotation Rotation.\n   * @api\n   */\n\n\n  ImageStyle.prototype.setRotation = function (rotation) {\n    this.rotation_ = rotation;\n  };\n  /**\n   * Set the scale.\n   *\n   * @param {number|import(\"../size.js\").Size} scale Scale.\n   * @api\n   */\n\n\n  ImageStyle.prototype.setScale = function (scale) {\n    this.scale_ = scale;\n    this.scaleArray_ = toSize(scale);\n  };\n  /**\n   * @abstract\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n\n\n  ImageStyle.prototype.listenImageChange = function (listener) {\n    abstract();\n  };\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n\n\n  ImageStyle.prototype.load = function () {\n    abstract();\n  };\n  /**\n   * @abstract\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n\n\n  ImageStyle.prototype.unlistenImageChange = function (listener) {\n    abstract();\n  };\n\n  return ImageStyle;\n}();\n\nexport default ImageStyle;","/**\n * @module ol/colorlike\n */\nimport { toString } from './color.js';\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n\n/**\n * @param {import(\"./color.js\").Color|ColorLike} color Color.\n * @return {ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\n\nexport function asColorLike(color) {\n  if (Array.isArray(color)) {\n    return toString(color);\n  } else {\n    return color;\n  }\n}","/**\n * @module ol/style/RegularShape\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport { asArray } from '../color.js';\nimport { asColorLike } from '../colorlike.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { defaultFillStyle, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle } from '../render/canvas.js';\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] First radius of a star. Ignored if radius is set.\n * @property {number} [radius2] Second radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {Array<number>} [displacement=[0,0]] Displacement of the shape\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale. Unless two dimensional scaling is required a better\n * result may be obtained with appropriate settings for `radius`, `radius1` and `radius2`.\n */\n\n/**\n * @typedef {Object} RenderOptions\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle] StrokeStyle.\n * @property {number} strokeWidth StrokeWidth.\n * @property {number} size Size.\n * @property {Array<number>} lineDash LineDash.\n * @property {number} lineDashOffset LineDashOffset.\n * @property {CanvasLineJoin} lineJoin LineJoin.\n * @property {number} miterLimit MiterLimit.\n */\n\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\n\nvar RegularShape =\n/** @class */\nfunction (_super) {\n  __extends(RegularShape, _super);\n  /**\n   * @param {Options} options Options.\n   */\n\n\n  function RegularShape(options) {\n    var _this = this;\n    /**\n     * @type {boolean}\n     */\n\n\n    var rotateWithView = options.rotateWithView !== undefined ? options.rotateWithView : false;\n    _this = _super.call(this, {\n      opacity: 1,\n      rotateWithView: rotateWithView,\n      rotation: options.rotation !== undefined ? options.rotation : 0,\n      scale: options.scale !== undefined ? options.scale : 1,\n      displacement: options.displacement !== undefined ? options.displacement : [0, 0]\n    }) || this;\n    /**\n     * @private\n     * @type {Object<number, HTMLCanvasElement>}\n     */\n\n    _this.canvas_ = undefined;\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n\n    _this.hitDetectionCanvas_ = null;\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n\n    _this.fill_ = options.fill !== undefined ? options.fill : null;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.origin_ = [0, 0];\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.points_ = options.points;\n    /**\n     * @protected\n     * @type {number}\n     */\n\n    _this.radius_ = options.radius !== undefined ? options.radius : options.radius1;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.radius2_ = options.radius2;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.angle_ = options.angle !== undefined ? options.angle : 0;\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n\n    _this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n\n    _this.size_ = null;\n    /**\n     * @private\n     * @type {RenderOptions}\n     */\n\n    _this.renderOptions_ = null;\n\n    _this.render();\n\n    return _this;\n  }\n  /**\n   * Clones the style.\n   * @return {RegularShape} The cloned style.\n   * @api\n   */\n\n\n  RegularShape.prototype.clone = function () {\n    var scale = this.getScale();\n    var style = new RegularShape({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      points: this.getPoints(),\n      radius: this.getRadius(),\n      radius2: this.getRadius2(),\n      angle: this.getAngle(),\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      displacement: this.getDisplacement().slice()\n    });\n    style.setOpacity(this.getOpacity());\n    return style;\n  };\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @return {Array<number>} Anchor.\n   * @api\n   */\n\n\n  RegularShape.prototype.getAnchor = function () {\n    var size = this.size_;\n\n    if (!size) {\n      return null;\n    }\n\n    var displacement = this.getDisplacement();\n    return [size[0] / 2 - displacement[0], size[1] / 2 + displacement[1]];\n  };\n  /**\n   * Get the angle used in generating the shape.\n   * @return {number} Shape's rotation in radians.\n   * @api\n   */\n\n\n  RegularShape.prototype.getAngle = function () {\n    return this.angle_;\n  };\n  /**\n   * Get the fill style for the shape.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n\n\n  RegularShape.prototype.getFill = function () {\n    return this.fill_;\n  };\n  /**\n   * @return {HTMLCanvasElement} Image element.\n   */\n\n\n  RegularShape.prototype.getHitDetectionImage = function () {\n    if (!this.hitDetectionCanvas_) {\n      this.createHitDetectionCanvas_(this.renderOptions_);\n    }\n\n    return this.hitDetectionCanvas_;\n  };\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement} Image or Canvas element.\n   * @api\n   */\n\n\n  RegularShape.prototype.getImage = function (pixelRatio) {\n    var image = this.canvas_[pixelRatio];\n\n    if (!image) {\n      var renderOptions = this.renderOptions_;\n      var context = createCanvasContext2D(renderOptions.size * pixelRatio, renderOptions.size * pixelRatio);\n      this.draw_(renderOptions, context, pixelRatio);\n      image = context.canvas;\n      this.canvas_[pixelRatio] = image;\n    }\n\n    return image;\n  };\n  /**\n   * Get the image pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Pixel ratio.\n   */\n\n\n  RegularShape.prototype.getPixelRatio = function (pixelRatio) {\n    return pixelRatio;\n  };\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n\n\n  RegularShape.prototype.getImageSize = function () {\n    return this.size_;\n  };\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n\n\n  RegularShape.prototype.getImageState = function () {\n    return ImageState.LOADED;\n  };\n  /**\n   * Get the origin of the symbolizer.\n   * @return {Array<number>} Origin.\n   * @api\n   */\n\n\n  RegularShape.prototype.getOrigin = function () {\n    return this.origin_;\n  };\n  /**\n   * Get the number of points for generating the shape.\n   * @return {number} Number of points for stars and regular polygons.\n   * @api\n   */\n\n\n  RegularShape.prototype.getPoints = function () {\n    return this.points_;\n  };\n  /**\n   * Get the (primary) radius for the shape.\n   * @return {number} Radius.\n   * @api\n   */\n\n\n  RegularShape.prototype.getRadius = function () {\n    return this.radius_;\n  };\n  /**\n   * Get the secondary radius for the shape.\n   * @return {number|undefined} Radius2.\n   * @api\n   */\n\n\n  RegularShape.prototype.getRadius2 = function () {\n    return this.radius2_;\n  };\n  /**\n   * Get the size of the symbolizer (in pixels).\n   * @return {import(\"../size.js\").Size} Size.\n   * @api\n   */\n\n\n  RegularShape.prototype.getSize = function () {\n    return this.size_;\n  };\n  /**\n   * Get the stroke style for the shape.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n\n\n  RegularShape.prototype.getStroke = function () {\n    return this.stroke_;\n  };\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n\n\n  RegularShape.prototype.listenImageChange = function (listener) {};\n  /**\n   * Load not yet loaded URI.\n   */\n\n\n  RegularShape.prototype.load = function () {};\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n\n\n  RegularShape.prototype.unlistenImageChange = function (listener) {};\n  /**\n   * Calculate additional canvas size needed for the miter.\n   * @param {string} lineJoin Line join\n   * @param {number} strokeWidth Stroke width\n   * @param {number} miterLimit Miter limit\n   * @return {number} Additional canvas size needed\n   * @private\n   */\n\n\n  RegularShape.prototype.calculateLineJoinSize_ = function (lineJoin, strokeWidth, miterLimit) {\n    if (strokeWidth === 0 || this.points_ === Infinity || lineJoin !== 'bevel' && lineJoin !== 'miter') {\n      return strokeWidth;\n    } // m  | ^\n    // i  | |\\                  .\n    // t >|  #\\\n    // e  | |\\ \\              .\n    // r      \\s\\\n    //      |  \\t\\          .                 .\n    //          \\r\\                      .   .\n    //      |    \\o\\      .          .  . . .\n    //          e \\k\\            .  .    . .\n    //      |      \\e\\  .    .  .       . .\n    //       d      \\ \\  .  .          . .\n    //      | _ _a_ _\\#  .            . .\n    //   r1          / `             . .\n    //      |                       . .\n    //       b     /               . .\n    //      |                     . .\n    //           / r2            . .\n    //      |                        .   .\n    //         /                           .   .\n    //      |                                   .   .\n    //       /                                         .   .\n    //       center\n\n\n    var r1 = this.radius_;\n    var r2 = this.radius2_ === undefined ? r1 : this.radius2_;\n\n    if (r1 < r2) {\n      var tmp = r1;\n      r1 = r2;\n      r2 = tmp;\n    }\n\n    var points = this.radius2_ === undefined ? this.points_ : this.points_ * 2;\n    var alpha = 2 * Math.PI / points;\n    var a = r2 * Math.sin(alpha);\n    var b = Math.sqrt(r2 * r2 - a * a);\n    var d = r1 - b;\n    var e = Math.sqrt(a * a + d * d);\n    var miterRatio = e / a;\n\n    if (lineJoin === 'miter' && miterRatio <= miterLimit) {\n      return miterRatio * strokeWidth;\n    } // Calculate the distnce from center to the stroke corner where\n    // it was cut short because of the miter limit.\n    //              l\n    //        ----+---- <= distance from center to here is maxr\n    //       /####|k ##\\\n    //      /#####^#####\\\n    //     /#### /+\\# s #\\\n    //    /### h/+++\\# t #\\\n    //   /### t/+++++\\# r #\\\n    //  /### a/+++++++\\# o #\\\n    // /### p/++ fill +\\# k #\\\n    ///#### /+++++^+++++\\# e #\\\n    //#####/+++++/+\\+++++\\#####\\\n\n\n    var k = strokeWidth / 2 / miterRatio;\n    var l = strokeWidth / 2 * (d / e);\n    var maxr = Math.sqrt((r1 + k) * (r1 + k) + l * l);\n    var bevelAdd = maxr - r1;\n\n    if (this.radius2_ === undefined || lineJoin === 'bevel') {\n      return bevelAdd * 2;\n    } // If outer miter is over the miter limit the inner miter may reach through the\n    // center and be longer than the bevel, same calculation as above but swap r1 / r2.\n\n\n    var aa = r1 * Math.sin(alpha);\n    var bb = Math.sqrt(r1 * r1 - aa * aa);\n    var dd = r2 - bb;\n    var ee = Math.sqrt(aa * aa + dd * dd);\n    var innerMiterRatio = ee / aa;\n\n    if (innerMiterRatio <= miterLimit) {\n      var innerLength = innerMiterRatio * strokeWidth / 2 - r2 - r1;\n      return 2 * Math.max(bevelAdd, innerLength);\n    }\n\n    return bevelAdd * 2;\n  };\n  /**\n   * @return {RenderOptions}  The render options\n   * @protected\n   */\n\n\n  RegularShape.prototype.createRenderOptions = function () {\n    var lineJoin = defaultLineJoin;\n    var miterLimit = 0;\n    var lineDash = null;\n    var lineDashOffset = 0;\n    var strokeStyle;\n    var strokeWidth = 0;\n\n    if (this.stroke_) {\n      strokeStyle = this.stroke_.getColor();\n\n      if (strokeStyle === null) {\n        strokeStyle = defaultStrokeStyle;\n      }\n\n      strokeStyle = asColorLike(strokeStyle);\n      strokeWidth = this.stroke_.getWidth();\n\n      if (strokeWidth === undefined) {\n        strokeWidth = defaultLineWidth;\n      }\n\n      lineDash = this.stroke_.getLineDash();\n      lineDashOffset = this.stroke_.getLineDashOffset();\n      lineJoin = this.stroke_.getLineJoin();\n\n      if (lineJoin === undefined) {\n        lineJoin = defaultLineJoin;\n      }\n\n      miterLimit = this.stroke_.getMiterLimit();\n\n      if (miterLimit === undefined) {\n        miterLimit = defaultMiterLimit;\n      }\n    }\n\n    var add = this.calculateLineJoinSize_(lineJoin, strokeWidth, miterLimit);\n    var maxRadius = Math.max(this.radius_, this.radius2_ || 0);\n    var size = Math.ceil(2 * maxRadius + add);\n    return {\n      strokeStyle: strokeStyle,\n      strokeWidth: strokeWidth,\n      size: size,\n      lineDash: lineDash,\n      lineDashOffset: lineDashOffset,\n      lineJoin: lineJoin,\n      miterLimit: miterLimit\n    };\n  };\n  /**\n   * @protected\n   */\n\n\n  RegularShape.prototype.render = function () {\n    this.renderOptions_ = this.createRenderOptions();\n    var size = this.renderOptions_.size;\n    this.canvas_ = {};\n    this.size_ = [size, size];\n  };\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The rendering context.\n   * @param {number} pixelRatio The pixel ratio.\n   */\n\n\n  RegularShape.prototype.draw_ = function (renderOptions, context, pixelRatio) {\n    context.scale(pixelRatio, pixelRatio); // set origin to canvas center\n\n    context.translate(renderOptions.size / 2, renderOptions.size / 2);\n    this.createPath_(context);\n\n    if (this.fill_) {\n      var color = this.fill_.getColor();\n\n      if (color === null) {\n        color = defaultFillStyle;\n      }\n\n      context.fillStyle = asColorLike(color);\n      context.fill();\n    }\n\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n\n      if (context.setLineDash && renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n\n      context.lineJoin = renderOptions.lineJoin;\n      context.miterLimit = renderOptions.miterLimit;\n      context.stroke();\n    }\n  };\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   */\n\n\n  RegularShape.prototype.createHitDetectionCanvas_ = function (renderOptions) {\n    if (this.fill_) {\n      var color = this.fill_.getColor(); // determine if fill is transparent (or pattern or gradient)\n\n      var opacity = 0;\n\n      if (typeof color === 'string') {\n        color = asArray(color);\n      }\n\n      if (color === null) {\n        opacity = 1;\n      } else if (Array.isArray(color)) {\n        opacity = color.length === 4 ? color[3] : 1;\n      }\n\n      if (opacity === 0) {\n        // if a transparent fill style is set, create an extra hit-detection image\n        // with a default fill style\n        var context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n        this.hitDetectionCanvas_ = context.canvas;\n        this.drawHitDetectionCanvas_(renderOptions, context);\n      }\n    }\n\n    if (!this.hitDetectionCanvas_) {\n      this.hitDetectionCanvas_ = this.getImage(1);\n    }\n  };\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context The context to draw in.\n   */\n\n\n  RegularShape.prototype.createPath_ = function (context) {\n    var points = this.points_;\n    var radius = this.radius_;\n\n    if (points === Infinity) {\n      context.arc(0, 0, radius, 0, 2 * Math.PI);\n    } else {\n      var radius2 = this.radius2_ === undefined ? radius : this.radius2_;\n\n      if (this.radius2_ !== undefined) {\n        points *= 2;\n      }\n\n      var startAngle = this.angle_ - Math.PI / 2;\n      var step = 2 * Math.PI / points;\n\n      for (var i = 0; i < points; i++) {\n        var angle0 = startAngle + i * step;\n        var radiusC = i % 2 === 0 ? radius : radius2;\n        context.lineTo(radiusC * Math.cos(angle0), radiusC * Math.sin(angle0));\n      }\n\n      context.closePath();\n    }\n  };\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The context.\n   */\n\n\n  RegularShape.prototype.drawHitDetectionCanvas_ = function (renderOptions, context) {\n    // set origin to canvas center\n    context.translate(renderOptions.size / 2, renderOptions.size / 2);\n    this.createPath_(context);\n    context.fillStyle = defaultFillStyle;\n    context.fill();\n\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n\n      if (renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n\n      context.lineJoin = renderOptions.lineJoin;\n      context.miterLimit = renderOptions.miterLimit;\n      context.stroke();\n    }\n  };\n\n  return RegularShape;\n}(ImageStyle);\n\nexport default RegularShape;","/**\n * @module ol/style/Circle\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport RegularShape from './RegularShape.js';\n/**\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {Array<number>} [displacement=[0,0]] displacement\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale. A two dimensional scale will produce an ellipse.\n * Unless two dimensional scaling is required a better result may be obtained with an appropriate setting for `radius`.\n * @property {number} [rotation=0] Rotation in radians\n * (positive rotation clockwise, meaningful only when used in conjunction with a two dimensional scale).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view\n * (meaningful only when used in conjunction with a two dimensional scale).\n */\n\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\n\nvar CircleStyle =\n/** @class */\nfunction (_super) {\n  __extends(CircleStyle, _super);\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n\n\n  function CircleStyle(opt_options) {\n    var options = opt_options ? opt_options : {};\n    return _super.call(this, {\n      points: Infinity,\n      fill: options.fill,\n      radius: options.radius,\n      stroke: options.stroke,\n      scale: options.scale !== undefined ? options.scale : 1,\n      rotation: options.rotation !== undefined ? options.rotation : 0,\n      rotateWithView: options.rotateWithView !== undefined ? options.rotateWithView : false,\n      displacement: options.displacement !== undefined ? options.displacement : [0, 0]\n    }) || this;\n  }\n  /**\n   * Clones the style.\n   * @return {CircleStyle} The cloned style.\n   * @api\n   */\n\n\n  CircleStyle.prototype.clone = function () {\n    var scale = this.getScale();\n    var style = new CircleStyle({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      radius: this.getRadius(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      displacement: this.getDisplacement().slice()\n    });\n    style.setOpacity(this.getOpacity());\n    return style;\n  };\n  /**\n   * Set the circle radius.\n   *\n   * @param {number} radius Circle radius.\n   * @api\n   */\n\n\n  CircleStyle.prototype.setRadius = function (radius) {\n    this.radius_ = radius;\n    this.render();\n  };\n\n  return CircleStyle;\n}(RegularShape);\n\nexport default CircleStyle;","/**\n * @module ol/style/Fill\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null} [color=null] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nvar Fill =\n/** @class */\nfunction () {\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n  function Fill(opt_options) {\n    var options = opt_options || {};\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null}\n     */\n\n    this.color_ = options.color !== undefined ? options.color : null;\n  }\n  /**\n   * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n   * @return {Fill} The cloned style.\n   * @api\n   */\n\n\n  Fill.prototype.clone = function () {\n    var color = this.getColor();\n    return new Fill({\n      color: Array.isArray(color) ? color.slice() : color || undefined\n    });\n  };\n  /**\n   * Get the fill color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null} Color.\n   * @api\n   */\n\n\n  Fill.prototype.getColor = function () {\n    return this.color_;\n  };\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike|null} color Color.\n   * @api\n   */\n\n\n  Fill.prototype.setColor = function (color) {\n    this.color_ = color;\n  };\n\n  return Fill;\n}();\n\nexport default Fill;","/**\n * @module ol/style/Stroke\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {CanvasLineCap} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {CanvasLineJoin} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `null` (no dash).\n * Please note that Internet Explorer 10 and lower do not support the `setLineDash` method on\n * the `CanvasRenderingContext2D` and therefore this option will have no visual effect in these browsers.\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nvar Stroke =\n/** @class */\nfunction () {\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n  function Stroke(opt_options) {\n    var options = opt_options || {};\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n     */\n\n    this.color_ = options.color !== undefined ? options.color : null;\n    /**\n     * @private\n     * @type {CanvasLineCap|undefined}\n     */\n\n    this.lineCap_ = options.lineCap;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    this.lineDashOffset_ = options.lineDashOffset;\n    /**\n     * @private\n     * @type {CanvasLineJoin|undefined}\n     */\n\n    this.lineJoin_ = options.lineJoin;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    this.miterLimit_ = options.miterLimit;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    this.width_ = options.width;\n  }\n  /**\n   * Clones the style.\n   * @return {Stroke} The cloned style.\n   * @api\n   */\n\n\n  Stroke.prototype.clone = function () {\n    var color = this.getColor();\n    return new Stroke({\n      color: Array.isArray(color) ? color.slice() : color || undefined,\n      lineCap: this.getLineCap(),\n      lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n      lineDashOffset: this.getLineDashOffset(),\n      lineJoin: this.getLineJoin(),\n      miterLimit: this.getMiterLimit(),\n      width: this.getWidth()\n    });\n  };\n  /**\n   * Get the stroke color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n   * @api\n   */\n\n\n  Stroke.prototype.getColor = function () {\n    return this.color_;\n  };\n  /**\n   * Get the line cap type for the stroke.\n   * @return {CanvasLineCap|undefined} Line cap.\n   * @api\n   */\n\n\n  Stroke.prototype.getLineCap = function () {\n    return this.lineCap_;\n  };\n  /**\n   * Get the line dash style for the stroke.\n   * @return {Array<number>} Line dash.\n   * @api\n   */\n\n\n  Stroke.prototype.getLineDash = function () {\n    return this.lineDash_;\n  };\n  /**\n   * Get the line dash offset for the stroke.\n   * @return {number|undefined} Line dash offset.\n   * @api\n   */\n\n\n  Stroke.prototype.getLineDashOffset = function () {\n    return this.lineDashOffset_;\n  };\n  /**\n   * Get the line join type for the stroke.\n   * @return {CanvasLineJoin|undefined} Line join.\n   * @api\n   */\n\n\n  Stroke.prototype.getLineJoin = function () {\n    return this.lineJoin_;\n  };\n  /**\n   * Get the miter limit for the stroke.\n   * @return {number|undefined} Miter limit.\n   * @api\n   */\n\n\n  Stroke.prototype.getMiterLimit = function () {\n    return this.miterLimit_;\n  };\n  /**\n   * Get the stroke width.\n   * @return {number|undefined} Width.\n   * @api\n   */\n\n\n  Stroke.prototype.getWidth = function () {\n    return this.width_;\n  };\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n   * @api\n   */\n\n\n  Stroke.prototype.setColor = function (color) {\n    this.color_ = color;\n  };\n  /**\n   * Set the line cap.\n   *\n   * @param {CanvasLineCap|undefined} lineCap Line cap.\n   * @api\n   */\n\n\n  Stroke.prototype.setLineCap = function (lineCap) {\n    this.lineCap_ = lineCap;\n  };\n  /**\n   * Set the line dash.\n   *\n   * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n   * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n   * property will have no visual effect in these browsers.\n   *\n   * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n   *\n   * @param {Array<number>} lineDash Line dash.\n   * @api\n   */\n\n\n  Stroke.prototype.setLineDash = function (lineDash) {\n    this.lineDash_ = lineDash;\n  };\n  /**\n   * Set the line dash offset.\n   *\n   * @param {number|undefined} lineDashOffset Line dash offset.\n   * @api\n   */\n\n\n  Stroke.prototype.setLineDashOffset = function (lineDashOffset) {\n    this.lineDashOffset_ = lineDashOffset;\n  };\n  /**\n   * Set the line join.\n   *\n   * @param {CanvasLineJoin|undefined} lineJoin Line join.\n   * @api\n   */\n\n\n  Stroke.prototype.setLineJoin = function (lineJoin) {\n    this.lineJoin_ = lineJoin;\n  };\n  /**\n   * Set the miter limit.\n   *\n   * @param {number|undefined} miterLimit Miter limit.\n   * @api\n   */\n\n\n  Stroke.prototype.setMiterLimit = function (miterLimit) {\n    this.miterLimit_ = miterLimit;\n  };\n  /**\n   * Set the width.\n   *\n   * @param {number|undefined} width Width.\n   * @api\n   */\n\n\n  Stroke.prototype.setWidth = function (width) {\n    this.width_ = width;\n  };\n\n  return Stroke;\n}();\n\nexport default Stroke;","/**\n * @module ol/style/Style\n */\nimport CircleStyle from './Circle.js';\nimport Fill from './Fill.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Stroke from './Stroke.js';\nimport { assert } from '../asserts.js';\n/**\n * A function that takes an {@link module:ol/Feature~Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style~Style} or an array of them. This way e.g. a\n * vector layer can be styled. If the function returns `undefined`, the\n * feature will not be rendered.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike, number):(Style|Array<Style>|void)} StyleFunction\n */\n\n/**\n * A {@link Style}, an array of {@link Style}, or a {@link StyleFunction}.\n * @typedef {Style|Array<Style>|StyleFunction} StyleLike\n */\n\n/**\n * A function that takes an {@link module:ol/Feature~Feature} as argument and returns an\n * {@link module:ol/geom/Geometry~Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike):\n *     (import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined)} GeometryFunction\n */\n\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((import(\"../coordinate.js\").Coordinate|Array<import(\"../coordinate.js\").Coordinate>|Array<Array<import(\"../coordinate.js\").Coordinate>>),import(\"../render.js\").State): void}\n * RenderFunction\n */\n\n/**\n * @typedef {Object} Options\n * @property {string|import(\"../geom/Geometry.js\").default|GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {import(\"./Image.js\").default} [image] Image style.\n * @property {RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {RenderFunction} [hitDetectionRenderer] Custom renderer for hit detection. If provided will be used\n * in hit detection rendering.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Text.js\").default} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n *\n * ## Feature styles\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Circle, Fill, Stroke, Style} from 'ol/style';\n *\n *  const fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)',\n *  });\n *  const stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25,\n *  });\n *  const styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5,\n *      }),\n *      fill: fill,\n *      stroke: stroke,\n *    }),\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import GeometryType from 'ol/geom/GeometryType';\n *  import {Circle, Fill, Stroke, Style} from 'ol/style';\n *\n *  const styles = {};\n *  const white = [255, 255, 255, 1];\n *  const blue = [0, 153, 255, 1];\n *  const width = 3;\n *  styles[GeometryType.POLYGON] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5],\n *      }),\n *    }),\n *  ];\n *  styles[GeometryType.MULTI_POLYGON] = styles[GeometryType.POLYGON];\n *\n *  styles[GeometryType.LINE_STRING] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2,\n *      }),\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width,\n *      }),\n *    }),\n *  ];\n *  styles[GeometryType.MULTI_LINE_STRING] = styles[GeometryType.LINE_STRING];\n *\n *  styles[GeometryType.CIRCLE] = styles[GeometryType.POLYGON].concat(\n *    styles[GeometryType.LINE_STRING]\n *  );\n *\n *  styles[GeometryType.POINT] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue,\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2,\n *        }),\n *      }),\n *      zIndex: Infinity,\n *    }),\n *  ];\n *  styles[GeometryType.MULTI_POINT] = styles[GeometryType.POINT];\n *\n *  styles[GeometryType.GEOMETRY_COLLECTION] = styles[\n *    GeometryType.POLYGON\n *  ].concat(styles[GeometryType.LINE_STRING], styles[GeometryType.POINT]);\n * ```\n *\n * @api\n */\n\nvar Style =\n/** @class */\nfunction () {\n  /**\n   * @param {Options} [opt_options] Style options.\n   */\n  function Style(opt_options) {\n    var options = opt_options || {};\n    /**\n     * @private\n     * @type {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n     */\n\n    this.geometry_ = null;\n    /**\n     * @private\n     * @type {!GeometryFunction}\n     */\n\n    this.geometryFunction_ = defaultGeometryFunction;\n\n    if (options.geometry !== undefined) {\n      this.setGeometry(options.geometry);\n    }\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n\n\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n    /**\n     * @private\n     * @type {import(\"./Image.js\").default}\n     */\n\n    this.image_ = options.image !== undefined ? options.image : null;\n    /**\n     * @private\n     * @type {RenderFunction|null}\n     */\n\n    this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n    /**\n     * @private\n     * @type {RenderFunction|null}\n     */\n\n    this.hitDetectionRenderer_ = options.hitDetectionRenderer !== undefined ? options.hitDetectionRenderer : null;\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n    /**\n     * @private\n     * @type {import(\"./Text.js\").default}\n     */\n\n    this.text_ = options.text !== undefined ? options.text : null;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    this.zIndex_ = options.zIndex;\n  }\n  /**\n   * Clones the style.\n   * @return {Style} The cloned style.\n   * @api\n   */\n\n\n  Style.prototype.clone = function () {\n    var geometry = this.getGeometry();\n\n    if (geometry && typeof geometry === 'object') {\n      geometry =\n      /** @type {import(\"../geom/Geometry.js\").default} */\n      geometry.clone();\n    }\n\n    return new Style({\n      geometry: geometry,\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      image: this.getImage() ? this.getImage().clone() : undefined,\n      renderer: this.getRenderer(),\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      text: this.getText() ? this.getText().clone() : undefined,\n      zIndex: this.getZIndex()\n    });\n  };\n  /**\n   * Get the custom renderer function that was configured with\n   * {@link #setRenderer} or the `renderer` constructor option.\n   * @return {RenderFunction|null} Custom renderer function.\n   * @api\n   */\n\n\n  Style.prototype.getRenderer = function () {\n    return this.renderer_;\n  };\n  /**\n   * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n   * and `image` options of the style will be ignored.\n   * @param {RenderFunction|null} renderer Custom renderer function.\n   * @api\n   */\n\n\n  Style.prototype.setRenderer = function (renderer) {\n    this.renderer_ = renderer;\n  };\n  /**\n   * Sets a custom renderer function for this style used\n   * in hit detection.\n   * @param {RenderFunction|null} renderer Custom renderer function.\n   * @api\n   */\n\n\n  Style.prototype.setHitDetectionRenderer = function (renderer) {\n    this.hitDetectionRenderer_ = renderer;\n  };\n  /**\n   * Get the custom renderer function that was configured with\n   * {@link #setHitDetectionRenderer} or the `hitDetectionRenderer` constructor option.\n   * @return {RenderFunction|null} Custom renderer function.\n   * @api\n   */\n\n\n  Style.prototype.getHitDetectionRenderer = function () {\n    return this.hitDetectionRenderer_;\n  };\n  /**\n   * Get the geometry to be rendered.\n   * @return {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n   * Feature property or geometry or function that returns the geometry that will\n   * be rendered with this style.\n   * @api\n   */\n\n\n  Style.prototype.getGeometry = function () {\n    return this.geometry_;\n  };\n  /**\n   * Get the function used to generate a geometry for rendering.\n   * @return {!GeometryFunction} Function that is called with a feature\n   * and returns the geometry to render instead of the feature's geometry.\n   * @api\n   */\n\n\n  Style.prototype.getGeometryFunction = function () {\n    return this.geometryFunction_;\n  };\n  /**\n   * Get the fill style.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n\n\n  Style.prototype.getFill = function () {\n    return this.fill_;\n  };\n  /**\n   * Set the fill style.\n   * @param {import(\"./Fill.js\").default} fill Fill style.\n   * @api\n   */\n\n\n  Style.prototype.setFill = function (fill) {\n    this.fill_ = fill;\n  };\n  /**\n   * Get the image style.\n   * @return {import(\"./Image.js\").default} Image style.\n   * @api\n   */\n\n\n  Style.prototype.getImage = function () {\n    return this.image_;\n  };\n  /**\n   * Set the image style.\n   * @param {import(\"./Image.js\").default} image Image style.\n   * @api\n   */\n\n\n  Style.prototype.setImage = function (image) {\n    this.image_ = image;\n  };\n  /**\n   * Get the stroke style.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n\n\n  Style.prototype.getStroke = function () {\n    return this.stroke_;\n  };\n  /**\n   * Set the stroke style.\n   * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n   * @api\n   */\n\n\n  Style.prototype.setStroke = function (stroke) {\n    this.stroke_ = stroke;\n  };\n  /**\n   * Get the text style.\n   * @return {import(\"./Text.js\").default} Text style.\n   * @api\n   */\n\n\n  Style.prototype.getText = function () {\n    return this.text_;\n  };\n  /**\n   * Set the text style.\n   * @param {import(\"./Text.js\").default} text Text style.\n   * @api\n   */\n\n\n  Style.prototype.setText = function (text) {\n    this.text_ = text;\n  };\n  /**\n   * Get the z-index for the style.\n   * @return {number|undefined} ZIndex.\n   * @api\n   */\n\n\n  Style.prototype.getZIndex = function () {\n    return this.zIndex_;\n  };\n  /**\n   * Set a geometry that is rendered instead of the feature's geometry.\n   *\n   * @param {string|import(\"../geom/Geometry.js\").default|GeometryFunction} geometry\n   *     Feature property or geometry or function returning a geometry to render\n   *     for this style.\n   * @api\n   */\n\n\n  Style.prototype.setGeometry = function (geometry) {\n    if (typeof geometry === 'function') {\n      this.geometryFunction_ = geometry;\n    } else if (typeof geometry === 'string') {\n      this.geometryFunction_ = function (feature) {\n        return (\n          /** @type {import(\"../geom/Geometry.js\").default} */\n          feature.get(geometry)\n        );\n      };\n    } else if (!geometry) {\n      this.geometryFunction_ = defaultGeometryFunction;\n    } else if (geometry !== undefined) {\n      this.geometryFunction_ = function () {\n        return (\n          /** @type {import(\"../geom/Geometry.js\").default} */\n          geometry\n        );\n      };\n    }\n\n    this.geometry_ = geometry;\n  };\n  /**\n   * Set the z-index.\n   *\n   * @param {number|undefined} zIndex ZIndex.\n   * @api\n   */\n\n\n  Style.prototype.setZIndex = function (zIndex) {\n    this.zIndex_ = zIndex;\n  };\n\n  return Style;\n}();\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of Style or single style objects wrapped in a\n * new style function.\n * @param {StyleFunction|Array<Style>|Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {StyleFunction} A style function.\n */\n\n\nexport function toFunction(obj) {\n  var styleFunction;\n\n  if (typeof obj === 'function') {\n    styleFunction = obj;\n  } else {\n    /**\n     * @type {Array<Style>}\n     */\n    var styles_1;\n\n    if (Array.isArray(obj)) {\n      styles_1 = obj;\n    } else {\n      assert(typeof\n      /** @type {?} */\n      obj.getZIndex === 'function', 41); // Expected an `Style` or an array of `Style`\n\n      var style =\n      /** @type {Style} */\n      obj;\n      styles_1 = [style];\n    }\n\n    styleFunction = function styleFunction() {\n      return styles_1;\n    };\n  }\n\n  return styleFunction;\n}\n/**\n * @type {Array<Style>|null}\n */\n\nvar defaultStyles = null;\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<Style>} Style.\n */\n\nexport function createDefaultStyle(feature, resolution) {\n  // We don't use an immediately-invoked function\n  // and a closure so we don't get an error at script evaluation time in\n  // browsers that do not support Canvas. (import(\"./Circle.js\").CircleStyle does\n  // canvas.getContext('2d') at construction time, which will cause an.error\n  // in such browsers.)\n  if (!defaultStyles) {\n    var fill = new Fill({\n      color: 'rgba(255,255,255,0.4)'\n    });\n    var stroke = new Stroke({\n      color: '#3399CC',\n      width: 1.25\n    });\n    defaultStyles = [new Style({\n      image: new CircleStyle({\n        fill: fill,\n        stroke: stroke,\n        radius: 5\n      }),\n      fill: fill,\n      stroke: stroke\n    })];\n  }\n\n  return defaultStyles;\n}\n/**\n * Default styles for editing features.\n * @return {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} Styles\n */\n\nexport function createEditingStyle() {\n  /** @type {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} */\n  var styles = {};\n  var white = [255, 255, 255, 1];\n  var blue = [0, 153, 255, 1];\n  var width = 3;\n  styles[GeometryType.POLYGON] = [new Style({\n    fill: new Fill({\n      color: [255, 255, 255, 0.5]\n    })\n  })];\n  styles[GeometryType.MULTI_POLYGON] = styles[GeometryType.POLYGON];\n  styles[GeometryType.LINE_STRING] = [new Style({\n    stroke: new Stroke({\n      color: white,\n      width: width + 2\n    })\n  }), new Style({\n    stroke: new Stroke({\n      color: blue,\n      width: width\n    })\n  })];\n  styles[GeometryType.MULTI_LINE_STRING] = styles[GeometryType.LINE_STRING];\n  styles[GeometryType.CIRCLE] = styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING]);\n  styles[GeometryType.POINT] = [new Style({\n    image: new CircleStyle({\n      radius: width * 2,\n      fill: new Fill({\n        color: blue\n      }),\n      stroke: new Stroke({\n        color: white,\n        width: width / 2\n      })\n    }),\n    zIndex: Infinity\n  })];\n  styles[GeometryType.MULTI_POINT] = styles[GeometryType.POINT];\n  styles[GeometryType.GEOMETRY_COLLECTION] = styles[GeometryType.POLYGON].concat(styles[GeometryType.LINE_STRING], styles[GeometryType.POINT]);\n  return styles;\n}\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature to get the geometry for.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined} Geometry to render.\n */\n\nfunction defaultGeometryFunction(feature) {\n  return feature.getGeometry();\n}\n\nexport default Style;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/layer/BaseVector\n */\n\n\nimport Layer from './Layer.js';\nimport RBush from 'rbush';\nimport { assign } from '../obj.js';\nimport { createDefaultStyle, toFunction as toStyleFunction } from '../style/Style.js';\n/**\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {VectorSourceType} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link import(\"../PluggableMap.js\").default#addLayer map.addLayer()}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n *\n * As an optimization decluttered features from layers with the same `className` are rendered above\n * the fill and stroke styles of all of those layers regardless of z-index.  To opt out of this\n * behavior and place declutterd features with their own layer configure the layer with a `className`\n * other than `ol-layer`.\n * @property {import(\"../style/Style.js\").StyleLike|null} [style] Layer style. When set to `null`, only\n * features that have their own style will be rendered. See {@link module:ol/style/Style~Style} for the default style\n * which will be used if this is not set.\n * @property {import(\"./Base.js\").BackgroundColor} [background] Background color for the layer. If not specified, no background\n * will be rendered.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will\n * be recreated during animations. This means that no vectors will be shown clipped, but the\n * setting will have a performance impact for large amounts of vector data. When set to `false`,\n * batches will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will\n * be recreated during interactions. See also `updateWhileAnimating`.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n\n/**\n * @enum {string}\n * @private\n */\n\nvar Property = {\n  RENDER_ORDER: 'renderOrder'\n};\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default|import(\"../source/VectorTile.js\").default} VectorSourceType\n * @template {import(\"../renderer/canvas/VectorLayer.js\").default|import(\"../renderer/canvas/VectorTileLayer.js\").default|import(\"../renderer/canvas/VectorImageLayer.js\").default|import(\"../renderer/webgl/PointsLayer.js\").default} RendererType\n * @extends {Layer<VectorSourceType, RendererType>}\n * @api\n */\n\nvar BaseVectorLayer =\n/** @class */\nfunction (_super) {\n  __extends(BaseVectorLayer, _super);\n  /**\n   * @param {Options<VectorSourceType>} [opt_options] Options.\n   */\n\n\n  function BaseVectorLayer(opt_options) {\n    var _this = this;\n\n    var options = opt_options ? opt_options : {};\n    var baseOptions = assign({}, options);\n    delete baseOptions.style;\n    delete baseOptions.renderBuffer;\n    delete baseOptions.updateWhileAnimating;\n    delete baseOptions.updateWhileInteracting;\n    _this = _super.call(this, baseOptions) || this;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.declutter_ = options.declutter !== undefined ? options.declutter : false;\n    /**\n     * @type {number}\n     * @private\n     */\n\n    _this.renderBuffer_ = options.renderBuffer !== undefined ? options.renderBuffer : 100;\n    /**\n     * User provided style.\n     * @type {import(\"../style/Style.js\").StyleLike}\n     * @private\n     */\n\n    _this.style_ = null;\n    /**\n     * Style function for use within the library.\n     * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n     * @private\n     */\n\n    _this.styleFunction_ = undefined;\n\n    _this.setStyle(options.style);\n    /**\n     * @type {boolean}\n     * @private\n     */\n\n\n    _this.updateWhileAnimating_ = options.updateWhileAnimating !== undefined ? options.updateWhileAnimating : false;\n    /**\n     * @type {boolean}\n     * @private\n     */\n\n    _this.updateWhileInteracting_ = options.updateWhileInteracting !== undefined ? options.updateWhileInteracting : false;\n    return _this;\n  }\n  /**\n   * @return {boolean} Declutter.\n   */\n\n\n  BaseVectorLayer.prototype.getDeclutter = function () {\n    return this.declutter_;\n  };\n  /**\n   * Get the topmost feature that intersects the given pixel on the viewport. Returns a promise\n   * that resolves with an array of features. The array will either contain the topmost feature\n   * when a hit was detected, or it will be empty.\n   *\n   * The hit detection algorithm used for this method is optimized for performance, but is less\n   * accurate than the one used in {@link import(\"../PluggableMap.js\").default#getFeaturesAtPixel}: Text\n   * is not considered, and icons are only represented by their bounding box instead of the exact\n   * image.\n   *\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @return {Promise<Array<import(\"../Feature\").default>>} Promise that resolves with an array of features.\n   * @api\n   */\n\n\n  BaseVectorLayer.prototype.getFeatures = function (pixel) {\n    return _super.prototype.getFeatures.call(this, pixel);\n  };\n  /**\n   * @return {number|undefined} Render buffer.\n   */\n\n\n  BaseVectorLayer.prototype.getRenderBuffer = function () {\n    return this.renderBuffer_;\n  };\n  /**\n   * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n   *     order.\n   */\n\n\n  BaseVectorLayer.prototype.getRenderOrder = function () {\n    return (\n      /** @type {import(\"../render.js\").OrderFunction|null|undefined} */\n      this.get(Property.RENDER_ORDER)\n    );\n  };\n  /**\n   * Get the style for features.  This returns whatever was passed to the `style`\n   * option at construction or to the `setStyle` method.\n   * @return {import(\"../style/Style.js\").StyleLike|null|undefined} Layer style.\n   * @api\n   */\n\n\n  BaseVectorLayer.prototype.getStyle = function () {\n    return this.style_;\n  };\n  /**\n   * Get the style function.\n   * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n   * @api\n   */\n\n\n  BaseVectorLayer.prototype.getStyleFunction = function () {\n    return this.styleFunction_;\n  };\n  /**\n   * @return {boolean} Whether the rendered layer should be updated while\n   *     animating.\n   */\n\n\n  BaseVectorLayer.prototype.getUpdateWhileAnimating = function () {\n    return this.updateWhileAnimating_;\n  };\n  /**\n   * @return {boolean} Whether the rendered layer should be updated while\n   *     interacting.\n   */\n\n\n  BaseVectorLayer.prototype.getUpdateWhileInteracting = function () {\n    return this.updateWhileInteracting_;\n  };\n  /**\n   * Render declutter items for this layer\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n\n\n  BaseVectorLayer.prototype.renderDeclutter = function (frameState) {\n    if (!frameState.declutterTree) {\n      frameState.declutterTree = new RBush(9);\n    }\n    /** @type {*} */\n\n\n    this.getRenderer().renderDeclutter(frameState);\n  };\n  /**\n   * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n   *     Render order.\n   */\n\n\n  BaseVectorLayer.prototype.setRenderOrder = function (renderOrder) {\n    this.set(Property.RENDER_ORDER, renderOrder);\n  };\n  /**\n   * Set the style for features.  This can be a single style object, an array\n   * of styles, or a function that takes a feature and resolution and returns\n   * an array of styles. If set to `null`, the layer has no style (a `null` style),\n   * so only features that have their own styles will be rendered in the layer. Call\n   * `setStyle()` without arguments to reset to the default style. See\n   * {@link module:ol/style/Style~Style} for information on the default style.\n   * @param {import(\"../style/Style.js\").StyleLike|null} [opt_style] Layer style.\n   * @api\n   */\n\n\n  BaseVectorLayer.prototype.setStyle = function (opt_style) {\n    this.style_ = opt_style !== undefined ? opt_style : createDefaultStyle;\n    this.styleFunction_ = opt_style === null ? undefined : toStyleFunction(this.style_);\n    this.changed();\n  };\n\n  return BaseVectorLayer;\n}(Layer);\n\nexport default BaseVectorLayer;","/**\n * @module ol/render/canvas/Instruction\n */\n\n/**\n * @enum {number}\n */\nvar Instruction = {\n  BEGIN_GEOMETRY: 0,\n  BEGIN_PATH: 1,\n  CIRCLE: 2,\n  CLOSE_PATH: 3,\n  CUSTOM: 4,\n  DRAW_CHARS: 5,\n  DRAW_IMAGE: 6,\n  END_GEOMETRY: 7,\n  FILL: 8,\n  MOVE_TO_LINE_TO: 9,\n  SET_FILL_STYLE: 10,\n  SET_STROKE_STYLE: 11,\n  STROKE: 12\n};\n/**\n * @type {Array<Instruction>}\n */\n\nexport var fillInstruction = [Instruction.FILL];\n/**\n * @type {Array<Instruction>}\n */\n\nexport var strokeInstruction = [Instruction.STROKE];\n/**\n * @type {Array<Instruction>}\n */\n\nexport var beginPathInstruction = [Instruction.BEGIN_PATH];\n/**\n * @type {Array<Instruction>}\n */\n\nexport var closePathInstruction = [Instruction.CLOSE_PATH];\nexport default Instruction;","/**\n * @module ol/render/VectorContext\n */\n\n/**\n * @classdesc\n * Context for drawing geometries.  A vector context is available on render\n * events and does not need to be constructed directly.\n * @api\n */\nvar VectorContext =\n/** @class */\nfunction () {\n  function VectorContext() {}\n  /**\n   * Render a geometry with a custom renderer.\n   *\n   * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   * @param {Function} renderer Renderer.\n   * @param {Function} hitDetectionRenderer Renderer.\n   */\n\n\n  VectorContext.prototype.drawCustom = function (geometry, feature, renderer, hitDetectionRenderer) {};\n  /**\n   * Render a geometry.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry The geometry to render.\n   */\n\n\n  VectorContext.prototype.drawGeometry = function (geometry) {};\n  /**\n   * Set the rendering style.\n   *\n   * @param {import(\"../style/Style.js\").default} style The rendering style.\n   */\n\n\n  VectorContext.prototype.setStyle = function (style) {};\n  /**\n   * @param {import(\"../geom/Circle.js\").default} circleGeometry Circle geometry.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawCircle = function (circleGeometry, feature) {};\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"../style/Style.js\").default} style Style.\n   */\n\n\n  VectorContext.prototype.drawFeature = function (feature, style) {};\n  /**\n   * @param {import(\"../geom/GeometryCollection.js\").default} geometryCollectionGeometry Geometry collection.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawGeometryCollection = function (geometryCollectionGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/LineString.js\").default|import(\"./Feature.js\").default} lineStringGeometry Line string geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawLineString = function (lineStringGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/MultiLineString.js\").default|import(\"./Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawMultiLineString = function (multiLineStringGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/MultiPoint.js\").default|import(\"./Feature.js\").default} multiPointGeometry MultiPoint geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawMultiPoint = function (multiPointGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/MultiPolygon.js\").default} multiPolygonGeometry MultiPolygon geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawMultiPolygon = function (multiPolygonGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/Point.js\").default|import(\"./Feature.js\").default} pointGeometry Point geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawPoint = function (pointGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/Polygon.js\").default|import(\"./Feature.js\").default} polygonGeometry Polygon geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawPolygon = function (polygonGeometry, feature) {};\n  /**\n   * @param {import(\"../geom/SimpleGeometry.js\").default|import(\"./Feature.js\").default} geometry Geometry.\n   * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  VectorContext.prototype.drawText = function (geometry, feature) {};\n  /**\n   * @param {import(\"../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../style/Stroke.js\").default} strokeStyle Stroke style.\n   */\n\n\n  VectorContext.prototype.setFillStrokeStyle = function (fillStyle, strokeStyle) {};\n  /**\n   * @param {import(\"../style/Image.js\").default} imageStyle Image style.\n   * @param {import(\"../render/canvas.js\").DeclutterImageWithText} [opt_declutterImageWithText] Shared data for combined decluttering with a text style.\n   */\n\n\n  VectorContext.prototype.setImageStyle = function (imageStyle, opt_declutterImageWithText) {};\n  /**\n   * @param {import(\"../style/Text.js\").default} textStyle Text style.\n   * @param {import(\"../render/canvas.js\").DeclutterImageWithText} [opt_declutterImageWithText] Shared data for combined decluttering with an image style.\n   */\n\n\n  VectorContext.prototype.setTextStyle = function (textStyle, opt_declutterImageWithText) {};\n\n  return VectorContext;\n}();\n\nexport default VectorContext;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/render/canvas/Builder\n */\n\n\nimport CanvasInstruction from './Instruction.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport Relationship from '../../extent/Relationship.js';\nimport VectorContext from '../VectorContext.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { buffer, clone, containsCoordinate, coordinateRelationship } from '../../extent.js';\nimport { defaultFillStyle, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle } from '../canvas.js';\nimport { equals, reverseSubArray } from '../../array.js';\nimport { inflateCoordinates, inflateCoordinatesArray, inflateMultiCoordinatesArray } from '../../geom/flat/inflate.js';\n\nvar CanvasBuilder =\n/** @class */\nfunction (_super) {\n  __extends(CanvasBuilder, _super);\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n\n\n  function CanvasBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n    var _this = _super.call(this) || this;\n    /**\n     * @protected\n     * @type {number}\n     */\n\n\n    _this.tolerance = tolerance;\n    /**\n     * @protected\n     * @const\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n    _this.maxExtent = maxExtent;\n    /**\n     * @protected\n     * @type {number}\n     */\n\n    _this.pixelRatio = pixelRatio;\n    /**\n     * @protected\n     * @type {number}\n     */\n\n    _this.maxLineWidth = 0;\n    /**\n     * @protected\n     * @const\n     * @type {number}\n     */\n\n    _this.resolution = resolution;\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n\n    _this.beginGeometryInstruction1_ = null;\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n\n    _this.beginGeometryInstruction2_ = null;\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n    _this.bufferedMaxExtent_ = null;\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n\n    _this.instructions = [];\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n\n    _this.coordinates = [];\n    /**\n     * @private\n     * @type {import(\"../../coordinate.js\").Coordinate}\n     */\n\n    _this.tmpCoordinate_ = [];\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n\n    _this.hitDetectionInstructions = [];\n    /**\n     * @protected\n     * @type {import(\"../canvas.js\").FillStrokeState}\n     */\n\n    _this.state =\n    /** @type {import(\"../canvas.js\").FillStrokeState} */\n    {};\n    return _this;\n  }\n  /**\n   * @protected\n   * @param {Array<number>} dashArray Dash array.\n   * @return {Array<number>} Dash array with pixel ratio applied\n   */\n\n\n  CanvasBuilder.prototype.applyPixelRatio = function (dashArray) {\n    var pixelRatio = this.pixelRatio;\n    return pixelRatio == 1 ? dashArray : dashArray.map(function (dash) {\n      return dash * pixelRatio;\n    });\n  };\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} stride Stride.\n   * @protected\n   * @return {number} My end\n   */\n\n\n  CanvasBuilder.prototype.appendFlatPointCoordinates = function (flatCoordinates, stride) {\n    var extent = this.getBufferedMaxExtent();\n    var tmpCoord = this.tmpCoordinate_;\n    var coordinates = this.coordinates;\n    var myEnd = coordinates.length;\n\n    for (var i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      tmpCoord[0] = flatCoordinates[i];\n      tmpCoord[1] = flatCoordinates[i + 1];\n\n      if (containsCoordinate(extent, tmpCoord)) {\n        coordinates[myEnd++] = tmpCoord[0];\n        coordinates[myEnd++] = tmpCoord[1];\n      }\n    }\n\n    return myEnd;\n  };\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} closed Last input coordinate equals first.\n   * @param {boolean} skipFirst Skip first coordinate.\n   * @protected\n   * @return {number} My end.\n   */\n\n\n  CanvasBuilder.prototype.appendFlatLineCoordinates = function (flatCoordinates, offset, end, stride, closed, skipFirst) {\n    var coordinates = this.coordinates;\n    var myEnd = coordinates.length;\n    var extent = this.getBufferedMaxExtent();\n\n    if (skipFirst) {\n      offset += stride;\n    }\n\n    var lastXCoord = flatCoordinates[offset];\n    var lastYCoord = flatCoordinates[offset + 1];\n    var nextCoord = this.tmpCoordinate_;\n    var skipped = true;\n    var i, lastRel, nextRel;\n\n    for (i = offset + stride; i < end; i += stride) {\n      nextCoord[0] = flatCoordinates[i];\n      nextCoord[1] = flatCoordinates[i + 1];\n      nextRel = coordinateRelationship(extent, nextCoord);\n\n      if (nextRel !== lastRel) {\n        if (skipped) {\n          coordinates[myEnd++] = lastXCoord;\n          coordinates[myEnd++] = lastYCoord;\n          skipped = false;\n        }\n\n        coordinates[myEnd++] = nextCoord[0];\n        coordinates[myEnd++] = nextCoord[1];\n      } else if (nextRel === Relationship.INTERSECTING) {\n        coordinates[myEnd++] = nextCoord[0];\n        coordinates[myEnd++] = nextCoord[1];\n        skipped = false;\n      } else {\n        skipped = true;\n      }\n\n      lastXCoord = nextCoord[0];\n      lastYCoord = nextCoord[1];\n      lastRel = nextRel;\n    } // Last coordinate equals first or only one point to append:\n\n\n    if (closed && skipped || i === offset + stride) {\n      coordinates[myEnd++] = lastXCoord;\n      coordinates[myEnd++] = lastYCoord;\n    }\n\n    return myEnd;\n  };\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @param {Array<number>} builderEnds Builder ends.\n   * @return {number} Offset.\n   */\n\n\n  CanvasBuilder.prototype.drawCustomCoordinates_ = function (flatCoordinates, offset, ends, stride, builderEnds) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n      var end = ends[i];\n      var builderEnd = this.appendFlatLineCoordinates(flatCoordinates, offset, end, stride, false, false);\n      builderEnds.push(builderEnd);\n      offset = end;\n    }\n\n    return offset;\n  };\n  /**\n   * @param {import(\"../../geom/SimpleGeometry.js\").default} geometry Geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   * @param {Function} renderer Renderer.\n   * @param {Function} hitDetectionRenderer Renderer.\n   */\n\n\n  CanvasBuilder.prototype.drawCustom = function (geometry, feature, renderer, hitDetectionRenderer) {\n    this.beginGeometry(geometry, feature);\n    var type = geometry.getType();\n    var stride = geometry.getStride();\n    var builderBegin = this.coordinates.length;\n    var flatCoordinates, builderEnd, builderEnds, builderEndss;\n    var offset;\n\n    switch (type) {\n      case GeometryType.MULTI_POLYGON:\n        flatCoordinates =\n        /** @type {import(\"../../geom/MultiPolygon.js\").default} */\n        geometry.getOrientedFlatCoordinates();\n        builderEndss = [];\n        var endss =\n        /** @type {import(\"../../geom/MultiPolygon.js\").default} */\n        geometry.getEndss();\n        offset = 0;\n\n        for (var i = 0, ii = endss.length; i < ii; ++i) {\n          var myEnds = [];\n          offset = this.drawCustomCoordinates_(flatCoordinates, offset, endss[i], stride, myEnds);\n          builderEndss.push(myEnds);\n        }\n\n        this.instructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEndss, geometry, renderer, inflateMultiCoordinatesArray]);\n        this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEndss, geometry, hitDetectionRenderer || renderer, inflateMultiCoordinatesArray]);\n        break;\n\n      case GeometryType.POLYGON:\n      case GeometryType.MULTI_LINE_STRING:\n        builderEnds = [];\n        flatCoordinates = type == GeometryType.POLYGON ?\n        /** @type {import(\"../../geom/Polygon.js\").default} */\n        geometry.getOrientedFlatCoordinates() : geometry.getFlatCoordinates();\n        offset = this.drawCustomCoordinates_(flatCoordinates, 0,\n        /** @type {import(\"../../geom/Polygon.js\").default|import(\"../../geom/MultiLineString.js\").default} */\n        geometry.getEnds(), stride, builderEnds);\n        this.instructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnds, geometry, renderer, inflateCoordinatesArray]);\n        this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnds, geometry, hitDetectionRenderer || renderer, inflateCoordinatesArray]);\n        break;\n\n      case GeometryType.LINE_STRING:\n      case GeometryType.CIRCLE:\n        flatCoordinates = geometry.getFlatCoordinates();\n        builderEnd = this.appendFlatLineCoordinates(flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n        this.instructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnd, geometry, renderer, inflateCoordinates]);\n        this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnd, geometry, hitDetectionRenderer || renderer, inflateCoordinates]);\n        break;\n\n      case GeometryType.MULTI_POINT:\n        flatCoordinates = geometry.getFlatCoordinates();\n        builderEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n\n        if (builderEnd > builderBegin) {\n          this.instructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnd, geometry, renderer, inflateCoordinates]);\n          this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnd, geometry, hitDetectionRenderer || renderer, inflateCoordinates]);\n        }\n\n        break;\n\n      case GeometryType.POINT:\n        flatCoordinates = geometry.getFlatCoordinates();\n        this.coordinates.push(flatCoordinates[0], flatCoordinates[1]);\n        builderEnd = this.coordinates.length;\n        this.instructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnd, geometry, renderer]);\n        this.hitDetectionInstructions.push([CanvasInstruction.CUSTOM, builderBegin, builderEnd, geometry, hitDetectionRenderer || renderer]);\n        break;\n\n      default:\n    }\n\n    this.endGeometry(feature);\n  };\n  /**\n   * @protected\n   * @param {import(\"../../geom/Geometry\").default|import(\"../Feature.js\").default} geometry The geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasBuilder.prototype.beginGeometry = function (geometry, feature) {\n    this.beginGeometryInstruction1_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0, geometry];\n    this.instructions.push(this.beginGeometryInstruction1_);\n    this.beginGeometryInstruction2_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0, geometry];\n    this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);\n  };\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n\n\n  CanvasBuilder.prototype.finish = function () {\n    return {\n      instructions: this.instructions,\n      hitDetectionInstructions: this.hitDetectionInstructions,\n      coordinates: this.coordinates\n    };\n  };\n  /**\n   * Reverse the hit detection instructions.\n   */\n\n\n  CanvasBuilder.prototype.reverseHitDetectionInstructions = function () {\n    var hitDetectionInstructions = this.hitDetectionInstructions; // step 1 - reverse array\n\n    hitDetectionInstructions.reverse(); // step 2 - reverse instructions within geometry blocks\n\n    var i;\n    var n = hitDetectionInstructions.length;\n    var instruction;\n    var type;\n    var begin = -1;\n\n    for (i = 0; i < n; ++i) {\n      instruction = hitDetectionInstructions[i];\n      type =\n      /** @type {import(\"./Instruction.js\").default} */\n      instruction[0];\n\n      if (type == CanvasInstruction.END_GEOMETRY) {\n        begin = i;\n      } else if (type == CanvasInstruction.BEGIN_GEOMETRY) {\n        instruction[2] = i;\n        reverseSubArray(this.hitDetectionInstructions, begin, i);\n        begin = -1;\n      }\n    }\n  };\n  /**\n   * @param {import(\"../../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../../style/Stroke.js\").default} strokeStyle Stroke style.\n   */\n\n\n  CanvasBuilder.prototype.setFillStrokeStyle = function (fillStyle, strokeStyle) {\n    var state = this.state;\n\n    if (fillStyle) {\n      var fillStyleColor = fillStyle.getColor();\n      state.fillStyle = asColorLike(fillStyleColor ? fillStyleColor : defaultFillStyle);\n    } else {\n      state.fillStyle = undefined;\n    }\n\n    if (strokeStyle) {\n      var strokeStyleColor = strokeStyle.getColor();\n      state.strokeStyle = asColorLike(strokeStyleColor ? strokeStyleColor : defaultStrokeStyle);\n      var strokeStyleLineCap = strokeStyle.getLineCap();\n      state.lineCap = strokeStyleLineCap !== undefined ? strokeStyleLineCap : defaultLineCap;\n      var strokeStyleLineDash = strokeStyle.getLineDash();\n      state.lineDash = strokeStyleLineDash ? strokeStyleLineDash.slice() : defaultLineDash;\n      var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      state.lineDashOffset = strokeStyleLineDashOffset ? strokeStyleLineDashOffset : defaultLineDashOffset;\n      var strokeStyleLineJoin = strokeStyle.getLineJoin();\n      state.lineJoin = strokeStyleLineJoin !== undefined ? strokeStyleLineJoin : defaultLineJoin;\n      var strokeStyleWidth = strokeStyle.getWidth();\n      state.lineWidth = strokeStyleWidth !== undefined ? strokeStyleWidth : defaultLineWidth;\n      var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      state.miterLimit = strokeStyleMiterLimit !== undefined ? strokeStyleMiterLimit : defaultMiterLimit;\n\n      if (state.lineWidth > this.maxLineWidth) {\n        this.maxLineWidth = state.lineWidth; // invalidate the buffered max extent cache\n\n        this.bufferedMaxExtent_ = null;\n      }\n    } else {\n      state.strokeStyle = undefined;\n      state.lineCap = undefined;\n      state.lineDash = null;\n      state.lineDashOffset = undefined;\n      state.lineJoin = undefined;\n      state.lineWidth = undefined;\n      state.miterLimit = undefined;\n    }\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @return {Array<*>} Fill instruction.\n   */\n\n\n  CanvasBuilder.prototype.createFill = function (state) {\n    var fillStyle = state.fillStyle;\n    /** @type {Array<*>} */\n\n    var fillInstruction = [CanvasInstruction.SET_FILL_STYLE, fillStyle];\n\n    if (typeof fillStyle !== 'string') {\n      // Fill is a pattern or gradient - align it!\n      fillInstruction.push(true);\n    }\n\n    return fillInstruction;\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   */\n\n\n  CanvasBuilder.prototype.applyStroke = function (state) {\n    this.instructions.push(this.createStroke(state));\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @return {Array<*>} Stroke instruction.\n   */\n\n\n  CanvasBuilder.prototype.createStroke = function (state) {\n    return [CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth * this.pixelRatio, state.lineCap, state.lineJoin, state.miterLimit, this.applyPixelRatio(state.lineDash), state.lineDashOffset * this.pixelRatio];\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState):Array<*>} createFill Create fill.\n   */\n\n\n  CanvasBuilder.prototype.updateFillStyle = function (state, createFill) {\n    var fillStyle = state.fillStyle;\n\n    if (typeof fillStyle !== 'string' || state.currentFillStyle != fillStyle) {\n      if (fillStyle !== undefined) {\n        this.instructions.push(createFill.call(this, state));\n      }\n\n      state.currentFillStyle = fillStyle;\n    }\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasBuilder, import(\"../canvas.js\").FillStrokeState): void} applyStroke Apply stroke.\n   */\n\n\n  CanvasBuilder.prototype.updateStrokeStyle = function (state, applyStroke) {\n    var strokeStyle = state.strokeStyle;\n    var lineCap = state.lineCap;\n    var lineDash = state.lineDash;\n    var lineDashOffset = state.lineDashOffset;\n    var lineJoin = state.lineJoin;\n    var lineWidth = state.lineWidth;\n    var miterLimit = state.miterLimit;\n\n    if (state.currentStrokeStyle != strokeStyle || state.currentLineCap != lineCap || lineDash != state.currentLineDash && !equals(state.currentLineDash, lineDash) || state.currentLineDashOffset != lineDashOffset || state.currentLineJoin != lineJoin || state.currentLineWidth != lineWidth || state.currentMiterLimit != miterLimit) {\n      if (strokeStyle !== undefined) {\n        applyStroke.call(this, state);\n      }\n\n      state.currentStrokeStyle = strokeStyle;\n      state.currentLineCap = lineCap;\n      state.currentLineDash = lineDash;\n      state.currentLineDashOffset = lineDashOffset;\n      state.currentLineJoin = lineJoin;\n      state.currentLineWidth = lineWidth;\n      state.currentMiterLimit = miterLimit;\n    }\n  };\n  /**\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasBuilder.prototype.endGeometry = function (feature) {\n    this.beginGeometryInstruction1_[2] = this.instructions.length;\n    this.beginGeometryInstruction1_ = null;\n    this.beginGeometryInstruction2_[2] = this.hitDetectionInstructions.length;\n    this.beginGeometryInstruction2_ = null;\n    var endGeometryInstruction = [CanvasInstruction.END_GEOMETRY, feature];\n    this.instructions.push(endGeometryInstruction);\n    this.hitDetectionInstructions.push(endGeometryInstruction);\n  };\n  /**\n   * Get the buffered rendering extent.  Rendering will be clipped to the extent\n   * provided to the constructor.  To account for symbolizers that may intersect\n   * this extent, we calculate a buffered extent (e.g. based on stroke width).\n   * @return {import(\"../../extent.js\").Extent} The buffered rendering extent.\n   * @protected\n   */\n\n\n  CanvasBuilder.prototype.getBufferedMaxExtent = function () {\n    if (!this.bufferedMaxExtent_) {\n      this.bufferedMaxExtent_ = clone(this.maxExtent);\n\n      if (this.maxLineWidth > 0) {\n        var width = this.resolution * (this.maxLineWidth + 1) / 2;\n        buffer(this.bufferedMaxExtent_, width, this.bufferedMaxExtent_);\n      }\n    }\n\n    return this.bufferedMaxExtent_;\n  };\n\n  return CanvasBuilder;\n}(VectorContext);\n\nexport default CanvasBuilder;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/render/canvas/ImageBuilder\n */\n\n\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction from './Instruction.js';\n\nvar CanvasImageBuilder =\n/** @class */\nfunction (_super) {\n  __extends(CanvasImageBuilder, _super);\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n\n\n  function CanvasImageBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n    var _this = _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n\n\n    _this.hitDetectionImage_ = null;\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n\n    _this.image_ = null;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.imagePixelRatio_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.anchorX_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.anchorY_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.height_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.opacity_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.originX_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.originY_ = undefined;\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n\n    _this.rotateWithView_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.rotation_ = undefined;\n    /**\n     * @private\n     * @type {import(\"../../size.js\").Size|undefined}\n     */\n\n    _this.scale_ = undefined;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    _this.width_ = undefined;\n    /**\n     * Data shared with a text builder for combined decluttering.\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterImageWithText}\n     */\n\n    _this.declutterImageWithText_ = undefined;\n    return _this;\n  }\n  /**\n   * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} pointGeometry Point geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasImageBuilder.prototype.drawPoint = function (pointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n\n    this.beginGeometry(pointGeometry, feature);\n    var flatCoordinates = pointGeometry.getFlatCoordinates();\n    var stride = pointGeometry.getStride();\n    var myBegin = this.coordinates.length;\n    var myEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n    this.instructions.push([CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_, // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_ * this.imagePixelRatio_, this.anchorY_ * this.imagePixelRatio_, Math.ceil(this.height_ * this.imagePixelRatio_), this.opacity_, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, [this.scale_[0] * this.pixelRatio / this.imagePixelRatio_, this.scale_[1] * this.pixelRatio / this.imagePixelRatio_], Math.ceil(this.width_ * this.imagePixelRatio_), this.declutterImageWithText_]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_, // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_, this.anchorY_, this.height_, this.opacity_, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, this.scale_, this.width_, this.declutterImageWithText_]);\n    this.endGeometry(feature);\n  };\n  /**\n   * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} multiPointGeometry MultiPoint geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasImageBuilder.prototype.drawMultiPoint = function (multiPointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n\n    this.beginGeometry(multiPointGeometry, feature);\n    var flatCoordinates = multiPointGeometry.getFlatCoordinates();\n    var stride = multiPointGeometry.getStride();\n    var myBegin = this.coordinates.length;\n    var myEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n    this.instructions.push([CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_, // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_ * this.imagePixelRatio_, this.anchorY_ * this.imagePixelRatio_, Math.ceil(this.height_ * this.imagePixelRatio_), this.opacity_, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, [this.scale_[0] * this.pixelRatio / this.imagePixelRatio_, this.scale_[1] * this.pixelRatio / this.imagePixelRatio_], Math.ceil(this.width_ * this.imagePixelRatio_), this.declutterImageWithText_]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_, // Remaining arguments to DRAW_IMAGE are in alphabetical order\n    this.anchorX_, this.anchorY_, this.height_, this.opacity_, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, this.scale_, this.width_, this.declutterImageWithText_]);\n    this.endGeometry(feature);\n  };\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n\n\n  CanvasImageBuilder.prototype.finish = function () {\n    this.reverseHitDetectionInstructions(); // FIXME this doesn't really protect us against further calls to draw*Geometry\n\n    this.anchorX_ = undefined;\n    this.anchorY_ = undefined;\n    this.hitDetectionImage_ = null;\n    this.image_ = null;\n    this.imagePixelRatio_ = undefined;\n    this.height_ = undefined;\n    this.scale_ = undefined;\n    this.opacity_ = undefined;\n    this.originX_ = undefined;\n    this.originY_ = undefined;\n    this.rotateWithView_ = undefined;\n    this.rotation_ = undefined;\n    this.width_ = undefined;\n    return _super.prototype.finish.call(this);\n  };\n  /**\n   * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n   * @param {Object} [opt_sharedData] Shared data.\n   */\n\n\n  CanvasImageBuilder.prototype.setImageStyle = function (imageStyle, opt_sharedData) {\n    var anchor = imageStyle.getAnchor();\n    var size = imageStyle.getSize();\n    var hitDetectionImage = imageStyle.getHitDetectionImage();\n    var image = imageStyle.getImage(this.pixelRatio);\n    var origin = imageStyle.getOrigin();\n    this.imagePixelRatio_ = imageStyle.getPixelRatio(this.pixelRatio);\n    this.anchorX_ = anchor[0];\n    this.anchorY_ = anchor[1];\n    this.hitDetectionImage_ = hitDetectionImage;\n    this.image_ = image;\n    this.height_ = size[1];\n    this.opacity_ = imageStyle.getOpacity();\n    this.originX_ = origin[0] * this.imagePixelRatio_;\n    this.originY_ = origin[1] * this.imagePixelRatio_;\n    this.rotateWithView_ = imageStyle.getRotateWithView();\n    this.rotation_ = imageStyle.getRotation();\n    this.scale_ = imageStyle.getScaleArray();\n    this.width_ = size[0];\n    this.declutterImageWithText_ = opt_sharedData;\n  };\n\n  return CanvasImageBuilder;\n}(CanvasBuilder);\n\nexport default CanvasImageBuilder;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/render/canvas/LineStringBuilder\n */\n\n\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction, { beginPathInstruction, strokeInstruction } from './Instruction.js';\nimport { defaultLineDash, defaultLineDashOffset } from '../canvas.js';\n\nvar CanvasLineStringBuilder =\n/** @class */\nfunction (_super) {\n  __extends(CanvasLineStringBuilder, _super);\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n\n\n  function CanvasLineStringBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n    return _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n  }\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} end.\n   */\n\n\n  CanvasLineStringBuilder.prototype.drawFlatCoordinates_ = function (flatCoordinates, offset, end, stride) {\n    var myBegin = this.coordinates.length;\n    var myEnd = this.appendFlatLineCoordinates(flatCoordinates, offset, end, stride, false, false);\n    var moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n    this.instructions.push(moveToLineToInstruction);\n    this.hitDetectionInstructions.push(moveToLineToInstruction);\n    return end;\n  };\n  /**\n   * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} lineStringGeometry Line string geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasLineStringBuilder.prototype.drawLineString = function (lineStringGeometry, feature) {\n    var state = this.state;\n    var strokeStyle = state.strokeStyle;\n    var lineWidth = state.lineWidth;\n\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(lineStringGeometry, feature);\n    this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin, state.miterLimit, defaultLineDash, defaultLineDashOffset], beginPathInstruction);\n    var flatCoordinates = lineStringGeometry.getFlatCoordinates();\n    var stride = lineStringGeometry.getStride();\n    this.drawFlatCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(feature);\n  };\n  /**\n   * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasLineStringBuilder.prototype.drawMultiLineString = function (multiLineStringGeometry, feature) {\n    var state = this.state;\n    var strokeStyle = state.strokeStyle;\n    var lineWidth = state.lineWidth;\n\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(multiLineStringGeometry, feature);\n    this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin, state.miterLimit, state.lineDash, state.lineDashOffset], beginPathInstruction);\n    var ends = multiLineStringGeometry.getEnds();\n    var flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n    var stride = multiLineStringGeometry.getStride();\n    var offset = 0;\n\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinates_(flatCoordinates, offset,\n      /** @type {number} */\n      ends[i], stride);\n    }\n\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(feature);\n  };\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n\n\n  CanvasLineStringBuilder.prototype.finish = function () {\n    var state = this.state;\n\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n    }\n\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n    return _super.prototype.finish.call(this);\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   */\n\n\n  CanvasLineStringBuilder.prototype.applyStroke = function (state) {\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n      state.lastStroke = this.coordinates.length;\n    }\n\n    state.lastStroke = 0;\n\n    _super.prototype.applyStroke.call(this, state);\n\n    this.instructions.push(beginPathInstruction);\n  };\n\n  return CanvasLineStringBuilder;\n}(CanvasBuilder);\n\nexport default CanvasLineStringBuilder;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/render/canvas/PolygonBuilder\n */\n\n\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction, { beginPathInstruction, closePathInstruction, fillInstruction, strokeInstruction } from './Instruction.js';\nimport { defaultFillStyle } from '../canvas.js';\nimport { snap } from '../../geom/flat/simplify.js';\n\nvar CanvasPolygonBuilder =\n/** @class */\nfunction (_super) {\n  __extends(CanvasPolygonBuilder, _super);\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n\n\n  function CanvasPolygonBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n    return _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n  }\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n\n\n  CanvasPolygonBuilder.prototype.drawFlatCoordinatess_ = function (flatCoordinates, offset, ends, stride) {\n    var state = this.state;\n    var fill = state.fillStyle !== undefined;\n    var stroke = state.strokeStyle !== undefined;\n    var numEnds = ends.length;\n    this.instructions.push(beginPathInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction);\n\n    for (var i = 0; i < numEnds; ++i) {\n      var end = ends[i];\n      var myBegin = this.coordinates.length;\n      var myEnd = this.appendFlatLineCoordinates(flatCoordinates, offset, end, stride, true, !stroke);\n      var moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n      this.instructions.push(moveToLineToInstruction);\n      this.hitDetectionInstructions.push(moveToLineToInstruction);\n\n      if (stroke) {\n        // Performance optimization: only call closePath() when we have a stroke.\n        // Otherwise the ring is closed already (see appendFlatLineCoordinates above).\n        this.instructions.push(closePathInstruction);\n        this.hitDetectionInstructions.push(closePathInstruction);\n      }\n\n      offset = end;\n    }\n\n    if (fill) {\n      this.instructions.push(fillInstruction);\n      this.hitDetectionInstructions.push(fillInstruction);\n    }\n\n    if (stroke) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n\n    return offset;\n  };\n  /**\n   * @param {import(\"../../geom/Circle.js\").default} circleGeometry Circle geometry.\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   */\n\n\n  CanvasPolygonBuilder.prototype.drawCircle = function (circleGeometry, feature) {\n    var state = this.state;\n    var fillStyle = state.fillStyle;\n    var strokeStyle = state.strokeStyle;\n\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n\n    this.setFillStrokeStyles_();\n    this.beginGeometry(circleGeometry, feature);\n\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([CanvasInstruction.SET_FILL_STYLE, defaultFillStyle]);\n    }\n\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin, state.miterLimit, state.lineDash, state.lineDashOffset]);\n    }\n\n    var flatCoordinates = circleGeometry.getFlatCoordinates();\n    var stride = circleGeometry.getStride();\n    var myBegin = this.coordinates.length;\n    this.appendFlatLineCoordinates(flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n    var circleInstruction = [CanvasInstruction.CIRCLE, myBegin];\n    this.instructions.push(beginPathInstruction, circleInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction, circleInstruction);\n\n    if (state.fillStyle !== undefined) {\n      this.instructions.push(fillInstruction);\n      this.hitDetectionInstructions.push(fillInstruction);\n    }\n\n    if (state.strokeStyle !== undefined) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n\n    this.endGeometry(feature);\n  };\n  /**\n   * @param {import(\"../../geom/Polygon.js\").default|import(\"../Feature.js\").default} polygonGeometry Polygon geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasPolygonBuilder.prototype.drawPolygon = function (polygonGeometry, feature) {\n    var state = this.state;\n    var fillStyle = state.fillStyle;\n    var strokeStyle = state.strokeStyle;\n\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n\n    this.setFillStrokeStyles_();\n    this.beginGeometry(polygonGeometry, feature);\n\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([CanvasInstruction.SET_FILL_STYLE, defaultFillStyle]);\n    }\n\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin, state.miterLimit, state.lineDash, state.lineDashOffset]);\n    }\n\n    var ends = polygonGeometry.getEnds();\n    var flatCoordinates = polygonGeometry.getOrientedFlatCoordinates();\n    var stride = polygonGeometry.getStride();\n    this.drawFlatCoordinatess_(flatCoordinates, 0,\n    /** @type {Array<number>} */\n    ends, stride);\n    this.endGeometry(feature);\n  };\n  /**\n   * @param {import(\"../../geom/MultiPolygon.js\").default} multiPolygonGeometry MultiPolygon geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasPolygonBuilder.prototype.drawMultiPolygon = function (multiPolygonGeometry, feature) {\n    var state = this.state;\n    var fillStyle = state.fillStyle;\n    var strokeStyle = state.strokeStyle;\n\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n\n    this.setFillStrokeStyles_();\n    this.beginGeometry(multiPolygonGeometry, feature);\n\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([CanvasInstruction.SET_FILL_STYLE, defaultFillStyle]);\n    }\n\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([CanvasInstruction.SET_STROKE_STYLE, state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin, state.miterLimit, state.lineDash, state.lineDashOffset]);\n    }\n\n    var endss = multiPolygonGeometry.getEndss();\n    var flatCoordinates = multiPolygonGeometry.getOrientedFlatCoordinates();\n    var stride = multiPolygonGeometry.getStride();\n    var offset = 0;\n\n    for (var i = 0, ii = endss.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinatess_(flatCoordinates, offset, endss[i], stride);\n    }\n\n    this.endGeometry(feature);\n  };\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n\n\n  CanvasPolygonBuilder.prototype.finish = function () {\n    this.reverseHitDetectionInstructions();\n    this.state = null; // We want to preserve topology when drawing polygons.  Polygons are\n    // simplified using quantization and point elimination. However, we might\n    // have received a mix of quantized and non-quantized geometries, so ensure\n    // that all are quantized by quantizing all coordinates in the batch.\n\n    var tolerance = this.tolerance;\n\n    if (tolerance !== 0) {\n      var coordinates = this.coordinates;\n\n      for (var i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = snap(coordinates[i], tolerance);\n      }\n    }\n\n    return _super.prototype.finish.call(this);\n  };\n  /**\n   * @private\n   */\n\n\n  CanvasPolygonBuilder.prototype.setFillStrokeStyles_ = function () {\n    var state = this.state;\n    var fillStyle = state.fillStyle;\n\n    if (fillStyle !== undefined) {\n      this.updateFillStyle(state, this.createFill);\n    }\n\n    if (state.strokeStyle !== undefined) {\n      this.updateStrokeStyle(state, this.applyStroke);\n    }\n  };\n\n  return CanvasPolygonBuilder;\n}(CanvasBuilder);\n\nexport default CanvasPolygonBuilder;","/**\n * @module ol/style/TextPlacement\n */\n\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link module:ol/geom/LineString~LineString},\n * {@link module:ol/geom/Polygon~Polygon}, {@link module:ol/geom/MultiLineString~MultiLineString} or\n * {@link module:ol/geom/MultiPolygon~MultiPolygon}.\n * @enum {string}\n */\nexport default {\n  POINT: 'point',\n  LINE: 'line'\n};","/**\n * @module ol/geom/flat/straightchunk\n */\n\n/**\n * @param {number} maxAngle Maximum acceptable angle delta between segments.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Array<number>} Start and end of the first suitable chunk of the\n * given `flatCoordinates`.\n */\nexport function matchingChunk(maxAngle, flatCoordinates, offset, end, stride) {\n  var chunkStart = offset;\n  var chunkEnd = offset;\n  var chunkM = 0;\n  var m = 0;\n  var start = offset;\n  var acos, i, m12, m23, x1, y1, x12, y12, x23, y23;\n\n  for (i = offset; i < end; i += stride) {\n    var x2 = flatCoordinates[i];\n    var y2 = flatCoordinates[i + 1];\n\n    if (x1 !== undefined) {\n      x23 = x2 - x1;\n      y23 = y2 - y1;\n      m23 = Math.sqrt(x23 * x23 + y23 * y23);\n\n      if (x12 !== undefined) {\n        m += m12;\n        acos = Math.acos((x12 * x23 + y12 * y23) / (m12 * m23));\n\n        if (acos > maxAngle) {\n          if (m > chunkM) {\n            chunkM = m;\n            chunkStart = start;\n            chunkEnd = i;\n          }\n\n          m = 0;\n          start = i - stride;\n        }\n      }\n\n      m12 = m23;\n      x12 = x23;\n      y12 = y23;\n    }\n\n    x1 = x2;\n    y1 = y2;\n  }\n\n  m += m23;\n  return m > chunkM ? [start, i] : [chunkStart, chunkEnd];\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/render/canvas/TextBuilder\n */\n\n\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction from './Instruction.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport TextPlacement from '../../style/TextPlacement.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { defaultFillStyle, defaultFont, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultPadding, defaultStrokeStyle, defaultTextAlign, defaultTextBaseline, registerFont } from '../canvas.js';\nimport { getUid } from '../../util.js';\nimport { intersects } from '../../extent.js';\nimport { matchingChunk } from '../../geom/flat/straightchunk.js';\n/**\n * @const\n * @enum {number}\n */\n\nexport var TEXT_ALIGN = {\n  'left': 0,\n  'end': 0,\n  'center': 0.5,\n  'right': 1,\n  'start': 1,\n  'top': 0,\n  'middle': 0.5,\n  'hanging': 0.2,\n  'alphabetic': 0.8,\n  'ideographic': 0.8,\n  'bottom': 1\n};\n\nvar CanvasTextBuilder =\n/** @class */\nfunction (_super) {\n  __extends(CanvasTextBuilder, _super);\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n\n\n  function CanvasTextBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n    var _this = _super.call(this, tolerance, maxExtent, resolution, pixelRatio) || this;\n    /**\n     * @private\n     * @type {Array<HTMLCanvasElement>}\n     */\n\n\n    _this.labels_ = null;\n    /**\n     * @private\n     * @type {string|Array<string>}\n     */\n\n    _this.text_ = '';\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.textOffsetX_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.textOffsetY_ = 0;\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n\n    _this.textRotateWithView_ = undefined;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.textRotation_ = 0;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n\n    _this.textFillState_ = null;\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").FillState>}\n     */\n\n    _this.fillStates = {};\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n\n    _this.textStrokeState_ = null;\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n     */\n\n    _this.strokeStates = {};\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").TextState}\n     */\n\n    _this.textState_ =\n    /** @type {import(\"../canvas.js\").TextState} */\n    {};\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").TextState>}\n     */\n\n    _this.textStates = {};\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.textKey_ = '';\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.fillKey_ = '';\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.strokeKey_ = '';\n    /**\n     * Data shared with an image builder for combined decluttering.\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterImageWithText}\n     */\n\n    _this.declutterImageWithText_ = undefined;\n    return _this;\n  }\n  /**\n   * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n   */\n\n\n  CanvasTextBuilder.prototype.finish = function () {\n    var instructions = _super.prototype.finish.call(this);\n\n    instructions.textStates = this.textStates;\n    instructions.fillStates = this.fillStates;\n    instructions.strokeStates = this.strokeStates;\n    return instructions;\n  };\n  /**\n   * @param {import(\"../../geom/SimpleGeometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n\n\n  CanvasTextBuilder.prototype.drawText = function (geometry, feature) {\n    var fillState = this.textFillState_;\n    var strokeState = this.textStrokeState_;\n    var textState = this.textState_;\n\n    if (this.text_ === '' || !textState || !fillState && !strokeState) {\n      return;\n    }\n\n    var coordinates = this.coordinates;\n    var begin = coordinates.length;\n    var geometryType = geometry.getType();\n    var flatCoordinates = null;\n    var stride = geometry.getStride();\n\n    if (textState.placement === TextPlacement.LINE && (geometryType == GeometryType.LINE_STRING || geometryType == GeometryType.MULTI_LINE_STRING || geometryType == GeometryType.POLYGON || geometryType == GeometryType.MULTI_POLYGON)) {\n      if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n        return;\n      }\n\n      var ends = void 0;\n      flatCoordinates = geometry.getFlatCoordinates();\n\n      if (geometryType == GeometryType.LINE_STRING) {\n        ends = [flatCoordinates.length];\n      } else if (geometryType == GeometryType.MULTI_LINE_STRING) {\n        ends =\n        /** @type {import(\"../../geom/MultiLineString.js\").default} */\n        geometry.getEnds();\n      } else if (geometryType == GeometryType.POLYGON) {\n        ends =\n        /** @type {import(\"../../geom/Polygon.js\").default} */\n        geometry.getEnds().slice(0, 1);\n      } else if (geometryType == GeometryType.MULTI_POLYGON) {\n        var endss =\n        /** @type {import(\"../../geom/MultiPolygon.js\").default} */\n        geometry.getEndss();\n        ends = [];\n\n        for (var i = 0, ii = endss.length; i < ii; ++i) {\n          ends.push(endss[i][0]);\n        }\n      }\n\n      this.beginGeometry(geometry, feature);\n      var textAlign = textState.textAlign;\n      var flatOffset = 0;\n      var flatEnd = void 0;\n\n      for (var o = 0, oo = ends.length; o < oo; ++o) {\n        if (textAlign == undefined) {\n          var range = matchingChunk(textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\n          flatOffset = range[0];\n          flatEnd = range[1];\n        } else {\n          flatEnd = ends[o];\n        }\n\n        for (var i = flatOffset; i < flatEnd; i += stride) {\n          coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\n        }\n\n        var end = coordinates.length;\n        flatOffset = ends[o];\n        this.drawChars_(begin, end);\n        begin = end;\n      }\n\n      this.endGeometry(feature);\n    } else {\n      var geometryWidths = textState.overflow ? null : [];\n\n      switch (geometryType) {\n        case GeometryType.POINT:\n        case GeometryType.MULTI_POINT:\n          flatCoordinates =\n          /** @type {import(\"../../geom/MultiPoint.js\").default} */\n          geometry.getFlatCoordinates();\n          break;\n\n        case GeometryType.LINE_STRING:\n          flatCoordinates =\n          /** @type {import(\"../../geom/LineString.js\").default} */\n          geometry.getFlatMidpoint();\n          break;\n\n        case GeometryType.CIRCLE:\n          flatCoordinates =\n          /** @type {import(\"../../geom/Circle.js\").default} */\n          geometry.getCenter();\n          break;\n\n        case GeometryType.MULTI_LINE_STRING:\n          flatCoordinates =\n          /** @type {import(\"../../geom/MultiLineString.js\").default} */\n          geometry.getFlatMidpoints();\n          stride = 2;\n          break;\n\n        case GeometryType.POLYGON:\n          flatCoordinates =\n          /** @type {import(\"../../geom/Polygon.js\").default} */\n          geometry.getFlatInteriorPoint();\n\n          if (!textState.overflow) {\n            geometryWidths.push(flatCoordinates[2] / this.resolution);\n          }\n\n          stride = 3;\n          break;\n\n        case GeometryType.MULTI_POLYGON:\n          var interiorPoints =\n          /** @type {import(\"../../geom/MultiPolygon.js\").default} */\n          geometry.getFlatInteriorPoints();\n          flatCoordinates = [];\n\n          for (var i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n            if (!textState.overflow) {\n              geometryWidths.push(interiorPoints[i + 2] / this.resolution);\n            }\n\n            flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n          }\n\n          if (flatCoordinates.length === 0) {\n            return;\n          }\n\n          stride = 2;\n          break;\n\n        default:\n      }\n\n      var end = this.appendFlatPointCoordinates(flatCoordinates, stride);\n\n      if (end === begin) {\n        return;\n      }\n\n      if (geometryWidths && (end - begin) / 2 !== flatCoordinates.length / stride) {\n        var beg_1 = begin / 2;\n        geometryWidths = geometryWidths.filter(function (w, i) {\n          var keep = coordinates[(beg_1 + i) * 2] === flatCoordinates[i * stride] && coordinates[(beg_1 + i) * 2 + 1] === flatCoordinates[i * stride + 1];\n\n          if (!keep) {\n            --beg_1;\n          }\n\n          return keep;\n        });\n      }\n\n      this.saveTextStates_();\n\n      if (textState.backgroundFill || textState.backgroundStroke) {\n        this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\n\n        if (textState.backgroundFill) {\n          this.updateFillStyle(this.state, this.createFill);\n          this.hitDetectionInstructions.push(this.createFill(this.state));\n        }\n\n        if (textState.backgroundStroke) {\n          this.updateStrokeStyle(this.state, this.applyStroke);\n          this.hitDetectionInstructions.push(this.createStroke(this.state));\n        }\n      }\n\n      this.beginGeometry(geometry, feature); // adjust padding for negative scale\n\n      var padding = textState.padding;\n\n      if (padding != defaultPadding && (textState.scale[0] < 0 || textState.scale[1] < 0)) {\n        var p0 = textState.padding[0];\n        var p1 = textState.padding[1];\n        var p2 = textState.padding[2];\n        var p3 = textState.padding[3];\n\n        if (textState.scale[0] < 0) {\n          p1 = -p1;\n          p3 = -p3;\n        }\n\n        if (textState.scale[1] < 0) {\n          p0 = -p0;\n          p2 = -p2;\n        }\n\n        padding = [p0, p1, p2, p3];\n      } // The image is unknown at this stage so we pass null; it will be computed at render time.\n      // For clarity, we pass NaN for offsetX, offsetY, width and height, which will be computed at\n      // render time.\n\n\n      var pixelRatio_1 = this.pixelRatio;\n      this.instructions.push([CanvasInstruction.DRAW_IMAGE, begin, end, null, NaN, NaN, NaN, 1, 0, 0, this.textRotateWithView_, this.textRotation_, [1, 1], NaN, this.declutterImageWithText_, padding == defaultPadding ? defaultPadding : padding.map(function (p) {\n        return p * pixelRatio_1;\n      }), !!textState.backgroundFill, !!textState.backgroundStroke, this.text_, this.textKey_, this.strokeKey_, this.fillKey_, this.textOffsetX_, this.textOffsetY_, geometryWidths]);\n      var scale = 1 / pixelRatio_1;\n      this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, begin, end, null, NaN, NaN, NaN, 1, 0, 0, this.textRotateWithView_, this.textRotation_, [scale, scale], NaN, this.declutterImageWithText_, padding, !!textState.backgroundFill, !!textState.backgroundStroke, this.text_, this.textKey_, this.strokeKey_, this.fillKey_, this.textOffsetX_, this.textOffsetY_, geometryWidths]);\n      this.endGeometry(feature);\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  CanvasTextBuilder.prototype.saveTextStates_ = function () {\n    var strokeState = this.textStrokeState_;\n    var textState = this.textState_;\n    var fillState = this.textFillState_;\n    var strokeKey = this.strokeKey_;\n\n    if (strokeState) {\n      if (!(strokeKey in this.strokeStates)) {\n        this.strokeStates[strokeKey] = {\n          strokeStyle: strokeState.strokeStyle,\n          lineCap: strokeState.lineCap,\n          lineDashOffset: strokeState.lineDashOffset,\n          lineWidth: strokeState.lineWidth,\n          lineJoin: strokeState.lineJoin,\n          miterLimit: strokeState.miterLimit,\n          lineDash: strokeState.lineDash\n        };\n      }\n    }\n\n    var textKey = this.textKey_;\n\n    if (!(textKey in this.textStates)) {\n      this.textStates[textKey] = {\n        font: textState.font,\n        textAlign: textState.textAlign || defaultTextAlign,\n        textBaseline: textState.textBaseline || defaultTextBaseline,\n        scale: textState.scale\n      };\n    }\n\n    var fillKey = this.fillKey_;\n\n    if (fillState) {\n      if (!(fillKey in this.fillStates)) {\n        this.fillStates[fillKey] = {\n          fillStyle: fillState.fillStyle\n        };\n      }\n    }\n  };\n  /**\n   * @private\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   */\n\n\n  CanvasTextBuilder.prototype.drawChars_ = function (begin, end) {\n    var strokeState = this.textStrokeState_;\n    var textState = this.textState_;\n    var strokeKey = this.strokeKey_;\n    var textKey = this.textKey_;\n    var fillKey = this.fillKey_;\n    this.saveTextStates_();\n    var pixelRatio = this.pixelRatio;\n    var baseline = TEXT_ALIGN[textState.textBaseline];\n    var offsetY = this.textOffsetY_ * pixelRatio;\n    var text = this.text_;\n    var strokeWidth = strokeState ? strokeState.lineWidth * Math.abs(textState.scale[0]) / 2 : 0;\n    this.instructions.push([CanvasInstruction.DRAW_CHARS, begin, end, baseline, textState.overflow, fillKey, textState.maxAngle, pixelRatio, offsetY, strokeKey, strokeWidth * pixelRatio, text, textKey, 1]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_CHARS, begin, end, baseline, textState.overflow, fillKey, textState.maxAngle, 1, offsetY, strokeKey, strokeWidth, text, textKey, 1 / pixelRatio]);\n  };\n  /**\n   * @param {import(\"../../style/Text.js\").default} textStyle Text style.\n   * @param {Object} [opt_sharedData] Shared data.\n   */\n\n\n  CanvasTextBuilder.prototype.setTextStyle = function (textStyle, opt_sharedData) {\n    var textState, fillState, strokeState;\n\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      var textFillStyle = textStyle.getFill();\n\n      if (!textFillStyle) {\n        fillState = null;\n        this.textFillState_ = fillState;\n      } else {\n        fillState = this.textFillState_;\n\n        if (!fillState) {\n          fillState =\n          /** @type {import(\"../canvas.js\").FillState} */\n          {};\n          this.textFillState_ = fillState;\n        }\n\n        fillState.fillStyle = asColorLike(textFillStyle.getColor() || defaultFillStyle);\n      }\n\n      var textStrokeStyle = textStyle.getStroke();\n\n      if (!textStrokeStyle) {\n        strokeState = null;\n        this.textStrokeState_ = strokeState;\n      } else {\n        strokeState = this.textStrokeState_;\n\n        if (!strokeState) {\n          strokeState =\n          /** @type {import(\"../canvas.js\").StrokeState} */\n          {};\n          this.textStrokeState_ = strokeState;\n        }\n\n        var lineDash = textStrokeStyle.getLineDash();\n        var lineDashOffset = textStrokeStyle.getLineDashOffset();\n        var lineWidth = textStrokeStyle.getWidth();\n        var miterLimit = textStrokeStyle.getMiterLimit();\n        strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\n        strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\n        strokeState.lineDashOffset = lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\n        strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\n        strokeState.lineWidth = lineWidth === undefined ? defaultLineWidth : lineWidth;\n        strokeState.miterLimit = miterLimit === undefined ? defaultMiterLimit : miterLimit;\n        strokeState.strokeStyle = asColorLike(textStrokeStyle.getColor() || defaultStrokeStyle);\n      }\n\n      textState = this.textState_;\n      var font = textStyle.getFont() || defaultFont;\n      registerFont(font);\n      var textScale = textStyle.getScaleArray();\n      textState.overflow = textStyle.getOverflow();\n      textState.font = font;\n      textState.maxAngle = textStyle.getMaxAngle();\n      textState.placement = textStyle.getPlacement();\n      textState.textAlign = textStyle.getTextAlign();\n      textState.textBaseline = textStyle.getTextBaseline() || defaultTextBaseline;\n      textState.backgroundFill = textStyle.getBackgroundFill();\n      textState.backgroundStroke = textStyle.getBackgroundStroke();\n      textState.padding = textStyle.getPadding() || defaultPadding;\n      textState.scale = textScale === undefined ? [1, 1] : textScale;\n      var textOffsetX = textStyle.getOffsetX();\n      var textOffsetY = textStyle.getOffsetY();\n      var textRotateWithView = textStyle.getRotateWithView();\n      var textRotation = textStyle.getRotation();\n      this.text_ = textStyle.getText() || '';\n      this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n      this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n      this.textRotateWithView_ = textRotateWithView === undefined ? false : textRotateWithView;\n      this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n      this.strokeKey_ = strokeState ? (typeof strokeState.strokeStyle == 'string' ? strokeState.strokeStyle : getUid(strokeState.strokeStyle)) + strokeState.lineCap + strokeState.lineDashOffset + '|' + strokeState.lineWidth + strokeState.lineJoin + strokeState.miterLimit + '[' + strokeState.lineDash.join() + ']' : '';\n      this.textKey_ = textState.font + textState.scale + (textState.textAlign || '?') + (textState.textBaseline || '?');\n      this.fillKey_ = fillState ? typeof fillState.fillStyle == 'string' ? fillState.fillStyle : '|' + getUid(fillState.fillStyle) : '';\n    }\n\n    this.declutterImageWithText_ = opt_sharedData;\n  };\n\n  return CanvasTextBuilder;\n}(CanvasBuilder);\n\nexport default CanvasTextBuilder;","/**\n * @module ol/render/canvas/BuilderGroup\n */\nimport Builder from './Builder.js';\nimport ImageBuilder from './ImageBuilder.js';\nimport LineStringBuilder from './LineStringBuilder.js';\nimport PolygonBuilder from './PolygonBuilder.js';\nimport TextBuilder from './TextBuilder.js';\n/**\n * @type {Object<import(\"./BuilderType\").default, typeof Builder>}\n */\n\nvar BATCH_CONSTRUCTORS = {\n  'Circle': PolygonBuilder,\n  'Default': Builder,\n  'Image': ImageBuilder,\n  'LineString': LineStringBuilder,\n  'Polygon': PolygonBuilder,\n  'Text': TextBuilder\n};\n\nvar BuilderGroup =\n/** @class */\nfunction () {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Max extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  function BuilderGroup(tolerance, maxExtent, resolution, pixelRatio) {\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tolerance_ = tolerance;\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n    this.maxExtent_ = maxExtent;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.pixelRatio_ = pixelRatio;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.resolution_ = resolution;\n    /**\n     * @private\n     * @type {!Object<string, !Object<import(\"./BuilderType\").default, Builder>>}\n     */\n\n    this.buildersByZIndex_ = {};\n  }\n  /**\n   * @return {!Object<string, !Object<import(\"./BuilderType\").default, import(\"./Builder.js\").SerializableInstructions>>} The serializable instructions\n   */\n\n\n  BuilderGroup.prototype.finish = function () {\n    var builderInstructions = {};\n\n    for (var zKey in this.buildersByZIndex_) {\n      builderInstructions[zKey] = builderInstructions[zKey] || {};\n      var builders = this.buildersByZIndex_[zKey];\n\n      for (var builderKey in builders) {\n        var builderInstruction = builders[builderKey].finish();\n        builderInstructions[zKey][builderKey] = builderInstruction;\n      }\n    }\n\n    return builderInstructions;\n  };\n  /**\n   * @param {number|undefined} zIndex Z index.\n   * @param {import(\"./BuilderType.js\").default} builderType Replay type.\n   * @return {import(\"../VectorContext.js\").default} Replay.\n   */\n\n\n  BuilderGroup.prototype.getBuilder = function (zIndex, builderType) {\n    var zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n    var replays = this.buildersByZIndex_[zIndexKey];\n\n    if (replays === undefined) {\n      replays = {};\n      this.buildersByZIndex_[zIndexKey] = replays;\n    }\n\n    var replay = replays[builderType];\n\n    if (replay === undefined) {\n      var Constructor = BATCH_CONSTRUCTORS[builderType];\n      replay = new Constructor(this.tolerance_, this.maxExtent_, this.resolution_, this.pixelRatio_);\n      replays[builderType] = replay;\n    }\n\n    return replay;\n  };\n\n  return BuilderGroup;\n}();\n\nexport default BuilderGroup;","/**\n * @module ol/render/canvas/BuilderType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CIRCLE: 'Circle',\n  DEFAULT: 'Default',\n  IMAGE: 'Image',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  TEXT: 'Text'\n};","/**\n * @module ol/geom/flat/textpath\n */\nimport { lerp } from '../../math.js';\nimport { rotate } from './transform.js';\n/**\n * @param {Array<number>} flatCoordinates Path to put text on.\n * @param {number} offset Start offset of the `flatCoordinates`.\n * @param {number} end End offset of the `flatCoordinates`.\n * @param {number} stride Stride.\n * @param {string} text Text to place on the path.\n * @param {number} startM m along the path where the text starts.\n * @param {number} maxAngle Max angle between adjacent chars in radians.\n * @param {number} scale The product of the text scale and the device pixel ratio.\n * @param {function(string, string, Object<string, number>):number} measureAndCacheTextWidth Measure and cache text width.\n * @param {string} font The font.\n * @param {Object<string, number>} cache A cache of measured widths.\n * @param {number} rotation Rotation to apply to the flatCoordinates to determine whether text needs to be reversed.\n * @return {Array<Array<*>>|null} The result array (or null if `maxAngle` was\n * exceeded). Entries of the array are x, y, anchorX, angle, chunk.\n */\n\nexport function drawTextOnPath(flatCoordinates, offset, end, stride, text, startM, maxAngle, scale, measureAndCacheTextWidth, font, cache, rotation) {\n  var x2 = flatCoordinates[offset];\n  var y2 = flatCoordinates[offset + 1];\n  var x1 = 0;\n  var y1 = 0;\n  var segmentLength = 0;\n  var segmentM = 0;\n\n  function advance() {\n    x1 = x2;\n    y1 = y2;\n    offset += stride;\n    x2 = flatCoordinates[offset];\n    y2 = flatCoordinates[offset + 1];\n    segmentM += segmentLength;\n    segmentLength = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  }\n\n  do {\n    advance();\n  } while (offset < end - stride && segmentM + segmentLength < startM);\n\n  var interpolate = segmentLength === 0 ? 0 : (startM - segmentM) / segmentLength;\n  var beginX = lerp(x1, x2, interpolate);\n  var beginY = lerp(y1, y2, interpolate);\n  var startOffset = offset - stride;\n  var startLength = segmentM;\n  var endM = startM + scale * measureAndCacheTextWidth(font, text, cache);\n\n  while (offset < end - stride && segmentM + segmentLength < endM) {\n    advance();\n  }\n\n  interpolate = segmentLength === 0 ? 0 : (endM - segmentM) / segmentLength;\n  var endX = lerp(x1, x2, interpolate);\n  var endY = lerp(y1, y2, interpolate); // Keep text upright\n\n  var reverse;\n\n  if (rotation) {\n    var flat = [beginX, beginY, endX, endY];\n    rotate(flat, 0, 4, 2, rotation, flat, flat);\n    reverse = flat[0] > flat[2];\n  } else {\n    reverse = beginX > endX;\n  }\n\n  var PI = Math.PI;\n  var result = [];\n  var singleSegment = startOffset + stride === offset;\n  offset = startOffset;\n  segmentLength = 0;\n  segmentM = startLength;\n  x2 = flatCoordinates[offset];\n  y2 = flatCoordinates[offset + 1];\n  var previousAngle; // All on the same segment\n\n  if (singleSegment) {\n    advance();\n    previousAngle = Math.atan2(y2 - y1, x2 - x1);\n\n    if (reverse) {\n      previousAngle += previousAngle > 0 ? -PI : PI;\n    }\n\n    var x = (endX + beginX) / 2;\n    var y = (endY + beginY) / 2;\n    result[0] = [x, y, (endM - startM) / 2, previousAngle, text];\n    return result;\n  }\n\n  for (var i = 0, ii = text.length; i < ii;) {\n    advance();\n    var angle = Math.atan2(y2 - y1, x2 - x1);\n\n    if (reverse) {\n      angle += angle > 0 ? -PI : PI;\n    }\n\n    if (previousAngle !== undefined) {\n      var delta = angle - previousAngle;\n      delta += delta > PI ? -2 * PI : delta < -PI ? 2 * PI : 0;\n\n      if (Math.abs(delta) > maxAngle) {\n        return null;\n      }\n    }\n\n    previousAngle = angle;\n    var iStart = i;\n    var charLength = 0;\n\n    for (; i < ii; ++i) {\n      var index = reverse ? ii - i - 1 : i;\n      var len = scale * measureAndCacheTextWidth(font, text[index], cache);\n\n      if (offset + stride < end && segmentM + segmentLength < startM + charLength + len / 2) {\n        break;\n      }\n\n      charLength += len;\n    }\n\n    if (i === iStart) {\n      continue;\n    }\n\n    var chars = reverse ? text.substring(ii - iStart, ii - i) : text.substring(iStart, i);\n    interpolate = segmentLength === 0 ? 0 : (startM + charLength / 2 - segmentM) / segmentLength;\n    var x = lerp(x1, x2, interpolate);\n    var y = lerp(y1, y2, interpolate);\n    result.push([x, y, charLength / 2, angle, chars]);\n    startM += charLength;\n  }\n\n  return result;\n}","/**\n * @module ol/render/canvas/Executor\n */\nimport CanvasInstruction from './Instruction.js';\nimport { TEXT_ALIGN } from './TextBuilder.js';\nimport { WORKER_OFFSCREEN_CANVAS } from '../../has.js';\nimport { apply as applyTransform, compose as composeTransform, create as createTransform, setFromArray as transformSetFromArray } from '../../transform.js';\nimport { createEmpty, createOrUpdate, intersects } from '../../extent.js';\nimport { defaultPadding, defaultTextAlign, defaultTextBaseline, drawImageOrLabel, getTextDimensions, measureAndCacheTextWidth } from '../canvas.js';\nimport { drawTextOnPath } from '../../geom/flat/textpath.js';\nimport { equals } from '../../array.js';\nimport { lineStringLength } from '../../geom/flat/length.js';\nimport { transform2D } from '../../geom/flat/transform.js';\n/**\n * @typedef {Object} BBox\n * @property {number} minX Minimal x.\n * @property {number} minY Minimal y.\n * @property {number} maxX Maximal x.\n * @property {number} maxY Maximal y\n * @property {*} value Value.\n */\n\n/**\n * @typedef {Object} ImageOrLabelDimensions\n * @property {number} drawImageX DrawImageX.\n * @property {number} drawImageY DrawImageY.\n * @property {number} drawImageW DrawImageW.\n * @property {number} drawImageH DrawImageH.\n * @property {number} originX OriginX.\n * @property {number} originY OriginY.\n * @property {Array<number>} scale Scale.\n * @property {BBox} declutterBox DeclutterBox.\n * @property {import(\"../../transform.js\").Transform} canvasTransform CanvasTransform.\n */\n\n/**\n * @typedef {{0: CanvasRenderingContext2D, 1: number, 2: import(\"../canvas.js\").Label|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement, 3: ImageOrLabelDimensions, 4: number, 5: Array<*>, 6: Array<*>}} ReplayImageOrLabelArgs\n */\n\n/**\n * @template T\n * @typedef {function(import(\"../../Feature.js\").FeatureLike, import(\"../../geom/SimpleGeometry.js\").default): T} FeatureCallback\n */\n\n/**\n * @type {import(\"../../extent.js\").Extent}\n */\n\nvar tmpExtent = createEmpty();\n/** @type {import(\"../../coordinate.js\").Coordinate} */\n\nvar p1 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\n\nvar p2 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\n\nvar p3 = [];\n/** @type {import(\"../../coordinate.js\").Coordinate} */\n\nvar p4 = [];\n/**\n * @param {ReplayImageOrLabelArgs} replayImageOrLabelArgs Arguments to replayImageOrLabel\n * @return {BBox} Declutter bbox.\n */\n\nfunction getDeclutterBox(replayImageOrLabelArgs) {\n  return replayImageOrLabelArgs[3].declutterBox;\n}\n\nvar rtlRegEx = new RegExp(\n/* eslint-disable prettier/prettier */\n'[' + String.fromCharCode(0x00591) + '-' + String.fromCharCode(0x008ff) + String.fromCharCode(0x0fb1d) + '-' + String.fromCharCode(0x0fdff) + String.fromCharCode(0x0fe70) + '-' + String.fromCharCode(0x0fefc) + String.fromCharCode(0x10800) + '-' + String.fromCharCode(0x10fff) + String.fromCharCode(0x1e800) + '-' + String.fromCharCode(0x1efff) + ']'\n/* eslint-enable prettier/prettier */\n);\n/**\n * @param {string} text Text.\n * @param {string} align Alignment.\n * @return {number} Text alignment.\n */\n\nfunction horizontalTextAlign(text, align) {\n  if ((align === 'start' || align === 'end') && !rtlRegEx.test(text)) {\n    align = align === 'start' ? 'left' : 'right';\n  }\n\n  return TEXT_ALIGN[align];\n}\n/**\n * @param {Array<string>} acc Accumulator.\n * @param {string} line Line of text.\n * @param {number} i Index\n * @return {Array<string>} Accumulator.\n */\n\n\nfunction createTextChunks(acc, line, i) {\n  if (i > 0) {\n    acc.push('\\n', '');\n  }\n\n  acc.push(line, '');\n  return acc;\n}\n\nvar Executor =\n/** @class */\nfunction () {\n  /**\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {import(\"../canvas.js\").SerializableInstructions} instructions The serializable instructions\n   */\n  function Executor(resolution, pixelRatio, overlaps, instructions) {\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.overlaps = overlaps;\n    /**\n     * @protected\n     * @type {number}\n     */\n\n    this.pixelRatio = pixelRatio;\n    /**\n     * @protected\n     * @const\n     * @type {number}\n     */\n\n    this.resolution = resolution;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this.alignFill_;\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n\n    this.instructions = instructions.instructions;\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n\n    this.coordinates = instructions.coordinates;\n    /**\n     * @private\n     * @type {!Object<number,import(\"../../coordinate.js\").Coordinate|Array<import(\"../../coordinate.js\").Coordinate>|Array<Array<import(\"../../coordinate.js\").Coordinate>>>}\n     */\n\n    this.coordinateCache_ = {};\n    /**\n     * @private\n     * @type {!import(\"../../transform.js\").Transform}\n     */\n\n    this.renderedTransform_ = createTransform();\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n\n    this.hitDetectionInstructions = instructions.hitDetectionInstructions;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    this.pixelCoordinates_ = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.viewRotation_ = 0;\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").FillState>}\n     */\n\n    this.fillStates = instructions.fillStates || {};\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n     */\n\n    this.strokeStates = instructions.strokeStates || {};\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").TextState>}\n     */\n\n    this.textStates = instructions.textStates || {};\n    /**\n     * @private\n     * @type {Object<string, Object<string, number>>}\n     */\n\n    this.widths_ = {};\n    /**\n     * @private\n     * @type {Object<string, import(\"../canvas.js\").Label>}\n     */\n\n    this.labels_ = {};\n  }\n  /**\n   * @param {string|Array<string>} text Text.\n   * @param {string} textKey Text style key.\n   * @param {string} fillKey Fill style key.\n   * @param {string} strokeKey Stroke style key.\n   * @return {import(\"../canvas.js\").Label} Label.\n   */\n\n\n  Executor.prototype.createLabel = function (text, textKey, fillKey, strokeKey) {\n    var key = text + textKey + fillKey + strokeKey;\n\n    if (this.labels_[key]) {\n      return this.labels_[key];\n    }\n\n    var strokeState = strokeKey ? this.strokeStates[strokeKey] : null;\n    var fillState = fillKey ? this.fillStates[fillKey] : null;\n    var textState = this.textStates[textKey];\n    var pixelRatio = this.pixelRatio;\n    var scale = [textState.scale[0] * pixelRatio, textState.scale[1] * pixelRatio];\n    var textIsArray = Array.isArray(text);\n    var align = horizontalTextAlign(textIsArray ? text[0] : text, textState.textAlign || defaultTextAlign);\n    var strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n    var chunks = textIsArray ? text : text.split('\\n').reduce(createTextChunks, []);\n\n    var _a = getTextDimensions(textState, chunks),\n        width = _a.width,\n        height = _a.height,\n        widths = _a.widths,\n        heights = _a.heights,\n        lineWidths = _a.lineWidths;\n\n    var renderWidth = width + strokeWidth;\n    var contextInstructions = []; // make canvas 2 pixels wider to account for italic text width measurement errors\n\n    var w = (renderWidth + 2) * scale[0];\n    var h = (height + strokeWidth) * scale[1];\n    /** @type {import(\"../canvas.js\").Label} */\n\n    var label = {\n      width: w < 0 ? Math.floor(w) : Math.ceil(w),\n      height: h < 0 ? Math.floor(h) : Math.ceil(h),\n      contextInstructions: contextInstructions\n    };\n\n    if (scale[0] != 1 || scale[1] != 1) {\n      contextInstructions.push('scale', scale);\n    }\n\n    if (strokeKey) {\n      contextInstructions.push('strokeStyle', strokeState.strokeStyle);\n      contextInstructions.push('lineWidth', strokeWidth);\n      contextInstructions.push('lineCap', strokeState.lineCap);\n      contextInstructions.push('lineJoin', strokeState.lineJoin);\n      contextInstructions.push('miterLimit', strokeState.miterLimit); // eslint-disable-next-line\n\n      var Context = WORKER_OFFSCREEN_CANVAS ? OffscreenCanvasRenderingContext2D : CanvasRenderingContext2D;\n\n      if (Context.prototype.setLineDash) {\n        contextInstructions.push('setLineDash', [strokeState.lineDash]);\n        contextInstructions.push('lineDashOffset', strokeState.lineDashOffset);\n      }\n    }\n\n    if (fillKey) {\n      contextInstructions.push('fillStyle', fillState.fillStyle);\n    }\n\n    contextInstructions.push('textBaseline', 'middle');\n    contextInstructions.push('textAlign', 'center');\n    var leftRight = 0.5 - align;\n    var x = align * renderWidth + leftRight * strokeWidth;\n    var strokeInstructions = [];\n    var fillInstructions = [];\n    var lineHeight = 0;\n    var lineOffset = 0;\n    var widthHeightIndex = 0;\n    var lineWidthIndex = 0;\n    var previousFont;\n\n    for (var i = 0, ii = chunks.length; i < ii; i += 2) {\n      var text_1 = chunks[i];\n\n      if (text_1 === '\\n') {\n        lineOffset += lineHeight;\n        lineHeight = 0;\n        x = align * renderWidth + leftRight * strokeWidth;\n        ++lineWidthIndex;\n        continue;\n      }\n\n      var font = chunks[i + 1] || textState.font;\n\n      if (font !== previousFont) {\n        if (strokeKey) {\n          strokeInstructions.push('font', font);\n        }\n\n        if (fillKey) {\n          fillInstructions.push('font', font);\n        }\n\n        previousFont = font;\n      }\n\n      lineHeight = Math.max(lineHeight, heights[widthHeightIndex]);\n      var fillStrokeArgs = [text_1, x + leftRight * widths[widthHeightIndex] + align * (widths[widthHeightIndex] - lineWidths[lineWidthIndex]), 0.5 * (strokeWidth + lineHeight) + lineOffset];\n      x += widths[widthHeightIndex];\n\n      if (strokeKey) {\n        strokeInstructions.push('strokeText', fillStrokeArgs);\n      }\n\n      if (fillKey) {\n        fillInstructions.push('fillText', fillStrokeArgs);\n      }\n\n      ++widthHeightIndex;\n    }\n\n    Array.prototype.push.apply(contextInstructions, strokeInstructions);\n    Array.prototype.push.apply(contextInstructions, fillInstructions);\n    this.labels_[key] = label;\n    return label;\n  };\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../coordinate.js\").Coordinate} p1 1st point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p2 2nd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p3 3rd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p4 4th point of the background box.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   */\n\n\n  Executor.prototype.replayTextBackground_ = function (context, p1, p2, p3, p4, fillInstruction, strokeInstruction) {\n    context.beginPath();\n    context.moveTo.apply(context, p1);\n    context.lineTo.apply(context, p2);\n    context.lineTo.apply(context, p3);\n    context.lineTo.apply(context, p4);\n    context.lineTo.apply(context, p1);\n\n    if (fillInstruction) {\n      this.alignFill_ =\n      /** @type {boolean} */\n      fillInstruction[2];\n      this.fill_(context);\n    }\n\n    if (strokeInstruction) {\n      this.setStrokeStyle_(context,\n      /** @type {Array<*>} */\n      strokeInstruction);\n      context.stroke();\n    }\n  };\n  /**\n   * @private\n   * @param {number} sheetWidth Width of the sprite sheet.\n   * @param {number} sheetHeight Height of the sprite sheet.\n   * @param {number} centerX X.\n   * @param {number} centerY Y.\n   * @param {number} width Width.\n   * @param {number} height Height.\n   * @param {number} anchorX Anchor X.\n   * @param {number} anchorY Anchor Y.\n   * @param {number} originX Origin X.\n   * @param {number} originY Origin Y.\n   * @param {number} rotation Rotation.\n   * @param {import(\"../../size.js\").Size} scale Scale.\n   * @param {boolean} snapToPixel Snap to pixel.\n   * @param {Array<number>} padding Padding.\n   * @param {boolean} fillStroke Background fill or stroke.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   * @return {ImageOrLabelDimensions} Dimensions for positioning and decluttering the image or label.\n   */\n\n\n  Executor.prototype.calculateImageOrLabelDimensions_ = function (sheetWidth, sheetHeight, centerX, centerY, width, height, anchorX, anchorY, originX, originY, rotation, scale, snapToPixel, padding, fillStroke, feature) {\n    anchorX *= scale[0];\n    anchorY *= scale[1];\n    var x = centerX - anchorX;\n    var y = centerY - anchorY;\n    var w = width + originX > sheetWidth ? sheetWidth - originX : width;\n    var h = height + originY > sheetHeight ? sheetHeight - originY : height;\n    var boxW = padding[3] + w * scale[0] + padding[1];\n    var boxH = padding[0] + h * scale[1] + padding[2];\n    var boxX = x - padding[3];\n    var boxY = y - padding[0];\n\n    if (fillStroke || rotation !== 0) {\n      p1[0] = boxX;\n      p4[0] = boxX;\n      p1[1] = boxY;\n      p2[1] = boxY;\n      p2[0] = boxX + boxW;\n      p3[0] = p2[0];\n      p3[1] = boxY + boxH;\n      p4[1] = p3[1];\n    }\n\n    var transform;\n\n    if (rotation !== 0) {\n      transform = composeTransform(createTransform(), centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n      applyTransform(transform, p1);\n      applyTransform(transform, p2);\n      applyTransform(transform, p3);\n      applyTransform(transform, p4);\n      createOrUpdate(Math.min(p1[0], p2[0], p3[0], p4[0]), Math.min(p1[1], p2[1], p3[1], p4[1]), Math.max(p1[0], p2[0], p3[0], p4[0]), Math.max(p1[1], p2[1], p3[1], p4[1]), tmpExtent);\n    } else {\n      createOrUpdate(Math.min(boxX, boxX + boxW), Math.min(boxY, boxY + boxH), Math.max(boxX, boxX + boxW), Math.max(boxY, boxY + boxH), tmpExtent);\n    }\n\n    if (snapToPixel) {\n      x = Math.round(x);\n      y = Math.round(y);\n    }\n\n    return {\n      drawImageX: x,\n      drawImageY: y,\n      drawImageW: w,\n      drawImageH: h,\n      originX: originX,\n      originY: originY,\n      declutterBox: {\n        minX: tmpExtent[0],\n        minY: tmpExtent[1],\n        maxX: tmpExtent[2],\n        maxY: tmpExtent[3],\n        value: feature\n      },\n      canvasTransform: transform,\n      scale: scale\n    };\n  };\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} contextScale Scale of the context.\n   * @param {import(\"../canvas.js\").Label|HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} imageOrLabel Image.\n   * @param {ImageOrLabelDimensions} dimensions Dimensions.\n   * @param {number} opacity Opacity.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   * @return {boolean} The image or label was rendered.\n   */\n\n\n  Executor.prototype.replayImageOrLabel_ = function (context, contextScale, imageOrLabel, dimensions, opacity, fillInstruction, strokeInstruction) {\n    var fillStroke = !!(fillInstruction || strokeInstruction);\n    var box = dimensions.declutterBox;\n    var canvas = context.canvas;\n    var strokePadding = strokeInstruction ? strokeInstruction[2] * dimensions.scale[0] / 2 : 0;\n    var intersects = box.minX - strokePadding <= canvas.width / contextScale && box.maxX + strokePadding >= 0 && box.minY - strokePadding <= canvas.height / contextScale && box.maxY + strokePadding >= 0;\n\n    if (intersects) {\n      if (fillStroke) {\n        this.replayTextBackground_(context, p1, p2, p3, p4,\n        /** @type {Array<*>} */\n        fillInstruction,\n        /** @type {Array<*>} */\n        strokeInstruction);\n      }\n\n      drawImageOrLabel(context, dimensions.canvasTransform, opacity, imageOrLabel, dimensions.originX, dimensions.originY, dimensions.drawImageW, dimensions.drawImageH, dimensions.drawImageX, dimensions.drawImageY, dimensions.scale);\n    }\n\n    return true;\n  };\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   */\n\n\n  Executor.prototype.fill_ = function (context) {\n    if (this.alignFill_) {\n      var origin_1 = applyTransform(this.renderedTransform_, [0, 0]);\n      var repeatSize = 512 * this.pixelRatio;\n      context.save();\n      context.translate(origin_1[0] % repeatSize, origin_1[1] % repeatSize);\n      context.rotate(this.viewRotation_);\n    }\n\n    context.fill();\n\n    if (this.alignFill_) {\n      context.restore();\n    }\n  };\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {Array<*>} instruction Instruction.\n   */\n\n\n  Executor.prototype.setStrokeStyle_ = function (context, instruction) {\n    context['strokeStyle'] =\n    /** @type {import(\"../../colorlike.js\").ColorLike} */\n    instruction[1];\n    context.lineWidth =\n    /** @type {number} */\n    instruction[2];\n    context.lineCap =\n    /** @type {CanvasLineCap} */\n    instruction[3];\n    context.lineJoin =\n    /** @type {CanvasLineJoin} */\n    instruction[4];\n    context.miterLimit =\n    /** @type {number} */\n    instruction[5];\n\n    if (context.setLineDash) {\n      context.lineDashOffset =\n      /** @type {number} */\n      instruction[7];\n      context.setLineDash(\n      /** @type {Array<number>} */\n      instruction[6]);\n    }\n  };\n  /**\n   * @private\n   * @param {string|Array<string>} text The text to draw.\n   * @param {string} textKey The key of the text state.\n   * @param {string} strokeKey The key for the stroke state.\n   * @param {string} fillKey The key for the fill state.\n   * @return {{label: import(\"../canvas.js\").Label, anchorX: number, anchorY: number}} The text image and its anchor.\n   */\n\n\n  Executor.prototype.drawLabelWithPointPlacement_ = function (text, textKey, strokeKey, fillKey) {\n    var textState = this.textStates[textKey];\n    var label = this.createLabel(text, textKey, fillKey, strokeKey);\n    var strokeState = this.strokeStates[strokeKey];\n    var pixelRatio = this.pixelRatio;\n    var align = horizontalTextAlign(Array.isArray(text) ? text[0] : text, textState.textAlign || defaultTextAlign);\n    var baseline = TEXT_ALIGN[textState.textBaseline || defaultTextBaseline];\n    var strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0; // Remove the 2 pixels we added in createLabel() for the anchor\n\n    var width = label.width / pixelRatio - 2 * textState.scale[0];\n    var anchorX = align * width + 2 * (0.5 - align) * strokeWidth;\n    var anchorY = baseline * label.height / pixelRatio + 2 * (0.5 - baseline) * strokeWidth;\n    return {\n      label: label,\n      anchorX: anchorX,\n      anchorY: anchorY\n    };\n  };\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} contextScale Scale of the context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {Array<*>} instructions Instructions array.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   * @param {FeatureCallback<T>} [opt_featureCallback] Feature callback.\n   * @param {import(\"../../extent.js\").Extent} [opt_hitExtent] Only check\n   *     features that intersect this extent.\n   * @param {import(\"rbush\").default} [opt_declutterTree] Declutter tree.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n\n\n  Executor.prototype.execute_ = function (context, contextScale, transform, instructions, snapToPixel, opt_featureCallback, opt_hitExtent, opt_declutterTree) {\n    /** @type {Array<number>} */\n    var pixelCoordinates;\n\n    if (this.pixelCoordinates_ && equals(transform, this.renderedTransform_)) {\n      pixelCoordinates = this.pixelCoordinates_;\n    } else {\n      if (!this.pixelCoordinates_) {\n        this.pixelCoordinates_ = [];\n      }\n\n      pixelCoordinates = transform2D(this.coordinates, 0, this.coordinates.length, 2, transform, this.pixelCoordinates_);\n      transformSetFromArray(this.renderedTransform_, transform);\n    }\n\n    var i = 0; // instruction index\n\n    var ii = instructions.length; // end of instructions\n\n    var d = 0; // data index\n\n    var dd; // end of per-instruction data\n\n    var anchorX, anchorY, prevX, prevY, roundX, roundY, image, text, textKey, strokeKey, fillKey;\n    var pendingFill = 0;\n    var pendingStroke = 0;\n    var lastFillInstruction = null;\n    var lastStrokeInstruction = null;\n    var coordinateCache = this.coordinateCache_;\n    var viewRotation = this.viewRotation_;\n    var viewRotationFromTransform = Math.round(Math.atan2(-transform[1], transform[0]) * 1e12) / 1e12;\n    var state =\n    /** @type {import(\"../../render.js\").State} */\n    {\n      context: context,\n      pixelRatio: this.pixelRatio,\n      resolution: this.resolution,\n      rotation: viewRotation\n    }; // When the batch size gets too big, performance decreases. 200 is a good\n    // balance between batch size and number of fill/stroke instructions.\n\n    var batchSize = this.instructions != instructions || this.overlaps ? 0 : 200;\n    var\n    /** @type {import(\"../../Feature.js\").FeatureLike} */\n    feature;\n    var x, y, currentGeometry;\n\n    while (i < ii) {\n      var instruction = instructions[i];\n      var type =\n      /** @type {import(\"./Instruction.js\").default} */\n      instruction[0];\n\n      switch (type) {\n        case CanvasInstruction.BEGIN_GEOMETRY:\n          feature =\n          /** @type {import(\"../../Feature.js\").FeatureLike} */\n          instruction[1];\n          currentGeometry = instruction[3];\n\n          if (!feature.getGeometry()) {\n            i =\n            /** @type {number} */\n            instruction[2];\n          } else if (opt_hitExtent !== undefined && !intersects(opt_hitExtent, currentGeometry.getExtent())) {\n            i =\n            /** @type {number} */\n            instruction[2] + 1;\n          } else {\n            ++i;\n          }\n\n          break;\n\n        case CanvasInstruction.BEGIN_PATH:\n          if (pendingFill > batchSize) {\n            this.fill_(context);\n            pendingFill = 0;\n          }\n\n          if (pendingStroke > batchSize) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n\n          if (!pendingFill && !pendingStroke) {\n            context.beginPath();\n            prevX = NaN;\n            prevY = NaN;\n          }\n\n          ++i;\n          break;\n\n        case CanvasInstruction.CIRCLE:\n          d =\n          /** @type {number} */\n          instruction[1];\n          var x1 = pixelCoordinates[d];\n          var y1 = pixelCoordinates[d + 1];\n          var x2 = pixelCoordinates[d + 2];\n          var y2 = pixelCoordinates[d + 3];\n          var dx = x2 - x1;\n          var dy = y2 - y1;\n          var r = Math.sqrt(dx * dx + dy * dy);\n          context.moveTo(x1 + r, y1);\n          context.arc(x1, y1, r, 0, 2 * Math.PI, true);\n          ++i;\n          break;\n\n        case CanvasInstruction.CLOSE_PATH:\n          context.closePath();\n          ++i;\n          break;\n\n        case CanvasInstruction.CUSTOM:\n          d =\n          /** @type {number} */\n          instruction[1];\n          dd = instruction[2];\n          var geometry =\n          /** @type {import(\"../../geom/SimpleGeometry.js\").default} */\n          instruction[3];\n          var renderer = instruction[4];\n          var fn = instruction.length == 6 ? instruction[5] : undefined;\n          state.geometry = geometry;\n          state.feature = feature;\n\n          if (!(i in coordinateCache)) {\n            coordinateCache[i] = [];\n          }\n\n          var coords = coordinateCache[i];\n\n          if (fn) {\n            fn(pixelCoordinates, d, dd, 2, coords);\n          } else {\n            coords[0] = pixelCoordinates[d];\n            coords[1] = pixelCoordinates[d + 1];\n            coords.length = 2;\n          }\n\n          renderer(coords, state);\n          ++i;\n          break;\n\n        case CanvasInstruction.DRAW_IMAGE:\n          d =\n          /** @type {number} */\n          instruction[1];\n          dd =\n          /** @type {number} */\n          instruction[2];\n          image =\n          /** @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} */\n          instruction[3]; // Remaining arguments in DRAW_IMAGE are in alphabetical order\n\n          anchorX =\n          /** @type {number} */\n          instruction[4];\n          anchorY =\n          /** @type {number} */\n          instruction[5];\n          var height =\n          /** @type {number} */\n          instruction[6];\n          var opacity =\n          /** @type {number} */\n          instruction[7];\n          var originX =\n          /** @type {number} */\n          instruction[8];\n          var originY =\n          /** @type {number} */\n          instruction[9];\n          var rotateWithView =\n          /** @type {boolean} */\n          instruction[10];\n          var rotation =\n          /** @type {number} */\n          instruction[11];\n          var scale =\n          /** @type {import(\"../../size.js\").Size} */\n          instruction[12];\n          var width =\n          /** @type {number} */\n          instruction[13];\n          var declutterImageWithText =\n          /** @type {import(\"../canvas.js\").DeclutterImageWithText} */\n          instruction[14];\n\n          if (!image && instruction.length >= 19) {\n            // create label images\n            text =\n            /** @type {string} */\n            instruction[18];\n            textKey =\n            /** @type {string} */\n            instruction[19];\n            strokeKey =\n            /** @type {string} */\n            instruction[20];\n            fillKey =\n            /** @type {string} */\n            instruction[21];\n            var labelWithAnchor = this.drawLabelWithPointPlacement_(text, textKey, strokeKey, fillKey);\n            image = labelWithAnchor.label;\n            instruction[3] = image;\n            var textOffsetX =\n            /** @type {number} */\n            instruction[22];\n            anchorX = (labelWithAnchor.anchorX - textOffsetX) * this.pixelRatio;\n            instruction[4] = anchorX;\n            var textOffsetY =\n            /** @type {number} */\n            instruction[23];\n            anchorY = (labelWithAnchor.anchorY - textOffsetY) * this.pixelRatio;\n            instruction[5] = anchorY;\n            height = image.height;\n            instruction[6] = height;\n            width = image.width;\n            instruction[13] = width;\n          }\n\n          var geometryWidths = void 0;\n\n          if (instruction.length > 24) {\n            geometryWidths =\n            /** @type {number} */\n            instruction[24];\n          }\n\n          var padding = void 0,\n              backgroundFill = void 0,\n              backgroundStroke = void 0;\n\n          if (instruction.length > 16) {\n            padding =\n            /** @type {Array<number>} */\n            instruction[15];\n            backgroundFill =\n            /** @type {boolean} */\n            instruction[16];\n            backgroundStroke =\n            /** @type {boolean} */\n            instruction[17];\n          } else {\n            padding = defaultPadding;\n            backgroundFill = false;\n            backgroundStroke = false;\n          }\n\n          if (rotateWithView && viewRotationFromTransform) {\n            // Canvas is expected to be rotated to reverse view rotation.\n            rotation += viewRotation;\n          } else if (!rotateWithView && !viewRotationFromTransform) {\n            // Canvas is not rotated, images need to be rotated back to be north-up.\n            rotation -= viewRotation;\n          }\n\n          var widthIndex = 0;\n\n          for (; d < dd; d += 2) {\n            if (geometryWidths && geometryWidths[widthIndex++] < width / this.pixelRatio) {\n              continue;\n            }\n\n            var dimensions = this.calculateImageOrLabelDimensions_(image.width, image.height, pixelCoordinates[d], pixelCoordinates[d + 1], width, height, anchorX, anchorY, originX, originY, rotation, scale, snapToPixel, padding, backgroundFill || backgroundStroke, feature);\n            /** @type {ReplayImageOrLabelArgs} */\n\n            var args = [context, contextScale, image, dimensions, opacity, backgroundFill ?\n            /** @type {Array<*>} */\n            lastFillInstruction : null, backgroundStroke ?\n            /** @type {Array<*>} */\n            lastStrokeInstruction : null];\n            var imageArgs = void 0;\n            var imageDeclutterBox = void 0;\n\n            if (opt_declutterTree && declutterImageWithText) {\n              var index = dd - d;\n\n              if (!declutterImageWithText[index]) {\n                // We now have the image for an image+text combination.\n                declutterImageWithText[index] = args; // Don't render anything for now, wait for the text.\n\n                continue;\n              }\n\n              imageArgs = declutterImageWithText[index];\n              delete declutterImageWithText[index];\n              imageDeclutterBox = getDeclutterBox(imageArgs);\n\n              if (opt_declutterTree.collides(imageDeclutterBox)) {\n                continue;\n              }\n            }\n\n            if (opt_declutterTree && opt_declutterTree.collides(dimensions.declutterBox)) {\n              continue;\n            }\n\n            if (imageArgs) {\n              // We now have image and text for an image+text combination.\n              if (opt_declutterTree) {\n                opt_declutterTree.insert(imageDeclutterBox);\n              } // Render the image before we render the text.\n\n\n              this.replayImageOrLabel_.apply(this, imageArgs);\n            }\n\n            if (opt_declutterTree) {\n              opt_declutterTree.insert(dimensions.declutterBox);\n            }\n\n            this.replayImageOrLabel_.apply(this, args);\n          }\n\n          ++i;\n          break;\n\n        case CanvasInstruction.DRAW_CHARS:\n          var begin =\n          /** @type {number} */\n          instruction[1];\n          var end =\n          /** @type {number} */\n          instruction[2];\n          var baseline =\n          /** @type {number} */\n          instruction[3];\n          var overflow =\n          /** @type {number} */\n          instruction[4];\n          fillKey =\n          /** @type {string} */\n          instruction[5];\n          var maxAngle =\n          /** @type {number} */\n          instruction[6];\n          var measurePixelRatio =\n          /** @type {number} */\n          instruction[7];\n          var offsetY =\n          /** @type {number} */\n          instruction[8];\n          strokeKey =\n          /** @type {string} */\n          instruction[9];\n          var strokeWidth =\n          /** @type {number} */\n          instruction[10];\n          text =\n          /** @type {string} */\n          instruction[11];\n          textKey =\n          /** @type {string} */\n          instruction[12];\n          var pixelRatioScale = [\n          /** @type {number} */\n          instruction[13],\n          /** @type {number} */\n          instruction[13]];\n          var textState = this.textStates[textKey];\n          var font = textState.font;\n          var textScale = [textState.scale[0] * measurePixelRatio, textState.scale[1] * measurePixelRatio];\n          var cachedWidths = void 0;\n\n          if (font in this.widths_) {\n            cachedWidths = this.widths_[font];\n          } else {\n            cachedWidths = {};\n            this.widths_[font] = cachedWidths;\n          }\n\n          var pathLength = lineStringLength(pixelCoordinates, begin, end, 2);\n          var textLength = Math.abs(textScale[0]) * measureAndCacheTextWidth(font, text, cachedWidths);\n\n          if (overflow || textLength <= pathLength) {\n            var textAlign = this.textStates[textKey].textAlign;\n            var startM = (pathLength - textLength) * TEXT_ALIGN[textAlign];\n            var parts = drawTextOnPath(pixelCoordinates, begin, end, 2, text, startM, maxAngle, Math.abs(textScale[0]), measureAndCacheTextWidth, font, cachedWidths, viewRotationFromTransform ? 0 : this.viewRotation_);\n\n            drawChars: if (parts) {\n              /** @type {Array<ReplayImageOrLabelArgs>} */\n              var replayImageOrLabelArgs = [];\n              var c = void 0,\n                  cc = void 0,\n                  chars = void 0,\n                  label = void 0,\n                  part = void 0;\n\n              if (strokeKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n\n                  chars =\n                  /** @type {string} */\n                  part[4];\n                  label = this.createLabel(chars, textKey, '', strokeKey);\n                  anchorX =\n                  /** @type {number} */\n                  part[2] + (textScale[0] < 0 ? -strokeWidth : strokeWidth);\n                  anchorY = baseline * label.height + (0.5 - baseline) * 2 * strokeWidth * textScale[1] / textScale[0] - offsetY;\n                  var dimensions = this.calculateImageOrLabelDimensions_(label.width, label.height, part[0], part[1], label.width, label.height, anchorX, anchorY, 0, 0, part[3], pixelRatioScale, false, defaultPadding, false, feature);\n\n                  if (opt_declutterTree && opt_declutterTree.collides(dimensions.declutterBox)) {\n                    break drawChars;\n                  }\n\n                  replayImageOrLabelArgs.push([context, contextScale, label, dimensions, 1, null, null]);\n                }\n              }\n\n              if (fillKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n\n                  chars =\n                  /** @type {string} */\n                  part[4];\n                  label = this.createLabel(chars, textKey, fillKey, '');\n                  anchorX =\n                  /** @type {number} */\n                  part[2];\n                  anchorY = baseline * label.height - offsetY;\n                  var dimensions = this.calculateImageOrLabelDimensions_(label.width, label.height, part[0], part[1], label.width, label.height, anchorX, anchorY, 0, 0, part[3], pixelRatioScale, false, defaultPadding, false, feature);\n\n                  if (opt_declutterTree && opt_declutterTree.collides(dimensions.declutterBox)) {\n                    break drawChars;\n                  }\n\n                  replayImageOrLabelArgs.push([context, contextScale, label, dimensions, 1, null, null]);\n                }\n              }\n\n              if (opt_declutterTree) {\n                opt_declutterTree.load(replayImageOrLabelArgs.map(getDeclutterBox));\n              }\n\n              for (var i_1 = 0, ii_1 = replayImageOrLabelArgs.length; i_1 < ii_1; ++i_1) {\n                this.replayImageOrLabel_.apply(this, replayImageOrLabelArgs[i_1]);\n              }\n            }\n          }\n\n          ++i;\n          break;\n\n        case CanvasInstruction.END_GEOMETRY:\n          if (opt_featureCallback !== undefined) {\n            feature =\n            /** @type {import(\"../../Feature.js\").FeatureLike} */\n            instruction[1];\n            var result = opt_featureCallback(feature, currentGeometry);\n\n            if (result) {\n              return result;\n            }\n          }\n\n          ++i;\n          break;\n\n        case CanvasInstruction.FILL:\n          if (batchSize) {\n            pendingFill++;\n          } else {\n            this.fill_(context);\n          }\n\n          ++i;\n          break;\n\n        case CanvasInstruction.MOVE_TO_LINE_TO:\n          d =\n          /** @type {number} */\n          instruction[1];\n          dd =\n          /** @type {number} */\n          instruction[2];\n          x = pixelCoordinates[d];\n          y = pixelCoordinates[d + 1];\n          roundX = x + 0.5 | 0;\n          roundY = y + 0.5 | 0;\n\n          if (roundX !== prevX || roundY !== prevY) {\n            context.moveTo(x, y);\n            prevX = roundX;\n            prevY = roundY;\n          }\n\n          for (d += 2; d < dd; d += 2) {\n            x = pixelCoordinates[d];\n            y = pixelCoordinates[d + 1];\n            roundX = x + 0.5 | 0;\n            roundY = y + 0.5 | 0;\n\n            if (d == dd - 2 || roundX !== prevX || roundY !== prevY) {\n              context.lineTo(x, y);\n              prevX = roundX;\n              prevY = roundY;\n            }\n          }\n\n          ++i;\n          break;\n\n        case CanvasInstruction.SET_FILL_STYLE:\n          lastFillInstruction = instruction;\n          this.alignFill_ = instruction[2];\n\n          if (pendingFill) {\n            this.fill_(context);\n            pendingFill = 0;\n\n            if (pendingStroke) {\n              context.stroke();\n              pendingStroke = 0;\n            }\n          }\n\n          context.fillStyle =\n          /** @type {import(\"../../colorlike.js\").ColorLike} */\n          instruction[1];\n          ++i;\n          break;\n\n        case CanvasInstruction.SET_STROKE_STYLE:\n          lastStrokeInstruction = instruction;\n\n          if (pendingStroke) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n\n          this.setStrokeStyle_(context,\n          /** @type {Array<*>} */\n          instruction);\n          ++i;\n          break;\n\n        case CanvasInstruction.STROKE:\n          if (batchSize) {\n            pendingStroke++;\n          } else {\n            context.stroke();\n          }\n\n          ++i;\n          break;\n\n        default:\n          ++i; // consume the instruction anyway, to avoid an infinite loop\n\n          break;\n      }\n    }\n\n    if (pendingFill) {\n      this.fill_(context);\n    }\n\n    if (pendingStroke) {\n      context.stroke();\n    }\n\n    return undefined;\n  };\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} contextScale Scale of the context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   * @param {import(\"rbush\").default} [opt_declutterTree] Declutter tree.\n   */\n\n\n  Executor.prototype.execute = function (context, contextScale, transform, viewRotation, snapToPixel, opt_declutterTree) {\n    this.viewRotation_ = viewRotation;\n    this.execute_(context, contextScale, transform, this.instructions, snapToPixel, undefined, undefined, opt_declutterTree);\n  };\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {FeatureCallback<T>} [opt_featureCallback] Feature callback.\n   * @param {import(\"../../extent.js\").Extent} [opt_hitExtent] Only check\n   *     features that intersect this extent.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n\n\n  Executor.prototype.executeHitDetection = function (context, transform, viewRotation, opt_featureCallback, opt_hitExtent) {\n    this.viewRotation_ = viewRotation;\n    return this.execute_(context, 1, transform, this.hitDetectionInstructions, true, opt_featureCallback, opt_hitExtent);\n  };\n\n  return Executor;\n}();\n\nexport default Executor;","/**\n * @module ol/render/canvas/ExecutorGroup\n */\nimport BuilderType from './BuilderType.js';\nimport Executor from './Executor.js';\nimport { buffer, createEmpty, extendCoordinate } from '../../extent.js';\nimport { compose as composeTransform, create as createTransform } from '../../transform.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport { isEmpty } from '../../obj.js';\nimport { numberSafeCompareFunction } from '../../array.js';\nimport { transform2D } from '../../geom/flat/transform.js';\n/**\n * @const\n * @type {Array<import(\"./BuilderType.js\").default>}\n */\n\nvar ORDER = [BuilderType.POLYGON, BuilderType.CIRCLE, BuilderType.LINE_STRING, BuilderType.IMAGE, BuilderType.TEXT, BuilderType.DEFAULT];\n\nvar ExecutorGroup =\n/** @class */\nfunction () {\n  /**\n   * @param {import(\"../../extent.js\").Extent} maxExtent Max extent for clipping. When a\n   * `maxExtent` was set on the Builder for this executor group, the same `maxExtent`\n   * should be set here, unless the target context does not exceed that extent (which\n   * can be the case when rendering to tiles).\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The executor group can have overlapping geometries.\n   * @param {!Object<string, !Object<import(\"./BuilderType.js\").default, import(\"../canvas.js\").SerializableInstructions>>} allInstructions\n   * The serializable instructions.\n   * @param {number} [opt_renderBuffer] Optional rendering buffer.\n   */\n  function ExecutorGroup(maxExtent, resolution, pixelRatio, overlaps, allInstructions, opt_renderBuffer) {\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent_ = maxExtent;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this.overlaps_ = overlaps;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.pixelRatio_ = pixelRatio;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    this.resolution_ = resolution;\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n\n    this.renderBuffer_ = opt_renderBuffer;\n    /**\n     * @private\n     * @type {!Object<string, !Object<import(\"./BuilderType.js\").default, import(\"./Executor\").default>>}\n     */\n\n    this.executorsByZIndex_ = {};\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n\n    this.hitDetectionContext_ = null;\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n\n    this.hitDetectionTransform_ = createTransform();\n    this.createExecutors_(allInstructions);\n  }\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   */\n\n\n  ExecutorGroup.prototype.clip = function (context, transform) {\n    var flatClipCoords = this.getClipCoords(transform);\n    context.beginPath();\n    context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n    context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n    context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n    context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n    context.clip();\n  };\n  /**\n   * Create executors and populate them using the provided instructions.\n   * @private\n   * @param {!Object<string, !Object<import(\"./BuilderType.js\").default, import(\"../canvas.js\").SerializableInstructions>>} allInstructions The serializable instructions\n   */\n\n\n  ExecutorGroup.prototype.createExecutors_ = function (allInstructions) {\n    for (var zIndex in allInstructions) {\n      var executors = this.executorsByZIndex_[zIndex];\n\n      if (executors === undefined) {\n        executors = {};\n        this.executorsByZIndex_[zIndex] = executors;\n      }\n\n      var instructionByZindex = allInstructions[zIndex];\n\n      for (var builderType in instructionByZindex) {\n        var instructions = instructionByZindex[builderType];\n        executors[builderType] = new Executor(this.resolution_, this.pixelRatio_, this.overlaps_, instructions);\n      }\n    }\n  };\n  /**\n   * @param {Array<import(\"./BuilderType.js\").default>} executors Executors.\n   * @return {boolean} Has executors of the provided types.\n   */\n\n\n  ExecutorGroup.prototype.hasExecutors = function (executors) {\n    for (var zIndex in this.executorsByZIndex_) {\n      var candidates = this.executorsByZIndex_[zIndex];\n\n      for (var i = 0, ii = executors.length; i < ii; ++i) {\n        if (executors[i] in candidates) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {number} rotation Rotation.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(import(\"../../Feature.js\").FeatureLike, import(\"../../geom/SimpleGeometry.js\").default, number): T} callback Feature callback.\n   * @param {Array<import(\"../../Feature.js\").FeatureLike>} declutteredFeatures Decluttered features.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n\n\n  ExecutorGroup.prototype.forEachFeatureAtCoordinate = function (coordinate, resolution, rotation, hitTolerance, callback, declutteredFeatures) {\n    hitTolerance = Math.round(hitTolerance);\n    var contextSize = hitTolerance * 2 + 1;\n    var transform = composeTransform(this.hitDetectionTransform_, hitTolerance + 0.5, hitTolerance + 0.5, 1 / resolution, -1 / resolution, -rotation, -coordinate[0], -coordinate[1]);\n    var newContext = !this.hitDetectionContext_;\n\n    if (newContext) {\n      this.hitDetectionContext_ = createCanvasContext2D(contextSize, contextSize);\n    }\n\n    var context = this.hitDetectionContext_;\n\n    if (context.canvas.width !== contextSize || context.canvas.height !== contextSize) {\n      context.canvas.width = contextSize;\n      context.canvas.height = contextSize;\n    } else if (!newContext) {\n      context.clearRect(0, 0, contextSize, contextSize);\n    }\n    /**\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n\n    var hitExtent;\n\n    if (this.renderBuffer_ !== undefined) {\n      hitExtent = createEmpty();\n      extendCoordinate(hitExtent, coordinate);\n      buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);\n    }\n\n    var indexes = getPixelIndexArray(hitTolerance);\n    var builderType;\n    /**\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     * @param {import(\"../../geom/SimpleGeometry.js\").default} geometry Geometry.\n     * @return {T|undefined} Callback result.\n     */\n\n    function featureCallback(feature, geometry) {\n      var imageData = context.getImageData(0, 0, contextSize, contextSize).data;\n\n      for (var i_1 = 0, ii = indexes.length; i_1 < ii; i_1++) {\n        if (imageData[indexes[i_1]] > 0) {\n          if (!declutteredFeatures || builderType !== BuilderType.IMAGE && builderType !== BuilderType.TEXT || declutteredFeatures.indexOf(feature) !== -1) {\n            var idx = (indexes[i_1] - 3) / 4;\n            var x = hitTolerance - idx % contextSize;\n            var y = hitTolerance - (idx / contextSize | 0);\n            var result_1 = callback(feature, geometry, x * x + y * y);\n\n            if (result_1) {\n              return result_1;\n            }\n          }\n\n          context.clearRect(0, 0, contextSize, contextSize);\n          break;\n        }\n      }\n\n      return undefined;\n    }\n    /** @type {Array<number>} */\n\n\n    var zs = Object.keys(this.executorsByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction);\n    var i, j, executors, executor, result;\n\n    for (i = zs.length - 1; i >= 0; --i) {\n      var zIndexKey = zs[i].toString();\n      executors = this.executorsByZIndex_[zIndexKey];\n\n      for (j = ORDER.length - 1; j >= 0; --j) {\n        builderType = ORDER[j];\n        executor = executors[builderType];\n\n        if (executor !== undefined) {\n          result = executor.executeHitDetection(context, transform, rotation, featureCallback, hitExtent);\n\n          if (result) {\n            return result;\n          }\n        }\n      }\n    }\n\n    return undefined;\n  };\n  /**\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @return {Array<number>} Clip coordinates.\n   */\n\n\n  ExecutorGroup.prototype.getClipCoords = function (transform) {\n    var maxExtent = this.maxExtent_;\n\n    if (!maxExtent) {\n      return null;\n    }\n\n    var minX = maxExtent[0];\n    var minY = maxExtent[1];\n    var maxX = maxExtent[2];\n    var maxY = maxExtent[3];\n    var flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n    transform2D(flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n    return flatClipCoords;\n  };\n  /**\n   * @return {boolean} Is empty.\n   */\n\n\n  ExecutorGroup.prototype.isEmpty = function () {\n    return isEmpty(this.executorsByZIndex_);\n  };\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} contextScale Scale of the context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {boolean} snapToPixel Snap point symbols and test to integer pixel.\n   * @param {Array<import(\"./BuilderType.js\").default>} [opt_builderTypes] Ordered replay types to replay.\n   *     Default is {@link module:ol/render/replay~ORDER}\n   * @param {import(\"rbush\").default} [opt_declutterTree] Declutter tree.\n   */\n\n\n  ExecutorGroup.prototype.execute = function (context, contextScale, transform, viewRotation, snapToPixel, opt_builderTypes, opt_declutterTree) {\n    /** @type {Array<number>} */\n    var zs = Object.keys(this.executorsByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction); // setup clipping so that the parts of over-simplified geometries are not\n    // visible outside the current extent when panning\n\n    if (this.maxExtent_) {\n      context.save();\n      this.clip(context, transform);\n    }\n\n    var builderTypes = opt_builderTypes ? opt_builderTypes : ORDER;\n    var i, ii, j, jj, replays, replay;\n\n    if (opt_declutterTree) {\n      zs.reverse();\n    }\n\n    for (i = 0, ii = zs.length; i < ii; ++i) {\n      var zIndexKey = zs[i].toString();\n      replays = this.executorsByZIndex_[zIndexKey];\n\n      for (j = 0, jj = builderTypes.length; j < jj; ++j) {\n        var builderType = builderTypes[j];\n        replay = replays[builderType];\n\n        if (replay !== undefined) {\n          replay.execute(context, contextScale, transform, viewRotation, snapToPixel, opt_declutterTree);\n        }\n      }\n    }\n\n    if (this.maxExtent_) {\n      context.restore();\n    }\n  };\n\n  return ExecutorGroup;\n}();\n/**\n * This cache is used to store arrays of indexes for calculated pixel circles\n * to increase performance.\n * It is a static property to allow each Replaygroup to access it.\n * @type {Object<number, Array<number>>}\n */\n\n\nvar circlePixelIndexArrayCache = {};\n/**\n * This methods creates an array with indexes of all pixels within a circle,\n * ordered by how close they are to the center.\n * A cache is used to increase performance.\n * @param {number} radius Radius.\n * @return {Array<number>} An array with indexes within a circle.\n */\n\nexport function getPixelIndexArray(radius) {\n  if (circlePixelIndexArrayCache[radius] !== undefined) {\n    return circlePixelIndexArrayCache[radius];\n  }\n\n  var size = radius * 2 + 1;\n  var maxDistanceSq = radius * radius;\n  var distances = new Array(maxDistanceSq + 1);\n\n  for (var i = 0; i <= radius; ++i) {\n    for (var j = 0; j <= radius; ++j) {\n      var distanceSq = i * i + j * j;\n\n      if (distanceSq > maxDistanceSq) {\n        break;\n      }\n\n      var distance = distances[distanceSq];\n\n      if (!distance) {\n        distance = [];\n        distances[distanceSq] = distance;\n      }\n\n      distance.push(((radius + i) * size + (radius + j)) * 4 + 3);\n\n      if (i > 0) {\n        distance.push(((radius - i) * size + (radius + j)) * 4 + 3);\n      }\n\n      if (j > 0) {\n        distance.push(((radius + i) * size + (radius - j)) * 4 + 3);\n\n        if (i > 0) {\n          distance.push(((radius - i) * size + (radius - j)) * 4 + 3);\n        }\n      }\n    }\n  }\n\n  var pixelIndex = [];\n\n  for (var i = 0, ii = distances.length; i < ii; ++i) {\n    if (distances[i]) {\n      pixelIndex.push.apply(pixelIndex, distances[i]);\n    }\n  }\n\n  circlePixelIndexArrayCache[radius] = pixelIndex;\n  return pixelIndex;\n}\nexport default ExecutorGroup;","/**\n * @module ol/render/canvas/Immediate\n */\n// FIXME test, especially polygons with holes and multipolygons\n// FIXME need to handle large thick features (where pixel size matters)\n// FIXME add offset and end to ol/geom/flat/transform~transform2D?\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport GeometryType from '../../geom/GeometryType.js';\nimport VectorContext from '../VectorContext.js';\nimport { asColorLike } from '../../colorlike.js';\nimport { compose as composeTransform, create as createTransform } from '../../transform.js';\nimport { defaultFillStyle, defaultFont, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextAlign, defaultTextBaseline } from '../canvas.js';\nimport { equals } from '../../array.js';\nimport { intersects } from '../../extent.js';\nimport { transform2D } from '../../geom/flat/transform.js';\nimport { transformGeom2D } from '../../geom/SimpleGeometry.js';\n/**\n * @classdesc\n * A concrete subclass of {@link module:ol/render/VectorContext~VectorContext VectorContext} that implements\n * direct rendering of features and geometries to an HTML5 Canvas context.\n * Instances of this class are created internally by the library and\n * provided to application code as vectorContext member of the\n * {@link module:ol/render/Event~RenderEvent RenderEvent} object associated with postcompose, precompose and\n * render events emitted by layers and maps.\n */\n\nvar CanvasImmediateRenderer =\n/** @class */\nfunction (_super) {\n  __extends(CanvasImmediateRenderer, _super);\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../extent.js\").Extent} extent Extent.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {number} [opt_squaredTolerance] Optional squared tolerance for simplification.\n   * @param {import(\"../../proj.js\").TransformFunction} [opt_userTransform] Transform from user to view projection.\n   */\n\n\n  function CanvasImmediateRenderer(context, pixelRatio, extent, transform, viewRotation, opt_squaredTolerance, opt_userTransform) {\n    var _this = _super.call(this) || this;\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n\n\n    _this.context_ = context;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.pixelRatio_ = pixelRatio;\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n    _this.extent_ = extent;\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n\n    _this.transform_ = transform;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.viewRotation_ = viewRotation;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.squaredTolerance_ = opt_squaredTolerance;\n    /**\n     * @private\n     * @type {import(\"../../proj.js\").TransformFunction}\n     */\n\n    _this.userTransform_ = opt_userTransform;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n\n    _this.contextFillState_ = null;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n\n    _this.contextStrokeState_ = null;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n\n    _this.contextTextState_ = null;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n\n    _this.fillState_ = null;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n\n    _this.strokeState_ = null;\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n\n    _this.image_ = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageAnchorX_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageAnchorY_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageHeight_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageOpacity_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageOriginX_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageOriginY_ = 0;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.imageRotateWithView_ = false;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageRotation_ = 0;\n    /**\n     * @private\n     * @type {import(\"../../size.js\").Size}\n     */\n\n    _this.imageScale_ = [0, 0];\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.imageWidth_ = 0;\n    /**\n     * @private\n     * @type {string}\n     */\n\n    _this.text_ = '';\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.textOffsetX_ = 0;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.textOffsetY_ = 0;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.textRotateWithView_ = false;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.textRotation_ = 0;\n    /**\n     * @private\n     * @type {import(\"../../size.js\").Size}\n     */\n\n    _this.textScale_ = [0, 0];\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n\n    _this.textFillState_ = null;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n\n    _this.textStrokeState_ = null;\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n\n    _this.textState_ = null;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.pixelCoordinates_ = [];\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n\n    _this.tmpLocalTransform_ = createTransform();\n    return _this;\n  }\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawImages_ = function (flatCoordinates, offset, end, stride) {\n    if (!this.image_) {\n      return;\n    }\n\n    var pixelCoordinates = transform2D(flatCoordinates, offset, end, stride, this.transform_, this.pixelCoordinates_);\n    var context = this.context_;\n    var localTransform = this.tmpLocalTransform_;\n    var alpha = context.globalAlpha;\n\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha * this.imageOpacity_;\n    }\n\n    var rotation = this.imageRotation_;\n\n    if (this.imageRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n\n    for (var i = 0, ii = pixelCoordinates.length; i < ii; i += 2) {\n      var x = pixelCoordinates[i] - this.imageAnchorX_;\n      var y = pixelCoordinates[i + 1] - this.imageAnchorY_;\n\n      if (rotation !== 0 || this.imageScale_[0] != 1 || this.imageScale_[1] != 1) {\n        var centerX = x + this.imageAnchorX_;\n        var centerY = y + this.imageAnchorY_;\n        composeTransform(localTransform, centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n        context.setTransform.apply(context, localTransform);\n        context.translate(centerX, centerY);\n        context.scale(this.imageScale_[0], this.imageScale_[1]);\n        context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_, this.imageWidth_, this.imageHeight_, -this.imageAnchorX_, -this.imageAnchorY_, this.imageWidth_, this.imageHeight_);\n        context.setTransform(1, 0, 0, 1, 0, 0);\n      } else {\n        context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_, this.imageWidth_, this.imageHeight_, x, y, this.imageWidth_, this.imageHeight_);\n      }\n    }\n\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha;\n    }\n  };\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawText_ = function (flatCoordinates, offset, end, stride) {\n    if (!this.textState_ || this.text_ === '') {\n      return;\n    }\n\n    if (this.textFillState_) {\n      this.setContextFillState_(this.textFillState_);\n    }\n\n    if (this.textStrokeState_) {\n      this.setContextStrokeState_(this.textStrokeState_);\n    }\n\n    this.setContextTextState_(this.textState_);\n    var pixelCoordinates = transform2D(flatCoordinates, offset, end, stride, this.transform_, this.pixelCoordinates_);\n    var context = this.context_;\n    var rotation = this.textRotation_;\n\n    if (this.textRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n\n    for (; offset < end; offset += stride) {\n      var x = pixelCoordinates[offset] + this.textOffsetX_;\n      var y = pixelCoordinates[offset + 1] + this.textOffsetY_;\n\n      if (rotation !== 0 || this.textScale_[0] != 1 || this.textScale_[1] != 1) {\n        var localTransform = composeTransform(this.tmpLocalTransform_, x, y, 1, 1, rotation, -x, -y);\n        context.setTransform.apply(context, localTransform);\n        context.translate(x, y);\n        context.scale(this.textScale_[0], this.textScale_[1]);\n\n        if (this.textStrokeState_) {\n          context.strokeText(this.text_, 0, 0);\n        }\n\n        if (this.textFillState_) {\n          context.fillText(this.text_, 0, 0);\n        }\n\n        context.setTransform(1, 0, 0, 1, 0, 0);\n      } else {\n        if (this.textStrokeState_) {\n          context.strokeText(this.text_, x, y);\n        }\n\n        if (this.textFillState_) {\n          context.fillText(this.text_, x, y);\n        }\n      }\n    }\n  };\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} close Close.\n   * @private\n   * @return {number} end End.\n   */\n\n\n  CanvasImmediateRenderer.prototype.moveToLineTo_ = function (flatCoordinates, offset, end, stride, close) {\n    var context = this.context_;\n    var pixelCoordinates = transform2D(flatCoordinates, offset, end, stride, this.transform_, this.pixelCoordinates_);\n    context.moveTo(pixelCoordinates[0], pixelCoordinates[1]);\n    var length = pixelCoordinates.length;\n\n    if (close) {\n      length -= 2;\n    }\n\n    for (var i = 2; i < length; i += 2) {\n      context.lineTo(pixelCoordinates[i], pixelCoordinates[i + 1]);\n    }\n\n    if (close) {\n      context.closePath();\n    }\n\n    return end;\n  };\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawRings_ = function (flatCoordinates, offset, ends, stride) {\n    for (var i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, true);\n    }\n\n    return offset;\n  };\n  /**\n   * Render a circle geometry into the canvas.  Rendering is immediate and uses\n   * the current fill and stroke styles.\n   *\n   * @param {import(\"../../geom/Circle.js\").default} geometry Circle geometry.\n   * @api\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawCircle = function (geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n\n    if (this.fillState_ || this.strokeState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n\n      var pixelCoordinates = transformGeom2D(geometry, this.transform_, this.pixelCoordinates_);\n      var dx = pixelCoordinates[2] - pixelCoordinates[0];\n      var dy = pixelCoordinates[3] - pixelCoordinates[1];\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      var context = this.context_;\n      context.beginPath();\n      context.arc(pixelCoordinates[0], pixelCoordinates[1], radius, 0, 2 * Math.PI);\n\n      if (this.fillState_) {\n        context.fill();\n      }\n\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n\n    if (this.text_ !== '') {\n      this.drawText_(geometry.getCenter(), 0, 2, 2);\n    }\n  };\n  /**\n   * Set the rendering style.  Note that since this is an immediate rendering API,\n   * any `zIndex` on the provided style will be ignored.\n   *\n   * @param {import(\"../../style/Style.js\").default} style The rendering style.\n   * @api\n   */\n\n\n  CanvasImmediateRenderer.prototype.setStyle = function (style) {\n    this.setFillStrokeStyle(style.getFill(), style.getStroke());\n    this.setImageStyle(style.getImage());\n    this.setTextStyle(style.getText());\n  };\n  /**\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   */\n\n\n  CanvasImmediateRenderer.prototype.setTransform = function (transform) {\n    this.transform_ = transform;\n  };\n  /**\n   * Render a geometry into the canvas.  Call\n   * {@link module:ol/render/canvas/Immediate~CanvasImmediateRenderer#setStyle renderer.setStyle()} first to set the rendering style.\n   *\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry The geometry to render.\n   * @api\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawGeometry = function (geometry) {\n    var type = geometry.getType();\n\n    switch (type) {\n      case GeometryType.POINT:\n        this.drawPoint(\n        /** @type {import(\"../../geom/Point.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.LINE_STRING:\n        this.drawLineString(\n        /** @type {import(\"../../geom/LineString.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.POLYGON:\n        this.drawPolygon(\n        /** @type {import(\"../../geom/Polygon.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.MULTI_POINT:\n        this.drawMultiPoint(\n        /** @type {import(\"../../geom/MultiPoint.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.MULTI_LINE_STRING:\n        this.drawMultiLineString(\n        /** @type {import(\"../../geom/MultiLineString.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.MULTI_POLYGON:\n        this.drawMultiPolygon(\n        /** @type {import(\"../../geom/MultiPolygon.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.GEOMETRY_COLLECTION:\n        this.drawGeometryCollection(\n        /** @type {import(\"../../geom/GeometryCollection.js\").default} */\n        geometry);\n        break;\n\n      case GeometryType.CIRCLE:\n        this.drawCircle(\n        /** @type {import(\"../../geom/Circle.js\").default} */\n        geometry);\n        break;\n\n      default:\n    }\n  };\n  /**\n   * Render a feature into the canvas.  Note that any `zIndex` on the provided\n   * style will be ignored - features are rendered immediately in the order that\n   * this method is called.  If you need `zIndex` support, you should be using an\n   * {@link module:ol/layer/Vector~VectorLayer VectorLayer} instead.\n   *\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   * @param {import(\"../../style/Style.js\").default} style Style.\n   * @api\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawFeature = function (feature, style) {\n    var geometry = style.getGeometryFunction()(feature);\n\n    if (!geometry || !intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n\n    this.setStyle(style);\n    this.drawGeometry(geometry);\n  };\n  /**\n   * Render a GeometryCollection to the canvas.  Rendering is immediate and\n   * uses the current styles appropriate for each geometry in the collection.\n   *\n   * @param {import(\"../../geom/GeometryCollection.js\").default} geometry Geometry collection.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawGeometryCollection = function (geometry) {\n    var geometries = geometry.getGeometriesArray();\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      this.drawGeometry(geometries[i]);\n    }\n  };\n  /**\n   * Render a Point geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} geometry Point geometry.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawPoint = function (geometry) {\n    if (this.squaredTolerance_) {\n      geometry =\n      /** @type {import(\"../../geom/Point.js\").default} */\n      geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_);\n    }\n\n    var flatCoordinates = geometry.getFlatCoordinates();\n    var stride = geometry.getStride();\n\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  };\n  /**\n   * Render a MultiPoint geometry  into the canvas.  Rendering is immediate and\n   * uses the current style.\n   *\n   * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} geometry MultiPoint geometry.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawMultiPoint = function (geometry) {\n    if (this.squaredTolerance_) {\n      geometry =\n      /** @type {import(\"../../geom/MultiPoint.js\").default} */\n      geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_);\n    }\n\n    var flatCoordinates = geometry.getFlatCoordinates();\n    var stride = geometry.getStride();\n\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  };\n  /**\n   * Render a LineString into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} geometry LineString geometry.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawLineString = function (geometry) {\n    if (this.squaredTolerance_) {\n      geometry =\n      /** @type {import(\"../../geom/LineString.js\").default} */\n      geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_);\n    }\n\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      var context = this.context_;\n      var flatCoordinates = geometry.getFlatCoordinates();\n      context.beginPath();\n      this.moveToLineTo_(flatCoordinates, 0, flatCoordinates.length, geometry.getStride(), false);\n      context.stroke();\n    }\n\n    if (this.text_ !== '') {\n      var flatMidpoint = geometry.getFlatMidpoint();\n      this.drawText_(flatMidpoint, 0, 2, 2);\n    }\n  };\n  /**\n   * Render a MultiLineString geometry into the canvas.  Rendering is immediate\n   * and uses the current style.\n   *\n   * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} geometry MultiLineString geometry.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawMultiLineString = function (geometry) {\n    if (this.squaredTolerance_) {\n      geometry =\n      /** @type {import(\"../../geom/MultiLineString.js\").default} */\n      geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_);\n    }\n\n    var geometryExtent = geometry.getExtent();\n\n    if (!intersects(this.extent_, geometryExtent)) {\n      return;\n    }\n\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      var context = this.context_;\n      var flatCoordinates = geometry.getFlatCoordinates();\n      var offset = 0;\n      var ends =\n      /** @type {Array<number>} */\n      geometry.getEnds();\n      var stride = geometry.getStride();\n      context.beginPath();\n\n      for (var i = 0, ii = ends.length; i < ii; ++i) {\n        offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, false);\n      }\n\n      context.stroke();\n    }\n\n    if (this.text_ !== '') {\n      var flatMidpoints = geometry.getFlatMidpoints();\n      this.drawText_(flatMidpoints, 0, flatMidpoints.length, 2);\n    }\n  };\n  /**\n   * Render a Polygon geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Polygon.js\").default|import(\"../Feature.js\").default} geometry Polygon geometry.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawPolygon = function (geometry) {\n    if (this.squaredTolerance_) {\n      geometry =\n      /** @type {import(\"../../geom/Polygon.js\").default} */\n      geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_);\n    }\n\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n\n      var context = this.context_;\n      context.beginPath();\n      this.drawRings_(geometry.getOrientedFlatCoordinates(), 0,\n      /** @type {Array<number>} */\n      geometry.getEnds(), geometry.getStride());\n\n      if (this.fillState_) {\n        context.fill();\n      }\n\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n\n    if (this.text_ !== '') {\n      var flatInteriorPoint = geometry.getFlatInteriorPoint();\n      this.drawText_(flatInteriorPoint, 0, 2, 2);\n    }\n  };\n  /**\n   * Render MultiPolygon geometry into the canvas.  Rendering is immediate and\n   * uses the current style.\n   * @param {import(\"../../geom/MultiPolygon.js\").default} geometry MultiPolygon geometry.\n   */\n\n\n  CanvasImmediateRenderer.prototype.drawMultiPolygon = function (geometry) {\n    if (this.squaredTolerance_) {\n      geometry =\n      /** @type {import(\"../../geom/MultiPolygon.js\").default} */\n      geometry.simplifyTransformed(this.squaredTolerance_, this.userTransform_);\n    }\n\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n\n      var context = this.context_;\n      var flatCoordinates = geometry.getOrientedFlatCoordinates();\n      var offset = 0;\n      var endss = geometry.getEndss();\n      var stride = geometry.getStride();\n      context.beginPath();\n\n      for (var i = 0, ii = endss.length; i < ii; ++i) {\n        var ends = endss[i];\n        offset = this.drawRings_(flatCoordinates, offset, ends, stride);\n      }\n\n      if (this.fillState_) {\n        context.fill();\n      }\n\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n\n    if (this.text_ !== '') {\n      var flatInteriorPoints = geometry.getFlatInteriorPoints();\n      this.drawText_(flatInteriorPoints, 0, flatInteriorPoints.length, 2);\n    }\n  };\n  /**\n   * @param {import(\"../canvas.js\").FillState} fillState Fill state.\n   * @private\n   */\n\n\n  CanvasImmediateRenderer.prototype.setContextFillState_ = function (fillState) {\n    var context = this.context_;\n    var contextFillState = this.contextFillState_;\n\n    if (!contextFillState) {\n      context.fillStyle = fillState.fillStyle;\n      this.contextFillState_ = {\n        fillStyle: fillState.fillStyle\n      };\n    } else {\n      if (contextFillState.fillStyle != fillState.fillStyle) {\n        contextFillState.fillStyle = fillState.fillStyle;\n        context.fillStyle = fillState.fillStyle;\n      }\n    }\n  };\n  /**\n   * @param {import(\"../canvas.js\").StrokeState} strokeState Stroke state.\n   * @private\n   */\n\n\n  CanvasImmediateRenderer.prototype.setContextStrokeState_ = function (strokeState) {\n    var context = this.context_;\n    var contextStrokeState = this.contextStrokeState_;\n\n    if (!contextStrokeState) {\n      context.lineCap = strokeState.lineCap;\n\n      if (context.setLineDash) {\n        context.setLineDash(strokeState.lineDash);\n        context.lineDashOffset = strokeState.lineDashOffset;\n      }\n\n      context.lineJoin = strokeState.lineJoin;\n      context.lineWidth = strokeState.lineWidth;\n      context.miterLimit = strokeState.miterLimit;\n      context.strokeStyle = strokeState.strokeStyle;\n      this.contextStrokeState_ = {\n        lineCap: strokeState.lineCap,\n        lineDash: strokeState.lineDash,\n        lineDashOffset: strokeState.lineDashOffset,\n        lineJoin: strokeState.lineJoin,\n        lineWidth: strokeState.lineWidth,\n        miterLimit: strokeState.miterLimit,\n        strokeStyle: strokeState.strokeStyle\n      };\n    } else {\n      if (contextStrokeState.lineCap != strokeState.lineCap) {\n        contextStrokeState.lineCap = strokeState.lineCap;\n        context.lineCap = strokeState.lineCap;\n      }\n\n      if (context.setLineDash) {\n        if (!equals(contextStrokeState.lineDash, strokeState.lineDash)) {\n          context.setLineDash(contextStrokeState.lineDash = strokeState.lineDash);\n        }\n\n        if (contextStrokeState.lineDashOffset != strokeState.lineDashOffset) {\n          contextStrokeState.lineDashOffset = strokeState.lineDashOffset;\n          context.lineDashOffset = strokeState.lineDashOffset;\n        }\n      }\n\n      if (contextStrokeState.lineJoin != strokeState.lineJoin) {\n        contextStrokeState.lineJoin = strokeState.lineJoin;\n        context.lineJoin = strokeState.lineJoin;\n      }\n\n      if (contextStrokeState.lineWidth != strokeState.lineWidth) {\n        contextStrokeState.lineWidth = strokeState.lineWidth;\n        context.lineWidth = strokeState.lineWidth;\n      }\n\n      if (contextStrokeState.miterLimit != strokeState.miterLimit) {\n        contextStrokeState.miterLimit = strokeState.miterLimit;\n        context.miterLimit = strokeState.miterLimit;\n      }\n\n      if (contextStrokeState.strokeStyle != strokeState.strokeStyle) {\n        contextStrokeState.strokeStyle = strokeState.strokeStyle;\n        context.strokeStyle = strokeState.strokeStyle;\n      }\n    }\n  };\n  /**\n   * @param {import(\"../canvas.js\").TextState} textState Text state.\n   * @private\n   */\n\n\n  CanvasImmediateRenderer.prototype.setContextTextState_ = function (textState) {\n    var context = this.context_;\n    var contextTextState = this.contextTextState_;\n    var textAlign = textState.textAlign ? textState.textAlign : defaultTextAlign;\n\n    if (!contextTextState) {\n      context.font = textState.font;\n      context.textAlign =\n      /** @type {CanvasTextAlign} */\n      textAlign;\n      context.textBaseline =\n      /** @type {CanvasTextBaseline} */\n      textState.textBaseline;\n      this.contextTextState_ = {\n        font: textState.font,\n        textAlign: textAlign,\n        textBaseline: textState.textBaseline\n      };\n    } else {\n      if (contextTextState.font != textState.font) {\n        contextTextState.font = textState.font;\n        context.font = textState.font;\n      }\n\n      if (contextTextState.textAlign != textAlign) {\n        contextTextState.textAlign =\n        /** @type {CanvasTextAlign} */\n        textAlign;\n        context.textAlign =\n        /** @type {CanvasTextAlign} */\n        textAlign;\n      }\n\n      if (contextTextState.textBaseline != textState.textBaseline) {\n        contextTextState.textBaseline =\n        /** @type {CanvasTextBaseline} */\n        textState.textBaseline;\n        context.textBaseline =\n        /** @type {CanvasTextBaseline} */\n        textState.textBaseline;\n      }\n    }\n  };\n  /**\n   * Set the fill and stroke style for subsequent draw operations.  To clear\n   * either fill or stroke styles, pass null for the appropriate parameter.\n   *\n   * @param {import(\"../../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../../style/Stroke.js\").default} strokeStyle Stroke style.\n   */\n\n\n  CanvasImmediateRenderer.prototype.setFillStrokeStyle = function (fillStyle, strokeStyle) {\n    var _this = this;\n\n    if (!fillStyle) {\n      this.fillState_ = null;\n    } else {\n      var fillStyleColor = fillStyle.getColor();\n      this.fillState_ = {\n        fillStyle: asColorLike(fillStyleColor ? fillStyleColor : defaultFillStyle)\n      };\n    }\n\n    if (!strokeStyle) {\n      this.strokeState_ = null;\n    } else {\n      var strokeStyleColor = strokeStyle.getColor();\n      var strokeStyleLineCap = strokeStyle.getLineCap();\n      var strokeStyleLineDash = strokeStyle.getLineDash();\n      var strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      var strokeStyleLineJoin = strokeStyle.getLineJoin();\n      var strokeStyleWidth = strokeStyle.getWidth();\n      var strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      var lineDash = strokeStyleLineDash ? strokeStyleLineDash : defaultLineDash;\n      this.strokeState_ = {\n        lineCap: strokeStyleLineCap !== undefined ? strokeStyleLineCap : defaultLineCap,\n        lineDash: this.pixelRatio_ === 1 ? lineDash : lineDash.map(function (n) {\n          return n * _this.pixelRatio_;\n        }),\n        lineDashOffset: (strokeStyleLineDashOffset ? strokeStyleLineDashOffset : defaultLineDashOffset) * this.pixelRatio_,\n        lineJoin: strokeStyleLineJoin !== undefined ? strokeStyleLineJoin : defaultLineJoin,\n        lineWidth: (strokeStyleWidth !== undefined ? strokeStyleWidth : defaultLineWidth) * this.pixelRatio_,\n        miterLimit: strokeStyleMiterLimit !== undefined ? strokeStyleMiterLimit : defaultMiterLimit,\n        strokeStyle: asColorLike(strokeStyleColor ? strokeStyleColor : defaultStrokeStyle)\n      };\n    }\n  };\n  /**\n   * Set the image style for subsequent draw operations.  Pass null to remove\n   * the image style.\n   *\n   * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n   */\n\n\n  CanvasImmediateRenderer.prototype.setImageStyle = function (imageStyle) {\n    var imageSize;\n\n    if (!imageStyle || !(imageSize = imageStyle.getSize())) {\n      this.image_ = null;\n      return;\n    }\n\n    var imageAnchor = imageStyle.getAnchor();\n    var imageOrigin = imageStyle.getOrigin();\n    this.image_ = imageStyle.getImage(this.pixelRatio_);\n    this.imageAnchorX_ = imageAnchor[0] * this.pixelRatio_;\n    this.imageAnchorY_ = imageAnchor[1] * this.pixelRatio_;\n    this.imageHeight_ = imageSize[1] * this.pixelRatio_;\n    this.imageOpacity_ = imageStyle.getOpacity();\n    this.imageOriginX_ = imageOrigin[0];\n    this.imageOriginY_ = imageOrigin[1];\n    this.imageRotateWithView_ = imageStyle.getRotateWithView();\n    this.imageRotation_ = imageStyle.getRotation();\n    this.imageScale_ = imageStyle.getScaleArray();\n    this.imageWidth_ = imageSize[0] * this.pixelRatio_;\n  };\n  /**\n   * Set the text style for subsequent draw operations.  Pass null to\n   * remove the text style.\n   *\n   * @param {import(\"../../style/Text.js\").default} textStyle Text style.\n   */\n\n\n  CanvasImmediateRenderer.prototype.setTextStyle = function (textStyle) {\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      var textFillStyle = textStyle.getFill();\n\n      if (!textFillStyle) {\n        this.textFillState_ = null;\n      } else {\n        var textFillStyleColor = textFillStyle.getColor();\n        this.textFillState_ = {\n          fillStyle: asColorLike(textFillStyleColor ? textFillStyleColor : defaultFillStyle)\n        };\n      }\n\n      var textStrokeStyle = textStyle.getStroke();\n\n      if (!textStrokeStyle) {\n        this.textStrokeState_ = null;\n      } else {\n        var textStrokeStyleColor = textStrokeStyle.getColor();\n        var textStrokeStyleLineCap = textStrokeStyle.getLineCap();\n        var textStrokeStyleLineDash = textStrokeStyle.getLineDash();\n        var textStrokeStyleLineDashOffset = textStrokeStyle.getLineDashOffset();\n        var textStrokeStyleLineJoin = textStrokeStyle.getLineJoin();\n        var textStrokeStyleWidth = textStrokeStyle.getWidth();\n        var textStrokeStyleMiterLimit = textStrokeStyle.getMiterLimit();\n        this.textStrokeState_ = {\n          lineCap: textStrokeStyleLineCap !== undefined ? textStrokeStyleLineCap : defaultLineCap,\n          lineDash: textStrokeStyleLineDash ? textStrokeStyleLineDash : defaultLineDash,\n          lineDashOffset: textStrokeStyleLineDashOffset ? textStrokeStyleLineDashOffset : defaultLineDashOffset,\n          lineJoin: textStrokeStyleLineJoin !== undefined ? textStrokeStyleLineJoin : defaultLineJoin,\n          lineWidth: textStrokeStyleWidth !== undefined ? textStrokeStyleWidth : defaultLineWidth,\n          miterLimit: textStrokeStyleMiterLimit !== undefined ? textStrokeStyleMiterLimit : defaultMiterLimit,\n          strokeStyle: asColorLike(textStrokeStyleColor ? textStrokeStyleColor : defaultStrokeStyle)\n        };\n      }\n\n      var textFont = textStyle.getFont();\n      var textOffsetX = textStyle.getOffsetX();\n      var textOffsetY = textStyle.getOffsetY();\n      var textRotateWithView = textStyle.getRotateWithView();\n      var textRotation = textStyle.getRotation();\n      var textScale = textStyle.getScaleArray();\n      var textText = textStyle.getText();\n      var textTextAlign = textStyle.getTextAlign();\n      var textTextBaseline = textStyle.getTextBaseline();\n      this.textState_ = {\n        font: textFont !== undefined ? textFont : defaultFont,\n        textAlign: textTextAlign !== undefined ? textTextAlign : defaultTextAlign,\n        textBaseline: textTextBaseline !== undefined ? textTextBaseline : defaultTextBaseline\n      };\n      this.text_ = textText !== undefined ? Array.isArray(textText) ? textText.reduce(function (acc, t, i) {\n        return acc += i % 2 ? ' ' : t;\n      }, '') : textText : '';\n      this.textOffsetX_ = textOffsetX !== undefined ? this.pixelRatio_ * textOffsetX : 0;\n      this.textOffsetY_ = textOffsetY !== undefined ? this.pixelRatio_ * textOffsetY : 0;\n      this.textRotateWithView_ = textRotateWithView !== undefined ? textRotateWithView : false;\n      this.textRotation_ = textRotation !== undefined ? textRotation : 0;\n      this.textScale_ = [this.pixelRatio_ * textScale[0], this.pixelRatio_ * textScale[1]];\n    }\n  };\n\n  return CanvasImmediateRenderer;\n}(VectorContext);\n\nexport default CanvasImmediateRenderer;","/**\n * @module ol/style/IconAnchorUnits\n */\n\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n  /**\n   * Anchor is a fraction\n   * @api\n   */\n  FRACTION: 'fraction',\n\n  /**\n   * Anchor is in pixels\n   * @api\n   */\n  PIXELS: 'pixels'\n};","/**\n * @module ol/style/IconOrigin\n */\n\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n  /**\n   * Origin is at bottom left\n   * @api\n   */\n  BOTTOM_LEFT: 'bottom-left',\n\n  /**\n   * Origin is at bottom right\n   * @api\n   */\n  BOTTOM_RIGHT: 'bottom-right',\n\n  /**\n   * Origin is at top left\n   * @api\n   */\n  TOP_LEFT: 'top-left',\n\n  /**\n   * Origin is at top right\n   * @api\n   */\n  TOP_RIGHT: 'top-right'\n};","/**\n * @module ol/style/IconImage\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport { asString } from '../color.js';\nimport { createCanvasContext2D } from '../dom.js';\nimport { shared as iconImageCache } from './IconImageCache.js';\nimport { listenImage } from '../Image.js';\n/**\n * @type {CanvasRenderingContext2D}\n */\n\nvar taintedTestContext = null;\n\nvar IconImage =\n/** @class */\nfunction (_super) {\n  __extends(IconImage, _super);\n  /**\n   * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n   * @param {string|undefined} src Src.\n   * @param {import(\"../size.js\").Size} size Size.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../ImageState.js\").default} imageState Image state.\n   * @param {import(\"../color.js\").Color} color Color.\n   */\n\n\n  function IconImage(image, src, size, crossOrigin, imageState, color) {\n    var _this = _super.call(this) || this;\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n\n\n    _this.hitDetectionImage_ = null;\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n\n    _this.image_ = !image ? new Image() : image;\n\n    if (crossOrigin !== null) {\n      /** @type {HTMLImageElement} */\n      _this.image_.crossOrigin = crossOrigin;\n    }\n    /**\n     * @private\n     * @type {Object<number, HTMLCanvasElement>}\n     */\n\n\n    _this.canvas_ = {};\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n\n    _this.color_ = color;\n    /**\n     * @private\n     * @type {?function():void}\n     */\n\n    _this.unlisten_ = null;\n    /**\n     * @private\n     * @type {import(\"../ImageState.js\").default}\n     */\n\n    _this.imageState_ = imageState;\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n\n    _this.size_ = size;\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n\n    _this.src_ = src;\n    /**\n     * @private\n     */\n\n    _this.tainted_;\n    return _this;\n  }\n  /**\n   * @private\n   * @return {boolean} The image canvas is tainted.\n   */\n\n\n  IconImage.prototype.isTainted_ = function () {\n    if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n      if (!taintedTestContext) {\n        taintedTestContext = createCanvasContext2D(1, 1);\n      }\n\n      taintedTestContext.drawImage(this.image_, 0, 0);\n\n      try {\n        taintedTestContext.getImageData(0, 0, 1, 1);\n        this.tainted_ = false;\n      } catch (e) {\n        taintedTestContext = null;\n        this.tainted_ = true;\n      }\n    }\n\n    return this.tainted_ === true;\n  };\n  /**\n   * @private\n   */\n\n\n  IconImage.prototype.dispatchChangeEvent_ = function () {\n    this.dispatchEvent(EventType.CHANGE);\n  };\n  /**\n   * @private\n   */\n\n\n  IconImage.prototype.handleImageError_ = function () {\n    this.imageState_ = ImageState.ERROR;\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  };\n  /**\n   * @private\n   */\n\n\n  IconImage.prototype.handleImageLoad_ = function () {\n    this.imageState_ = ImageState.LOADED;\n\n    if (this.size_) {\n      this.image_.width = this.size_[0];\n      this.image_.height = this.size_[1];\n    } else {\n      this.size_ = [this.image_.width, this.image_.height];\n    }\n\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  };\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   */\n\n\n  IconImage.prototype.getImage = function (pixelRatio) {\n    this.replaceColor_(pixelRatio);\n    return this.canvas_[pixelRatio] ? this.canvas_[pixelRatio] : this.image_;\n  };\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Image or Canvas element.\n   */\n\n\n  IconImage.prototype.getPixelRatio = function (pixelRatio) {\n    this.replaceColor_(pixelRatio);\n    return this.canvas_[pixelRatio] ? pixelRatio : 1;\n  };\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n\n\n  IconImage.prototype.getImageState = function () {\n    return this.imageState_;\n  };\n  /**\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n\n\n  IconImage.prototype.getHitDetectionImage = function () {\n    if (!this.hitDetectionImage_) {\n      if (this.isTainted_()) {\n        var width = this.size_[0];\n        var height = this.size_[1];\n        var context = createCanvasContext2D(width, height);\n        context.fillRect(0, 0, width, height);\n        this.hitDetectionImage_ = context.canvas;\n      } else {\n        this.hitDetectionImage_ = this.image_;\n      }\n    }\n\n    return this.hitDetectionImage_;\n  };\n  /**\n   * Get the size of the icon (in pixels).\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n\n\n  IconImage.prototype.getSize = function () {\n    return this.size_;\n  };\n  /**\n   * @return {string|undefined} Image src.\n   */\n\n\n  IconImage.prototype.getSrc = function () {\n    return this.src_;\n  };\n  /**\n   * Load not yet loaded URI.\n   */\n\n\n  IconImage.prototype.load = function () {\n    if (this.imageState_ == ImageState.IDLE) {\n      this.imageState_ = ImageState.LOADING;\n\n      try {\n        /** @type {HTMLImageElement} */\n        this.image_.src = this.src_;\n      } catch (e) {\n        this.handleImageError_();\n      }\n\n      this.unlisten_ = listenImage(this.image_, this.handleImageLoad_.bind(this), this.handleImageError_.bind(this));\n    }\n  };\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @private\n   */\n\n\n  IconImage.prototype.replaceColor_ = function (pixelRatio) {\n    if (!this.color_ || this.canvas_[pixelRatio] || this.imageState_ !== ImageState.LOADED) {\n      return;\n    }\n\n    var canvas = document.createElement('canvas');\n    this.canvas_[pixelRatio] = canvas;\n    canvas.width = Math.ceil(this.image_.width * pixelRatio);\n    canvas.height = Math.ceil(this.image_.height * pixelRatio);\n    var ctx = canvas.getContext('2d');\n    ctx.scale(pixelRatio, pixelRatio);\n    ctx.drawImage(this.image_, 0, 0);\n    ctx.globalCompositeOperation = 'multiply'; // Internet Explorer 11 does not support the multiply operation.\n    // If the canvas is tainted in Internet Explorer this still produces\n    // a solid color image with the shape of the icon.\n\n    if (ctx.globalCompositeOperation === 'multiply' || this.isTainted_()) {\n      ctx.fillStyle = asString(this.color_);\n      ctx.fillRect(0, 0, canvas.width / pixelRatio, canvas.height / pixelRatio);\n      ctx.globalCompositeOperation = 'destination-in';\n      ctx.drawImage(this.image_, 0, 0);\n    } else {\n      var imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      var data = imgData.data;\n      var r = this.color_[0] / 255.0;\n      var g = this.color_[1] / 255.0;\n      var b = this.color_[2] / 255.0;\n      var a = this.color_[3];\n\n      for (var i = 0, ii = data.length; i < ii; i += 4) {\n        data[i] *= r;\n        data[i + 1] *= g;\n        data[i + 2] *= b;\n        data[i + 3] *= a;\n      }\n\n      ctx.putImageData(imgData, 0, 0);\n    }\n  };\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n\n\n  IconImage.prototype.unlistenImage_ = function () {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  };\n\n  return IconImage;\n}(EventTarget);\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\n\n\nexport function get(image, src, size, crossOrigin, imageState, color) {\n  var iconImage = iconImageCache.get(src, crossOrigin, color);\n\n  if (!iconImage) {\n    iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n    iconImageCache.set(src, crossOrigin, color, iconImage);\n  }\n\n  return iconImage;\n}\nexport default IconImage;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/style/Icon\n */\n\n\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from './IconAnchorUnits.js';\nimport IconOrigin from './IconOrigin.js';\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport { asArray } from '../color.js';\nimport { assert } from '../asserts.js';\nimport { get as getIconImage } from './IconImage.js';\nimport { getUid } from '../util.js';\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {import(\"./IconOrigin.js\").default} [anchorOrigin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorXUnits='fraction'] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorYUnits='fraction'] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {Array<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {Array<number>} [displacement=[0,0]] Displacement of the icon.\n * @property {import(\"./IconOrigin.js\").default} [offsetOrigin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {import(\"../size.js\").Size} [size] Icon size in pixel. Can be used together with `offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {import(\"../size.js\").Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\n * @property {string} [src] Image source URI.\n */\n\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\n\nvar Icon =\n/** @class */\nfunction (_super) {\n  __extends(Icon, _super);\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n\n\n  function Icon(opt_options) {\n    var _this = this;\n\n    var options = opt_options || {};\n    /**\n     * @type {number}\n     */\n\n    var opacity = options.opacity !== undefined ? options.opacity : 1;\n    /**\n     * @type {number}\n     */\n\n    var rotation = options.rotation !== undefined ? options.rotation : 0;\n    /**\n     * @type {number|import(\"../size.js\").Size}\n     */\n\n    var scale = options.scale !== undefined ? options.scale : 1;\n    /**\n     * @type {boolean}\n     */\n\n    var rotateWithView = options.rotateWithView !== undefined ? options.rotateWithView : false;\n    _this = _super.call(this, {\n      opacity: opacity,\n      rotation: rotation,\n      scale: scale,\n      displacement: options.displacement !== undefined ? options.displacement : [0, 0],\n      rotateWithView: rotateWithView\n    }) || this;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.normalizedAnchor_ = null;\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n\n    _this.anchorOrigin_ = options.anchorOrigin !== undefined ? options.anchorOrigin : IconOrigin.TOP_LEFT;\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n\n    _this.anchorXUnits_ = options.anchorXUnits !== undefined ? options.anchorXUnits : IconAnchorUnits.FRACTION;\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n\n    _this.anchorYUnits_ = options.anchorYUnits !== undefined ? options.anchorYUnits : IconAnchorUnits.FRACTION;\n    /**\n     * @private\n     * @type {?string}\n     */\n\n    _this.crossOrigin_ = options.crossOrigin !== undefined ? options.crossOrigin : null;\n    /**\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n\n    var image = options.img !== undefined ? options.img : null;\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size|undefined}\n     */\n\n    _this.imgSize_ = options.imgSize;\n    /**\n     * @type {string|undefined}\n     */\n\n    var src = options.src;\n    assert(!(src !== undefined && image), 4); // `image` and `src` cannot be provided at the same time\n\n    assert(!image || image && _this.imgSize_, 5); // `imgSize` must be set when `image` is provided\n\n    if ((src === undefined || src.length === 0) && image) {\n      src =\n      /** @type {HTMLImageElement} */\n      image.src || getUid(image);\n    }\n\n    assert(src !== undefined && src.length > 0, 6); // A defined and non-empty `src` or `image` must be provided\n\n    /**\n     * @type {import(\"../ImageState.js\").default}\n     */\n\n    var imageState = options.src !== undefined ? ImageState.IDLE : ImageState.LOADED;\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n\n    _this.color_ = options.color !== undefined ? asArray(options.color) : null;\n    /**\n     * @private\n     * @type {import(\"./IconImage.js\").default}\n     */\n\n    _this.iconImage_ = getIconImage(image,\n    /** @type {string} */\n    src, _this.imgSize_ !== undefined ? _this.imgSize_ : null, _this.crossOrigin_, imageState, _this.color_);\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n\n    _this.offsetOrigin_ = options.offsetOrigin !== undefined ? options.offsetOrigin : IconOrigin.TOP_LEFT;\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n\n    _this.origin_ = null;\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n\n    _this.size_ = options.size !== undefined ? options.size : null;\n    return _this;\n  }\n  /**\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n   * @return {Icon} The cloned style.\n   * @api\n   */\n\n\n  Icon.prototype.clone = function () {\n    var scale = this.getScale();\n    return new Icon({\n      anchor: this.anchor_.slice(),\n      anchorOrigin: this.anchorOrigin_,\n      anchorXUnits: this.anchorXUnits_,\n      anchorYUnits: this.anchorYUnits_,\n      color: this.color_ && this.color_.slice ? this.color_.slice() : this.color_ || undefined,\n      crossOrigin: this.crossOrigin_,\n      imgSize: this.imgSize_,\n      offset: this.offset_.slice(),\n      offsetOrigin: this.offsetOrigin_,\n      opacity: this.getOpacity(),\n      rotateWithView: this.getRotateWithView(),\n      rotation: this.getRotation(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      size: this.size_ !== null ? this.size_.slice() : undefined,\n      src: this.getSrc()\n    });\n  };\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @return {Array<number>} Anchor.\n   * @api\n   */\n\n\n  Icon.prototype.getAnchor = function () {\n    var anchor = this.normalizedAnchor_;\n\n    if (!anchor) {\n      anchor = this.anchor_;\n      var size = this.getSize();\n\n      if (this.anchorXUnits_ == IconAnchorUnits.FRACTION || this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n        if (!size) {\n          return null;\n        }\n\n        anchor = this.anchor_.slice();\n\n        if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n          anchor[0] *= size[0];\n        }\n\n        if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n          anchor[1] *= size[1];\n        }\n      }\n\n      if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n        if (!size) {\n          return null;\n        }\n\n        if (anchor === this.anchor_) {\n          anchor = this.anchor_.slice();\n        }\n\n        if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT || this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n          anchor[0] = -anchor[0] + size[0];\n        }\n\n        if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT || this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n          anchor[1] = -anchor[1] + size[1];\n        }\n      }\n\n      this.normalizedAnchor_ = anchor;\n    }\n\n    var displacement = this.getDisplacement();\n    return [anchor[0] - displacement[0], anchor[1] + displacement[1]];\n  };\n  /**\n   * Set the anchor point. The anchor determines the center point for the\n   * symbolizer.\n   *\n   * @param {Array<number>} anchor Anchor.\n   * @api\n   */\n\n\n  Icon.prototype.setAnchor = function (anchor) {\n    this.anchor_ = anchor;\n    this.normalizedAnchor_ = null;\n  };\n  /**\n   * Get the icon color.\n   * @return {import(\"../color.js\").Color} Color.\n   * @api\n   */\n\n\n  Icon.prototype.getColor = function () {\n    return this.color_;\n  };\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   * @api\n   */\n\n\n  Icon.prototype.getImage = function (pixelRatio) {\n    return this.iconImage_.getImage(pixelRatio);\n  };\n  /**\n   * Get the pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} The pixel ratio of the image.\n   * @api\n   */\n\n\n  Icon.prototype.getPixelRatio = function (pixelRatio) {\n    return this.iconImage_.getPixelRatio(pixelRatio);\n  };\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n\n\n  Icon.prototype.getImageSize = function () {\n    return this.iconImage_.getSize();\n  };\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n\n\n  Icon.prototype.getImageState = function () {\n    return this.iconImage_.getImageState();\n  };\n  /**\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n\n\n  Icon.prototype.getHitDetectionImage = function () {\n    return this.iconImage_.getHitDetectionImage();\n  };\n  /**\n   * Get the origin of the symbolizer.\n   * @return {Array<number>} Origin.\n   * @api\n   */\n\n\n  Icon.prototype.getOrigin = function () {\n    if (this.origin_) {\n      return this.origin_;\n    }\n\n    var offset = this.offset_;\n\n    if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n      var size = this.getSize();\n      var iconImageSize = this.iconImage_.getSize();\n\n      if (!size || !iconImageSize) {\n        return null;\n      }\n\n      offset = offset.slice();\n\n      if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT || this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\n      }\n\n      if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT || this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\n      }\n    }\n\n    this.origin_ = offset;\n    return this.origin_;\n  };\n  /**\n   * Get the image URL.\n   * @return {string|undefined} Image src.\n   * @api\n   */\n\n\n  Icon.prototype.getSrc = function () {\n    return this.iconImage_.getSrc();\n  };\n  /**\n   * Get the size of the icon (in pixels).\n   * @return {import(\"../size.js\").Size} Image size.\n   * @api\n   */\n\n\n  Icon.prototype.getSize = function () {\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\n  };\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n\n\n  Icon.prototype.listenImageChange = function (listener) {\n    this.iconImage_.addEventListener(EventType.CHANGE, listener);\n  };\n  /**\n   * Load not yet loaded URI.\n   * When rendering a feature with an icon style, the vector renderer will\n   * automatically call this method. However, you might want to call this\n   * method yourself for preloading or other purposes.\n   * @api\n   */\n\n\n  Icon.prototype.load = function () {\n    this.iconImage_.load();\n  };\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n\n\n  Icon.prototype.unlistenImageChange = function (listener) {\n    this.iconImage_.removeEventListener(EventType.CHANGE, listener);\n  };\n\n  return Icon;\n}(ImageStyle);\n\nexport default Icon;","/**\n * @module ol/render/canvas/hitdetect\n */\nimport CanvasImmediateRenderer from './Immediate.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport IconAnchorUnits from '../../style/IconAnchorUnits.js';\nimport { Icon } from '../../style.js';\nimport { clamp } from '../../math.js';\nimport { createCanvasContext2D } from '../../dom.js';\nimport { intersects } from '../../extent.js';\nimport { numberSafeCompareFunction } from '../../array.js';\nexport var HIT_DETECT_RESOLUTION = 0.5;\n/**\n * @param {import(\"../../size.js\").Size} size Canvas size in css pixels.\n * @param {Array<import(\"../../transform.js\").Transform>} transforms Transforms\n * for rendering features to all worlds of the viewport, from coordinates to css\n * pixels.\n * @param {Array<import(\"../../Feature.js\").FeatureLike>} features\n * Features to consider for hit detection.\n * @param {import(\"../../style/Style.js\").StyleFunction|undefined} styleFunction\n * Layer style function.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @return {ImageData} Hit detection image data.\n */\n\nexport function createHitDetectionImageData(size, transforms, features, styleFunction, extent, resolution, rotation) {\n  var width = size[0] * HIT_DETECT_RESOLUTION;\n  var height = size[1] * HIT_DETECT_RESOLUTION;\n  var context = createCanvasContext2D(width, height);\n  context.imageSmoothingEnabled = false;\n  var canvas = context.canvas;\n  var renderer = new CanvasImmediateRenderer(context, HIT_DETECT_RESOLUTION, extent, null, rotation);\n  var featureCount = features.length; // Stretch hit detection index to use the whole available color range\n\n  var indexFactor = Math.floor((256 * 256 * 256 - 1) / featureCount);\n  var featuresByZIndex = {};\n\n  for (var i = 1; i <= featureCount; ++i) {\n    var feature = features[i - 1];\n    var featureStyleFunction = feature.getStyleFunction() || styleFunction;\n\n    if (!styleFunction) {\n      continue;\n    }\n\n    var styles = featureStyleFunction(feature, resolution);\n\n    if (!styles) {\n      continue;\n    }\n\n    if (!Array.isArray(styles)) {\n      styles = [styles];\n    }\n\n    var index = i * indexFactor;\n    var color = '#' + ('000000' + index.toString(16)).slice(-6);\n\n    for (var j = 0, jj = styles.length; j < jj; ++j) {\n      var originalStyle = styles[j];\n      var geometry = originalStyle.getGeometryFunction()(feature);\n\n      if (!geometry || !intersects(extent, geometry.getExtent())) {\n        continue;\n      }\n\n      var style = originalStyle.clone();\n      var fill = style.getFill();\n\n      if (fill) {\n        fill.setColor(color);\n      }\n\n      var stroke = style.getStroke();\n\n      if (stroke) {\n        stroke.setColor(color);\n        stroke.setLineDash(null);\n      }\n\n      style.setText(undefined);\n      var image = originalStyle.getImage();\n\n      if (image && image.getOpacity() !== 0) {\n        var imgSize = image.getImageSize();\n\n        if (!imgSize) {\n          continue;\n        }\n\n        var imgContext = createCanvasContext2D(imgSize[0], imgSize[1], undefined, {\n          alpha: false\n        });\n        var img = imgContext.canvas;\n        imgContext.fillStyle = color;\n        imgContext.fillRect(0, 0, img.width, img.height);\n        style.setImage(new Icon({\n          img: img,\n          imgSize: imgSize,\n          anchor: image.getAnchor(),\n          anchorXUnits: IconAnchorUnits.PIXELS,\n          anchorYUnits: IconAnchorUnits.PIXELS,\n          offset: image.getOrigin(),\n          opacity: 1,\n          size: image.getSize(),\n          scale: image.getScale(),\n          rotation: image.getRotation(),\n          rotateWithView: image.getRotateWithView()\n        }));\n      }\n\n      var zIndex = style.getZIndex() || 0;\n      var byGeometryType = featuresByZIndex[zIndex];\n\n      if (!byGeometryType) {\n        byGeometryType = {};\n        featuresByZIndex[zIndex] = byGeometryType;\n        byGeometryType[GeometryType.POLYGON] = [];\n        byGeometryType[GeometryType.CIRCLE] = [];\n        byGeometryType[GeometryType.LINE_STRING] = [];\n        byGeometryType[GeometryType.POINT] = [];\n      }\n\n      byGeometryType[geometry.getType().replace('Multi', '')].push(geometry, style);\n    }\n  }\n\n  var zIndexKeys = Object.keys(featuresByZIndex).map(Number).sort(numberSafeCompareFunction);\n\n  for (var i = 0, ii = zIndexKeys.length; i < ii; ++i) {\n    var byGeometryType = featuresByZIndex[zIndexKeys[i]];\n\n    for (var type in byGeometryType) {\n      var geomAndStyle = byGeometryType[type];\n\n      for (var j = 0, jj = geomAndStyle.length; j < jj; j += 2) {\n        renderer.setStyle(geomAndStyle[j + 1]);\n\n        for (var k = 0, kk = transforms.length; k < kk; ++k) {\n          renderer.setTransform(transforms[k]);\n          renderer.drawGeometry(geomAndStyle[j]);\n        }\n      }\n    }\n  }\n\n  return context.getImageData(0, 0, canvas.width, canvas.height);\n}\n/**\n * @param {import(\"../../pixel\").Pixel} pixel Pixel coordinate on the hit\n * detection canvas in css pixels.\n * @param {Array<import(\"../../Feature\").FeatureLike>} features Features. Has to\n * match the `features` array that was passed to `createHitDetectionImageData()`.\n * @param {ImageData} imageData Hit detection image data generated by\n * `createHitDetectionImageData()`.\n * @return {Array<import(\"../../Feature\").FeatureLike>} features Features.\n */\n\nexport function hitDetect(pixel, features, imageData) {\n  var resultFeatures = [];\n\n  if (imageData) {\n    var x = Math.floor(Math.round(pixel[0]) * HIT_DETECT_RESOLUTION);\n    var y = Math.floor(Math.round(pixel[1]) * HIT_DETECT_RESOLUTION); // The pixel coordinate is clamped down to the hit-detect canvas' size to account\n    // for browsers returning coordinates slightly larger than the actual canvas size\n    // due to a non-integer pixel ratio.\n\n    var index = (clamp(x, 0, imageData.width - 1) + clamp(y, 0, imageData.height - 1) * imageData.width) * 4;\n    var r = imageData.data[index];\n    var g = imageData.data[index + 1];\n    var b = imageData.data[index + 2];\n    var i = b + 256 * (g + 256 * r);\n    var indexFactor = Math.floor((256 * 256 * 256 - 1) / features.length);\n\n    if (i && i % indexFactor === 0) {\n      resultFeatures.push(features[i / indexFactor - 1]);\n    }\n  }\n\n  return resultFeatures;\n}","/**\n * @module ol/renderer/vector\n */\nimport BuilderType from '../render/canvas/BuilderType.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport ImageState from '../ImageState.js';\nimport { getUid } from '../util.js';\n/**\n * Feature callback. The callback will be called with three arguments. The first\n * argument is one {@link module:ol/Feature~Feature feature} or {@link module:ol/render/Feature~RenderFeature render feature}\n * at the pixel, the second is the {@link module:ol/layer/Layer~Layer layer} of the feature and will be null for\n * unmanaged layers. The third is the {@link module:ol/geom/SimpleGeometry~SimpleGeometry} of the feature. For features\n * with a GeometryCollection geometry, it will be the first detected geometry from the collection.\n * @template T\n * @typedef {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>, import(\"../geom/SimpleGeometry.js\").default): T} FeatureCallback\n */\n\n/**\n * Tolerance for geometry simplification in device pixels.\n * @type {number}\n */\n\nvar SIMPLIFY_TOLERANCE = 0.5;\n/**\n * @const\n * @type {Object<import(\"../geom/GeometryType.js\").default,\n *                function(import(\"../render/canvas/BuilderGroup.js\").default, import(\"../geom/Geometry.js\").default,\n *                         import(\"../style/Style.js\").default, Object): void>}\n */\n\nvar GEOMETRY_RENDERERS = {\n  'Point': renderPointGeometry,\n  'LineString': renderLineStringGeometry,\n  'Polygon': renderPolygonGeometry,\n  'MultiPoint': renderMultiPointGeometry,\n  'MultiLineString': renderMultiLineStringGeometry,\n  'MultiPolygon': renderMultiPolygonGeometry,\n  'GeometryCollection': renderGeometryCollectionGeometry,\n  'Circle': renderCircleGeometry\n};\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature1 Feature 1.\n * @param {import(\"../Feature.js\").FeatureLike} feature2 Feature 2.\n * @return {number} Order.\n */\n\nexport function defaultOrder(feature1, feature2) {\n  return parseInt(getUid(feature1), 10) - parseInt(getUid(feature2), 10);\n}\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Squared pixel tolerance.\n */\n\nexport function getSquaredTolerance(resolution, pixelRatio) {\n  var tolerance = getTolerance(resolution, pixelRatio);\n  return tolerance * tolerance;\n}\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Pixel tolerance.\n */\n\nexport function getTolerance(resolution, pixelRatio) {\n  return SIMPLIFY_TOLERANCE * resolution / pixelRatio;\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n * @param {import(\"../geom/Circle.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\nfunction renderCircleGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var fillStyle = style.getFill();\n  var strokeStyle = style.getStroke();\n\n  if (fillStyle || strokeStyle) {\n    var circleReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.CIRCLE);\n    circleReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    circleReplay.drawCircle(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Transform from user to view projection.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n * @return {boolean} `true` if style is loading.\n */\n\n\nexport function renderFeature(replayGroup, feature, style, squaredTolerance, listener, opt_transform, opt_declutterBuilderGroup) {\n  var loading = false;\n  var imageStyle = style.getImage();\n\n  if (imageStyle) {\n    var imageState = imageStyle.getImageState();\n\n    if (imageState == ImageState.LOADED || imageState == ImageState.ERROR) {\n      imageStyle.unlistenImageChange(listener);\n    } else {\n      if (imageState == ImageState.IDLE) {\n        imageStyle.load();\n      }\n\n      imageState = imageStyle.getImageState();\n      imageStyle.listenImageChange(listener);\n      loading = true;\n    }\n  }\n\n  renderFeatureInternal(replayGroup, feature, style, squaredTolerance, opt_transform, opt_declutterBuilderGroup);\n  return loading;\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {import(\"../proj.js\").TransformFunction} [opt_transform] Optional transform function.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\nfunction renderFeatureInternal(replayGroup, feature, style, squaredTolerance, opt_transform, opt_declutterBuilderGroup) {\n  var geometry = style.getGeometryFunction()(feature);\n\n  if (!geometry) {\n    return;\n  }\n\n  var simplifiedGeometry = geometry.simplifyTransformed(squaredTolerance, opt_transform);\n  var renderer = style.getRenderer();\n\n  if (renderer) {\n    renderGeometry(replayGroup, simplifiedGeometry, style, feature);\n  } else {\n    var geometryRenderer = GEOMETRY_RENDERERS[simplifiedGeometry.getType()];\n    geometryRenderer(replayGroup, simplifiedGeometry, style, feature, opt_declutterBuilderGroup);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\n\n\nfunction renderGeometry(replayGroup, geometry, style, feature) {\n  if (geometry.getType() == GeometryType.GEOMETRY_COLLECTION) {\n    var geometries =\n    /** @type {import(\"../geom/GeometryCollection.js\").default} */\n    geometry.getGeometries();\n\n    for (var i = 0, ii = geometries.length; i < ii; ++i) {\n      renderGeometry(replayGroup, geometries[i], style, feature);\n    }\n\n    return;\n  }\n\n  var replay = replayGroup.getBuilder(style.getZIndex(), BuilderType.DEFAULT);\n  replay.drawCustom(\n  /** @type {import(\"../geom/SimpleGeometry.js\").default} */\n  geometry, feature, style.getRenderer(), style.getHitDetectionRenderer());\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/GeometryCollection.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderGeometryCollectionGeometry(replayGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var geometries = geometry.getGeometriesArray();\n  var i, ii;\n\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    var geometryRenderer = GEOMETRY_RENDERERS[geometries[i].getType()];\n    geometryRenderer(replayGroup, geometries[i], style, feature, opt_declutterBuilderGroup);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/LineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderLineStringGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var strokeStyle = style.getStroke();\n\n  if (strokeStyle) {\n    var lineStringReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawLineString(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiLineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderMultiLineStringGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var strokeStyle = style.getStroke();\n\n  if (strokeStyle) {\n    var lineStringReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawMultiLineString(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderMultiPolygonGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var fillStyle = style.getFill();\n  var strokeStyle = style.getStroke();\n\n  if (strokeStyle || fillStyle) {\n    var polygonReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawMultiPolygon(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Point.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderPointGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var imageStyle = style.getImage();\n  var textStyle = style.getText();\n  /** @type {import(\"../render/canvas.js\").DeclutterImageWithText} */\n\n  var declutterImageWithText;\n\n  if (opt_declutterBuilderGroup) {\n    builderGroup = opt_declutterBuilderGroup;\n    declutterImageWithText = imageStyle && textStyle && textStyle.getText() ? {} : undefined;\n  }\n\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n\n    var imageReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, declutterImageWithText);\n    imageReplay.drawPoint(geometry, feature);\n  }\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle, declutterImageWithText);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/MultiPoint.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderMultiPointGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var imageStyle = style.getImage();\n  var textStyle = style.getText();\n  /** @type {import(\"../render/canvas.js\").DeclutterImageWithText} */\n\n  var declutterImageWithText;\n\n  if (opt_declutterBuilderGroup) {\n    builderGroup = opt_declutterBuilderGroup;\n    declutterImageWithText = imageStyle && textStyle && textStyle.getText() ? {} : undefined;\n  }\n\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n\n    var imageReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, declutterImageWithText);\n    imageReplay.drawMultiPoint(geometry, feature);\n  }\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle, declutterImageWithText);\n    textReplay.drawText(geometry, feature);\n  }\n}\n/**\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} builderGroup Replay group.\n * @param {import(\"../geom/Polygon.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n */\n\n\nfunction renderPolygonGeometry(builderGroup, geometry, style, feature, opt_declutterBuilderGroup) {\n  var fillStyle = style.getFill();\n  var strokeStyle = style.getStroke();\n\n  if (fillStyle || strokeStyle) {\n    var polygonReplay = builderGroup.getBuilder(style.getZIndex(), BuilderType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawPolygon(geometry, feature);\n  }\n\n  var textStyle = style.getText();\n\n  if (textStyle && textStyle.getText()) {\n    var textReplay = (opt_declutterBuilderGroup || builderGroup).getBuilder(style.getZIndex(), BuilderType.TEXT);\n    textReplay.setTextStyle(textStyle);\n    textReplay.drawText(geometry, feature);\n  }\n}","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/renderer/canvas/VectorLayer\n */\n\n\nimport CanvasBuilderGroup from '../../render/canvas/BuilderGroup.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport ExecutorGroup from '../../render/canvas/ExecutorGroup.js';\nimport ViewHint from '../../ViewHint.js';\nimport { HIT_DETECT_RESOLUTION, createHitDetectionImageData, hitDetect } from '../../render/canvas/hitdetect.js';\nimport { apply, makeInverse, makeScale, toString as transformToString } from '../../transform.js';\nimport { buffer, containsExtent, createEmpty, getWidth, intersects as intersectsExtent, wrapX as wrapExtentX } from '../../extent.js';\nimport { cssOpacity } from '../../css.js';\nimport { defaultOrder as defaultRenderOrder, getTolerance as getRenderTolerance, getSquaredTolerance as getSquaredRenderTolerance, renderFeature } from '../vector.js';\nimport { equals } from '../../array.js';\nimport { fromUserExtent, getTransformFromProjections, getUserProjection, toUserExtent, toUserResolution } from '../../proj.js';\nimport { getUid } from '../../util.js';\nimport { wrapX as wrapCoordinateX } from '../../coordinate.js';\n/**\n * @classdesc\n * Canvas renderer for vector layers.\n * @api\n */\n\nvar CanvasVectorLayerRenderer =\n/** @class */\nfunction (_super) {\n  __extends(CanvasVectorLayerRenderer, _super);\n  /**\n   * @param {import(\"../../layer/BaseVector.js\").default} vectorLayer Vector layer.\n   */\n\n\n  function CanvasVectorLayerRenderer(vectorLayer) {\n    var _this = _super.call(this, vectorLayer) || this;\n    /** @private */\n\n\n    _this.boundHandleStyleImageChange_ = _this.handleStyleImageChange_.bind(_this);\n    /**\n     * @type {boolean}\n     */\n\n    _this.animatingOrInteracting_;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.dirty_ = false;\n    /**\n     * @type {ImageData}\n     */\n\n    _this.hitDetectionImageData_ = null;\n    /**\n     * @type {Array<import(\"../../Feature.js\").default>}\n     */\n\n    _this.renderedFeatures_ = null;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.renderedRevision_ = -1;\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.renderedResolution_ = NaN;\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n    _this.renderedExtent_ = createEmpty();\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n\n    _this.wrappedRenderedExtent_ = createEmpty();\n    /**\n     * @private\n     * @type {number}\n     */\n\n    _this.renderedRotation_;\n    /**\n     * @private\n     * @type {import(\"../../coordinate\").Coordinate}\n     */\n\n    _this.renderedCenter_ = null;\n    /**\n     * @private\n     * @type {import(\"../../proj/Projection\").default}\n     */\n\n    _this.renderedProjection_ = null;\n    /**\n     * @private\n     * @type {function(import(\"../../Feature.js\").default, import(\"../../Feature.js\").default): number|null}\n     */\n\n    _this.renderedRenderOrder_ = null;\n    /**\n     * @private\n     * @type {import(\"../../render/canvas/ExecutorGroup\").default}\n     */\n\n    _this.replayGroup_ = null;\n    /**\n     * A new replay group had to be created by `prepareFrame()`\n     * @type {boolean}\n     */\n\n    _this.replayGroupChanged = true;\n    /**\n     * @type {import(\"../../render/canvas/ExecutorGroup\").default}\n     */\n\n    _this.declutterExecutorGroup = null;\n    /**\n     * Clipping to be performed by `renderFrame()`\n     * @type {boolean}\n     */\n\n    _this.clipping = true;\n    return _this;\n  }\n  /**\n   * @param {ExecutorGroup} executorGroup Executor group.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"rbush\").default} [opt_declutterTree] Declutter tree.\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.renderWorlds = function (executorGroup, frameState, opt_declutterTree) {\n    var extent = frameState.extent;\n    var viewState = frameState.viewState;\n    var center = viewState.center;\n    var resolution = viewState.resolution;\n    var projection = viewState.projection;\n    var rotation = viewState.rotation;\n    var projectionExtent = projection.getExtent();\n    var vectorSource = this.getLayer().getSource();\n    var pixelRatio = frameState.pixelRatio;\n    var viewHints = frameState.viewHints;\n    var snapToPixel = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n    var context = this.context;\n    var width = Math.round(frameState.size[0] * pixelRatio);\n    var height = Math.round(frameState.size[1] * pixelRatio);\n    var multiWorld = vectorSource.getWrapX() && projection.canWrapX();\n    var worldWidth = multiWorld ? getWidth(projectionExtent) : null;\n    var endWorld = multiWorld ? Math.ceil((extent[2] - projectionExtent[2]) / worldWidth) + 1 : 1;\n    var world = multiWorld ? Math.floor((extent[0] - projectionExtent[0]) / worldWidth) : 0;\n\n    do {\n      var transform = this.getRenderTransform(center, resolution, rotation, pixelRatio, width, height, world * worldWidth);\n      executorGroup.execute(context, 1, transform, rotation, snapToPixel, undefined, opt_declutterTree);\n    } while (++world < endWorld);\n  };\n  /**\n   * Render declutter items for this layer\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.renderDeclutter = function (frameState) {\n    if (this.declutterExecutorGroup) {\n      this.renderWorlds(this.declutterExecutorGroup, frameState, frameState.declutterTree);\n    }\n  };\n  /**\n   * Render the layer.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {HTMLElement} target Target that may be used to render content to.\n   * @return {HTMLElement} The rendered element.\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.renderFrame = function (frameState, target) {\n    var pixelRatio = frameState.pixelRatio;\n    var layerState = frameState.layerStatesArray[frameState.layerIndex]; // set forward and inverse pixel transforms\n\n    makeScale(this.pixelTransform, 1 / pixelRatio, 1 / pixelRatio);\n    makeInverse(this.inversePixelTransform, this.pixelTransform);\n    var canvasTransform = transformToString(this.pixelTransform);\n    this.useContainer(target, canvasTransform, layerState.opacity, this.getBackground(frameState));\n    var context = this.context;\n    var canvas = context.canvas;\n    var replayGroup = this.replayGroup_;\n    var declutterExecutorGroup = this.declutterExecutorGroup;\n\n    if ((!replayGroup || replayGroup.isEmpty()) && (!declutterExecutorGroup || declutterExecutorGroup.isEmpty())) {\n      return null;\n    } // resize and clear\n\n\n    var width = Math.round(frameState.size[0] * pixelRatio);\n    var height = Math.round(frameState.size[1] * pixelRatio);\n\n    if (canvas.width != width || canvas.height != height) {\n      canvas.width = width;\n      canvas.height = height;\n\n      if (canvas.style.transform !== canvasTransform) {\n        canvas.style.transform = canvasTransform;\n      }\n    } else if (!this.containerReused) {\n      context.clearRect(0, 0, width, height);\n    }\n\n    this.preRender(context, frameState);\n    var viewState = frameState.viewState;\n    var projection = viewState.projection; // clipped rendering if layer extent is set\n\n    var clipped = false;\n    var render = true;\n\n    if (layerState.extent && this.clipping) {\n      var layerExtent = fromUserExtent(layerState.extent, projection);\n      render = intersectsExtent(layerExtent, frameState.extent);\n      clipped = render && !containsExtent(layerExtent, frameState.extent);\n\n      if (clipped) {\n        this.clipUnrotated(context, frameState, layerExtent);\n      }\n    }\n\n    if (render) {\n      this.renderWorlds(replayGroup, frameState);\n    }\n\n    if (clipped) {\n      context.restore();\n    }\n\n    this.postRender(context, frameState);\n    var opacity = cssOpacity(layerState.opacity);\n    var container = this.container;\n\n    if (opacity !== container.style.opacity) {\n      container.style.opacity = opacity;\n    }\n\n    if (this.renderedRotation_ !== viewState.rotation) {\n      this.renderedRotation_ = viewState.rotation;\n      this.hitDetectionImageData_ = null;\n    }\n\n    return this.container;\n  };\n  /**\n   * Asynchronous layer level hit detection.\n   * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n   * @return {Promise<Array<import(\"../../Feature\").default>>} Promise that resolves with an array of features.\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.getFeatures = function (pixel) {\n    return new Promise(\n    /**\n     * @param {function(Array<import(\"../../Feature\").default|import(\"../../render/Feature\").default>): void} resolve Resolver function.\n     * @this {CanvasVectorLayerRenderer}\n     */\n    function (resolve) {\n      if (!this.hitDetectionImageData_ && !this.animatingOrInteracting_) {\n        var size = [this.context.canvas.width, this.context.canvas.height];\n        apply(this.pixelTransform, size);\n        var center = this.renderedCenter_;\n        var resolution = this.renderedResolution_;\n        var rotation = this.renderedRotation_;\n        var projection = this.renderedProjection_;\n        var extent = this.wrappedRenderedExtent_;\n        var layer = this.getLayer();\n        var transforms = [];\n        var width = size[0] * HIT_DETECT_RESOLUTION;\n        var height = size[1] * HIT_DETECT_RESOLUTION;\n        transforms.push(this.getRenderTransform(center, resolution, rotation, HIT_DETECT_RESOLUTION, width, height, 0).slice());\n        var source = layer.getSource();\n        var projectionExtent = projection.getExtent();\n\n        if (source.getWrapX() && projection.canWrapX() && !containsExtent(projectionExtent, extent)) {\n          var startX = extent[0];\n          var worldWidth = getWidth(projectionExtent);\n          var world = 0;\n          var offsetX = void 0;\n\n          while (startX < projectionExtent[0]) {\n            --world;\n            offsetX = worldWidth * world;\n            transforms.push(this.getRenderTransform(center, resolution, rotation, HIT_DETECT_RESOLUTION, width, height, offsetX).slice());\n            startX += worldWidth;\n          }\n\n          world = 0;\n          startX = extent[2];\n\n          while (startX > projectionExtent[2]) {\n            ++world;\n            offsetX = worldWidth * world;\n            transforms.push(this.getRenderTransform(center, resolution, rotation, HIT_DETECT_RESOLUTION, width, height, offsetX).slice());\n            startX -= worldWidth;\n          }\n        }\n\n        this.hitDetectionImageData_ = createHitDetectionImageData(size, transforms, this.renderedFeatures_, layer.getStyleFunction(), extent, resolution, rotation);\n      }\n\n      resolve(hitDetect(pixel, this.renderedFeatures_, this.hitDetectionImageData_));\n    }.bind(this));\n  };\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {import(\"../vector.js\").FeatureCallback<T>} callback Feature callback.\n   * @param {Array<import(\"../Map.js\").HitMatch<T>>} matches The hit detected matches with tolerance.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, matches) {\n    var _this = this;\n\n    if (!this.replayGroup_) {\n      return undefined;\n    }\n\n    var resolution = frameState.viewState.resolution;\n    var rotation = frameState.viewState.rotation;\n    var layer = this.getLayer();\n    /** @type {!Object<string, import(\"../Map.js\").HitMatch<T>|true>} */\n\n    var features = {};\n    /**\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     * @param {import(\"../../geom/SimpleGeometry.js\").default} geometry Geometry.\n     * @param {number} distanceSq The squared distance to the click position\n     * @return {T|undefined} Callback result.\n     */\n\n    var featureCallback = function featureCallback(feature, geometry, distanceSq) {\n      var key = getUid(feature);\n      var match = features[key];\n\n      if (!match) {\n        if (distanceSq === 0) {\n          features[key] = true;\n          return callback(feature, layer, geometry);\n        }\n\n        matches.push(features[key] = {\n          feature: feature,\n          layer: layer,\n          geometry: geometry,\n          distanceSq: distanceSq,\n          callback: callback\n        });\n      } else if (match !== true && distanceSq < match.distanceSq) {\n        if (distanceSq === 0) {\n          features[key] = true;\n          matches.splice(matches.lastIndexOf(match), 1);\n          return callback(feature, layer, geometry);\n        }\n\n        match.geometry = geometry;\n        match.distanceSq = distanceSq;\n      }\n\n      return undefined;\n    };\n\n    var result;\n    var executorGroups = [this.replayGroup_];\n\n    if (this.declutterExecutorGroup) {\n      executorGroups.push(this.declutterExecutorGroup);\n    }\n\n    executorGroups.some(function (executorGroup) {\n      return result = executorGroup.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, featureCallback, executorGroup === _this.declutterExecutorGroup && frameState.declutterTree ? frameState.declutterTree.all().map(function (item) {\n        return item.value;\n      }) : null);\n    });\n    return result;\n  };\n  /**\n   * Perform action necessary to get the layer rendered after new fonts have loaded\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.handleFontsChanged = function () {\n    var layer = this.getLayer();\n\n    if (layer.getVisible() && this.replayGroup_) {\n      layer.changed();\n    }\n  };\n  /**\n   * Handle changes in image style state.\n   * @param {import(\"../../events/Event.js\").default} event Image style change event.\n   * @private\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.handleStyleImageChange_ = function (event) {\n    this.renderIfReadyAndVisible();\n  };\n  /**\n   * Determine whether render should be called.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.prepareFrame = function (frameState) {\n    var vectorLayer = this.getLayer();\n    var vectorSource = vectorLayer.getSource();\n\n    if (!vectorSource) {\n      return false;\n    }\n\n    var animating = frameState.viewHints[ViewHint.ANIMATING];\n    var interacting = frameState.viewHints[ViewHint.INTERACTING];\n    var updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n    var updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n\n    if (!this.dirty_ && !updateWhileAnimating && animating || !updateWhileInteracting && interacting) {\n      this.animatingOrInteracting_ = true;\n      return true;\n    }\n\n    this.animatingOrInteracting_ = false;\n    var frameStateExtent = frameState.extent;\n    var viewState = frameState.viewState;\n    var projection = viewState.projection;\n    var resolution = viewState.resolution;\n    var pixelRatio = frameState.pixelRatio;\n    var vectorLayerRevision = vectorLayer.getRevision();\n    var vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n    var vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n\n    if (vectorLayerRenderOrder === undefined) {\n      vectorLayerRenderOrder = defaultRenderOrder;\n    }\n\n    var center = viewState.center.slice();\n    var extent = buffer(frameStateExtent, vectorLayerRenderBuffer * resolution);\n    var renderedExtent = extent.slice();\n    var loadExtents = [extent.slice()];\n    var projectionExtent = projection.getExtent();\n\n    if (vectorSource.getWrapX() && projection.canWrapX() && !containsExtent(projectionExtent, frameState.extent)) {\n      // For the replay group, we need an extent that intersects the real world\n      // (-180 to +180). To support geometries in a coordinate range from -540\n      // to +540, we add at least 1 world width on each side of the projection\n      // extent. If the viewport is wider than the world, we need to add half of\n      // the viewport width to make sure we cover the whole viewport.\n      var worldWidth = getWidth(projectionExtent);\n      var gutter = Math.max(getWidth(extent) / 2, worldWidth);\n      extent[0] = projectionExtent[0] - gutter;\n      extent[2] = projectionExtent[2] + gutter;\n      wrapCoordinateX(center, projection);\n      var loadExtent = wrapExtentX(loadExtents[0], projection); // If the extent crosses the date line, we load data for both edges of the worlds\n\n      if (loadExtent[0] < projectionExtent[0] && loadExtent[2] < projectionExtent[2]) {\n        loadExtents.push([loadExtent[0] + worldWidth, loadExtent[1], loadExtent[2] + worldWidth, loadExtent[3]]);\n      } else if (loadExtent[0] > projectionExtent[0] && loadExtent[2] > projectionExtent[2]) {\n        loadExtents.push([loadExtent[0] - worldWidth, loadExtent[1], loadExtent[2] - worldWidth, loadExtent[3]]);\n      }\n    }\n\n    if (!this.dirty_ && this.renderedResolution_ == resolution && this.renderedRevision_ == vectorLayerRevision && this.renderedRenderOrder_ == vectorLayerRenderOrder && containsExtent(this.wrappedRenderedExtent_, extent)) {\n      if (!equals(this.renderedExtent_, renderedExtent)) {\n        this.hitDetectionImageData_ = null;\n        this.renderedExtent_ = renderedExtent;\n      }\n\n      this.renderedCenter_ = center;\n      this.replayGroupChanged = false;\n      return true;\n    }\n\n    this.replayGroup_ = null;\n    this.dirty_ = false;\n    var replayGroup = new CanvasBuilderGroup(getRenderTolerance(resolution, pixelRatio), extent, resolution, pixelRatio);\n    var declutterBuilderGroup;\n\n    if (this.getLayer().getDeclutter()) {\n      declutterBuilderGroup = new CanvasBuilderGroup(getRenderTolerance(resolution, pixelRatio), extent, resolution, pixelRatio);\n    }\n\n    var userProjection = getUserProjection();\n    var userTransform;\n\n    if (userProjection) {\n      for (var i = 0, ii = loadExtents.length; i < ii; ++i) {\n        var extent_1 = loadExtents[i];\n        var userExtent_1 = toUserExtent(extent_1, projection);\n        vectorSource.loadFeatures(userExtent_1, toUserResolution(resolution, projection), userProjection);\n      }\n\n      userTransform = getTransformFromProjections(userProjection, projection);\n    } else {\n      for (var i = 0, ii = loadExtents.length; i < ii; ++i) {\n        vectorSource.loadFeatures(loadExtents[i], resolution, projection);\n      }\n    }\n\n    var squaredTolerance = getSquaredRenderTolerance(resolution, pixelRatio);\n\n    var render =\n    /**\n     * @param {import(\"../../Feature.js\").default} feature Feature.\n     * @this {CanvasVectorLayerRenderer}\n     */\n    function (feature) {\n      var styles;\n      var styleFunction = feature.getStyleFunction() || vectorLayer.getStyleFunction();\n\n      if (styleFunction) {\n        styles = styleFunction(feature, resolution);\n      }\n\n      if (styles) {\n        var dirty = this.renderFeature(feature, squaredTolerance, styles, replayGroup, userTransform, declutterBuilderGroup);\n        this.dirty_ = this.dirty_ || dirty;\n      }\n    }.bind(this);\n\n    var userExtent = toUserExtent(extent, projection);\n    /** @type {Array<import(\"../../Feature.js\").default>} */\n\n    var features = vectorSource.getFeaturesInExtent(userExtent);\n\n    if (vectorLayerRenderOrder) {\n      features.sort(vectorLayerRenderOrder);\n    }\n\n    for (var i = 0, ii = features.length; i < ii; ++i) {\n      render(features[i]);\n    }\n\n    this.renderedFeatures_ = features;\n    var replayGroupInstructions = replayGroup.finish();\n    var executorGroup = new ExecutorGroup(extent, resolution, pixelRatio, vectorSource.getOverlaps(), replayGroupInstructions, vectorLayer.getRenderBuffer());\n\n    if (declutterBuilderGroup) {\n      this.declutterExecutorGroup = new ExecutorGroup(extent, resolution, pixelRatio, vectorSource.getOverlaps(), declutterBuilderGroup.finish(), vectorLayer.getRenderBuffer());\n    }\n\n    this.renderedResolution_ = resolution;\n    this.renderedRevision_ = vectorLayerRevision;\n    this.renderedRenderOrder_ = vectorLayerRenderOrder;\n    this.renderedExtent_ = renderedExtent;\n    this.wrappedRenderedExtent_ = extent;\n    this.renderedCenter_ = center;\n    this.renderedProjection_ = projection;\n    this.replayGroup_ = executorGroup;\n    this.hitDetectionImageData_ = null;\n    this.replayGroupChanged = true;\n    return true;\n  };\n  /**\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   * @param {number} squaredTolerance Squared render tolerance.\n   * @param {import(\"../../style/Style.js\").default|Array<import(\"../../style/Style.js\").default>} styles The style or array of styles.\n   * @param {import(\"../../render/canvas/BuilderGroup.js\").default} builderGroup Builder group.\n   * @param {import(\"../../proj.js\").TransformFunction} [opt_transform] Transform from user to view projection.\n   * @param {import(\"../../render/canvas/BuilderGroup.js\").default} [opt_declutterBuilderGroup] Builder for decluttering.\n   * @return {boolean} `true` if an image is loading.\n   */\n\n\n  CanvasVectorLayerRenderer.prototype.renderFeature = function (feature, squaredTolerance, styles, builderGroup, opt_transform, opt_declutterBuilderGroup) {\n    if (!styles) {\n      return false;\n    }\n\n    var loading = false;\n\n    if (Array.isArray(styles)) {\n      for (var i = 0, ii = styles.length; i < ii; ++i) {\n        loading = renderFeature(builderGroup, feature, styles[i], squaredTolerance, this.boundHandleStyleImageChange_, opt_transform, opt_declutterBuilderGroup) || loading;\n      }\n    } else {\n      loading = renderFeature(builderGroup, feature, styles, squaredTolerance, this.boundHandleStyleImageChange_, opt_transform, opt_declutterBuilderGroup);\n    }\n\n    return loading;\n  };\n\n  return CanvasVectorLayerRenderer;\n}(CanvasLayerRenderer);\n\nexport default CanvasVectorLayerRenderer;","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/layer/Vector\n */\n\n\nimport BaseVectorLayer from './BaseVector.js';\nimport CanvasVectorLayerRenderer from '../renderer/canvas/VectorLayer.js';\n/**\n * @classdesc\n * Vector data is rendered client-side, as vectors. This layer type provides most accurate rendering\n * even during animations. Points and labels stay upright on rotated views. For very large\n * amounts of vector data, performance may suffer during pan and zoom animations. In this case,\n * try {@link module:ol/layer/VectorImage~VectorImageLayer}.\n *\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Vector.js\").default} VectorSourceType\n * @extends {BaseVectorLayer<VectorSourceType, CanvasVectorLayerRenderer>}\n * @api\n */\n\nvar VectorLayer =\n/** @class */\nfunction (_super) {\n  __extends(VectorLayer, _super);\n  /**\n   * @param {import(\"./BaseVector.js\").Options<VectorSourceType>} [opt_options] Options.\n   */\n\n\n  function VectorLayer(opt_options) {\n    return _super.call(this, opt_options) || this;\n  }\n\n  VectorLayer.prototype.createRenderer = function () {\n    return new CanvasVectorLayerRenderer(this);\n  };\n\n  return VectorLayer;\n}(BaseVectorLayer);\n\nexport default VectorLayer;","/**\n * @module ol/structs/RBush\n */\nimport RBush_ from 'rbush';\nimport { createOrUpdate, equals } from '../extent.js';\nimport { getUid } from '../util.js';\nimport { isEmpty } from '../obj.js';\n/**\n * @typedef {Object} Entry\n * @property {number} minX MinX.\n * @property {number} minY MinY.\n * @property {number} maxX MaxX.\n * @property {number} maxY MaxY.\n * @property {Object} [value] Value.\n */\n\n/**\n * @classdesc\n * Wrapper around the RBush by Vladimir Agafonkin.\n * See https://github.com/mourner/rbush.\n *\n * @template T\n */\n\nvar RBush =\n/** @class */\nfunction () {\n  /**\n   * @param {number} [opt_maxEntries] Max entries.\n   */\n  function RBush(opt_maxEntries) {\n    /**\n     * @private\n     */\n    this.rbush_ = new RBush_(opt_maxEntries);\n    /**\n     * A mapping between the objects added to this rbush wrapper\n     * and the objects that are actually added to the internal rbush.\n     * @private\n     * @type {Object<string, Entry>}\n     */\n\n    this.items_ = {};\n  }\n  /**\n   * Insert a value into the RBush.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {T} value Value.\n   */\n\n\n  RBush.prototype.insert = function (extent, value) {\n    /** @type {Entry} */\n    var item = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3],\n      value: value\n    };\n    this.rbush_.insert(item);\n    this.items_[getUid(value)] = item;\n  };\n  /**\n   * Bulk-insert values into the RBush.\n   * @param {Array<import(\"../extent.js\").Extent>} extents Extents.\n   * @param {Array<T>} values Values.\n   */\n\n\n  RBush.prototype.load = function (extents, values) {\n    var items = new Array(values.length);\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var extent = extents[i];\n      var value = values[i];\n      /** @type {Entry} */\n\n      var item = {\n        minX: extent[0],\n        minY: extent[1],\n        maxX: extent[2],\n        maxY: extent[3],\n        value: value\n      };\n      items[i] = item;\n      this.items_[getUid(value)] = item;\n    }\n\n    this.rbush_.load(items);\n  };\n  /**\n   * Remove a value from the RBush.\n   * @param {T} value Value.\n   * @return {boolean} Removed.\n   */\n\n\n  RBush.prototype.remove = function (value) {\n    var uid = getUid(value); // get the object in which the value was wrapped when adding to the\n    // internal rbush. then use that object to do the removal.\n\n    var item = this.items_[uid];\n    delete this.items_[uid];\n    return this.rbush_.remove(item) !== null;\n  };\n  /**\n   * Update the extent of a value in the RBush.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {T} value Value.\n   */\n\n\n  RBush.prototype.update = function (extent, value) {\n    var item = this.items_[getUid(value)];\n    var bbox = [item.minX, item.minY, item.maxX, item.maxY];\n\n    if (!equals(bbox, extent)) {\n      this.remove(value);\n      this.insert(extent, value);\n    }\n  };\n  /**\n   * Return all values in the RBush.\n   * @return {Array<T>} All.\n   */\n\n\n  RBush.prototype.getAll = function () {\n    var items = this.rbush_.all();\n    return items.map(function (item) {\n      return item.value;\n    });\n  };\n  /**\n   * Return all values in the given extent.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {Array<T>} All in extent.\n   */\n\n\n  RBush.prototype.getInExtent = function (extent) {\n    /** @type {Entry} */\n    var bbox = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3]\n    };\n    var items = this.rbush_.search(bbox);\n    return items.map(function (item) {\n      return item.value;\n    });\n  };\n  /**\n   * Calls a callback function with each value in the tree.\n   * If the callback returns a truthy value, this value is returned without\n   * checking the rest of the tree.\n   * @param {function(T): *} callback Callback.\n   * @return {*} Callback return value.\n   */\n\n\n  RBush.prototype.forEach = function (callback) {\n    return this.forEach_(this.getAll(), callback);\n  };\n  /**\n   * Calls a callback function with each value in the provided extent.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(T): *} callback Callback.\n   * @return {*} Callback return value.\n   */\n\n\n  RBush.prototype.forEachInExtent = function (extent, callback) {\n    return this.forEach_(this.getInExtent(extent), callback);\n  };\n  /**\n   * @param {Array<T>} values Values.\n   * @param {function(T): *} callback Callback.\n   * @private\n   * @return {*} Callback return value.\n   */\n\n\n  RBush.prototype.forEach_ = function (values, callback) {\n    var result;\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      result = callback(values[i]);\n\n      if (result) {\n        return result;\n      }\n    }\n\n    return result;\n  };\n  /**\n   * @return {boolean} Is empty.\n   */\n\n\n  RBush.prototype.isEmpty = function () {\n    return isEmpty(this.items_);\n  };\n  /**\n   * Remove all values from the RBush.\n   */\n\n\n  RBush.prototype.clear = function () {\n    this.rbush_.clear();\n    this.items_ = {};\n  };\n  /**\n   * @param {import(\"../extent.js\").Extent} [opt_extent] Extent.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   */\n\n\n  RBush.prototype.getExtent = function (opt_extent) {\n    var data = this.rbush_.toJSON();\n    return createOrUpdate(data.minX, data.minY, data.maxX, data.maxY, opt_extent);\n  };\n  /**\n   * @param {RBush} rbush R-Tree.\n   */\n\n\n  RBush.prototype.concat = function (rbush) {\n    this.rbush_.load(rbush.rbush_.all());\n\n    for (var i in rbush.items_) {\n      this.items_[i] = rbush.items_[i];\n    }\n  };\n\n  return RBush;\n}();\n\nexport default RBush;","/**\n * @module ol/source/VectorEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a feature is added to the source.\n   * @event module:ol/source/Vector.VectorSourceEvent#addfeature\n   * @api\n   */\n  ADDFEATURE: 'addfeature',\n\n  /**\n   * Triggered when a feature is updated.\n   * @event module:ol/source/Vector.VectorSourceEvent#changefeature\n   * @api\n   */\n  CHANGEFEATURE: 'changefeature',\n\n  /**\n   * Triggered when the clear method is called on the source.\n   * @event module:ol/source/Vector.VectorSourceEvent#clear\n   * @api\n   */\n  CLEAR: 'clear',\n\n  /**\n   * Triggered when a feature is removed from the source.\n   * See {@link module:ol/source/Vector~VectorSource#clear source.clear()} for exceptions.\n   * @event module:ol/source/Vector.VectorSourceEvent#removefeature\n   * @api\n   */\n  REMOVEFEATURE: 'removefeature',\n\n  /**\n   * Triggered when features starts loading.\n   * @event module:ol/source/Vector.VectorSourceEvent#featuresloadstart\n   * @api\n   */\n  FEATURESLOADSTART: 'featuresloadstart',\n\n  /**\n   * Triggered when features finishes loading.\n   * @event module:ol/source/Vector.VectorSourceEvent#featuresloadend\n   * @api\n   */\n  FEATURESLOADEND: 'featuresloadend',\n\n  /**\n   * Triggered if feature loading results in an error.\n   * @event module:ol/source/Vector.VectorSourceEvent#featuresloaderror\n   * @api\n   */\n  FEATURESLOADERROR: 'featuresloaderror'\n};\n/**\n * @typedef {'addfeature'|'changefeature'|'clear'|'removefeature'|'featuresloadstart'|'featuresloadend'|'featuresloaderror'} VectorSourceEventTypes\n */","/**\n * @module ol/loadingstrategy\n */\nimport { fromUserExtent, fromUserResolution, toUserExtent } from './proj.js';\n/**\n * Strategy function for loading all features with a single request.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\n\nexport function all(extent, resolution) {\n  return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\n\nexport function bbox(extent, resolution) {\n  return [extent];\n}\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {function(import(\"./extent.js\").Extent, number, import(\"./proj.js\").Projection): Array<import(\"./extent.js\").Extent>} Loading strategy.\n * @api\n */\n\nexport function tile(tileGrid) {\n  return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./proj.js\").Projection} projection Projection.\n     * @return {Array<import(\"./extent.js\").Extent>} Extents.\n     */\n    function (extent, resolution, projection) {\n      var z = tileGrid.getZForResolution(fromUserResolution(resolution, projection));\n      var tileRange = tileGrid.getTileRangeForExtentAndZ(fromUserExtent(extent, projection), z);\n      /** @type {Array<import(\"./extent.js\").Extent>} */\n\n      var extents = [];\n      /** @type {import(\"./tilecoord.js\").TileCoord} */\n\n      var tileCoord = [z, 0, 0];\n\n      for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX; ++tileCoord[1]) {\n        for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY; ++tileCoord[2]) {\n          extents.push(toUserExtent(tileGrid.getTileCoordExtent(tileCoord), projection));\n        }\n      }\n\n      return extents;\n    }\n  );\n}","/**\n * @module ol/featureloader\n */\nimport FormatType from './format/FormatType.js';\nimport { VOID } from './functions.js';\n/**\n *\n * @type {boolean}\n * @private\n */\n\nvar withCredentials = false;\n/**\n * {@link module:ol/source/Vector~VectorSource} sources use a function of this type to\n * load features.\n *\n * This function takes up to 5 arguments. These are an {@link module:ol/extent~Extent} representing\n * the area to be loaded, a `{number}` representing the resolution (map units per pixel), an\n * {@link module:ol/proj/Projection~Projection} for the projection, an optional success callback that should get\n * the loaded features passed as an argument and an optional failure callback with no arguments. If\n * the callbacks are not used, the corresponding vector source will not fire `'featuresloadend'` and\n * `'featuresloaderror'` events. `this` within the function is bound to the\n * {@link module:ol/source/Vector~VectorSource} it's called from.\n *\n * The function is responsible for loading the features and adding them to the\n * source.\n * @typedef {function(this:(import(\"./source/Vector\").default|import(\"./VectorTile.js\").default),\n *           import(\"./extent.js\").Extent,\n *           number,\n *           import(\"./proj/Projection.js\").default,\n *           function(Array<import(\"./Feature.js\").default>): void=,\n *           function(): void=): void} FeatureLoader\n * @api\n */\n\n/**\n * {@link module:ol/source/Vector~VectorSource} sources use a function of this type to\n * get the url to load features from.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area\n * to be loaded, a `{number}` representing the resolution (map units per pixel)\n * and an {@link module:ol/proj/Projection~Projection} for the projection  as\n * arguments and returns a `{string}` representing the URL.\n * @typedef {function(import(\"./extent.js\").Extent, number, import(\"./proj/Projection.js\").default): string} FeatureUrlFunction\n * @api\n */\n\n/**\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @param {function(Array<import(\"./Feature.js\").default>, import(\"./proj/Projection.js\").default): void} success Success\n *      Function called with the loaded features and optionally with the data projection.\n * @param {function(): void} failure Failure\n *      Function called when loading failed.\n */\n\nexport function loadFeaturesXhr(url, format, extent, resolution, projection, success, failure) {\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', typeof url === 'function' ? url(extent, resolution, projection) : url, true);\n\n  if (format.getType() == FormatType.ARRAY_BUFFER) {\n    xhr.responseType = 'arraybuffer';\n  }\n\n  xhr.withCredentials = withCredentials;\n  /**\n   * @param {Event} event Event.\n   * @private\n   */\n\n  xhr.onload = function (event) {\n    // status will be 0 for file:// urls\n    if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {\n      var type = format.getType();\n      /** @type {Document|Node|Object|string|undefined} */\n\n      var source = void 0;\n\n      if (type == FormatType.JSON || type == FormatType.TEXT) {\n        source = xhr.responseText;\n      } else if (type == FormatType.XML) {\n        source = xhr.responseXML;\n\n        if (!source) {\n          source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n        }\n      } else if (type == FormatType.ARRAY_BUFFER) {\n        source =\n        /** @type {ArrayBuffer} */\n        xhr.response;\n      }\n\n      if (source) {\n        success(\n        /** @type {Array<import(\"./Feature.js\").default>} */\n        format.readFeatures(source, {\n          extent: extent,\n          featureProjection: projection\n        }), format.readProjection(source));\n      } else {\n        failure();\n      }\n    } else {\n      failure();\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  xhr.onerror = failure;\n  xhr.send();\n}\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @return {FeatureLoader} The feature loader.\n * @api\n */\n\nexport function xhr(url, format) {\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {import(\"./proj/Projection.js\").default} projection Projection.\n   * @param {function(Array<import(\"./Feature.js\").default>): void} [success] Success\n   *      Function called when loading succeeded.\n   * @param {function(): void} [failure] Failure\n   *      Function called when loading failed.\n   * @this {import(\"./source/Vector\").default}\n   */\n  return function (extent, resolution, projection, success, failure) {\n    var source =\n    /** @type {import(\"./source/Vector\").default} */\n    this;\n    loadFeaturesXhr(url, format, extent, resolution, projection,\n    /**\n     * @param {Array<import(\"./Feature.js\").default>} features The loaded features.\n     * @param {import(\"./proj/Projection.js\").default} dataProjection Data\n     * projection.\n     */\n    function (features, dataProjection) {\n      source.addFeatures(features);\n\n      if (success !== undefined) {\n        success(features);\n      }\n    },\n    /* FIXME handle error */\n    failure ? failure : VOID);\n  };\n}\n/**\n * Setter for the withCredentials configuration for the XHR.\n *\n * @param {boolean} xhrWithCredentials The value of withCredentials to set.\n * Compare https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/\n * @api\n */\n\nexport function setWithCredentials(xhrWithCredentials) {\n  withCredentials = xhrWithCredentials;\n}","/**\n * @module ol/source/Vector\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport RBush from '../structs/RBush.js';\nimport Source from './Source.js';\nimport SourceState from './State.js';\nimport VectorEventType from './VectorEventType.js';\nimport { TRUE, VOID } from '../functions.js';\nimport { all as allStrategy } from '../loadingstrategy.js';\nimport { assert } from '../asserts.js';\nimport { containsExtent, equals } from '../extent.js';\nimport { extend } from '../array.js';\nimport { getUid } from '../util.js';\nimport { getValues, isEmpty } from '../obj.js';\nimport { listen, unlistenByKey } from '../events.js';\nimport { xhr } from '../featureloader.js';\n/**\n * A function that takes an {@link module:ol/extent~Extent} and a resolution as arguments, and\n * returns an array of {@link module:ol/extent~Extent} with the extents to load. Usually this\n * is one of the standard {@link module:ol/loadingstrategy} strategies.\n *\n * @typedef {function(import(\"../extent.js\").Extent, number, import(\"../proj/Projection.js\").default): Array<import(\"../extent.js\").Extent>} LoadingStrategy\n * @api\n */\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Vector~VectorSource} instances are instances of this\n * type.\n * @template {import(\"../geom/Geometry.js\").default} [Geometry=import(\"../geom/Geometry.js\").default]\n */\n\nvar VectorSourceEvent =\n/** @class */\nfunction (_super) {\n  __extends(VectorSourceEvent, _super);\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Feature.js\").default<Geometry>} [opt_feature] Feature.\n   * @param {Array<import(\"../Feature.js\").default<Geometry>>} [opt_features] Features.\n   */\n\n\n  function VectorSourceEvent(type, opt_feature, opt_features) {\n    var _this = _super.call(this, type) || this;\n    /**\n     * The added or removed feature for the `ADDFEATURE` and `REMOVEFEATURE` events, `undefined` otherwise.\n     * @type {import(\"../Feature.js\").default<Geometry>|undefined}\n     * @api\n     */\n\n\n    _this.feature = opt_feature;\n    /**\n     * The loaded features for the `FEATURESLOADED` event, `undefined` otherwise.\n     * @type {Array<import(\"../Feature.js\").default<Geometry>>|undefined}\n     * @api\n     */\n\n    _this.features = opt_features;\n    return _this;\n  }\n\n  return VectorSourceEvent;\n}(Event);\n\nexport { VectorSourceEvent };\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types, import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<import(\"./VectorEventType\").VectorSourceEventTypes, VectorSourceEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     import(\"./VectorEventType\").VectorSourceEventTypes, Return>} VectorSourceOnSignature\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {Array<import(\"../Feature.js\").default>|Collection<import(\"../Feature.js\").default>} [features]\n * Features. If provided as {@link module:ol/Collection~Collection}, the features in the source\n * and the collection will stay in sync.\n * @property {import(\"../format/Feature.js\").default} [format] The feature format used by the XHR\n * feature loader when `url` is set. Required if `url` is set, otherwise ignored.\n * @property {import(\"../featureloader.js\").FeatureLoader} [loader]\n * The loader function used to load features, from a remote source for example.\n * If this is not set and `url` is set, the source will create and use an XHR\n * feature loader. The `'featuresloadend'` and `'featuresloaderror'` events\n * will only fire if the `success` and `failure` callbacks are used.\n *\n * Example:\n *\n * ```js\n * import {Vector} from 'ol/source';\n * import {GeoJSON} from 'ol/format';\n * import {bbox} from 'ol/loadingstrategy';\n *\n * var vectorSource = new Vector({\n *   format: new GeoJSON(),\n *   loader: function(extent, resolution, projection, success, failure) {\n *      var proj = projection.getCode();\n *      var url = 'https://ahocevar.com/geoserver/wfs?service=WFS&' +\n *          'version=1.1.0&request=GetFeature&typename=osm:water_areas&' +\n *          'outputFormat=application/json&srsname=' + proj + '&' +\n *          'bbox=' + extent.join(',') + ',' + proj;\n *      var xhr = new XMLHttpRequest();\n *      xhr.open('GET', url);\n *      var onError = function() {\n *        vectorSource.removeLoadedExtent(extent);\n *        failure();\n *      }\n *      xhr.onerror = onError;\n *      xhr.onload = function() {\n *        if (xhr.status == 200) {\n *          var features = vectorSource.getFormat().readFeatures(xhr.responseText);\n *          vectorSource.addFeatures(features);\n *          success(features);\n *        } else {\n *          onError();\n *        }\n *      }\n *      xhr.send();\n *    },\n *    strategy: bbox\n *  });\n * ```\n * @property {boolean} [overlaps=true] This source may have overlapping geometries.\n * Setting this to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {LoadingStrategy} [strategy] The loading strategy to use.\n * By default an {@link module:ol/loadingstrategy.all}\n * strategy is used, a one-off strategy which loads all features at once.\n * @property {string|import(\"../featureloader.js\").FeatureUrlFunction} [url]\n * Setting this option instructs the source to load features using an XHR loader\n * (see {@link module:ol/featureloader.xhr}). Use a `string` and an\n * {@link module:ol/loadingstrategy.all} for a one-off download of all features from\n * the given URL. Use a {@link module:ol/featureloader~FeatureUrlFunction} to generate the url with\n * other loading strategies.\n * Requires `format` to be set as well.\n * When default XHR feature loader is provided, the features will\n * be transformed from the data projection to the view projection\n * during parsing. If your remote data source does not advertise its projection\n * properly, this transformation will be incorrect. For some formats, the\n * default projection (usually EPSG:4326) can be overridden by setting the\n * dataProjection constructor option on the format.\n * Note that if a source contains non-feature data, such as a GeoJSON geometry\n * or a KML NetworkLink, these will be ignored. Use a custom loader to load these.\n * @property {boolean} [useSpatialIndex=true]\n * By default, an RTree is used as spatial index. When features are removed and\n * added frequently, and the total number of features is low, setting this to\n * `false` may improve performance.\n *\n * Note that\n * {@link module:ol/source/Vector~VectorSource#getFeaturesInExtent},\n * {@link module:ol/source/Vector~VectorSource#getClosestFeatureToCoordinate} and\n * {@link module:ol/source/Vector~VectorSource#getExtent} cannot be used when `useSpatialIndex` is\n * set to `false`, and {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent} will loop\n * through all features.\n *\n * When set to `false`, the features will be maintained in an\n * {@link module:ol/Collection~Collection}, which can be retrieved through\n * {@link module:ol/source/Vector~VectorSource#getFeaturesCollection}.\n * @property {boolean} [wrapX=true] Wrap the world horizontally. For vector editing across the\n * -180 and 180 meridians to work properly, this should be set to `false`. The\n * resulting geometry coordinates will then exceed the world bounds.\n */\n\n/**\n * @classdesc\n * Provides a source of features for vector layers. Vector features provided\n * by this source are suitable for editing. See {@link module:ol/source/VectorTile~VectorTile} for\n * vector data that is optimized for rendering.\n *\n * @fires VectorSourceEvent\n * @api\n * @template {import(\"../geom/Geometry.js\").default} [Geometry=import(\"../geom/Geometry.js\").default]\n */\n\nvar VectorSource =\n/** @class */\nfunction (_super) {\n  __extends(VectorSource, _super);\n  /**\n   * @param {Options} [opt_options] Vector source options.\n   */\n\n\n  function VectorSource(opt_options) {\n    var _this = this;\n\n    var options = opt_options || {};\n    _this = _super.call(this, {\n      attributions: options.attributions,\n      interpolate: true,\n      projection: undefined,\n      state: SourceState.READY,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true\n    }) || this;\n    /***\n     * @type {VectorSourceOnSignature<import(\"../events\").EventsKey>}\n     */\n\n    _this.on;\n    /***\n     * @type {VectorSourceOnSignature<import(\"../events\").EventsKey>}\n     */\n\n    _this.once;\n    /***\n     * @type {VectorSourceOnSignature<void>}\n     */\n\n    _this.un;\n    /**\n     * @private\n     * @type {import(\"../featureloader.js\").FeatureLoader}\n     */\n\n    _this.loader_ = VOID;\n    /**\n     * @private\n     * @type {import(\"../format/Feature.js\").default|undefined}\n     */\n\n    _this.format_ = options.format;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    _this.overlaps_ = options.overlaps === undefined ? true : options.overlaps;\n    /**\n     * @private\n     * @type {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined}\n     */\n\n    _this.url_ = options.url;\n\n    if (options.loader !== undefined) {\n      _this.loader_ = options.loader;\n    } else if (_this.url_ !== undefined) {\n      assert(_this.format_, 7); // `format` must be set when `url` is set\n      // create a XHR feature loader for \"url\" and \"format\"\n\n      _this.loader_ = xhr(_this.url_,\n      /** @type {import(\"../format/Feature.js\").default} */\n      _this.format_);\n    }\n    /**\n     * @private\n     * @type {LoadingStrategy}\n     */\n\n\n    _this.strategy_ = options.strategy !== undefined ? options.strategy : allStrategy;\n    var useSpatialIndex = options.useSpatialIndex !== undefined ? options.useSpatialIndex : true;\n    /**\n     * @private\n     * @type {RBush<import(\"../Feature.js\").default<Geometry>>}\n     */\n\n    _this.featuresRtree_ = useSpatialIndex ? new RBush() : null;\n    /**\n     * @private\n     * @type {RBush<{extent: import(\"../extent.js\").Extent}>}\n     */\n\n    _this.loadedExtentsRtree_ = new RBush();\n    /**\n     * @type {number}\n     * @private\n     */\n\n    _this.loadingExtentsCount_ = 0;\n    /**\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n     */\n\n    _this.nullGeometryFeatures_ = {};\n    /**\n     * A lookup of features by id (the return from feature.getId()).\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n     */\n\n    _this.idIndex_ = {};\n    /**\n     * A lookup of features by uid (using getUid(feature)).\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default<Geometry>>}\n     */\n\n    _this.uidIndex_ = {};\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n     */\n\n    _this.featureChangeKeys_ = {};\n    /**\n     * @private\n     * @type {Collection<import(\"../Feature.js\").default<Geometry>>|null}\n     */\n\n    _this.featuresCollection_ = null;\n    var collection, features;\n\n    if (Array.isArray(options.features)) {\n      features =\n      /** @type {Array<import(\"../Feature.js\").default<Geometry>>} */\n      options.features;\n    } else if (options.features) {\n      collection =\n      /** @type {Collection<import(\"../Feature.js\").default<Geometry>>} */\n      options.features;\n      features = collection.getArray();\n    }\n\n    if (!useSpatialIndex && collection === undefined) {\n      collection = new Collection(features);\n    }\n\n    if (features !== undefined) {\n      _this.addFeaturesInternal(features);\n    }\n\n    if (collection !== undefined) {\n      _this.bindFeaturesCollection_(collection);\n    }\n\n    return _this;\n  }\n  /**\n   * Add a single feature to the source.  If you want to add a batch of features\n   * at once, call {@link module:ol/source/Vector~VectorSource#addFeatures #addFeatures()}\n   * instead. A feature will not be added to the source if feature with\n   * the same id is already there. The reason for this behavior is to avoid\n   * feature duplication when using bbox or tile loading strategies.\n   * Note: this also applies if an {@link module:ol/Collection~Collection} is used for features,\n   * meaning that if a feature with a duplicate id is added in the collection, it will\n   * be removed from it right away.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to add.\n   * @api\n   */\n\n\n  VectorSource.prototype.addFeature = function (feature) {\n    this.addFeatureInternal(feature);\n    this.changed();\n  };\n  /**\n   * Add a feature without firing a `change` event.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n   * @protected\n   */\n\n\n  VectorSource.prototype.addFeatureInternal = function (feature) {\n    var featureKey = getUid(feature);\n\n    if (!this.addToIndex_(featureKey, feature)) {\n      if (this.featuresCollection_) {\n        this.featuresCollection_.remove(feature);\n      }\n\n      return;\n    }\n\n    this.setupChangeEvents_(featureKey, feature);\n    var geometry = feature.getGeometry();\n\n    if (geometry) {\n      var extent = geometry.getExtent();\n\n      if (this.featuresRtree_) {\n        this.featuresRtree_.insert(extent, feature);\n      }\n    } else {\n      this.nullGeometryFeatures_[featureKey] = feature;\n    }\n\n    this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, feature));\n  };\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n   * @private\n   */\n\n\n  VectorSource.prototype.setupChangeEvents_ = function (featureKey, feature) {\n    this.featureChangeKeys_[featureKey] = [listen(feature, EventType.CHANGE, this.handleFeatureChange_, this), listen(feature, ObjectEventType.PROPERTYCHANGE, this.handleFeatureChange_, this)];\n  };\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n   * @return {boolean} The feature is \"valid\", in the sense that it is also a\n   *     candidate for insertion into the Rtree.\n   * @private\n   */\n\n\n  VectorSource.prototype.addToIndex_ = function (featureKey, feature) {\n    var valid = true;\n    var id = feature.getId();\n\n    if (id !== undefined) {\n      if (!(id.toString() in this.idIndex_)) {\n        this.idIndex_[id.toString()] = feature;\n      } else {\n        valid = false;\n      }\n    }\n\n    if (valid) {\n      assert(!(featureKey in this.uidIndex_), 30); // The passed `feature` was already added to the source\n\n      this.uidIndex_[featureKey] = feature;\n    }\n\n    return valid;\n  };\n  /**\n   * Add a batch of features to the source.\n   * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features to add.\n   * @api\n   */\n\n\n  VectorSource.prototype.addFeatures = function (features) {\n    this.addFeaturesInternal(features);\n    this.changed();\n  };\n  /**\n   * Add features without firing a `change` event.\n   * @param {Array<import(\"../Feature.js\").default<Geometry>>} features Features.\n   * @protected\n   */\n\n\n  VectorSource.prototype.addFeaturesInternal = function (features) {\n    var extents = [];\n    var newFeatures = [];\n    var geometryFeatures = [];\n\n    for (var i = 0, length_1 = features.length; i < length_1; i++) {\n      var feature = features[i];\n      var featureKey = getUid(feature);\n\n      if (this.addToIndex_(featureKey, feature)) {\n        newFeatures.push(feature);\n      }\n    }\n\n    for (var i = 0, length_2 = newFeatures.length; i < length_2; i++) {\n      var feature = newFeatures[i];\n      var featureKey = getUid(feature);\n      this.setupChangeEvents_(featureKey, feature);\n      var geometry = feature.getGeometry();\n\n      if (geometry) {\n        var extent = geometry.getExtent();\n        extents.push(extent);\n        geometryFeatures.push(feature);\n      } else {\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    }\n\n    if (this.featuresRtree_) {\n      this.featuresRtree_.load(extents, geometryFeatures);\n    }\n\n    if (this.hasListener(VectorEventType.ADDFEATURE)) {\n      for (var i = 0, length_3 = newFeatures.length; i < length_3; i++) {\n        this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, newFeatures[i]));\n      }\n    }\n  };\n  /**\n   * @param {!Collection<import(\"../Feature.js\").default<Geometry>>} collection Collection.\n   * @private\n   */\n\n\n  VectorSource.prototype.bindFeaturesCollection_ = function (collection) {\n    var modifyingCollection = false;\n    this.addEventListener(VectorEventType.ADDFEATURE,\n    /**\n     * @param {VectorSourceEvent<Geometry>} evt The vector source event\n     */\n    function (evt) {\n      if (!modifyingCollection) {\n        modifyingCollection = true;\n        collection.push(evt.feature);\n        modifyingCollection = false;\n      }\n    });\n    this.addEventListener(VectorEventType.REMOVEFEATURE,\n    /**\n     * @param {VectorSourceEvent<Geometry>} evt The vector source event\n     */\n    function (evt) {\n      if (!modifyingCollection) {\n        modifyingCollection = true;\n        collection.remove(evt.feature);\n        modifyingCollection = false;\n      }\n    });\n    collection.addEventListener(CollectionEventType.ADD,\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n     */\n    function (evt) {\n      if (!modifyingCollection) {\n        modifyingCollection = true;\n        this.addFeature(\n        /** @type {import(\"../Feature.js\").default<Geometry>} */\n        evt.element);\n        modifyingCollection = false;\n      }\n    }.bind(this));\n    collection.addEventListener(CollectionEventType.REMOVE,\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n     */\n    function (evt) {\n      if (!modifyingCollection) {\n        modifyingCollection = true;\n        this.removeFeature(\n        /** @type {import(\"../Feature.js\").default<Geometry>} */\n        evt.element);\n        modifyingCollection = false;\n      }\n    }.bind(this));\n    this.featuresCollection_ = collection;\n  };\n  /**\n   * Remove all features from the source.\n   * @param {boolean} [opt_fast] Skip dispatching of {@link module:ol/source/Vector.VectorSourceEvent#event:removefeature removefeature} events.\n   * @api\n   */\n\n\n  VectorSource.prototype.clear = function (opt_fast) {\n    if (opt_fast) {\n      for (var featureId in this.featureChangeKeys_) {\n        var keys = this.featureChangeKeys_[featureId];\n        keys.forEach(unlistenByKey);\n      }\n\n      if (!this.featuresCollection_) {\n        this.featureChangeKeys_ = {};\n        this.idIndex_ = {};\n        this.uidIndex_ = {};\n      }\n    } else {\n      if (this.featuresRtree_) {\n        var removeAndIgnoreReturn = function (feature) {\n          this.removeFeatureInternal(feature);\n        }.bind(this);\n\n        this.featuresRtree_.forEach(removeAndIgnoreReturn);\n\n        for (var id in this.nullGeometryFeatures_) {\n          this.removeFeatureInternal(this.nullGeometryFeatures_[id]);\n        }\n      }\n    }\n\n    if (this.featuresCollection_) {\n      this.featuresCollection_.clear();\n    }\n\n    if (this.featuresRtree_) {\n      this.featuresRtree_.clear();\n    }\n\n    this.nullGeometryFeatures_ = {};\n    var clearEvent = new VectorSourceEvent(VectorEventType.CLEAR);\n    this.dispatchEvent(clearEvent);\n    this.changed();\n  };\n  /**\n   * Iterate through all features on the source, calling the provided callback\n   * with each one.  If the callback returns any \"truthy\" value, iteration will\n   * stop and the function will return the same value.\n   * Note: this function only iterate through the feature that have a defined geometry.\n   *\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     on the source.  Return a truthy value to stop iteration.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n\n\n  VectorSource.prototype.forEachFeature = function (callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEach(callback);\n    } else if (this.featuresCollection_) {\n      this.featuresCollection_.forEach(callback);\n    }\n  };\n  /**\n   * Iterate through all features whose geometries contain the provided\n   * coordinate, calling the callback with each feature.  If the callback returns\n   * a \"truthy\" value, iteration will stop and the function will return the same\n   * value.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     whose goemetry contains the provided coordinate.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   */\n\n\n  VectorSource.prototype.forEachFeatureAtCoordinateDirect = function (coordinate, callback) {\n    var extent = [coordinate[0], coordinate[1], coordinate[0], coordinate[1]];\n    return this.forEachFeatureInExtent(extent, function (feature) {\n      var geometry = feature.getGeometry();\n\n      if (geometry.intersectsCoordinate(coordinate)) {\n        return callback(feature);\n      } else {\n        return undefined;\n      }\n    });\n  };\n  /**\n   * Iterate through all features whose bounding box intersects the provided\n   * extent (note that the feature's geometry may not intersect the extent),\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you are interested in features whose geometry intersects an extent, call\n   * the {@link module:ol/source/Vector~VectorSource#forEachFeatureIntersectingExtent #forEachFeatureIntersectingExtent()} method instead.\n   *\n   * When `useSpatialIndex` is set to false, this method will loop through all\n   * features, equivalent to {@link module:ol/source/Vector~VectorSource#forEachFeature #forEachFeature()}.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     whose bounding box intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n\n\n  VectorSource.prototype.forEachFeatureInExtent = function (extent, callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEachInExtent(extent, callback);\n    } else if (this.featuresCollection_) {\n      this.featuresCollection_.forEach(callback);\n    }\n  };\n  /**\n   * Iterate through all features whose geometry intersects the provided extent,\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you only want to test for bounding box intersection, call the\n   * {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent #forEachFeatureInExtent()} method instead.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(import(\"../Feature.js\").default<Geometry>): T} callback Called with each feature\n   *     whose geometry intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n\n\n  VectorSource.prototype.forEachFeatureIntersectingExtent = function (extent, callback) {\n    return this.forEachFeatureInExtent(extent,\n    /**\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     * @return {T|undefined} The return value from the last call to the callback.\n     */\n    function (feature) {\n      var geometry = feature.getGeometry();\n\n      if (geometry.intersectsExtent(extent)) {\n        var result = callback(feature);\n\n        if (result) {\n          return result;\n        }\n      }\n    });\n  };\n  /**\n   * Get the features collection associated with this source. Will be `null`\n   * unless the source was configured with `useSpatialIndex` set to `false`, or\n   * with an {@link module:ol/Collection~Collection} as `features`.\n   * @return {Collection<import(\"../Feature.js\").default<Geometry>>|null} The collection of features.\n   * @api\n   */\n\n\n  VectorSource.prototype.getFeaturesCollection = function () {\n    return this.featuresCollection_;\n  };\n  /**\n   * Get a snapshot of the features currently on the source in random order. The returned array\n   * is a copy, the features are references to the features in the source.\n   * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n   * @api\n   */\n\n\n  VectorSource.prototype.getFeatures = function () {\n    var features;\n\n    if (this.featuresCollection_) {\n      features = this.featuresCollection_.getArray().slice(0);\n    } else if (this.featuresRtree_) {\n      features = this.featuresRtree_.getAll();\n\n      if (!isEmpty(this.nullGeometryFeatures_)) {\n        extend(features, getValues(this.nullGeometryFeatures_));\n      }\n    }\n\n    return (\n      /** @type {Array<import(\"../Feature.js\").default<Geometry>>} */\n      features\n    );\n  };\n  /**\n   * Get all features whose geometry intersects the provided coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n   * @api\n   */\n\n\n  VectorSource.prototype.getFeaturesAtCoordinate = function (coordinate) {\n    var features = [];\n    this.forEachFeatureAtCoordinateDirect(coordinate, function (feature) {\n      features.push(feature);\n    });\n    return features;\n  };\n  /**\n   * Get all features whose bounding box intersects the provided extent.  Note that this returns an array of\n   * all features intersecting the given extent in random order (so it may include\n   * features whose geometries do not intersect the extent).\n   *\n   * When `useSpatialIndex` is set to false, this method will return all\n   * features.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {Array<import(\"../Feature.js\").default<Geometry>>} Features.\n   * @api\n   */\n\n\n  VectorSource.prototype.getFeaturesInExtent = function (extent) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.getInExtent(extent);\n    } else if (this.featuresCollection_) {\n      return this.featuresCollection_.getArray().slice(0);\n    } else {\n      return [];\n    }\n  };\n  /**\n   * Get the closest feature to the provided coordinate.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {function(import(\"../Feature.js\").default<Geometry>):boolean} [opt_filter] Feature filter function.\n   *     The filter function will receive one argument, the {@link module:ol/Feature~Feature feature}\n   *     and it should return a boolean value. By default, no filtering is made.\n   * @return {import(\"../Feature.js\").default<Geometry>} Closest feature.\n   * @api\n   */\n\n\n  VectorSource.prototype.getClosestFeatureToCoordinate = function (coordinate, opt_filter) {\n    // Find the closest feature using branch and bound.  We start searching an\n    // infinite extent, and find the distance from the first feature found.  This\n    // becomes the closest feature.  We then compute a smaller extent which any\n    // closer feature must intersect.  We continue searching with this smaller\n    // extent, trying to find a closer feature.  Every time we find a closer\n    // feature, we update the extent being searched so that any even closer\n    // feature must intersect it.  We continue until we run out of features.\n    var x = coordinate[0];\n    var y = coordinate[1];\n    var closestFeature = null;\n    var closestPoint = [NaN, NaN];\n    var minSquaredDistance = Infinity;\n    var extent = [-Infinity, -Infinity, Infinity, Infinity];\n    var filter = opt_filter ? opt_filter : TRUE;\n    this.featuresRtree_.forEachInExtent(extent,\n    /**\n     * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n     */\n    function (feature) {\n      if (filter(feature)) {\n        var geometry = feature.getGeometry();\n        var previousMinSquaredDistance = minSquaredDistance;\n        minSquaredDistance = geometry.closestPointXY(x, y, closestPoint, minSquaredDistance);\n\n        if (minSquaredDistance < previousMinSquaredDistance) {\n          closestFeature = feature; // This is sneaky.  Reduce the extent that it is currently being\n          // searched while the R-Tree traversal using this same extent object\n          // is still in progress.  This is safe because the new extent is\n          // strictly contained by the old extent.\n\n          var minDistance = Math.sqrt(minSquaredDistance);\n          extent[0] = x - minDistance;\n          extent[1] = y - minDistance;\n          extent[2] = x + minDistance;\n          extent[3] = y + minDistance;\n        }\n      }\n    });\n    return closestFeature;\n  };\n  /**\n   * Get the extent of the features currently in the source.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../extent.js\").Extent} [opt_extent] Destination extent. If provided, no new extent\n   *     will be created. Instead, that extent's coordinates will be overwritten.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n\n\n  VectorSource.prototype.getExtent = function (opt_extent) {\n    return this.featuresRtree_.getExtent(opt_extent);\n  };\n  /**\n   * Get a feature by its identifier (the value returned by feature.getId()).\n   * Note that the index treats string and numeric identifiers as the same.  So\n   * `source.getFeatureById(2)` will return a feature with id `'2'` or `2`.\n   *\n   * @param {string|number} id Feature identifier.\n   * @return {import(\"../Feature.js\").default<Geometry>|null} The feature (or `null` if not found).\n   * @api\n   */\n\n\n  VectorSource.prototype.getFeatureById = function (id) {\n    var feature = this.idIndex_[id.toString()];\n    return feature !== undefined ? feature : null;\n  };\n  /**\n   * Get a feature by its internal unique identifier (using `getUid`).\n   *\n   * @param {string} uid Feature identifier.\n   * @return {import(\"../Feature.js\").default<Geometry>|null} The feature (or `null` if not found).\n   */\n\n\n  VectorSource.prototype.getFeatureByUid = function (uid) {\n    var feature = this.uidIndex_[uid];\n    return feature !== undefined ? feature : null;\n  };\n  /**\n   * Get the format associated with this source.\n   *\n   * @return {import(\"../format/Feature.js\").default|undefined} The feature format.\n   * @api\n   */\n\n\n  VectorSource.prototype.getFormat = function () {\n    return this.format_;\n  };\n  /**\n   * @return {boolean} The source can have overlapping geometries.\n   */\n\n\n  VectorSource.prototype.getOverlaps = function () {\n    return this.overlaps_;\n  };\n  /**\n   * Get the url associated with this source.\n   *\n   * @return {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined} The url.\n   * @api\n   */\n\n\n  VectorSource.prototype.getUrl = function () {\n    return this.url_;\n  };\n  /**\n   * @param {Event} event Event.\n   * @private\n   */\n\n\n  VectorSource.prototype.handleFeatureChange_ = function (event) {\n    var feature =\n    /** @type {import(\"../Feature.js\").default<Geometry>} */\n    event.target;\n    var featureKey = getUid(feature);\n    var geometry = feature.getGeometry();\n\n    if (!geometry) {\n      if (!(featureKey in this.nullGeometryFeatures_)) {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.remove(feature);\n        }\n\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    } else {\n      var extent = geometry.getExtent();\n\n      if (featureKey in this.nullGeometryFeatures_) {\n        delete this.nullGeometryFeatures_[featureKey];\n\n        if (this.featuresRtree_) {\n          this.featuresRtree_.insert(extent, feature);\n        }\n      } else {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.update(extent, feature);\n        }\n      }\n    }\n\n    var id = feature.getId();\n\n    if (id !== undefined) {\n      var sid = id.toString();\n\n      if (this.idIndex_[sid] !== feature) {\n        this.removeFromIdIndex_(feature);\n        this.idIndex_[sid] = feature;\n      }\n    } else {\n      this.removeFromIdIndex_(feature);\n      this.uidIndex_[featureKey] = feature;\n    }\n\n    this.changed();\n    this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE, feature));\n  };\n  /**\n   * Returns true if the feature is contained within the source.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n   * @return {boolean} Has feature.\n   * @api\n   */\n\n\n  VectorSource.prototype.hasFeature = function (feature) {\n    var id = feature.getId();\n\n    if (id !== undefined) {\n      return id in this.idIndex_;\n    } else {\n      return getUid(feature) in this.uidIndex_;\n    }\n  };\n  /**\n   * @return {boolean} Is empty.\n   */\n\n\n  VectorSource.prototype.isEmpty = function () {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.isEmpty() && isEmpty(this.nullGeometryFeatures_);\n    }\n\n    if (this.featuresCollection_) {\n      return this.featuresCollection_.getLength() === 0;\n    }\n\n    return true;\n  };\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   */\n\n\n  VectorSource.prototype.loadFeatures = function (extent, resolution, projection) {\n    var loadedExtentsRtree = this.loadedExtentsRtree_;\n    var extentsToLoad = this.strategy_(extent, resolution, projection);\n\n    var _loop_1 = function _loop_1(i, ii) {\n      var extentToLoad = extentsToLoad[i];\n      var alreadyLoaded = loadedExtentsRtree.forEachInExtent(extentToLoad,\n      /**\n       * @param {{extent: import(\"../extent.js\").Extent}} object Object.\n       * @return {boolean} Contains.\n       */\n      function (object) {\n        return containsExtent(object.extent, extentToLoad);\n      });\n\n      if (!alreadyLoaded) {\n        ++this_1.loadingExtentsCount_;\n        this_1.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART));\n        this_1.loader_.call(this_1, extentToLoad, resolution, projection, function (features) {\n          --this.loadingExtentsCount_;\n          this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND, undefined, features));\n        }.bind(this_1), function () {\n          --this.loadingExtentsCount_;\n          this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR));\n        }.bind(this_1));\n        loadedExtentsRtree.insert(extentToLoad, {\n          extent: extentToLoad.slice()\n        });\n      }\n    };\n\n    var this_1 = this;\n\n    for (var i = 0, ii = extentsToLoad.length; i < ii; ++i) {\n      _loop_1(i, ii);\n    }\n\n    this.loading = this.loader_.length < 4 ? false : this.loadingExtentsCount_ > 0;\n  };\n\n  VectorSource.prototype.refresh = function () {\n    this.clear(true);\n    this.loadedExtentsRtree_.clear();\n\n    _super.prototype.refresh.call(this);\n  };\n  /**\n   * Remove an extent from the list of loaded extents.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n\n\n  VectorSource.prototype.removeLoadedExtent = function (extent) {\n    var loadedExtentsRtree = this.loadedExtentsRtree_;\n    var obj;\n    loadedExtentsRtree.forEachInExtent(extent, function (object) {\n      if (equals(object.extent, extent)) {\n        obj = object;\n        return true;\n      }\n    });\n\n    if (obj) {\n      loadedExtentsRtree.remove(obj);\n    }\n  };\n  /**\n   * Remove a single feature from the source.  If you want to remove all features\n   * at once, use the {@link module:ol/source/Vector~VectorSource#clear #clear()} method\n   * instead.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature to remove.\n   * @api\n   */\n\n\n  VectorSource.prototype.removeFeature = function (feature) {\n    if (!feature) {\n      return;\n    }\n\n    var featureKey = getUid(feature);\n\n    if (featureKey in this.nullGeometryFeatures_) {\n      delete this.nullGeometryFeatures_[featureKey];\n    } else {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.remove(feature);\n      }\n    }\n\n    var result = this.removeFeatureInternal(feature);\n\n    if (result) {\n      this.changed();\n    }\n  };\n  /**\n   * Remove feature without firing a `change` event.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature Feature.\n   * @return {import(\"../Feature.js\").default<Geometry>|undefined} The removed feature\n   *     (or undefined if the feature was not found).\n   * @protected\n   */\n\n\n  VectorSource.prototype.removeFeatureInternal = function (feature) {\n    var featureKey = getUid(feature);\n    var featureChangeKeys = this.featureChangeKeys_[featureKey];\n\n    if (!featureChangeKeys) {\n      return;\n    }\n\n    featureChangeKeys.forEach(unlistenByKey);\n    delete this.featureChangeKeys_[featureKey];\n    var id = feature.getId();\n\n    if (id !== undefined) {\n      delete this.idIndex_[id.toString()];\n    }\n\n    delete this.uidIndex_[featureKey];\n    this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE, feature));\n    return feature;\n  };\n  /**\n   * Remove a feature from the id index.  Called internally when the feature id\n   * may have changed.\n   * @param {import(\"../Feature.js\").default<Geometry>} feature The feature.\n   * @return {boolean} Removed the feature from the index.\n   * @private\n   */\n\n\n  VectorSource.prototype.removeFromIdIndex_ = function (feature) {\n    var removed = false;\n\n    for (var id in this.idIndex_) {\n      if (this.idIndex_[id] === feature) {\n        delete this.idIndex_[id];\n        removed = true;\n        break;\n      }\n    }\n\n    return removed;\n  };\n  /**\n   * Set the new loader of the source. The next render cycle will use the\n   * new loader.\n   * @param {import(\"../featureloader.js\").FeatureLoader} loader The loader to set.\n   * @api\n   */\n\n\n  VectorSource.prototype.setLoader = function (loader) {\n    this.loader_ = loader;\n  };\n  /**\n   * Points the source to a new url. The next render cycle will use the new url.\n   * @param {string|import(\"../featureloader.js\").FeatureUrlFunction} url Url.\n   * @api\n   */\n\n\n  VectorSource.prototype.setUrl = function (url) {\n    assert(this.format_, 7); // `format` must be set when `url` is set\n\n    this.url_ = url;\n    this.setLoader(xhr(url, this.format_));\n  };\n\n  return VectorSource;\n}(Source);\n\nexport default VectorSource;","!function (t, i) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = i() : \"function\" == typeof define && define.amd ? define(i) : (t = t || self).RBush = i();\n}(this, function () {\n  \"use strict\";\n\n  function t(t, r, e, a, h) {\n    !function t(n, r, e, a, h) {\n      for (; a > e;) {\n        if (a - e > 600) {\n          var o = a - e + 1,\n              s = r - e + 1,\n              l = Math.log(o),\n              f = .5 * Math.exp(2 * l / 3),\n              u = .5 * Math.sqrt(l * f * (o - f) / o) * (s - o / 2 < 0 ? -1 : 1),\n              m = Math.max(e, Math.floor(r - s * f / o + u)),\n              c = Math.min(a, Math.floor(r + (o - s) * f / o + u));\n          t(n, r, m, c, h);\n        }\n\n        var p = n[r],\n            d = e,\n            x = a;\n\n        for (i(n, e, r), h(n[a], p) > 0 && i(n, e, a); d < x;) {\n          for (i(n, d, x), d++, x--; h(n[d], p) < 0;) {\n            d++;\n          }\n\n          for (; h(n[x], p) > 0;) {\n            x--;\n          }\n        }\n\n        0 === h(n[e], p) ? i(n, e, x) : i(n, ++x, a), x <= r && (e = x + 1), r <= x && (a = x - 1);\n      }\n    }(t, r, e || 0, a || t.length - 1, h || n);\n  }\n\n  function i(t, i, n) {\n    var r = t[i];\n    t[i] = t[n], t[n] = r;\n  }\n\n  function n(t, i) {\n    return t < i ? -1 : t > i ? 1 : 0;\n  }\n\n  var r = function r(t) {\n    void 0 === t && (t = 9), this._maxEntries = Math.max(4, t), this._minEntries = Math.max(2, Math.ceil(.4 * this._maxEntries)), this.clear();\n  };\n\n  function e(t, i, n) {\n    if (!n) return i.indexOf(t);\n\n    for (var r = 0; r < i.length; r++) {\n      if (n(t, i[r])) return r;\n    }\n\n    return -1;\n  }\n\n  function a(t, i) {\n    h(t, 0, t.children.length, i, t);\n  }\n\n  function h(t, i, n, r, e) {\n    e || (e = p(null)), e.minX = 1 / 0, e.minY = 1 / 0, e.maxX = -1 / 0, e.maxY = -1 / 0;\n\n    for (var a = i; a < n; a++) {\n      var h = t.children[a];\n      o(e, t.leaf ? r(h) : h);\n    }\n\n    return e;\n  }\n\n  function o(t, i) {\n    return t.minX = Math.min(t.minX, i.minX), t.minY = Math.min(t.minY, i.minY), t.maxX = Math.max(t.maxX, i.maxX), t.maxY = Math.max(t.maxY, i.maxY), t;\n  }\n\n  function s(t, i) {\n    return t.minX - i.minX;\n  }\n\n  function l(t, i) {\n    return t.minY - i.minY;\n  }\n\n  function f(t) {\n    return (t.maxX - t.minX) * (t.maxY - t.minY);\n  }\n\n  function u(t) {\n    return t.maxX - t.minX + (t.maxY - t.minY);\n  }\n\n  function m(t, i) {\n    return t.minX <= i.minX && t.minY <= i.minY && i.maxX <= t.maxX && i.maxY <= t.maxY;\n  }\n\n  function c(t, i) {\n    return i.minX <= t.maxX && i.minY <= t.maxY && i.maxX >= t.minX && i.maxY >= t.minY;\n  }\n\n  function p(t) {\n    return {\n      children: t,\n      height: 1,\n      leaf: !0,\n      minX: 1 / 0,\n      minY: 1 / 0,\n      maxX: -1 / 0,\n      maxY: -1 / 0\n    };\n  }\n\n  function d(i, n, r, e, a) {\n    for (var h = [n, r]; h.length;) {\n      if (!((r = h.pop()) - (n = h.pop()) <= e)) {\n        var o = n + Math.ceil((r - n) / e / 2) * e;\n        t(i, o, n, r, a), h.push(n, o, o, r);\n      }\n    }\n  }\n\n  return r.prototype.all = function () {\n    return this._all(this.data, []);\n  }, r.prototype.search = function (t) {\n    var i = this.data,\n        n = [];\n    if (!c(t, i)) return n;\n\n    for (var r = this.toBBox, e = []; i;) {\n      for (var a = 0; a < i.children.length; a++) {\n        var h = i.children[a],\n            o = i.leaf ? r(h) : h;\n        c(t, o) && (i.leaf ? n.push(h) : m(t, o) ? this._all(h, n) : e.push(h));\n      }\n\n      i = e.pop();\n    }\n\n    return n;\n  }, r.prototype.collides = function (t) {\n    var i = this.data;\n    if (!c(t, i)) return !1;\n\n    for (var n = []; i;) {\n      for (var r = 0; r < i.children.length; r++) {\n        var e = i.children[r],\n            a = i.leaf ? this.toBBox(e) : e;\n\n        if (c(t, a)) {\n          if (i.leaf || m(t, a)) return !0;\n          n.push(e);\n        }\n      }\n\n      i = n.pop();\n    }\n\n    return !1;\n  }, r.prototype.load = function (t) {\n    if (!t || !t.length) return this;\n\n    if (t.length < this._minEntries) {\n      for (var i = 0; i < t.length; i++) {\n        this.insert(t[i]);\n      }\n\n      return this;\n    }\n\n    var n = this._build(t.slice(), 0, t.length - 1, 0);\n\n    if (this.data.children.length) {\n      if (this.data.height === n.height) this._splitRoot(this.data, n);else {\n        if (this.data.height < n.height) {\n          var r = this.data;\n          this.data = n, n = r;\n        }\n\n        this._insert(n, this.data.height - n.height - 1, !0);\n      }\n    } else this.data = n;\n    return this;\n  }, r.prototype.insert = function (t) {\n    return t && this._insert(t, this.data.height - 1), this;\n  }, r.prototype.clear = function () {\n    return this.data = p([]), this;\n  }, r.prototype.remove = function (t, i) {\n    if (!t) return this;\n\n    for (var n, r, a, h = this.data, o = this.toBBox(t), s = [], l = []; h || s.length;) {\n      if (h || (h = s.pop(), r = s[s.length - 1], n = l.pop(), a = !0), h.leaf) {\n        var f = e(t, h.children, i);\n        if (-1 !== f) return h.children.splice(f, 1), s.push(h), this._condense(s), this;\n      }\n\n      a || h.leaf || !m(h, o) ? r ? (n++, h = r.children[n], a = !1) : h = null : (s.push(h), l.push(n), n = 0, r = h, h = h.children[0]);\n    }\n\n    return this;\n  }, r.prototype.toBBox = function (t) {\n    return t;\n  }, r.prototype.compareMinX = function (t, i) {\n    return t.minX - i.minX;\n  }, r.prototype.compareMinY = function (t, i) {\n    return t.minY - i.minY;\n  }, r.prototype.toJSON = function () {\n    return this.data;\n  }, r.prototype.fromJSON = function (t) {\n    return this.data = t, this;\n  }, r.prototype._all = function (t, i) {\n    for (var n = []; t;) {\n      t.leaf ? i.push.apply(i, t.children) : n.push.apply(n, t.children), t = n.pop();\n    }\n\n    return i;\n  }, r.prototype._build = function (t, i, n, r) {\n    var e,\n        h = n - i + 1,\n        o = this._maxEntries;\n    if (h <= o) return a(e = p(t.slice(i, n + 1)), this.toBBox), e;\n    r || (r = Math.ceil(Math.log(h) / Math.log(o)), o = Math.ceil(h / Math.pow(o, r - 1))), (e = p([])).leaf = !1, e.height = r;\n    var s = Math.ceil(h / o),\n        l = s * Math.ceil(Math.sqrt(o));\n    d(t, i, n, l, this.compareMinX);\n\n    for (var f = i; f <= n; f += l) {\n      var u = Math.min(f + l - 1, n);\n      d(t, f, u, s, this.compareMinY);\n\n      for (var m = f; m <= u; m += s) {\n        var c = Math.min(m + s - 1, u);\n        e.children.push(this._build(t, m, c, r - 1));\n      }\n    }\n\n    return a(e, this.toBBox), e;\n  }, r.prototype._chooseSubtree = function (t, i, n, r) {\n    for (; r.push(i), !i.leaf && r.length - 1 !== n;) {\n      for (var e = 1 / 0, a = 1 / 0, h = void 0, o = 0; o < i.children.length; o++) {\n        var s = i.children[o],\n            l = f(s),\n            u = (m = t, c = s, (Math.max(c.maxX, m.maxX) - Math.min(c.minX, m.minX)) * (Math.max(c.maxY, m.maxY) - Math.min(c.minY, m.minY)) - l);\n        u < a ? (a = u, e = l < e ? l : e, h = s) : u === a && l < e && (e = l, h = s);\n      }\n\n      i = h || i.children[0];\n    }\n\n    var m, c;\n    return i;\n  }, r.prototype._insert = function (t, i, n) {\n    var r = n ? t : this.toBBox(t),\n        e = [],\n        a = this._chooseSubtree(r, this.data, i, e);\n\n    for (a.children.push(t), o(a, r); i >= 0 && e[i].children.length > this._maxEntries;) {\n      this._split(e, i), i--;\n    }\n\n    this._adjustParentBBoxes(r, e, i);\n  }, r.prototype._split = function (t, i) {\n    var n = t[i],\n        r = n.children.length,\n        e = this._minEntries;\n\n    this._chooseSplitAxis(n, e, r);\n\n    var h = this._chooseSplitIndex(n, e, r),\n        o = p(n.children.splice(h, n.children.length - h));\n\n    o.height = n.height, o.leaf = n.leaf, a(n, this.toBBox), a(o, this.toBBox), i ? t[i - 1].children.push(o) : this._splitRoot(n, o);\n  }, r.prototype._splitRoot = function (t, i) {\n    this.data = p([t, i]), this.data.height = t.height + 1, this.data.leaf = !1, a(this.data, this.toBBox);\n  }, r.prototype._chooseSplitIndex = function (t, i, n) {\n    for (var r, e, a, o, s, l, u, m = 1 / 0, c = 1 / 0, p = i; p <= n - i; p++) {\n      var d = h(t, 0, p, this.toBBox),\n          x = h(t, p, n, this.toBBox),\n          v = (e = d, a = x, o = void 0, s = void 0, l = void 0, u = void 0, o = Math.max(e.minX, a.minX), s = Math.max(e.minY, a.minY), l = Math.min(e.maxX, a.maxX), u = Math.min(e.maxY, a.maxY), Math.max(0, l - o) * Math.max(0, u - s)),\n          M = f(d) + f(x);\n      v < m ? (m = v, r = p, c = M < c ? M : c) : v === m && M < c && (c = M, r = p);\n    }\n\n    return r || n - i;\n  }, r.prototype._chooseSplitAxis = function (t, i, n) {\n    var r = t.leaf ? this.compareMinX : s,\n        e = t.leaf ? this.compareMinY : l;\n    this._allDistMargin(t, i, n, r) < this._allDistMargin(t, i, n, e) && t.children.sort(r);\n  }, r.prototype._allDistMargin = function (t, i, n, r) {\n    t.children.sort(r);\n\n    for (var e = this.toBBox, a = h(t, 0, i, e), s = h(t, n - i, n, e), l = u(a) + u(s), f = i; f < n - i; f++) {\n      var m = t.children[f];\n      o(a, t.leaf ? e(m) : m), l += u(a);\n    }\n\n    for (var c = n - i - 1; c >= i; c--) {\n      var p = t.children[c];\n      o(s, t.leaf ? e(p) : p), l += u(s);\n    }\n\n    return l;\n  }, r.prototype._adjustParentBBoxes = function (t, i, n) {\n    for (var r = n; r >= 0; r--) {\n      o(i[r], t);\n    }\n  }, r.prototype._condense = function (t) {\n    for (var i = t.length - 1, n = void 0; i >= 0; i--) {\n      0 === t[i].children.length ? i > 0 ? (n = t[i - 1].children).splice(n.indexOf(t[i]), 1) : this.clear() : a(t[i], this.toBBox);\n    }\n  }, r;\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _scrollLink = require('../mixins/scroll-link');\n\nvar _scrollLink2 = _interopRequireDefault(_scrollLink);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar ButtonElement = function (_React$Component) {\n  _inherits(ButtonElement, _React$Component);\n\n  function ButtonElement() {\n    _classCallCheck(this, ButtonElement);\n\n    return _possibleConstructorReturn(this, (ButtonElement.__proto__ || Object.getPrototypeOf(ButtonElement)).apply(this, arguments));\n  }\n\n  _createClass(ButtonElement, [{\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement('input', this.props, this.props.children);\n    }\n  }]);\n\n  return ButtonElement;\n}(_react2.default.Component);\n\n;\nexports.default = (0, _scrollLink2.default)(ButtonElement);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _scrollElement = require('../mixins/scroll-element');\n\nvar _scrollElement2 = _interopRequireDefault(_scrollElement);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar ElementWrapper = function (_React$Component) {\n  _inherits(ElementWrapper, _React$Component);\n\n  function ElementWrapper() {\n    _classCallCheck(this, ElementWrapper);\n\n    return _possibleConstructorReturn(this, (ElementWrapper.__proto__ || Object.getPrototypeOf(ElementWrapper)).apply(this, arguments));\n  }\n\n  _createClass(ElementWrapper, [{\n    key: 'render',\n    value: function render() {\n      var _this2 = this; // Remove `parentBindings` from props\n\n\n      var newProps = _extends({}, this.props);\n\n      if (newProps.parentBindings) {\n        delete newProps.parentBindings;\n      }\n\n      return _react2.default.createElement('div', _extends({}, newProps, {\n        ref: function ref(el) {\n          _this2.props.parentBindings.domNode = el;\n        }\n      }), this.props.children);\n    }\n  }]);\n\n  return ElementWrapper;\n}(_react2.default.Component);\n\n;\nElementWrapper.propTypes = {\n  name: _propTypes2.default.string,\n  id: _propTypes2.default.string\n};\nexports.default = (0, _scrollElement2.default)(ElementWrapper);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _scrollLink = require('../mixins/scroll-link');\n\nvar _scrollLink2 = _interopRequireDefault(_scrollLink);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar LinkElement = function (_React$Component) {\n  _inherits(LinkElement, _React$Component);\n\n  function LinkElement() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, LinkElement);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = LinkElement.__proto__ || Object.getPrototypeOf(LinkElement)).call.apply(_ref, [this].concat(args))), _this), _this.render = function () {\n      return _react2.default.createElement('a', _this.props, _this.props.children);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  return LinkElement;\n}(_react2.default.Component);\n\n;\nexports.default = (0, _scrollLink2.default)(LinkElement);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Helpers = exports.ScrollElement = exports.ScrollLink = exports.animateScroll = exports.scrollSpy = exports.Events = exports.scroller = exports.Element = exports.Button = exports.Link = undefined;\n\nvar _Link = require('./components/Link.js');\n\nvar _Link2 = _interopRequireDefault(_Link);\n\nvar _Button = require('./components/Button.js');\n\nvar _Button2 = _interopRequireDefault(_Button);\n\nvar _Element = require('./components/Element.js');\n\nvar _Element2 = _interopRequireDefault(_Element);\n\nvar _scroller = require('./mixins/scroller.js');\n\nvar _scroller2 = _interopRequireDefault(_scroller);\n\nvar _scrollEvents = require('./mixins/scroll-events.js');\n\nvar _scrollEvents2 = _interopRequireDefault(_scrollEvents);\n\nvar _scrollSpy = require('./mixins/scroll-spy.js');\n\nvar _scrollSpy2 = _interopRequireDefault(_scrollSpy);\n\nvar _animateScroll = require('./mixins/animate-scroll.js');\n\nvar _animateScroll2 = _interopRequireDefault(_animateScroll);\n\nvar _scrollLink = require('./mixins/scroll-link.js');\n\nvar _scrollLink2 = _interopRequireDefault(_scrollLink);\n\nvar _scrollElement = require('./mixins/scroll-element.js');\n\nvar _scrollElement2 = _interopRequireDefault(_scrollElement);\n\nvar _Helpers = require('./mixins/Helpers.js');\n\nvar _Helpers2 = _interopRequireDefault(_Helpers);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.Link = _Link2.default;\nexports.Button = _Button2.default;\nexports.Element = _Element2.default;\nexports.scroller = _scroller2.default;\nexports.Events = _scrollEvents2.default;\nexports.scrollSpy = _scrollSpy2.default;\nexports.animateScroll = _animateScroll2.default;\nexports.ScrollLink = _scrollLink2.default;\nexports.ScrollElement = _scrollElement2.default;\nexports.Helpers = _Helpers2.default;\nexports.default = {\n  Link: _Link2.default,\n  Button: _Button2.default,\n  Element: _Element2.default,\n  scroller: _scroller2.default,\n  Events: _scrollEvents2.default,\n  scrollSpy: _scrollSpy2.default,\n  animateScroll: _animateScroll2.default,\n  ScrollLink: _scrollLink2.default,\n  ScrollElement: _scrollElement2.default,\n  Helpers: _Helpers2.default\n};","\"use strict\";\n/* DEPRECATED */\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar React = require('react');\n\nvar ReactDOM = require('react-dom');\n\nvar utils = require('./utils');\n\nvar scrollSpy = require('./scroll-spy');\n\nvar defaultScroller = require('./scroller');\n\nvar PropTypes = require('prop-types');\n\nvar scrollHash = require('./scroll-hash');\n\nvar protoTypes = {\n  to: PropTypes.string.isRequired,\n  containerId: PropTypes.string,\n  container: PropTypes.object,\n  activeClass: PropTypes.string,\n  spy: PropTypes.bool,\n  smooth: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  offset: PropTypes.number,\n  delay: PropTypes.number,\n  isDynamic: PropTypes.bool,\n  onClick: PropTypes.func,\n  duration: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\n  absolute: PropTypes.bool,\n  onSetActive: PropTypes.func,\n  onSetInactive: PropTypes.func,\n  ignoreCancelEvents: PropTypes.bool,\n  hashSpy: PropTypes.bool,\n  spyThrottle: PropTypes.number\n};\nvar Helpers = {\n  Scroll: function Scroll(Component, customScroller) {\n    console.warn(\"Helpers.Scroll is deprecated since v1.7.0\");\n    var scroller = customScroller || defaultScroller;\n\n    var Scroll = function (_React$Component) {\n      _inherits(Scroll, _React$Component);\n\n      function Scroll(props) {\n        _classCallCheck(this, Scroll);\n\n        var _this = _possibleConstructorReturn(this, (Scroll.__proto__ || Object.getPrototypeOf(Scroll)).call(this, props));\n\n        _initialiseProps.call(_this);\n\n        _this.state = {\n          active: false\n        };\n        return _this;\n      }\n\n      _createClass(Scroll, [{\n        key: 'getScrollSpyContainer',\n        value: function getScrollSpyContainer() {\n          var containerId = this.props.containerId;\n          var container = this.props.container;\n\n          if (containerId) {\n            return document.getElementById(containerId);\n          }\n\n          if (container && container.nodeType) {\n            return container;\n          }\n\n          return document;\n        }\n      }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n          if (this.props.spy || this.props.hashSpy) {\n            var scrollSpyContainer = this.getScrollSpyContainer();\n\n            if (!scrollSpy.isMounted(scrollSpyContainer)) {\n              scrollSpy.mount(scrollSpyContainer, this.props.spyThrottle);\n            }\n\n            if (this.props.hashSpy) {\n              if (!scrollHash.isMounted()) {\n                scrollHash.mount(scroller);\n              }\n\n              scrollHash.mapContainer(this.props.to, scrollSpyContainer);\n            }\n\n            if (this.props.spy) {\n              scrollSpy.addStateHandler(this.stateHandler);\n            }\n\n            scrollSpy.addSpyHandler(this.spyHandler, scrollSpyContainer);\n            this.setState({\n              container: scrollSpyContainer\n            });\n          }\n        }\n      }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n          scrollSpy.unmount(this.stateHandler, this.spyHandler);\n        }\n      }, {\n        key: 'render',\n        value: function render() {\n          var className = \"\";\n\n          if (this.state && this.state.active) {\n            className = ((this.props.className || \"\") + \" \" + (this.props.activeClass || \"active\")).trim();\n          } else {\n            className = this.props.className;\n          }\n\n          var props = _extends({}, this.props);\n\n          for (var prop in protoTypes) {\n            if (props.hasOwnProperty(prop)) {\n              delete props[prop];\n            }\n          }\n\n          props.className = className;\n          props.onClick = this.handleClick;\n          return React.createElement(Component, props);\n        }\n      }]);\n\n      return Scroll;\n    }(React.Component);\n\n    var _initialiseProps = function _initialiseProps() {\n      var _this2 = this;\n\n      this.scrollTo = function (to, props) {\n        scroller.scrollTo(to, _extends({}, _this2.state, props));\n      };\n\n      this.handleClick = function (event) {\n        /*\r\n         * give the posibility to override onClick\r\n         */\n        if (_this2.props.onClick) {\n          _this2.props.onClick(event);\n        }\n        /*\r\n         * dont bubble the navigation\r\n         */\n\n\n        if (event.stopPropagation) event.stopPropagation();\n        if (event.preventDefault) event.preventDefault();\n        /*\r\n         * do the magic!\r\n         */\n\n        _this2.scrollTo(_this2.props.to, _this2.props);\n      };\n\n      this.stateHandler = function () {\n        if (scroller.getActiveLink() !== _this2.props.to) {\n          if (_this2.state !== null && _this2.state.active && _this2.props.onSetInactive) {\n            _this2.props.onSetInactive();\n          }\n\n          _this2.setState({\n            active: false\n          });\n        }\n      };\n\n      this.spyHandler = function (y) {\n        var scrollSpyContainer = _this2.getScrollSpyContainer();\n\n        if (scrollHash.isMounted() && !scrollHash.isInitialized()) {\n          return;\n        }\n\n        var to = _this2.props.to;\n        var element = null;\n        var elemTopBound = 0;\n        var elemBottomBound = 0;\n        var containerTop = 0;\n\n        if (scrollSpyContainer.getBoundingClientRect) {\n          var containerCords = scrollSpyContainer.getBoundingClientRect();\n          containerTop = containerCords.top;\n        }\n\n        if (!element || _this2.props.isDynamic) {\n          element = scroller.get(to);\n\n          if (!element) {\n            return;\n          }\n\n          var cords = element.getBoundingClientRect();\n          elemTopBound = cords.top - containerTop + y;\n          elemBottomBound = elemTopBound + cords.height;\n        }\n\n        var offsetY = y - _this2.props.offset;\n        var isInside = offsetY >= Math.floor(elemTopBound) && offsetY < Math.floor(elemBottomBound);\n        var isOutside = offsetY < Math.floor(elemTopBound) || offsetY >= Math.floor(elemBottomBound);\n        var activeLink = scroller.getActiveLink();\n\n        if (isOutside) {\n          if (to === activeLink) {\n            scroller.setActiveLink(void 0);\n          }\n\n          if (_this2.props.hashSpy && scrollHash.getHash() === to) {\n            scrollHash.changeHash();\n          }\n\n          if (_this2.props.spy && _this2.state.active) {\n            _this2.setState({\n              active: false\n            });\n\n            _this2.props.onSetInactive && _this2.props.onSetInactive();\n          }\n\n          return scrollSpy.updateStates();\n        }\n\n        if (isInside && activeLink !== to) {\n          scroller.setActiveLink(to);\n          _this2.props.hashSpy && scrollHash.changeHash(to);\n\n          if (_this2.props.spy) {\n            _this2.setState({\n              active: true\n            });\n\n            _this2.props.onSetActive && _this2.props.onSetActive(to);\n          }\n\n          return scrollSpy.updateStates();\n        }\n      };\n    };\n\n    ;\n    Scroll.propTypes = protoTypes;\n    Scroll.defaultProps = {\n      offset: 0\n    };\n    return Scroll;\n  },\n  Element: function Element(Component) {\n    console.warn(\"Helpers.Element is deprecated since v1.7.0\");\n\n    var Element = function (_React$Component2) {\n      _inherits(Element, _React$Component2);\n\n      function Element(props) {\n        _classCallCheck(this, Element);\n\n        var _this3 = _possibleConstructorReturn(this, (Element.__proto__ || Object.getPrototypeOf(Element)).call(this, props));\n\n        _this3.childBindings = {\n          domNode: null\n        };\n        return _this3;\n      }\n\n      _createClass(Element, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n          if (typeof window === 'undefined') {\n            return false;\n          }\n\n          this.registerElems(this.props.name);\n        }\n      }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n          if (this.props.name !== prevProps.name) {\n            this.registerElems(this.props.name);\n          }\n        }\n      }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n          if (typeof window === 'undefined') {\n            return false;\n          }\n\n          defaultScroller.unregister(this.props.name);\n        }\n      }, {\n        key: 'registerElems',\n        value: function registerElems(name) {\n          defaultScroller.register(name, this.childBindings.domNode);\n        }\n      }, {\n        key: 'render',\n        value: function render() {\n          return React.createElement(Component, _extends({}, this.props, {\n            parentBindings: this.childBindings\n          }));\n        }\n      }]);\n\n      return Element;\n    }(React.Component);\n\n    ;\n    Element.propTypes = {\n      name: PropTypes.string,\n      id: PropTypes.string\n    };\n    return Element;\n  }\n};\nmodule.exports = Helpers;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _smooth = require('./smooth');\n\nvar _smooth2 = _interopRequireDefault(_smooth);\n\nvar _cancelEvents = require('./cancel-events');\n\nvar _cancelEvents2 = _interopRequireDefault(_cancelEvents);\n\nvar _scrollEvents = require('./scroll-events');\n\nvar _scrollEvents2 = _interopRequireDefault(_scrollEvents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/*\r\n * Gets the easing type from the smooth prop within options.\r\n */\n\n\nvar getAnimationType = function getAnimationType(options) {\n  return _smooth2.default[options.smooth] || _smooth2.default.defaultEasing;\n};\n/*\r\n * Function helper\r\n */\n\n\nvar functionWrapper = function functionWrapper(value) {\n  return typeof value === 'function' ? value : function () {\n    return value;\n  };\n};\n/*\r\n * Wraps window properties to allow server side rendering\r\n */\n\n\nvar currentWindowProperties = function currentWindowProperties() {\n  if (typeof window !== 'undefined') {\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame;\n  }\n};\n/*\r\n * Helper function to never extend 60fps on the webpage.\r\n */\n\n\nvar requestAnimationFrameHelper = function () {\n  return currentWindowProperties() || function (callback, element, delay) {\n    window.setTimeout(callback, delay || 1000 / 60, new Date().getTime());\n  };\n}();\n\nvar makeData = function makeData() {\n  return {\n    currentPosition: 0,\n    startPosition: 0,\n    targetPosition: 0,\n    progress: 0,\n    duration: 0,\n    cancel: false,\n    target: null,\n    containerElement: null,\n    to: null,\n    start: null,\n    delta: null,\n    percent: null,\n    delayTimeout: null\n  };\n};\n\nvar currentPositionX = function currentPositionX(options) {\n  var containerElement = options.data.containerElement;\n\n  if (containerElement && containerElement !== document && containerElement !== document.body) {\n    return containerElement.scrollLeft;\n  } else {\n    var supportPageOffset = window.pageXOffset !== undefined;\n    var isCSS1Compat = (document.compatMode || \"\") === \"CSS1Compat\";\n    return supportPageOffset ? window.pageXOffset : isCSS1Compat ? document.documentElement.scrollLeft : document.body.scrollLeft;\n  }\n};\n\nvar currentPositionY = function currentPositionY(options) {\n  var containerElement = options.data.containerElement;\n\n  if (containerElement && containerElement !== document && containerElement !== document.body) {\n    return containerElement.scrollTop;\n  } else {\n    var supportPageOffset = window.pageXOffset !== undefined;\n    var isCSS1Compat = (document.compatMode || \"\") === \"CSS1Compat\";\n    return supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop;\n  }\n};\n\nvar scrollContainerWidth = function scrollContainerWidth(options) {\n  var containerElement = options.data.containerElement;\n\n  if (containerElement && containerElement !== document && containerElement !== document.body) {\n    return containerElement.scrollWidth - containerElement.offsetWidth;\n  } else {\n    var body = document.body;\n    var html = document.documentElement;\n    return Math.max(body.scrollWidth, body.offsetWidth, html.clientWidth, html.scrollWidth, html.offsetWidth);\n  }\n};\n\nvar scrollContainerHeight = function scrollContainerHeight(options) {\n  var containerElement = options.data.containerElement;\n\n  if (containerElement && containerElement !== document && containerElement !== document.body) {\n    return containerElement.scrollHeight - containerElement.offsetHeight;\n  } else {\n    var body = document.body;\n    var html = document.documentElement;\n    return Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n  }\n};\n\nvar animateScroll = function animateScroll(easing, options, timestamp) {\n  var data = options.data; // Cancel on specific events\n\n  if (!options.ignoreCancelEvents && data.cancel) {\n    if (_scrollEvents2.default.registered['end']) {\n      _scrollEvents2.default.registered['end'](data.to, data.target, data.currentPositionY);\n    }\n\n    return;\n  }\n\n  ;\n  data.delta = Math.round(data.targetPosition - data.startPosition);\n\n  if (data.start === null) {\n    data.start = timestamp;\n  }\n\n  data.progress = timestamp - data.start;\n  data.percent = data.progress >= data.duration ? 1 : easing(data.progress / data.duration);\n  data.currentPosition = data.startPosition + Math.ceil(data.delta * data.percent);\n\n  if (data.containerElement && data.containerElement !== document && data.containerElement !== document.body) {\n    if (options.horizontal) {\n      data.containerElement.scrollLeft = data.currentPosition;\n    } else {\n      data.containerElement.scrollTop = data.currentPosition;\n    }\n  } else {\n    if (options.horizontal) {\n      window.scrollTo(data.currentPosition, 0);\n    } else {\n      window.scrollTo(0, data.currentPosition);\n    }\n  }\n\n  if (data.percent < 1) {\n    var easedAnimate = animateScroll.bind(null, easing, options);\n    requestAnimationFrameHelper.call(window, easedAnimate);\n    return;\n  }\n\n  if (_scrollEvents2.default.registered['end']) {\n    _scrollEvents2.default.registered['end'](data.to, data.target, data.currentPosition);\n  }\n};\n\nvar setContainer = function setContainer(options) {\n  options.data.containerElement = !options ? null : options.containerId ? document.getElementById(options.containerId) : options.container && options.container.nodeType ? options.container : document;\n};\n\nvar animateTopScroll = function animateTopScroll(scrollOffset, options, to, target) {\n  options.data = options.data || makeData();\n  window.clearTimeout(options.data.delayTimeout);\n\n  _cancelEvents2.default.subscribe(function () {\n    options.data.cancel = true;\n  });\n\n  setContainer(options);\n  options.data.start = null;\n  options.data.cancel = false;\n  options.data.startPosition = options.horizontal ? currentPositionX(options) : currentPositionY(options);\n  options.data.targetPosition = options.absolute ? scrollOffset : scrollOffset + options.data.startPosition;\n\n  if (options.data.startPosition === options.data.targetPosition) {\n    if (_scrollEvents2.default.registered['end']) {\n      _scrollEvents2.default.registered['end'](options.data.to, options.data.target, options.data.currentPosition);\n    }\n\n    return;\n  }\n\n  options.data.delta = Math.round(options.data.targetPosition - options.data.startPosition);\n  options.data.duration = functionWrapper(options.duration)(options.data.delta);\n  options.data.duration = isNaN(parseFloat(options.data.duration)) ? 1000 : parseFloat(options.data.duration);\n  options.data.to = to;\n  options.data.target = target;\n  var easing = getAnimationType(options);\n  var easedAnimate = animateScroll.bind(null, easing, options);\n\n  if (options && options.delay > 0) {\n    options.data.delayTimeout = window.setTimeout(function () {\n      if (_scrollEvents2.default.registered['begin']) {\n        _scrollEvents2.default.registered['begin'](options.data.to, options.data.target);\n      }\n\n      requestAnimationFrameHelper.call(window, easedAnimate);\n    }, options.delay);\n    return;\n  }\n\n  if (_scrollEvents2.default.registered['begin']) {\n    _scrollEvents2.default.registered['begin'](options.data.to, options.data.target);\n  }\n\n  requestAnimationFrameHelper.call(window, easedAnimate);\n};\n\nvar proceedOptions = function proceedOptions(options) {\n  options = _extends({}, options);\n  options.data = options.data || makeData();\n  options.absolute = true;\n  return options;\n};\n\nvar scrollToTop = function scrollToTop(options) {\n  animateTopScroll(0, proceedOptions(options));\n};\n\nvar scrollTo = function scrollTo(toPosition, options) {\n  animateTopScroll(toPosition, proceedOptions(options));\n};\n\nvar scrollToBottom = function scrollToBottom(options) {\n  options = proceedOptions(options);\n  setContainer(options);\n  animateTopScroll(options.horizontal ? scrollContainerWidth(options) : scrollContainerHeight(options), options);\n};\n\nvar scrollMore = function scrollMore(toPosition, options) {\n  options = proceedOptions(options);\n  setContainer(options);\n  var currentPosition = options.horizontal ? currentPositionX(options) : currentPositionY(options);\n  animateTopScroll(toPosition + currentPosition, options);\n};\n\nexports.default = {\n  animateTopScroll: animateTopScroll,\n  getAnimationType: getAnimationType,\n  scrollToTop: scrollToTop,\n  scrollToBottom: scrollToBottom,\n  scrollTo: scrollTo,\n  scrollMore: scrollMore\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _passiveEventListeners = require('./passive-event-listeners');\n\nvar events = ['mousedown', 'mousewheel', 'touchmove', 'keydown'];\nexports.default = {\n  subscribe: function subscribe(cancelEvent) {\n    return typeof document !== 'undefined' && events.forEach(function (event) {\n      return (0, _passiveEventListeners.addPassiveEventListener)(document, event, cancelEvent);\n    });\n  }\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/*\r\n * Tell the browser that the event listener won't prevent a scroll.\r\n * Allowing the browser to continue scrolling without having to\r\n * to wait for the listener to return.\r\n */\n\nvar addPassiveEventListener = exports.addPassiveEventListener = function addPassiveEventListener(target, eventName, listener) {\n  var supportsPassiveOption = function () {\n    var supportsPassiveOption = false;\n\n    try {\n      var opts = Object.defineProperty({}, 'passive', {\n        get: function get() {\n          supportsPassiveOption = true;\n        }\n      });\n      window.addEventListener('test', null, opts);\n    } catch (e) {}\n\n    return supportsPassiveOption;\n  }();\n\n  target.addEventListener(eventName, listener, supportsPassiveOption ? {\n    passive: true\n  } : false);\n};\n\nvar removePassiveEventListener = exports.removePassiveEventListener = function removePassiveEventListener(target, eventName, listener) {\n  target.removeEventListener(eventName, listener);\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _scroller = require('./scroller');\n\nvar _scroller2 = _interopRequireDefault(_scroller);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nexports.default = function (Component) {\n  var Element = function (_React$Component) {\n    _inherits(Element, _React$Component);\n\n    function Element(props) {\n      _classCallCheck(this, Element);\n\n      var _this = _possibleConstructorReturn(this, (Element.__proto__ || Object.getPrototypeOf(Element)).call(this, props));\n\n      _this.childBindings = {\n        domNode: null\n      };\n      return _this;\n    }\n\n    _createClass(Element, [{\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        if (typeof window === 'undefined') {\n          return false;\n        }\n\n        this.registerElems(this.props.name);\n      }\n    }, {\n      key: 'componentDidUpdate',\n      value: function componentDidUpdate(prevProps) {\n        if (this.props.name !== prevProps.name) {\n          this.registerElems(this.props.name);\n        }\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        if (typeof window === 'undefined') {\n          return false;\n        }\n\n        _scroller2.default.unregister(this.props.name);\n      }\n    }, {\n      key: 'registerElems',\n      value: function registerElems(name) {\n        _scroller2.default.register(name, this.childBindings.domNode);\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return _react2.default.createElement(Component, _extends({}, this.props, {\n          parentBindings: this.childBindings\n        }));\n      }\n    }]);\n\n    return Element;\n  }(_react2.default.Component);\n\n  ;\n  Element.propTypes = {\n    name: _propTypes2.default.string,\n    id: _propTypes2.default.string\n  };\n  return Element;\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Events = {\n  registered: {},\n  scrollEvent: {\n    register: function register(evtName, callback) {\n      Events.registered[evtName] = callback;\n    },\n    remove: function remove(evtName) {\n      Events.registered[evtName] = null;\n    }\n  }\n};\nexports.default = Events;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _passiveEventListeners = require('./passive-event-listeners');\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar scrollHash = {\n  mountFlag: false,\n  initialized: false,\n  scroller: null,\n  containers: {},\n  mount: function mount(scroller) {\n    this.scroller = scroller;\n    this.handleHashChange = this.handleHashChange.bind(this);\n    window.addEventListener('hashchange', this.handleHashChange);\n    this.initStateFromHash();\n    this.mountFlag = true;\n  },\n  mapContainer: function mapContainer(to, container) {\n    this.containers[to] = container;\n  },\n  isMounted: function isMounted() {\n    return this.mountFlag;\n  },\n  isInitialized: function isInitialized() {\n    return this.initialized;\n  },\n  initStateFromHash: function initStateFromHash() {\n    var _this = this;\n\n    var hash = this.getHash();\n\n    if (hash) {\n      window.setTimeout(function () {\n        _this.scrollTo(hash, true);\n\n        _this.initialized = true;\n      }, 10);\n    } else {\n      this.initialized = true;\n    }\n  },\n  scrollTo: function scrollTo(to, isInit) {\n    var scroller = this.scroller;\n    var element = scroller.get(to);\n\n    if (element && (isInit || to !== scroller.getActiveLink())) {\n      var container = this.containers[to] || document;\n      scroller.scrollTo(to, {\n        container: container\n      });\n    }\n  },\n  getHash: function getHash() {\n    return _utils2.default.getHash();\n  },\n  changeHash: function changeHash(to, saveHashHistory) {\n    if (this.isInitialized() && _utils2.default.getHash() !== to) {\n      _utils2.default.updateHash(to, saveHashHistory);\n    }\n  },\n  handleHashChange: function handleHashChange() {\n    this.scrollTo(this.getHash());\n  },\n  unmount: function unmount() {\n    this.scroller = null;\n    this.containers = null;\n    window.removeEventListener('hashchange', this.handleHashChange);\n  }\n};\nexports.default = scrollHash;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _scrollSpy = require('./scroll-spy');\n\nvar _scrollSpy2 = _interopRequireDefault(_scrollSpy);\n\nvar _scroller = require('./scroller');\n\nvar _scroller2 = _interopRequireDefault(_scroller);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _scrollHash = require('./scroll-hash');\n\nvar _scrollHash2 = _interopRequireDefault(_scrollHash);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar protoTypes = {\n  to: _propTypes2.default.string.isRequired,\n  containerId: _propTypes2.default.string,\n  container: _propTypes2.default.object,\n  activeClass: _propTypes2.default.string,\n  spy: _propTypes2.default.bool,\n  horizontal: _propTypes2.default.bool,\n  smooth: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.string]),\n  offset: _propTypes2.default.number,\n  delay: _propTypes2.default.number,\n  isDynamic: _propTypes2.default.bool,\n  onClick: _propTypes2.default.func,\n  duration: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.func]),\n  absolute: _propTypes2.default.bool,\n  onSetActive: _propTypes2.default.func,\n  onSetInactive: _propTypes2.default.func,\n  ignoreCancelEvents: _propTypes2.default.bool,\n  hashSpy: _propTypes2.default.bool,\n  saveHashHistory: _propTypes2.default.bool,\n  spyThrottle: _propTypes2.default.number\n};\n\nexports.default = function (Component, customScroller) {\n  var scroller = customScroller || _scroller2.default;\n\n  var Link = function (_React$PureComponent) {\n    _inherits(Link, _React$PureComponent);\n\n    function Link(props) {\n      _classCallCheck(this, Link);\n\n      var _this = _possibleConstructorReturn(this, (Link.__proto__ || Object.getPrototypeOf(Link)).call(this, props));\n\n      _initialiseProps.call(_this);\n\n      _this.state = {\n        active: false\n      };\n      return _this;\n    }\n\n    _createClass(Link, [{\n      key: 'getScrollSpyContainer',\n      value: function getScrollSpyContainer() {\n        var containerId = this.props.containerId;\n        var container = this.props.container;\n\n        if (containerId && !container) {\n          return document.getElementById(containerId);\n        }\n\n        if (container && container.nodeType) {\n          return container;\n        }\n\n        return document;\n      }\n    }, {\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        if (this.props.spy || this.props.hashSpy) {\n          var scrollSpyContainer = this.getScrollSpyContainer();\n\n          if (!_scrollSpy2.default.isMounted(scrollSpyContainer)) {\n            _scrollSpy2.default.mount(scrollSpyContainer, this.props.spyThrottle);\n          }\n\n          if (this.props.hashSpy) {\n            if (!_scrollHash2.default.isMounted()) {\n              _scrollHash2.default.mount(scroller);\n            }\n\n            _scrollHash2.default.mapContainer(this.props.to, scrollSpyContainer);\n          }\n\n          _scrollSpy2.default.addSpyHandler(this.spyHandler, scrollSpyContainer);\n\n          this.setState({\n            container: scrollSpyContainer\n          });\n        }\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        _scrollSpy2.default.unmount(this.stateHandler, this.spyHandler);\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var className = \"\";\n\n        if (this.state && this.state.active) {\n          className = ((this.props.className || \"\") + \" \" + (this.props.activeClass || \"active\")).trim();\n        } else {\n          className = this.props.className;\n        }\n\n        var props = _extends({}, this.props);\n\n        for (var prop in protoTypes) {\n          if (props.hasOwnProperty(prop)) {\n            delete props[prop];\n          }\n        }\n\n        props.className = className;\n        props.onClick = this.handleClick;\n        return _react2.default.createElement(Component, props);\n      }\n    }]);\n\n    return Link;\n  }(_react2.default.PureComponent);\n\n  var _initialiseProps = function _initialiseProps() {\n    var _this2 = this;\n\n    this.scrollTo = function (to, props) {\n      scroller.scrollTo(to, _extends({}, _this2.state, props));\n    };\n\n    this.handleClick = function (event) {\n      /*\r\n       * give the posibility to override onClick\r\n       */\n      if (_this2.props.onClick) {\n        _this2.props.onClick(event);\n      }\n      /*\r\n       * dont bubble the navigation\r\n       */\n\n\n      if (event.stopPropagation) event.stopPropagation();\n      if (event.preventDefault) event.preventDefault();\n      /*\r\n       * do the magic!\r\n       */\n\n      _this2.scrollTo(_this2.props.to, _this2.props);\n    };\n\n    this.spyHandler = function (x, y) {\n      var scrollSpyContainer = _this2.getScrollSpyContainer();\n\n      if (_scrollHash2.default.isMounted() && !_scrollHash2.default.isInitialized()) {\n        return;\n      }\n\n      var horizontal = _this2.props.horizontal;\n      var to = _this2.props.to;\n      var element = null;\n      var isInside = void 0;\n      var isOutside = void 0;\n\n      if (horizontal) {\n        var elemLeftBound = 0;\n        var elemRightBound = 0;\n        var containerLeft = 0;\n\n        if (scrollSpyContainer.getBoundingClientRect) {\n          var containerCords = scrollSpyContainer.getBoundingClientRect();\n          containerLeft = containerCords.left;\n        }\n\n        if (!element || _this2.props.isDynamic) {\n          element = scroller.get(to);\n\n          if (!element) {\n            return;\n          }\n\n          var cords = element.getBoundingClientRect();\n          elemLeftBound = cords.left - containerLeft + x;\n          elemRightBound = elemLeftBound + cords.width;\n        }\n\n        var offsetX = x - _this2.props.offset;\n        isInside = offsetX >= Math.floor(elemLeftBound) && offsetX < Math.floor(elemRightBound);\n        isOutside = offsetX < Math.floor(elemLeftBound) || offsetX >= Math.floor(elemRightBound);\n      } else {\n        var elemTopBound = 0;\n        var elemBottomBound = 0;\n        var containerTop = 0;\n\n        if (scrollSpyContainer.getBoundingClientRect) {\n          var _containerCords = scrollSpyContainer.getBoundingClientRect();\n\n          containerTop = _containerCords.top;\n        }\n\n        if (!element || _this2.props.isDynamic) {\n          element = scroller.get(to);\n\n          if (!element) {\n            return;\n          }\n\n          var _cords = element.getBoundingClientRect();\n\n          elemTopBound = _cords.top - containerTop + y;\n          elemBottomBound = elemTopBound + _cords.height;\n        }\n\n        var offsetY = y - _this2.props.offset;\n        isInside = offsetY >= Math.floor(elemTopBound) && offsetY < Math.floor(elemBottomBound);\n        isOutside = offsetY < Math.floor(elemTopBound) || offsetY >= Math.floor(elemBottomBound);\n      }\n\n      var activeLink = scroller.getActiveLink();\n\n      if (isOutside) {\n        if (to === activeLink) {\n          scroller.setActiveLink(void 0);\n        }\n\n        if (_this2.props.hashSpy && _scrollHash2.default.getHash() === to) {\n          var _props$saveHashHistor = _this2.props.saveHashHistory,\n              saveHashHistory = _props$saveHashHistor === undefined ? false : _props$saveHashHistor;\n\n          _scrollHash2.default.changeHash(\"\", saveHashHistory);\n        }\n\n        if (_this2.props.spy && _this2.state.active) {\n          _this2.setState({\n            active: false\n          });\n\n          _this2.props.onSetInactive && _this2.props.onSetInactive(to, element);\n        }\n      }\n\n      if (isInside && (activeLink !== to || _this2.state.active === false)) {\n        scroller.setActiveLink(to);\n\n        var _props$saveHashHistor2 = _this2.props.saveHashHistory,\n            _saveHashHistory = _props$saveHashHistor2 === undefined ? false : _props$saveHashHistor2;\n\n        _this2.props.hashSpy && _scrollHash2.default.changeHash(to, _saveHashHistory);\n\n        if (_this2.props.spy) {\n          _this2.setState({\n            active: true\n          });\n\n          _this2.props.onSetActive && _this2.props.onSetActive(to, element);\n        }\n      }\n    };\n  };\n\n  ;\n  Link.propTypes = protoTypes;\n  Link.defaultProps = {\n    offset: 0\n  };\n  return Link;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodash = require('lodash.throttle');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _passiveEventListeners = require('./passive-event-listeners');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n} // The eventHandler will execute at a rate of 15fps by default\n\n\nvar eventThrottler = function eventThrottler(eventHandler) {\n  var throttleAmount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 66;\n  return (0, _lodash2.default)(eventHandler, throttleAmount);\n};\n\nvar scrollSpy = {\n  spyCallbacks: [],\n  spySetState: [],\n  scrollSpyContainers: [],\n  mount: function mount(scrollSpyContainer, throttle) {\n    if (scrollSpyContainer) {\n      var eventHandler = eventThrottler(function (event) {\n        scrollSpy.scrollHandler(scrollSpyContainer);\n      }, throttle);\n      scrollSpy.scrollSpyContainers.push(scrollSpyContainer);\n      (0, _passiveEventListeners.addPassiveEventListener)(scrollSpyContainer, 'scroll', eventHandler);\n    }\n  },\n  isMounted: function isMounted(scrollSpyContainer) {\n    return scrollSpy.scrollSpyContainers.indexOf(scrollSpyContainer) !== -1;\n  },\n  currentPositionX: function currentPositionX(scrollSpyContainer) {\n    if (scrollSpyContainer === document) {\n      var supportPageOffset = window.pageYOffset !== undefined;\n      var isCSS1Compat = (document.compatMode || \"\") === \"CSS1Compat\";\n      return supportPageOffset ? window.pageXOffset : isCSS1Compat ? document.documentElement.scrollLeft : document.body.scrollLeft;\n    } else {\n      return scrollSpyContainer.scrollLeft;\n    }\n  },\n  currentPositionY: function currentPositionY(scrollSpyContainer) {\n    if (scrollSpyContainer === document) {\n      var supportPageOffset = window.pageXOffset !== undefined;\n      var isCSS1Compat = (document.compatMode || \"\") === \"CSS1Compat\";\n      return supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop;\n    } else {\n      return scrollSpyContainer.scrollTop;\n    }\n  },\n  scrollHandler: function scrollHandler(scrollSpyContainer) {\n    var callbacks = scrollSpy.scrollSpyContainers[scrollSpy.scrollSpyContainers.indexOf(scrollSpyContainer)].spyCallbacks || [];\n    callbacks.forEach(function (c) {\n      return c(scrollSpy.currentPositionX(scrollSpyContainer), scrollSpy.currentPositionY(scrollSpyContainer));\n    });\n  },\n  addStateHandler: function addStateHandler(handler) {\n    scrollSpy.spySetState.push(handler);\n  },\n  addSpyHandler: function addSpyHandler(handler, scrollSpyContainer) {\n    var container = scrollSpy.scrollSpyContainers[scrollSpy.scrollSpyContainers.indexOf(scrollSpyContainer)];\n\n    if (!container.spyCallbacks) {\n      container.spyCallbacks = [];\n    }\n\n    container.spyCallbacks.push(handler);\n    handler(scrollSpy.currentPositionX(scrollSpyContainer), scrollSpy.currentPositionY(scrollSpyContainer));\n  },\n  updateStates: function updateStates() {\n    scrollSpy.spySetState.forEach(function (s) {\n      return s();\n    });\n  },\n  unmount: function unmount(stateHandler, spyHandler) {\n    scrollSpy.scrollSpyContainers.forEach(function (c) {\n      return c.spyCallbacks && c.spyCallbacks.length && c.spyCallbacks.splice(c.spyCallbacks.indexOf(spyHandler), 1);\n    });\n\n    if (scrollSpy.spySetState && scrollSpy.spySetState.length) {\n      scrollSpy.spySetState.splice(scrollSpy.spySetState.indexOf(stateHandler), 1);\n    }\n\n    document.removeEventListener('scroll', scrollSpy.scrollHandler);\n  },\n  update: function update() {\n    return scrollSpy.scrollSpyContainers.forEach(function (c) {\n      return scrollSpy.scrollHandler(c);\n    });\n  }\n};\nexports.default = scrollSpy;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _animateScroll = require('./animate-scroll');\n\nvar _animateScroll2 = _interopRequireDefault(_animateScroll);\n\nvar _scrollEvents = require('./scroll-events');\n\nvar _scrollEvents2 = _interopRequireDefault(_scrollEvents);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar __mapped = {};\n\nvar __activeLink = void 0;\n\nexports.default = {\n  unmount: function unmount() {\n    __mapped = {};\n  },\n  register: function register(name, element) {\n    __mapped[name] = element;\n  },\n  unregister: function unregister(name) {\n    delete __mapped[name];\n  },\n  get: function get(name) {\n    return __mapped[name] || document.getElementById(name) || document.getElementsByName(name)[0] || document.getElementsByClassName(name)[0];\n  },\n  setActiveLink: function setActiveLink(link) {\n    return __activeLink = link;\n  },\n  getActiveLink: function getActiveLink() {\n    return __activeLink;\n  },\n  scrollTo: function scrollTo(to, props) {\n    var target = this.get(to);\n\n    if (!target) {\n      console.warn(\"target Element not found\");\n      return;\n    }\n\n    props = _extends({}, props, {\n      absolute: false\n    });\n    var containerId = props.containerId;\n    var container = props.container;\n    var containerElement = void 0;\n\n    if (containerId) {\n      containerElement = document.getElementById(containerId);\n    } else if (container && container.nodeType) {\n      containerElement = container;\n    } else {\n      containerElement = document;\n    }\n\n    props.absolute = true;\n    var horizontal = props.horizontal;\n    var scrollOffset = _utils2.default.scrollOffset(containerElement, target, horizontal) + (props.offset || 0);\n    /*\r\n     * if animate is not provided just scroll into the view\r\n     */\n\n    if (!props.smooth) {\n      if (_scrollEvents2.default.registered['begin']) {\n        _scrollEvents2.default.registered['begin'](to, target);\n      }\n\n      if (containerElement === document) {\n        if (props.horizontal) {\n          window.scrollTo(scrollOffset, 0);\n        } else {\n          window.scrollTo(0, scrollOffset);\n        }\n      } else {\n        containerElement.scrollTop = scrollOffset;\n      }\n\n      if (_scrollEvents2.default.registered['end']) {\n        _scrollEvents2.default.registered['end'](to, target);\n      }\n\n      return;\n    }\n    /*\r\n     * Animate scrolling\r\n     */\n\n\n    _animateScroll2.default.animateTopScroll(scrollOffset, props, to, target);\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  /*\r\n   * https://github.com/oblador/angular-scroll (duScrollDefaultEasing)\r\n   */\n  defaultEasing: function defaultEasing(x) {\n    if (x < 0.5) {\n      return Math.pow(x * 2, 2) / 2;\n    }\n\n    return 1 - Math.pow((1 - x) * 2, 2) / 2;\n  },\n\n  /*\r\n   * https://gist.github.com/gre/1650294\r\n   */\n  // no easing, no acceleration\n  linear: function linear(x) {\n    return x;\n  },\n  // accelerating from zero velocity\n  easeInQuad: function easeInQuad(x) {\n    return x * x;\n  },\n  // decelerating to zero velocity\n  easeOutQuad: function easeOutQuad(x) {\n    return x * (2 - x);\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: function easeInOutQuad(x) {\n    return x < .5 ? 2 * x * x : -1 + (4 - 2 * x) * x;\n  },\n  // accelerating from zero velocity \n  easeInCubic: function easeInCubic(x) {\n    return x * x * x;\n  },\n  // decelerating to zero velocity \n  easeOutCubic: function easeOutCubic(x) {\n    return --x * x * x + 1;\n  },\n  // acceleration until halfway, then deceleration \n  easeInOutCubic: function easeInOutCubic(x) {\n    return x < .5 ? 4 * x * x * x : (x - 1) * (2 * x - 2) * (2 * x - 2) + 1;\n  },\n  // accelerating from zero velocity \n  easeInQuart: function easeInQuart(x) {\n    return x * x * x * x;\n  },\n  // decelerating to zero velocity \n  easeOutQuart: function easeOutQuart(x) {\n    return 1 - --x * x * x * x;\n  },\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: function easeInOutQuart(x) {\n    return x < .5 ? 8 * x * x * x * x : 1 - 8 * --x * x * x * x;\n  },\n  // accelerating from zero velocity\n  easeInQuint: function easeInQuint(x) {\n    return x * x * x * x * x;\n  },\n  // decelerating to zero velocity\n  easeOutQuint: function easeOutQuint(x) {\n    return 1 + --x * x * x * x * x;\n  },\n  // acceleration until halfway, then deceleration \n  easeInOutQuint: function easeInOutQuint(x) {\n    return x < .5 ? 16 * x * x * x * x * x : 1 + 16 * --x * x * x * x * x;\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar updateHash = function updateHash(hash, historyUpdate) {\n  var hashVal = hash.indexOf(\"#\") === 0 ? hash.substring(1) : hash;\n  var hashToUpdate = hashVal ? \"#\" + hashVal : \"\";\n  var curLoc = window && window.location;\n  var urlToPush = hashToUpdate ? curLoc.pathname + curLoc.search + hashToUpdate : curLoc.pathname + curLoc.search;\n  historyUpdate ? history.pushState(null, \"\", urlToPush) : history.replaceState(null, \"\", urlToPush);\n};\n\nvar getHash = function getHash() {\n  return window.location.hash.replace(/^#/, \"\");\n};\n\nvar filterElementInContainer = function filterElementInContainer(container) {\n  return function (element) {\n    return container.contains ? container != element && container.contains(element) : !!(container.compareDocumentPosition(element) & 16);\n  };\n};\n\nvar isPositioned = function isPositioned(element) {\n  return getComputedStyle(element).position !== \"static\";\n};\n\nvar getElementOffsetInfoUntil = function getElementOffsetInfoUntil(element, predicate) {\n  var offsetTop = element.offsetTop;\n  var currentOffsetParent = element.offsetParent;\n\n  while (currentOffsetParent && !predicate(currentOffsetParent)) {\n    offsetTop += currentOffsetParent.offsetTop;\n    currentOffsetParent = currentOffsetParent.offsetParent;\n  }\n\n  return {\n    offsetTop: offsetTop,\n    offsetParent: currentOffsetParent\n  };\n};\n\nvar scrollOffset = function scrollOffset(c, t, horizontal) {\n  if (horizontal) {\n    return c === document ? t.getBoundingClientRect().left + (window.scrollX || window.pageXOffset) : getComputedStyle(c).position !== \"static\" ? t.offsetLeft : t.offsetLeft - c.offsetLeft;\n  } else {\n    if (c === document) {\n      return t.getBoundingClientRect().top + (window.scrollY || window.pageYOffset);\n    } // The offsetParent of an element, according to MDN, is its nearest positioned\n    // (an element whose position is anything other than static) ancestor. The offsetTop\n    // of an element is taken with respect to its offsetParent which may not neccessarily\n    // be its parentElement except the parent itself is positioned.\n    // So if containerElement is positioned, then it must be an offsetParent somewhere\n    // If it happens that targetElement is a descendant of the containerElement, and there\n    // is not intermediate positioned element between the two of them, i.e.\n    // targetElement\"s offsetParent is the same as the containerElement, then the\n    // distance between the two will be the offsetTop of the targetElement.\n    // If, on the other hand, there are intermediate positioned elements between the\n    // two entities, the distance between the targetElement and the containerElement\n    // will be the accumulation of the offsetTop of the element and that of its\n    // subsequent offsetParent until the containerElement is reached, since it\n    // will also be an offsetParent at some point due to the fact that it is positioned.\n    // If the containerElement is not positioned, then it can\"t be an offsetParent,\n    // which means that the offsetTop of the targetElement would not be with respect to it.\n    // However, if the two of them happen to have the same offsetParent, then\n    // the distance between them will be the difference between their offsetTop\n    // since they are both taken with respect to the same entity.\n    // The last resort would be to accumulate their offsetTop until a common\n    // offsetParent is reached (usually the document) and taking the difference\n    // between the accumulated offsetTops\n\n\n    if (isPositioned(c)) {\n      if (t.offsetParent !== c) {\n        var isContainerElementOrDocument = function isContainerElementOrDocument(e) {\n          return e === c || e === document;\n        };\n\n        var _getElementOffsetInfo = getElementOffsetInfoUntil(t, isContainerElementOrDocument),\n            offsetTop = _getElementOffsetInfo.offsetTop,\n            offsetParent = _getElementOffsetInfo.offsetParent;\n\n        if (offsetParent !== c) {\n          throw new Error(\"Seems containerElement is not an ancestor of the Element\");\n        }\n\n        return offsetTop;\n      }\n\n      return t.offsetTop;\n    }\n\n    if (t.offsetParent === c.offsetParent) {\n      return t.offsetTop - c.offsetTop;\n    }\n\n    var isDocument = function isDocument(e) {\n      return e === document;\n    };\n\n    return getElementOffsetInfoUntil(t, isDocument).offsetTop - getElementOffsetInfoUntil(c, isDocument).offsetTop;\n  }\n};\n\nexports.default = {\n  updateHash: updateHash,\n  getHash: getHash,\n  filterElementInContainer: filterElementInContainer,\n  scrollOffset: scrollOffset\n};","export const download = (data: string, fileName: string, fileType: string) => {\n  const blob = new Blob([data], { type: fileType });\n  const a = document.createElement(\"a\");\n  a.download = fileName;\n  a.href = window.URL.createObjectURL(blob);\n  const clickEvt = new MouseEvent(\"click\", {\n    view: window,\n    bubbles: true,\n    cancelable: true,\n  });\n  a.dispatchEvent(clickEvt);\n  a.remove();\n};\n","import { utils } from \"geo4326\";\n\nimport type {\n  GeoJSON,\n  Feature,\n  Point,\n  MultiPoint,\n  LineString,\n  MultiLineString,\n  Polygon,\n  MultiPolygon,\n  GeoJsonObject,\n} from \"geojson\";\n\nexport const parsedLinearRing = (data: string): number[][] | null => {\n  try {\n    const json = JSON.parse(\n      data.replace(/\\r?\\n/g, \"\").replace(/\\s+/g, \"\").replace(/],]$/g, \"]]\")\n    );\n    if (Array.isArray(json)) {\n      json.forEach(p => {\n        if (!Array.isArray(p)) throw new Error();\n        p.forEach(v => {\n          if (typeof v !== \"number\") throw new Error();\n        });\n      });\n\n      if (\n        json[0][0] !== json[json.length - 1][0] ||\n        json[0][1] !== json[json.length - 1][1]\n      ) {\n        json.push(json[0]);\n      }\n      if (json.length < 4) throw new Error();\n\n      if (!utils.isCcw(json)) {\n        json.reverse();\n      }\n\n      return json;\n    }\n  } catch {\n    return null;\n  }\n  return null;\n};\n\nexport const getPolygon = (geojson: GeoJSON): Polygon | null => {\n  switch (geojson?.type) {\n    case \"Polygon\": {\n      return geojson;\n    }\n    case \"MultiPolygon\": {\n      return {\n        type: \"Polygon\",\n        coordinates: geojson.coordinates[0],\n      };\n    }\n    case \"Feature\": {\n      return getPolygon(geojson.geometry);\n    }\n    case \"FeatureCollection\": {\n      for (let i = 0; i < geojson.features.length; i++) {\n        const item = getPolygon(geojson.features[i]);\n        if (item) return item;\n      }\n      break;\n    }\n    case \"GeometryCollection\":\n      {\n        for (let i = 0; i < geojson.geometries.length; i++) {\n          const item = getPolygon(geojson.geometries[i]);\n          if (item) return item;\n        }\n      }\n      break;\n  }\n  return null;\n};\n\ntype Crs = {\n  crs?: {\n    type?: string;\n    properties?: {\n      name?: string;\n    };\n  };\n};\n\ntype GeometryWithCRS = (\n  | Point\n  | MultiPoint\n  | LineString\n  | MultiLineString\n  | Polygon\n  | MultiPolygon\n) &\n  Crs;\n\nexport type FeatureWithCRS = Feature<GeometryWithCRS> & Crs;\n\ntype FeatureCollectionWithCRS = {\n  type: \"FeatureCollection\";\n  features: Array<FeatureWithCRS>;\n} & GeoJsonObject &\n  Crs;\n\ntype GeometryCollectionWithCRS = {\n  type: \"GeometryCollection\";\n  geometries: Array<GeometryWithCRS>;\n} & GeoJsonObject &\n  Crs;\n\nexport type GeoJSONWithCRS =\n  | GeometryWithCRS\n  | FeatureWithCRS\n  | FeatureCollectionWithCRS\n  | GeometryCollectionWithCRS;\n\nconst _getEPSG = (\n  geojson: GeoJSONWithCRS | null,\n  geometryTypes: string[]\n): { type: string | null; code: number | null } => {\n  const getCode = (geojson: GeoJSONWithCRS): number | null => {\n    const crs = geojson?.crs?.properties?.name;\n    const code = crs && crs.replace(/^.*EPSG::/, \"\");\n    return code ? parseInt(code, 10) : null;\n  };\n  if (geojson) {\n    if (geometryTypes.includes(geojson?.type || \"\")) {\n      return {\n        type: geojson.type || null,\n        code: getCode(geojson),\n      };\n    }\n    switch (geojson?.type) {\n      case \"Feature\": {\n        const child = _getEPSG(geojson?.geometry, geometryTypes);\n        if (child.code !== null) return child;\n        if (geometryTypes.includes(child?.type || \"\")) {\n          const parentCode = getCode(geojson);\n          return {\n            type: child.type || null,\n            code: parentCode,\n          };\n        }\n        break;\n      }\n      case \"FeatureCollection\": {\n        for (let i = 0; i < geojson.features.length; i++) {\n          const child = _getEPSG(geojson?.features[i], geometryTypes);\n          if (geometryTypes.includes(child?.type || \"\")) {\n            if (child.code !== null) {\n              return child;\n            }\n\n            const parentCode = getCode(geojson);\n            return {\n              type: child.type,\n              code: parentCode,\n            };\n          }\n        }\n        break;\n      }\n      case \"GeometryCollection\": {\n        for (let i = 0; i < geojson.geometries.length; i++) {\n          const child = _getEPSG(geojson?.geometries[i], geometryTypes);\n          if (geometryTypes.includes(child?.type || \"\")) {\n            if (child.code !== null) {\n              return child;\n            }\n\n            const parentCode = getCode(geojson);\n            return {\n              type: child.type || null,\n              code: parentCode,\n            };\n          }\n        }\n        break;\n      }\n    }\n  }\n  return {\n    type: geojson?.type || null,\n    code: null,\n  };\n};\n\nexport const getEPSGcode = (\n  geojson: GeoJSONWithCRS,\n  geometryTypes: string[]\n): number | null => {\n  /**\n   * crs member is removed officaly.\n   * GeoJSON coordinates is using WGS84(EPSG:4326).\n   * https://datatracker.ietf.org/doc/html/rfc7946#section-4\n   */\n  const epsg = _getEPSG(geojson, geometryTypes);\n  if (geometryTypes.includes(epsg?.type || \"\")) {\n    return epsg.code === null ? 4326 : epsg.code;\n  }\n  return null;\n};\n"],"names":["_interopRequireDefault","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","Object","defineProperty","value","enumerable","get","_utils","createSvgIcon","getFormControlLabelUtilityClasses","slot","generateUtilityClass","_excluded","FormControlLabelRoot","styled","name","overridesResolver","props","styles","ownerState","concat","label","root","capitalize","labelPlacement","_ref2","theme","display","alignItems","cursor","verticalAlign","WebkitTapHighlightColor","marginLeft","marginRight","flexDirection","color","palette","text","disabled","inProps","ref","useThemeProps","className","_props$componentsProp","componentsProps","control","disabledProp","disableTypography","_props$labelPlacement","other","muiFormControl","useFormControl","controlProps","forEach","key","classes","slots","composeClasses","useUtilityClasses","children","type","Typography","component","typography","getInputAdornmentUtilityClass","InputAdornmentRoot","position","disablePointerEvents","variant","_ref","height","maxHeight","whiteSpace","action","active","marginTop","pointerEvents","_props$component","_props$disablePointer","_props$disableTypogra","variantProp","hiddenLabel","size","FormControlContext","as","dangerouslySetInnerHTML","__html","getSwitchUtilityClass","SwitchRoot","edge","width","overflow","padding","boxSizing","flexShrink","zIndex","colorAdjust","transform","SwitchSwitchBase","SwitchBase","switchBase","input","_ref4","_ref5","top","left","mode","common","white","grey","transition","transitions","create","duration","shortest","opacity","_ref6","_ref7","backgroundColor","hoverOpacity","main","SwitchTrack","track","_ref8","borderRadius","black","SwitchThumb","thumb","_ref9","boxShadow","shadows","_props$color","_props$edge","_props$size","sx","checked","composedClasses","icon","checkedIcon","getSwitchBaseUtilityClass","SwitchBaseRoot","ButtonBase","skipSx","SwitchBaseInput","margin","autoFocus","checkedProp","defaultChecked","_props$disableFocusRi","disableFocusRipple","id","inputProps","inputRef","onBlur","onChange","onFocus","readOnly","required","tabIndex","_useControlled","useControlled","controlled","Boolean","state","_useControlled2","setCheckedState","hasLabelFor","centerRipple","focusRipple","role","undefined","event","nativeEvent","defaultPrevented","newChecked","target","useMediaQuery","queryInput","options","arguments","length","supportMatchMedia","window","matchMedia","_getThemeProps","_getThemeProps$defaul","defaultMatches","_getThemeProps$matchM","_getThemeProps$noSsr","noSsr","_getThemeProps$ssrMat","ssrMatchMedia","query","replace","_React$useState","matches","_React$useState2","match","setMatch","queryList","updateMatch","addListener","removeListener","validator","reason","componentNameInError","Component","propName","componentName","location","propFullName","FUNC_ERROR_TEXT","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeGlobal","g","freeSelf","self","Function","objectToString","prototype","toString","nativeMax","Math","max","nativeMin","min","now","Date","debounce","func","wait","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","apply","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","remainingWait","debounced","isInvoking","this","toNumber","isObject","cancel","clearTimeout","flush","isObjectLike","call","isSymbol","valueOf","isBinary","test","slice","module","ARRAY_BUFFER","JSON","TEXT","XML","_extendStatics","__extends","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","String","__","constructor","Feature","_super","opt_geometryOrProperties","_this","on","once","un","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","addChangeListener","handleGeometryChanged_","getSimplifiedGeometry","geometry","setGeometry","properties","setProperties","clone","hasProperties","getProperties","setGeometryName","getGeometryName","getGeometry","style","getStyle","setStyle","getId","getStyleFunction","handleGeometryChange_","changed","EventType","set","opt_style","obj","styles_1","isArray","getZIndex","createStyleFunction","setId","removeChangeListener","cloneGeometries","geometries","clonedGeometries","i","ii","push","GeometryCollection","opt_geometries","geometries_","changeEventsKeys_","listenGeometriesChange_","unlistenGeometriesChange_","geometryCollection","setGeometries","applyProperties","closestPointXY","x","y","closestPoint","minSquaredDistance","getExtent","containsXY","computeExtent","extent","getGeometries","getGeometriesArray","getGeometriesArrayRecursive","geometriesArray","getType","squaredTolerance","simplifiedGeometryRevision","getRevision","simplifiedGeometryMaxMinSquaredTolerance","simplifiedGeometries","simplified","simplifiedGeometry","simplifiedGeometryCollection","setGeometriesArray","GeometryType","intersectsExtent","isEmpty","rotate","angle","anchor","scale","opt_sy","opt_anchor","applyTransform","transformFn","translate","deltaX","deltaY","disposeInternal","Geometry","FeatureFormat","dataProjection","defaultFeatureProjection","supportedMediaTypes","getReadOptions","source","opt_options","readProjection","getUnits","Units","setWorldExtent","featureProjection","adaptOptions","readFeature","readFeatures","readGeometry","writeFeature","feature","writeFeatures","features","writeGeometry","transformGeometryWithOptions","write","transformed","decimals","power_1","pow","coordinates","round","getObject","object","parse","JSONFeature","FormatType","readFeatureFromObject","readFeaturesFromObject","readGeometryFromObject","readProjectionFromObject","stringify","writeFeatureObject","writeFeaturesObject","writeGeometryObject","interpolatePoint","flatCoordinates","offset","end","stride","fraction","opt_dest","opt_dimension","o","t","n","x1","y1","length_1","cumulativeLengths","x2","y2","sqrt","index","dimension","dest","NaN","lineStringCoordinateAtM","m","extrapolate","coordinate","lo","hi","mid","m0","LineString","opt_layout","flatMidpoint_","flatMidpointRevision_","maxDelta_","maxDeltaRevision_","setCoordinates","setFlatCoordinates","appendCoordinate","lineString","layout","forEachSegment","callback","getCoordinateAtM","opt_extrapolate","GeometryLayout","getCoordinates","inflate","getCoordinateAt","getLength","getFlatMidpoint","getSimplifiedGeometryInternal","simplifiedFlatCoordinates","setLayout","deflate","SimpleGeometry","MultiLineString","opt_ends","ends_","getLayout","lineStrings","ends","getFlatCoordinates","appendLineString","multiLineString","opt_interpolate","interpolate","lineStringsCoordinateAtM","getEnds","getLineString","getLineStrings","getFlatMidpoints","midpoints","midpoint","simplifiedEnds","MultiPoint","appendPoint","point","multiPoint","squaredDistance","j","getPoint","Point","getPoints","points","MultiPolygon","opt_endss","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","orientedRevision_","orientedFlatCoordinates_","polygons","endss","polygon","jj","appendPolygon","len","newEndss","multiPolygon","getOrientedFlatCoordinates","getArea","opt_right","orient","getEndss","getFlatInteriorPoints","flatCenters","linearRingss","getInteriorPoints","simplifiedEndss","getPolygon","prevEnds","Polygon","getPolygons","lastEnds","readPointGeometry","readLineStringGeometry","readPolygonGeometry","readMultiPointGeometry","readMultiLineStringGeometry","readMultiPolygonGeometry","map","readGeometryCollectionGeometry","Error","geoJSON","writePointGeometry","writeLineStringGeometry","right","rightHanded","writePolygonGeometry","writeMultiPointGeometry","writeMultiLineStringGeometry","writeMultiPolygonGeometry","writeGeometryCollectionGeometry","GeoJSON","geometryName","extractGeometryName_","extractGeometryName","geoJSONFeature","geoJSONFeatures","projection","crs","objects","lineStringLength","ImageStyle","opacity_","rotateWithView_","rotateWithView","rotation_","rotation","scale_","scaleArray_","displacement_","displacement","getScale","getOpacity","getRotation","getRotateWithView","getDisplacement","getScaleArray","getAnchor","getImage","pixelRatio","getHitDetectionImage","getPixelRatio","getImageState","getImageSize","getOrigin","getSize","setDisplacement","setOpacity","setRotateWithView","setRotation","setScale","listenImageChange","listener","load","unlistenImageChange","asColorLike","RegularShape","canvas_","hitDetectionCanvas_","fill_","fill","origin_","points_","radius_","radius","radius1","radius2_","radius2","angle_","stroke_","stroke","size_","renderOptions_","render","getFill","getRadius","getRadius2","getAngle","getStroke","createHitDetectionCanvas_","image","renderOptions","context","draw_","canvas","ImageState","calculateLineJoinSize_","lineJoin","strokeWidth","miterLimit","Infinity","r1","r2","tmp","alpha","PI","a","sin","e","miterRatio","k","l","bevelAdd","aa","dd","innerMiterRatio","innerLength","createRenderOptions","strokeStyle","lineDash","lineDashOffset","getColor","getWidth","getLineDash","getLineDashOffset","getLineJoin","getMiterLimit","add","maxRadius","ceil","createPath_","fillStyle","lineWidth","setLineDash","drawHitDetectionCanvas_","arc","startAngle","step","angle0","radiusC","lineTo","cos","closePath","CircleStyle","setRadius","Fill","color_","setColor","Stroke","lineCap_","lineCap","lineDash_","lineDashOffset_","lineJoin_","miterLimit_","width_","getLineCap","setLineCap","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","Style","geometry_","geometryFunction_","defaultGeometryFunction","image_","renderer_","renderer","hitDetectionRenderer_","hitDetectionRenderer","text_","zIndex_","getRenderer","getText","setRenderer","setHitDetectionRenderer","getHitDetectionRenderer","getGeometryFunction","setFill","setImage","setStroke","setText","setZIndex","defaultStyles","createDefaultStyle","resolution","Circle","Property","BaseVectorLayer","baseOptions","renderBuffer","updateWhileAnimating","updateWhileInteracting","declutter_","declutter","renderBuffer_","updateWhileAnimating_","updateWhileInteracting_","getDeclutter","getFeatures","pixel","getRenderBuffer","getRenderOrder","getUpdateWhileAnimating","getUpdateWhileInteracting","renderDeclutter","frameState","declutterTree","setRenderOrder","renderOrder","styleFunction","Layer","Instruction","BEGIN_GEOMETRY","BEGIN_PATH","CIRCLE","CLOSE_PATH","CUSTOM","DRAW_CHARS","DRAW_IMAGE","END_GEOMETRY","FILL","MOVE_TO_LINE_TO","SET_FILL_STYLE","SET_STROKE_STYLE","STROKE","fillInstruction","strokeInstruction","beginPathInstruction","closePathInstruction","VectorContext","drawCustom","drawGeometry","drawCircle","circleGeometry","drawFeature","drawGeometryCollection","geometryCollectionGeometry","drawLineString","lineStringGeometry","drawMultiLineString","multiLineStringGeometry","drawMultiPoint","multiPointGeometry","drawMultiPolygon","multiPolygonGeometry","drawPoint","pointGeometry","drawPolygon","polygonGeometry","drawText","setFillStrokeStyle","setImageStyle","imageStyle","opt_declutterImageWithText","setTextStyle","textStyle","CanvasBuilder","tolerance","maxExtent","maxLineWidth","beginGeometryInstruction1_","beginGeometryInstruction2_","bufferedMaxExtent_","instructions","tmpCoordinate_","hitDetectionInstructions","applyPixelRatio","dashArray","dash","appendFlatPointCoordinates","getBufferedMaxExtent","tmpCoord","myEnd","appendFlatLineCoordinates","closed","skipFirst","lastRel","nextRel","lastXCoord","lastYCoord","nextCoord","skipped","Relationship","drawCustomCoordinates_","builderEnds","builderEnd","beginGeometry","builderEndss","getStride","builderBegin","myEnds","endGeometry","finish","reverseHitDetectionInstructions","reverse","instruction","begin","fillStyleColor","strokeStyleColor","strokeStyleLineCap","strokeStyleLineDash","strokeStyleLineDashOffset","strokeStyleLineJoin","strokeStyleWidth","strokeStyleMiterLimit","createFill","applyStroke","createStroke","updateFillStyle","currentFillStyle","updateStrokeStyle","currentStrokeStyle","currentLineCap","currentLineDash","currentLineDashOffset","currentLineJoin","currentLineWidth","currentMiterLimit","endGeometryInstruction","CanvasImageBuilder","hitDetectionImage_","imagePixelRatio_","anchorX_","anchorY_","height_","originX_","originY_","declutterImageWithText_","myBegin","opt_sharedData","hitDetectionImage","origin","CanvasLineStringBuilder","drawFlatCoordinates_","moveToLineToInstruction","lastStroke","CanvasPolygonBuilder","drawFlatCoordinatess_","numEnds","setFillStrokeStyles_","circleInstruction","matchingChunk","maxAngle","m12","m23","x12","y12","x23","y23","chunkStart","chunkEnd","chunkM","start","acos","TEXT_ALIGN","CanvasTextBuilder","labels_","textOffsetX_","textOffsetY_","textRotateWithView_","textRotation_","textFillState_","fillStates","textStrokeState_","strokeStates","textState_","textStates","textKey_","fillKey_","strokeKey_","fillState","strokeState","textState","geometryType","placement","TextPlacement","geometryWidths","getCenter","getFlatInteriorPoint","interiorPoints","beg_1","filter","w","keep","saveTextStates_","backgroundFill","backgroundStroke","p0","p1","p2","p3","pixelRatio_1","textAlign","flatOffset","flatEnd","oo","range","drawChars_","strokeKey","textKey","font","textBaseline","fillKey","baseline","offsetY","abs","textFillStyle","textStrokeStyle","getFont","textScale","getOverflow","getMaxAngle","getPlacement","getTextAlign","getTextBaseline","getBackgroundFill","getBackgroundStroke","getPadding","textOffsetX","getOffsetX","textOffsetY","getOffsetY","textRotateWithView","textRotation","join","BATCH_CONSTRUCTORS","PolygonBuilder","Builder","ImageBuilder","LineStringBuilder","BuilderGroup","tolerance_","maxExtent_","pixelRatio_","resolution_","buildersByZIndex_","builderInstructions","zKey","builders","builderKey","builderInstruction","getBuilder","builderType","zIndexKey","replays","replay","Constructor","drawTextOnPath","startM","measureAndCacheTextWidth","cache","segmentLength","segmentM","advance","beginX","beginY","startOffset","startLength","endM","endX","endY","flat","previousAngle","singleSegment","atan2","delta","iStart","charLength","chars","substring","tmpExtent","p4","getDeclutterBox","replayImageOrLabelArgs","declutterBox","rtlRegEx","RegExp","fromCharCode","horizontalTextAlign","align","createTextChunks","acc","line","Executor","overlaps","alignFill_","coordinateCache_","renderedTransform_","pixelCoordinates_","viewRotation_","widths_","createLabel","textIsArray","chunks","split","reduce","_a","widths","heights","lineWidths","renderWidth","contextInstructions","h","floor","OffscreenCanvasRenderingContext2D","CanvasRenderingContext2D","previousFont","leftRight","strokeInstructions","fillInstructions","lineHeight","lineOffset","widthHeightIndex","lineWidthIndex","text_1","fillStrokeArgs","replayTextBackground_","beginPath","moveTo","setStrokeStyle_","calculateImageOrLabelDimensions_","sheetWidth","sheetHeight","centerX","centerY","anchorX","anchorY","originX","originY","snapToPixel","fillStroke","boxW","boxH","boxX","boxY","drawImageX","drawImageY","drawImageW","drawImageH","minX","minY","maxX","maxY","canvasTransform","replayImageOrLabel_","contextScale","imageOrLabel","dimensions","box","strokePadding","origin_1","repeatSize","save","restore","drawLabelWithPointPlacement_","execute_","opt_featureCallback","opt_hitExtent","opt_declutterTree","pixelCoordinates","prevX","prevY","roundX","roundY","currentGeometry","pendingFill","pendingStroke","lastFillInstruction","lastStrokeInstruction","coordinateCache","viewRotation","viewRotationFromTransform","batchSize","dx","dy","r","fn","coords","declutterImageWithText","labelWithAnchor","widthIndex","imageArgs","imageDeclutterBox","collides","insert","measurePixelRatio","pixelRatioScale","cachedWidths","pathLength","textLength","parts","drawChars","c","cc","part","i_1","ii_1","execute","executeHitDetection","ORDER","BuilderType","ExecutorGroup","allInstructions","opt_renderBuffer","overlaps_","executorsByZIndex_","hitDetectionContext_","hitDetectionTransform_","createExecutors_","clip","flatClipCoords","getClipCoords","executors","instructionByZindex","hasExecutors","candidates","forEachFeatureAtCoordinate","hitTolerance","declutteredFeatures","contextSize","newContext","hitExtent","clearRect","indexes","circlePixelIndexArrayCache","maxDistanceSq","distances","distanceSq","distance","pixelIndex","getPixelIndexArray","featureCallback","imageData","getImageData","data","indexOf","idx","result_1","executor","zs","keys","Number","sort","opt_builderTypes","builderTypes","CanvasImmediateRenderer","opt_squaredTolerance","opt_userTransform","context_","extent_","transform_","squaredTolerance_","userTransform_","contextFillState_","contextStrokeState_","contextTextState_","fillState_","strokeState_","imageAnchorX_","imageAnchorY_","imageHeight_","imageOpacity_","imageOriginX_","imageOriginY_","imageRotateWithView_","imageRotation_","imageScale_","imageWidth_","textScale_","tmpLocalTransform_","drawImages_","localTransform","globalAlpha","setTransform","drawImage","drawText_","setContextFillState_","setContextStrokeState_","setContextTextState_","strokeText","fillText","moveToLineTo_","close","drawRings_","simplifyTransformed","flatMidpoint","geometryExtent","flatMidpoints","flatInteriorPoint","flatInteriorPoints","contextFillState","contextStrokeState","contextTextState","imageSize","imageAnchor","imageOrigin","textFillStyleColor","textStrokeStyleColor","textStrokeStyleLineCap","textStrokeStyleLineDash","textStrokeStyleLineDashOffset","textStrokeStyleLineJoin","textStrokeStyleWidth","textStrokeStyleMiterLimit","textFont","textText","textTextAlign","textTextBaseline","taintedTestContext","IconImage","src","crossOrigin","imageState","Image","unlisten_","imageState_","src_","tainted_","isTainted_","dispatchChangeEvent_","dispatchEvent","handleImageError_","unlistenImage_","handleImageLoad_","replaceColor_","fillRect","getSrc","bind","document","createElement","ctx","getContext","globalCompositeOperation","imgData","putImageData","Icon","anchor_","normalizedAnchor_","anchorOrigin_","anchorOrigin","IconOrigin","anchorXUnits_","anchorXUnits","IconAnchorUnits","anchorYUnits_","anchorYUnits","crossOrigin_","img","imgSize_","imgSize","iconImage_","iconImage","offset_","offsetOrigin_","offsetOrigin","setAnchor","iconImageSize","addEventListener","removeEventListener","HIT_DETECT_RESOLUTION","GEOMETRY_RENDERERS","builderGroup","opt_declutterBuilderGroup","imageReplay","textReplay","lineStringReplay","polygonReplay","replayGroup","geometryRenderer","circleReplay","defaultOrder","feature1","feature2","getTolerance","renderFeature","opt_transform","loading","renderGeometry","renderFeatureInternal","CanvasVectorLayerRenderer","vectorLayer","boundHandleStyleImageChange_","handleStyleImageChange_","animatingOrInteracting_","dirty_","hitDetectionImageData_","renderedFeatures_","renderedRevision_","renderedResolution_","renderedExtent_","wrappedRenderedExtent_","renderedRotation_","renderedCenter_","renderedProjection_","renderedRenderOrder_","replayGroup_","replayGroupChanged","declutterExecutorGroup","clipping","renderWorlds","executorGroup","viewState","center","projectionExtent","vectorSource","getLayer","getSource","viewHints","ViewHint","multiWorld","getWrapX","canWrapX","worldWidth","endWorld","world","getRenderTransform","renderFrame","layerState","layerStatesArray","layerIndex","pixelTransform","inversePixelTransform","useContainer","getBackground","containerReused","preRender","clipped","layerExtent","clipUnrotated","postRender","css","container","Promise","resolve","layer","transforms","startX","offsetX","imageSmoothingEnabled","featureCount","indexFactor","featuresByZIndex","featureStyleFunction","originalStyle","imgContext","byGeometryType","zIndexKeys","geomAndStyle","kk","createHitDetectionImageData","resultFeatures","hitDetect","splice","lastIndexOf","executorGroups","some","all","item","handleFontsChanged","getVisible","renderIfReadyAndVisible","prepareFrame","animating","interacting","frameStateExtent","vectorLayerRevision","vectorLayerRenderBuffer","vectorLayerRenderOrder","renderedExtent","loadExtents","gutter","loadExtent","declutterBuilderGroup","userTransform","userProjection","extent_1","userExtent_1","loadFeatures","dirty","userExtent","getFeaturesInExtent","replayGroupInstructions","getOverlaps","VectorLayer","createRenderer","BaseVector","RBush","opt_maxEntries","rbush_","items_","extents","values","items","remove","uid","update","bbox","getAll","getInExtent","search","forEach_","forEachInExtent","clear","opt_extent","toJSON","rbush","withCredentials","xhr","url","format","success","failure","XMLHttpRequest","open","responseType","onload","status","responseText","responseXML","DOMParser","parseFromString","response","onerror","send","loadFeaturesXhr","addFeatures","VectorSourceEvent","opt_feature","opt_features","Event","VectorSource","attributions","wrapX","loader_","format_","url_","loader","strategy_","strategy","collection","useSpatialIndex","featuresRtree_","loadedExtentsRtree_","loadingExtentsCount_","nullGeometryFeatures_","idIndex_","uidIndex_","featureChangeKeys_","featuresCollection_","getArray","Collection","addFeaturesInternal","bindFeaturesCollection_","addFeature","addFeatureInternal","featureKey","addToIndex_","setupChangeEvents_","VectorEventType","handleFeatureChange_","ObjectEventType","valid","newFeatures","geometryFeatures","length_2","hasListener","length_3","modifyingCollection","evt","CollectionEventType","element","removeFeature","opt_fast","featureId","removeAndIgnoreReturn","removeFeatureInternal","clearEvent","forEachFeature","forEachFeatureAtCoordinateDirect","forEachFeatureInExtent","intersectsCoordinate","forEachFeatureIntersectingExtent","getFeaturesCollection","getFeaturesAtCoordinate","getClosestFeatureToCoordinate","opt_filter","closestFeature","previousMinSquaredDistance","minDistance","getFeatureById","getFeatureByUid","getFormat","getUrl","sid","removeFromIdIndex_","hasFeature","loadedExtentsRtree","extentsToLoad","_loop_1","extentToLoad","this_1","refresh","removeLoadedExtent","featureChangeKeys","removed","setLoader","setUrl","Source","s","log","f","exp","u","_maxEntries","_minEntries","leaf","pop","_all","toBBox","_build","_splitRoot","_insert","_condense","compareMinX","compareMinY","fromJSON","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","v","M","_allDistMargin","_createClass","defineProperties","descriptor","configurable","writable","protoProps","staticProps","_react2","_scrollLink2","__esModule","_classCallCheck","instance","_possibleConstructorReturn","ReferenceError","ButtonElement","_React$Component","getPrototypeOf","subClass","superClass","_inherits","_extends","assign","_scrollElement2","_propTypes2","ElementWrapper","_this2","newProps","parentBindings","el","domNode","propTypes","string","LinkElement","_temp","_len","_key","_Link2","_Button2","_Element2","_scroller2","_scrollEvents2","_scrollSpy2","_animateScroll2","_Helpers2","React","scrollSpy","defaultScroller","PropTypes","scrollHash","protoTypes","to","isRequired","containerId","activeClass","spy","bool","smooth","oneOfType","number","delay","isDynamic","onClick","absolute","onSetActive","onSetInactive","ignoreCancelEvents","hashSpy","spyThrottle","Helpers","Scroll","customScroller","console","warn","scroller","_initialiseProps","getElementById","nodeType","scrollSpyContainer","getScrollSpyContainer","isMounted","mount","mapContainer","addStateHandler","stateHandler","addSpyHandler","spyHandler","setState","unmount","trim","prop","handleClick","scrollTo","stopPropagation","preventDefault","getActiveLink","isInitialized","elemTopBound","elemBottomBound","containerTop","getBoundingClientRect","cords","isInside","isOutside","activeLink","setActiveLink","getHash","changeHash","updateStates","defaultProps","Element","_React$Component2","_this3","childBindings","registerElems","prevProps","unregister","register","_smooth2","_cancelEvents2","getAnimationType","defaultEasing","requestAnimationFrameHelper","requestAnimationFrame","webkitRequestAnimationFrame","currentWindowProperties","getTime","currentPositionX","containerElement","body","scrollLeft","supportPageOffset","pageXOffset","isCSS1Compat","compatMode","documentElement","currentPositionY","scrollTop","pageYOffset","animateScroll","easing","timestamp","targetPosition","startPosition","progress","percent","currentPosition","horizontal","easedAnimate","registered","setContainer","animateTopScroll","scrollOffset","delayTimeout","subscribe","isNaN","parseFloat","proceedOptions","scrollToTop","scrollToBottom","scrollWidth","offsetWidth","html","clientWidth","scrollContainerWidth","scrollHeight","offsetHeight","clientHeight","scrollContainerHeight","toPosition","scrollMore","_passiveEventListeners","events","cancelEvent","addPassiveEventListener","eventName","supportsPassiveOption","opts","passive","removePassiveEventListener","Events","scrollEvent","evtName","_utils2","mountFlag","initialized","containers","handleHashChange","initStateFromHash","hash","isInit","saveHashHistory","updateHash","_scrollHash2","Link","_React$PureComponent","PureComponent","elemLeftBound","elemRightBound","containerLeft","_cords","_props$saveHashHistor","_props$saveHashHistor2","_saveHashHistory","_lodash","_lodash2","spyCallbacks","spySetState","scrollSpyContainers","throttle","eventHandler","throttleAmount","eventThrottler","scrollHandler","handler","__mapped","__activeLink","getElementsByName","getElementsByClassName","link","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","getElementOffsetInfoUntil","predicate","offsetTop","currentOffsetParent","offsetParent","historyUpdate","hashVal","hashToUpdate","curLoc","urlToPush","pathname","history","pushState","replaceState","filterElementInContainer","contains","compareDocumentPosition","scrollX","getComputedStyle","offsetLeft","scrollY","_getElementOffsetInfo","isDocument","download","fileName","fileType","blob","Blob","href","URL","createObjectURL","clickEvt","MouseEvent","view","bubbles","cancelable","parsedLinearRing","json","utils","geojson","_getEPSG","geometryTypes","getCode","code","includes","child","parentCode","getEPSGcode","epsg"],"sourceRoot":""}