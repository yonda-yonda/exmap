(self.webpackChunkexmap=self.webpackChunkexmap||[]).push([[491],{34575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},93913:function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},63015:function(e,t,r){"use strict";var n=r(95318);t.Z=void 0;var i=n(r(32174)),a=r(85893),o=(0,i.default)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=o},54959:function(e,t,r){"use strict";var n=r(95318);t.Z=void 0;var i=n(r(32174)),a=r(85893),o=(0,i.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=o},32174:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=r(22617)},22617:function(e,t,r){"use strict";r.r(t),r.d(t,{capitalize:function(){return n.Z},createChainedFunction:function(){return i.Z},createSvgIcon:function(){return a.Z},debounce:function(){return o.Z},deprecatedPropType:function(){return s},isMuiElement:function(){return u.Z},ownerDocument:function(){return l.Z},ownerWindow:function(){return c.Z},requirePropFactory:function(){return f},setRef:function(){return h},unstable_ClassNameGenerator:function(){return w.Z},unstable_useEnhancedEffect:function(){return p.Z},unstable_useId:function(){return d.Z},unsupportedProp:function(){return v},useControlled:function(){return g.Z},useEventCallback:function(){return y.Z},useForkRef:function(){return m.Z},useIsFocusVisible:function(){return b.Z}});var n=r(49240),i=r(95626),a=r(12067),o=r(95152);var s=function(e,t){return function(){return null}},u=r(63128),l=r(79072),c=r(9217);r(87462);var f=function(e,t){return function(){return null}},h=r(96386).Z,p=r(94026),d=r(62152);var v=function(e,t,r,n,i){return null},g=r(42583),y=r(10955),m=r(65973),b=r(96698),w=r(86756)},41939:function(e,t,r){"use strict";var n=(0,r(92696).ZP)();t.Z=n},55660:function(e,t,r){"use strict";var n=r(34575),i=r(93913),a=r(86793),o=Symbol("max"),s=Symbol("length"),u=Symbol("lengthCalculator"),l=Symbol("allowStale"),c=Symbol("maxAge"),f=Symbol("dispose"),h=Symbol("noDisposeOnSet"),p=Symbol("lruList"),d=Symbol("cache"),v=Symbol("updateAgeOnGet"),g=function(){return 1},y=function(){function e(t){if(n(this,e),"number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[o]=t.max||1/0;var r=t.length||g;if(this[u]="function"!=typeof r?g:r,this[l]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[c]=t.maxAge||0,this[f]=t.dispose,this[h]=t.noDisposeOnSet||!1,this[v]=t.updateAgeOnGet||!1,this.reset()}return i(e,[{key:"max",get:function(){return this[o]},set:function(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,w(this)}},{key:"allowStale",get:function(){return this[l]},set:function(e){this[l]=!!e}},{key:"maxAge",get:function(){return this[c]},set:function(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,w(this)}},{key:"lengthCalculator",get:function(){return this[u]},set:function(e){var t=this;"function"!=typeof e&&(e=g),e!==this[u]&&(this[u]=e,this[s]=0,this[p].forEach((function(e){e.length=t[u](e.value,e.key),t[s]+=e.length}))),w(this)}},{key:"length",get:function(){return this[s]}},{key:"itemCount",get:function(){return this[p].length}},{key:"rforEach",value:function(e,t){t=t||this;for(var r=this[p].tail;null!==r;){var n=r.prev;S(this,e,r,t),r=n}}},{key:"forEach",value:function(e,t){t=t||this;for(var r=this[p].head;null!==r;){var n=r.next;S(this,e,r,t),r=n}}},{key:"keys",value:function(){return this[p].toArray().map((function(e){return e.key}))}},{key:"values",value:function(){return this[p].toArray().map((function(e){return e.value}))}},{key:"reset",value:function(){var e=this;this[f]&&this[p]&&this[p].length&&this[p].forEach((function(t){return e[f](t.key,t.value)})),this[d]=new Map,this[p]=new a,this[s]=0}},{key:"dump",value:function(){var e=this;return this[p].map((function(t){return!b(e,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}})).toArray().filter((function(e){return e}))}},{key:"dumpLru",value:function(){return this[p]}},{key:"set",value:function(e,t,r){if((r=r||this[c])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");var n=r?Date.now():0,i=this[u](t,e);if(this[d].has(e)){if(i>this[o])return x(this,this[d].get(e)),!1;var a=this[d].get(e).value;return this[f]&&(this[h]||this[f](e,a.value)),a.now=n,a.maxAge=r,a.value=t,this[s]+=i-a.length,a.length=i,this.get(e),w(this),!0}var l=new k(e,t,i,n,r);return l.length>this[o]?(this[f]&&this[f](e,t),!1):(this[s]+=l.length,this[p].unshift(l),this[d].set(e,this[p].head),w(this),!0)}},{key:"has",value:function(e){if(!this[d].has(e))return!1;var t=this[d].get(e).value;return!b(this,t)}},{key:"get",value:function(e){return m(this,e,!0)}},{key:"peek",value:function(e){return m(this,e,!1)}},{key:"pop",value:function(){var e=this[p].tail;return e?(x(this,e),e.value):null}},{key:"del",value:function(e){x(this,this[d].get(e))}},{key:"load",value:function(e){this.reset();for(var t=Date.now(),r=e.length-1;r>=0;r--){var n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{var a=i-t;a>0&&this.set(n.k,n.v,a)}}}},{key:"prune",value:function(){var e=this;this[d].forEach((function(t,r){return m(e,r,!1)}))}}]),e}(),m=function(e,t,r){var n=e[d].get(t);if(n){var i=n.value;if(b(e,i)){if(x(e,n),!e[l])return}else r&&(e[v]&&(n.value.now=Date.now()),e[p].unshiftNode(n));return i.value}},b=function(e,t){if(!t||!t.maxAge&&!e[c])return!1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[c]&&r>e[c]},w=function(e){if(e[s]>e[o])for(var t=e[p].tail;e[s]>e[o]&&null!==t;){var r=t.prev;x(e,t),t=r}},x=function(e,t){if(t){var r=t.value;e[f]&&e[f](r.key,r.value),e[s]-=r.length,e[d].delete(r.key),e[p].removeNode(t)}},k=i((function e(t,r,i,a,o){n(this,e),this.key=t,this.value=r,this.length=i,this.now=a,this.maxAge=o||0})),S=function(e,t,r,n){var i=r.value;b(e,i)&&(x(e,r),e[l]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};e.exports=y},73363:function(e,t,r){"use strict";var n=r(87757);e.exports=function(e){e.prototype[Symbol.iterator]=n.mark((function e(){var t;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))}},86793:function(e,t,r){"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}function i(e,t,r){var n=t===e.head?new s(r,null,t,e):new s(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function a(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function o(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,r,n){if(!(this instanceof s))return new s(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=s,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,i=this.head;null!==i;)r.push(e.call(t,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,i=this.tail;null!==i;)r.push(e.call(t,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,a=this.head;null!==a&&i<e;i++)a=a.next;for(;null!==a&&i<t;i++,a=a.next)r.push(a.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,a=this.tail;null!==a&&i>t;i--)a=a.prev;for(;null!==a&&i>e;i--,a=a.prev)r.push(a.value);return r},n.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,n=this.head;null!==n&&r<e;r++)n=n.next;var a=[];for(r=0;n&&r<t;r++)a.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(r=0;r<(arguments.length<=2?0:arguments.length-2);r++)n=i(this,n,r+2<2||arguments.length<=r+2?void 0:arguments[r+2]);return a},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(73363)(n)}catch(u){}},45505:function(e,t,r){"use strict";var n,i=r(68123),a=r(66895),o=r(93681),s=r(54248),u=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l="projection",c="coordinateFormat",f=function(e){function t(t){var r=this,n=t||{},i=document.createElement("div");i.className=void 0!==n.className?n.className:"ol-mouse-position",(r=e.call(this,{element:i,render:n.render,target:n.target})||this).on,r.once,r.un,r.addChangeListener(l,r.handleProjectionChanged_),n.coordinateFormat&&r.setCoordinateFormat(n.coordinateFormat),n.projection&&r.setProjection(n.projection);var a=!0,o="&#160;";return"undefinedHTML"in n?(void 0!==n.undefinedHTML&&(o=n.undefinedHTML),a=!!o):"placeholder"in n&&(!1===n.placeholder?a=!1:o=String(n.placeholder)),r.placeholder_=o,r.renderOnMouseOut_=a,r.renderedHTML_=i.innerHTML,r.mapProjection_=null,r.transform_=null,r}return u(t,e),t.prototype.handleProjectionChanged_=function(){this.transform_=null},t.prototype.getCoordinateFormat=function(){return this.get(c)},t.prototype.getProjection=function(){return this.get(l)},t.prototype.handleMouseMove=function(e){var t=this.getMap();this.updateHTML_(t.getEventPixel(e))},t.prototype.handleMouseOut=function(e){this.updateHTML_(null)},t.prototype.setMap=function(t){if(e.prototype.setMap.call(this,t),t){var r=t.getViewport();this.listenerKeys.push((0,s.oL)(r,a.Z.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,s.oL)(r,a.Z.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}},t.prototype.setCoordinateFormat=function(e){this.set(c,e)},t.prototype.setProjection=function(e){this.set(l,(0,o.U2)(e))},t.prototype.updateHTML_=function(e){var t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?(0,o.WO)(this.mapProjection_,r):o.gD}var n=this.getMap().getCoordinateFromPixelInternal(e);if(n){var i=(0,o.Cs)();i&&(this.transform_=(0,o.WO)(this.mapProjection_,i)),this.transform_(n,n);var a=this.getCoordinateFormat();t=a?a(n):n.toString()}}this.renderedHTML_&&t===this.renderedHTML_||(this.element.innerHTML=t,this.renderedHTML_=t)},t.prototype.render=function(e){var t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null},t}(i.Z);t.Z=f},40134:function(e,t,r){"use strict";r.d(t,{L:function(){return n},It:function(){return o},sf:function(){return u},Ie:function(){return c},pd:function(){return f},L5:function(){return h},Qb:function(){return p},P1:function(){return d}});var n={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},i={};for(var a in n)n.hasOwnProperty(a)&&(i[n[a]]=parseInt(a,10));var o=[i.BitsPerSample,i.ExtraSamples,i.SampleFormat,i.StripByteCounts,i.StripOffsets,i.StripRowCounts,i.TileByteCounts,i.TileOffsets,i.SubIFDs],s={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},u={};for(var l in s)s.hasOwnProperty(l)&&(u[s[l]]=parseInt(l,10));var c={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},f={Unspecified:0,Assocalpha:1,Unassalpha:2},h={Version:0,AddCompression:1},p={None:0,Deflate:1},d={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},v={};for(var g in d)d.hasOwnProperty(g)&&(v[d[g]]=parseInt(g,10))},42634:function(e,t,r){var n=r(57631);e.exports=function(e,t,r){var i=r&&r.debug||!1,a=r&&r.startIndex||0;i&&console.log("starting findTagByName with",t," and ",r);var o=n(e,"<".concat(t,"[ >]"),a);if(i&&console.log("start:",o),-1!==o){var s=e.slice(o+t.length),u=n(s,"[ /]"+t+">",0),l=-1===u;l&&(u=n(s,"[ /]>",0));var c=o+t.length+u+1+(l?0:t.length)+1;if(i&&console.log("end:",c),-1!==c){var f=e.slice(o,c);return{inner:l?null:f.slice(f.indexOf(">")+1,f.lastIndexOf("<")),outer:f,start:o,end:c}}}}},57690:function(e,t,r){var n=r(42634);e.exports=function(e,t,r){for(var i,a=[],o=r&&r.debug||!1,s=r&&r.startIndex||0;i=n(e,t,{debug:o,startIndex:s});)s=i.end,a.push(i);return o&&console.log("findTagsByName found",a.length,"tags"),a}},13349:function(e){e.exports=function(e,t,r){var n=r&&r.debug||!1;n&&console.log("getting "+t+" in "+e);var i="object"==typeof e?e.outer:e,a="".concat(t,'\\="([^"]*)"');n&&console.log("pattern:",a);var o=new RegExp(a).exec(i);if(n&&console.log("match:",o),o)return o[1]}},57631:function(e){e.exports=function(e,t,r){var n=new RegExp(t).exec(e.slice(r));return n?r+n.index:-1}},70648:function(e,t,r){var n=r(17854),i=r(51694),a=r(60614),o=r(84326),s=r(5112)("toStringTag"),u=n.Object,l="Arguments"==o(function(){return arguments}());e.exports=i?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(r){}}(t=u(e),s))?r:l?o(t):"Object"==(n=o(t))&&a(t.callee)?"Arguments":n}},86135:function(e,t,r){"use strict";var n=r(34948),i=r(3070),a=r(79114);e.exports=function(e,t,r){var o=n(t);o in e?i.f(e,o,a(0,r)):e[o]=r}},49974:function(e,t,r){var n=r(1702),i=r(19662),a=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:a?a(e,t):function(){return e.apply(t,arguments)}}},71246:function(e,t,r){var n=r(70648),i=r(58173),a=r(97497),o=r(5112)("iterator");e.exports=function(e){if(null!=e)return i(e,o)||i(e,"@@iterator")||a[n(e)]}},18554:function(e,t,r){var n=r(17854),i=r(46916),a=r(19662),o=r(19670),s=r(66330),u=r(71246),l=n.TypeError;e.exports=function(e,t){var r=arguments.length<2?u(e):t;if(a(r))return o(i(r,e));throw l(s(e)+" is not iterable")}},97659:function(e,t,r){var n=r(5112),i=r(97497),a=n("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[a]===e)}},20408:function(e,t,r){var n=r(17854),i=r(49974),a=r(46916),o=r(19670),s=r(66330),u=r(97659),l=r(26244),c=r(47976),f=r(18554),h=r(71246),p=r(99212),d=n.TypeError,v=function(e,t){this.stopped=e,this.result=t},g=v.prototype;e.exports=function(e,t,r){var n,y,m,b,w,x,k,S=r&&r.that,E=!(!r||!r.AS_ENTRIES),Z=!(!r||!r.IS_ITERATOR),I=!(!r||!r.INTERRUPTED),A=i(t,S),_=function(e){return n&&p(n,"normal",e),new v(!0,e)},T=function(e){return E?(o(e),I?A(e[0],e[1],_):A(e[0],e[1])):I?A(e,_):A(e)};if(Z)n=e;else{if(!(y=h(e)))throw d(s(e)+" is not iterable");if(u(y)){for(m=0,b=l(e);b>m;m++)if((w=T(e[m]))&&c(g,w))return w;return new v(!1)}n=f(e,y)}for(x=n.next;!(k=a(x,n)).done;){try{w=T(k.value)}catch(P){p(n,"throw",P)}if("object"==typeof w&&w&&c(g,w))return w}return new v(!1)}},99212:function(e,t,r){var n=r(46916),i=r(19670),a=r(58173);e.exports=function(e,t,r){var o,s;i(e);try{if(!(o=a(e,"return"))){if("throw"===t)throw r;return r}o=n(o,e)}catch(u){s=!0,o=u}if("throw"===t)throw r;if(s)throw o;return i(o),r}},97497:function(e){e.exports={}},78523:function(e,t,r){"use strict";var n=r(19662),i=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new i(e)}},12534:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},51694:function(e,t,r){var n={};n[r(5112)("toStringTag")]="z",e.exports="[object z]"===String(n)},38559:function(e,t,r){var n=r(82109),i=r(20408),a=r(86135);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,r){a(t,e,r)}),{AS_ENTRIES:!0}),t}})},17922:function(e,t,r){"use strict";var n=r(82109),i=r(46916),a=r(19662),o=r(78523),s=r(12534),u=r(20408);n({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=o.f(t),n=r.resolve,l=r.reject,c=s((function(){var r=a(t.resolve),o=[],s=0,l=1;u(e,(function(e){var a=s++,u=!1;l++,i(r,t,e).then((function(e){u||(u=!0,o[a]={status:"fulfilled",value:e},--l||n(o))}),(function(e){u||(u=!0,o[a]={status:"rejected",reason:e},--l||n(o))}))})),--l||n(o)}));return c.error&&l(c.value),r.promise}})},97314:function(e,t,r){r(17922)},18559:function(e,t,r){"use strict";r.d(t,{H:function(){return s}});var n=r(67294),i=function(e){var t;return"changedTouches"in e&&(null===(t=e.changedTouches)||void 0===t?void 0:t.length)>0?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:"clientX"in e&&"clientY"in e?{clientX:e.clientX,clientY:e.clientY}:null},a=function(){return{dndItems:[],keys:new Map,dragItem:null,hoverItem:null,canCheckHovered:!0,pointerPosition:{x:0,y:0}}},o=function(e){e.stopPropagation()},s=function(e){var t=e.mode,r=e.defaultItems,s=e.zIndex,u=void 0===s?100:s,l=e.duration,c=void 0===l?300:l,f=e.drop,h=(0,n.useState)(r),p=h[0],d=h[1],v=(0,n.useRef)(a()),g=function(e){e.cancelable&&e.preventDefault();var r=i(e);if(r){var n=r.clientX,a=r.clientY,o=v.current,s=o.dndItems,l=o.dragItem,c=o.pointerPosition;if(l){var f=n-c.x,h=a-c.y,p=l.element.style;if(p.zIndex=String(u),p.cursor="grabbing",p.transform="translate("+f+"px,"+h+"px)",v.current.canCheckHovered){v.current.canCheckHovered=!1,setTimeout((function(){return v.current.canCheckHovered=!0}),300);var g=s.findIndex((function(e){return e.key===l.key})),y=s.findIndex((function(r,n){var a=r.element;return n!==g&&function(e,t,r,n,a){void 0===r&&(r="grid");var o=i(e);if(!o)return!1;var s=o.clientX,u=o.clientY,l=t.getBoundingClientRect();switch(r){case"topbottom":return(u<l.bottom||n===a-1&&u>=l.bottom)&&(u>l.top||0===n&&u<=l.top);case"bottomtop":return(u<l.bottom||0===n&&u>=l.bottom)&&(u>l.top||n===a-1&&u<=l.top);case"leftright":return(s>l.left||0===n&&s<=l.left)&&(s<l.right||n===a-1&&s>=l.right);case"rightleft":return(s>l.left||n===a-1&&s<=l.left)&&(s<l.right||0===n&&s>=l.right);default:return u<l.bottom&&u>l.top&&s<l.right&&s>l.left}}(e,a,t,n,s.length)}));if(-1!==y){v.current.hoverItem={index:y,value:s[y].value},v.current.pointerPosition.x=n,v.current.pointerPosition.y=a,s.splice(g,1),s.splice(y,0,l);var m=l.element.getBoundingClientRect(),b=m.left,w=m.top;l.position={x:b,y:w},d(s.map((function(e){return e.value})))}}}}},y=function e(){var t=v.current,r=t.dragItem,n=t.hoverItem;if(null!==r){var i=r.element.style;i.zIndex="",i.cursor="",i.transform="",i.userSelect="",v.current.dragItem=null,v.current.hoverItem=null,window&&(window.removeEventListener("mouseup",e),window.removeEventListener("mousemove",g),window.removeEventListener("touchend",e),window.removeEventListener("touchmove",g));var a={index:r.index,value:r.value};f&&f(a,null!=n?n:a)}},m=n.useCallback((function(e){v.current=a(),d(e)}),[]);return{items:p.map((function(e,t){var r=v.current.keys.get(e)||Math.random().toString(16);v.current.keys.set(e,r);var n=function(n){var a=n.currentTarget,o=i(n);if(o){var s=o.clientX,u=o.clientY;v.current.pointerPosition.x=s,v.current.pointerPosition.y=u;var l=a.style;l.transition="",l.cursor="grabbing",l.userSelect="none";var c=a.getBoundingClientRect(),f={x:c.left,y:c.top};v.current.dragItem={key:r,value:e,element:a,position:f,index:t},v.current.hoverItem=null,window&&(window.addEventListener("mouseup",y),window.addEventListener("mousemove",g,{passive:!1}),window.addEventListener("touchend",y),window.addEventListener("touchmove",g,{passive:!1}))}};return{value:e,key:r,ref:function(t){if(t){var n=v.current,i=n.dndItems,a=n.dragItem,o=n.pointerPosition;t.style.transform="";var s=t.getBoundingClientRect(),u={x:s.left,y:s.top},l=i.findIndex((function(e){return e.key===r}));if(-1===l)return i.push({key:r,value:e,element:t,position:u,index:i.length});if((null==a?void 0:a.key)===r){var f=a.position.x-u.x,h=a.position.y-u.y;t.style.transform="translate("+f+"px,"+h+"px)",o.x-=f,o.y-=h}else{var p=i[l],d=p.position.x-u.x,g=p.position.y-u.y;t.style.transition="",t.style.transform="translate("+d+"px,"+g+"px)",requestAnimationFrame((function(){a&&(t.style.transition="all "+c+"ms"),t.style.transform=""}))}v.current.dndItems[l]={key:r,value:e,element:t,position:u,index:l}}},trigger:{onMouseDown:n,onTouchStart:n},propagation:{onMouseDown:o,onTouchStart:o}}})),reset:m}}},79435:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ni}});var n=r(15861),i=r(93433),a=r(87757),o=r.n(a),s=r(67294),u=r(2055),l=r(8177),c=r(10532),f=r(4942),h=r(63366),p=r(87462),d=r(85505),v=r(49408),g=r(67663),y=r(43656),m=r(47761),b=r(53679),w=r(49240),x=r(48416);function k(e){return(0,x.Z)("MuiIconButton",e)}var S,E=(0,r(62194).Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Z=r(85893),I=["edge","children","className","color","disabled","disableFocusRipple","size"],A=(0,y.ZP)(b.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,"default"!==r.color&&t["color".concat((0,w.Z)(r.color))],r.edge&&t["edge".concat((0,w.Z)(r.edge))],t["size".concat((0,w.Z)(r.size))]]}})((function(e){var t=e.theme,r=e.ownerState;return(0,p.Z)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:t.palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!r.disableRipple&&{"&:hover":{backgroundColor:(0,g.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===r.edge&&{marginLeft:"small"===r.size?-3:-12},"end"===r.edge&&{marginRight:"small"===r.size?-3:-12})}),(function(e){var t=e.theme,r=e.ownerState;return(0,p.Z)({},"inherit"===r.color&&{color:"inherit"},"inherit"!==r.color&&"default"!==r.color&&(0,p.Z)({color:t.palette[r.color].main},!r.disableRipple&&{"&:hover":{backgroundColor:(0,g.Fq)(t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===r.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===r.size&&{padding:12,fontSize:t.typography.pxToRem(28)},(0,f.Z)({},"&.".concat(E.disabled),{backgroundColor:"transparent",color:t.palette.action.disabled}))})),_=s.forwardRef((function(e,t){var r=(0,m.Z)({props:e,name:"MuiIconButton"}),n=r.edge,i=void 0!==n&&n,a=r.children,o=r.className,s=r.color,u=void 0===s?"default":s,l=r.disabled,c=void 0!==l&&l,f=r.disableFocusRipple,g=void 0!==f&&f,y=r.size,b=void 0===y?"medium":y,x=(0,h.Z)(r,I),S=(0,p.Z)({},r,{edge:i,color:u,disabled:c,disableFocusRipple:g,size:b}),E=function(e){var t=e.classes,r=e.disabled,n=e.color,i=e.edge,a=e.size,o={root:["root",r&&"disabled","default"!==n&&"color".concat((0,w.Z)(n)),i&&"edge".concat((0,w.Z)(i)),"size".concat((0,w.Z)(a))]};return(0,v.Z)(o,k,t)}(S);return(0,Z.jsx)(A,(0,p.Z)({className:(0,d.Z)(E.root,o),centerRipple:!0,focusRipple:!g,disabled:c,ref:t,ownerState:S},x,{children:a}))})),T=r(49308),P=r(85616),O=r(94382),R=r(4320),D=r(10026),C=r(76968),M=r(13827),F=r(34649),L=r(32990),j=r(41939),G=r(63015),U=r(54959),N=r(85338),B=r(1485),z=r(50162),V=r(21011),K=r(50008),q=r(76362),H=r(24973),W=r(77059),Y=r(42991),X=r(50147),$=r(79998),Q=r(90399),J=r(55594),ee=(S=function(e,t){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},S(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),te=function(e){function t(t){var r=this,n=void 0===t.projection?"EPSG:3857":t.projection,i=t.tileGrid;return void 0===i&&n&&(i=(0,X.dl)({extent:(0,X.Tl)(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),(r=e.call(this,{cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:n,tileGrid:i,opaque:t.opaque,state:t.state,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate})||this).tileLoadingKeys_={},r.loader_=t.loader,r.handleTileChange_=r.handleTileChange_.bind(r),r.bandCount=void 0===t.bandCount?4:t.bandCount,r}return ee(t,e),t.prototype.setLoader=function(e){this.loader_=e},t.prototype.getTile=function(e,t,r,n,i){var a=(0,$.lg)(e,t,r);if(this.tileCache.containsKey(a))return this.tileCache.get(a);var o=this.loader_;var s=new V.Z((0,Y.f0)({tileCoord:[e,t,r],loader:function(){return(0,J.Vi)((function(){return o(e,t,r)}))}},this.tileOptions));return s.key=this.getKey(),s.addEventListener(K.Z.CHANGE,this.handleTileChange_),this.tileCache.set(a,s),s},t.prototype.handleTileChange_=function(e){var t,r=e.target,n=(0,Q.sq)(r),i=r.getState();i==W.Z.LOADING?(this.tileLoadingKeys_[n]=!0,t=q.Z.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],t=i==W.Z.ERROR?q.Z.TILELOADERROR:i==W.Z.LOADED?q.Z.TILELOADEND:void 0),t&&this.dispatchEvent(new H.s(t,r))},t}(H.Z),re=r(38737),ne=r(27053),ie=r(29439),ae=r(60136),oe=r(6215),se=r(61120),ue=r(89611);function le(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ht){return!1}}function ce(e,t,r){return ce=le()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&(0,ue.Z)(i,r.prototype),i},ce.apply(null,arguments)}function fe(e){var t="function"==typeof Map?new Map:void 0;return fe=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ce(e,arguments,(0,se.Z)(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,ue.Z)(n,e)},fe(e)}var he=r(43144),pe=r(15671);function de(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return ge(e,t,n)}}function ve(e,t){return de(ye(e,t).get)}var ge=Reflect.apply,ye=(Reflect.construct,Reflect.defineProperty,Reflect.get,Reflect.getOwnPropertyDescriptor),me=Reflect.getPrototypeOf,be=(Reflect.has,Reflect.ownKeys),we=(Reflect.set,Reflect.setPrototypeOf,Proxy,Number),xe=(we.isFinite,we.isNaN,Symbol.iterator),ke=(Symbol.species,Symbol.toStringTag),Se=(Symbol.for,Object),Ee=Se.create,Ze=Se.defineProperty,Ie=(Se.freeze,Se.is,Se.prototype),Ae=(Ie.__lookupGetter__&&de(Ie.__lookupGetter__),Se.hasOwn||de(Ie.hasOwnProperty)),_e=Array,Te=(_e.isArray,_e.prototype),Pe=(de(Te.join),de(Te.push),de(Te.toLocaleString),Te[xe]),Oe=de(Pe),Re=(Math.trunc,ArrayBuffer),De=(Re.isView,Re.prototype),Ce=(de(De.slice),ve(De,"byteLength"),"undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null),Me=(Ce&&ve(Ce.prototype,"byteLength"),me(Uint8Array)),Fe=(Me.from,Me.prototype),Le=(Fe[xe],de(Fe.keys),de(Fe.values),de(Fe.entries),de(Fe.set),de(Fe.reverse),de(Fe.fill),de(Fe.copyWithin),de(Fe.sort),de(Fe.slice),de(Fe.subarray),ve(Fe,"buffer"),ve(Fe,"byteOffset"),ve(Fe,"length"),ve(Fe,ke),Uint16Array,Uint32Array),je=Float32Array,Ge=me([][xe]()),Ue=de(Ge.next),Ne=de(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))().next),Be=me(Ge),ze=DataView.prototype,Ve=de(ze.getUint16),Ke=(de(ze.setUint16),TypeError),qe=(RangeError,WeakSet.prototype),He=(de(qe.add),de(qe.has),WeakMap),We=He.prototype,Ye=de(We.get),Xe=(de(We.has),de(We.set));function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qe=new He,Je=Ee(null,(0,f.Z)({next:{value:function(){var e=Ye(Qe,this);return Ue(e)}}},xe,{value:function(){return this}}));function et(e){if(e[xe]===Pe)return e;var t=Ee(Je);return Xe(Qe,t,Oe(e)),t}var tt,rt=new He,nt=Ee(Be,{next:{value:function(){var e=Ye(rt,this);return Ne(e)},writable:!0,configurable:!0}}),it=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return $e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $e(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}(be(Ge));try{for(it.s();!(tt=it.n()).done;){var at=tt.value;"next"!==at&&Ze(nt,at,ye(Ge,at))}}catch(ii){it.e(ii)}finally{it.f()}for(var ot=new Re(4),st=new je(ot),ut=new Le(ot),lt=new Le(512),ct=new Le(512),ft=0;ft<256;++ft){var ht=ft-127;ht<-27?(lt[ft]=0,lt[256|ft]=32768,ct[ft]=24,ct[256|ft]=24):ht<-14?(lt[ft]=1024>>-ht-14,lt[256|ft]=1024>>-ht-14|32768,ct[ft]=-ht-1,ct[256|ft]=-ht-1):ht<=15?(lt[ft]=ht+15<<10,lt[256|ft]=ht+15<<10|32768,ct[ft]=13,ct[256|ft]=13):ht<128?(lt[ft]=31744,lt[256|ft]=64512,ct[ft]=24,ct[256|ft]=24):(lt[ft]=31744,lt[256|ft]=64512,ct[ft]=13,ct[256|ft]=13)}for(var pt=new Le(2048),dt=new Le(64),vt=new Le(64),gt=1;gt<1024;++gt){for(var yt=gt<<13,mt=0;0==(8388608&yt);)yt<<=1,mt-=8388608;yt&=-8388609,mt+=947912704,pt[gt]=yt|mt}for(var bt=1024;bt<2048;++bt)pt[bt]=939524096+(bt-1024<<13);for(var wt=1;wt<31;++wt)dt[wt]=wt<<23;dt[31]=1199570944,dt[32]=2147483648;for(var xt=33;xt<63;++xt)dt[xt]=2147483648+(xt-32<<23);dt[63]=3347054592;for(var kt=1;kt<64;++kt)32!==kt&&(vt[kt]=1024);function St(e){var t=e>>10;return ut[0]=pt[vt[t]+(1023&e)]+dt[t],st[0]}function Et(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return St(Ve.apply(void 0,[e,t].concat((0,i.Z)(et(n)))))}var Zt=r(13349),It=r.n(Zt),At=r(57690),_t=r.n(At),Tt=r(40134);function Pt(e,t){for(var r,n=e.width,i=e.height,a=new Uint8Array(n*i*3),o=0,s=0;o<e.length;++o,s+=3)r=256-e[o]/t*256,a[s]=r,a[s+1]=r,a[s+2]=r;return a}function Ot(e,t){for(var r,n=e.width,i=e.height,a=new Uint8Array(n*i*3),o=0,s=0;o<e.length;++o,s+=3)r=e[o]/t*256,a[s]=r,a[s+1]=r,a[s+2]=r;return a}function Rt(e,t){for(var r=e.width,n=e.height,i=new Uint8Array(r*n*3),a=t.length/3,o=t.length/3*2,s=0,u=0;s<e.length;++s,u+=3){var l=e[s];i[u]=t[l]/65536*256,i[u+1]=t[l+a]/65536*256,i[u+2]=t[l+o]/65536*256}return i}function Dt(e){for(var t=e.width,r=e.height,n=new Uint8Array(t*r*3),i=0,a=0;i<e.length;i+=4,a+=3){var o=e[i],s=e[i+1],u=e[i+2],l=e[i+3];n[a]=(255-o)/256*255*((255-l)/256),n[a+1]=(255-s)/256*255*((255-l)/256),n[a+2]=(255-u)/256*255*((255-l)/256)}return n}function Ct(e){for(var t=e.width,r=e.height,n=new Uint8ClampedArray(t*r*3),i=0,a=0;i<e.length;i+=3,a+=3){var o=e[i],s=e[i+1],u=e[i+2];n[a]=o+1.402*(u-128),n[a+1]=o-.34414*(s-128)-.71414*(u-128),n[a+2]=o+1.772*(s-128)}return n}function Mt(e){for(var t=e.width,r=e.height,n=new Uint8Array(t*r*3),i=0,a=0;i<e.length;i+=3,a+=3){var o=(e[i+0]+16)/116,s=(e[i+1]<<24>>24)/500+o,u=o-(e[i+2]<<24>>24)/200,l=void 0,c=void 0,f=void 0;c=-.9689*(s=.95047*(s*s*s>.008856?s*s*s:(s-16/116)/7.787))+1.8758*(o=1*(o*o*o>.008856?o*o*o:(o-16/116)/7.787))+.0415*(u=1.08883*(u*u*u>.008856?u*u*u:(u-16/116)/7.787)),f=.0557*s+-.204*o+1.057*u,l=(l=3.2406*s+-1.5372*o+-.4986*u)>.0031308?1.055*Math.pow(l,1/2.4)-.055:12.92*l,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:12.92*c,f=f>.0031308?1.055*Math.pow(f,1/2.4)-.055:12.92*f,n[a]=255*Math.max(0,Math.min(1,l)),n[a+1]=255*Math.max(0,Math.min(1,c)),n[a+2]=255*Math.max(0,Math.min(1,f))}return n}var Ft=new Map;function Lt(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){return Ft.set(e,t)}))}function jt(e){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,n.Z)(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ft.get(t.Compression)){e.next=3;break}throw new Error("Unknown compression method identifier: ".concat(t.Compression));case 3:return e.next=5,r();case 5:return n=e.sent,e.abrupt("return",new n(t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new(Object.getPrototypeOf(e).constructor)(t*r*n)}function Nt(e,t,r,n,i){var a=t/n,o=r/i;return e.map((function(e){for(var s=Ut(e,n,i),u=0;u<i;++u)for(var l=Math.min(Math.round(o*u),r-1),c=0;c<n;++c){var f=Math.min(Math.round(a*c),t-1),h=e[l*t+f];s[u*n+c]=h}return s}))}function Bt(e,t,r){return(1-r)*e+r*t}function zt(e,t,r,n,i){var a=t/n,o=r/i;return e.map((function(e){for(var s=Ut(e,n,i),u=0;u<i;++u)for(var l=o*u,c=Math.floor(l),f=Math.min(Math.ceil(l),r-1),h=0;h<n;++h){var p=a*h,d=p%1,v=Math.floor(p),g=Math.min(Math.ceil(p),t-1),y=e[c*t+v],m=e[c*t+g],b=e[f*t+v],w=e[f*t+g],x=Bt(Bt(y,m,d),Bt(b,w,d),l%1);s[u*n+h]=x}return s}))}function Vt(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nearest";switch(a.toLowerCase()){case"nearest":return Nt(e,t,r,n,i);case"bilinear":case"linear":return zt(e,t,r,n,i);default:throw new Error("Unsupported resampling method: '".concat(a,"'"))}}function Kt(e,t,r,n,i,a){for(var o=t/n,s=r/i,u=Ut(e,n,i,a),l=0;l<i;++l)for(var c=Math.min(Math.round(s*l),r-1),f=0;f<n;++f)for(var h=Math.min(Math.round(o*f),t-1),p=0;p<a;++p){var d=e[c*t*a+h*a+p];u[l*n*a+f*a+p]=d}return u}function qt(e,t,r,n,i,a){for(var o=t/n,s=r/i,u=Ut(e,n,i,a),l=0;l<i;++l)for(var c=s*l,f=Math.floor(c),h=Math.min(Math.ceil(c),r-1),p=0;p<n;++p)for(var d=o*p,v=d%1,g=Math.floor(d),y=Math.min(Math.ceil(d),t-1),m=0;m<a;++m){var b=e[f*t*a+g*a+m],w=e[f*t*a+y*a+m],x=e[h*t*a+g*a+m],k=e[h*t*a+y*a+m],S=Bt(Bt(b,w,v),Bt(x,k,v),c%1);u[l*n*a+p*a+m]=S}return u}function Ht(e,t,r,n,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest";switch(o.toLowerCase()){case"nearest":return Kt(e,t,r,n,i,a);case"bilinear":case"linear":return qt(e,t,r,n,i,a);default:throw new Error("Unsupported resampling method: '".concat(o,"'"))}}function Wt(e,t,r){for(var n=0,i=t;i<r;++i)n+=e[i];return n}function Yt(e,t,r){switch(e){case 1:if(t<=8)return new Uint8Array(r);if(t<=16)return new Uint16Array(r);if(t<=32)return new Uint32Array(r);break;case 2:if(8===t)return new Int8Array(r);if(16===t)return new Int16Array(r);if(32===t)return new Int32Array(r);break;case 3:switch(t){case 16:case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error("Unsupported data format/bitsPerSample")}function Xt(e,t){return(1!==e&&2!==e||!(t<=32)||t%8!=0)&&(3!==e||16!==t&&32!==t&&64!==t)}function $t(e,t,r,n,i,a,o){var s=new DataView(e),u=2===r?1:n,l=Yt(t,i,2===r?o*a:o*a*n),c=parseInt("1".repeat(i),2);if(1===t){var f=a*(1===r?n*i:i);0!=(7&f)&&(f=f+7&-8);for(var h=0;h<o;++h)for(var p=h*f,d=0;d<a;++d)for(var v=p+d*u*i,g=0;g<u;++g){var y=v+g*i,m=(h*a+d)*u+g,b=Math.floor(y/8),w=y%8;if(w+i<=8)l[m]=s.getUint8(b)>>8-i-w&c;else if(w+i<=16)l[m]=s.getUint16(b)>>16-i-w&c;else if(w+i<=24){var x=s.getUint16(b)<<8|s.getUint8(b+2);l[m]=x>>24-i-w&c}else l[m]=s.getUint32(b)>>32-i-w&c}}return l.buffer}Lt([void 0,1],(function(){return r.e(757).then(r.bind(r,37757)).then((function(e){return e.default}))})),Lt(5,(function(){return r.e(675).then(r.bind(r,99675)).then((function(e){return e.default}))})),Lt(6,(function(){throw new Error("old style JPEG compression is not supported.")})),Lt(7,(function(){return r.e(656).then(r.bind(r,46656)).then((function(e){return e.default}))})),Lt([8,32946],(function(){return Promise.all([r.e(655),r.e(427)]).then(r.bind(r,84427)).then((function(e){return e.default}))})),Lt(32773,(function(){return r.e(142).then(r.bind(r,25142)).then((function(e){return e.default}))})),Lt(34887,(function(){return Promise.all([r.e(655),r.e(591)]).then(r.bind(r,69591)).then((function(e){return e.default}))})),Lt(50001,(function(){return r.e(339).then(r.bind(r,27339)).then((function(e){return e.default}))}));var Qt=function(){function e(t,r,n,i,a,o){(0,pe.Z)(this,e),this.fileDirectory=t,this.geoKeys=r,this.dataView=n,this.littleEndian=i,this.tiles=a?{}:null,this.isTiled=!t.StripOffsets;var s=t.PlanarConfiguration;if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o}var t,r,i,a;return(0,he.Z)(e,[{key:"getFileDirectory",value:function(){return this.fileDirectory}},{key:"getGeoKeys",value:function(){return this.geoKeys}},{key:"getWidth",value:function(){return this.fileDirectory.ImageWidth}},{key:"getHeight",value:function(){return this.fileDirectory.ImageLength}},{key:"getSamplesPerPixel",value:function(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}},{key:"getTileWidth",value:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}},{key:"getTileHeight",value:function(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}},{key:"getBlockWidth",value:function(){return this.getTileWidth()}},{key:"getBlockHeight",value:function(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}},{key:"getBytesPerPixel",value:function(){for(var e=0,t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}},{key:"getSampleByteSize",value:function(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index ".concat(e," is out of range."));return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}},{key:"getReaderForSample",value:function(e){var t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(e,t){return Et(this,e,t)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}},{key:"getSampleFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}},{key:"getBitsPerSample",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.BitsPerSample[e]}},{key:"getArrayForSample",value:function(e,t){return Yt(this.getSampleFormat(e),this.getBitsPerSample(e),t)}},{key:"getTileOrStrip",value:(a=(0,n.Z)(o().mark((function e(t,r,i,a,s){var u,l,c,f,h,p,d,v,g=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Math.ceil(this.getWidth()/this.getTileWidth()),l=Math.ceil(this.getHeight()/this.getTileHeight()),f=this.tiles,1===this.planarConfiguration?c=r*u+t:2===this.planarConfiguration&&(c=i*u*l+r*u+t),this.isTiled?(h=this.fileDirectory.TileOffsets[c],p=this.fileDirectory.TileByteCounts[c]):(h=this.fileDirectory.StripOffsets[c],p=this.fileDirectory.StripByteCounts[c]),e.next=7,this.source.fetch([{offset:h,length:p}],s);case 7:return d=e.sent[0],null!==f&&f[c]?v=f[c]:(v=(0,n.Z)(o().mark((function e(){var t,n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.decode(g.fileDirectory,d);case 2:return t=e.sent,n=g.getSampleFormat(),i=g.getBitsPerSample(),Xt(n,i)&&(t=$t(t,n,g.planarConfiguration,g.getSamplesPerPixel(),i,g.getTileWidth(),g.getBlockHeight(r))),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))(),null!==f&&(f[c]=v)),e.t0=t,e.t1=r,e.t2=i,e.next=14,v;case 14:return e.t3=e.sent,e.abrupt("return",{x:e.t0,y:e.t1,sample:e.t2,data:e.t3});case 16:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,i){return a.apply(this,arguments)})},{key:"_readRaster",value:(i=(0,n.Z)(o().mark((function e(t,r,n,i,a,s,u,l,c){var f,h,p,d,v,g,y,m,b,w,x,k,S,E,Z,I,A,_,T,P,O=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(f=this.getTileWidth(),h=this.getTileHeight(),p=this.getWidth(),d=this.getHeight(),v=Math.max(Math.floor(t[0]/f),0),g=Math.min(Math.ceil(t[2]/f),Math.ceil(p/f)),y=Math.max(Math.floor(t[1]/h),0),m=Math.min(Math.ceil(t[3]/h),Math.ceil(d/h)),b=t[2]-t[0],w=this.getBytesPerPixel(),x=[],k=[],S=0;S<r.length;++S)1===this.planarConfiguration?x.push(Wt(this.fileDirectory.BitsPerSample,0,r[S])/8):x.push(0),k.push(this.getReaderForSample(r[S]));for(E=[],Z=this.littleEndian,I=y;I<m;++I)for(A=v;A<g;++A)for(_=function(e){var o=e,s=r[e];2===O.planarConfiguration&&(w=O.getSampleByteSize(e));var u=O.getTileOrStrip(A,I,s,a,c);E.push(u),u.then((function(e){for(var a=e.data,s=new DataView(a),u=O.getBlockHeight(e.y),l=e.y*h,c=e.x*f,v=l+u,g=(e.x+1)*f,y=k[o],m=Math.min(u,u-(v-t[3]),d-l),S=Math.min(f,f-(g-t[2]),p-c),E=Math.max(0,t[1]-l);E<m;++E)for(var I=Math.max(0,t[0]-c);I<S;++I){var A=(E*f+I)*w,_=y.call(s,A+x[o],Z),T=void 0;i?(T=(E+l-t[1])*b*r.length+(I+c-t[0])*r.length+o,n[T]=_):(T=(E+l-t[1])*b+I+c-t[0],n[o][T]=_)}}))},T=0;T<r.length;++T)_(T);return e.next=18,Promise.all(E);case 18:if(!(s&&t[2]-t[0]!==s||u&&t[3]-t[1]!==u)){e.next=23;break}return(P=i?Ht(n,t[2]-t[0],t[3]-t[1],s,u,r.length,l):Vt(n,t[2]-t[0],t[3]-t[1],s,u,l)).width=s,P.height=u,e.abrupt("return",P);case 23:return n.width=s||t[2]-t[0],n.height=u||t[3]-t[1],e.abrupt("return",n);case 26:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,a,o,s,u,l){return i.apply(this,arguments)})},{key:"readRasters",value:(r=(0,n.Z)(o().mark((function e(){var t,r,n,i,a,s,u,l,c,f,h,p,d,v,g,y,m,b,w,x,k,S,E,Z,I,A,_=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_.length>0&&void 0!==_[0]?_[0]:{},r=t.window,n=t.samples,i=void 0===n?[]:n,a=t.interleave,s=t.pool,u=void 0===s?null:s,l=t.width,c=t.height,f=t.resampleMethod,h=t.fillValue,p=t.signal,!((d=r||[0,0,this.getWidth(),this.getHeight()])[0]>d[2]||d[1]>d[3])){e.next=4;break}throw new Error("Invalid subsets");case 4:if(v=d[2]-d[0],g=d[3]-d[1],y=v*g,m=this.getSamplesPerPixel(),i&&i.length){e.next=12;break}for(b=0;b<m;++b)i.push(b);e.next=19;break;case 12:w=0;case 13:if(!(w<i.length)){e.next=19;break}if(!(i[w]>=m)){e.next=16;break}return e.abrupt("return",Promise.reject(new RangeError("Invalid sample index '".concat(i[w],"'."))));case 16:++w,e.next=13;break;case 19:if(a)k=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,S=Math.max.apply(null,this.fileDirectory.BitsPerSample),x=Yt(k,S,y*i.length),h&&x.fill(h);else for(x=[],E=0;E<i.length;++E)Z=this.getArrayForSample(i[E],y),Array.isArray(h)&&E<h.length?Z.fill(h[E]):h&&!Array.isArray(h)&&Z.fill(h),x.push(Z);if(e.t0=u,e.t0){e.next=25;break}return e.next=24,jt(this.fileDirectory);case 24:e.t0=e.sent;case 25:return I=e.t0,e.next=28,this._readRaster(d,i,x,a,I,l,c,f,p);case 28:return A=e.sent,e.abrupt("return",A);case 30:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"readRGB",value:(t=(0,n.Z)(o().mark((function e(){var t,r,n,i,a,s,u,l,c,f,h,p,d,v,g,y,m,b,w,x,k,S,E,Z,I,A,_,T=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=T.length>0&&void 0!==T[0]?T[0]:{},r=t.window,n=t.interleave,i=void 0===n||n,a=t.pool,s=void 0===a?null:a,u=t.width,l=t.height,c=t.resampleMethod,f=t.enableAlpha,h=void 0!==f&&f,p=t.signal,!((d=r||[0,0,this.getWidth(),this.getHeight()])[0]>d[2]||d[1]>d[3])){e.next=4;break}throw new Error("Invalid subsets");case 4:if((v=this.fileDirectory.PhotometricInterpretation)!==Tt.Ie.RGB){e.next=9;break}if(g=[0,1,2],this.fileDirectory.ExtraSamples!==Tt.pd.Unspecified&&h)for(g=[],y=0;y<this.fileDirectory.BitsPerSample.length;y+=1)g.push(y);return e.abrupt("return",this.readRasters({window:r,interleave:i,samples:g,pool:s,width:u,height:l,resampleMethod:c,signal:p}));case 9:e.t0=v,e.next=e.t0===Tt.Ie.WhiteIsZero||e.t0===Tt.Ie.BlackIsZero||e.t0===Tt.Ie.Palette?12:e.t0===Tt.Ie.CMYK?14:e.t0===Tt.Ie.YCbCr||e.t0===Tt.Ie.CIELab?16:18;break;case 12:return m=[0],e.abrupt("break",19);case 14:return m=[0,1,2,3],e.abrupt("break",19);case 16:return m=[0,1,2],e.abrupt("break",19);case 18:throw new Error("Invalid or unsupported photometric interpretation.");case 19:return b={window:d,interleave:!0,samples:m,pool:s,width:u,height:l,resampleMethod:c,signal:p},w=this.fileDirectory,e.next=23,this.readRasters(b);case 23:x=e.sent,k=Math.pow(2,this.fileDirectory.BitsPerSample[0]),e.t1=v,e.next=e.t1===Tt.Ie.WhiteIsZero?28:e.t1===Tt.Ie.BlackIsZero?30:e.t1===Tt.Ie.Palette?32:e.t1===Tt.Ie.CMYK?34:e.t1===Tt.Ie.YCbCr?36:e.t1===Tt.Ie.CIELab?38:40;break;case 28:return S=Pt(x,k),e.abrupt("break",41);case 30:return S=Ot(x,k),e.abrupt("break",41);case 32:return S=Rt(x,w.ColorMap),e.abrupt("break",41);case 34:return S=Dt(x),e.abrupt("break",41);case 36:return S=Ct(x),e.abrupt("break",41);case 38:return S=Mt(x),e.abrupt("break",41);case 40:throw new Error("Unsupported photometric interpretation.");case 41:if(!i){for(E=new Uint8Array(S.length/3),Z=new Uint8Array(S.length/3),I=new Uint8Array(S.length/3),A=0,_=0;A<S.length;A+=3,++_)E[_]=S[A],Z[_]=S[A+1],I[_]=S[A+2];S=[E,Z,I]}return S.width=x.width,S.height=x.height,e.abrupt("return",S);case 45:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getTiePoints",value:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var e=[],t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}},{key:"getGDALMetadata",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={};if(!this.fileDirectory.GDAL_METADATA)return null;var r=this.fileDirectory.GDAL_METADATA,n=_t()(r,"Item");n=null===e?n.filter((function(e){return void 0===It()(e,"sample")})):n.filter((function(t){return Number(It()(t,"sample"))===e}));for(var i=0;i<n.length;++i){var a=n[i];t[It()(a,"name")]=a.inner}return t}},{key:"getGDALNoData",value:function(){if(!this.fileDirectory.GDAL_NODATA)return null;var e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}},{key:"getOrigin",value:function(){var e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}},{key:"getResolution",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(r)return[r[0],r[5],r[10]];if(e){var n=e.getResolution(),i=(0,ie.Z)(n,3),a=i[0],o=i[1],s=i[2];return[a*e.getWidth()/this.getWidth(),o*e.getHeight()/this.getHeight(),s*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}},{key:"pixelIsArea",value:function(){return 1===this.geoKeys.GTRasterTypeGeoKey}},{key:"getBoundingBox",value:function(){var e=this.getOrigin(),t=this.getResolution(),r=e[0],n=e[1],i=r+t[0]*this.getWidth(),a=n+t[1]*this.getHeight();return[Math.min(r,i),Math.min(n,a),Math.max(r,i),Math.max(n,a)]}}]),e}(),Jt=Qt,er=function(){function e(t){(0,pe.Z)(this,e),this._dataView=new DataView(t)}return(0,he.Z)(e,[{key:"buffer",get:function(){return this._dataView.buffer}},{key:"getUint64",value:function(e,t){var r,n=this.getUint32(e,t),i=this.getUint32(e+4,t);if(t){if(r=n+Math.pow(2,32)*i,!Number.isSafeInteger(r))throw new Error("".concat(r," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return r}if(r=Math.pow(2,32)*n+i,!Number.isSafeInteger(r))throw new Error("".concat(r," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return r}},{key:"getInt64",value:function(e,t){for(var r=0,n=(128&this._dataView.getUint8(e+(t?7:0)))>0,i=!0,a=0;a<8;a++){var o=this._dataView.getUint8(e+(t?a:7-a));n&&(i?0!==o&&(o=255&~(o-1),i=!1):o=255&~o),r+=o*Math.pow(256,a)}return n&&(r=-r),r}},{key:"getUint8",value:function(e,t){return this._dataView.getUint8(e,t)}},{key:"getInt8",value:function(e,t){return this._dataView.getInt8(e,t)}},{key:"getUint16",value:function(e,t){return this._dataView.getUint16(e,t)}},{key:"getInt16",value:function(e,t){return this._dataView.getInt16(e,t)}},{key:"getUint32",value:function(e,t){return this._dataView.getUint32(e,t)}},{key:"getInt32",value:function(e,t){return this._dataView.getInt32(e,t)}},{key:"getFloat16",value:function(e,t){return Et(this._dataView,e,t)}},{key:"getFloat32",value:function(e,t){return this._dataView.getFloat32(e,t)}},{key:"getFloat64",value:function(e,t){return this._dataView.getFloat64(e,t)}}]),e}(),tr=function(){function e(t,r,n,i){(0,pe.Z)(this,e),this._dataView=new DataView(t),this._sliceOffset=r,this._littleEndian=n,this._bigTiff=i}return(0,he.Z)(e,[{key:"sliceOffset",get:function(){return this._sliceOffset}},{key:"sliceTop",get:function(){return this._sliceOffset+this.buffer.byteLength}},{key:"littleEndian",get:function(){return this._littleEndian}},{key:"bigTiff",get:function(){return this._bigTiff}},{key:"buffer",get:function(){return this._dataView.buffer}},{key:"covers",value:function(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}},{key:"readUint8",value:function(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}},{key:"readInt8",value:function(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}},{key:"readUint16",value:function(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}},{key:"readInt16",value:function(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}},{key:"readUint32",value:function(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}},{key:"readInt32",value:function(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}},{key:"readFloat32",value:function(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}},{key:"readFloat64",value:function(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}},{key:"readUint64",value:function(e){var t,r=this.readUint32(e),n=this.readUint32(e+4);if(this._littleEndian){if(t=r+Math.pow(2,32)*n,!Number.isSafeInteger(t))throw new Error("".concat(t," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return t}if(t=Math.pow(2,32)*r+n,!Number.isSafeInteger(t))throw new Error("".concat(t," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return t}},{key:"readInt64",value:function(e){for(var t=0,r=(128&this._dataView.getUint8(e+(this._littleEndian?7:0)))>0,n=!0,i=0;i<8;i++){var a=this._dataView.getUint8(e+(this._littleEndian?i:7-i));r&&(n?0!==a&&(a=255&~(a-1),n=!1):a=255&~a),t+=a*Math.pow(256,i)}return r&&(t=-t),t}},{key:"readOffset",value:function(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}]),e}();function rr(e,t){if(null==e)return{};var r,n,i=(0,h.Z)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var nr=r(83878),ir=r(59199),ar=r(40181),or=r(25267);r(38559);function sr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ur(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lr="\r\n\r\n";function cr(e){if(void 0!==Object.fromEntries)return Object.fromEntries(e);var t,r={},n=sr(e);try{for(n.s();!(t=n.n()).done;){var i=(0,ie.Z)(t.value,2),a=i[0],o=i[1];r[a.toLowerCase()]=o}}catch(ii){n.e(ii)}finally{n.f()}return r}function fr(e){return cr(e.split("\r\n").map((function(e){var t=e.split(":").map((function(e){return e.trim()}));return t[0]=t[0].toLowerCase(),t})))}function hr(e){var t,r=e.split(";").map((function(e){return e.trim()})),n=(t=r,(0,nr.Z)(t)||(0,ir.Z)(t)||(0,ar.Z)(t)||(0,or.Z)());return{type:n[0],params:cr(n.slice(1).map((function(e){return e.split("=")})))}}function pr(e){var t,r,n;if(e){var i=e.match(/bytes (\d+)-(\d+)\/(\d+)/),a=(0,ie.Z)(i,4);t=a[1],r=a[2],n=a[3],t=parseInt(t,10),r=parseInt(r,10),n=parseInt(n,10)}return{start:t,end:r,total:n}}function dr(e,t){for(var r=null,n=new TextDecoder("ascii"),i=[],a="--".concat(t),o="".concat(a,"--"),s=0;s<10;++s){n.decode(new Uint8Array(e,s,a.length))===a&&(r=s)}if(null===r)throw new Error("Could not find initial boundary");for(;r<e.byteLength;){var u=n.decode(new Uint8Array(e,r,Math.min(a.length+1024,e.byteLength-r)));if(0===u.length||u.startsWith(o))break;if(!u.startsWith(a))throw new Error("Part does not start with boundary");var l=u.substr(a.length+2);if(0===l.length)break;var c=l.indexOf(lr),f=fr(l.substr(0,c)),h=pr(f["content-range"]),p=h.start,d=h.end,v=h.total,g=r+a.length+c+lr.length,y=parseInt(d,10)+1-parseInt(p,10);i.push({headers:f,data:e.slice(g,g+y),offset:p,length:y,fileSize:v}),r=g+y+4}return i}var vr=function(){function e(){(0,pe.Z)(this,e)}var t,r,i;return(0,he.Z)(e,[{key:"fetch",value:(i=(0,n.Z)(o().mark((function e(t){var r,n=this,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:void 0,e.abrupt("return",Promise.all(t.map((function(e){return n.fetchSlice(e,r)}))));case 2:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"fetchSlice",value:(r=(0,n.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("fetching of slice ".concat(t," not possible, not implemented"));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"fileSize",get:function(){return null}},{key:"close",value:(t=(0,n.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}(),gr=(r(97314),r(55660)),yr=r.n(gr),mr=r(97326);function br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ht){return!1}}();return function(){var r,n=(0,se.Z)(e);if(t){var i=(0,se.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,oe.Z)(this,r)}}function wr(e){return xr.apply(this,arguments)}function xr(){return(xr=(0,n.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kr(e,t){var r=Array.isArray(e)?e:Array.from(e),n=Array.isArray(t)?t:Array.from(t);return r.map((function(e,t){return[e,n[t]]}))}var Sr=function(e){(0,ae.Z)(r,e);var t=br(r);function r(e){var n;return(0,pe.Z)(this,r),n=t.call(this,e),Error.captureStackTrace&&Error.captureStackTrace((0,mr.Z)(n),r),n.name="AbortError",n}return(0,he.Z)(r)}(fe(Error)),Er=function(e){(0,ae.Z)(r,e);var t=br(r);function r(e,n){var i;return(0,pe.Z)(this,r),(i=t.call(this,n)).errors=e,i.message=n,i.name="AggregateError",i}return(0,he.Z)(r)}(fe(Error));function Zr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ir(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ir(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function Ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ht){return!1}}();return function(){var r,n=(0,se.Z)(e);if(t){var i=(0,se.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,oe.Z)(this,r)}}var _r=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,pe.Z)(this,e),this.offset=t,this.length=r,this.data=n}return(0,he.Z)(e,[{key:"top",get:function(){return this.offset+this.length}}]),e}(),Tr=(0,he.Z)((function e(t,r,n){(0,pe.Z)(this,e),this.offset=t,this.length=r,this.blockIds=n})),Pr=function(e){(0,ae.Z)(i,e);var t,r=Ar(i);function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.blockSize,o=void 0===a?65536:a,s=n.cacheSize,u=void 0===s?100:s;return(0,pe.Z)(this,i),(t=r.call(this)).source=e,t.blockSize=o,t.blockCache=new(yr())({max:u}),t.blockRequests=new Map,t.blockIdsToFetch=new Set,t}return(0,he.Z)(i,[{key:"fileSize",get:function(){return this.source.fileSize}},{key:"fetch",value:(t=(0,n.Z)(o().mark((function e(t,r){var n,i,a,s,u,l,c,f,h,p,d,v,g,y,m,b,w,x,k,S,E,Z,I,A,_,T,P,O,R,D,C,M,F,L,j,G,U,N;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Map,i=new Map,a=new Set,s=Zr(t);try{for(s.s();!(u=s.n()).done;)for(l=u.value,c=l.offset,f=l.length,h=c+f,null!==(p=this.fileSize)&&(h=Math.min(h,p)),d=Math.floor(c/this.blockSize)*this.blockSize,v=d;v<h;v+=this.blockSize)g=Math.floor(v/this.blockSize),this.blockCache.has(g)?n.set(g,this.blockCache.get(g)):this.blockRequests.has(g)?i.set(g,this.blockRequests.get(g)):(this.blockIdsToFetch.has(g)||this.blockIdsToFetch.add(g),a.add(g))}catch(ii){s.e(ii)}finally{s.f()}return e.next=7,wr();case 7:this.fetchBlocks(r),y=Zr(a),e.prev=9,y.s();case 11:if((m=y.n()).done){e.next=26;break}if(b=m.value,w=this.blockRequests.get(b),x=this.blockCache.get(b),!w){e.next=19;break}i.set(b,w),e.next=24;break;case 19:if(!x){e.next=23;break}n.set(b,x),e.next=24;break;case 23:throw new Error("Block ".concat(b," is not in the block requests"));case 24:e.next=11;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(9),y.e(e.t0);case 31:return e.prev=31,y.f(),e.finish(31);case 34:return e.next=36,Promise.allSettled(Array.from(i.values()));case 36:if(!(k=e.sent).some((function(e){return"rejected"===e.status}))){e.next=65;break}S=new Set,E=Zr(kr(i.keys(),k));try{for(E.s();!(Z=E.n()).done;)I=(0,ie.Z)(Z.value,2),A=I[0],_=I[1],T=_.rejected,P=_.reason,T&&"AbortError"===P.name&&P.signal!==r&&(this.blockIdsToFetch.add(A),S.add(A))}catch(ii){E.e(ii)}finally{E.f()}if(!(this.blockIdsToFetch.length>0)){e.next=65;break}this.fetchBlocks(r),O=Zr(S),e.prev=44,O.s();case 46:if((R=O.n()).done){e.next=54;break}if(D=R.value,C=this.blockRequests.get(D)){e.next=51;break}throw new Error("Block ".concat(D," is not in the block requests"));case 51:i.set(D,C);case 52:e.next=46;break;case 54:e.next=59;break;case 56:e.prev=56,e.t1=e.catch(44),O.e(e.t1);case 59:return e.prev=59,O.f(),e.finish(59);case 62:return e.next=64,Promise.allSettled(Array.from(i.values()));case 64:k=e.sent;case 65:if(!k.some((function(e){return"rejected"===e.status}))){e.next=69;break}if(!r||!r.aborted){e.next=68;break}throw new Sr("Request was aborted");case 68:throw new Er(k.filter((function(e){return"rejected"===e.status})).map((function(e){return e.reason})),"Request failed");case 69:M=k.map((function(e){return e.value})),F=new Map(kr(Array.from(i.keys()),M)),L=Zr(n);try{for(L.s();!(j=L.n()).done;)G=(0,ie.Z)(j.value,2),U=G[0],N=G[1],F.set(U,N)}catch(ii){L.e(ii)}finally{L.f()}return e.abrupt("return",this.readSliceData(t,F));case 74:case"end":return e.stop()}}),e,this,[[9,28,31,34],[44,56,59,62]])}))),function(e,r){return t.apply(this,arguments)})},{key:"fetchBlocks",value:function(e){var t=this;this.blockIdsToFetch.size>0&&function(){for(var r=t.groupBlocks(t.blockIdsToFetch),i=t.source.fetch(r,e),a=function(a){var s,u=Zr(r[a].blockIds);try{var l=function(){var r=s.value,u=(0,n.Z)(o().mark((function n(){var s,u,l,c,f,h;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i;case 3:return n.t0=a,s=n.sent[n.t0],u=r*t.blockSize,l=u-s.offset,c=Math.min(l+t.blockSize,s.data.byteLength),f=s.data.slice(l,c),h=new _r(u,f.byteLength,f),t.blockCache.set(r,h),n.abrupt("return",h);case 14:throw n.prev=14,n.t1=n.catch(0),"AbortError"===n.t1.name&&(n.t1.signal=e),n.t1;case 18:return n.prev=18,t.blockRequests.delete(r),n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[0,14,18,21]])})))();t.blockRequests.set(r,u)};for(u.s();!(s=u.n()).done;)l()}catch(ii){u.e(ii)}finally{u.f()}},s=0;s<r.length;++s)a(s);t.blockIdsToFetch.clear()}()}},{key:"groupBlocks",value:function(e){var t=Array.from(e).sort((function(e,t){return e-t}));if(0===t.length)return[];var r,n=[],i=null,a=[],o=Zr(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;null===i||i+1===s?(n.push(s),i=s):(a.push(new Tr(n[0]*this.blockSize,n.length*this.blockSize,n)),n=[s],i=s)}}catch(ii){o.e(ii)}finally{o.f()}return a.push(new Tr(n[0]*this.blockSize,n.length*this.blockSize,n)),a}},{key:"readSliceData",value:function(e,t){var r=this;return e.map((function(e){for(var n=e.offset+e.length,i=Math.floor(e.offset/r.blockSize),a=Math.floor((e.offset+e.length)/r.blockSize),o=new ArrayBuffer(e.length),s=new Uint8Array(o),u=i;u<=a;++u){var l=t.get(u),c=l.offset-e.offset,f=0,h=0,p=void 0;c<0?f=-c:c>0&&(h=c),p=l.top-n<0?l.length-f:n-l.offset-f;var d=new Uint8Array(l.data,f,p);s.set(d,h)}return o}))}}]),i}(vr),Or=function(){function e(){(0,pe.Z)(this,e)}var t;return(0,he.Z)(e,[{key:"ok",get:function(){return this.status>=200&&this.status<=299}},{key:"status",get:function(){throw new Error("not implemented")}},{key:"getHeader",value:function(e){throw new Error("not implemented")}},{key:"getData",value:(t=(0,n.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("not implemented");case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}(),Rr=function(){function e(t){(0,pe.Z)(this,e),this.url=t}var t;return(0,he.Z)(e,[{key:"request",value:(t=(0,n.Z)(o().mark((function e(){var t,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw(t=r.length>0&&void 0!==r[0]?r[0]:{}).headers,t.credentials,t.signal,new Error("request is not implemented");case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}();function Dr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ht){return!1}}();return function(){var r,n=(0,se.Z)(e);if(t){var i=(0,se.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,oe.Z)(this,r)}}var Cr=function(e){(0,ae.Z)(i,e);var t,r=Dr(i);function i(e){var t;return(0,pe.Z)(this,i),(t=r.call(this)).response=e,t}return(0,he.Z)(i,[{key:"status",get:function(){return this.response.status}},{key:"getHeader",value:function(e){return this.response.headers.get(e)}},{key:"getData",value:(t=(0,n.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.response.arrayBuffer){e.next=6;break}return e.next=3,this.response.arrayBuffer();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,this.response.buffer();case 8:e.t0=e.sent.buffer;case 9:return t=e.t0,e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}(Or),Mr=function(e){(0,ae.Z)(i,e);var t,r=Dr(i);function i(e,t){var n;return(0,pe.Z)(this,i),(n=r.call(this,e)).credentials=t,n}return(0,he.Z)(i,[{key:"request",value:(t=(0,n.Z)(o().mark((function e(){var t,r,n,i,a,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},r=t.headers,n=t.credentials,i=t.signal,e.next=3,fetch(this.url,{headers:r,credentials:n,signal:i});case 3:return a=e.sent,e.abrupt("return",new Cr(a));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}(Rr);function Fr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ht){return!1}}();return function(){var r,n=(0,se.Z)(e);if(t){var i=(0,se.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,oe.Z)(this,r)}}var Lr=function(e){(0,ae.Z)(i,e);var t,r=Fr(i);function i(e,t){var n;return(0,pe.Z)(this,i),(n=r.call(this)).xhr=e,n.data=t,n}return(0,he.Z)(i,[{key:"status",get:function(){return this.xhr.status}},{key:"getHeader",value:function(e){return this.xhr.getResponseHeader(e)}},{key:"getData",value:(t=(0,n.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.data);case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}(Or),jr=function(e){(0,ae.Z)(i,e);var t,r=Fr(i);function i(){return(0,pe.Z)(this,i),r.apply(this,arguments)}return(0,he.Z)(i,[{key:"constructRequest",value:function(e,t){var r=this;return new Promise((function(n,i){var a=new XMLHttpRequest;a.open("GET",r.url),a.responseType="arraybuffer";for(var o=0,s=Object.entries(e);o<s.length;o++){var u=(0,ie.Z)(s[o],2),l=u[0],c=u[1];a.setRequestHeader(l,c)}a.onload=function(){var e=a.response;n(new Lr(a,e))},a.onerror=i,a.onabort=function(){return i(new Sr("Request aborted"))},a.send(),t&&(t.aborted&&a.abort(),t.addEventListener("abort",(function(){return a.abort()})))}))}},{key:"request",value:(t=(0,n.Z)(o().mark((function e(){var t,r,n,i,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.headers,n=t.signal,e.next=3,this.constructRequest(r,n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}(Rr),Gr=r(29377),Ur=r.n(Gr),Nr=r(78391),Br=r.n(Nr),zr=r(11555),Vr=r.n(zr);function Kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(r),!0).forEach((function(t){(0,f.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ht){return!1}}();return function(){var r,n=(0,se.Z)(e);if(t){var i=(0,se.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,oe.Z)(this,r)}}var Wr=function(e){(0,ae.Z)(i,e);var t,r=Hr(i);function i(e,t){var n;return(0,pe.Z)(this,i),(n=r.call(this)).response=e,n.dataPromise=t,n}return(0,he.Z)(i,[{key:"status",get:function(){return this.response.statusCode}},{key:"getHeader",value:function(e){return this.response.headers[e]}},{key:"getData",value:(t=(0,n.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dataPromise;case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}(Or),Yr=function(e){(0,ae.Z)(i,e);var t,r=Hr(i);function i(e){var t;return(0,pe.Z)(this,i),(t=r.call(this,e)).parsedUrl=Vr().parse(t.url),t.httpApi="http:"===t.parsedUrl.protocol?Ur():Br(),t}return(0,he.Z)(i,[{key:"constructRequest",value:function(e,t){var r=this;return new Promise((function(n,i){var a=r.httpApi.get(qr(qr({},r.parsedUrl),{},{headers:e}),(function(e){var t=new Promise((function(t){var r=[];e.on("data",(function(e){r.push(e)})),e.on("end",(function(){var e=Buffer.concat(r).buffer;t(e)})),e.on("error",i)}));n(new Wr(e,t))}));a.on("error",i),t&&(t.aborted&&a.destroy(new Sr("Request aborted")),t.addEventListener("abort",(function(){return a.destroy(new Sr("Request aborted"))})))}))}},{key:"request",value:(t=(0,n.Z)(o().mark((function e(){var t,r,n,i,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.headers,n=t.signal,e.next=3,this.constructRequest(r,n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}(Rr),Xr=["headers","credentials","maxRanges","allowFullFile"],$r=["headers","maxRanges","allowFullFile"],Qr=["headers","maxRanges","allowFullFile"],Jr=["forceXHR"];function en(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?en(Object(r),!0).forEach((function(t){(0,f.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):en(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ht){return!1}}();return function(){var r,n=(0,se.Z)(e);if(t){var i=(0,se.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,oe.Z)(this,r)}}var nn=function(e){(0,ae.Z)(s,e);var t,r,i,a=rn(s);function s(e,t,r,n){var i;return(0,pe.Z)(this,s),(i=a.call(this)).client=e,i.headers=t,i.maxRanges=r,i.allowFullFile=n,i._fileSize=null,i}return(0,he.Z)(s,[{key:"fetch",value:(i=(0,n.Z)(o().mark((function e(t,r){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.maxRanges>=t.length)){e.next=4;break}return e.abrupt("return",this.fetchSlices(t,r));case 4:this.maxRanges>0&&t.length;case 5:return e.abrupt("return",Promise.all(t.map((function(e){return n.fetchSlice(e,r)}))));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"fetchSlices",value:(r=(0,n.Z)(o().mark((function e(t,r){var n,i,a,s,u,l,c,f,h,p,d,v,g,y=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.request({headers:tn(tn({},this.headers),{},{Range:"bytes=".concat(t.map((function(e){var t=e.offset,r=e.length;return"".concat(t,"-").concat(t+r)})).join(","))}),signal:r});case 2:if((n=e.sent).ok){e.next=7;break}throw new Error("Error fetching data.");case 7:if(206!==n.status){e.next=32;break}if(i=hr(n.getHeader("content-type")),a=i.type,s=i.params,"multipart/byteranges"!==a){e.next=18;break}return e.t0=dr,e.next=13,n.getData();case 13:return e.t1=e.sent,e.t2=s.boundary,u=(0,e.t0)(e.t1,e.t2),this._fileSize=u[0].fileSize||null,e.abrupt("return",u);case 18:return e.next=20,n.getData();case 20:if(l=e.sent,c=pr(n.getHeader("content-range")),f=c.start,h=c.end,p=c.total,this._fileSize=p||null,d=[{data:l,offset:f,length:h-f}],!(t.length>1)){e.next=29;break}return e.next=27,Promise.all(t.slice(1).map((function(e){return y.fetchSlice(e,r)})));case 27:return v=e.sent,e.abrupt("return",d.concat(v));case 29:return e.abrupt("return",d);case 32:if(this.allowFullFile){e.next=34;break}throw new Error("Server responded with full file");case 34:return e.next=36,n.getData();case 36:return g=e.sent,this._fileSize=g.byteLength,e.abrupt("return",[{data:g,offset:0,length:g.byteLength}]);case 39:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"fetchSlice",value:(t=(0,n.Z)(o().mark((function e(t,r){var n,i,a,s,u,l,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.offset,i=t.length,e.next=3,this.client.request({headers:tn(tn({},this.headers),{},{Range:"bytes=".concat(n,"-").concat(n+i)}),signal:r});case 3:if((a=e.sent).ok){e.next=8;break}throw new Error("Error fetching data.");case 8:if(206!==a.status){e.next=17;break}return e.next=11,a.getData();case 11:return s=e.sent,u=pr(a.getHeader("content-range")),l=u.total,this._fileSize=l||null,e.abrupt("return",{data:s,offset:n,length:i});case 17:if(this.allowFullFile){e.next=19;break}throw new Error("Server responded with full file");case 19:return e.next=21,a.getData();case 21:return c=e.sent,this._fileSize=c.byteLength,e.abrupt("return",{data:c,offset:0,length:c.byteLength});case 24:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"fileSize",get:function(){return this._fileSize}}]),s}(vr);function an(e,t){var r=t.blockSize,n=t.cacheSize;return null===r?e:new Pr(e,r,n)}function on(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.headers,n=void 0===r?{}:r,i=t.credentials,a=t.maxRanges,o=void 0===a?0:a,s=t.allowFullFile,u=void 0!==s&&s,l=rr(t,Xr),c=new Mr(e,i),f=new nn(c,n,o,u);return an(f,l)}function sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.headers,n=void 0===r?{}:r,i=t.maxRanges,a=void 0===i?0:i,o=t.allowFullFile,s=void 0!==o&&o,u=rr(t,$r),l=new jr(e),c=new nn(l,n,a,s);return an(c,u)}function un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.headers,n=void 0===r?{}:r,i=t.maxRanges,a=void 0===i?0:i,o=t.allowFullFile,s=void 0!==o&&o,u=rr(t,Qr),l=new Yr(e),c=new nn(l,n,a,s);return an(c,u)}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.forceXHR,n=void 0!==r&&r,i=rr(t,Jr);return"function"!=typeof fetch||n?"undefined"!=typeof XMLHttpRequest?sn(e,i):un(e,i):on(e,i)}function cn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(r),!0).forEach((function(t){(0,f.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ht){return!1}}();return function(){var r,n=(0,se.Z)(e);if(t){var i=(0,se.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,oe.Z)(this,r)}}function pn(e){switch(e){case Tt.sf.BYTE:case Tt.sf.ASCII:case Tt.sf.SBYTE:case Tt.sf.UNDEFINED:return 1;case Tt.sf.SHORT:case Tt.sf.SSHORT:return 2;case Tt.sf.LONG:case Tt.sf.SLONG:case Tt.sf.FLOAT:case Tt.sf.IFD:return 4;case Tt.sf.RATIONAL:case Tt.sf.SRATIONAL:case Tt.sf.DOUBLE:case Tt.sf.LONG8:case Tt.sf.SLONG8:case Tt.sf.IFD8:return 8;default:throw new RangeError("Invalid field type: ".concat(e))}}function dn(e){var t=e.GeoKeyDirectory;if(!t)return null;for(var r={},n=4;n<=4*t[3];n+=4){var i=Tt.P1[t[n]],a=t[n+1]?Tt.L[t[n+1]]:null,o=t[n+2],s=t[n+3],u=null;if(a){if(null==(u=e[a]))throw new Error("Could not get value of geoKey '".concat(i,"'."));"string"==typeof u?u=u.substring(s,s+o-1):u.subarray&&(u=u.subarray(s,s+o),1===o&&(u=u[0]))}else u=s;r[i]=u}return r}function vn(e,t,r,n){var i=null,a=null,o=pn(t);switch(t){case Tt.sf.BYTE:case Tt.sf.ASCII:case Tt.sf.UNDEFINED:i=new Uint8Array(r),a=e.readUint8;break;case Tt.sf.SBYTE:i=new Int8Array(r),a=e.readInt8;break;case Tt.sf.SHORT:i=new Uint16Array(r),a=e.readUint16;break;case Tt.sf.SSHORT:i=new Int16Array(r),a=e.readInt16;break;case Tt.sf.LONG:case Tt.sf.IFD:i=new Uint32Array(r),a=e.readUint32;break;case Tt.sf.SLONG:i=new Int32Array(r),a=e.readInt32;break;case Tt.sf.LONG8:case Tt.sf.IFD8:i=new Array(r),a=e.readUint64;break;case Tt.sf.SLONG8:i=new Array(r),a=e.readInt64;break;case Tt.sf.RATIONAL:i=new Uint32Array(2*r),a=e.readUint32;break;case Tt.sf.SRATIONAL:i=new Int32Array(2*r),a=e.readInt32;break;case Tt.sf.FLOAT:i=new Float32Array(r),a=e.readFloat32;break;case Tt.sf.DOUBLE:i=new Float64Array(r),a=e.readFloat64;break;default:throw new RangeError("Invalid field type: ".concat(t))}if(t!==Tt.sf.RATIONAL&&t!==Tt.sf.SRATIONAL)for(var s=0;s<r;++s)i[s]=a.call(e,n+s*o);else for(var u=0;u<r;u+=2)i[u]=a.call(e,n+u*o),i[u+1]=a.call(e,n+(u*o+4));return t===Tt.sf.ASCII?new TextDecoder("utf-8").decode(i):i}var gn=(0,he.Z)((function e(t,r,n){(0,pe.Z)(this,e),this.fileDirectory=t,this.geoKeyDirectory=r,this.nextIFDByteOffset=n})),yn=function(e){(0,ae.Z)(r,e);var t=hn(r);function r(e){var n;return(0,pe.Z)(this,r),(n=t.call(this,"No image at index ".concat(e))).index=e,n}return(0,he.Z)(r)}(fe(Error)),mn=function(){function e(){(0,pe.Z)(this,e)}var t;return(0,he.Z)(e,[{key:"readRasters",value:(t=(0,n.Z)(o().mark((function e(){var t,r,n,i,a,s,u,l,c,f,h,p,d,v,g,y,m,b,w,x,k,S,E,Z,I,A,_,T,P,O,R,D,C,M,F,L,j,G,U,N=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N.length>0&&void 0!==N[0]?N[0]:{},r=t.window,n=t.width,i=t.height,a=t.resX,s=t.resY,u=t.bbox,e.next=5,this.getImage();case 5:return l=e.sent,c=l,e.next=9,this.getImageCount();case 9:if(f=e.sent,h=l.getBoundingBox(),!r||!u){e.next=13;break}throw new Error('Both "bbox" and "window" passed.');case 13:if(!n&&!i){e.next=24;break}if(r&&(p=l.getOrigin(),d=(0,ie.Z)(p,2),v=d[0],g=d[1],y=l.getResolution(),m=(0,ie.Z)(y,2),b=m[0],w=m[1],u=[v+r[0]*b,g+r[1]*w,v+r[2]*b,g+r[3]*w]),x=u||h,!n){e.next=20;break}if(!a){e.next=19;break}throw new Error("Both width and resX passed");case 19:a=(x[2]-x[0])/n;case 20:if(!i){e.next=24;break}if(!s){e.next=23;break}throw new Error("Both width and resY passed");case 23:s=(x[3]-x[1])/i;case 24:if(!a&&!s){e.next=48;break}k=[],S=0;case 27:if(!(S<f)){e.next=36;break}return e.next=30,this.getImage(S);case 30:E=e.sent,Z=E.fileDirectory,I=Z.SubfileType,A=Z.NewSubfileType,(0===S||2===I||1&A)&&k.push(E);case 33:++S,e.next=27;break;case 36:k.sort((function(e,t){return e.getWidth()-t.getWidth()})),_=0;case 38:if(!(_<k.length)){e.next=48;break}if(T=k[_],P=(h[2]-h[0])/T.getWidth(),O=(h[3]-h[1])/T.getHeight(),c=T,!(a&&a>P||s&&s>O)){e.next=45;break}return e.abrupt("break",48);case 45:++_,e.next=38;break;case 48:return R=r,u&&(D=l.getOrigin(),C=(0,ie.Z)(D,2),M=C[0],F=C[1],L=c.getResolution(l),j=(0,ie.Z)(L,2),G=j[0],U=j[1],R=[Math.round((u[0]-M)/G),Math.round((u[1]-F)/U),Math.round((u[2]-M)/G),Math.round((u[3]-F)/U)],R=[Math.min(R[0],R[2]),Math.min(R[1],R[3]),Math.max(R[0],R[2]),Math.max(R[1],R[3])]),e.abrupt("return",c.readRasters(fn(fn({},t),{},{window:R})));case 51:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),bn=function(e){(0,ae.Z)(f,e);var t,r,i,a,s,u,l,c=hn(f);function f(e,t,r,n){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(0,pe.Z)(this,f),(i=c.call(this)).source=e,i.littleEndian=t,i.bigTiff=r,i.firstIFDOffset=n,i.cache=a.cache||!1,i.ifdRequests=[],i.ghostValues=null,i}return(0,he.Z)(f,[{key:"getSlice",value:(l=(0,n.Z)(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.bigTiff?4048:1024,e.t0=tr,e.next=4,this.source.fetch([{offset:t,length:void 0!==r?r:n}]);case 4:return e.t1=e.sent[0],e.t2=t,e.t3=this.littleEndian,e.t4=this.bigTiff,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"parseFileDirectoryAt",value:(u=(0,n.Z)(o().mark((function e(t){var r,n,i,a,s,u,l,c,f,h,p,d,v,g,y,m,b,w,x,k;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.bigTiff?20:12,n=this.bigTiff?8:2,e.next=4,this.getSlice(t);case 4:if(i=e.sent,a=this.bigTiff?i.readUint64(t):i.readUint16(t),s=a*r+(this.bigTiff?16:6),i.covers(t,s)){e.next=11;break}return e.next=10,this.getSlice(t,s);case 10:i=e.sent;case 11:u={},l=t+(this.bigTiff?8:2),c=0;case 14:if(!(c<a)){e.next=41;break}if(f=i.readUint16(l),h=i.readUint16(l+2),p=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4),d=void 0,v=void 0,g=pn(h),y=l+(this.bigTiff?12:8),!(g*p<=(this.bigTiff?8:4))){e.next=26;break}d=vn(i,h,p,y),e.next=36;break;case 26:if(m=i.readOffset(y),b=pn(h)*p,!i.covers(m,b)){e.next=32;break}d=vn(i,h,p,m),e.next=36;break;case 32:return e.next=34,this.getSlice(m,b);case 34:w=e.sent,d=vn(w,h,p,m);case 36:v=1===p&&-1===Tt.It.indexOf(f)&&h!==Tt.sf.RATIONAL&&h!==Tt.sf.SRATIONAL?d[0]:d,u[Tt.L[f]]=v;case 38:l+=r,++c,e.next=14;break;case 41:return x=dn(u),k=i.readOffset(t+n+r*a),e.abrupt("return",new gn(u,x,k));case 44:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"requestIFD",value:(s=(0,n.Z)(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ifdRequests[t]){e.next=4;break}return e.abrupt("return",this.ifdRequests[t]);case 4:if(0!==t){e.next=9;break}return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),e.abrupt("return",this.ifdRequests[t]);case 9:if(this.ifdRequests[t-1]){e.next=19;break}e.prev=10,this.ifdRequests[t-1]=this.requestIFD(t-1),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(10),!(e.t0 instanceof yn)){e.next=18;break}throw new yn(t);case 18:throw e.t0;case 19:return this.ifdRequests[t]=(0,n.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.ifdRequests[t-1];case 2:if(0!==(n=e.sent).nextIFDByteOffset){e.next=5;break}throw new yn(t);case 5:return e.abrupt("return",r.parseFileDirectoryAt(n.nextIFDByteOffset));case 6:case"end":return e.stop()}}),e)})))(),e.abrupt("return",this.ifdRequests[t]);case 21:case"end":return e.stop()}}),e,this,[[10,14]])}))),function(e){return s.apply(this,arguments)})},{key:"getImage",value:(a=(0,n.Z)(o().mark((function e(){var t,r,n=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:0,e.next=3,this.requestIFD(t);case 3:return r=e.sent,e.abrupt("return",new Jt(r.fileDirectory,r.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source));case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getImageCount",value:(i=(0,n.Z)(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,r=!0;case 2:if(!r){e.next=18;break}return e.prev=3,e.next=6,this.requestIFD(t);case 6:++t,e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof yn)){e.next=15;break}r=!1,e.next=16;break;case 15:throw e.t0;case 16:e.next=2;break;case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return i.apply(this,arguments)})},{key:"getGhostValues",value:(r=(0,n.Z)(o().mark((function e(){var t,r,n,i,a,s,u,l,c=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.bigTiff?16:8,!this.ghostValues){e.next=3;break}return e.abrupt("return",this.ghostValues);case 3:return n=(r="GDAL_STRUCTURAL_METADATA_SIZE=").length+100,e.next=7,this.getSlice(t,n);case 7:if(i=e.sent,r!==vn(i,Tt.sf.ASCII,r.length,t)){e.next=19;break}if(a=vn(i,Tt.sf.ASCII,n,t),s=a.split("\n")[0],!((u=Number(s.split("=")[1].split(" ")[0])+s.length)>n)){e.next=16;break}return e.next=15,this.getSlice(t,u);case 15:i=e.sent;case 16:l=vn(i,Tt.sf.ASCII,u,t),this.ghostValues={},l.split("\n").filter((function(e){return e.length>0})).map((function(e){return e.split("=")})).forEach((function(e){var t=(0,ie.Z)(e,2),r=t[0],n=t[1];c.ghostValues[r]=n}));case 19:return e.abrupt("return",this.ghostValues);case 20:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"close",value:function(){return"function"==typeof this.source.close&&this.source.close()}}],[{key:"fromSource",value:(t=(0,n.Z)(o().mark((function e(t,r,n){var i,a,s,u,l,c,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch([{offset:0,length:1024}],n);case 2:if(i=e.sent[0],a=new er(i),18761!==(s=a.getUint16(0,0))){e.next=9;break}u=!0,e.next=14;break;case 9:if(19789!==s){e.next=13;break}u=!1,e.next=14;break;case 13:throw new TypeError("Invalid byte order value.");case 14:if(42!==(l=a.getUint16(2,u))){e.next=19;break}c=!1,e.next=27;break;case 19:if(43!==l){e.next=26;break}if(c=!0,8===a.getUint16(4,u)){e.next=24;break}throw new Error("Unsupported offset byte-size.");case 24:e.next=27;break;case 26:throw new TypeError("Invalid magic number.");case 27:return h=c?a.getUint64(8,u):a.getUint32(4,u),e.abrupt("return",new f(t,u,c,h,r));case 29:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)})}]),f}(mn),wn=function(e){(0,ae.Z)(s,e);var t,r,i,a=hn(s);function s(e,t){var r;return(0,pe.Z)(this,s),(r=a.call(this)).mainFile=e,r.overviewFiles=t,r.imageFiles=[e].concat(t),r.fileDirectoriesPerFile=null,r.fileDirectoriesPerFileParsing=null,r.imageCount=null,r}return(0,he.Z)(s,[{key:"parseFileDirectoriesPerFile",value:(i=(0,n.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((function(e){return e.parseFileDirectoryAt(e.firstIFDOffset)}))),e.next=3,Promise.all(t);case 3:return this.fileDirectoriesPerFile=e.sent,e.abrupt("return",this.fileDirectoriesPerFile);case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getImage",value:(r=(0,n.Z)(o().mark((function e(){var t,r,n,i,a,s,u,l=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:0,e.next=3,this.getImageCount();case 3:return e.next=5,this.parseFileDirectoriesPerFile();case 5:r=0,n=0,i=0;case 8:if(!(i<this.imageFiles.length)){e.next=26;break}a=this.imageFiles[i],s=0;case 11:if(!(s<this.imageCounts[i])){e.next=22;break}if(t!==r){e.next=17;break}return e.next=15,a.requestIFD(n);case 15:return u=e.sent,e.abrupt("return",new Jt(u.fileDirectory,u.geoKeyDirectory,a.dataView,a.littleEndian,a.cache,a.source));case 17:r++,n++;case 19:s++,e.next=11;break;case 22:n=0;case 23:i++,e.next=8;break;case 26:throw new RangeError("Invalid image index");case 27:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getImageCount",value:(t=(0,n.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.imageCount){e.next=2;break}return e.abrupt("return",this.imageCount);case 2:return t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((function(e){return e.getImageCount()}))),e.next=5,Promise.all(t);case 5:return this.imageCounts=e.sent,this.imageCount=this.imageCounts.reduce((function(e,t){return e+t}),0),e.abrupt("return",this.imageCount);case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),s}(mn);function xn(){return xn=(0,n.Z)(o().mark((function e(t){var r,n,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},n=i.length>2?i[2]:void 0,e.abrupt("return",bn.fromSource(ln(t,r),n));case 3:case"end":return e.stop()}}),e)}))),xn.apply(this,arguments)}function kn(){return kn=(0,n.Z)(o().mark((function e(t){var r,n,i,a,s,u=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:[],n=u.length>2&&void 0!==u[2]?u[2]:{},i=u.length>3?u[3]:void 0,e.next=5,bn.fromSource(ln(t,n),i);case 5:return a=e.sent,e.next=8,Promise.all(r.map((function(e){return bn.fromSource(ln(e,n))})));case 8:return s=e.sent,e.abrupt("return",new wn(a,s));case 10:case"end":return e.stop()}}),e)}))),kn.apply(this,arguments)}var Sn,En="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,Zn=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En,i=arguments.length>1?arguments[1]:void 0;(0,pe.Z)(this,e),this.workers=null,this._awaitingDecoder=null,this.size=n,this.messageId=0,n&&(this._awaitingDecoder=i?Promise.resolve(i):new Promise((function(e){r.e(566).then(r.bind(r,91566)).then((function(t){e(t.create)}))})),this._awaitingDecoder.then((function(e){t._awaitingDecoder=null,t.workers=[];for(var r=0;r<n;r++)t.workers.push({worker:e(),idle:!0})})))}var t;return(0,he.Z)(e,[{key:"decode",value:(t=(0,n.Z)(o().mark((function e(t,r){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._awaitingDecoder){e.next=3;break}return e.next=3,this._awaitingDecoder;case 3:return e.abrupt("return",0===this.size?jt(t).then((function(e){return e.decode(t,r)})):new Promise((function(e){var i=n.workers.find((function(e){return e.idle}))||n.workers[Math.floor(Math.random()*n.size)];i.idle=!1;var a=n.messageId++;i.worker.addEventListener("message",(function t(r){r.data.id===a&&(i.idle=!0,e(r.data.decoded),i.worker.removeEventListener("message",t))})),i.worker.postMessage({fileDirectory:t,buffer:r,id:a},[r])})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.workers&&(this.workers.forEach((function(e){e.worker.terminate()})),this.workers=null)}}]),e}(),In=Zn,An=r(93681),_n=r(40125),Tn=r(50832),Pn=r(19160),On=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rn="STATISTICS_MAXIMUM",Dn="STATISTICS_MINIMUM";function Cn(e){try{return e.getBoundingBox()}catch(r){var t=e.fileDirectory;return[0,0,t.ImageWidth,t.ImageLength]}}function Mn(e){try{return e.getOrigin().slice(0,2)}catch(t){return[0,e.fileDirectory.ImageLength]}}function Fn(e,t){try{return e.getResolution(t)[0]}catch(r){return t.fileDirectory.ImageWidth/e.fileDirectory.ImageWidth}}function Ln(e){var t=e.geoKeys;if(!t)return null;if(t.ProjectedCSTypeGeoKey){var r="EPSG:"+t.ProjectedCSTypeGeoKey;if(!(n=(0,An.U2)(r)))(i=(0,Pn.Ne)(t.ProjLinearUnitsGeoKey))&&(n=new An.kv({code:r,units:i}));return n}if(t.GeographicTypeGeoKey){var n,i;r="EPSG:"+t.GeographicTypeGeoKey;if(!(n=(0,An.U2)(r)))(i=(0,Pn.Ne)(t.GeogAngularUnitsGeoKey))&&(n=new An.kv({code:r,units:i}));return n}return null}function jn(e){return e.getImageCount().then((function(t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e.getImage(n);return Promise.all(r)}))}function Gn(e,t){var r;return r=e.overviews?function(e){return kn.apply(this,arguments)}(e.url,e.overviews,t):function(e){return xn.apply(this,arguments)}(e.url,t),r.then(jn)}function Un(e,t,r,n,i){if(Array.isArray(e)){var a=e.length;if(!Array.isArray(t)||a!=t.length){var o=new Error(n);throw i(o),o}for(var s=0;s<a;++s)Un(e[s],t[s],r,n,i)}else if(t=t,Math.abs(e-t)>r*e)throw new Error(n)}function Nn(e){return e instanceof Int8Array?127:e instanceof Uint8Array||e instanceof Uint8ClampedArray?255:e instanceof Int16Array?32767:e instanceof Uint16Array?65535:e instanceof Int32Array?2147483647:e instanceof Uint32Array?4294967295:e instanceof Float32Array?34e37:255}var Bn=function(e){function t(t){var r=e.call(this,{state:re.Z.LOADING,tileGrid:null,projection:null,opaque:t.opaque,transition:t.transition,interpolate:!1!==t.interpolate,wrapX:t.wrapX})||this;r.sourceInfo_=t.sources;var n=r.sourceInfo_.length;r.sourceOptions_=t.sourceOptions,r.sourceImagery_=new Array(n),r.resolutionFactors_=new Array(n),r.samplesPerPixel_,r.nodataValues_,r.metadata_,r.normalize_=!1!==t.normalize,r.addAlpha_=!1,r.error_=null,r.readMethod_=t.convertToRGB?"readRGB":"readRasters",r.setKey(r.sourceInfo_.map((function(e){return e.url})).join(","));for(var i=r,a=new Array(n),o=0;o<n;++o)a[o]=Gn(r.sourceInfo_[o],r.sourceOptions_);return Promise.all(a).then((function(e){i.configure_(e)})).catch((function(e){console.error(e),i.error_=e,i.setState(re.Z.ERROR)})),r}return On(t,e),t.prototype.getError=function(){return this.error_},t.prototype.configure_=function(e){for(var t,r,n,i,a=new Array(e.length),o=new Array(e.length),s=new Array(e.length),u=0,l=e.length,c=function(l){var c=e[l],h=c.length,p=void 0,d=void 0,v=new Array(h),g=new Array(h);o[l]=new Array(h),s[l]=new Array(h);for(var y=0;y<h;++y){var m=c[y],b=m.getGDALNoData();s[l][y]=m.getGDALMetadata(0),o[l][y]=null===b?NaN:b;var w=f.sourceInfo_[l].bands;a[l]=w?w.length:m.getSamplesPerPixel();var x=h-(y+1);p||(p=Cn(m)),d||(d=Mn(m)),g[x]=Fn(m,c[0]),v[x]=[m.getTileWidth(),m.getTileHeight()]}if(t?(0,Tn.Ed)(t,p,t):t=p,r){var k="Origin mismatch for source ".concat(l,", got [").concat(d,"] but expected [").concat(r,"]");Un(r,d,0,k,f.viewRejector)}else r=d;if(i){i.length-u>g.length&&(u=i.length-g.length);var S=i[i.length-1]/g[g.length-1];f.resolutionFactors_[l]=S;var E=g.map((function(e){return e*S}));k="Resolution mismatch for source ".concat(l,", got [").concat(E,"] but expected [").concat(i,"]");Un(i.slice(u,i.length),E,.02,k,f.viewRejector)}else i=g,f.resolutionFactors_[l]=1;n?Un(n.slice(u,n.length),v,0,"Tile size mismatch for source ".concat(l),f.viewRejector):n=v,f.sourceImagery_[l]=c.reverse()},f=this,h=0;h<l;++h)c(h);for(var p=0,d=this.sourceImagery_.length;p<d;++p)for(var v=this.sourceImagery_[p];v.length<i.length;)v.unshift(void 0);if(!this.getProjection()){var g=e[0];for(p=g.length-1;p>=0;--p){var y=Ln(g[p]);if(y){this.projection=y;break}}}this.samplesPerPixel_=a,this.nodataValues_=o,this.metadata_=s;e:for(h=0;h<l;++h){if(void 0!==this.sourceInfo_[h].nodata){this.addAlpha_=!0;break}var m=o[h],b=this.sourceInfo_[h].bands;if(b){for(p=0;p<b.length;++p)if(!isNaN(m[b[p]-1])){this.addAlpha_=!0;break e}}else for(var w=0;w<m.length;++w)if(!isNaN(m[w])){this.addAlpha_=!0;break e}}var x=this.addAlpha_?1:0;this.bandCount=a.reduce((function(e,t){return e+=t}),0)+x;var k=new ne.Z({extent:t,minZoom:u,origin:r,resolutions:i,tileSizes:n});this.tileGrid=k,this.setLoader(this.loadTile_.bind(this)),this.setState(re.Z.READY),this.viewResolver({projection:this.projection,resolutions:i,center:(0,An.lO)((0,Tn.qg)(t),this.projection),extent:(0,An.Fj)(t,this.projection),zoom:0})},t.prototype.loadTile_=function(e,t,r){for(var n=(0,N.Pq)(this.tileGrid.getTileSize(e)),i=this.sourceImagery_.length,a=new Array(i),o=this.addAlpha_,s=this.bandCount,u=this.samplesPerPixel_,l=this.nodataValues_,c=this.sourceInfo_,f=function(i){var o=c[i],s=h.resolutionFactors_[i],u=[Math.round(t*(n[0]*s)),Math.round(r*(n[1]*s)),Math.round((t+1)*(n[0]*s)),Math.round((r+1)*(n[1]*s))],f=h.sourceImagery_[i][e],p=void 0;o.bands&&(p=o.bands.map((function(e){return e-1})));var d=void 0;d=isNaN(o.nodata)?p?p.map((function(e){return l[i][e]})):l[i]:o.nodata,a[i]=f[h.readMethod_]({window:u,width:n[0],height:n[1],samples:p,fillValue:d,pool:(Sn||(Sn=new In),Sn),interleave:!1})},h=this,p=0;p<i;++p)f(p);var d=n[0]*n[1],v=d*s,g=this.normalize_,y=this.metadata_;return Promise.all(a).then((function(e){var t;t=g?new Uint8Array(v):new Float32Array(v);for(var r,n=0,a=0;a<d;++a){for(var s=o,f=0;f<i;++f){var h=c[f],p=h.min,m=h.max,b=void 0,w=void 0;if(g){var x=y[f][0];void 0===p&&(p=x&&Dn in x?parseFloat(x.STATISTICS_MINIMUM):(r=e[f][0])instanceof Int8Array?-128:r instanceof Int16Array?-32768:r instanceof Int32Array?-2147483648:r instanceof Float32Array?12e-39:0),void 0===m&&(m=x&&Rn in x?parseFloat(x.STATISTICS_MAXIMUM):Nn(e[f][0])),w=-p*(b=255/(m-p))}for(var k=0;k<u[f];++k){var S=e[f][k][a],E=void 0;if(E=g?(0,_n.uZ)(b*S+w,0,255):S,o){var Z=h.nodata;if(void 0===Z){var I=void 0;I=h.bands?h.bands[k]-1:k,Z=l[f][I]}S!==Z&&(s=!1,t[n]=E)}else t[n]=E;n++}}o&&(s||(t[n]=255),n++)}return t}))},t}(te);Bn.prototype.getView;var zn=Bn,Vn=r(45505),Kn=r(89044),qn=r(51842),Hn=r(18935),Wn=r(96534),Yn=r(18559),Xn=(0,j.Z)("div")({overflow:"hidden"}),$n=(0,j.Z)(T.Z)({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),Qn=(0,j.Z)(Xn)({flex:"1 1 auto"}),Jn=(0,j.Z)("div")({flex:"0 0 auto"}),ei=(0,j.Z)("ul")({listStyle:"none",margin:0,padding:0,"& > li":{marginTop:"5px","&:firstChild":{marginTop:0}}}),ti={url:"",bands:"1,2,3",nodata:"0",min:"0",max:"255"},ri=(0,j.Z)("div")({position:"absolute",top:0,left:0,padding:"2px 4px",fontSize:10,pointerEvents:"none"}),ni=function(){var e=(0,Wn.e)(),t=s.useRef(null),r=s.useRef(null),a=s.useState([]),f=a[0],h=a[1],p=s.useState(null),d=p[0],v=p[1],g=s.useState(),y=g[0],m=g[1],b=(0,Yn.H)({defaultItems:[],mode:"topbottom",drop:function(e,t){e.index!==t.index&&h((function(r){if(t.index<0||e.index<0||e.index>r.length-1||t.index>r.length-1)return r;var n=(0,i.Z)(r),a=n[e.index];return n.splice(e.index,1),n.splice(t.index,0,a),n}))}}),w=(0,l.cI)({mode:"onSubmit",criteriaMode:"all",defaultValues:{sources:[ti]}}),x=w.control,k=w.handleSubmit,S=w.reset,E=w.setValue,Z=(0,l.Dq)({name:"sources",control:x}),I=Z.fields,A=Z.append,j=Z.remove,V=s.useCallback((function(t){h((function(r){var n=(0,i.Z)(r),a=n.findIndex((function(e){return t===e.id})),o=n[a];return o&&e.map?(e.map.removeLayer(o.layer),n.splice(a,1),n):n}))}),[e.map]),K=s.useCallback((function(e,t){h((function(r){var n=(0,i.Z)(r),a=n.findIndex((function(t){return e===t.id})),o=n[a];return o&&o.error!==t?(o.error=t,n):r}))}),[]),q=b.reset;s.useEffect((function(){var e=0;f.forEach((function(t){t.layer.setZIndex(e++)})),q((0,i.Z)(f))}),[f,q]);var H=s.useCallback(function(){var e=(0,n.Z)(o().mark((function e(t,r,n,a){var s,u,l,c,f,p,d,g,y,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getView();case 2:if(s=e.sent,(u=null==s?void 0:s.projection)instanceof An.kv){e.next=7;break}return v("NotFoundCrs"),e.abrupt("return");case 7:if(l=u.getCode(),(0,An.U2)(l)){e.next=19;break}e.prev=9,c=Hn.utils.getCrs(l),qn.default.defs(l,c),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(9),v("UnsupportedCrs"),e.abrupt("return");case 18:(0,Kn.z)(qn.default);case 19:(f=r.getTileGrid())&&(p=new z.Z({tileGrid:f,url:"{z},{x},{y}",interpolate:!1,tileLoadFunction:function(e,t){var i=t.split(",").map(Number),a=r.getTile(i[0],i[1],i[2],1,u),o=function(){var t=(0,N.Pq)(f.getTileSize(i[0])),r=document.createElement("canvas");r.width=t[0],r.height=t[1];var n=r.getContext("2d");if(n){var o=n.getImageData(0,0,r.width,r.height),s=o.data,u=a.getData();if(!(u instanceof DataView)){for(var l=u.length,c=0;c<l;c++)s[c]=u[c];n.putImageData(o,0,0),e.getImage().src=r.toDataURL()}}};if(a.getState()===W.Z.LOADED)o();else{a.addEventListener("change",(function e(){var t=a.getState();t!==W.Z.LOADING&&(a.removeEventListener("change",e),t===W.Z.LOADED&&o(),t===W.Z.ERROR&&K(n,"FailedLoadTile"))})),a.load()}},projection:u}),d=new B.Z({source:p}),t.addLayer(d),h((function(e){return[].concat((0,i.Z)(e),[{id:n,layer:d,sources:a,error:null}])})),(g=s.extent)&&(y=g,"EPSG:3857"!==l&&((m=(0,An.$A)(g,l,"EPSG:3857"))[0]>m[2]&&(m[2]+=2*(0,qn.default)(l,"EPSG:3857",[180,0])[0]),y=m),t.getView().fit(y,{padding:[40,20,40,20],maxZoom:20})));case 21:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,r,n,i){return e.apply(this,arguments)}}(),[K]),Y=s.useCallback((function(t){var r=t.sources,n=t.id;m(!0);var i=new zn({sources:r});if(i.getState()===re.Z.READY)e.map&&H(e.map,i,n,r),m(!1);else{i.addEventListener("change",(function t(){var a=i.getState();a===re.Z.ERROR&&(i.removeEventListener("change",t),v("FailedLoadSource"),m(!1)),a===re.Z.READY&&(i.removeEventListener("change",t),e.map&&H(e.map,i,n,r),m(!1))}))}}),[e.map,H]),X=s.useCallback((function(e){for(var t="",r=0,n=[],i=0;i<e.sources.length;i++){var a=e.sources[i],o=a.bands.split(",").map((function(e){return parseInt(e,10)}));r+=o.length;var s=parseFloat(a.min),u=parseFloat(a.max),l=parseFloat(a.nodata),c=a.url,h=c;n.push({url:c,name:c.split("/").pop()||"",bands:o,min:s,max:u,nodata:l}),h.length>0&&(t+=h+"_"+o.join("")+"_"+a.min+"_"+a.max+"_"+a.nodata)}if(1===n.length&&1===r){var p=n[0].bands[0];n[0].bands=[p,p,p]}else if(3!==r)return void v("UnmatchBands");f.findIndex((function(e){return t===e.id}))>=0?v("Duplicate"):Y({id:t,sources:n})}),[Y,f]);s.useEffect((function(){!1===y&&S()}),[y,S]);var $=s.useCallback((function(){E("sources",[{url:"https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/2020/S2A_36QWD_20200701_0_L2A/TCI.tif",bands:"1,2,3",nodata:"0",min:"0",max:"255"}]),v(null)}),[E,v]),Q=s.useCallback((function(){E("sources",[{url:"https://landsat-pds.s3.amazonaws.com/c1/L8/139/045/LC08_L1TP_139045_20170304_20170316_01_T1/LC08_L1TP_139045_20170304_20170316_01_T1_B4.TIF",bands:"1",nodata:"0",min:"1",max:"15978"},{url:"https://landsat-pds.s3.amazonaws.com/c1/L8/139/045/LC08_L1TP_139045_20170304_20170316_01_T1/LC08_L1TP_139045_20170304_20170316_01_T1_B3.TIF",bands:"1",nodata:"0",min:"1",max:"15239"},{url:"https://landsat-pds.s3.amazonaws.com/c1/L8/139/045/LC08_L1TP_139045_20170304_20170316_01_T1/LC08_L1TP_139045_20170304_20170316_01_T1_B2.TIF",bands:"1",nodata:"0",min:"1",max:"14947"}]),v(null)}),[E,v]);return s.useEffect((function(){var t=null;return e.map&&r.current&&(t=new Vn.Z({coordinateFormat:function(e){return e?"lon: "+e[0].toFixed(4)+", lat: "+e[1].toFixed(4):""},projection:"EPSG:4326",className:"",target:r.current}),e.map.addControl(t)),function(){e.map&&t&&e.map.removeControl(t)}}),[e.map]),s.createElement(s.Fragment,null,s.createElement(c.ZP,null),s.createElement(u.Helmet,null,s.createElement("title",null,"Display Remote GeoTIFF"),s.createElement("meta",{name:"description",content:"Display Remote GeoTIFF on map."}),s.createElement("link",{rel:"canonical",href:"https://yonda-yonda.github.io/exmap/geotiff"}),s.createElement("link",{rel:"icon",type:"image/x-icon",href:"https://github.githubassets.com/favicon.ico"}),s.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),s.createElement("meta",{name:"twitter:card",content:"summary_large_image"}),s.createElement("meta",{name:"twitter:title",content:"Display Remote GeoTIFF"}),s.createElement("meta",{name:"twitter:description",content:"リモートのGeoTIFFを表示します"}),s.createElement("meta",{property:"og:url",content:"https://yonda-yonda.github.io/exmap/geotiff"}),s.createElement("meta",{name:"twitter:image",content:"https://yonda-yonda.github.io/exmap/image/twitter_geotiff.png"})),s.createElement(P.Z,null,s.createElement(T.Z,{variant:"h2",component:"h1"},"Display Remote GeoTIFF"),s.createElement(O.Z,{my:4,spacing:4},s.createElement("div",null,s.createElement(R.ZP,{container:!0,spacing:2},s.createElement(R.ZP,{item:!0,xs:9},s.createElement("div",{style:{position:"relative"},ref:t},s.createElement("div",{ref:e.ref,style:{width:"100%",height:"340px"}}),s.createElement(ri,{ref:r}))),s.createElement(R.ZP,{item:!0,xs:3},f.length>0?s.createElement(ei,null,b.items.map((function(e){return s.createElement("li",Object.assign({key:e.key,ref:e.ref},e.trigger),s.createElement(O.Z,{direction:"row",spacing:1,justifyContent:"space-between",alignItems:"center"},s.createElement(Qn,null,e.value.sources.map((function(t,r){return s.createElement(D.Z,{key:r,title:s.createElement(T.Z,Object.assign({variant:"caption",display:"block"},e.propagation),t.name,s.createElement("br",null),"bands: ",t.bands.join(","),s.createElement("br",null),"range:"," ",t.min+" to "+t.max,s.createElement("br",null),"nodata: ",t.nodata,t.url),arrow:!0,placement:"left"},s.createElement($n,{variant:"body2"},t.name))})),"FailedLoadTile"===e.value.error&&s.createElement(T.Z,{variant:"caption",display:"block"},"Failed to load tiles. ",s.createElement("br",null),"タイルの読み込みに失敗しました。")),s.createElement(Jn,e.propagation,s.createElement(C.Z,{size:"small",variant:"outlined",onClick:function(){V(e.value.id)}},"REMOVE"))))}))):s.createElement(T.Z,null,"Nothing to display.")))),s.createElement("div",null,s.createElement("form",{onSubmit:k(X)},s.createElement(O.Z,{spacing:2},s.createElement("div",null,s.createElement(C.Z,{variant:"outlined",onClick:$,size:"small",sx:{mr:1}},"sample 1"),s.createElement(C.Z,{variant:"outlined",onClick:Q,size:"small"},"sample 2")),I.map((function(e,t){return s.createElement("div",{key:e.id},s.createElement(l.Qr,{control:x,name:"sources."+t+".url",render:function(e){var t=e.field,r=e.fieldState,n=r.invalid,i=r.error;return s.createElement(M.Z,{component:"fieldset",error:n,fullWidth:!0},s.createElement(F.Z,Object.assign({},t,{label:"url",size:"small",error:n,placeholder:"https://",disabled:y})),"required"===(null==i?void 0:i.type)&&s.createElement(L.Z,null,"Required. ",s.createElement("br",null),"必須です。入力してください。"),"pattern"===(null==i?void 0:i.type)&&s.createElement(L.Z,null,"Not matched URL pattern.",s.createElement("br",null),"URLの形式が正しくありません。"))},rules:{required:!0,pattern:/^(https?):\/\/[^ "]+$/}}),s.createElement(O.Z,{direction:"row",spacing:2,sx:{mt:2,mb:1}},s.createElement(l.Qr,{control:x,name:"sources."+t+".bands",render:function(e){var t=e.field,r=e.fieldState,n=r.invalid,i=r.error;return s.createElement(M.Z,{component:"fieldset",error:n,fullWidth:!0},s.createElement(F.Z,Object.assign({},t,{label:"bands",size:"small",error:n,placeholder:"1,2,3",disabled:y})),"required"===(null==i?void 0:i.type)&&s.createElement(L.Z,null,"Required. ",s.createElement("br",null),"必須です。入力してください。"),"pattern"===(null==i?void 0:i.type)&&s.createElement(L.Z,null,"Must be positive numbers(maximum of three) separated by commas.",s.createElement("br",null),"カンマ区切りで正数（最大で3つ）を入力してください。"))},rules:{required:!0,pattern:/^\s*([1-9]\d*){1,}(\s*,\s*([1-9]\d*)){0,2}\s*$/}}),s.createElement(l.Qr,{control:x,name:"sources."+t+".nodata",render:function(e){var t=e.field,r=e.fieldState,n=r.invalid,i=r.error;return s.createElement(M.Z,{component:"fieldset",error:n,fullWidth:!0},s.createElement(F.Z,Object.assign({},t,{label:"nodata",size:"small",error:n,disabled:y})),"required"===(null==i?void 0:i.type)&&s.createElement(L.Z,null,"Required. ",s.createElement("br",null),"必須です。入力してください。"),"pattern"===(null==i?void 0:i.type)&&s.createElement(L.Z,null,"must be a number. ",s.createElement("br",null),"数値を入力してください。"))},rules:{required:!0,pattern:/^((\+|-){0,1}[1-9]\d*|0)(\.\d+)?$/}}),s.createElement(l.Qr,{control:x,name:"sources."+t+".min",render:function(e){var t=e.field,r=e.fieldState,n=r.invalid,i=r.error;return s.createElement(M.Z,{component:"fieldset",error:n,fullWidth:!0},s.createElement(F.Z,Object.assign({},t,{label:"min",size:"small",error:n,disabled:y})),"required"===(null==i?void 0:i.type)&&s.createElement(L.Z,null,"Required. ",s.createElement("br",null),"必須です。入力してください。"),"pattern"===(null==i?void 0:i.type)&&s.createElement(L.Z,null,"must be a number. ",s.createElement("br",null),"数値を入力してください。"))},rules:{required:!0,pattern:/^((\+|-){0,1}[1-9]\d*|0)(\.\d+)?$/}}),s.createElement(l.Qr,{control:x,name:"sources."+t+".max",render:function(e){var t=e.field,r=e.fieldState,n=r.invalid,i=r.error;return s.createElement(M.Z,{component:"fieldset",error:n,fullWidth:!0},s.createElement(F.Z,Object.assign({},t,{label:"max",size:"small",error:n,disabled:y})),"required"===(null==i?void 0:i.type)&&s.createElement(L.Z,null,"Required. ",s.createElement("br",null),"必須です。入力してください。"),"pattern"===(null==i?void 0:i.type)&&s.createElement(L.Z,null,"must be a number. ",s.createElement("br",null),"数値を入力してください。"))},rules:{required:!0,pattern:/^((\+|-){0,1}[1-9]\d*|0)(\.\d+)?$/}})),s.createElement("div",null,t>0&&s.createElement(_,{color:"primary",size:"small","aria-label":"Delete",component:"span",onClick:function(){j(t)}},s.createElement(U.Z,null)),t===I.length-1&&t<2&&s.createElement(_,{color:"primary",size:"small","aria-label":"Add",component:"span",onClick:function(){A(ti)}},s.createElement(G.Z,null))))}))),s.createElement(M.Z,{error:!!d,sx:{mt:3}},s.createElement("div",null,s.createElement(C.Z,{variant:"contained",type:"submit",onClick:function(){v(null)},disabled:y},"Add Layer")),"FailedLoadSource"===d&&s.createElement(L.Z,{sx:{ml:0}},"Failed to load source. ",s.createElement("br",null),"ファイルの読み込みに失敗しました。"),"Duplicate"===d&&s.createElement(L.Z,{sx:{ml:0}},"Duplicate Layer. ",s.createElement("br",null),"すでに同じレイヤーが存在します。"),"UnmatchBands"===d&&s.createElement(L.Z,{sx:{ml:0}},"Number of Bands must be 3. ",s.createElement("br",null),"バンド数の合計が3になるよう設定してください。"),"NotFoundCrs"===d&&s.createElement(L.Z,{sx:{ml:0}},"Not found CRS. ",s.createElement("br",null),"ファイルの投影情報を取得することができませんでした。"),"UnsupportedCrs"===d&&s.createElement(L.Z,{sx:{ml:0}},"Unsupported CRS. ",s.createElement("br",null),"サポート外の投影系でファイルが作られています。")))))))}},29377:function(){},78391:function(){},11555:function(){},61120:function(e,t,r){"use strict";function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}r.d(t,{Z:function(){return n}})},60136:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(89611);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,n.Z)(e,t)}},6215:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:function(){return a}});var i=r(97326);function a(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}}}]);
//# sourceMappingURL=component---src-pages-geotiff-index-tsx-ca02aa3de1915c9aab27.js.map